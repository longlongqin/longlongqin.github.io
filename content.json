{"meta":{"title":"é¾™é¾™â€˜S BLOG","subtitle":"","description":"","author":"longlongqin","url":"https://longlongqin.github.io","root":"/"},"pages":[{"title":"404 Not Found","date":"2020-04-19T14:35:12.699Z","updated":"2020-04-19T14:35:12.699Z","comments":true,"path":"404.html","permalink":"https://longlongqin.github.io/404.html","excerpt":"","text":""},{"title":"å…³äº","date":"2020-03-30T06:26:07.079Z","updated":"2020-03-30T06:26:07.079Z","comments":true,"path":"about/index.html","permalink":"https://longlongqin.github.io/about/index.html","excerpt":"","text":"è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ä¸€ä¸ªæœ¬ç§‘ç”ŸåŒ–ç¯æçš„è·¨è€ƒç”Ÿï¼Œç°ä¸“ä¸šè½¯ä»¶å·¥ç¨‹ã€‚æœ¬åšå®¢ä¸»è¦è®°å½•è‡ªå·±çš„å­¦ä¹ ä¹‹è·¯ã€‚ç°é˜¶æ®µå­¦ä¹ å†…å®¹ï¼šç¼–è¯‘åŸç†Letâ€™s Build A Simple Interpreterè®¡ç®—å‡ ä½•é‚“ä¿Šè¾‰è€å¸ˆçš„å­¦å ‚åœ¨çº¿è¯¾ç¨‹C/C++åŸºç¡€å­¦ä¹ ï¼šhttps://www.learncpp.com/"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2020-03-16T13:58:21.496Z","updated":"2020-03-15T14:08:19.000Z","comments":true,"path":"categories/index.html","permalink":"https://longlongqin.github.io/categories/index.html","excerpt":"","text":""},{"title":"ç•™è¨€æ¿","date":"2020-03-21T17:19:06.339Z","updated":"2020-03-15T14:08:19.000Z","comments":true,"path":"comment/index.html","permalink":"https://longlongqin.github.io/comment/index.html","excerpt":"","text":"æ¬¢è¿å‰æ¥çŒæ°´ã€‚ã€‚ã€‚"},{"title":"Projects","date":"2020-03-21T17:16:38.679Z","updated":"2020-03-15T14:08:19.000Z","comments":true,"path":"projects/index.html","permalink":"https://longlongqin.github.io/projects/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2020-03-16T13:21:42.616Z","updated":"2020-03-15T14:08:19.000Z","comments":true,"path":"tags/index.html","permalink":"https://longlongqin.github.io/tags/index.html","excerpt":"","text":""},{"title":"Friends","date":"2020-04-19T14:38:29.545Z","updated":"2020-04-19T14:38:29.545Z","comments":true,"path":"friends/index.html","permalink":"https://longlongqin.github.io/friends/index.html","excerpt":"","text":"æ¬¢è¿å’Œæˆ‘äº¤æ¢å‹é“¾å„ä½å¤§ä½¬æƒ³äº¤æ¢å‹é“¾çš„è¯å¯ä»¥åœ¨ä¸‹æ–¹ç•™è¨€ï¼Œå¿…é¡»è¦æä¾›åç§°ã€å¤´åƒå’Œé“¾æ¥å“¦~è¯·å…ˆå°†æœ¬ç«™æ·»åŠ åˆ°ä½ æ»´å‹é“¾ä¸­å–”ï¼Œè°¢è°¢~å‹é“¾æäº¤æ¨¡æ¿ï¼š123456- name: é¾™é¾™â€˜S Blog avatar: https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg url: https://www.longlongqin.github.io backgroundColor: '#FFA500' textColor: '#624739' tag: #ä½ çš„ç®€ä»‹èƒŒæ™¯ã€å­—ä½“é¢œè‰²å¯ä»¥æŒ‰è‡ªå·±é£æ ¼è®¾ç½®å‘€ï¼"},{"title":"","date":"2020-04-19T14:38:29.545Z","updated":"2020-04-19T14:38:29.545Z","comments":true,"path":"å­¦ä¹ ç¬”è®°/index.html","permalink":"https://longlongqin.github.io/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html","excerpt":"","text":"å­¦ä¹ ç¬”è®°ç¼–è¯‘åŸç†Letâ€™s Build A Simple Interpreterpart1ã€part2ã€part3ã€part4ã€part5ã€part6ã€part7ã€part8ã€part9è®¡ç®—å‡ ä½•å­¦å ‚åœ¨çº¿è¯¾ç¨‹-é‚“ä¿Šè¾‰è€å¸ˆå‡¸åŒ…ï¼šConvex-Hull-å‡¸åŒ…ã€å¢é‡æ„é€ ã€Jarvis-Marchã€Lower-Boundã€Graham Scanã€Divide-And-Conquerererè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾2 ç”µå­è®¡ç®—æœºã€3 å¸ƒå°”é€»è¾‘å’Œé€»è¾‘é—¨ã€32 é»‘å®¢&amp;æ”»å‡»C/C++Cæœ¬åŠæ³•å­¦CC++1ã€www.learncpp.comLearnCppæè¿°chapter0~1chapter2functions and fileschapter4Fundamental Data Typeschapter3debugging C++ programschapter5OperatorschapterOBit Manipulation (optional chapter)chapter6Object Scope and Conversions2ã€åŸºäºé¡¹ç›®å­¦ä¹ (project-based-learning)Build an Interpreter(Chapter 14 on is written in C)Memory Allocators 101 - Write a simple memory allocatoré¡¹ç›®ç»ƒä¹ æˆ‘çš„é¡¹ç›®ç»ƒä¹ ç›¸åº”çš„githubä»“åº“ï¼šhttps://github.com/longlongqin/learnCode_based_projectç¨‹åºç¾Šæ¨èé¡¹ç›®æè¿°è¿›åº¦CJSONä¸€ä¸ªè¶…è½»é‡çš„ã€å¯ç§»æ¤çš„ã€å•æ–‡ä»¶çš„ã€ç®€å•åˆ°å¯ä»¥æˆä¸ºANSI-Cå…¼å®¹çš„JSONè§£æå™¨ï¼Œåœ¨MITè®¸å¯ä¸‹ã€‚ã€ä¸€äº›ç›¸å…³æ•™ç¨‹ï¼š1ï¸âƒ£ä»é›¶å¼€å§‹çš„ JSON åº“æ•™ç¨‹ï¼Œ2ï¸âƒ£cJsonæºç å’Œæºç åˆ†æã€‘ğŸ”¥è¿›è¡Œä¸­Tinyhttpdæ˜¯J. David Blackstoneåœ¨1999å¹´å†™çš„ä¸€ä¸ªä¸åˆ° 500 è¡Œçš„è¶…è½»é‡å‹ Http Serverï¼Œç”¨æ¥å­¦ä¹ éå¸¸ä¸é”™ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬çœŸæ­£ç†è§£æœåŠ¡å™¨ç¨‹åºçš„æœ¬è´¨ã€‚å®˜ç½‘MyTinySTLåŸºäº C++11 çš„ tinySTLï¼Œï¼ˆå­¦STLæ—¶ï¼Œå¯ä»¥å†™ä¸€å†™ï¼‰oatppç”¨C++å®ç°çš„è½»é‡çº§çš„Webæ¡†æ¶redisè¿™ä¸ªå‡ ä¸‡è¡Œä»£ç ï¼Œç°åœ¨å¹²ä¸åŠ¨åŸºäºé¡¹ç›®å­¦ä¹ (project-based-learning)é¡¹ç›®æè¿°è¿›åº¦Build an Interpreter(Chapter 14 on is written in C)ä½¿ç”¨Cè¯­è¨€å†™ä¸€ä¸ªè§£é‡Šå™¨æš‚åœLinuxé¸Ÿå“¥çš„ç§æˆ¿èœ 0.è®¡ç®—æœºæ¦‚è®º 1.Linuxæ˜¯ä»€ä¹ˆ 2.ä¸»æœºè§„åˆ’ä¸ç¡¬ç›˜åˆ†å‰² 3.å®‰è£ CentOS7.xã€æœªè¯»ï¼Œæˆ‘ç›´æ¥ç”¨çš„é˜¿é‡Œäº‘æœåŠ¡å™¨ã€‘ 4.é¦–æ¬¡ç™»é™†ä¸çº¿ä¸Šæ±‚åŠ©"},{"title":"","date":"2020-04-19T14:38:29.545Z","updated":"2020-04-19T14:38:29.545Z","comments":true,"path":"easysearch/about/index.html","permalink":"https://longlongqin.github.io/easysearch/about/index.html","excerpt":"","text":"å…³äºæœ¬é¡µä¸¨é¾™é¾™'S BLOG å…³äºæœ¬é¡µåœ¨è‡ªå·±ç”µè„‘ä¸Šå»ºç«‹äº†å¾ˆå¤šä¹¦ç­¾ï¼Œä½†æ˜¯ä¸æ–¹ä¾¿ä½¿ç”¨ã€‚å°±æƒ³å»ºç«‹ä¸€ä¸ªåœ¨çº¿çš„ç½‘å€å¯¼èˆªï¼Œè¿™æ ·æ— è®ºåœ¨å“ªéƒ½å¯ä»¥æ–¹ä¾¿å¿«æ·çš„ä½¿ç”¨å¯¼èˆªäº†ã€‚powered by webstack.ccå…³äºæˆ‘longlongqinä¸€ä¸ªè·¨è€ƒè½¯å·¥çš„åˆå­¦è€…åŠªåŠ›å­¦ä¹ C++ 2020 - 2020 | ä¸¨ DESIGNED BY Viggo ä¸¨ MODIFIED BY longlongqin!function(e){var c=Array.prototype.slice.call(document.querySelectorAll(\"img[data-original]\"));function i(){for(var r=0;r"},{"title":"","date":"2020-04-19T14:38:29.851Z","updated":"2020-04-19T14:38:29.851Z","comments":true,"path":"easysearch/index.html","permalink":"https://longlongqin.github.io/easysearch/index.html","excerpt":"","text":"easysearchä¸¨é¾™é¾™'S BLOG å¼€å‘ç¤¾åŒº ä»£ç æ‰˜ç®¡ è¯­è¨€æ–‡æ¡£ æŠ€èƒ½è®­ç»ƒåœ¨çº¿å¹³å°é«˜æ ¡å¹³å°æ¸¸æˆç¼–ç¨‹ HOT Pythoneræ–‡æ¡£èµ„æ–™åšå®¢æ”¶è—å­¦ä¹ èµ„æºç»„ç»‡ç¤¾åŒºçˆ¬è™«ç›¸å…³ HOT å­¦ä¹ æ•™ç¨‹åœ¨çº¿è§†é¢‘åšå®¢è®ºå›å­¦ä¹ å¹³å° å¸¸ç”¨å·¥å…·ç«™é•¿å·¥å…· HOTITå·¥å…·ç®±æ–‡ä»¶å¤„ç† HOTè®¾è®¡ç´ ææ•ˆç‡è½¯ä»¶ HOT æœåŠ¡å¹³å° äº‘æœåŠ¡å•† ä¼—åŒ…å¹³å° æ›´å¤šå¯¼èˆª FORMEè®¡ç®—å‡ ä½•C++å…³æ³¨çš„åšå®¢ HOTå¸¸ç”¨ç½‘å€å…¬ä¼—å·&å†™ä½œ å…³äºæœ¬é¡µ éšè—/æ˜¾ç¤ºä¾§è¾¹æ  åšå®¢é¦–é¡µ å‹æƒ…é“¾æ¥ è¯„è®ºç•™è¨€ å…³äºåšä¸»!function(e,t,n,a,o,i,c,r){r=function(){i=t.createElement(n),c=t.getElementsByTagName(n)[0],i.src=o,i.charset=\"utf-8\",i.async=1,c.parentNode.insertBefore(i,c)},e.SeniverseWeatherWidgetObject=a,e[a]||(e[a]=function(){(e[a].q=e[a].q||[]).push(arguments)}),e[a].l=+new Date,e.attachEvent?e.attachEvent(\"onload\",r):e.addEventListener(\"load\",r,!1)}(window,document,\"script\",\"SeniverseWeatherWidget\",\"//cdn.sencdn.com/widget2/static/js/bundle.js?t=\"+parseInt(((new Date).getTime()/1e8).toString(),10)),window.SeniverseWeatherWidget(\"show\",{flavor:\"slim\",location:\"WX4FBXXFKE4F\",geolocation:!0,language:\"auto\",unit:\"c\",theme:\"auto\",token:\"a39cd5a0-4024-4cb2-85c6-0250317058db\",hover:\"enabled\",container:\"tp-weather-widget\"})å¼€å‘ç¤¾åŒºStack Overflowå…¨çƒæœ€å—ç¨‹åºå‘˜æ¬¢è¿çš„å¼€å‘ç¤¾åŒºV2EXV2EX = way to explore SegmentFaultæ”¹å˜å¹¶æå‡äººä»¬è·å–çŸ¥è¯†çš„æ–¹å¼å’Œæ•ˆç‡ï¼Œå¸®åŠ©æ›´å¤šçš„å¼€å‘è€…è·å¾—æˆé•¿ä¸æˆåŠŸ å¼€æºä¸­å›½å›½å†…æœ€å¤§çš„å¼€æºæŠ€æœ¯ç¤¾åŒº ITeyeITeyeè½¯ä»¶å¼€å‘äº¤æµç¤¾åŒº - Javaç¼–ç¨‹ Springæ¡†æ¶ AjaxæŠ€æœ¯ agileæ•æ·è½¯ä»¶å¼€å‘ ruby on railså®è·µ 51CTOæŠ€æœ¯æˆå°±æ¢¦æƒ³ ITPUBå…¨çƒæœ€å¤§çš„å­¦ä¹ åˆ†äº«å¹³å° çŸ¥ä¹å›½å†…æœ€å—æ¬¢è¿çš„çŸ¥è¯†æ€§é—®ç­”ç¤¾åŒº ç®€ä¹¦åˆ›ä½œä½ çš„åˆ›ä½œ äº‘+ç¤¾åŒºæ¥è‡ªè…¾è®¯çš„å¼€å‘è€…æŠ€æœ¯åˆ†äº«ç¤¾åŒºäº‘æ –ç¤¾åŒºé˜¿é‡Œäº‘é¢å‘å¼€å‘è€…çš„å¼€æ”¾å‹æŠ€æœ¯å¹³å° æ˜é‡‘ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒºCSDNå…¨çƒæœ€å¤§ä¸­æ–‡ITç¤¾åŒºï¼Œä¸ºITä¸“ä¸šæŠ€æœ¯äººå‘˜æä¾›æœ€å…¨é¢çš„ä¿¡æ¯ä¼ æ’­å’ŒæœåŠ¡å¹³å°åšå®¢å›­ä»£ç æ”¹å˜ä¸–ç•Œä»£ç æ‰˜ç®¡Githubå…¨çƒæœ€å¤§çš„é¢å‘å¼€æºåŠç§æœ‰è½¯ä»¶é¡¹ç›®çš„æ‰˜ç®¡å¹³å°Gitlabæ”¯æŒæ— é™çš„å…¬æœ‰é¡¹ç›®å’Œç§æœ‰é¡¹ç›®çš„ä»£ç æ‰˜ç®¡å¹³å°BitbucketåŒæ—¶æ”¯æŒ Git å’Œ Mercurial è¿™ä¸¤ä¸ªç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œå…è´¹çš„ç§æœ‰ä»“åº“ï¼Œæ”¯æŒ5äººä»¥å†…çš„åˆä½œå¼€å‘SourceForgeåˆç§° SF.netï¼Œæ˜¯å¼€æºè½¯ä»¶å¼€å‘è€…è¿›è¡Œå¼€å‘ç®¡ç†çš„é›†ä¸­å¼åœºæ‰€Codingå›½å†…é¦–ä¸ªä¸€ç«™å¼äº‘ç«¯è½¯ä»¶æœåŠ¡å¹³å°Giteeå›½å†…æœ€å¤§çš„å¼€æºç¤¾åŒº OSChina çš„ä»£ç æ‰˜ç®¡å¹³å°é˜¿é‡Œäº‘ä»£ç æ‰˜ç®¡é˜¿é‡Œäº‘æ——ä¸‹ä»£ç æ‰˜ç®¡å¹³å°ç™¾åº¦æ•ˆç‡äº‘ç™¾åº¦äº‘æ——ä¸‹çš„ Git ä»£ç æ‰˜ç®¡å¹³å°è¯­è¨€æ–‡æ¡£Zealè„±æœºæ–‡æ¡£æµè§ˆå™¨ï¼ŒåŒ…å«196ç§è¯­è¨€APIæ–‡æ¡£ï¼Œæ”¯æŒWindowsã€Linuxå’ŒmacOSDashé€‚ç”¨äºMac OSå¹³å°çš„è½¯ä»¶ç¼–ç¨‹æ–‡æ¡£ç®¡ç†å·¥å…·,å¯ä»¥æµè§ˆAPIæ–‡æ¡£,ä»¥åŠç®¡ç†ä»£ç ç‰‡æ®µå·¥å…·ã€‚è‡ªå¸¦äº†ä¸°å¯Œçš„APIæ–‡æ¡£,æ¶‰åŠå„ç§ä¸»æµçš„ç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶DevDocsåœ¨å¿«é€Ÿï¼Œæœ‰æ¡ç†å’Œå¯æœç´¢çš„ç•Œé¢ä¸­ç»“åˆäº†å¤šä¸ªAPIæ–‡æ¡£ï¼Œå¯ä»¥åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šç¦»çº¿è¿è¡Œï¼Œå¹¶ä¸”å¯ä»¥å®‰è£…åœ¨Chromeä¸ŠC/C++C/C++ API æ–‡æ¡£C#C# API æ–‡æ¡£JavaJava API æ–‡æ¡£.NET.NET API æ–‡æ¡£PHPPHP API æ–‡æ¡£JavaScriptJavaScript API æ–‡æ¡£PythonPython API æ–‡æ¡£AndroidAndroid API æ–‡æ¡£iOSiOS API æ–‡æ¡£SQLSQL API æ–‡æ¡£SwiftSwift API æ–‡æ¡£RubyRuby API æ–‡æ¡£GOGO API æ–‡æ¡£RR API æ–‡æ¡£MATLABMATLAB API æ–‡æ¡£Node.jsNode.js API æ–‡æ¡£HTMLHTML API æ–‡æ¡£CSSCSS API æ–‡æ¡£RedisRedis API æ–‡æ¡£MongoDBMongoDB API æ–‡æ¡£DjangoDjango API æ–‡æ¡£åœ¨çº¿å¹³å° LeetCodeå…¨çƒæå®¢æŒšçˆ±çš„æŠ€æœ¯æˆé•¿å¹³å°Topcoderå…¨ä¸–ç•Œè§„æ¨¡æœ€å¤§çš„ç¨‹åºç«èµ›ç½‘ç«™ï¼Œä¹Ÿä¼šæœ‰ä¸€äº›ç®—æ³•ç«èµ›ï¼Œé€‚åˆä¸€äº›é«˜ç«¯çš„æˆ–è€…æACMçš„ï¼Œä¹Ÿä¼šä¸¾åŠä¸€äº›æ¯”èµ›Codeforcesä¿„ç½—æ–¯æœ€å¤§çš„ç®—æ³•æ¯”èµ›ç½‘ç«™HihocoderæŠ€æœ¯å›¢é˜Ÿæ¥è‡ªåŸåŒ—äº¬å¤§å­¦POJ (PKU Online Judge)å¼€å‘å›¢é˜Ÿï¼Œæ”¶é›†äº†å…¨çƒèŒƒå›´å†…å¾ˆå¤šåœ°åŒºã€é«˜æ ¡ä¸¾åŠçš„æ¯”èµ›è¯•é¢˜ï¼Œ æä¾›365å¤©*24å°æ—¶çš„åœ¨çº¿æäº¤ã€è¯„åˆ¤ç¨‹åºçš„æœåŠ¡LintCodeè¢«ç§°ä½œä¸­æ–‡ç‰ˆçš„leetcodeï¼Œä¹Ÿæ˜¯å¯ä»¥åšä¸ºç¼–ç¨‹èƒ½åŠ›æå‡çš„ä¸€ä¸ªä¸­è½¬ç«™SPOJæ³¢å…°çš„ç®—æ³•åˆ·é¢˜ç½‘ç«™NEUQ OJä¸€ä¸ªåœ¨çº¿çš„åˆ¤é¢˜å¹³å°æ´›è°·åˆ›åŠäº2013å¹´ï¼Œè‡´åŠ›äºä¸ºå‚åŠ noipã€noiã€acmçš„é€‰æ‰‹æä¾›æ¸…çˆ½ã€å¿«æ·çš„ç¼–ç¨‹ä½“éªŒç‰›å®¢ç½‘ä¸­å›½æœ€å¤§çš„ITé¢˜åº“Cè¯­è¨€ç½‘åœ¨è¿™é‡Œå¯ä»¥å‚åŠ åŒ…æ‹¬ACMã€NOIåœ¨å†…çš„å„ç§C/C++/javaç¨‹åºæ¯”èµ›ï¼Œä¹Ÿå¯ä»¥DIYä¸¾åŠå„ç±»ç¨‹åºæ¯”èµ›æ´»åŠ¨ï¼è®¡è’œå®¢è®¡è’œå®¢OIé¢˜åº“è‡´åŠ›äºä¸ºå‚åŠ noiã€noipã€ä¿¡æ¯å­¦ç«èµ›çš„é€‰æ‰‹æä¾›ä¼˜ç§€çš„Online Judgeç³»ç»Ÿé«˜æ ¡å¹³å°POJåŒ—äº¬å¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸFDU OJå¤æ—¦å¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸTJ OJåŒæµå¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸUSTC OJä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸZOJæµ™æ±Ÿå¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸHDU OJæ­å·ç”µå­ç§‘æŠ€å¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸCSU-ACMä¸­å—å¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸHOJXå“ˆå°”æ»¨å·¥ä¸šå¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸHRBUST OJå“ˆå°”æ»¨ç†å·¥å¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸPowerOJè¥¿å—ç§‘æŠ€å¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸSCU OJå››å·å¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸFZU CoidngOJç¦å·å¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸNBUT OJå®æ³¢å·¥ç¨‹å­¦é™¢ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»ŸLuteceç”µå­ç§‘æŠ€å¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»Ÿæ­¦æ±‰å¤§å­¦ ACM åä¼šæ­¦æ±‰å¤§å­¦ ACM åä¼šZJUT OJæµ™æ±Ÿå·¥ä¸šå¤§å­¦ç¨‹åºåœ¨çº¿è¯„æµ‹ç³»ç»Ÿæ¸¸æˆç¼–ç¨‹CheckiOé¢å‘åˆå­¦è€…å’Œé«˜çº§ç¨‹åºå‘˜çš„ç¼–ç æ¸¸æˆï¼Œä½¿ç”¨Pythonå’ŒJavaScriptè§£å†³æ£˜æ‰‹çš„æŒ‘æˆ˜å’Œæœ‰è¶£çš„ä»»åŠ¡ï¼Œä»è€Œæé«˜æ‚¨çš„ç¼–ç æŠ€èƒ½Coding Gamesæ”¯æŒåŒ…æ‹¬PHPã€Cã€JavaScriptåœ¨å†…çš„20å¤šç§ç¼–ç¨‹è¯­è¨€ã€‚ç”¨æˆ·ç•Œé¢åŠŸèƒ½å¼ºå¤§ï¼Œå¯ä»¥å®šåˆ¶Codewarsä¸€ä¸ªå¤–å›½çš„åœ¨çº¿ç»ƒä¹ ç¼–ç¨‹çš„ç½‘ç«™,åšé¢˜çš„è¿‡ç¨‹ç±»ä¼¼æ‰“æ€ª,åšé¢˜å‡çº§,è€Œä¸”å¯ä»¥çœ‹åˆ°åˆ«äººçš„è§£æ³•,é‡Œé¢æœ‰å¾ˆå¤šå·§å¦™çš„å†™æ³•å¯ä»¥å­¦ä¹ CodeCombatä¸€ä¸ªé¢å‘å­¦ç”Ÿçš„æ¸¸æˆå’ŒCSå­¦ä¹ å¹³å°ã€‚è¿™æ˜¯ä¸€ä¸ªç¤¾åŒºé¡¹ç›®ï¼Œæœ‰æ•°ç™¾ç©å®¶è‡ªæ„¿æä¾›æ”¯æŒã€‚æ”¯æŒè¯­è¨€åŒ…æ‹¬Javaã€JSã€Pythonã€Luaã€CoffeeScriptScreepsåœ¨æ¸¸æˆä¸­å­¦ä¹ JavaScriptã€‚ä¸–ç•Œä¸Šç¬¬ä¸€æ¬¾é’ˆå¯¹ç¨‹åºå‘˜çš„MMOæ²™ç›’æ¸¸æˆVIM Adventuresç©æ¸¸æˆçš„æ—¶å€™å­¦VIMCyber-Dojoä¸€ä¸ªæä¾›ç»™ç¨‹åºå‘˜ä»¬ç»ƒä¹ å†™ç¨‹åºçš„åœ°æ–¹ã€‚æ”¯æŒè¯­è¨€åŒ…æ‹¬JavaScriptã€Javaã€Pythonã€PHPã€Rubyå’Œå¾ˆå¤šå…¶ä»–è¯­è¨€Elevator Sagaç”µæ¢¯ç¼–ç¨‹æ¸¸æˆï¼Œè·Ÿéšå…³å¡è§£å†³æ‰€æœ‰æŒ‘ç«™ï¼Œä½¿ç”¨è¯­è¨€ä¸ºJavaScriptRuby Quizä¸€ä¸ªRubyç¨‹åºå‘˜æä¾›çš„æ¯å‘¨ç¼–ç¨‹æŒ‘æˆ˜é¡¹ç›®hacker.orgè¿™é¡¹æŒ‘æˆ˜ç”±ä¸€ç³»åˆ—æœ¬è®¾è®¡æ¥å¼ºåŒ–ä½ é»‘å®¢æŠ€å·§çš„è§£å¯†ã€è¯¡è®¡ã€æµ‹è¯•ã€çƒ§è„‘ç¯èŠ‚ç»„æˆã€‚æƒ³è¦é€šå…³æœ¬ç³»åˆ—ï¼Œä½ å¿…é¡»å­¦ä¼šè§£å¯†ã€ç¼–ç ã€æ¸—é€Ruby Warriorç©æ¸¸æˆå­¦Rubyï¼Œé€šè¿‡Rubyè„šæœ¬æ¥æ§åˆ¶ä¸€ä¸ªWarrioré€šè¿‡æ¯ä¸€å…³ï¼Œæ¯ä¸€å…³çš„ä»£ç éš¾åº¦éƒ½ä¼šæœ‰æ‰€å¢åŠ ï¼Œä½¿ç©å®¶é€æ¸äº†è§£RubyåŸºæœ¬çš„å‡½æ•°ã€æ§åˆ¶ã€å˜é‡ã€æ•°ç»„ç­‰è¯­è¨€ç‰¹æ€§çš„ç”¨æ³•æ–‡æ¡£èµ„æ–™Python å®˜æ–¹æ–‡æ¡£Python å®˜æ–¹æ–‡æ¡£Python æ ‡å‡†åº“Python æ ‡å‡†åº“Python RequestsPython Requests æ–‡æ¡£Python UrllibPython Urllib æ–‡æ¡£Python SeleniumPython Selenium ä¸­æ–‡ç¿»è¯‘æ–‡æ¡£æ­£åˆ™è¡¨è¾¾å¼Python æ­£åˆ™è¡¨è¾¾å¼å®˜æ–¹æ–‡æ¡£Beautiful SoupBeautiful Soup æ–‡æ¡£ScrapyScrapy çˆ¬è™«æ¡†æ¶å®˜æ–¹æ–‡æ¡£PySpiderPySpider çˆ¬è™«æ¡†æ¶å®˜æ–¹æ–‡æ¡£MatplotlibMatplotlib 2Dç»˜å›¾åº“ å®˜æ–¹ä¸­æ–‡æ–‡æ¡£NumpyNumpy ç§‘å­¦è®¡ç®— å®˜æ–¹ä¸­æ–‡æ–‡æ¡£PandasPandas ç»“æ„åŒ–æ•°æ®åˆ†æ å®˜æ–¹ä¸­æ–‡æ–‡æ¡£åšå®¢æ”¶è—å»–é›ªå³°å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ - ç ”ç©¶äº’è”ç½‘äº§å“å’ŒæŠ€æœ¯ï¼Œæä¾›åŸåˆ›ä¸­æ–‡ç²¾å“æ•™ç¨‹å´”åº†æ‰å´”åº†æ‰çš„ä¸ªäººåšå®¢,ä¸“æ³¨PHP,Python,çˆ¬è™«,æ·±åº¦å­¦ä¹ ,æœºå™¨å­¦ä¹ ,æ•°æ®åˆ†æè«çƒ¦Pythonä¸“æ³¨Pythonã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ å”æ¾ä¸“æ³¨Pythonç½‘ç»œçˆ¬è™«, æ•°æ®ç§‘å­¦, æ•°æ®æŒ–æ˜, æ•°æ®åˆ†ææ•è›‡è€…è¯´ç¼–ç¨‹ã€ç¨‹åºå‘˜ã€PythonFxxkPythonå­¦ä¹ pythonçš„æ­£ç¡®å§¿åŠ¿wistbeanPython å¤§ä½¬PigleiPython å¤§ä½¬TendCodePython å¤§ä½¬è¿½æ¢¦äººç‰©çš„åšå®¢Python Django å¤§ä½¬the5fireã€ŠDjangoä¼ä¸šå¼€å‘å®æˆ˜ã€‹ä½œè€…ï¼Œå…³æ³¨Pythonã€Djangoã€Vimã€Linuxã€Webå¼€å‘å°æ˜æ˜S Ã€ DOMICILEã€ŠPython Webå¼€å‘å®æˆ˜ã€‹ä½œè€…ï¼ŒPython å¤§ä½¬Pythonä¹‹ç¦…Python å¤§ä½¬Python çŸ¥è¯†åœˆPythonçŸ¥è¯†åœˆ - å®ç”¨çš„Pythonæ•™ç¨‹ç½‘ç«™Python æ•™ç¨‹ç½‘å°è©¹å­¦Pythonï¼Œä¸“æ³¨Pythonå­¦ä¹ çƒ‚ç¬”å¤´ j_hao104Pythonå¤§ä½¬å’¸é±¼æ—¥å¸¸ä¸“æ³¨Pythonçˆ¬è™«ï¼Œæœ‰è®¸å¤šJSé€†å‘æ–‡ç« AnShengPython å…¨æ ˆå¤§ä½¬å¤æºªè¾°äº‘æ –ç¤¾åŒºç‰¹é‚€çˆ¬è™«å·¥ç¨‹å¸ˆï¼ŒPythonå¤§ä½¬é«˜çº§å†œæ°‘å·¥Pythonå¤§ä½¬äº‘çˆ¬è™«æŠ€æœ¯ç ”ç©¶ç¬”è®°Lateautumn4lin çˆ¬è™«å¼€å‘å·¥ç¨‹å¸ˆï¼Œå¤šå¹´åçˆ¬è™«ç ´è§£ç»éªŒï¼Œæ²‰è¿·æ•°æ®åˆ†æå’Œé»‘å®¢å¢é•¿ï¼ŒCSDNåšå®¢ä¸“å®¶ï¼Œåä¸ºäº‘äº«ä¸“å®¶äº‘çˆ¬è™«æŠ€æœ¯ç ”ç©¶ç¬”è®°(CSDN)Lateautumn4lin çˆ¬è™«å¼€å‘å·¥ç¨‹å¸ˆï¼Œå¤šå¹´åçˆ¬è™«ç ´è§£ç»éªŒï¼Œæ²‰è¿·æ•°æ®åˆ†æå’Œé»‘å®¢å¢é•¿ï¼ŒCSDNåšå®¢ä¸“å®¶ï¼Œåä¸ºäº‘äº«ä¸“å®¶Jack CuiCSDNåšå®¢ä¸“å®¶ï¼ŒPython å¤§ä½¬å­¦ä¹ èµ„æºPythonçˆ¬è™«äººå·¥æ™ºèƒ½å­¦ä¹ æ•™ç¨‹Pythonçˆ¬è™«äººå·¥æ™ºèƒ½å­¦ä¹ æ•™ç¨‹åˆ†äº«Python ä¸­æ–‡å­¦ä¹ å¤§æœ¬è¥Python ä¸­æ–‡å­¦ä¹ å¤§æœ¬è¥Python èµ„æºå¤§å…¨ä¸­æ–‡ç‰ˆPython èµ„æºå¤§å…¨ä¸­æ–‡ç‰ˆçˆ±æ¹ƒæ£®å„ç§ Python æ•™ç¨‹ç»„ç»‡ç¤¾åŒºPyChinaPython ä¸­å›½ç¤¾åŒºPyCon Chinaä¸­å›½ Python å¼€å‘è€…å¤§ä¼šè å‘¨åˆŠè å‘¨åˆŠ - æ±‡é›†å…¨çƒè äº‹å„¿çˆ¬è™«ç›¸å…³é•€é‡‘çš„å¤©ç©ºGlidedSky é•€é‡‘çš„å¤©ç©ºï¼Œåœ¨çº¿çˆ¬è™«ç»ƒä¹ é¢˜åº“å¤œå¹•çˆ¬è™«å®‰å…¨è®ºå›ä¸€ä¸ªä¸“æ³¨äºçˆ¬è™«ä¸ PC/Web/ ç§»åŠ¨ç«¯å®‰å…¨é¢†åŸŸæŠ€æœ¯äº¤æµçš„ç¤¾åŒºï¼Œç¤¾åŒºç”±å¤œå¹•å›¢é˜Ÿ NightTeam åˆ›åŠï¼Œæ—¨åœ¨æå‡å¼€å‘è€…å¯¹çˆ¬è™«ä¸è½¯ä»¶å®‰å…¨é˜²æŠ¤çš„ç†è§£è¥¿åˆºå…è´¹ä»£ç†IPæ¯æ—¥æ›´æ–°å…è´¹HTTPä»£ç†ï¼Œæ‰€æœ‰ä»£ç†å‡ä¸º6675ç«¯å£é«˜åŒ¿ä»£ç†ï¼Œå¯éšè—IPçˆ¬è™«IPä»£ç†æ± çˆ¬è™«IPä»£ç†æ± äº‘æ‰“ç é‡‡ç”¨å…¨çƒé¢†å…ˆçš„ç§’ä¼ è¯†åˆ«ç³»ç»Ÿï¼Œ50%å›¾ç‰‡é›¶ç§’è¯†åˆ«ï¼Œäººå·¥å¹³å‡å¤„ç†æ—¶é—´0-3ç§’è¶…çº§é¹°ä¸“ä¸šçš„éªŒè¯ç äº‘ç«¯è¯†åˆ«æœåŠ¡,è®©éªŒè¯ç è¯†åˆ«æ›´å¿«é€Ÿã€æ›´å‡†ç¡®ã€æ›´å¼ºå¤§å…«çˆªé±¼é‡‡é›†å™¨ä¸€æ¬¾ä½¿ç”¨ç®€å•ã€åŠŸèƒ½å¼ºå¤§çš„ç½‘ç»œçˆ¬è™«å·¥å…·ï¼Œå®Œå…¨å¯è§†åŒ–æ“ä½œï¼Œæ— éœ€ç¼–å†™ä»£ç ï¼Œå†…ç½®æµ·é‡æ¨¡æ¿ï¼Œæ”¯æŒä»»æ„ç½‘ç»œæ•°æ®æŠ“å–Python é€†å‘Python é€†å‘ç›¸å…³èµ„æºPython çˆ¬è™«é›†åˆPython çˆ¬è™«é›†åˆPython å…¥é—¨ç½‘ç»œçˆ¬è™«ä¹‹ç²¾åç‰ˆPython å…¥é—¨ç½‘ç»œçˆ¬è™«ä¹‹ç²¾åç‰ˆçˆ¬è™«é¡¹ç›®è¿›é˜¶å®æˆ˜Python3 çˆ¬è™«é¡¹ç›®è¿›é˜¶å®æˆ˜ã€JSåŠ è§£å¯†ã€é€†å‘æ•™ç¨‹ã€css åŠ å¯†ã€å­—ä½“åŠ å¯†Python æ¨¡æ‹Ÿç™»é™†ä¸€äº›å¤§å‹ç½‘ç«™Python æ¨¡æ‹Ÿç™»é™†ä¸€äº›å¤§å‹ç½‘ç«™ç³»ç»ŸåŒ–å­¦ä¹  Python çˆ¬è™«ç³»ç»ŸåŒ–å­¦ä¹  Python çˆ¬è™«Python3 ç½‘ç»œçˆ¬è™«å®æˆ˜Python3 ç½‘ç»œçˆ¬è™«å®æˆ˜åœ¨çº¿è§†é¢‘è…¾è®¯è¯¾å ‚è…¾è®¯æ¨å‡ºçš„ä¸“ä¸šåœ¨çº¿æ•™è‚²å¹³å°ï¼Œèšåˆå¤§é‡ä¼˜è´¨æ•™è‚²æœºæ„å’Œåå¸ˆç½‘æ˜“äº‘è¯¾å ‚ç½‘æ˜“æ——ä¸‹ä¸€ä¸ªä¸“æ³¨èŒä¸šæŠ€èƒ½æå‡çš„åœ¨çº¿å­¦ä¹ å¹³å°ã€‚ç«‹è¶³äºå®ç”¨æ€§çš„è¦æ±‚ï¼Œä¸å¤šå®¶æ•™è‚²åŸ¹è®­æœºæ„å’Œè¡Œä¸šçš„ä¸“å®¶ã€è®²å¸ˆå»ºç«‹åˆä½œä¸­å›½å¤§å­¦ MOOCä¸­å›½å¤§å­¦MOOC(æ…•è¯¾)ï¼Œå›½å®¶ç²¾å“è¯¾ç¨‹åœ¨çº¿å­¦ä¹ å¹³å°é»‘é©¬ç¨‹åºå‘˜è‡´åŠ›äºåŸ¹å…»ä¸­çº§ç¨‹åºå‘˜ï¼Œæ˜¯ä¸šå†…ä»¥å£ç¢‘é—»åçš„ITæ•™è‚²åŸ¹è®­æœºæ„è¯¾å·¥åœºæ›´å¯é çš„ITå°±ä¸šæ•™è‚²å¹³å°ï¼Œé’ˆå¯¹å¤§å­¦ç”Ÿé‡èº«å®šåˆ¶äººå·¥æ™ºèƒ½ã€å¤§æ•°æ®ã€äº‘è®¡ç®—ã€åŒºå—é“¾ã€Javaå¤§æ•°æ®å¼€å‘ç­‰å¤§å­¦ç”ŸITåŸ¹è®­è¯¾ç¨‹æå®¢å­¦é™¢æå®¢å­¦é™¢ä½œä¸ºä¸­å›½ä¸“ä¸šITèŒä¸šåœ¨çº¿æ•™è‚²å¹³å°,æ‹¥æœ‰æµ·é‡é«˜æ¸…ITèŒä¸šè¯¾ç¨‹,æ¶µç›–30+ä¸ªæŠ€æœ¯é¢†åŸŸæ…•è¯¾ç½‘æ…•è¯¾ç½‘ï¼ˆIMOOCï¼‰æ˜¯ITæŠ€èƒ½å­¦ä¹ å¹³å°ã€‚æ…•è¯¾ç½‘(IMOOC)æä¾›äº†ä¸°å¯Œçš„ç§»åŠ¨ç«¯å¼€å‘ã€phpå¼€å‘ã€webå‰ç«¯ã€androidå¼€å‘ä»¥åŠhtml5ç­‰è§†é¢‘æ•™ç¨‹èµ„æºå…¬å¼€è¯¾å°šç¡…è°·å°šç¡…è°·JavaåŸ¹è®­ï¼Œè°·ç²‰ä¸è€å­¦å‘˜ä¸ºä½ æ¨èçš„JavaåŸ¹è®­ã€Webå‰ç«¯åŸ¹è®­ã€å‰ç«¯åŸ¹è®­ã€å¤§æ•°æ®åŸ¹è®­ã€PythonåŸ¹è®­ï¼›0åŸºç¡€å…¥å­¦ï¼Œå­¦å‘˜å°±ä¸šèµ·è–ªå±¡åˆ›æ–°é«˜ï¼å®éªŒæ¥¼å›½å†…é¢†å…ˆçš„ITåœ¨çº¿ç¼–ç¨‹åŠåœ¨çº¿å®è®­å­¦ä¹ å¹³å°ï¼Œä¸“ä¸šå¯¼å¸ˆæä¾›ç²¾é€‰çš„å®è·µé¡¹ç›®ï¼Œåˆ›æ–°çš„æŠ€æœ¯ä½¿å¾—å­¦ä¹ è€…æ— éœ€é…ç½®ç¹ççš„æœ¬åœ°ç¯å¢ƒï¼Œéšæ—¶åœ¨çº¿æµç•…ä½¿ç”¨ä¼˜è¾¾å­¦åŸUdacityæ˜¯æ¥è‡ªç¡…è°·çš„å‰æ²¿æŠ€æœ¯å¹³å°ï¼Œä¸ºå¹¿å¤§å­¦å­æä¾›WEBå‰ç«¯å¼€å‘ã€Python/JAVAç¼–ç¨‹ã€IOS/Androidå¼€å‘ã€äººå·¥æ™ºèƒ½å¼€å‘ç­‰ä¸€ç³»åˆ—åœ¨çº¿è¯¾ç¨‹åŠå®æˆ˜é¡¹ç›®ï¼Œæ»¡è¶³å­¦å‘˜çµæ´»çš„å­¦ä¹ éœ€æ±‚51CTOå­¦é™¢51CTOå­¦é™¢ITèŒä¸šåœ¨çº¿æ•™è‚²å¹³å°æ˜¯ä¾æ‰˜12å¹´è¡Œä¸šå“ç‰Œã€1400ä¸‡ITæŠ€æœ¯ç”¨æˆ·å»ºç«‹çš„ä¸“ä¸šITæŠ€èƒ½å­¦ä¹ åŸ¹è®­å¹³å°ï¼Œå·²ç­¾çº¦1000å¤šä½æŠ€æœ¯ä¸“å®¶å‘å¸ƒäº†12ä¸‡ä¸ªè‡ªå­¦å¼å®æˆ˜è§†é¢‘æ•™ç¨‹CSDN å­¦é™¢CSDN å­¦é™¢ä½œä¸ºITåœ¨çº¿æ•™è‚²å¹³å°,æ¶µç›–äººå·¥æ™ºèƒ½ã€è€ƒè¯•è®¤è¯ã€ç§»åŠ¨å¼€å‘ã€å¤§æ•°æ®æŠ€æœ¯é¢†åŸŸèŒä¸šè¯¾ç¨‹è€ç”·å­©ITæ•™è‚²éš¶å±åŒ—äº¬ä¸€å¤©å¤©æ•™è‚²ç§‘æŠ€æœ‰é™å…¬å¸,æ˜¯ä¸€ç›´ä¸“æ³¨äºLinuxåŸ¹è®­ã€Linuxç³»ç»ŸåŠæ¶æ„å¸ˆåŸ¹è®­ã€PythonåŸ¹è®­ã€ç½‘ç»œå®‰å…¨åŸ¹è®­ï¼Œå¤§æ•°æ®å®æˆ˜çš„é«˜ç«¯åŸ¹è®­æœºæ„åƒé”‹æ•™è‚²åƒé”‹æ•™è‚² - åšæŒæ•™è‚²åˆå¿ƒï¼ŒåšæŒé¢æˆå“è´¨ï¼ŒITåŸ¹è®­è‰¯å¿ƒå“ç‰Œåšå®¢è®ºå›é±¼Cå·¥ä½œå®¤é±¼Cå·¥ä½œå®¤-å…è´¹ç¼–ç¨‹è§†é¢‘æ•™å­¦|Pythonæ•™å­¦|Webå¼€å‘æ•™å­¦|å…¨æ ˆå¼€å‘æ•™å­¦|Cè¯­è¨€æ•™å­¦|æ±‡ç¼–æ•™å­¦|Win32å¼€å‘|åŠ å¯†ä¸è§£å¯†|Linuxæ•™å­¦å¾çˆ±ç ´è§£è‡´åŠ›äºè½¯ä»¶å®‰å…¨ä¸ç—…æ¯’åˆ†æçš„å‰æ²¿ï¼Œä¸°å¯Œçš„æŠ€æœ¯ç‰ˆå—äº¤ç›¸è¾‰æ˜ ï¼Œç”±æ— æ•°çƒ­è¡·äºè½¯ä»¶åŠ å¯†è§£å¯†åŠåç—…æ¯’çˆ±å¥½è€…å…±åŒç»´æŠ¤å»–é›ªå³°å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ - ç ”ç©¶äº’è”ç½‘äº§å“å’ŒæŠ€æœ¯ï¼Œæä¾›åŸåˆ›ä¸­æ–‡ç²¾å“æ•™ç¨‹å´”åº†æ‰å´”åº†æ‰çš„ä¸ªäººåšå®¢,ä¸“æ³¨PHP,Python,çˆ¬è™«,æ·±åº¦å­¦ä¹ ,æœºå™¨å­¦ä¹ ,æ•°æ®åˆ†æè«çƒ¦Pythonä¸“æ³¨Pythonã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ å”æ¾ä¸“æ³¨Pythonç½‘ç»œçˆ¬è™«, æ•°æ®ç§‘å­¦, æ•°æ®æŒ–æ˜, æ•°æ®åˆ†æé˜®ä¸€å³°ä¸Šæµ·è´¢ç»å¤§å­¦ä¸–ç•Œç»æµåšå£«ç ”ç©¶ç”Ÿï¼Œè®¡ç®—æœºç§‘æ™®åšä¸»ï¼Œå¯¹è‡ªç”±è½¯ä»¶æœ‰ç€åšå®šä¸ç§»çš„ä¿¡å¿µå­¦ä¹ å¹³å°èœé¸Ÿæ•™ç¨‹æä¾›äº†ç¼–ç¨‹çš„åŸºç¡€æŠ€æœ¯æ•™ç¨‹, ä»‹ç»äº†HTMLã€CSSã€Javascriptã€Pythonï¼ŒJavaï¼ŒRubyï¼ŒCï¼ŒPHP , MySQLç­‰å„ç§ç¼–ç¨‹è¯­è¨€çš„åŸºç¡€çŸ¥è¯† W3schoolé¢†å…ˆçš„ Web æŠ€æœ¯æ•™ç¨‹Cè¯­è¨€ç½‘Cè¯­è¨€ç½‘ - é¢†å…ˆå®ç”¨çš„ç¼–ç¨‹åœ¨çº¿å­¦ä¹ ç½‘ç«™å‰ç«¯ç½‘å‰ç«¯ç½‘ï¼Œæœ€å¥½çš„è‡ªå­¦webå‰ç«¯ç½‘ç«™ ç‰›å®¢ç½‘ç‰›å®¢ç½‘ - äº’è”ç½‘æ±‚èŒç¥å™¨å’Œå¤‡è€ƒå­¦ä¹ å¹³å°How2JHow2Jçš„Javaæ•™ç¨‹, å†…å®¹æ¶µç›–J2SEã€WEBå‰ç«¯ã€J2EEã€æ¡†æ¶æŠ€æœ¯ç­‰å…¨é¢çš„Javaå†…å®¹ç«™é•¿å·¥å…·æ–°æµªçŸ­ç½‘å€å¤šç§åç¼€çŸ­ç½‘å€ç”Ÿæˆç™¾åº¦çŸ­ç½‘å€ç™¾åº¦æ——ä¸‹ä¸“ä¸šçš„ç½‘å€ç¼©çŸ­æœåŠ¡ç«™é•¿å·¥å…· - ç«™é•¿ä¹‹å®¶ç«™é•¿å·¥å…·,SEOå·¥å…·,æƒé‡æŸ¥è¯¢,æ”¶å½•æŸ¥è¯¢,PRæŸ¥è¯¢,ICPå¤‡æ¡ˆæŸ¥è¯¢,whoisæŸ¥è¯¢,å‹æƒ…é“¾æ¥æŸ¥è¯¢,åå‘é“¾æ¥æŸ¥è¯¢,ç½‘ç«™æµ‹è¯•,IPæŸ¥è¯¢,AlexaæŸ¥è¯¢é˜¿é‡Œäº‘ whois æŸ¥è¯¢whoisæŸ¥è¯¢,åŸŸåwhois,åŸŸåæ³¨å†Œä¿¡æ¯,whoisæŸ¥è¯¢å·¥å…·,whoisä¿¡æ¯,åŸŸåä¿¡æ¯NnameBetaå›½é™…åŸŸåæœç´¢ã€åŸŸåæ³¨å†Œã€å›½åˆ«åŸŸåæ³¨å†Œã€åŸŸåæ¯”ä»·DomcompåŸŸåæ¯”ä»·ï¼ŒDomain Name Price and Availability.ä»¿ç«™å·¥å…·ç®±åœ¨çº¿ä»¿ç«™å·¥å…·ç®±è¶…çº§ SEO å¤–é“¾å·¥å…·ç½‘ç«™è‡ªåŠ¨åŒ–å®£ä¼ æœºå™¨/å…è´¹çš„è¶…çº§å¤–é“¾å·¥å…·å¯æ‰¹é‡å¢åŠ å¤–é“¾ç™¾åº¦ç«™é•¿å¹³å°ç™¾åº¦æœç´¢èµ„æºå¹³å° - è®©ç½‘ç«™æ›´å…·ä»·å€¼æœç‹—ç«™é•¿å¹³å°æœç‹—ç«™é•¿å¹³å° - å…¨é¢æŒæ¡åœ¨æœç‹—æœç´¢ä¸­çš„æ•°æ®è¡¨ç°360 ç«™é•¿å¹³å°360 ç«™é•¿å¹³å° - ç»™ç½‘ç«™å¸¦æ¥æ›´å¤šæµé‡å’Œå±•ç°Google ç«™é•¿å¹³å°Google ç½‘ç«™ç«™é•¿ - æ”¯æŒã€å­¦ä¹ ã€äº’åŠ¨äº¤æµå’Œ Search Console â€“ GoogleBing ç½‘ç«™ç®¡ç†å‘˜å·¥å…·Bing ç½‘ç«™ç®¡ç†å‘˜å·¥å…·ç™¾åº¦å¹¿å‘Šè”ç›Ÿç™¾åº¦å¹¿å‘Šè”ç›Ÿä¸ºæ‚¨çš„æµé‡å¢å€¼Google AdSenseGoogle å¹¿å‘Šå¹³å°ç™¾åº¦ç»Ÿè®¡ç™¾åº¦ç»Ÿè®¡ â€” æœ€å¤§çš„ä¸­æ–‡ç½‘ç«™åˆ†æå¹³å°å‹ç›Ÿ+å›½å†…é¢†å…ˆçš„ç¬¬ä¸‰æ–¹å…¨åŸŸæ•°æ®æ™ºèƒ½æœåŠ¡å•†ICP/IPåœ°å€/åŸŸåä¿¡æ¯å¤‡æ¡ˆç®¡ç†ç³»ç»Ÿå·¥ä¸šå’Œä¿¡æ¯åŒ–éƒ¨ICP/IPåœ°å€/åŸŸåä¿¡æ¯å¤‡æ¡ˆç®¡ç†ç³»ç»Ÿå…¨å›½äº’è”ç½‘å®‰å…¨ç®¡ç†æœåŠ¡å¹³å°å…¬å®‰å¤‡æ¡ˆç½‘ - å…¨å›½äº’è”ç½‘å®‰å…¨ç®¡ç†æœåŠ¡å¹³å°ITå·¥å…·ç®±åœ¨çº¿å·¥å…· - ç¨‹åºå‘˜çš„å·¥å…·ç®±ç«™é•¿å·¥å…·ã€ä»£ç æ ¼å¼åŒ–ã€å‹ç¼©ã€åŠ å¯†ã€è§£å¯†ã€ä¸‹è½½é“¾æ¥è½¬æ¢ç­‰åœ¨çº¿å·¥å…· - OSCHINA.NETç¤¾åŒºå¸¸ç”¨æ–‡æ¡£ã€å¸¸ç”¨å¯¹ç…§è¡¨ã€ä»£ç å¤„ç†ã€Html/Js/Csså·¥å…·ã€åŠ å¯†/è½¬ç å·¥å…·ç­‰è®°ç£Šå·¥å…·ç®±Dnsæ£€æµ‹ã€CSSæ ¼å¼åŒ–ã€è¶…çº§Pingã€ç«¯å£æ‰«æç­‰å­Ÿå¤å·¥å…·ç®±cssä¸€é”®ç¾åŒ–ã€æ–‡æœ¬å·®å¼‚æ¯”è¾ƒã€ä»£ç é«˜äº®ç­‰Syntax HighlightSyntax Highlight Code In Word Documentsï¼Œåœ¨Wordæ–‡æ¡£ä¸­æ’å…¥æ¼‚äº®çš„ä»£ç Text to ASCII Art GeneratorText to ASCII Art Generatorï¼Œå­—ç¬¦ä¸²è½¬æˆ ASCII ç å›¾æ¡ˆMDEditorå¼€æºåœ¨çº¿ Markdown ç¼–è¾‘å™¨ä¸´æ—¶é‚®ç®±åŒ¿åæ³¨å†Œä¸å¸¸ç”¨çš„ç½‘ç«™/è®ºå›ï¼Œä¿æŠ¤éšç§å…éªšæ‰°SM.MSSM å…è´¹å›¾åºŠï¼Œæ¯ä¸ªæ–‡ä»¶æœ€å¤§æ”¯æŒ 5MBè·¯è¿‡å›¾åºŠå…è´¹å…¬å…±å›¾åºŠï¼Œæ”¯æŒæœ€å¤§10MBã€æ‰¹é‡ä¸Šä¼ Greasy Forkå®‰å…¨ã€å®ç”¨çš„ç”¨æˆ·è„šæœ¬å¤§å…¨Hello World å¤§å…¨æ”¶é›†äº†å¤§çº¦481ç§ Hello World ç¨‹åºï¼Œæ¶µç›–äº†ç›®å‰å·²çŸ¥çš„æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ï¼Œå¦åŠ ä¸Š 67 äººç±»è¯­è¨€åŠ¨ç”»å±•ç¤ºå„ç§è·¯å¾„æœç´¢ç®—æ³•åŠ¨ç”»å±•ç¤ºå„ç§è·¯å¾„æœç´¢ç®—æ³•IT eBookså¯ä»¥ä¸‹è½½ITç”µå­ä¹¦ç±çš„ç½‘ç«™ï¼ˆè‹±æ–‡ï¼‰GEEKTyperåœ¨çº¿æ¨¡æ‹Ÿé»‘å®¢å·¥ä½œçš„è™šæ‹Ÿæ¡Œé¢ç³»ç»Ÿï¼Œæä¾›å¤šç§é»‘å®¢å·¥ä½œçš„åœºæ™¯å…è´¹è®¡ç®—æœºç¼–ç¨‹ç±»ä¸­æ–‡ä¹¦ç±å…è´¹è®¡ç®—æœºç¼–ç¨‹ç±»ä¸­æ–‡ä¹¦ç±EaseUS Partition Masterç£ç›˜åˆ†åŒºç®¡ç†è½¯ä»¶ï¼Œä¸ç”¨é‡è£…ç³»ç»Ÿï¼Œå°±å¯ä»¥é‡æ–°åˆ’åˆ†ç£ç›˜ç©ºé—´æ–‡ä»¶å¤„ç†Convertioåœ¨çº¿æ–‡ä»¶è½¬æ¢å·¥å…·ï¼Œæ”¯æŒè¶…è¿‡309ç§ä¸åŒçš„æ–‡æ¡£ã€å›¾åƒã€ç”µå­è¡¨æ ¼ã€ç”µå­ä¹¦ã€æ–‡æ¡£ã€æ¼”ç¤ºæ–‡ç¨¿ã€éŸ³é¢‘å’Œè§†é¢‘æ ¼å¼Office-Converterå…è´¹åœ¨çº¿è½¬æ¢è§†é¢‘ï¼Œåœ¨çº¿éŸ³é¢‘è½¬æ¢ï¼Œåœ¨çº¿å›¾å½¢è½¬æ¢ï¼Œåœ¨çº¿æ–‡æ¡£è½¬æ¢å’Œåœ¨çº¿å‹ç¼©æ ¼å¼TinyPNGPNG/JPGå›¾ç‰‡åœ¨çº¿å‹ç¼©åˆ©å™¨SquooshGoogleå¼€æºåœ¨çº¿å‹ç¼©ã€è°ƒæ•´å·¥å…·ï¼Œæ”¯æŒWebPILoveIMGæ°¸è¿œå…è´¹çš„åœ¨çº¿å›¾ç‰‡å¤„ç†å·¥å…·ï¼Œå¯åœ¨çº¿ç¼–è¾‘ï¼Œå‹ç¼©ã€è£å‰ªã€è½¬æ¢ã€æ°´å°ç­‰SmallpdfSmallpdf - A Free Solution to all your PDF Problems,PDFå‹ç¼©ã€è½¬æ¢ã€åˆ†å‰²ã€åˆå¹¶ç­‰PHOTOMOSHæ•…éšœè‰ºæœ¯åœ¨çº¿ç”Ÿæˆï¼Œå¯ä»¥è¾“å‡ºjpgã€gifå’Œè§†é¢‘ç¨¿å®šæŠ å›¾å…è´¹åœ¨çº¿æŠ å›¾è½¯ä»¶,å›¾ç‰‡å¿«é€Ÿæ¢èƒŒæ™¯-æŠ ç™½åº•å›¾Ué’™ç½‘å®Œå…¨å…è´¹çš„LOGOåœ¨çº¿è®¾è®¡åˆ¶ä½œå·¥å…·SVGOMGSVGåœ¨çº¿å‹ç¼©å¹³å°åœ¨çº¿å›¾ç‰‡é€æ˜åœ†è§’å¤„ç†åœ¨çº¿å›¾ç‰‡é€æ˜åœ†è§’å¤„ç†è‰æ–™äºŒç»´ç å›½å†…åˆ›å»ºäºŒç»´ç åœ¨çº¿åº”ç”¨Logasteråœ¨çº¿å…è´¹åˆ›å»ºç®€å•logoåŠåç‰‡è®¾è®¡PreloadersLoading æ‡’åŠ è½½åŠ¨ç”»åœ¨çº¿åˆ¶ä½œLoadingåˆ¶ä½œGIFã€SVGã€CSSåŠ è½½åŠ¨ç”»å›¾æ ‡waifu2xå›¾ç‰‡æ™ºèƒ½æ— æŸæ”¾å¤§2å€ï¼Œé€‚åˆåŠ¨æ¼«ã€æ’ç”»ç­‰æ™ºå›¾è…¾è®¯ISUXå‰ç«¯å›¢é˜Ÿå¼€å‘çš„ä¸€ä¸ªä¸“é—¨ç”¨äºå›¾ç‰‡å‹ç¼©å’Œå›¾ç‰‡æ ¼å¼è½¬æ¢çš„å¹³å°éŸ³ä¹å…è´¹ä¸‹è½½å…¨ç½‘éŸ³ä¹å…è´¹ä¸‹è½½å·¥å…·OKèµ„æºé‡‡é›†OKèµ„æºé‡‡é›†-æœ€æ–°å½±è§†èµ„æºå¤§å…¨ç½‘æ˜“è§å¤–å·¥ä½œå°é’ˆå¯¹è§†é¢‘ã€å›¾ç‰‡ã€æ–‡æ¡£ã€éŸ³é¢‘éƒ½å¯ä»¥è¿›è¡Œç¿»è¯‘è½¬å†™æ“ä½œï¼Œæ¯å¤©ä¸¤å°æ—¶å…è´¹ä½¿ç”¨HiPDFä¸€ç«™å¼è§£å†³æ‰€æœ‰PDFç›¸å…³çš„é—®é¢˜è§†é¢‘é±¼åœ¨çº¿ä¸‹è½½å„å¤§ç½‘ç«™è§†é¢‘çš„ç½‘ç«™ScreenToGifå¼€æºã€è½»é‡çº§å´éå¸¸å¼ºå¤§çš„å½•å±è½¯ä»¶ï¼Œå¿«é€Ÿå°†å±å¹•å½•åˆ¶æˆé«˜æ¸…GIFè®¾è®¡ç´ æIconfonté˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“ï¼Œæä¾›çŸ¢é‡å›¾æ ‡ä¸‹è½½ã€åœ¨çº¿å­˜å‚¨ã€æ ¼å¼è½¬æ¢ç­‰åŠŸèƒ½Font Awesomeä¸€ä¸ªåŸºäºCSS å’Œ LESS çš„å­—ä½“å’Œå›¾æ ‡å·¥å…·åŒ…Flaticonæµ·é‡æ‰å¹³åŒ–å…è´¹çš„å›¾æ ‡åº“icons8ç‹¬ç‰¹ç³»ç»Ÿå¹³å°é£æ ¼å’Œwebå›¾æ ‡åº“ï¼Œä¸‹è½½å…è´¹å›¾æ ‡ï¼ŒéŸ³ä¹åƒå›¾ç½‘æµ·é‡åŸåˆ›è®¾è®¡æ¨¡æ¿å…è´¹ä¸‹è½½æ˜µå›¾ç½‘å›½å†…æµ·é‡å¹³é¢å…è´¹ç´ æä¸‹è½½åƒåº“ç½‘å…è´¹ png å›¾ç‰‡èƒŒæ™¯ç´ æä¸‹è½½Pexelsæ‰åæ¨ªæº¢çš„æ‘„å½±ä½œè€…åœ¨è¿™é‡Œå…è´¹åˆ†äº«æœ€ç²¾å½©çš„ç´ æç…§ç‰‡å’Œè§†é¢‘å¿…åº”å£çº¸å¿…åº”æ¯æ—¥é«˜æ¸…å£çº¸Piqselsç²¾ç¾çš„å…ç‰ˆç¨å›¾åº“ç§è—å­—ä½“ä¼˜è´¨å­—ä½“å…è´¹ä¸‹è½½ç«™ç¬¬ä¸€ PPT ç½‘å…è´¹ PPT æ¨¡æ¿ä¸‹è½½å¾é“å¹»ç¯ç‰‡å…¨æ–°çš„officeç”Ÿäº§åŠ›å·¥å…·ï¼Œæ”¯æŒæ¼”ç¤ºæ–‡ç¨¿ã€PPTæ¨¡æ¿ã€ååŒåŠå…¬ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·è½»æ¾åˆ›å»ºå…·æœ‰è§†è§‰å¸å¼•åŠ›çš„å¹»ç¯ç‰‡Mixkitå…è´¹ã€é«˜è´¨é‡ã€å¯å•†ç”¨çš„è§†é¢‘ç´ æåˆ†äº«ç½‘ç«™The Stockså¯¹å„å¤§å›¾ç‰‡ç½‘ç«™è¿›è¡Œæ•´åˆï¼Œå…è´¹ä¼˜è´¨å›¾ç‰‡ä¸‹è½½æç®€å£çº¸é«˜è´¨é‡ç²¾å“å£çº¸ç½‘ç«™NASA Image and Video Libraryç¾å›½å›½å®¶èˆªå¤©å±€çš„å®˜æ–¹åº“ï¼Œä»æ­¤å¤ªç©ºç±»çš„ç´ æå†ä¹Ÿä¸æ˜¯é—®é¢˜Unsplashè´¨é‡è¶…é«˜çš„å…è´¹å›¾ç‰‡ç´ æåº“ï¼Œæ— éœ€æ³¨å†Œï¼Œç›´æ¥ä¸‹è½½WordArtæ–‡å­—äº‘å·¥å…·æ•ˆç‡è½¯ä»¶åˆ†æµæŠ¢ç¥¨å…¨ç¨‹è‡ªåŠ¨æŠ¢ç¥¨,è‡ªåŠ¨æŠ¢å€™è¡¥,è‡ªåŠ¨è¯†åˆ«éªŒè¯ç ,å¤šçº¿ç¨‹ç§’å•ã€ç¨³å®šæ¡æ¼,æ”¯æŒå¤šå¤©ã€å¤šè½¦æ¬¡ã€å¤šå¸­åˆ«ã€å¤šä¹˜å®¢ç­‰åŠŸèƒ½PanDownloadç™¾åº¦ç½‘ç›˜ä¸‹è½½ç¥å™¨Quickerä¸ºå¸¸ç”¨æ“ä½œå»ºç«‹æ·å¾„ï¼ŒPC å¿«æ·åŠ¨ä½œé¢æ¿ï¼Œè®©æ•ˆç‡è§¦æ‰‹å¯åŠ!ä¸‡å½©åŠå…¬å¤§å¸ˆå…è´¹ã€è½»æ¾å¤„ç†æ–‡æ¡£/éŸ³è§†é¢‘/å›¾ç‰‡çš„å·¥å…·LICEcapç®€æ´æ˜“ç”¨çš„åŠ¨ç”»å±å¹•å½•åˆ¶è½¯ä»¶ï¼Œå®ƒå¯å°†å±å¹•å½•åƒçš„å†…å®¹ç›´æ¥ä¿å­˜ä¸ºé«˜è´¨é‡ï¼ˆæ¯å¸§é¢œè‰²æ•°é‡å¯è¶…è¿‡256ï¼‰GIFåŠ¨æ€å›¾ç‰‡æ ¼å¼Snipasteç®€å•ä½†å¼ºå¤§çš„æˆªå›¾å·¥å…·ï¼Œæ”¯æŒæˆªå›¾ + è´´å›¾FSCaptureä¸€ä¸ªå¼ºå¤§çš„ï¼Œè½»é‡çº§çš„ï¼ŒåŠŸèƒ½é½å…¨çš„å±å¹•æ•è·å·¥å…·Everythingé€Ÿåº¦æœ€å¿«çš„çš„æ–‡ä»¶æœç´¢å·¥å…·DeskPinsé¡¶ç½®ä»»æ„çª—å£TrafficMonitorä¸€ä¸ªç”¨äºæ˜¾ç¤ºå½“å‰ç½‘é€Ÿã€CPUåŠå†…å­˜åˆ©ç”¨ç‡çš„æ¡Œé¢æ‚¬æµ®çª—è½¯ä»¶PicGoç”± electronic-vue æ„å»ºçš„ç®€å•è€Œç²¾ç¾çš„å›¾ç‰‡ä¸Šä¼ å·¥å…·PowerToyså¾®è½¯ä¸º Windows ç³»ç»Ÿæ¨å‡ºçš„ä¸€ç³»åˆ—å…è´¹å®ç”¨å°å·¥å…·åˆé›†Dism++ä¸€æ¬¾æ ¹æ®å¾®è½¯åº•å±‚çš„æ¶æ„ç»“æ„è®¾è®¡çš„ä¸€ä¸ªç³»ç»Ÿç»´æŠ¤å·¥å…·ï¼Œå…¨çƒç¬¬ä¸€æ¬¾åŸºäº CBS çš„ Dism GUI å®ç°ColorPixå±å¹•å–è‰²å°å·¥å…·CCleanerä¸€æ¬¾å…è´¹çš„ç³»ç»Ÿä¼˜åŒ–å’Œéšç§ä¿æŠ¤å·¥å…·GifCamé›†å½•åˆ¶ä¸å‰ªè¾‘ä¸ºä¸€ä½“çš„å±å¹• GIF åŠ¨ç”»åˆ¶ä½œå·¥å…·ï¼Œå½•åˆ¶åçš„åŠ¨ç”»å¯ä»¥é€å¸§ç¼–è¾‘EVå½•å±ä¸€æ¬¾å…è´¹å¹¶ä¸”ä¸æ·»åŠ æ°´å°çš„å½•å±å·¥å…·Fliqloä¸€æ¬¾æç®€ä¸»ä¹‰çš„æ—¶é’Ÿå±ä¿è½¯ä»¶Fencesæ …æ ç®¡ç†æ¡Œé¢ï¼Œä½¿æ¡Œé¢æ›´åŠ æ•´æ´æœ‰æ¡ç†Q-dirå¤šçª—å£æ–‡ä»¶æ•´ç†å·¥å…·WGesturesé¼ æ ‡æ‰‹åŠ¿å·¥å…·XMindä¸€ä¸ªå…¨åŠŸèƒ½çš„æ€ç»´å¯¼å›¾å’Œå¤´è„‘é£æš´è½¯ä»¶é€Ÿç›˜å…ç™»å½•ï¼Œè‡ªåŠ¨æŸ¥è¯¢æå–ç ï¼Œæé€Ÿçš„åº¦ç›˜ä¸‹è½½å·¥å…·f.luxå›½å¤–å¼€æºçš„æŠ¤çœ¼è½¯ä»¶ï¼Œé€šè¿‡æ ¹æ®æ—¶é—´è°ƒèŠ‚å±å¹•é¢œè‰²ï¼Œå‡å°‘è“å…‰å¯¹è§†åŠ›çš„å½±å“äº‘æœåŠ¡å•† é˜¿é‡Œäº‘é˜¿é‡Œäº‘ - ä¸ºäº†æ— æ³•è®¡ç®—çš„ä»·å€¼è…¾è®¯äº‘è…¾è®¯äº‘ - äº§ä¸šæ™ºå˜ äº‘å¯æœªæ¥ç™¾åº¦äº‘ç™¾åº¦äº‘ - è®¡ç®—æ— é™å¯èƒ½åä¸ºäº‘åä¸ºäº‘ - +æ™ºèƒ½ï¼Œè§æœªæ¥äº¬ä¸œäº‘äº¬ä¸œäº‘ - é‡è§æ— é™å¯èƒ½è¥¿éƒ¨æ•°ç è¥¿éƒ¨æ•°ç  - äº‘æœåŠ¡å™¨ã€è™šæ‹Ÿä¸»æœºã€åŸŸåæ³¨å†Œ17å¹´çŸ¥åäº‘è®¡ç®—æœåŠ¡æä¾›å•†ï¼æ™¯å®‰äº‘æ™¯å®‰äº‘ - ä¸“ä¸šçš„æ•°æ®ä¸­å¿ƒæœåŠ¡å•†ä¸ƒç‰›äº‘ä¸ƒç‰›äº‘ - å›½å†…é¢†å…ˆçš„ä¼ä¸šçº§äº‘æœåŠ¡å•†åˆæ‹äº‘åˆæ‹äº‘ - åŠ é€Ÿåœ¨çº¿ä¸šåŠ¡-CDN-äº‘å­˜å‚¨ç¾æ©™äº’è”ç¾æ©™äº’è” - åŸŸåæ³¨å†Œã€ä¼ä¸šå»ºç«™ã€äº‘æœåŠ¡å™¨ã€ä¼ä¸šç½‘ç»œæ¨å¹¿æ•´ä½“è§£å†³æ–¹æ¡ˆæœåŠ¡å•†ï¼UCloudUCloud - ä¸­ç«‹ å®‰å…¨ å¯ä¿¡èµ–çš„äº‘è®¡ç®—æœåŠ¡å•†AWSAWS äº‘æœåŠ¡ - ä¸“ä¸šçš„å¤§æ•°æ®å’Œäº‘è®¡ç®—æœåŠ¡ä»¥åŠäº‘è§£å†³æ–¹æ¡ˆæä¾›å•†Microsoft AzureAzure. Invent with purpose.GoDaddyGoDaddy - æä¾›åŸŸåæ³¨å†Œå’Œäº’è”ç½‘ä¸»æœºæœåŠ¡çš„ç¾å›½å…¬å¸CloudflareCloudflare - ç½‘ç»œæ€§èƒ½å’Œå®‰å…¨å…¬å¸jsDelivrjsDelivr - A free, fast, and reliable Open Source CDN for npm and GitHubä¼—åŒ…å¹³å° çŒ¿æ€¥é€ä¸“æ³¨äº IT ä¼—åŒ…é¢†åŸŸï¼ŒèŒä½å†…å®¹å¤§å¤šé›†ä¸­äº UI è®¾è®¡ã€äº§å“è®¾è®¡ã€ç¨‹åºå¼€å‘ã€äº§å“è¿è¥ç­‰éœ€æ±‚å¼€æºä¼—åŒ…å¼€æºä¸­å›½æ——ä¸‹å¤–åŒ…ç½‘ç«™ï¼Œé¡¹ç›®å¤§å¤šæ˜¯å›¢é˜Ÿçš„æ•´åŒ…é¡¹ç›®ï¼Œé€‚åˆå¤šäººç»„å›¢æ¥å•å¤–åŒ…å¤§å¸ˆPMCAFFæ——ä¸‹çš„ä¸€ä¸ªä¼—åŒ…å¼€å‘å¹³å°ï¼Œç›®å‰ä»¥æŠ€æœ¯å¼€å‘ä¸ºä¸»ï¼Œä»¥ä¼—åŒ…å¼€å‘å’Œè‡ªæœ‰å¼€å‘ç›¸ç»“åˆå½¢å¼è¿è¥äººäººå¼€å‘é›†å¯è§†åŒ–å¼€å‘ï¼Œåº”ç”¨å¸‚åœºï¼Œå¨å®¢ä¼—åŒ…ï¼ŒPaaSäº‘äºä¸€ä½“çš„ä¼ä¸šçº§åº”ç”¨æœåŠ¡å¹³å°å¿«ç æä¾›æ™ºèƒ½ç¡¬ä»¶ã€å„ç§æ™ºèƒ½å…±äº«é¡¹ç›®è§£å†³æ–¹æ¡ˆï¼Œä¸ºäº’è”ç½‘åˆ›ä¸šè€…æä¾›APPã€å°ç¨‹åºã€å…¬ä¼—å·å¼€å‘ã€‚æˆ‘çˆ±æ–¹æ¡ˆç½‘ä¸“æ³¨äºç¡¬ä»¶ç±»å¤–åŒ…ï¼Œç”µå­æ–¹æ¡ˆå¼€å‘ä¾›åº”é“¾ä¼—åŒ…å¹³å°ï¼Œè½¯ä»¶å¤–åŒ…ï¼Œæ–¹æ¡ˆï¼Œç¡¬ä»¶å¼€å‘æ–¹æ¡ˆï¼Œç¡¬ä»¶è®¾è®¡å¼€å‘è‹±é€‰æä¾›å¯ä¿¡èµ–çš„å®šåˆ¶å¼€å‘å¤–åŒ…æœåŠ¡ï¼ŒåŒ…æ‹¬ä¼ä¸šå“ç‰Œå®˜ç½‘ã€ç”µå•†ç³»ç»ŸåŠåˆ›æ–°å®šåˆ¶äº§å“å¼€å‘æ™ºç­¹ä¸ºä¼ä¸š&åˆ›ä¸šè€…æä¾›äº’è”ç½‘é«˜çº§äººæ‰ç›´ç§ŸæœåŠ¡ã€‚æŒ‰æ¬¡ç›´ç§Ÿï¼Œè§£å†³ä¸´æ—¶ã€çªå‘é—®é¢˜ï¼›æŒ‰æœˆç›´ç§Ÿï¼Œå»ºç«‹é•¿æœŸå…¼èŒåˆä½œï¼›æŒ‰ä»»åŠ¡ç›´ç§Ÿï¼Œè§£å†³æœ‰æ˜ç¡®é¢„ç®—çš„å¤–åŒ…ä»»åŠ¡å¼€å‘é‚¦äº’è”ç½‘è½¯ä»¶å®šåˆ¶å¼€å‘ä¸è½¯ä»¶å¤–åŒ…å¼€å‘æœåŠ¡ï¼Œåå¹´äº’è”ç½‘è½¯ä»¶å®šåˆ¶å¼€å‘ç»éªŒç å¸‚Coding æ¨å‡ºçš„äº’è”ç½‘è½¯ä»¶å¤–åŒ…æœåŠ¡å¹³å°ï¼Œæ„åœ¨è¿æ¥éœ€æ±‚æ–¹ä¸å¹¿å¤§å¼€å‘è€…ã€‚è®©é¡¹ç›®çš„éœ€æ±‚æ–¹å¿«é€Ÿçš„æ‰¾åˆ°åˆé€‚çš„å¼€å‘è€…ï¼Œå®Œæˆé¡¹ç›®å¼€å‘å·¥ä½œè‡ªç”±èŒå®¢è‡ªç”±èŒå®¢æ˜¯æƒå¨çš„ITäº’è”ç½‘è¡Œä¸šçµæ´»ç”¨å·¥äº¤æ˜“å¹³å°ï¼Œå¤–åŒ…ï¼Œä¼—åŒ…ï¼Œå…¼èŒï¼Œæ‹›è˜ï¼Œerpï¼Œsapè§£æ”¾å·è§£æ”¾å·ä¼—åŒ…å¹³å°æä¾›è½¯ä»¶å¼€å‘å¤–åŒ…ã€äººåŠ›é©»åœºæœåŠ¡ç­‰è½¯ä»¶é¡¹ç›®å¤–åŒ…æœåŠ¡ã€‚è§£æ”¾å·çš„è½¯ä»¶é¡¹ç›®äº¤ä»˜å…¨æµç¨‹å¯è§†åŒ–ç›‘æ§ä¸å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†èƒ½åŠ›ç¨‹åºå‘˜å®¢æ ˆé¢†å…ˆçš„ç¨‹åºå‘˜è‡ªç”±å·¥ä½œå¹³å°ï¼Œ38ä¸‡+ä¼˜ç§€å¼€å‘è€…ï¼Œæ‚¨çš„ä¸“å±äº‘ç«¯å¼€å‘å›¢é˜Ÿï¼ŒBATçº§åˆ«çš„å¼€å‘è€…ï¼Œæ ‡å‡†åŒ–çš„æœåŠ¡å’Œäº¤ä»˜ç æ˜“æ™ºç½‘æ˜“è”æ——ä¸‹ITè½¯ä»¶æœåŠ¡å¹³å°ï¼Œé›†è½¯ä»¶å•†åŸã€ä¼ä¸šåº”ç”¨ã€ç”µå•†è½¯ä»¶ã€crmè½¯ä»¶ã€å•†åŠ¡æœåŠ¡å¹³å°äºä¸€ä½“çš„ä¸€ç«™å¼è½¯ä»¶å¤–åŒ…å¼€å‘æœåŠ¡å¹³å°ç”µé¸­ç¤¾åŒºç”µé¸­ç¤¾åŒºæ—¨åœ¨æ¨åŠ¨è‡ªç”±å·¥ä½œæ–¹å¼åœ¨å›½å†…æ¸è¿›å¼å‘å±•ï¼ŒåŒºåˆ«äºä¼ ç»Ÿæ–¹å¼çš„å·¥ä½œèŒä½ï¼Œå€¡å¯¼ã€Œåªå·¥ä½œï¼Œä¸ä¸Šç­ã€çš„å·¥ä½œå¿ƒæ€Sxsoftä¸­å›½æœ€æ—©çš„å¤–åŒ…æœåŠ¡å¹³å°ï¼Œ18å¹´å£ç¢‘æœåŠ¡ï¼Œ20ä¸‡ç¨‹åºå‘˜ã€100+ä¸“ä¸šè½¯ä»¶å¼€å‘å…¬å¸ï¼Œä¸“æ³¨è§£å†³å„ç±»è½¯ä»¶å¼€å‘éœ€æ±‚å®ç°ç½‘ä¸ºä¼ä¸šæä¾›BATç­‰åä¼èƒŒæ™¯çš„ã€é è°±çš„å¼€å‘è®¾è®¡å…¼èŒäººæ‰å’Œè‡ªç”±èŒä¸šè€…ï¼Œæ»¡è¶³ä¼ä¸šé¡¹ç›®å¤–åŒ…ã€é©»åœºå¼€å‘ã€è¿œç¨‹å…¼èŒã€æŠ€æœ¯å’¨è¯¢ç­‰çŸ­æœŸäººåŠ›éœ€æ±‚æ™ºåŸå¤–åŒ…ç½‘é›¶ä½£é‡‘å¼€å‘èµ„æºå¹³å°ï¼Œè®¤è¯æ‹…ä¿ï¼Œå…¨ç¨‹æ— å¿§ï¼Œä¸“ä¸šçš„è½¯ä»¶å¤–åŒ…ç½‘å’Œé¡¹ç›®å¤–åŒ…ã€é¡¹ç›®å¼€å‘ã€äººåŠ›å¤–æ´¾ã€çŸ­æœŸæ‹›è˜ã€äººåŠ›èµ„æºäº¤æ˜“å¹³å°æ›´å¤šå¯¼èˆª åˆ›é€ ç‹®å¯¼èˆªåˆ›é€ ç‹®ï¼Œä¸€ä¸ªåˆ›æ„å·¥ä½œè€…çš„å¯¼èˆªï¼Œä¸“æ³¨åˆ†äº«æ­£ç‰ˆä¼˜è´¨è®¾è®¡ã€å‰ç«¯ã€äº§å“ã€è¿è¥çš„ä¹¦ç­¾å¯¼èˆªï¼Œè®¾è®¡æ•™ç¨‹ã€è®¾è®¡è§„èŒƒã€é¢œè‰²æ­é…ã€çµæ„Ÿåˆ›æ„ã€å‰ç«¯æ¡†æ¶ã€å¼€å‘è€…å·¥å…·ã€äº’è”ç½‘æ–°å“æ¨èã€è¿è¥æ•°æ®åˆ†æã€è‡ªåª’ä½“å’Œå·¥å…·åˆ©å™¨å¥½ç”¨çš„åˆ†ç±»å¯¼èˆªå¤§å…¨å¤§æ•°æ®å¯¼èˆªå¤§æ•°æ®å¯¼èˆªï¼Œä»¥å¤§æ•°æ®äº§ä¸šä¸ºä¸»ï¼Œå¤§æ•°æ®å·¥å…·ä¸ºè¾…ï¼Œç»™ç”¨æˆ·æä¾›ä¸€ä¸ªæ›´åŠ å¿«é€Ÿæ‰¾åˆ°å¤§æ•°æ®ç›¸å…³çš„å·¥å…·å¹³å°ä¼˜è®¾å¯¼èˆªä¼˜è®¾ç½‘ç«™å¯¼èˆªä¸ºè®¾è®¡å¸ˆæä¾›psæ•™ç¨‹ã€UIè®¾è®¡ã€ç´ æä¸‹è½½ã€é«˜æ¸…å›¾åº“ã€é…è‰²æ–¹æ¡ˆã€ç”¨æˆ·ä½“éªŒã€ç½‘é¡µè®¾è®¡ç­‰å…¨æ–¹ä½è®¾è®¡å¸ˆç½‘ç«™å¯¼èˆªæŒ‡å¼•ç‰›å¯¼èˆªå®ç”¨å·¥å…·å¯¼èˆªèšBTèšBT - èšåˆæœ€ä¼˜è´¨çš„BTã€ç£åŠ›èµ„æºShareHubShareHub - èµ„æºå’Œå·¥å…·çš„é›†åˆç‹¼ç‰Œå·¥ä½œç½‘å€å¯¼èˆªå·¥å…·ï¼Œèµ„æºï¼Œæ–¹æ³•ï¼ŒAll IN ONEçš„åŠå…¬å·¥ä½œç½‘å€å¯¼èˆªè®¡ç®—å‡ ä½•xuetangxé‚“ä¿Šè¾‰è€å¸ˆçš„ã€Šè®¡ç®—å‡ ä½•ã€‹Tsinghua Online Judgeé‚“ä¿Šè¾‰è€å¸ˆçš„ã€Šè®¡ç®—å‡ ä½•ã€‹ä¸Šæœºç»ƒä¹ C++LearnCppC++åŸºç¡€æ•™å­¦Project Based Learninggithubä¸­C++é¡¹ç›®å¼å­¦ä¹ CTOLIBC/C++å¼€å‘é¡¹ç›®(ä¸­æ–‡)STLSTLå…¥é—¨æ•™ç¨‹(ä¸­æ–‡)cppreferenceC/C++ API æ–‡æ¡£å†™ä½œåšæœäº‘å¥½ç”¨çš„æ–‡ä»¶è‡ªåŠ¨åŒæ­¥ï¼Œå†ä¹Ÿä¸æ‹…å¿ƒtyporaå‡ºbugfont awesomeiconå›¾æ ‡TEAå†™ä½œè½¯ä»¶æç®€åˆæå…¶å¼ºå¤§çš„ç¬”è®°åº”ç”¨å…³æ³¨çš„åšå®¢çŸ¥ååšå®¢éšæœºæ¨èæ¨èä¸€äº›æ¯”è¾ƒçŸ¥åçš„ç¨‹åºå¼€å‘å¤§ç¥å’Œå›¢é˜Ÿåšå®¢ã€ä»–ä»¬çš„githubå’Œä»–ä»¬ç½‘ç«™ç­‰ï¼Œè·Ÿéšå¤§ç¥çš„è„šæ­¥ï¼Œå­¦ä¹ æœ€æ–°çš„ç¨‹åºå¼€å‘çŸ¥è¯†ï¼Œæ—¶åˆ»è®©è‡ªå·±èµ°åœ¨å‰é¢ï¼æ¬¢è¿é‚®ç®±æ¨èæˆ–è€…è‡ªèé…·å£³-é™ˆçš“ä¸€ä¸ªITæŠ€æœ¯æŠ€æœ¯æ€§BLOGã€‚æ˜¯ä¸€ä¸ªåˆ†äº«æŠ€æœ¯è§é—»ï¼ŒçŸ¥è¯†ï¼Œè¶‹åŠ¿çš„ç½‘ç«™ã€‚é˜®ä¸€å³°å¤§ä½¬åˆ†äº«ITæŠ€æœ¯ã€ä»¥åŠå…¶ä»–æ„Ÿæ‚Ÿå»–é›ªå³°å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ -gitæ•™ç¨‹ & ç ”ç©¶äº’è”ç½‘äº§å“å’ŒæŠ€æœ¯ï¼Œæä¾›åŸåˆ›ä¸­æ–‡ç²¾å“æ•™ç¨‹æ¼”ç®—æ³•ç¬”è®°è¯¸å¦‚å›¾è®ºã€æ•°è®ºã€è®¡ç®—å‡ ä½•ã€æ•°å€¼æ–¹æ³•ã€èµ„æ–™å¤„ç†ã€è¯¸å¦‚è‡ªç„¶è¯­è¨€å¤„ç†ã€å£°éŸ³å¤„ç†ã€å½±åƒå¤„ç†ã€è®¡ç®—æœºå›¾å­¦ â€¦â€¦ å¸¸ç”¨ç½‘å€æˆ‘çš„äº‘ä¹¦ç­¾å°†æœ¬åœ°çš„æµè§ˆå™¨çš„æ”¶è—å¤¹è½¬åŒ–ä¸ºäº‘ä¹¦ç­¾Stack Overflowå…¨çƒæœ€å—ç¨‹åºå‘˜æ¬¢è¿çš„å¼€å‘ç¤¾åŒº å…¬ä¼—å·&å†™ä½œå¾®ä¿¡å…¬ä¼—å¹³å°å…¬ä¼—å·ç®¡ç†135ç¼–è¾‘å™¨åŠŸèƒ½å¼ºå¤§çš„å¾®ä¿¡å…¬ä¼—å·æ–‡ç« æ’ç‰ˆç¼–è¾‘å™¨åšæœäº‘å¥½ç”¨çš„æ–‡ä»¶è‡ªåŠ¨åŒæ­¥ï¼Œå†ä¹Ÿä¸æ‹…å¿ƒtyporaå‡ºbugfont awesomeiconå›¾æ ‡TEAå†™ä½œè½¯ä»¶æç®€åˆæå…¶å¼ºå¤§çš„ç¬”è®°åº”ç”¨COPYRIGHT 2020 - 2020 WEBSTACK ä¸¨ DESIGNED BY VIGGO ä¸¨ CHANGED BY longlongqinâ€‹ â€‹$(document).ready(function(){return $(document).on(\"click\",\".has-sub\",function(){var e=$(this);$(this).hasClass(\"expanded\")?$(\".has-sub ul\").each(function(s,i){var t=$(this);e.find(\"ul\")[0]!=i&&setTimeout(function(){t.attr(\"style\",\"\")},300)}):setTimeout(function(){e.find(\"ul\").attr(\"style\",\"\")},300)}),$(\".user-info-menu .hidden-sm\").click(function(){$(\".sidebar-menu\").hasClass(\"collapsed\")?$(\".has-sub.expanded > ul\").attr(\"style\",\"\"):$(\".has-sub.expanded > ul\").show()}),$(\"#main-menu li ul li\").click(function(){$(this).siblings(\"li\").removeClass(\"active\"),$(this).addClass(\"active\")}),$(\"a.smooth\").click(function(s){s.preventDefault(),public_vars.$mainMenu.add(public_vars.$sidebarProfile).toggleClass(\"mobile-is-visible\"),ps_destroy(),$(\"html, body\").animate({scrollTop:$($(this).attr(\"href\")).offset().top-30},{duration:500,easing:\"swing\"})}),!1});var href=\"\",pos=0;$(\"a.smooth\").click(function(s){$(\"#main-menu li\").each(function(){$(this).removeClass(\"active\")}),$(this).parent(\"li\").addClass(\"active\"),s.preventDefault(),href=$(this).attr(\"href\"),pos=$(href).position().top-30})!function(e){var c=Array.prototype.slice.call(document.querySelectorAll(\"img[data-original]\"));function i(){for(var r=0;r"}],"posts":[{"title":"C&C++/è°ƒè¯•c++ç¨‹åº","slug":"C&C++/è°ƒè¯•c++ç¨‹åº","date":"2020-06-01T02:16:27.348Z","updated":"2020-06-01T14:26:13.452Z","comments":true,"path":"archives/50be15c2.html","link":"","permalink":"https://longlongqin.github.io/archives/50be15c2.html","excerpt":"","text":"è¯­æ³•å’Œè¯­ä¹‰é”™è¯¯åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/syntax-and-semantic-errors/è½¯ä»¶é”™è¯¯éå¸¸æ™®éã€‚åˆ¶ä½œå®ƒä»¬å¾ˆå®¹æ˜“ï¼Œä½†è¦æ‰¾åˆ°å®ƒä»¬å´å¾ˆéš¾ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢ä¸åœ¨æˆ‘ä»¬çš„c++ç¨‹åºä¸­å‘ç°å’Œæ¸…é™¤bugç›¸å…³çš„ä¸»é¢˜ï¼ŒåŒ…æ‹¬å­¦ä¹ å¦‚ä½•ä½¿ç”¨é›†æˆè°ƒè¯•å™¨(IDEçš„ä¸€éƒ¨åˆ†)ã€‚å½“æ ¹æ®c++è¯­è¨€çš„è¯­æ³•ç¼–å†™æ— æ•ˆçš„è¯­å¥æ—¶ï¼Œä¼šå‘ç”Ÿè¯­æ³•é”™è¯¯ã€‚è¿™åŒ…æ‹¬é”™è¯¯ï¼Œå¦‚ç¼ºå°‘åˆ†å·ï¼Œä½¿ç”¨æœªå£°æ˜çš„å˜é‡ï¼Œä¸åŒ¹é…çš„æ‹¬å·æˆ–å¤§æ‹¬å·ç­‰ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¨‹åºåŒ…å«ç›¸å½“å¤šçš„è¯­æ³•é”™è¯¯:1234567#include &lt;iostream&gt; int main()&#123; std::cout &lt; \"Hi there\"; &lt;&lt; x; // invalid operator (&lt;), extraneous semicolon, undeclared variable (x) return 0 // missing semicolon at end of statement&#125;å¹¸è¿çš„æ˜¯ï¼Œç¼–è¯‘å™¨é€šå¸¸ä¼šæ•è·è¯­æ³•é”™è¯¯å¹¶ç”Ÿæˆè­¦å‘Šæˆ–é”™è¯¯ï¼Œå› æ­¤æ‚¨å¯ä»¥è½»æ¾åœ°è¯†åˆ«å’Œä¿®å¤é—®é¢˜ã€‚ç„¶ååªéœ€é‡æ–°ç¼–è¯‘ï¼Œç›´åˆ°æ¶ˆé™¤æ‰€æœ‰é”™è¯¯ã€‚ä¸€æ—¦ä½ çš„ç¨‹åºæ­£ç¡®ç¼–è¯‘ï¼Œè®©å®ƒå®é™…äº§ç”Ÿä½ æƒ³è¦çš„ç»“æœå¯èƒ½ä¼šå¾ˆæ£˜æ‰‹ã€‚å½“è¯­å¥åœ¨è¯­æ³•ä¸Šæœ‰æ•ˆï¼Œä½†æ²¡æœ‰æŒ‰ç…§ç¨‹åºå‘˜çš„æ„å›¾æ‰§è¡Œæ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¯­ä¹‰é”™è¯¯ã€‚123456789#include &lt;iostream&gt; int main()&#123; int a = 10; int b = 0; std::cout &lt;&lt; a &lt;&lt; \" / \" &lt;&lt; b &lt;&lt; \" = \" &lt;&lt; a / b; // é™¤0æ²¡æœ‰å®šä¹‰ return 0;&#125;ç°ä»£ç¼–è¯‘å™¨å·²ç»èƒ½å¤Ÿæ›´å¥½åœ°æ£€æµ‹æŸäº›ç±»å‹çš„å¸¸è§è¯­ä¹‰é”™è¯¯(ä¾‹å¦‚ä½¿ç”¨æœªåˆå§‹åŒ–çš„å˜é‡)ã€‚ç„¶è€Œï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å°†æ— æ³•æ•è·å¤§å¤šæ•°è¿™ç±»é—®é¢˜ï¼Œå› ä¸ºç¼–è¯‘å™¨çš„è®¾è®¡ç›®çš„æ˜¯åŠ å¼ºè¯­æ³•ï¼Œè€Œä¸æ˜¯æ„å›¾ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œé”™è¯¯æ˜¯å¾ˆå®¹æ˜“å‘ç°çš„ã€‚ä½†æ˜¯åœ¨å¤§å¤šæ•°é‡è¦çš„ç¨‹åºä¸­ï¼Œé€šè¿‡è‚‰çœ¼è§‚å¯Ÿä»£ç ä¸å®¹æ˜“å‘ç°è¯­ä¹‰é”™è¯¯ã€‚è¿™å°±æ˜¯è°ƒè¯•æŠ€æœ¯å¯ä»¥æ´¾ä¸Šç”¨åœºçš„åœ°æ–¹ã€‚è°ƒè¯•è¿‡ç¨‹åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/the-debugging-process/å‡è®¾æ‚¨ç¼–å†™äº†ä¸€ä¸ªç¨‹åºï¼Œä½†æ˜¯å®ƒä¸èƒ½æ­£ç¡®åœ°å·¥ä½œâ€”â€”ä»£ç ç¼–è¯‘å¾—å¾ˆå¥½ï¼Œä½†æ˜¯å½“æ‚¨è¿è¡Œå®ƒæ—¶ï¼Œæ‚¨å°†å¾—åˆ°ä¸€ä¸ªä¸æ­£ç¡®çš„ç»“æœã€‚ä½ ä¸€å®šåœ¨ä»€ä¹ˆåœ°æ–¹çŠ¯äº†è¯­ä¹‰é”™è¯¯ã€‚ä½ æ€ä¹ˆæ‰¾åˆ°å®ƒçš„?å¦‚æœæ‚¨ä¸€ç›´éµå¾ªæœ€ä½³å®è·µï¼Œç¼–å†™ä¸€äº›ä»£ç ï¼Œç„¶åå¯¹å…¶è¿›è¡Œæµ‹è¯•ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½å·²ç»å¾ˆæ¸…æ¥šé”™è¯¯åœ¨å“ªé‡Œäº†ã€‚æˆ–è€…ä½ å¯èƒ½å®Œå…¨æ²¡æœ‰çº¿ç´¢ã€‚è°ƒè¯•çš„ä¸€èˆ¬æ–¹æ³•ä¸€æ—¦å‘ç°é—®é¢˜ï¼Œè°ƒè¯•é—®é¢˜é€šå¸¸åŒ…æ‹¬äº”ä¸ªæ­¥éª¤:æ‰¾å‡ºé—®é¢˜çš„æ ¹æœ¬åŸå› (é€šå¸¸æ˜¯ä¸èƒ½å·¥ä½œçš„ä»£ç è¡Œ)ç¡®ä¿æ‚¨ç†è§£é—®é¢˜å‘ç”Ÿçš„åŸå› å†³å®šå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ä¿®å¤å¯¼è‡´é—®é¢˜çš„é—®é¢˜é‡æ–°æµ‹è¯•ä»¥ç¡®ä¿é—®é¢˜å·²ç»è§£å†³ï¼Œæ²¡æœ‰å‡ºç°æ–°çš„é—®é¢˜ç»ƒä¹ ï¼š12345678910111213#include &lt;iostream&gt; // Adds two numbersint add(int x, int y)&#123; return x - y; // function is supposed to add, but it doesn't&#125; int main()&#123; std::cout &lt;&lt; add(5, 3) &lt;&lt; '\\n'; // should produce 8, but produces 2 return 0;&#125;è¿™æ®µä»£ç æœ‰ä¸€ç‚¹å¾ˆå¥½: é”™è¯¯éå¸¸æ˜æ˜¾ï¼Œå› ä¸ºé”™è¯¯çš„ç­”æ¡ˆé€šè¿‡ç¬¬11è¡Œæ‰“å°åˆ°å±å¹•ä¸Šã€‚è¿™ä¸ºæˆ‘ä»¬çš„è°ƒæŸ¥æä¾›äº†ä¸€ä¸ªèµ·ç‚¹ã€‚Find the root cause: On line 11, we can see that weâ€™re passing in literals for arguments (5 and 3), so there is no room for error there. Since the inputs to function add are correct, but the output isnâ€™t, itâ€™s pretty apparent that function add must be producing the wrong value. The only statement in function add is the return statement, which must be the culprit. Weâ€™ve found the problem line. Now that we know where to focus our attention, noticing that weâ€™re subtracting instead of adding is something youâ€™re likely to find via inspection.Understand the problem: In this case, itâ€™s obvious why the wrong value is being generated â€“ weâ€™re using the wrong operator.Determine a fix: Weâ€™ll simply change operator- to operator+.Repair the issue: This is actually changing operator- to operator+ and ensuring the program recompiles.Retest: After implementing the change, rerunning the program will indicate that our program now produces the correct value of 8. For this simple program, thatâ€™s all the testing thatâ€™s needed.This example is trivial, but illustrates the basic process youâ€™ll go through when diagnosing any program.è°ƒè¯•ç­–ç•¥åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/a-strategy-for-debugging/åœ¨è°ƒè¯•ç¨‹åºæ—¶ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨çš„å¤§éƒ¨åˆ†æ—¶é—´éƒ½å°†èŠ±åœ¨å¯»æ‰¾é”™è¯¯çš„å®é™…ä½ç½®ä¸Šã€‚ä¸€æ—¦å‘ç°äº†é—®é¢˜ï¼Œå‰©ä¸‹çš„æ­¥éª¤ (ä¿®å¤é—®é¢˜å¹¶éªŒè¯é—®é¢˜æ˜¯å¦å·²ä¿®å¤) ç›¸æ¯”ä¹‹ä¸‹é€šå¸¸æ˜¯å¾®ä¸è¶³é“çš„ã€‚é€šè¿‡ä»£ç æ£€æŸ¥å‘ç°é—®é¢˜å‡è®¾ä½ æ³¨æ„åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œä½ æƒ³è¦æ‰¾å‡ºè¿™ä¸ªé—®é¢˜çš„åŸå› ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹(ç‰¹åˆ«æ˜¯åœ¨è¾ƒå°çš„ç¨‹åºä¸­)ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¿«ç¡®å®šé—®é¢˜æ‰€åœ¨ã€‚ç„¶è€Œï¼Œéšç€ç¨‹åºå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œé€šè¿‡ä»£ç æ£€æŸ¥å‘ç°é—®é¢˜ä¹Ÿå˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚é¦–å…ˆï¼Œæœ‰æ›´å¤šçš„ä»£ç éœ€è¦æŸ¥çœ‹ã€‚åœ¨ä¸€ä¸ªæœ‰æ•°åƒè¡Œä»£ç çš„ç¨‹åºä¸­ï¼ŒæŸ¥çœ‹æ¯ä¸€è¡Œä»£ç éƒ½è¦èŠ±è´¹å¾ˆé•¿çš„æ—¶é—´(æ›´ä¸ç”¨è¯´å®ƒæ˜¯éå¸¸æ— èŠçš„)ã€‚å…¶æ¬¡ï¼Œä»£ç æœ¬èº«å¾€å¾€æ›´å¤æ‚ï¼Œå‡ºé”™çš„åœ°æ–¹ä¹Ÿæ›´å¤šã€‚ç¬¬ä¸‰ï¼Œä»£ç çš„è¡Œä¸ºå¯èƒ½ä¸ä¼šç»™æ‚¨æä¾›å¾ˆå¤šå…³äºå“ªé‡Œå‡ºäº†é—®é¢˜çš„çº¿ç´¢ã€‚å¦‚æœä½ å†™äº†ä¸€ä¸ªç¨‹åºæ¥è¾“å‡ºè‚¡ç¥¨æ¨èï¼Œä½†å®é™…ä¸Šå®ƒä»€ä¹ˆä¹Ÿæ²¡è¾“å‡ºï¼Œä½ å¯èƒ½å°±ä¸çŸ¥é“ä»å“ªé‡Œå¼€å§‹å¯»æ‰¾é—®é¢˜äº†ã€‚æœ€åï¼Œé”™è¯¯å¯èƒ½æ˜¯ç”±äºé”™è¯¯çš„å‡è®¾é€ æˆçš„ã€‚å‡ ä¹ä¸å¯èƒ½ä»è§†è§‰ä¸Šå‘ç°ç”±é”™è¯¯å‡è®¾å¼•èµ·çš„é”™è¯¯ï¼Œå› ä¸ºåœ¨æ£€æŸ¥ä»£ç æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šåšå‡ºç›¸åŒçš„é”™è¯¯å‡è®¾ï¼Œè€Œä¸ä¼šæ³¨æ„åˆ°é”™è¯¯ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸èƒ½é€šè¿‡ä»£ç æ£€æŸ¥å‘ç°ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°å®ƒ?é€šè¿‡è¿è¡Œç¨‹åºå‘ç°é—®é¢˜å¹¸è¿çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸èƒ½é€šè¿‡ä»£ç æ£€æŸ¥å‘ç°é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é‡‡ç”¨å¦ä¸€ç§æ–¹æ³•:æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿç¨‹åºè¿è¡Œæ—¶çš„è¡Œä¸ºï¼Œå¹¶å°è¯•ä»ä¸­è¯Šæ–­é—®é¢˜ã€‚è¿™ç§æ–¹æ³•å¯ä»¥æ¦‚æ‹¬ä¸º:æ‰¾å‡ºé‡ç°é—®é¢˜çš„æ–¹æ³•è¿è¡Œç¨‹åºå¹¶æ”¶é›†ä¿¡æ¯ä»¥ç¼©å°é—®é¢˜æ‰€åœ¨é‡å¤å‰é¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ‰¾åˆ°é—®é¢˜ä¸ºæ­¢åœ¨æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†è®¨è®ºä¿ƒè¿›è¿™ç§æ–¹æ³•çš„æŠ€æœ¯ã€‚é‡ç°é—®é¢˜å‘ç°é—®é¢˜çš„ç¬¬ä¸€æ­¥ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥æ˜¯èƒ½å¤Ÿé‡ç°é—®é¢˜ã€‚åŸå› å¾ˆç®€å•: é™¤éä½ èƒ½è§‚å¯Ÿåˆ°é—®é¢˜çš„å‘ç”Ÿï¼Œå¦åˆ™å¾ˆéš¾å‘ç°é—®é¢˜ã€‚å…³æ³¨é—®é¢˜ä¸€æ—¦æˆ‘ä»¬å¯ä»¥åˆç†åœ°é‡ç°é—®é¢˜ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æ‰¾å‡ºé—®é¢˜åœ¨ä»£ç çš„ä»€ä¹ˆåœ°æ–¹ã€‚æ ¹æ®é—®é¢˜çš„æ€§è´¨ï¼Œè¿™å¯èƒ½æ˜¯å®¹æ˜“çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯å›°éš¾çš„ã€‚åŸºæœ¬çš„è°ƒè¯•ç­–ç•¥è°ƒè¯•ç­–ç•¥#1:æ³¨é‡Šæ‰ä»£ç å¦‚æœç¨‹åºæ˜¾ç¤ºå‡ºé”™è¯¯è¡Œä¸ºï¼Œå‡å°‘å¿…é¡»æœç´¢çš„ä»£ç é‡çš„ä¸€ç§æ–¹æ³•æ˜¯æ³¨é‡Šä¸€äº›ä»£ç ï¼Œçœ‹çœ‹é—®é¢˜æ˜¯å¦ä»ç„¶å­˜åœ¨ã€‚å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œæ³¨é‡Šæ‰çš„ä»£ç ä¸è´Ÿè´£ã€‚123456789int main()&#123; getNames(); // ask user to enter a bunch of names doMaintenance(); // do some random stuff sortNames(); // sort them in alphabetical order printNames(); // print the sorted list of names return 0; &#125;è®©æˆ‘ä»¬å‡è®¾è¿™ä¸ªç¨‹åºåº”è¯¥æŒ‰å­—æ¯é¡ºåºæ‰“å°ç”¨æˆ·è¾“å…¥çš„åç§°ï¼Œä½†æ˜¯å®ƒæŒ‰ç›¸åçš„å­—æ¯é¡ºåºæ‰“å°å®ƒä»¬ã€‚é—®é¢˜åœ¨å“ªé‡Œ?å®ƒå¯ä»¥æ˜¯ä¸Šé¢çš„ä»£ç ä¸­çš„ä»»ä½•ä¸€ä¸ªã€‚ä½†æ˜¯æˆ‘ä»¬å¯èƒ½æ€€ç–‘doMaintenance();ä¸è¿™ä¸ªé—®é¢˜æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æ³¨é‡Šæ‰å®ƒã€‚123456789int main()&#123; getNames(); // ask user to enter a bunch of names// doMaintenance(); // do some random stuff sortNames(); // sort them in alphabetical order printNames(); // print the sorted list of names return 0;&#125;å¦‚æœé—®é¢˜æ¶ˆå¤±äº†ï¼Œé‚£ä¹ˆé—®é¢˜ä¸€å®šæ˜¯ç”±doMaintenanceå¼•èµ·çš„ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨ç»´æŠ¤ä¸Šã€‚ä½†æ˜¯ï¼Œå¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨(è¿™ç§å¯èƒ½æ€§æ›´å¤§)ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±çŸ¥é“doMaintenanceå¹¶ä¸æ˜¯é”™è¯¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯¥å‡½æ•°æ’é™¤åœ¨å¤–ã€‚è¿™å¹¶ä¸èƒ½å¸®åŠ©æˆ‘ä»¬ç†è§£å®é™…çš„é—®é¢˜æ˜¯åœ¨å¯¹doMaintenanceçš„è°ƒç”¨ä¹‹å‰è¿˜æ˜¯ä¹‹åï¼Œä½†æ˜¯å®ƒå‡å°‘äº†æˆ‘ä»¬éšåè¦æ£€æŸ¥çš„ä»£ç é‡ã€‚ä¸è¦å¿˜è®°æ‚¨æ³¨é‡Šæ‰äº†å“ªäº›å‡½æ•°ï¼Œä»¥ä¾¿ç¨åå–æ¶ˆæ³¨é‡Š!è°ƒè¯•ç­–ç•¥#2:éªŒè¯ä»£ç æµåœ¨æ›´å¤æ‚çš„ç¨‹åºä¸­å¸¸è§çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œç¨‹åºè°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ¬¡æ•°å¤ªå¤šæˆ–å¤ªå°‘(åŒ…æ‹¬å®Œå…¨ä¸è°ƒç”¨)ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†è¯­å¥æ”¾åœ¨å‡½æ•°çš„é¡¶éƒ¨ä»¥æ‰“å°å‡½æ•°åæ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚è¿™æ ·ï¼Œå½“ç¨‹åºè¿è¡Œæ—¶ï¼Œæ‚¨å°±å¯ä»¥çœ‹åˆ°è°ƒç”¨äº†å“ªäº›å‡½æ•°ã€‚å½“æ‰“å°ç”¨äºè°ƒè¯•çš„ä¿¡æ¯æ—¶ï¼Œä½¿ç”¨std::cerrè€Œä¸æ˜¯std::coutã€‚è¿™æ ·åšçš„ä¸€ä¸ªåŸå› æ˜¯std::coutå¯èƒ½ä¼šè¢«ç¼“å†²ï¼Œè¿™æ„å‘³ç€åœ¨æ‚¨è¯·æ±‚std::coutè¾“å‡ºä¿¡æ¯å’Œå®ƒå®é™…æ‰§è¡Œè¾“å‡ºä¿¡æ¯ä¹‹é—´å¯èƒ½ä¼šæœ‰ä¸€ä¸ªåœé¡¿ã€‚å¦‚æœæ‚¨ä½¿ç”¨std::coutè¾“å‡ºï¼Œç„¶åæ‚¨çš„ç¨‹åºç«‹å³å´©æºƒï¼Œé‚£ä¹ˆstd::coutå¯èƒ½è¿˜æ²¡æœ‰å®é™…è¾“å‡ºã€‚è¿™å¯èƒ½ä¼šè¯¯å¯¼ä½ é—®é¢˜åœ¨å“ªé‡Œã€‚å¦ä¸€æ–¹é¢ï¼Œstd::cerræ˜¯æ— ç¼“å†²çš„ï¼Œè¿™æ„å‘³ç€æ‚¨å‘é€ç»™å®ƒçš„ä»»ä½•å†…å®¹éƒ½ä¼šç«‹å³è¾“å‡ºã€‚è¿™æœ‰åŠ©äºç¡®ä¿æ‰€æœ‰è°ƒè¯•è¾“å‡ºå°½å¿«å‡ºç°(ä»¥ç‰ºç‰²æŸäº›æ€§èƒ½ä¸ºä»£ä»·ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨è°ƒè¯•æ—¶å¹¶ä¸å…³å¿ƒè¿™äº›æ€§èƒ½)ã€‚å¦‚ï¼š12345678910111213#include &lt;iostream&gt; int getValue()&#123; return 4;&#125; int main()&#123; std::cout &lt;&lt; getValue; return 0;&#125;è™½ç„¶æˆ‘ä»¬å¸Œæœ›è¿™ä¸ªç¨‹åºæ‰“å°å€¼4ï¼Œä½†å®ƒå®é™…ä¸Šä¼šåœ¨ä¸åŒçš„æœºå™¨ä¸Šæ‰“å°ä¸åŒçš„å€¼ã€‚åœ¨ä½œè€…çš„æœºå™¨ä¸Šï¼Œå®ƒæ‰“å°:100101424è®©æˆ‘ä»¬åœ¨è¿™äº›å‡½æ•°ä¸­æ·»åŠ ä¸€äº›è°ƒè¯•è¯­å¥:123456789101112131415#include &lt;iostream&gt; int getValue()&#123;std::cerr &lt;&lt; \"getValue() called\\n\"; return 4;&#125; int main()&#123;std::cerr &lt;&lt; \"main() called\\n\"; std::cout &lt;&lt; getValue; return 0;&#125;åœ¨æ·»åŠ ä¸´æ—¶è°ƒè¯•è¯­å¥æ—¶ï¼Œæœ€å¥½ä¸è¦ç¼©è¿›å®ƒä»¬ã€‚è¿™ä½¿å¾—ä»¥åæ›´å®¹æ˜“æ‰¾åˆ°å®ƒä»¬å¹¶ç§»é™¤ã€‚ç°åœ¨ï¼Œå½“è¿™äº›å‡½æ•°æ‰§è¡Œæ—¶ï¼Œå®ƒä»¬å°†è¾“å‡ºå®ƒä»¬çš„åç§°ï¼Œè¡¨æ˜å®ƒä»¬è¢«è°ƒç”¨:12main() called00101424ç°åœ¨æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‡½æ•°getValueä»æœªè¢«è°ƒç”¨ã€‚è°ƒç”¨å‡½æ•°çš„ä»£ç ä¸€å®šæœ‰é—®é¢˜ã€‚è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹è¿™å¥è¯:1std::cout &lt;&lt; getValue;çœ‹ï¼Œæˆ‘ä»¬å¿˜äº†å‡½æ•°è°ƒç”¨çš„æ‹¬å·äº†ã€‚åº”è¯¥æ˜¯:123456789101112131415#include &lt;iostream&gt; int getValue()&#123;std::cerr &lt;&lt; \"getValue() called\\n\"; return 4;&#125; int main()&#123;std::cerr &lt;&lt; \"main() called\\n\"; std::cout &lt;&lt; getValue(); // added parenthesis here return 0;&#125;è¿™å°†ç”Ÿæˆæ­£ç¡®çš„è¾“å‡ºï¼š123main() calledgetValue() called4æˆ‘ä»¬å¯ä»¥åˆ é™¤ä¸´æ—¶è°ƒè¯•è¯­å¥ã€‚è°ƒè¯•ç­–ç•¥#3:æ‰“å°å€¼å¯¹äºæŸäº›ç±»å‹çš„é”™è¯¯ï¼Œç¨‹åºå¯èƒ½æ­£åœ¨è®¡ç®—æˆ–ä¼ é€’é”™è¯¯çš„å€¼ã€‚æˆ‘ä»¬è¿˜å¯ä»¥è¾“å‡ºå˜é‡(åŒ…æ‹¬å‚æ•°)æˆ–è¡¨è¾¾å¼çš„å€¼ï¼Œä»¥ç¡®ä¿å®ƒä»¬æ˜¯æ­£ç¡®çš„ã€‚è€ƒè™‘ä¸‹é¢çš„ç¨‹åºï¼Œå®ƒæœ¬åº”è¯¥æ·»åŠ ä¸¤ä¸ªæ•°å­—ï¼Œä½†å´ä¸èƒ½æ­£ç¡®å·¥ä½œ:1234567891011121314151617181920212223242526272829303132#include &lt;iostream&gt; int add(int x, int y)&#123; return x + y;&#125; void printResult(int z)&#123; std::cout &lt;&lt; \"The answer is: \" &lt;&lt; z &lt;&lt; '\\n';&#125; int getUserInput()&#123; std::cout &lt;&lt; \"Enter a number: \"; int x&#123;&#125;; std::cin &gt;&gt; x; return x;&#125; int main()&#123; int x&#123; getUserInput() &#125;; int y&#123; getUserInput() &#125;; std::cout &lt;&lt; x &lt;&lt; \" + \" &lt;&lt; y &lt;&lt; '\\n'; int z&#123; add(x, 5) &#125;; printResult(z); return 0;&#125;ä¸‹é¢æ˜¯è¿™ä¸ªç¨‹åºçš„ä¸€äº›è¾“å‡º:1234Enter a number: 4Enter a number: 34 + 3The answer is: 9è¿™æ˜¯ä¸æ­£ç¡®çš„ã€‚çœ‹åˆ°é”™è¯¯äº†å—?å³ä½¿åœ¨è¿™ä¸ªç®€çŸ­çš„ç¨‹åºä¸­ï¼Œä¹Ÿå¾ˆéš¾å‘ç°å®ƒã€‚è®©æˆ‘ä»¬æ·»åŠ ä¸€äº›ä»£ç æ¥è°ƒè¯•æˆ‘ä»¬çš„å€¼:1234567891011121314151617181920212223242526272829303132333435#include &lt;iostream&gt; int add(int x, int y)&#123; return x + y;&#125; void printResult(int z)&#123; std::cout &lt;&lt; \"The answer is: \" &lt;&lt; z &lt;&lt; '\\n';&#125; int getUserInput()&#123; std::cout &lt;&lt; \"Enter a number: \"; int x&#123;&#125;; std::cin &gt;&gt; x; return x;&#125; int main()&#123; int x&#123; getUserInput() &#125;;std::cerr &lt;&lt; \"main::x = \" &lt;&lt; x &lt;&lt; '\\n'; int y&#123; getUserInput() &#125;;std::cerr &lt;&lt; \"main::y = \" &lt;&lt; y &lt;&lt; '\\n'; std::cout &lt;&lt; x &lt;&lt; \" + \" &lt;&lt; y &lt;&lt; '\\n'; int z&#123; add(x, 5) &#125;;std::cerr &lt;&lt; \"main::z = \" &lt;&lt; z &lt;&lt; '\\n'; printResult(z); return 0;&#125;è¿™æ˜¯ä¸Šé¢çš„è¾“å‡º:1234567Enter a number: 4main::x = 4Enter a number: 3main::y = 34 + 3main::z = 9The answer is: 9å˜é‡xå’Œyå¾—åˆ°äº†æ­£ç¡®çš„å€¼ï¼Œä½†å˜é‡zæ²¡æœ‰ã€‚é—®é¢˜å¿…é¡»åœ¨è¿™ä¸¤ç‚¹ä¹‹é—´ï¼Œè¿™ä½¿å¾—å‡½æ•°add()æˆä¸ºä¸€ä¸ªå…³é”®é—®é¢˜ã€‚è®©æˆ‘ä»¬ä¿®æ”¹å‡½æ•°add:123456789101112131415161718192021222324252627282930313233343536#include &lt;iostream&gt; int add(int x, int y)&#123;std::cerr &lt;&lt; \"add() called (x=\" &lt;&lt; x &lt;&lt;\", y=\" &lt;&lt; y &lt;&lt; \")\" &lt;&lt; '\\n'; //â­ return x + y;&#125; void printResult(int z)&#123; std::cout &lt;&lt; \"The answer is: \" &lt;&lt; z &lt;&lt; '\\n';&#125; int getUserInput()&#123; std::cout &lt;&lt; \"Enter a number: \"; int x&#123;&#125;; std::cin &gt;&gt; x; return x;&#125; int main()&#123; int x&#123; getUserInput() &#125;;std::cerr &lt;&lt; \"main::x = \" &lt;&lt; x &lt;&lt; '\\n'; int y&#123; getUserInput() &#125;;std::cerr &lt;&lt; \"main::y = \" &lt;&lt; y &lt;&lt; '\\n'; std::cout &lt;&lt; x &lt;&lt; \" + \" &lt;&lt; y &lt;&lt; '\\n'; int z&#123; add(x, 5) &#125;;std::cerr &lt;&lt; \"main::z = \" &lt;&lt; z &lt;&lt; '\\n'; printResult(z); return 0;&#125;123456789Now weâ€™ll get the output:Enter a number: 4main::x = 4Enter a number: 3main::y = 3add() called (x=4, y=5)main::z = 9The answer is: 9å˜é‡yçš„å€¼æ˜¯3ï¼Œä½†æ˜¯æˆ‘ä»¬çš„å‡½æ•°addå´å¾—åˆ°äº†å‚æ•°yçš„å€¼5ï¼Œæˆ‘ä»¬ä¸€å®šæ˜¯ä¼ é€’äº†é”™è¯¯çš„å‚æ•°ã€‚æœç„¶:1int z&#123; add(x, 5) &#125;;åœ¨è¿™é‡Œã€‚æˆ‘ä»¬ä¼ é€’çš„æ˜¯æ–‡å­—5ï¼Œè€Œä¸æ˜¯å˜é‡yçš„å€¼ä½œä¸ºå‚æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¿®å¤ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥åˆ é™¤è°ƒè¯•è¯­å¥ã€‚ä¸ºä»€ä¹ˆä½¿ç”¨ æ‰“å°è¯­å¥ è¿›è¡Œè°ƒè¯•ä¸æ˜¯å¾ˆå¥½è™½ç„¶å°†è°ƒè¯•è¯­å¥æ·»åŠ åˆ°ç”¨äºè¯Šæ–­çš„ç¨‹åºä¸­æ˜¯ä¸€ç§å¸¸è§çš„åŸºæœ¬æŠ€æœ¯ï¼Œä¹Ÿæ˜¯ä¸€ç§åŠŸèƒ½æ€§æŠ€æœ¯(ç‰¹åˆ«æ˜¯å½“è°ƒè¯•å™¨ç”±äºæŸç§åŸå› ä¸å¯ç”¨æ—¶)ï¼Œä½†å®ƒå¹¶ä¸æ˜¯å¾ˆå¥½ï¼ŒåŸå› å¦‚ä¸‹:è°ƒè¯•è¯­å¥ä½¿ä»£ç æ··ä¹±ã€‚è°ƒè¯•è¯­å¥ä¼šä½¿ç¨‹åºçš„è¾“å‡ºå˜å¾—æ··ä¹±ã€‚åœ¨ä½¿ç”¨å®Œè°ƒè¯•è¯­å¥ä¹‹åï¼Œå¿…é¡»åˆ é™¤å®ƒä»¬ï¼Œè¿™ä½¿å¾—å®ƒä»¬ä¸å¯é‡ç”¨ã€‚è°ƒè¯•è¯­å¥éœ€è¦ä¿®æ”¹ä»£ç æ¥æ·»åŠ å’Œåˆ é™¤ï¼Œè¿™å¯èƒ½ä¼šå¼•å…¥æ–°çš„é”™è¯¯ã€‚æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„è¯¾ç¨‹ä¸­æ¢ç´¢å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚æ›´å¤šçš„è°ƒè¯•ç­–ç•¥å¯¹è°ƒè¯•ä»£ç è¿›è¡Œæ¡ä»¶åŒ–è€ƒè™‘ä»¥ä¸‹åŒ…å«ä¸€äº›è°ƒè¯•è¯­å¥çš„ç¨‹åº:12345678910111213141516171819#include &lt;iostream&gt; int getUserInput()&#123;std::cerr &lt;&lt; \"getUserInput() called\\n\"; std::cout &lt;&lt; \"Enter a number: \"; int x&#123;&#125;; std::cin &gt;&gt; x; return x;&#125; int main()&#123;std::cerr &lt;&lt; \"main() called\\n\"; int x&#123; getUserInput() &#125;; std::cout &lt;&lt; \"You entered: \" &lt;&lt; x; return 0;&#125;å½“æ‚¨å®Œæˆè°ƒè¯•è¯­å¥æ—¶ï¼Œæ‚¨å°†éœ€è¦åˆ é™¤å®ƒä»¬ï¼Œæˆ–è€…æ³¨é‡Šæ‰å®ƒä»¬ã€‚ç„¶åï¼Œå¦‚æœæ‚¨ç¨åè¿˜æƒ³è¦å®ƒä»¬ï¼Œå°±å¿…é¡»å°†å®ƒä»¬æ·»åŠ å›å»ï¼Œæˆ–è€…å–æ¶ˆæ³¨é‡Šã€‚ä¸€ç§æ›´å®¹æ˜“åœ¨ç¨‹åºä¸­ç¦ç”¨å’Œå¯ç”¨è°ƒè¯•çš„æ–¹æ³•æ˜¯ä½¿ç”¨é¢„å¤„ç†å™¨æŒ‡ä»¤ä½¿è°ƒè¯•è¯­å¥æœ‰æ¡ä»¶:12345678910111213141516171819202122232425#include &lt;iostream&gt; #define ENABLE_DEBUG // æ³¨é‡Šå‡ºä»¥ç¦ç”¨è°ƒè¯• int getUserInput()&#123;#ifdef ENABLE_DEBUG //â­std::cerr &lt;&lt; \"getUserInput() called\\n\";#endif //â­ std::cout &lt;&lt; \"Enter a number: \"; int x&#123;&#125;; std::cin &gt;&gt; x; return x;&#125; int main()&#123;#ifdef ENABLE_DEBUG //â­std::cerr &lt;&lt; \"main() called\\n\";#endif //â­ int x&#123; getUserInput() &#125;; std::cout &lt;&lt; \"You entered: \" &lt;&lt; x; return 0;&#125;ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ æ³¨é‡Š/å–æ¶ˆæ³¨é‡Š #define ENABLE_DEBUG æ¥å¯ç”¨è°ƒè¯•ã€‚è¿™å…è®¸æˆ‘ä»¬é‡ç”¨ä»¥å‰æ·»åŠ çš„è°ƒè¯•è¯­å¥ï¼Œç„¶ååœ¨ä½¿ç”¨å®ƒä»¬æ—¶ç¦ç”¨å®ƒä»¬ï¼Œè€Œä¸å¿…ä»ä»£ç ä¸­å®é™…åˆ é™¤å®ƒä»¬ã€‚å¦‚æœè¿™æ˜¯ä¸€ä¸ªå¤šæ–‡ä»¶ç¨‹åºï¼Œé‚£ä¹ˆ#define ENABLE_DEBUGå°†ä½äºä¸€ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œè¯¥å¤´æ–‡ä»¶åŒ…å«åœ¨æ‰€æœ‰ä»£ç æ–‡ä»¶ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨å•ä¸ªä½ç½® æ³¨é‡Š/å–æ¶ˆæ³¨ é‡Š#defineï¼Œå¹¶è®©å®ƒä¼ æ’­åˆ°æ‰€æœ‰ä»£ç æ–‡ä»¶ã€‚è¿™è§£å†³äº†å¿…é¡»åˆ é™¤è°ƒè¯•è¯­å¥çš„é—®é¢˜å’Œè¿™æ ·åšçš„é£é™©ï¼šä½†ä»£ä»·æ˜¯ä»£ç æ›´åŠ æ··ä¹±ã€‚è¿™ç§æ–¹æ³•çš„å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œå¦‚æœæ‚¨è¾“å…¥é”™è¯¯(ä¾‹å¦‚æ‹¼é”™â€œDEBUGâ€)æˆ–å¿˜è®°å°†å¤´æ–‡ä»¶åŒ…å«åˆ°ä»£ç æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆå¯èƒ½æ— æ³•å¯ç”¨è¯¥æ–‡ä»¶çš„éƒ¨åˆ†æˆ–å…¨éƒ¨è°ƒè¯•ã€‚ä½¿ç”¨ä¸€ä¸ªæ—¥å¿—è®°å½•å™¨é€šè¿‡é¢„å¤„ç†ç¨‹åºè¿›è¡Œæ¡ä»¶åŒ–è°ƒè¯•çš„å¦ä¸€ç§æ–¹æ³• æ˜¯å°†è°ƒè¯•ä¿¡æ¯å‘é€åˆ°æ—¥å¿—æ–‡ä»¶ã€‚æ—¥å¿—æ–‡ä»¶æ˜¯ä¸€ä¸ªè®°å½•è½¯ä»¶ä¸­å‘ç”Ÿçš„äº‹ä»¶çš„æ–‡ä»¶(é€šå¸¸å­˜å‚¨åœ¨ç£ç›˜ä¸Š)ã€‚å°†ä¿¡æ¯å†™å…¥æ—¥å¿—æ–‡ä»¶çš„è¿‡ç¨‹ç§°ä¸ºæ—¥å¿—è®°å½•ã€‚å¤§å¤šæ•°åº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿç¼–å†™çš„æ—¥å¿—æ–‡ä»¶å¯ç”¨äºå¸®åŠ©è¯Šæ–­å‘ç”Ÿçš„é—®é¢˜ã€‚æ—¥å¿—æ–‡ä»¶æœ‰ä¸€äº›ä¼˜ç‚¹ï¼šå› ä¸ºå†™å…¥æ—¥å¿—æ–‡ä»¶çš„ä¿¡æ¯ä¸ç¨‹åºçš„è¾“å‡ºæ˜¯åˆ†å¼€çš„ï¼Œæ‰€ä»¥å¯ä»¥é¿å…å°†æ­£å¸¸è¾“å‡ºå’Œè°ƒè¯•è¾“å‡ºæ··åˆåœ¨ä¸€èµ·æ‰€é€ æˆçš„æ··ä¹±ã€‚æ—¥å¿—æ–‡ä»¶ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“åœ°å‘é€ç»™å…¶ä»–äººè¿›è¡Œè¯Šæ–­â€”â€”å› æ­¤ï¼Œå¦‚æœä½¿ç”¨æ‚¨çš„è½¯ä»¶çš„äººé‡åˆ°é—®é¢˜ï¼Œæ‚¨å¯ä»¥è®©ä»–ä»¬å°†æ—¥å¿—æ–‡ä»¶å‘é€ç»™æ‚¨ï¼Œè¿™å¯èƒ½ä¼šå¸®åŠ©æ‚¨äº†è§£é—®é¢˜æ‰€åœ¨ã€‚è™½ç„¶å¯ä»¥ç¼–å†™è‡ªå·±çš„ä»£ç æ¥åˆ›å»ºæ—¥å¿—æ–‡ä»¶å¹¶å‘å®ƒä»¬å‘é€è¾“å‡ºï¼Œä½†æ˜¯æœ€å¥½ä½¿ç”¨ç°æœ‰çš„ç¬¬ä¸‰æ–¹æ—¥å¿—å·¥å…·ä¹‹ä¸€ã€‚ä½ ç”¨å“ªä¸€ä¸ªå–å†³äºä½ ã€‚ä¸ºäº†ä¾¿äºè¯´æ˜ï¼Œæˆ‘ä»¬å°†å±•ç¤ºä½¿ç”¨plogæ—¥å¿—è®°å½•å™¨è¾“å‡ºåˆ°æ—¥å¿—è®°å½•å™¨çš„å†…å®¹ã€‚Plogæ˜¯ä½œä¸ºä¸€ç»„å¤´æ–‡ä»¶å®ç°çš„ï¼Œå› æ­¤å¾ˆå®¹æ˜“åœ¨ä»»ä½•éœ€è¦çš„åœ°æ–¹åŒ…å«å®ƒï¼Œè€Œä¸”å®ƒæ˜¯è½»é‡çº§çš„ï¼Œæ˜“äºä½¿ç”¨ã€‚å¦‚ä½•ä½¿ç”¨plogæ—¥å¿—è®°å½•å™¨If you want to compile the above example yourself, or use plog in your own projects, you can follow these instructions to install it:First, get the latest plog release:Visit the plog repo.Click the â€œreleasesâ€ tab (itâ€™s in the same row as â€œcommitsâ€, â€œbranchesâ€, â€œpackagesâ€, etcâ€¦)Under the release tagged as â€œlatest releaseâ€ on the left, click the link â€œSource code (zip)â€ to download the latest release.Next, unzip the entire archive to `` on your hard drive.Finally, for each project, set the \\plog-\\include\\ directory as an include directory inside your IDE. There are instructions on how to do this for Visual Studio here: A.2 â€“ Using libraries with Visual Studio and Code::Blocks here: A.3 â€“ Using libraries with Code::Blocks.ä½¿ç”¨é›†æˆè°ƒè¯•å™¨: å•æ­¥è°ƒè¯•åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/using-an-integrated-debugger-stepping/å½“æ‚¨è¿è¡Œç¨‹åºæ—¶ï¼Œæ‰§è¡Œä»ä¸»å‡½æ•°çš„é¡¶éƒ¨å¼€å§‹ï¼Œç„¶åä¸€ä¸ªè¯­å¥æ¥ç€ä¸€ä¸ªè¯­å¥åœ°æ‰§è¡Œï¼Œç›´åˆ°ç¨‹åºç»“æŸã€‚åœ¨ä»»ä½•æ—¶å€™å½“ä½ çš„ç¨‹åºè¿è¡Œæ—¶,ç¨‹åºè·Ÿè¸ªå¾ˆå¤šäº‹æƒ…ï¼šä½ ä½¿ç”¨çš„å˜é‡çš„å€¼ï¼Œè°ƒç”¨äº†å“ªäº›å‡½æ•°(å½“è¿™äº›å‡½æ•°è¿”å›,ç¨‹åºå°†çŸ¥é“å›åˆ°)ï¼Œä»¥åŠç¨‹åºå†…çš„å½“å‰æ‰§è¡Œç‚¹(æ‰€ä»¥å®ƒçŸ¥é“è¿™è¯­å¥æ‰§è¡Œä¸‹ä¸€ä¸ª)ã€‚æ‰€æœ‰è¿™äº›è¢«è·Ÿè¸ªçš„ä¿¡æ¯éƒ½ç§°ä¸ºæ‚¨çš„ç¨‹åºçŠ¶æ€(æˆ–è€…ç®€ç§°ä¸ºçŠ¶æ€)ã€‚åœ¨ä»¥å‰çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†å„ç§ä¿®æ”¹ä»£ç ä»¥å¸®åŠ©è°ƒè¯•çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬æ‰“å°è¯Šæ–­ä¿¡æ¯æˆ–ä½¿ç”¨æ—¥å¿—è®°å½•å™¨ã€‚è¿™äº›æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶æ£€æŸ¥ç¨‹åºçŠ¶æ€çš„ç®€å•æ–¹æ³•ã€‚å°½ç®¡è¿™äº›æ–¹æ³•å¦‚æœä½¿ç”¨å¾—å½“æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯å®ƒä»¬ä»ç„¶æœ‰ç¼ºç‚¹:å®ƒä»¬éœ€è¦ä¿®æ”¹ä»£ç ï¼Œè¿™éœ€è¦æ—¶é—´ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå¼•å…¥æ–°çš„é”™è¯¯ï¼Œè€Œä¸”å®ƒä»¬ä¼šä½¿ä»£ç å˜å¾—æ··ä¹±ï¼Œä½¿ç°æœ‰çš„ä»£ç æ›´éš¾ç†è§£ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€å±•ç¤ºçš„æŠ€æœ¯èƒŒåæœ‰ä¸€ä¸ªæœªé˜æ˜çš„å‡è®¾:ä¸€æ—¦æˆ‘ä»¬è¿è¡Œä»£ç ï¼Œå®ƒå°±ä¼šè¿è¡Œåˆ°å®Œæˆ(åªæœ‰åœ¨æ¥å—è¾“å…¥æ—¶æ‰ä¼šæš‚åœ)ï¼Œè€Œæˆ‘ä»¬æ²¡æœ‰æœºä¼šåœ¨ä»»ä½•æˆ‘ä»¬æƒ³è¦çš„åœ°æ–¹å¹²é¢„å’Œæ£€æŸ¥ç¨‹åºçš„ç»“æœã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿå»æ‰è¿™ä¸ªå‡è®¾å‘¢?å¹¸è¿çš„æ˜¯,æˆ‘ä»¬å¯ä»¥ã€‚å¤§å¤šæ•°ç°ä»£IDEéƒ½å¸¦æœ‰ä¸€ä¸ªé›†æˆçš„å·¥å…·ï¼Œç§°ä¸ºè°ƒè¯•å™¨ï¼Œå®ƒçš„è®¾è®¡ç›®çš„å°±æ˜¯å®ç°è¿™ä¸€ç‚¹ã€‚è°ƒè¯•å™¨è°ƒè¯•å™¨æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºï¼Œå®ƒå…è®¸ç¨‹åºå‘˜æ§åˆ¶ç¨‹åºçš„æ‰§è¡Œæ–¹å¼ï¼Œå¹¶åœ¨ç¨‹åºè¿è¡Œæ—¶æ£€æŸ¥ç¨‹åºçŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œç¨‹åºå‘˜å¯ä»¥ä½¿ç”¨è°ƒè¯•å™¨é€è¡Œæ‰§è¡Œç¨‹åºï¼ŒåŒæ—¶æ£€æŸ¥å˜é‡çš„å€¼ã€‚é€šè¿‡æ¯”è¾ƒå˜é‡çš„å®é™…å€¼å’Œé¢„æœŸå€¼ï¼Œæˆ–è€…è§‚å¯Ÿä»£ç çš„æ‰§è¡Œè·¯å¾„ï¼Œè°ƒè¯•å™¨å¯ä»¥æå¤§åœ°å¸®åŠ©è·Ÿè¸ªè¯­ä¹‰(é€»è¾‘)é”™è¯¯ã€‚è°ƒè¯•å™¨èƒŒåçš„å¼ºå¤§åŠŸèƒ½æœ‰ä¸¤æ–¹é¢ï¼šç²¾ç¡®æ§åˆ¶ç¨‹åºæ‰§è¡Œçš„èƒ½åŠ›ï¼›ä»¥åŠ æŸ¥çœ‹(å’Œä¿®æ”¹ï¼Œå¦‚æœéœ€è¦)ç¨‹åºçŠ¶æ€çš„èƒ½åŠ›ã€‚æ—©æœŸçš„è°ƒè¯•å™¨(å¦‚gdb)æ˜¯å…·æœ‰å‘½ä»¤è¡Œæ¥å£çš„ç‹¬ç«‹ç¨‹åºï¼Œç¨‹åºå‘˜å¿…é¡»åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥æ™¦æ¶©éš¾æ‡‚çš„å‘½ä»¤æ‰èƒ½å·¥ä½œã€‚åæ¥çš„è°ƒè¯•å™¨(ä¾‹å¦‚Borlandçš„ turbo debuggerçš„æ—©æœŸç‰ˆæœ¬)ä»ç„¶æ˜¯ç‹¬ç«‹çš„ï¼Œä½†æ˜¯æœ‰äº†è‡ªå·±çš„â€œå›¾å½¢åŒ–â€å‰ç«¯ï¼Œä½¿å¾—ä½¿ç”¨å®ƒä»¬æ›´åŠ å®¹æ˜“ã€‚ç°åœ¨ï¼Œå¤§å¤šæ•°ç°ä»£ideéƒ½æœ‰é›†æˆçš„è°ƒè¯•å™¨â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒè¯•å™¨ä½¿ç”¨ä¸ä»£ç ç¼–è¾‘å™¨ç›¸åŒçš„æ¥å£ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç¼–å†™ä»£ç æ—¶ä½¿ç”¨çš„ç¯å¢ƒè¿›è¡Œè°ƒè¯•(è€Œä¸å¿…åˆ‡æ¢ç¨‹åº)ã€‚å‡ ä¹æ‰€æœ‰ç°ä»£è°ƒè¯•å™¨éƒ½åŒ…å«ç›¸åŒçš„åŸºæœ¬ç‰¹æ€§æ ‡å‡†é›†â€”â€”ç„¶è€Œï¼Œåœ¨å¦‚ä½•å®‰æ’èœå•æ¥è®¿é—®è¿™äº›åŠŸèƒ½æ–¹é¢å‡ ä¹æ²¡æœ‰ä¸€è‡´æ€§ï¼Œé”®ç›˜å¿«æ·é”®çš„ä¸€è‡´æ€§å°±æ›´å°‘äº†ã€‚æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†å°†ç”¨äºå­¦ä¹ å¦‚ä½•ä½¿ç”¨è°ƒè¯•å™¨ã€‚ä¸è¦å¿½è§†å­¦ä¹ ä½¿ç”¨è°ƒè¯•å™¨ã€‚éšç€ç¨‹åºå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œä¸æŸ¥æ‰¾å’Œä¿®å¤é—®é¢˜æ‰€èŠ‚çœçš„æ—¶é—´ç›¸æ¯”ï¼Œå­¦ä¹ å¦‚ä½•æœ‰æ•ˆåœ°ä½¿ç”¨é›†æˆè°ƒè¯•å™¨æ‰€èŠ±è´¹çš„æ—¶é—´å°±æ˜¾å¾—å¾®ä¸è¶³é“äº†ã€‚Step intoIn Visual Studio, the step into command can be accessed via Debug menu &gt; Step Into, or by pressing the F11 shortcut key.step intoå‘½ä»¤åœ¨ç¨‹åºçš„æ­£å¸¸æ‰§è¡Œè·¯å¾„ä¸­æ‰§è¡Œä¸‹ä¸€ä¸ªè¯­å¥ï¼Œç„¶åæš‚åœç¨‹åºçš„æ‰§è¡Œï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è°ƒè¯•å™¨æ£€æŸ¥ç¨‹åºçš„çŠ¶æ€ã€‚å¦‚æœæ­£åœ¨æ‰§è¡Œçš„è¯­å¥åŒ…å«ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œå•æ­¥æ‰§è¡Œä¼šå¯¼è‡´ç¨‹åºè·³è½¬åˆ°æ­£åœ¨è°ƒç”¨çš„å‡½æ•°çš„é¡¶éƒ¨ï¼Œå¹¶åœ¨é‚£é‡Œæš‚åœã€‚å½“ä½ çš„ç¨‹åºä¸è¿è¡Œï¼Œä½ æ‰§è¡Œç¬¬ä¸€ä¸ªè°ƒè¯•å‘½ä»¤ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°ç›¸å½“å¤šçš„äº‹æƒ…å‘ç”Ÿ:å¦‚æœéœ€è¦ï¼Œç¨‹åºå°†é‡æ–°ç¼–è¯‘ã€‚ç¨‹åºå°†å¼€å§‹è¿è¡Œã€‚å› ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªæ§åˆ¶å°ç¨‹åºï¼Œæ‰€ä»¥åº”è¯¥æ‰“å¼€æ§åˆ¶å°è¾“å‡ºçª—å£ã€‚å®ƒå°†æ˜¯ç©ºçš„ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰è¾“å‡ºä»»ä½•ä¸œè¥¿ã€‚æ‚¨çš„IDEå¯èƒ½ä¼šæ‰“å¼€ä¸€äº›è¯Šæ–­çª—å£ï¼Œè¿™äº›çª—å£çš„åç§°å¯èƒ½æ˜¯â€œè¯Šæ–­å·¥å…·â€ã€â€œè°ƒç”¨å †æ ˆâ€å’Œâ€œç›‘è§†â€ã€‚ç¨åæˆ‘ä»¬å°†ä»‹ç»å…¶ä¸­çš„ä¸€äº›å†…å®¹â€”ç°åœ¨æ‚¨å¯ä»¥å¿½ç•¥å®ƒä»¬ã€‚Step overIn Visual Studio, the step over command can be accessed via Debug menu &gt; Step Over, or by pressing the F10 shortcut key.ä¸step intoç±»ä¼¼ï¼Œstep overå‘½ä»¤åœ¨ç¨‹åºçš„æ­£å¸¸æ‰§è¡Œè·¯å¾„ä¸­æ‰§è¡Œä¸‹ä¸€æ¡è¯­å¥ã€‚ä½†æ˜¯ï¼Œstep intoå°†è¾“å…¥å‡½æ•°è°ƒç”¨å¹¶é€è¡Œæ‰§è¡Œå®ƒä»¬ï¼Œè€Œstep overå°†æ‰§è¡Œæ•´ä¸ªå‡½æ•°è€Œä¸åœæ­¢å¹¶åœ¨å‡½æ•°æ‰§è¡Œåå°†æ§åˆ¶æƒè¿”å›ç»™æ‚¨ã€‚Step outIn Visual Studio, the step out command can be accessed via Debug menu &gt; Step Out, or by pressing the Shift-F11 å¿«æ·é”®ç»„åˆ.ä¸å…¶ä»–ä¸¤ä¸ªå•æ­¥æ‰§è¡Œå‘½ä»¤ä¸åŒï¼ŒStep outä¸åªæ˜¯æ‰§è¡Œä¸‹ä¸€è¡Œä»£ç ã€‚ç›¸åï¼Œå®ƒæ‰§è¡Œå½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ä¸­çš„æ‰€æœ‰å‰©ä½™ä»£ç ï¼Œç„¶ååœ¨å‡½æ•°è¿”å›æ—¶å°†æ§åˆ¶æƒè¿”å›ç»™æ‚¨ã€‚Step backä¸€äº›è°ƒè¯•å™¨(å¦‚Visual Studio Enterprise Editionå’ŒGDB 7.0)å¼•å…¥äº†å•æ­¥è°ƒè¯•åŠŸèƒ½ï¼Œé€šå¸¸ç§°ä¸ºå•æ­¥åé€€æˆ–åå‘è°ƒè¯•ï¼ˆstep back or reverse debuggingï¼‰ã€‚Step backçš„ç›®çš„æ˜¯å›é€€æœ€åä¸€æ­¥ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥å°†ç¨‹åºè¿”å›åˆ°å…ˆå‰çš„çŠ¶æ€ã€‚å¦‚æœæ‚¨æ‰§è¡Œçš„æ“ä½œè¶…è¿‡äº†ä¸€æ­¥ï¼Œæˆ–è€…æ‚¨æƒ³é‡æ–°æ£€æŸ¥åˆšåˆšæ‰§è¡Œçš„è¯­å¥ï¼Œé‚£ä¹ˆè¿™å°†éå¸¸æœ‰ç”¨ã€‚ç”±äºå…¶å¤æ‚æ€§ï¼Œè¿™ç§åŠŸèƒ½è¿˜æ²¡æœ‰æ ‡å‡†åŒ–ï¼Œå¹¶ä¸”ä¼šå› è°ƒè¯•å™¨çš„ä¸åŒè€Œæœ‰æ‰€ä¸åŒã€‚æˆªæ­¢åˆ°ç¼–å†™æœ¬æ–‡æ—¶(2019å¹´1æœˆ)ï¼ŒVisual Studio Community editionå’Œæœ€æ–°ç‰ˆæœ¬çš„Code::Blockséƒ½ä¸æ”¯æŒè¿™ç§åŠŸèƒ½ã€‚å¸Œæœ›åœ¨æœªæ¥çš„æŸä¸ªæ—¶å€™ï¼Œå®ƒä¼šæ…¢æ…¢æ¸—é€åˆ°è¿™äº›äº§å“ä¸­ï¼Œå¹¶è¢«æ›´å¹¿æ³›çš„ä½¿ç”¨ã€‚ä½¿ç”¨é›†æˆè°ƒè¯•å™¨: è¿è¡Œå’Œæ–­ç‚¹è¿è¡Œåˆ°å…‰æ ‡å¤„ç¬¬ä¸€ä¸ªæœ‰ç”¨çš„å‘½ä»¤é€šå¸¸ç§°ä¸ºRun to cursorï¼ˆè¿è¡Œåˆ°å…‰æ ‡å¤„ï¼‰ã€‚è¿™ä¸ªRun to cursorå‘½ä»¤æ‰§è¡Œç¨‹åºï¼Œç›´åˆ°æ‰§è¡Œåˆ°å…‰æ ‡æ‰€é€‰æ‹©çš„è¯­å¥ä¸ºæ­¢ã€‚ç„¶åï¼Œå®ƒå°†æ§åˆ¶æƒè¿”å›ç»™æ‚¨ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ä»è¯¥ç‚¹å¼€å§‹è°ƒè¯•ã€‚è¿™æ˜¯ä¸€ç§é«˜æ•ˆçš„æ–¹å¼ï¼Œå¯ä»¥åœ¨ä»£ç ä¸­çš„ç‰¹å®šç‚¹å¼€å§‹è°ƒè¯•ï¼Œæˆ–è€…å¦‚æœå·²ç»åœ¨è°ƒè¯•ï¼Œåˆ™å¯ä»¥ç›´æ¥ç§»åŠ¨åˆ°éœ€è¦è¿›ä¸€æ­¥æ£€æŸ¥çš„ä½ç½®ã€‚For Visual Studio usersåœ¨Visual Studioä¸­ï¼Œå³å‡»ä»£ç ä¸­çš„è¯­å¥å¹¶ä»ä¸Šä¸‹æ–‡èœå•ä¸­é€‰æ‹©run to cursorï¼Œæˆ–è€…æŒ‰ä¸‹ctrl-F10ç»„åˆé”®ï¼Œå°±å¯ä»¥è®¿é—®run to cursorå‘½ä»¤ã€‚Continueåœ¨è°ƒè¯•ä¼šè¯è¿›è¡Œåˆ°ä¸€åŠæ—¶ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä»é‚£æ—¶å¼€å§‹è¿è¡Œç¨‹åºã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨continueå‘½ä»¤ã€‚continue è°ƒè¯•å‘½ä»¤åªæ˜¯ç»§ç»­æŒ‰æ­£å¸¸æ–¹å¼è¿è¡Œç¨‹åºï¼Œç›´åˆ°ç¨‹åºç»ˆæ­¢ï¼Œæˆ–è€…ç›´åˆ°æœ‰ä¸œè¥¿è§¦å‘æ§ä»¶å†æ¬¡è¿”å›ç»™æ‚¨(ä¾‹å¦‚æ–­ç‚¹ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬è¯¾åé¢ä»‹ç»)ã€‚For Visual Studio usersåœ¨Visual Studioä¸­ï¼Œå¯ä»¥é€šè¿‡Debug menu&gt; continue æˆ– æŒ‰F5å¿«æ·é”®åœ¨è°ƒè¯•ç¨‹åºæ—¶è®¿é—®continueå‘½ä»¤ã€‚Startcontinueå‘½ä»¤æœ‰ä¸€ä¸ªåä¸ºstartçš„å­ªç”Ÿå…„å¼Ÿã€‚startå‘½ä»¤æ‰§è¡Œä¸continueç›¸åŒçš„æ“ä½œï¼Œåªæ˜¯ä»ç¨‹åºçš„å¼€å¤´å¼€å§‹ã€‚å®ƒåªèƒ½åœ¨ä¸åœ¨è°ƒè¯•ä¼šè¯ä¸­è°ƒç”¨ã€‚åœ¨Visual Studioä¸­ï¼Œå¯ä»¥åœ¨ä¸è°ƒè¯•ç¨‹åºçš„æƒ…å†µä¸‹é€šè¿‡ Debug menu &gt; start debugging æˆ–æŒ‰ä¸‹F5å¿«æ·é”®æ¥è®¿é—®startå‘½ä»¤ã€‚æ–­ç‚¹æœ¬èŠ‚è¦è®¨è®ºçš„æœ€åä¸€ä¸ªä¸»é¢˜æ˜¯æ–­ç‚¹ã€‚æ–­ç‚¹æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‡è®°ï¼Œå®ƒå‘Šè¯‰è°ƒè¯•å™¨åœ¨è°ƒè¯•æ¨¡å¼ä¸‹è¿è¡Œæ—¶ï¼Œåœ¨æ–­ç‚¹å¤„åœæ­¢ç¨‹åºçš„æ‰§è¡Œã€‚For Visual Studio usersåœ¨Visual Studioä¸­,å¯ä»¥é€šè¿‡è®¾ç½®æˆ–åˆ é™¤æ–­ç‚¹ Debug menu &gt; Toggle Breakpoint, æˆ–å³é”®å•å‡»ä¸€ä¸ªè¯­å¥, ä»ä¸Šä¸‹æ–‡èœå•ä¸­é€‰æ‹©Toggle breakpointæˆ–æŒ‰ F9å¿«æ·é”®,æˆ–é€šè¿‡ç‚¹å‡»å·¦è¾¹çš„è¡Œå·(æµ…ç°è‰²åŒºåŸŸ)ã€‚è®¾ç½®ä¸‹ä¸€æ¡è¯­å¥è¿˜æœ‰ä¸€ä¸ªè°ƒè¯•å‘½ä»¤ä½¿ç”¨å¾—éå¸¸ä¸å¸¸è§ï¼Œä½†è‡³å°‘å€¼å¾—äº†è§£ï¼Œå³ä½¿æ‚¨ä¸ç»å¸¸ä½¿ç”¨å®ƒã€‚è®¾ç½®ä¸‹ä¸€æ¡è¯­å¥ å‘½ä»¤å…è®¸æˆ‘ä»¬å°†æ‰§è¡Œç‚¹æ›´æ”¹ä¸ºå…¶ä»–ä¸€äº›è¯­å¥(æœ‰æ—¶ä¹Ÿç§°ä¸ºè·³è½¬)ã€‚è¿™å¯ä»¥ç”¨æ¥å‘å‰è·³è½¬æ‰§è¡Œç‚¹ï¼Œè·³è¿‡ä¸€äº›æœ¬æ¥è¦æ‰§è¡Œçš„ä»£ç ï¼Œæˆ–è€…å‘åè·³è½¬ï¼Œè®©å·²ç»æ‰§è¡Œçš„ä»£ç é‡æ–°è¿è¡Œã€‚For Visual Studio usersåœ¨Visual Studioä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡å³é”®å•å‡»ä¸€ä¸ªè¯­å¥å¹¶ä»ä¸Šä¸‹æ–‡èœå•ä¸­é€‰æ‹©Set next statementï¼Œæˆ–è€…æŒ‰ä¸‹Ctrl-Shift-F10å¿«æ·ç»„åˆé”®æ¥è·³è¿‡æ‰§è¡Œç‚¹ã€‚æ­¤é€‰é¡¹ä¸ä¸Šä¸‹æ–‡ç›¸å…³ï¼Œä»…åœ¨å·²ç»è°ƒè¯•ç¨‹åºæ—¶æ‰ä¼šå‡ºç°ã€‚æ³¨æ„ï¼šset next statement å‘½ä»¤å°†æ›´æ”¹æ‰§è¡Œç‚¹ï¼Œä½†ä¸ä¼šæ›´æ”¹ç¨‹åºçŠ¶æ€ã€‚æ‚¨çš„å˜é‡å°†ä¿ç•™å®ƒä»¬åœ¨è·³è½¬ä¹‹å‰çš„ä»»ä½•å€¼ã€‚å› æ­¤ï¼Œä¸å…¶ä»–æƒ…å†µç›¸æ¯”ï¼Œè·³è½¬å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºäº§ç”Ÿä¸åŒçš„å€¼ã€ç»“æœæˆ–è¡Œä¸ºã€‚æ˜æ™ºåœ°ä½¿ç”¨æ­¤åŠŸèƒ½(ç‰¹åˆ«æ˜¯å‘åè·³è½¬)ã€‚ä¸åº”è¯¥ä½¿ç”¨set next statement å°†æ‰§è¡Œç‚¹æ›´æ”¹ä¸ºå…¶ä»–å‡½æ•°ã€‚è¿™å°†å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºï¼Œå¹¶å¯èƒ½å¯¼è‡´å´©æºƒã€‚å°ç»“ç°åœ¨ï¼Œæ‚¨äº†è§£äº†ä½¿ç”¨é›†æˆè°ƒè¯•å™¨ç›‘è§†å’Œæ§åˆ¶ç¨‹åºæ‰§è¡Œæ–¹å¼çš„ä¸»è¦æ–¹æ³•ã€‚è™½ç„¶è¿™äº›å‘½ä»¤å¯¹äºè¯Šæ–­ä»£ç æµé—®é¢˜éå¸¸æœ‰ç”¨(ä¾‹å¦‚ï¼Œç¡®å®šæ˜¯å¦è°ƒç”¨æŸäº›å‡½æ•°)ï¼Œä½†æ˜¯å®ƒä»¬åªæ˜¯é›†æˆè°ƒè¯•å™¨ç»™è¡¨å¸¦æ¥çš„å¥½å¤„çš„ä¸€éƒ¨åˆ†ã€‚åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†å¼€å§‹æ¢ç´¢æ£€æŸ¥ç¨‹åºçŠ¶æ€çš„å…¶ä»–æ–¹æ³•ï¼Œæ‚¨å°†éœ€è¦è¿™äº›å‘½ä»¤ä½œä¸ºå…ˆå†³æ¡ä»¶ã€‚æˆ‘ä»¬èµ°å§!ä½¿ç”¨é›†æˆè°ƒè¯•å™¨: ç›‘è§†å˜é‡ç›‘è§†å˜é‡ç›‘è§†å˜é‡æ˜¯åœ¨ç¨‹åºä»¥è°ƒè¯•æ¨¡å¼æ‰§è¡Œæ—¶æ£€æŸ¥å˜é‡å€¼çš„è¿‡ç¨‹ã€‚å¤§å¤šæ•°è°ƒè¯•å™¨éƒ½æä¾›äº†å‡ ç§æ–¹æ³•æ¥å®ç°è¿™ä¸€ç‚¹ã€‚æ£€æŸ¥ç®€å•å˜é‡(å¦‚x) å€¼çš„æœ€ç®€å•æ–¹æ³•æ˜¯å°†é¼ æ ‡æ‚¬åœåœ¨å˜é‡xä¸Šã€‚ä¸€äº›ç°ä»£è°ƒè¯•å™¨æ”¯æŒè¿™ç§æ£€æŸ¥ç®€å•å˜é‡çš„æ–¹æ³•ï¼Œè¿™æ˜¯æœ€ç›´æ¥çš„æ–¹æ³•ã€‚æ³¨æ„ï¼Œæ‚¨å¯ä»¥å°†é¼ æ ‡æ‚¬åœåœ¨ä»»ä½•å˜é‡xä¸Šï¼Œè€Œä¸ä»…ä»…æ˜¯å½“å‰è¡Œä¸Šçš„å˜é‡xã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å°†é¼ æ ‡æ‚¬åœåœ¨ç¬¬12è¡Œxä¸Šï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ç›¸åŒçš„å€¼:å¦‚æœä½ åœ¨ä½¿ç”¨Visual Studioï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨QuickWatchã€‚ç”¨é¼ æ ‡é«˜äº®æ˜¾ç¤ºå˜é‡åxï¼Œç„¶åä»å³é”®èœå•ä¸­é€‰æ‹©â€œQuickWatchâ€ã€‚è¿™å°†æ‰“å¼€ä¸€ä¸ªåŒ…å«å˜é‡å½“å‰å€¼çš„å­çª—å£:å¦‚æœä½ æ‰“å¼€äº†QuickWatchï¼Œè¯·å…³é—­å®ƒç›‘è§†çª—å£å¦‚æœä½ æƒ³çŸ¥é“ä¸€ä¸ªå˜é‡çš„å€¼åœ¨ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´ç‚¹ ï¼Œä½¿ç”¨é¼ æ ‡æ‚¬åœæˆ–QuickWatchæ–¹æ³•æ£€æŸ¥å˜é‡å¾ˆå¥½ã€‚ä½†æ˜¯ï¼Œå®ƒå¹¶ä¸ç‰¹åˆ«é€‚åˆåœ¨è¿è¡Œä»£ç æ—¶ç›‘è§†å˜é‡æ›´æ”¹çš„å€¼ï¼Œå› ä¸ºæ‚¨å¿…é¡»ä¸æ–­åœ° é‡æ–°æ‚¬åœ/é‡æ–°é€‰æ‹©å˜é‡ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‰€æœ‰ç°ä»£é›†æˆè°ƒè¯•å™¨éƒ½æä¾›äº†å¦ä¸€ä¸ªç‰¹æ€§ï¼Œç§°ä¸ºç›‘è§†çª—å£ã€‚ç›‘è§†çª—å£æ˜¯ä¸€ä¸ªçª—å£ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æ·»åŠ æ‚¨æƒ³è¦æŒç»­æ£€æŸ¥çš„å˜é‡ï¼Œå¹¶ä¸”å½“æ‚¨å•æ­¥æ‰§è¡Œç¨‹åºæ—¶ï¼Œè¿™äº›å˜é‡å°†è¢«æ›´æ–°ã€‚å½“æ‚¨è¿›å…¥è°ƒè¯•æ¨¡å¼æ—¶ï¼Œç›‘è§†çª—å£å¯èƒ½å·²ç»åœ¨æ‚¨çš„å±å¹•ä¸Šäº†ï¼Œä½†æ˜¯å¦‚æœä¸æ˜¯è¿™æ ·ï¼Œæ‚¨å¯ä»¥é€šè¿‡IDEçš„çª—å£å‘½ä»¤(é€šå¸¸åœ¨è§†å›¾æˆ–è°ƒè¯•èœå•ä¸­å¯ä»¥æ‰¾åˆ°è¿™äº›å‘½ä»¤)æ‰“å¼€å®ƒã€‚For Visual Studio usersåœ¨Visual Studioä¸­ï¼ŒDebug menu &gt; Windows &gt; Watch &gt; Watch 1. ä¸­å¯ä»¥æ‰¾åˆ°ç›‘è§†èœå•ã€‚è¯·æ³¨æ„ï¼Œè¦å¯ç”¨æ­¤é€‰é¡¹ï¼Œå¿…é¡»å¤„äºè°ƒè¯•æ¨¡å¼ï¼Œå› æ­¤è¯·å…ˆè¿›å…¥ç¨‹åºã€‚æ­¤çª—å£å‡ºç°çš„ä½ç½®(åœé å·¦ã€å³æˆ–åº•éƒ¨)å¯èƒ½ä¸åŒã€‚æ‚¨å¯ä»¥é€šè¿‡å°†Watch 1é€‰é¡¹å¡æ‹–åŠ¨åˆ°åº”ç”¨ç¨‹åºçª—å£çš„å¦ä¸€ä¾§æ¥æ›´æ”¹å…¶åœé ä½ç½®ã€‚è¶…å‡ºä½œç”¨åŸŸçš„å˜é‡(ä¾‹å¦‚ï¼Œå‡½æ•°ä¸­å·²ç»è¿”å›ç»™è°ƒç”¨è€…çš„å±€éƒ¨å˜é‡)å°†ç•™åœ¨æ‚¨çš„ç›‘è§†çª—å£ä¸­ï¼Œä½†é€šå¸¸è¦ä¹ˆè¢«æ ‡è®°ä¸ºâ€œä¸å¯ç”¨â€ï¼Œè¦ä¹ˆæ˜¾ç¤ºæœ€åä¸€ä¸ªå·²çŸ¥å€¼ï¼Œä½†æ˜¾ç¤ºä¸ºç°è‰²ã€‚å¦‚æœå˜é‡è¿”å›åˆ°ä½œç”¨åŸŸ(ä¾‹å¦‚å†æ¬¡è°ƒç”¨å‡½æ•°)ï¼Œå®ƒçš„å€¼å°†å†æ¬¡æ˜¾ç¤ºã€‚å› æ­¤ï¼Œå³ä½¿å˜é‡ä¸åœ¨ç›‘è§†èŒƒå›´å†…ï¼Œä¹Ÿå¯ä»¥å°†å®ƒä»¬ç•™åœ¨ç›‘è§†çª—å£ä¸­ã€‚ç›‘è§†çª—å£å¯ä»¥è®¡ç®—è¡¨è¾¾å¼ç›‘è§†çª—å£è¿˜å…è®¸è®¡ç®—ç®€å•è¡¨è¾¾å¼ã€‚å±€éƒ¨ç›‘è§†å› ä¸ºåœ¨è°ƒè¯•æ—¶æ£€æŸ¥å‡½æ•°å†…éƒ¨å±€éƒ¨å˜é‡çš„å€¼æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ‰€ä»¥è®¸å¤šè°ƒè¯•å™¨ä¼šæä¾›æŸç§æ–¹å¼æ¥å¿«é€Ÿç›‘è§† ä½œç”¨åŸŸä¸­æ‰€æœ‰å±€éƒ¨å˜é‡çš„å€¼ã€‚For Visual Studio usersåœ¨Visual Studioä¸­ï¼Œå¯ä»¥åœ¨å±€éƒ¨å˜é‡çª—å£ä¸­çœ‹åˆ°æ‰€æœ‰å±€éƒ¨å˜é‡çš„å€¼ï¼Œå¯ä»¥åœ¨Debug menu &gt; Windows &gt; Locals ä¸­æ‰¾åˆ°ã€‚è¯·æ³¨æ„ï¼Œæ‚¨å¿…é¡»å¤„äºè°ƒè¯•ä¼šè¯ä¸­æ‰èƒ½æ¿€æ´»æ­¤çª—å£ã€‚ä½¿ç”¨é›†æˆè°ƒè¯•å™¨: è°ƒç”¨æ ˆç°ä»£è°ƒè¯•å™¨è¿˜åŒ…å«ä¸€ä¸ªè°ƒè¯•ä¿¡æ¯çª—å£ï¼Œå®ƒåœ¨è°ƒè¯•ç¨‹åºæ—¶éå¸¸æœ‰ç”¨ï¼Œå³è°ƒç”¨å †æ ˆçª—å£ã€‚å½“æ‚¨çš„ç¨‹åºè°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæ‚¨å·²ç»çŸ¥é“å®ƒæ ‡è®°äº†å½“å‰ä½ç½®ï¼Œè¿›è¡Œäº†å‡½æ•°è°ƒç”¨ï¼Œç„¶åè¿”å›ã€‚å®ƒæ€ä¹ˆçŸ¥é“å›åˆ°å“ªé‡Œå»? ç­”æ¡ˆæ˜¯å®ƒåœ¨è°ƒç”¨å †æ ˆä¸­ä¿æŒè·Ÿè¸ªã€‚è°ƒç”¨å †æ ˆæ˜¯æ‰€æœ‰å·²è¢«è°ƒç”¨ä»¥åˆ°è¾¾å½“å‰æ‰§è¡Œç‚¹çš„æ´»åŠ¨å‡½æ•°çš„åˆ—è¡¨ã€‚è°ƒç”¨å †æ ˆåŒ…æ‹¬æ¯ä¸ªè¢«è°ƒç”¨å‡½æ•°çš„æ¡ç›®ï¼Œä»¥åŠå‡½æ•°è¿”å›æ—¶å°†è¿”å›åˆ°å“ªä¸€è¡Œä»£ç ã€‚æ¯å½“è°ƒç”¨ä¸€ä¸ªæ–°å‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°éƒ½ä¼šè¢«æ·»åŠ åˆ°è°ƒç”¨å †æ ˆçš„é¡¶éƒ¨ã€‚å½“ å½“å‰å‡½æ•°è¿”å›ç»™è°ƒç”¨æ–¹æ—¶ï¼Œå®ƒå°†ä»è°ƒç”¨å †æ ˆçš„é¡¶éƒ¨ç§»é™¤ï¼Œè€Œæ§åˆ¶å°†è¿”å›ç»™å®ƒä¸‹é¢çš„å‡½æ•°ã€‚â€œè°ƒç”¨å †æ ˆâ€çª—å£æ˜¯ä¸€ä¸ªæ˜¾ç¤ºå½“å‰è°ƒç”¨å †æ ˆçš„è°ƒè¯•å™¨çª—å£ã€‚å¦‚æœæ²¡æœ‰çœ‹åˆ°â€œè°ƒç”¨å †æ ˆâ€çª—å£ï¼Œåˆ™éœ€è¦å‘Šè¯‰IDEæ˜¾ç¤ºå®ƒã€‚For Visual Studio usersåœ¨Visual Studioä¸­ï¼Œå¯ä»¥é€šè¿‡ Debug menu &gt; Windows &gt; Call Stackã€‚è¯·æ³¨æ„ï¼Œæ‚¨å¿…é¡»å¤„äºè°ƒè¯•ä¼šè¯ä¸­æ‰èƒ½æ¿€æ´»æ­¤çª—å£ã€‚ç¥è´ºæ‚¨ï¼Œç°åœ¨æ‚¨å·²ç»äº†è§£äº†ä½¿ç”¨é›†æˆè°ƒè¯•å™¨çš„åŸºæœ¬çŸ¥è¯†!é€šè¿‡ä½¿ç”¨å•æ­¥æ‰§è¡Œã€æ–­ç‚¹ã€ç›‘è§†å’Œè°ƒç”¨å †æ ˆçª—å£ï¼Œæ‚¨ç°åœ¨å·²ç»å…·å¤‡äº†è°ƒè¯•å‡ ä¹æ‰€æœ‰é—®é¢˜çš„åŸºç¡€çŸ¥è¯†ã€‚åƒè®¸å¤šäº‹æƒ…ä¸€æ ·ï¼Œè¦æƒ³ç†Ÿç»ƒä½¿ç”¨è°ƒè¯•å™¨ï¼Œéœ€è¦ä¸€äº›å®è·µå’Œåå¤è¯•éªŒã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å†æ¬¡é‡ç”³ï¼ŒèŠ±åœ¨å­¦ä¹ å¦‚ä½•æœ‰æ•ˆä½¿ç”¨é›†æˆè°ƒè¯•å™¨ä¸Šçš„æ—¶é—´å°†æ¯”èŠ±åœ¨è°ƒè¯•ç¨‹åºä¸Šçš„æ—¶é—´èŠ‚çœè®¸å¤šå€!åœ¨é—®é¢˜å˜æˆé—®é¢˜ä¹‹å‰æ‰¾åˆ°é—®é¢˜å½“æ‚¨çŠ¯è¯­ä¹‰é”™è¯¯æ—¶ï¼Œå½“æ‚¨è¿è¡Œç¨‹åºæ—¶ï¼Œè¿™ä¸ªé”™è¯¯å¯èƒ½ä¸ä¼šç«‹å³è¢«å‘ç°ã€‚ä¸€ä¸ªé—®é¢˜å¯èƒ½æ½œä¼åœ¨ä½ çš„ä»£ç ä¸­å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½æ²¡æœ‰è¢«å‘ç°ï¼Œç›´åˆ°æ–°å¼•å…¥çš„ä»£ç æˆ–æ”¹å˜çš„ç¯å¢ƒå¯¼è‡´å®ƒä½œä¸ºç¨‹åºæ•…éšœå‡ºç°ã€‚åœ¨æ‰¾åˆ°é”™è¯¯ä¹‹å‰ï¼Œé”™è¯¯åœ¨ä»£ç åº“ä¸­åœç•™çš„æ—¶é—´è¶Šé•¿ï¼Œå°±è¶Šæœ‰å¯èƒ½éš¾ä»¥æ‰¾åˆ°å®ƒï¼Œæœ¬æ¥å¾ˆå®¹æ˜“ä¿®å¤çš„é”™è¯¯ä¼šå˜æˆä¸€åœºè€—è´¹æ—¶é—´å’Œç²¾åŠ›çš„è°ƒè¯•å†’é™©ã€‚æˆ‘ä»¬èƒ½åšäº›ä»€ä¹ˆå‘¢?ä¸è¦çŠ¯é”™è¯¯æœ€å¥½çš„åŠæ³•æ˜¯ä¸€å¼€å§‹å°±ä¸è¦çŠ¯é”™è¯¯ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¸å®Œæ•´çš„æ¸…å•ï¼Œå¯ä»¥å¸®åŠ©é¿å…çŠ¯é”™è¯¯:éµå¾ªæœ€ä½³å®è·µç´¯äº†å°±åˆ«ç¼–ç¨‹äº†è§£ä¸€é—¨è¯­è¨€ä¸­å¸¸è§çš„é™·é˜±(æˆ‘ä»¬è­¦å‘Šè¿‡ä½ ä¸è¦åšçš„æ‰€æœ‰äº‹æƒ…)ä¿æŒç¨‹åºç®€å•ä¸è¦è®©å‡½æ•°å¤ªé•¿å°½å¯èƒ½ä½¿ç”¨æ ‡å‡†åº“è€Œä¸æ˜¯ç¼–å†™è‡ªå·±çš„ä»£ç ã€‚ä½¿ç”¨æ³¨é‡Šé‡æ„åŠŸèƒ½å½“æ‚¨å‘ç¨‹åºæ·»åŠ æ–°åŠŸèƒ½(â€œè¡Œä¸ºæ›´æ”¹â€)æ—¶ï¼Œæ‚¨ä¼šå‘ç°ä¸€äº›å‡½æ•°çš„é•¿åº¦åœ¨å¢åŠ ã€‚éšç€å‡½æ•°å˜é•¿ï¼Œå®ƒä»¬å˜å¾—æ›´åŠ å¤æ‚å’Œéš¾ä»¥ç†è§£ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯å°†ä¸€ä¸ªé•¿å‡½æ•°åˆ†è§£æˆå¤šä¸ªçŸ­å‡½æ•°ã€‚åœ¨ä¸æ”¹å˜ä»£ç è¡Œä¸º(é€šå¸¸æ˜¯ä¸ºäº†ä½¿å…¶æ›´æ˜“äºç»´æŠ¤)çš„æƒ…å†µä¸‹å¯¹ä»£ç è¿›è¡Œç»“æ„æ›´æ”¹çš„è¿‡ç¨‹ç§°ä¸ºé‡æ„ã€‚é‚£ä¹ˆå¯¹äºä¸€ä¸ªå‡½æ•°ï¼Œå¤šé•¿æ‰ç®—é•¿å‘¢?ä¸€ä¸ªå æ®ä¸€ä¸ªå‚ç›´å±å¹•çš„å‡½æ•°é€šå¸¸è¢«è®¤ä¸ºå¤ªé•¿â€”â€”å¦‚æœå¿…é¡»æ»šåŠ¨æ‰èƒ½é˜…è¯»æ•´ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå‡½æ•°çš„å¯ç†è§£æ€§å°±ä¼šæ˜¾è‘—ä¸‹é™ã€‚ä½†æ˜¯è¶ŠçŸ­è¶Šå¥½â€”â€”å‡½æ•°å°äº10è¡Œå°±å¾ˆå¥½ã€‚å°äº5è¡Œçš„å‡½æ•°ç”šè‡³æ›´å¥½ã€‚ä»‹ç»é˜²å¾¡æ€§ç¼–ç¨‹é”™è¯¯ä¸ä»…å¯èƒ½æ˜¯æ‚¨è‡ªå·±é€ æˆçš„(ä¾‹å¦‚ï¼Œä¸æ­£ç¡®çš„é€»è¾‘)ï¼Œè¿˜å¯èƒ½å‘ç”Ÿåœ¨æ‚¨çš„ç”¨æˆ·ä»¥æ‚¨æ²¡æœ‰é¢„æ–™åˆ°çš„æ–¹å¼ä½¿ç”¨åº”ç”¨ç¨‹åºæ—¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨è¦æ±‚ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œè€Œç”¨æˆ·è¾“å…¥çš„å´æ˜¯å­—æ¯ï¼Œé‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨çš„ç¨‹åºæ˜¯å¦‚ä½•è¿è¡Œçš„å‘¢?é™¤éæ‚¨é¢„æ–™åˆ°äº†è¿™ä¸€ç‚¹ï¼Œå¹¶ä¸ºæœ¬ä¾‹æ·»åŠ äº†ä¸€äº›é”™è¯¯å¤„ç†ï¼Œå¦åˆ™æƒ…å†µå¯èƒ½ä¸å¤ªå¥½ã€‚é˜²å¾¡æ€§ç¼–ç¨‹æ˜¯ä¸€ç§å®è·µï¼Œç¨‹åºå‘˜è¯•å›¾é¢„æµ‹è½¯ä»¶å¯èƒ½è¢«æœ€ç»ˆç”¨æˆ·æˆ–ä½¿ç”¨ä»£ç çš„å…¶ä»–å¼€å‘äººå‘˜(åŒ…æ‹¬ç¨‹åºå‘˜è‡ªå·±)æ»¥ç”¨çš„æ‰€æœ‰æ–¹å¼ã€‚è¿™äº›è¯¯ç”¨é€šå¸¸å¯ä»¥è¢«å‘ç°ï¼Œç„¶åå‡è½»(ä¾‹å¦‚ï¼Œè¦æ±‚è¾“å…¥é”™è¯¯è¾“å…¥çš„ç”¨æˆ·é‡è¯•)ã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„è¯¾ç¨‹ä¸­æ¢ç´¢ä¸é”™è¯¯å¤„ç†ç›¸å…³çš„ä¸»é¢˜ã€‚å¿«é€Ÿæ‰¾åˆ°é”™è¯¯ç”±äºåœ¨å¤§å‹ç¨‹åºä¸­ä¸å‡ºé”™æ˜¯å¾ˆå›°éš¾çš„ï¼Œæ‰€ä»¥ä¸‹ä¸€ä¸ªæœ€å¥½çš„æ–¹æ³•å°±æ˜¯å¿«é€Ÿæ•è·æ‚¨ç¡®å®çŠ¯çš„é”™è¯¯ã€‚æœ€å¥½çš„æ–¹æ³•æ˜¯æ¯æ¬¡ç¼–å†™ä¸€ç‚¹ç¨‹åºï¼Œç„¶åæµ‹è¯•ä»£ç å¹¶ç¡®ä¿å®ƒèƒ½æ­£å¸¸å·¥ä½œã€‚ç„¶è€Œï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æŠ€æœ¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚æµ‹è¯•åŠŸèƒ½ä»‹ç»å¸®åŠ©å‘ç°ç¨‹åºé—®é¢˜çš„ä¸€ç§å¸¸è§æ–¹æ³•æ˜¯ç¼–å†™æµ‹è¯•å‡½æ•°æ¥â€œç»ƒä¹ â€æ‰€ç¼–å†™çš„ä»£ç ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªåŸå§‹çš„å°è¯•ï¼Œæ›´å¤šçš„æ˜¯ä¸ºäº†è¯´æ˜çš„ç›®çš„æ¯”ä»»ä½•ä¸œè¥¿:12345678910111213141516171819202122#include &lt;iostream&gt; int add(int x, int y)&#123; return x + y;&#125; void testadd()&#123; std::cout &lt;&lt; \"This function should print: 2 0 0 -2\\n\"; std::cout &lt;&lt; add(1, 1) &lt;&lt; \" \"; std::cout &lt;&lt; add(-1, 1) &lt;&lt; \" \"; std::cout &lt;&lt; add(1, -1) &lt;&lt; \" \"; std::cout &lt;&lt; add(-1, -1) &lt;&lt; \" \";&#125; int main()&#123; testadd(); return 0;&#125;testadd()å‡½æ•°é€šè¿‡ä½¿ç”¨ä¸åŒçš„å€¼è°ƒç”¨add()å‡½æ•°æ¥æµ‹è¯•å®ƒã€‚å¦‚æœæ‰€æœ‰çš„å€¼éƒ½ç¬¦åˆæˆ‘ä»¬çš„æœŸæœ›ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆç†åœ°ç¡®ä¿¡å‡½æ•°æ˜¯æœ‰æ•ˆçš„ã€‚æ›´å¥½çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¿ç•™è¿™ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨æ¯æ¬¡æ›´æ”¹å‡½æ•°addæ—¶è¿è¡Œå®ƒï¼Œä»¥ç¡®ä¿æˆ‘ä»¬æ²¡æœ‰æ„å¤–åœ°ç ´åå®ƒã€‚è¿™æ˜¯å•å…ƒæµ‹è¯•çš„åŸºæœ¬å½¢å¼ï¼Œå•å…ƒæµ‹è¯•æ˜¯ä¸€ç§è½¯ä»¶æµ‹è¯•æ–¹æ³•ï¼Œé€šè¿‡æµ‹è¯•å°å•å…ƒçš„æºä»£ç æ¥ç¡®å®šå®ƒä»¬æ˜¯å¦æ­£ç¡®ã€‚ä¸æ—¥å¿—è®°å½•æ¡†æ¶ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨è®¸å¤šç¬¬ä¸‰æ–¹å•å…ƒæµ‹è¯•æ¡†æ¶ã€‚ä¹Ÿå¯ä»¥è‡ªå·±ç¼–å†™ï¼Œä¸è¿‡æˆ‘ä»¬éœ€è¦æ›´å¤šçš„è¯­è¨€ç‰¹æ€§æ¥å¤„ç†ä¸»é¢˜ã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„è¯¾ç¨‹ä¸­å¯¹æ­¤è¿›è¡Œè®¨è®ºã€‚çº¦æŸæ¡ä»¶ä»‹ç»åŸºäºçº¦æŸçš„æŠ€æœ¯åŒ…æ‹¬æ·»åŠ ä¸€äº›é¢å¤–çš„ä»£ç (å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨éè°ƒè¯•ç‰ˆæœ¬ä¸­ç¼–è¯‘)ï¼Œä»¥æ£€æŸ¥æ˜¯å¦è¿åäº†ä¸€äº›å‡è®¾æˆ–æœŸæœ›ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ä¸€ä¸ªæ•°å­—çš„é˜¶ä¹˜ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦ä¸€ä¸ªéè´Ÿå‚æ•°ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°å¯ä»¥è¿›è¡Œæ£€æŸ¥ï¼Œä»¥ç¡®ä¿è°ƒç”¨è€…åœ¨ç»§ç»­ä¹‹å‰ä¼ å…¥äº†ä¸€ä¸ªéè´Ÿçš„æ•°å­—ã€‚å¦‚æœè°ƒç”¨æ–¹ä¼ å…¥ä¸€ä¸ªè´Ÿæ•°ï¼Œé‚£ä¹ˆå‡½æ•°å¯èƒ½ä¼šç«‹å³å‡ºé”™ï¼Œè€Œä¸æ˜¯ç”Ÿæˆä¸€äº›ä¸ç¡®å®šçš„ç»“æœï¼Œä»è€Œå¸®åŠ©ç¡®ä¿ç«‹å³æ•è·é—®é¢˜ã€‚ä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯é€šè¿‡assertå’Œstatic_assertï¼Œæˆ‘ä»¬åœ¨7.12a â€“ Assert and static_assert.ä¸­ä»‹ç»äº†è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚","categories":[],"tags":[]},{"title":"C&C++/é™æ€ä¸åŠ¨æ€é“¾æ¥åº“","slug":"C&C++/é™æ€ä¸åŠ¨æ€é“¾æ¥åº“","date":"2020-05-31T06:49:00.247Z","updated":"2020-06-01T01:09:23.341Z","comments":true,"path":"archives/d30baea4.html","link":"","permalink":"https://longlongqin.github.io/archives/d30baea4.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/a1-static-and-dynamic-libraries/åº“(library)æ˜¯ä¸€ä¸ªä»£ç åŒ…ï¼Œå¯ä»¥è¢«è®¸å¤šç¨‹åºé‡ç”¨ã€‚é€šå¸¸ï¼Œä¸€ä¸ªc++åº“åˆ†ä¸ºä¸¤éƒ¨åˆ†:ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œå®šä¹‰åº“å‘ä½¿ç”¨å®ƒçš„ç¨‹åºå…¬å¼€(æä¾›)çš„åŠŸèƒ½ã€‚é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒåŒ…å«é¢„ç¼–è¯‘æˆæœºå™¨è¯­è¨€çš„åŠŸèƒ½çš„å®ç°ã€‚ä¸€äº›åº“å¯èƒ½è¢«åˆ†æˆå¤šä¸ªæ–‡ä»¶å’Œ/æˆ–å…·æœ‰å¤šä¸ªå¤´æ–‡ä»¶ã€‚é¢„ç¼–è¯‘åº“æœ‰å‡ ä¸ªåŸå› ï¼šé¦–å…ˆï¼Œç”±äºåº“å¾ˆå°‘æ›´æ”¹ï¼Œå®ƒä»¬ä¸éœ€è¦ç»å¸¸é‡æ–°ç¼–è¯‘ã€‚æ¯æ¬¡ç¼–å†™ä½¿ç”¨å®ƒä»¬çš„ç¨‹åºæ—¶éƒ½é‡æ–°ç¼–è¯‘åº“æ˜¯æµªè´¹æ—¶é—´ã€‚å…¶æ¬¡ï¼Œå› ä¸ºé¢„ç¼–è¯‘å¯¹è±¡æ˜¯æœºå™¨è¯­è¨€çš„ï¼Œæ‰€ä»¥å®ƒé˜»æ­¢äººä»¬è®¿é—®æˆ–æ›´æ”¹æºä»£ç ï¼Œè¿™å¯¹äºä¼ä¸šæˆ–ä¸å¸Œæœ›å‡ºäºçŸ¥è¯†äº§æƒåŸå› è€Œæä¾›æºä»£ç çš„äººæ¥è¯´éå¸¸é‡è¦ã€‚æœ‰ä¸¤ç§ç±»å‹çš„åº“:é™æ€åº“åŠ¨æ€åº“é™æ€åº“é™æ€åº“(ä¹Ÿç§°ä¸ºå½’æ¡£åº“(archive))ç”±ä¸€äº›ä¾‹ç¨‹(routines)ç»„æˆï¼Œè¿™äº›ä¾‹ç¨‹è¢«ç¼–è¯‘å¹¶ç›´æ¥é“¾æ¥åˆ°ç¨‹åºä¸­ã€‚å½“æ‚¨ç¼–è¯‘ä¸€ä¸ªä½¿ç”¨é™æ€åº“çš„ç¨‹åºæ—¶ï¼Œç¨‹åºæ‰€ä½¿ç”¨çš„é™æ€åº“çš„æ‰€æœ‰åŠŸèƒ½éƒ½å°†æˆä¸ºå¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ã€‚åœ¨Windowsä¸­ï¼Œé™æ€åº“é€šå¸¸æœ‰ä¸€ä¸ª.libæ‰©å±•åï¼›è€Œåœ¨linuxä¸Šï¼Œé™æ€åº“é€šå¸¸æœ‰ä¸€ä¸ª.a(å­˜æ¡£)æ‰©å±•åã€‚é™æ€åº“çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œæ‚¨åªéœ€è¦åˆ†å‘å¯æ‰§è¡Œæ–‡ä»¶å°±å¯ä»¥è®©ç”¨æˆ·è¿è¡Œæ‚¨çš„ç¨‹åºã€‚å› ä¸ºé™æ€åº“æˆä¸ºç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œè¿™å°±ç¡®ä¿äº†ç¨‹åºæ€»æ˜¯ä½¿ç”¨æ­£ç¡®ç‰ˆæœ¬çš„åº“ï¼›æ­¤å¤–ï¼Œå› ä¸ºé™æ€åº“æˆä¸ºç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å¯ä»¥åƒä½¿ç”¨ä¸ºè‡ªå·±çš„ç¨‹åºç¼–å†™çš„åŠŸèƒ½ä¸€æ ·ä½¿ç”¨å®ƒä»¬ã€‚ä¸åˆ©çš„ä¸€é¢æ˜¯ï¼Œç”±äºåº“çš„å‰¯æœ¬æˆä¸ºä½¿ç”¨å®ƒçš„æ¯ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè¿™ä¼šå¯¼è‡´å¤§é‡çš„ç©ºé—´æµªè´¹ã€‚é™æ€åº“ä¹Ÿä¸èƒ½è½»æ¾å‡çº§â€”â€”è¦æ›´æ–°åº“ï¼Œéœ€è¦æ›¿æ¢æ•´ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚åŠ¨æ€åº“åŠ¨æ€åº“(ä¹Ÿç§°ä¸ºå…±äº«åº“)ç”±åœ¨è¿è¡Œæ—¶åŠ è½½åˆ°åº”ç”¨ç¨‹åºä¸­çš„ä¾‹ç¨‹ç»„æˆã€‚å½“æ‚¨ç¼–è¯‘ä½¿ç”¨åŠ¨æ€åº“çš„ç¨‹åºæ—¶ï¼Œè¯¥åº“ä¸ä¼šæˆä¸ºå¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€éƒ¨åˆ†â€”â€”å®ƒä»ç„¶æ˜¯ä¸€ä¸ªå•ç‹¬çš„å•å…ƒã€‚åœ¨Windowsä¸Šï¼ŒåŠ¨æ€åº“é€šå¸¸æœ‰ä¸€ä¸ª.dll(åŠ¨æ€é“¾æ¥åº“)æ‰©å±•åï¼›è€Œåœ¨Linuxä¸Šï¼ŒåŠ¨æ€åº“é€šå¸¸æœ‰ä¸€ä¸ª.so(å…±äº«å¯¹è±¡)æ‰©å±•åã€‚åŠ¨æ€åº“çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯è®¸å¤šç¨‹åºå¯ä»¥å…±äº«ä¸€ä¸ªå‰¯æœ¬ï¼Œè¿™èŠ‚çœäº†ç©ºé—´ã€‚ä¹Ÿè®¸ä¸€ä¸ªæ›´å¤§çš„ä¼˜ç‚¹æ˜¯ï¼šåŠ¨æ€åº“å¯ä»¥å‡çº§åˆ°ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œè€Œä¸éœ€è¦æ›¿æ¢ä½¿ç”¨å®ƒçš„æ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶ã€‚ç¼ºç‚¹ï¼šå› ä¸ºåŠ¨æ€åº“æ²¡æœ‰é“¾æ¥åˆ°ç¨‹åºä¸­ï¼Œæ‰€ä»¥ä½¿ç”¨åŠ¨æ€åº“çš„ç¨‹åºå¿…é¡»æ˜¾å¼åœ°åŠ è½½åŠ¨æ€åº“å¹¶ä¸ä¹‹äº¤äº’ã€‚è¿™ç§æœºåˆ¶å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°å›°æƒ‘ï¼Œå¹¶ä½¿ä¸åŠ¨æ€åº“çš„äº¤äº’å˜å¾—éå¸¸æ£˜æ‰‹ã€‚ä¸ºäº†ä½¿åŠ¨æ€åº“æ›´æ˜“äºä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨å¯¼å…¥åº“( import library )ã€‚å¯¼å…¥åº“æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŠ è½½å’Œä½¿ç”¨åŠ¨æ€åº“è¿‡ç¨‹çš„åº“ã€‚åœ¨Windowsä¸Šï¼Œè¿™é€šå¸¸æ˜¯é€šè¿‡ä¸€ä¸ªä¸åŠ¨æ€åº“(.dll)åŒå çš„ å°å‹é™æ€åº“(.lib) æ¥å®Œæˆçš„ã€‚é™æ€åº“åœ¨ç¼–è¯‘æ—¶é“¾æ¥åˆ°ç¨‹åºä¸­ï¼Œç„¶ååŠ¨æ€åº“çš„åŠŸèƒ½ å°±å¯ä»¥ åƒé™æ€åº“ä¸€æ · æœ‰æ•ˆåœ°ä½¿ç”¨ã€‚åœ¨Linuxä¸Šï¼Œå…±äº«å¯¹è±¡(.so)æ–‡ä»¶åŒæ—¶å……å½“ åŠ¨æ€åº“ å’Œ å¯¼å…¥åº“ ã€‚å¤§å¤šæ•°é“¾æ¥å™¨ å¯ä»¥åœ¨åˆ›å»ºåŠ¨æ€åº“æ—¶ ä¸º åŠ¨æ€åº“æ„å»ºå¯¼å…¥åº“ã€‚å®‰è£…å’Œä½¿ç”¨åº“ç°åœ¨æ‚¨å·²ç»äº†è§£äº†ä¸åŒç§ç±»çš„åº“ï¼Œè®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹å¦‚ä½•åœ¨ç¨‹åºä¸­å®é™…ä½¿ç”¨åº“ã€‚åœ¨c++ä¸­å®‰è£…ä¸€ä¸ªåº“é€šå¸¸éœ€è¦4ä¸ªæ­¥éª¤:è·å–åº“ã€‚æœ€å¥½çš„é€‰æ‹©æ˜¯ä¸ºæ‚¨çš„æ“ä½œç³»ç»Ÿä¸‹è½½ä¸€ä¸ªé¢„ç¼–è¯‘åŒ…(å¦‚æœå­˜åœ¨çš„è¯)ï¼Œè¿™æ ·æ‚¨å°±ä¸å¿…è‡ªå·±ç¼–è¯‘åº“äº†ã€‚å¦‚æœæ‚¨çš„æ“ä½œç³»ç»Ÿæ²¡æœ‰æä¾›è¿™æ ·çš„åŒ…ï¼Œé‚£ä¹ˆæ‚¨å¿…é¡»ä¸‹è½½ä¸€ä¸ªåªåŒ…å«æºä»£ç çš„åŒ…å¹¶è‡ªå·±ç¼–è¯‘å®ƒ(è¿™è¶…å‡ºäº†æœ¬è¯¾çš„èŒƒå›´)ã€‚åœ¨Windowsä¸Šï¼Œåº“é€šå¸¸ä»¥.zipæ–‡ä»¶çš„å½¢å¼å‘å¸ƒã€‚åœ¨Linuxä¸Šï¼Œåº“é€šå¸¸ä»¥åŒ…çš„å½¢å¼å‘å¸ƒ(ä¾‹å¦‚. rpm)ã€‚æ‚¨çš„åŒ…ç®¡ç†å™¨å¯èƒ½æœ‰ä¸€äº›æ¯”è¾ƒæµè¡Œçš„åº“(ä¾‹å¦‚ SDL)ã€‚å·²ç»åˆ—å‡ºäº†ï¼Œä»¥ä¾¿äºå®‰è£…ï¼Œæ‰€ä»¥å…ˆæ£€æŸ¥ä¸€ä¸‹ã€‚å®‰è£…åº“ã€‚åœ¨Linuxä¸Šï¼Œè¿™é€šå¸¸æ¶‰åŠè°ƒç”¨åŒ…ç®¡ç†å™¨å¹¶è®©å®ƒå®Œæˆæ‰€æœ‰å·¥ä½œã€‚åœ¨Windowsä¸Šï¼Œè¿™é€šå¸¸æ¶‰åŠåˆ°å°†åº“è§£å‹ç¼©åˆ°æ‚¨é€‰æ‹©çš„ç›®å½•ã€‚æˆ‘ä»¬å»ºè®®å°†æ‰€æœ‰åº“ä¿å­˜åœ¨ä¸€ä¸ªä½ç½®ï¼Œä»¥ä¾¿äºè®¿é—®ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ä¸€ä¸ªåä¸ºC:\\Libsçš„ç›®å½•ï¼Œå¹¶å°†æ¯ä¸ªåº“æ”¾åœ¨å®ƒè‡ªå·±çš„å­ç›®å½•ä¸­ã€‚ç¡®ä¿ç¼–è¯‘å™¨çŸ¥é“åœ¨å“ªé‡ŒæŸ¥æ‰¾åº“çš„å¤´æ–‡ä»¶ã€‚åœ¨Windowsä¸Šï¼Œé€šå¸¸è¿™æ˜¯å®‰è£…åº“æ–‡ä»¶åˆ°çš„ç›®å½•çš„includeå­ç›®å½•(ä¾‹å¦‚ã€‚å¦‚æœæ‚¨å°†æ‚¨çš„åº“å®‰è£…åˆ°C:\\libs\\SDL-1.2.11ï¼Œå¤´æ–‡ä»¶å¯èƒ½åœ¨C:\\libs\\SDL-1.2.11\\includeä¸­)ã€‚åœ¨Linuxä¸Šï¼Œå¤´æ–‡ä»¶é€šå¸¸å®‰è£…åœ¨/usr/includeä¸­ï¼Œå®ƒåº”è¯¥å·²ç»æ˜¯åŒ…å«æ–‡ä»¶æœç´¢è·¯å¾„çš„ä¸€éƒ¨åˆ†ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ–‡ä»¶å®‰è£…åœ¨å…¶ä»–åœ°æ–¹ï¼Œåˆ™å¿…é¡»å‘Šè¯‰ç¼–è¯‘å™¨åœ¨å“ªé‡Œæ‰¾åˆ°å®ƒä»¬ã€‚å‘Šè¯‰é“¾æ¥å™¨åœ¨å“ªé‡ŒæŸ¥æ‰¾åº“æ–‡ä»¶ã€‚ä¸æ­¥éª¤3ä¸€æ ·ï¼Œè¿™é€šå¸¸æ¶‰åŠå°†ç›®å½•æ·»åŠ åˆ°é“¾æ¥å™¨æŸ¥æ‰¾åº“çš„ä½ç½®åˆ—è¡¨ä¸­ã€‚åœ¨Windowsä¸Šï¼Œè¿™é€šå¸¸æ˜¯å®‰è£…åº“æ–‡ä»¶çš„ç›®å½•çš„/libå­ç›®å½•ã€‚åœ¨Linuxä¸Šï¼Œåº“é€šå¸¸å®‰è£…åœ¨/usr/libä¸Šï¼Œå®ƒåº”è¯¥å·²ç»æ˜¯åº“æœç´¢è·¯å¾„çš„ä¸€éƒ¨åˆ†ã€‚ä¸€æ—¦åº“è¢«å®‰è£…ï¼ŒIDEçŸ¥é“åˆ°å“ªé‡Œå»æ‰¾å®ƒï¼Œé€šå¸¸éœ€è¦ä¸ºæ¯ä¸ªæƒ³è¦ä½¿ç”¨åº“çš„é¡¹ç›®æ‰§è¡Œä»¥ä¸‹3ä¸ªæ­¥éª¤:å¦‚æœä½¿ç”¨é™æ€åº“æˆ–å¯¼å…¥åº“ï¼Œè¯·å‘Šè¯‰é“¾æ¥å™¨è¦é“¾æ¥å“ªä¸ªåº“æ–‡ä»¶ã€‚åœ¨ç¨‹åºä¸­#include åº“çš„å¤´æ–‡ä»¶ã€‚è¿™å°†å‘Šè¯‰ç¼–è¯‘å™¨åº“æ‰€æä¾›çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä»¥ä¾¿æ‚¨çš„ç¨‹åºèƒ½å¤Ÿæ­£ç¡®åœ°ç¼–è¯‘ã€‚å¦‚æœä½¿ç”¨åŠ¨æ€åº“ï¼Œè¯·ç¡®ä¿ç¨‹åºçŸ¥é“åœ¨å“ªé‡Œå¯ä»¥æ‰¾åˆ°å®ƒä»¬ã€‚åœ¨Linuxä¸‹ï¼Œåº“é€šå¸¸å®‰è£…åœ¨/usr/libä¸­ï¼Œå®ƒä½äºLD_LIBRARY_PATHç¯å¢ƒå˜é‡ä¸­çš„è·¯å¾„ä¹‹åçš„é»˜è®¤æœç´¢è·¯å¾„ä¸­ã€‚åœ¨Windowsä¸Šï¼Œé»˜è®¤çš„æœç´¢è·¯å¾„åŒ…æ‹¬ï¼šç¨‹åºè¿è¡Œçš„ç›®å½•ã€é€šè¿‡è°ƒç”¨SetDllDirectory()è®¾ç½®çš„ç›®å½•ã€Windowsã€Systemå’ŒSystem32ç›®å½•ä»¥åŠpathç¯å¢ƒå˜é‡ä¸­çš„ç›®å½•ã€‚ä½¿ç”¨.dllçš„æœ€ç®€å•æ–¹æ³•æ˜¯å°†.dllå¤åˆ¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ã€‚ç”±äºæ‚¨é€šå¸¸ä¼šå°†.dllä¸å¯æ‰§è¡Œæ–‡ä»¶ä¸€èµ·å‘å¸ƒï¼Œå› æ­¤æ— è®ºå¦‚ä½•å°†å®ƒä»¬æ”¾åœ¨ä¸€èµ·éƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚æ­¥éª¤3-5æ¶‰åŠåˆ°é…ç½®IDEâ€”â€”å¹¸è¿çš„æ˜¯ï¼Œå‡ ä¹æ‰€æœ‰ideåœ¨æ‰§è¡Œè¿™äº›æ“ä½œæ—¶éƒ½ä»¥ç›¸åŒçš„æ–¹å¼å·¥ä½œã€‚ä¸å¹¸çš„æ˜¯ï¼Œå› ä¸ºæ¯ä¸ªIDEéƒ½æœ‰ä¸åŒçš„æ¥å£ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹ä¸­æœ€å›°éš¾çš„éƒ¨åˆ†å°±æ˜¯æ‰¾åˆ°æ‰§è¡Œè¿™äº›æ­¥éª¤çš„æ­£ç¡®ä½ç½®ã€‚","categories":[],"tags":[]},{"title":"C&C++/æ–‡ä»¶çš„éšæœºIO","slug":"C&C++/æ–‡ä»¶çš„éšæœºIO","date":"2020-05-28T02:23:18.479Z","updated":"2020-05-28T02:52:50.593Z","comments":true,"path":"archives/60adc21f.html","link":"","permalink":"https://longlongqin.github.io/archives/60adc21f.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/187-random-file-io/æ–‡ä»¶æŒ‡é’ˆç±»ä¸­çš„æ¯ä¸ªæ–‡ä»¶æµç±»éƒ½åŒ…å«ä¸€ä¸ªæ–‡ä»¶æŒ‡é’ˆï¼Œç”¨äºè·Ÿè¸ªå½“å‰çš„è¯»/å†™ä½ç½®æ–‡ä»¶ã€‚å½“ä»æ–‡ä»¶ä¸­è¯»å–æˆ–å†™å…¥æ–‡ä»¶æ—¶ï¼Œè¯»å–/å†™å…¥å‘ç”Ÿåœ¨æ–‡ä»¶æŒ‡é’ˆçš„å½“å‰ä½ç½®ã€‚é»˜è®¤æƒ…å†µï¼Œå½“æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œæ–‡ä»¶æŒ‡é’ˆè¢«è®¾ç½®ä¸ºæ–‡ä»¶çš„å¼€å¤´ã€‚ä½†æ˜¯ï¼Œå¦‚æœä»¥è¿½åŠ æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œæ–‡ä»¶æŒ‡é’ˆå°±ä¼šç§»åŠ¨åˆ°æ–‡ä»¶çš„æœ«å°¾ï¼Œè¿™æ ·å†™å…¥æ“ä½œå°±ä¸ä¼šè¦†ç›–æ–‡ä»¶çš„ä»»ä½•å½“å‰å†…å®¹ã€‚ä½¿ç”¨seekg()å’Œseekp()éšæœºè®¿é—®æ–‡ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬è®¿é—®çš„æ–‡ä»¶éƒ½æ˜¯æŒ‰é¡ºåºè®¿é—®çš„ã€‚â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¹‹å‰æ˜¯æŒ‰é¡ºåºè¯»å–æˆ–å†™å…¥æ–‡ä»¶å†…å®¹ã€‚ä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œéšæœºæ–‡ä»¶è®¿é—®ã€‚â€”â€”å³ï¼Œè·³è¿‡æ–‡ä»¶ä¸­çš„å„ä¸ªç‚¹ï¼Œæ¥è¯»å…¶å†…å®¹ã€‚å½“æ‚¨çš„æ–‡ä»¶ä¸­å……æ»¡äº†è®°å½•ï¼Œå¹¶ä¸”æ‚¨å¸Œæœ›æ£€ç´¢ç‰¹å®šçš„è®°å½•æ—¶ï¼Œè¿™å°†éå¸¸æœ‰ç”¨ã€‚éšæœºè®¿é—®æ–‡ä»¶ æ˜¯é€šè¿‡seekg()å‡½æ•°(ç”¨äºinput) å’Œ seekp()å‡½æ•°(ç”¨äºoutput) æ¥æ“ä½œæ–‡ä»¶æŒ‡é’ˆã€‚å…¶ä¸­ï¼šâ€œgâ€è¡¨ç¤ºï¼šget ï¼›â€œpâ€è¡¨ç¤ºï¼šputã€‚å¯¹äºæŸäº›ç±»å‹çš„æµã€seekg()(æ›´æ”¹è¯»ä½ç½®) å’Œ seekp()(æ›´æ”¹å†™ä½ç½®) ç‹¬ç«‹æ“ä½œã€‚ä½†æ˜¯å¯¹äºï¼Œæ–‡ä»¶æµï¼šè¯»å’Œå†™ä½ç½®æ€»æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨seekgå’Œseekpäº’æ¢ã€‚seekg()å’Œseekp()å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ˜¯å†³å®šæ–‡ä»¶æŒ‡é’ˆçš„åç§»é‡ã€‚ç¬¬äºŒä¸ªå‚æ•°ï¼šæ˜¯ä¸€ä¸ªIosæ ‡å¿—ï¼Œå®ƒæŒ‡å®šåç§»é‡å‚æ•°åº”è¯¥ä»å“ªé‡Œåç§»ã€‚Ios seek flagMeaningbegthe offset is relative to the begining of the file(default)curthe offset is relative to the current location of the file pointerendthe offset is relative to the end of the fileæ­£åç§»é‡æ„å‘³ç€å°†æ–‡ä»¶æŒ‡é’ˆç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾ï¼Œè€Œè´Ÿåç§»æ„å‘³ç€å°†æ–‡ä»¶æŒ‡é’ˆç§»åŠ¨æŒ‡å‘æ–‡ä»¶å¼€å¤´ã€‚12345inf.seekg(14, ios::cur); // move forward 14 bytesinf.seekg(-18, ios::cur); // move backwards 18 bytesinf.seekg(22, ios::beg); // move to 22nd byte in fileinf.seekg(24); // move to 24th byte in fileinf.seekg(-28, ios::end); // move to the 28th byte before end of the fileç§»åŠ¨åˆ°æ–‡ä»¶çš„å¼€å¤´æˆ–ç»“å°¾å¾ˆå®¹æ˜“:12inf.seekg(0, ios::beg); // move to beginning of fileinf.seekg(0, ios::end); // move to end of fileä¾‹å­è®©æˆ‘ä»¬ä½¿ç”¨seekg()å’Œæˆ‘ä»¬åœ¨ä¸Šä¸€è¯¾ä¸­åˆ›å»ºçš„è¾“å…¥æ–‡ä»¶æ¥åšä¸€ä¸ªç¤ºä¾‹ã€‚è¿™ä¸ªè¾“å…¥æ–‡ä»¶çœ‹èµ·æ¥åƒè¿™æ ·:1234This is line 1This is line 2This is line 3This is line 4ä¸‹é¢æ˜¯ä»£ç ï¼š123456789101112131415161718192021222324252627int main()&#123; using namespace std; ifstream inf(\"Sample.dat\"); // If we couldn't open the input file stream for reading if (!inf) &#123; // Print an error and exit cerr &lt;&lt; \"Uh oh, Sample.dat could not be opened for reading!\" &lt;&lt; endl; exit(1); &#125; string strData; inf.seekg(5); // move to 5th character // Get the rest of the line and print it getline(inf, strData); cout &lt;&lt; strData &lt;&lt; endl; inf.seekg(8, ios::cur); // move 8 more bytes into file // Get rest of the line and print it getline(inf, strData); cout &lt;&lt; strData &lt;&lt; endl; inf.seekg(-15, ios::end); // move 15 bytes before end of file // Get rest of the line and print it getline(inf, strData); cout &lt;&lt; strData &lt;&lt; endl; return 0;&#125;","categories":[],"tags":[]},{"title":"C&C++/æ–‡ä»¶çš„åŸºæœ¬IO","slug":"C&C++/æ–‡ä»¶çš„åŸºæœ¬IO","date":"2020-05-28T00:48:44.911Z","updated":"2020-05-28T01:36:17.065Z","comments":true,"path":"archives/2926b12b.html","link":"","permalink":"https://longlongqin.github.io/archives/2926b12b.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/186-basic-file-io/c++ä¸­çš„æ–‡ä»¶I/Oçš„å·¥ä½œæ–¹å¼ä¸æ™®é€šI/Oéå¸¸ç›¸ä¼¼(åªæ˜¯å¢åŠ äº†ä¸€äº›ç»†å¾®çš„å¤æ‚æ€§)ã€‚åœ¨c++ä¸­æœ‰3ä¸ªåŸºæœ¬çš„æ–‡ä»¶I/Oç±»:ï¼ˆå¤´æ–‡ä»¶fstreamä¸­ï¼‰ifstream (derived from istream),ofstream (derived from ostream),fstream (derived from iostream).è¿™äº›ç±»åˆ†åˆ«æ‰§è¡Œæ–‡ä»¶ è¾“å…¥ã€è¾“å‡ºå’Œ è¾“å…¥/è¾“å‡ºã€‚ä¸coutã€cinã€cerrå’Œclogæµä¸åŒï¼Œæ–‡ä»¶æµå¿…é¡»ç”±ç¨‹åºå‘˜æ˜¾å¼åœ°è®¾ç½®ã€‚ç„¶è€Œï¼Œè¿™éå¸¸ç®€å•:è¦æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å– å’Œ/æˆ– å†™å…¥ï¼Œåªéœ€å®ä¾‹åŒ–é€‚å½“æ–‡ä»¶I/Oç±»çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥æ–‡ä»¶çš„åç§°ä½œä¸ºå‚æ•°ã€‚ç„¶åä½¿ç”¨æ’å…¥(&lt;&lt;)æˆ–æå–(&gt;&gt;)æ“ä½œç¬¦æ¥å†™å…¥æˆ–è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚ä¸€æ—¦ä½ å®Œæˆï¼Œæœ‰å‡ ç§æ–¹æ³•æ¥å…³é—­ä¸€ä¸ªæ–‡ä»¶:æ˜¾å¼è°ƒç”¨close()å‡½æ•°ï¼Œæˆ–è€…åªéœ€è®©æ–‡ä»¶I/Oå˜é‡è¶…å‡ºèŒƒå›´ (æ–‡ä»¶I/Oç±»ææ„å‡½æ•°å°†ä¸ºæ‚¨å…³é—­æ–‡ä»¶)ã€‚æ–‡ä»¶è¾“å‡ºè¦åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­æ‰§è¡Œæ–‡ä»¶è¾“å‡ºï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ofstreamç±»ã€‚è¿™æ˜¯éå¸¸ç›´æ¥çš„:12345678910111213141516171819202122232425#include &lt;fstream&gt;#include &lt;iostream&gt; int main()&#123; // ofstreamç”¨äºç¼–å†™æ–‡ä»¶ //æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåä¸ºSample.datçš„æ–‡ä»¶ std::ofstream outf&#123; \"Sample.dat\" &#125;; // å¦‚æœæˆ‘ä»¬ä¸èƒ½æ‰“å¼€è¾“å‡ºæ–‡ä»¶æµè¿›è¡Œå†™å…¥ if (!outf) &#123; // æ‰“å°é”™è¯¯å¹¶é€€å‡º std::cerr &lt;&lt; \"Uh oh, Sample.dat could not be opened for writing!\" &lt;&lt; std::endl; return 1; &#125; // æˆ‘ä»¬å°†åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™å…¥ä¸¤è¡Œ outf &lt;&lt; \"This is line 1\" &lt;&lt; '\\n'; outf &lt;&lt; \"This is line 2\" &lt;&lt; '\\n'; return 0; // å½“outfè¶…å‡ºèŒƒå›´æ—¶ï¼Œofstreamææ„å‡½æ•°å°†å…³é—­æ–‡ä»¶&#125;å¦‚æœæŸ¥çœ‹é¡¹ç›®ç›®å½•ï¼Œåº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªåä¸ºSample.datçš„æ–‡ä»¶ã€‚å¦‚æœæ‚¨ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å®ƒï¼Œæ‚¨å°†çœ‹åˆ°å®ƒç¡®å®åŒ…å«æˆ‘ä»¬å†™å…¥æ–‡ä»¶çš„ä¸¤è¡Œã€‚æ³¨æ„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨put()å‡½æ•°å°†å•ä¸ªå­—ç¬¦å†™å…¥æ–‡ä»¶ã€‚æ–‡ä»¶è¾“å…¥ç°åœ¨ï¼Œæˆ‘ä»¬å°†è·å–æˆ‘ä»¬åœ¨ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­ç¼–å†™çš„æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä»ç£ç›˜è¯»å…¥ã€‚æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬åˆ°è¾¾äº†æ–‡ä»¶çš„æœ«å°¾(EOF)ï¼Œ ifstreamå°†è¿”å›0ã€‚æˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªäº‹å®æ¥å†³å®šéœ€è¦è¯»å¤šå°‘ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;fstream&gt;#include &lt;iostream&gt;#include &lt;string&gt; int main()&#123; // ifstreamç”¨äºè¯»å–æ–‡ä»¶ // æˆ‘ä»¬å°†ä»ä¸€ä¸ªåä¸ºSample.datçš„æ–‡ä»¶ä¸­è¿›è¡Œè¯»å– std::ifstream inf&#123; \"Sample.dat\" &#125;; // If we couldn't open the output file stream for reading if (!inf) &#123; // Print an error and exit std::cerr &lt;&lt; \"Uh oh, Sample.dat could not be opened for reading!\" &lt;&lt; std::endl; return 1; &#125; // è¿˜æœ‰å¾ˆå¤šä¸œè¥¿è¦è¯» while (inf) &#123; // å°†æ–‡ä»¶ä¸­çš„å†…å®¹è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶æ‰“å°å‡ºæ¥ std::string strInput; inf &gt;&gt; strInput; std::cout &lt;&lt; strInput &lt;&lt; '\\n'; &#125; return 0; // When inf goes out of scope, the ifstream // destructor will close the file&#125;/*ç»“æœ*/Thisisline1Thisisline2å—¯ï¼Œé‚£ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚è¯·è®°ä½ï¼Œæå–æ“ä½œç¬¦ä¼šåœ¨ç©ºæ ¼å¤„ä¸­æ–­ã€‚ä¸ºäº†æ•´è¡Œè¯»å–ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨getline()å‡½æ•°ã€‚123456789101112131415161718192021222324252627282930313233343536#include &lt;fstream&gt;#include &lt;iostream&gt;#include &lt;string&gt; int main()&#123; // ifstream is used for reading files // We'll read from a file called Sample.dat std::ifstream inf&#123; \"Sample.dat\" &#125;; // If we couldn't open the input file stream for reading if (!inf) &#123; // Print an error and exit std::cerr &lt;&lt; \"Uh oh, Sample.dat could not be opened for reading!\\n\"; return 1; &#125; // While there's still stuff left to read while (inf) &#123; // read stuff from the file into a string and print it std::string strInput; std::getline(inf, strInput); //â­â­â­ std::cout &lt;&lt; strInput &lt;&lt; '\\n'; &#125; return 0; // When inf goes out of scope, the ifstream // destructor will close the file&#125;/*ç»“æœ*/This is line 1This is line 2ç¼“å†²è¾“å‡ºc++çš„è¾“å‡ºå¯ä»¥è¢«ç¼“å†²ã€‚è¿™æ„å‘³ç€è¾“å‡ºåˆ°æ–‡ä»¶æµçš„ä»»ä½•å†…å®¹éƒ½å¯èƒ½ä¸ä¼šç«‹å³å†™å…¥ç£ç›˜ã€‚ç›¸åï¼Œå‡ ä¸ªè¾“å‡ºæ“ä½œå¯ä»¥æˆæ‰¹å¤„ç†å¹¶ä¸€èµ·å¤„ç†ã€‚è¿™ä¸»è¦æ˜¯å‡ºäºæ€§èƒ½åŸå› ã€‚åˆ·æ–°ç¼“å†²åŒºå½“å°†ç¼“å†²åŒºå†™å…¥ç£ç›˜æ—¶ï¼Œè¿™ç§°ä¸ºåˆ·æ–°ç¼“å†²åŒºã€‚å…³é—­æ–‡ä»¶ä½¿ç¼“å†²åŒºè¢«åˆ·æ–°çš„ä¸€ç§æ–¹æ³•æ˜¯å…³é—­æ–‡ä»¶â€”â€”ç¼“å†²åŒºçš„å†…å®¹å°†è¢«åˆ·æ–°åˆ°ç£ç›˜ï¼Œç„¶åæ–‡ä»¶å°†è¢«å…³é—­ã€‚ç¼“å†²é€šå¸¸ä¸æ˜¯é—®é¢˜ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒä¼šç»™ç²—å¿ƒå¤§æ„çš„äººå¸¦æ¥éº»çƒ¦ã€‚è¿™ç§æƒ…å†µä¸‹çš„ç½ªé­ç¥¸é¦–æ˜¯å½“ç¼“å†²åŒºä¸­æœ‰æ•°æ®æ—¶ï¼Œç¨‹åºç«‹å³ ç»ˆæ­¢(é€šè¿‡å´©æºƒæˆ–è°ƒç”¨exit())ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæ–‡ä»¶æµç±»çš„ææ„å‡½æ•°ä¸ä¼šè¢«æ‰§è¡Œï¼Œè¿™æ„å‘³ç€æ–‡ä»¶æ°¸è¿œä¸ä¼šè¢«å…³é—­ï¼Œè¿™æ„å‘³ç€ç¼“å†²åŒºæ°¸è¿œä¸ä¼šè¢«åˆ·æ–°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¼“å†²åŒºä¸­çš„æ•°æ®ä¸å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯æ°¸è¿œä¸¢å¤±ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨è°ƒç”¨exit()ä¹‹å‰æ˜¾å¼åœ°å…³é—­æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶æ€»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚æ‰‹åŠ¨åˆ·æ–°å¯ä»¥ä½¿ç”¨ostream::flush()å‡½æ•°æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒºï¼Œæˆ–è€…å°†std::flushå‘é€åˆ°è¾“å‡ºæµã€‚è¿™ä¸¤ç§æ–¹æ³•éƒ½æœ‰åŠ©äºç¡®ä¿ç¼“å†²åŒºçš„å†…å®¹è¢«ç«‹å³å†™å…¥ç£ç›˜ï¼Œä»¥é˜²ç¨‹åºå´©æºƒã€‚æœ‰è¶£çš„æ˜¯std::endl; ä¹Ÿåˆ·æ–°è¾“å‡ºæµã€‚å› æ­¤ï¼Œè¿‡åº¦ä½¿ç”¨std::endl(å¯¼è‡´ä¸å¿…è¦çš„ç¼“å†²åŒºåˆ·æ–°) ä¼šåœ¨æ‰§è¡Œå¼€é”€å¾ˆå¤§çš„ç¼“å†²I/O(ä¾‹å¦‚å†™å…¥æ–‡ä»¶)æ—¶å¯¹æ€§èƒ½é€ æˆå½±å“ã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼Œå…³å¿ƒæ€§èƒ½çš„ç¨‹åºå‘˜é€šå¸¸ä¼šä½¿ç”¨â€™ \\n â€˜è€Œä¸æ˜¯std::endlæ¥å°†æ¢è¡Œç¬¦æ’å…¥åˆ°è¾“å‡ºæµä¸­ï¼Œä»¥é¿å…ä¸å¿…è¦çš„ç¼“å†²åŒºåˆ·æ–°ã€‚æ–‡ä»¶æ¨¡å¼å¦‚æœæˆ‘ä»¬è¯•å›¾å†™å…¥ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆ? å†æ¬¡è¿è¡Œè¾“å‡ºç¤ºä¾‹ è¡¨æ˜ï¼Œæ¯æ¬¡è¿è¡Œç¨‹åºæ—¶ï¼ŒåŸå§‹æ–‡ä»¶éƒ½è¢«å®Œå…¨è¦†ç›–ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨æ–‡ä»¶çš„æœ«å°¾è¿½åŠ æ›´å¤šçš„æ•°æ®ï¼Œè¯¥æ€ä¹ˆåŠ?ç»“æœæ˜¯ï¼Œæ–‡ä»¶æµæ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å…è®¸æ‚¨æŒ‡å®šæœ‰å…³æ–‡ä»¶åº”è¯¥å¦‚ä½•æ‰“å¼€çš„ä¿¡æ¯ã€‚è¿™ä¸ªå‚æ•°ç§°ä¸ºmodeï¼Œå®ƒæ¥å—çš„æœ‰æ•ˆæ ‡å¿—ï¼ˆä½äºIosç±»ä¸­ï¼‰ã€‚Ios file modeMeaningappOpens the file in append modeateSeeks to the end of the file before reading/writingbinaryOpens the file in binary mode (instead of text mode)inOpens the file in read mode (default for ifstream)outOpens the file in write mode (default for ofstream)truncErases the file if it already existså¯ä»¥é€šè¿‡ä½æ“ä½œ(ä½¿ç”¨|æ“ä½œç¬¦)æŒ‡å®šå¤šä¸ªæ ‡å¿—ã€‚åœ¨æ–‡ä»¶æ¨¡å¼ä¸‹ï¼ŒIfstreamé»˜è®¤ä¸ºstd::ios::inï¼›Ofstreamé»˜è®¤ä¸ºstd::ios::outæ–‡ä»¶æ¨¡å¼ã€‚fstream é»˜è®¤ä¸ºstd::ios::in | std::ios::outæ–‡ä»¶æ¨¡å¼ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨é»˜è®¤æƒ…å†µä¸‹è¯»å’Œå†™ã€‚è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œåœ¨å‰é¢åˆ›å»ºçš„Sample.datæ–‡ä»¶ä¸­è¿½åŠ ä¸¤è¡Œä»£ç :1234567891011121314151617181920212223242526#include &lt;iostream&gt;#include &lt;fstream&gt; int main()&#123; // æˆ‘ä»¬ä¼šä¼ é€’ios:appæ ‡å¿—å‘Šè¯‰ofstreamå»è¿½åŠ  // è€Œä¸æ˜¯é‡å†™æ–‡ä»¶ã€‚æˆ‘ä»¬ä¸éœ€è¦é€šè¿‡std::ios::out // å› ä¸ºofstreamé»˜è®¤std::ios::out std::ofstream outf&#123; \"Sample.dat\", std::ios::app &#125;; // If we couldn't open the output file stream for writing if (!outf) &#123; // Print an error and exit std::cerr &lt;&lt; \"Uh oh, Sample.dat could not be opened for writing!\\n\"; return 1; &#125; outf &lt;&lt; \"This is line 3\" &lt;&lt; '\\n'; outf &lt;&lt; \"This is line 4\" &lt;&lt; '\\n'; return 0; // When outf goes out of scope, the ofstream // destructor will close the file&#125;ç»“æœï¼š1234This is line 1This is line 2This is line 3This is line 4ä½¿ç”¨open()æ˜¾å¼æ‰“å¼€æ–‡ä»¶å°±åƒå¯ä»¥ä½¿ç”¨close()æ˜¾å¼åœ°å…³é—­æ–‡ä»¶æµä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨open()æ˜¾å¼åœ°æ‰“å¼€æ–‡ä»¶æµã€‚open()çš„å·¥ä½œåŸç†ä¸æ–‡ä»¶æµæ„é€ å‡½æ•°ç±»ä¼¼â€”â€”å®ƒæ¥å—ä¸€ä¸ªæ–‡ä»¶åå’Œä¸€ä¸ªå¯é€‰çš„æ–‡ä»¶æ¨¡å¼ã€‚å¦‚ï¼š123456789std::ofstream outf&#123; \"Sample.dat\" &#125;;outf &lt;&lt; \"This is line 1\" &lt;&lt; '\\n';outf &lt;&lt; \"This is line 2\" &lt;&lt; '\\n';outf.close(); // æ˜¾å¼å…³é—­æ–‡ä»¶// è¿½åŠ ä¸€è¡Œoutf.open(\"Sample.dat\", std::ios::app);outf &lt;&lt; \"This is line 3\\n\";outf.close();å…¶ä»–å‚è€ƒæ–‡ç« ï¼šhttps://www.runoob.com/cplusplus/cpp-files-streams.html","categories":[],"tags":[]},{"title":"C&C++/æµçŠ¶æ€å’Œè¾“å…¥éªŒè¯","slug":"C&C++/æµçŠ¶æ€å’Œè¾“å…¥éªŒè¯","date":"2020-05-27T09:55:34.276Z","updated":"2020-05-27T14:09:14.278Z","comments":true,"path":"archives/ba87b609.html","link":"","permalink":"https://longlongqin.github.io/archives/ba87b609.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/185-stream-states-and-input-validation/æµçŠ¶æ€ios_baseç±»åŒ…å«å‡ ä¸ªçŠ¶æ€æ ‡å¿—ï¼Œç”¨æ¥æŒ‡ç¤ºä½¿ç”¨æµæ—¶å¯èƒ½å‘ç”Ÿçš„å„ç§æƒ…å†µ:FlagMeaninggoodbitEverything is okaybadbitSome kind of fatal error occurred (e.g. the program tried to read past the end of a file)eofbitThe stream has reached the end of a filefailbitA non-fatal error occurred (eg. the user entered letters when the program was expecting an integer)è™½ç„¶è¿™äº›æ ‡å¿—å­˜åœ¨äºios_baseä¸­ï¼Œå› ä¸ºiosæ˜¯ä»ios_baseæ´¾ç”Ÿè€Œæ¥çš„ï¼Œè€Œä¸”iosæ¯”ios_baseéœ€è¦æ›´å°‘çš„è¾“å…¥ï¼Œä½†å®ƒä»¬é€šå¸¸æ˜¯é€šè¿‡iosè®¿é—®çš„(ä¾‹å¦‚std::ios::failbit)ã€‚iosè¿˜æä¾›äº†ä¸€äº›æˆå‘˜åŠŸèƒ½ï¼Œä»¥ä¾¿æ–¹ä¾¿åœ°è®¿é—®è¿™äº›å›½å®¶:Member functionMeaninggood()Returns true if the goodbit is set (the stream is ok)bad()Returns true if the badbit is set (a fatal error occurred)eof()Returns true if the eofbit is set (the stream is at the end of a file)fail()Returns true if the failbit is set (a non-fatal error occurred)clear()Clears all flags and restores the stream to the goodbit stateclear(state)Clears all flags and sets the state flag passed inrdstate()Returns the currently set flagssetstate(state)Sets the state flag passed inæœ€å¸¸å¤„ç†çš„ä½æ˜¯æ•…éšœä½ (failbit)ï¼Œå®ƒæ˜¯åœ¨ç”¨æˆ·è¾“å…¥æ— æ•ˆè¾“å…¥æ—¶è®¾ç½®çš„ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹ç¨‹åº:123std::cout &lt;&lt; \"Enter your age: \";int nAge;std::cin &gt;&gt; nAge;æ³¨æ„ï¼Œè¿™ä¸ªç¨‹åºæœŸæœ›ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•´æ•°ã€‚ä½†æ˜¯ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥éæ•°å­—æ•°æ®ï¼Œå¦‚â€œAlexâ€ï¼Œcinå°†æ— æ³•æå–ä»»ä½•æ•°æ®è¿›è¡Œè®¡æ•°ï¼Œå¹¶è®¾ç½®æˆæ•…éšœä½ã€‚å¦‚æœå‡ºç°é”™è¯¯ï¼Œå¹¶ä¸”å°†æµè®¾ç½®ä¸ºgoodbitä»¥å¤–çš„ä»»ä½•å†…å®¹ã€‚åˆ™å°†å¿½ç•¥è¯¥æµä¸Šçš„è¿›ä¸€æ­¥æµæ“ä½œã€‚è¿™ä¸ªæ¡ä»¶å¯ä»¥é€šè¿‡è°ƒç”¨clear()å‡½æ•°æ¥æ¸…é™¤ã€‚è¾“å…¥éªŒè¯è¾“å…¥éªŒè¯æ˜¯æ£€æŸ¥ç”¨æˆ·è¾“å…¥æ˜¯å¦æ»¡è¶³æŸäº›æ¡ä»¶çš„è¿‡ç¨‹ã€‚è¾“å…¥éªŒè¯é€šå¸¸å¯ä»¥åˆ†ä¸ºä¸¤ç§ç±»å‹: å­—ç¬¦ä¸²å’Œæ•°å­—ã€‚å¯¹äºå­—ç¬¦ä¸²éªŒè¯ï¼Œæˆ‘ä»¬æ¥å—æ‰€æœ‰ç”¨æˆ·è¾“å…¥ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶åæ ¹æ®å…¶æ ¼å¼æ˜¯å¦æ­£ç¡®æ¥å—æˆ–æ‹’ç»è¯¥å­—ç¬¦ä¸²ã€‚åœ¨å¤§å¤šæ•°è¯­è¨€ä¸­(ç‰¹åˆ«æ˜¯åƒPerlå’ŒPHPè¿™æ ·çš„è„šæœ¬è¯­è¨€)ï¼Œè¿™æ˜¯é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å®Œæˆçš„ã€‚ä½†æ˜¯ï¼Œc++æ²¡æœ‰å†…ç½®çš„æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒã€‚å› æ­¤ï¼Œè¿™é€šå¸¸æ˜¯é€šè¿‡æ£€æŸ¥å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦æ¥å®Œæˆçš„ï¼Œä»¥ç¡®ä¿å®ƒæ»¡è¶³ä¸€äº›æ¡ä»¶ã€‚å¯¹äºæ•°å­—éªŒè¯ï¼Œæˆ‘ä»¬é€šå¸¸å…³å¿ƒçš„æ˜¯ç¡®ä¿ç”¨æˆ·è¾“å…¥çš„æ•°å­—åœ¨ä¸€ä¸ªç‰¹å®šçš„èŒƒå›´å†…(ä¾‹å¦‚ï¼Œåœ¨0åˆ°20ä¹‹é—´)ã€‚ä½†æ˜¯ï¼Œä¸å­—ç¬¦ä¸²éªŒè¯ä¸åŒï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥å®Œå…¨ä¸æ˜¯æ•°å­—çš„å†…å®¹â€”â€”æˆ‘ä»¬ä¹Ÿéœ€è¦å¤„ç†è¿™äº›æƒ…å†µã€‚ä¸ºäº†å¸®åŠ©æˆ‘ä»¬ï¼Œc++æä¾›äº†è®¸å¤šæœ‰ç”¨çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›å‡½æ•°æ¥ç¡®å®šç‰¹å®šå­—ç¬¦æ˜¯æ•°å­—è¿˜æ˜¯å­—æ¯ã€‚cctypeå¤´æ–‡ä»¶ä¸­æœ‰ä»¥ä¸‹å‡½æ•°:FunctionMeaningisalnum(int)Returns non-zero if the parameter is a letter or a digitisalpha(int)Returns non-zero if the parameter is a letteriscntrl(int)Returns non-zero if the parameter is a control characterisdigit(int)Returns non-zero if the parameter is a digitisgraph(int)Returns non-zero if the parameter is printable character that is not whitespaceisprint(int)Returns non-zero if the parameter is printable character (including whitespace)ispunct(int)Returns non-zero if the parameter is neither alphanumeric nor whitespaceisspace(int)Returns non-zero if the parameter is whitespaceisxdigit(int)Returns non-zero if the parameter is a hexadecimal digit (0-9, a-f, A-F)å­—ç¬¦ä¸²éªŒè¯è®©æˆ‘ä»¬åšä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²éªŒè¯ï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥ä»–ä»¬çš„åå­—ã€‚æˆ‘ä»¬çš„éªŒè¯æ ‡å‡†æ˜¯ç”¨æˆ·åªè¾“å…¥å­—æ¯å­—ç¬¦æˆ–ç©ºæ ¼ã€‚å¦‚æœé‡åˆ°å…¶ä»–æƒ…å†µï¼Œè¾“å…¥å°†è¢«æ‹’ç»ã€‚å½“æ¶‰åŠåˆ°å¯å˜é•¿åº¦è¾“å…¥æ—¶ï¼ŒéªŒè¯å­—ç¬¦ä¸²çš„æœ€ä½³æ–¹æ³•(é™¤äº†ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åº“ä¹‹å¤–)æ˜¯éå†å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ï¼Œå¹¶ç¡®ä¿å®ƒæ»¡è¶³éªŒè¯æ ‡å‡†ã€‚è¿™å°±æ˜¯æˆ‘ä»¬è¦åšçš„ã€‚1234567891011121314151617181920212223242526272829303132333435363738#include &lt;cctype&gt;#include &lt;cstdint&gt;#include &lt;string&gt; #include &lt;iostream&gt; int main()&#123; while (true) &#123; // Get user's name std::cout &lt;&lt; \"Enter your name: \"; std::string strName; std::getline(cin, strName); // get the entire line, including spaces bool bRejected&#123; false &#125;; // has strName been rejected? // Step through each character in the string until we either hit // the end of the string, or we rejected a character for (std::size_t nIndex&#123; 0 &#125;; nIndex &lt; strName.length() &amp;&amp; !bRejected; ++nIndex) &#123; // If the current character is an alpha character, that's fine if (std::isalpha(strName[nIndex])) continue; // If it's a space, that's fine too if (strName[nIndex] == ' ') continue; // Otherwise we're rejecting this input bRejected = true; &#125; // If the input has been accepted, exit the while loop // otherwise we're going to loop again if (!bRejected) break; &#125;&#125;æ•°å€¼éªŒè¯åœ¨å¤„ç†æ•°å­—è¾“å…¥æ—¶ï¼Œæœ€æ˜æ˜¾çš„æ–¹æ³•æ˜¯ä½¿ç”¨æå–æ“ä½œç¬¦å°†è¾“å…¥æå–ä¸ºæ•°å­—ç±»å‹ã€‚é€šè¿‡æ£€æŸ¥æ•…éšœä½ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†æ•°å­—ã€‚è®©æˆ‘ä»¬è¯•è¯•è¿™ä¸ªæ–¹æ³•:123456789101112131415161718192021222324int main()&#123; int nAge; while (true) &#123; std::cout &lt;&lt; \"Enter your age: \"; std::cin &gt;&gt; nAge; if (std::cin.fail()) // no extraction took place &#123; std::cin.clear(); // reset the state bits back to goodbit so we can use ignore() std::cin.ignore(32767, '\\n'); // clear out the bad input from the stream continue; // try again &#125; if (nAge &lt;= 0) // make sure nAge is positive continue; break; &#125; std::cout &lt;&lt; \"You entered: \" &lt;&lt; nAge &lt;&lt; '\\n';&#125;å¦‚æœç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œcin.fail()å°†ä¸ºfalseï¼Œæˆ‘ä»¬å°†æŒ‰breakè¯­å¥ï¼Œé€€å‡ºå¾ªç¯ã€‚å¦‚æœç”¨æˆ·è¾“å…¥ä»¥å­—æ¯å¼€å¤´çš„è¾“å…¥ï¼Œcin.fail()å°†ä¸ºçœŸï¼Œæˆ‘ä»¬å°†è¿›å…¥æ¡ä»¶å¥ã€‚æ›´å¤šè¯¦ç»†çš„è®²è§£ï¼Œè¯·çœ‹åŸæ–‡ã€‚è¿™é‡Œå…ˆä¸å†™ï¼Œè¯´ä¸å®šä»¥åä¼šè¡¥ä¸Š~~~~","categories":[],"tags":[]},{"title":"C&C++/å­—ç¬¦ä¸²çš„æµ(stream)ç±»","slug":"C&C++/å­—ç¬¦ä¸²çš„æµ(stream)ç±»","date":"2020-05-27T03:18:36.500Z","updated":"2020-05-27T03:39:57.831Z","comments":true,"path":"archives/4be6fd59.html","link":"","permalink":"https://longlongqin.github.io/archives/4be6fd59.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/184-stream-classes-for-strings/åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‚¨çœ‹åˆ°çš„æ‰€æœ‰I/Oç¤ºä¾‹éƒ½æ˜¯å†™ç»™coutæˆ–ä»cinè¯»å–çš„ã€‚ç„¶è€Œï¼Œè¿˜æœ‰å¦ä¸€ç»„ç±»å«åšå­—ç¬¦ä¸²çš„æµç±»ï¼Œå®ƒå…è®¸æ‚¨ä½¿ç”¨ç†Ÿæ‚‰çš„ æ’å…¥(&lt;&lt;) å’Œ æå–(&gt;&gt;)æ“ä½œç¬¦æ¥å¤„ç†å­—ç¬¦ä¸²ã€‚ä¸istreamå’Œostreamä¸€æ ·ï¼Œå­—ç¬¦ä¸²æµæä¾›äº†ä¸€ä¸ªä¿å­˜æ•°æ®çš„ç¼“å†²åŒºã€‚ä½†æ˜¯ï¼Œä¸cinå’Œcoutä¸åŒï¼Œè¿™äº›æµæ²¡æœ‰è¿æ¥åˆ°I/Oé€šé“(ä¾‹å¦‚é”®ç›˜ã€ç›‘è§†å™¨ç­‰)ã€‚å­—ç¬¦ä¸²æµçš„ä¸»è¦ç”¨é€”ä¹‹ä¸€æ˜¯ç¼“å†²è¾“å‡ºä»¥ä¾¿ä»¥åæ˜¾ç¤ºï¼Œæˆ–è€…é€è¡Œå¤„ç†è¾“å…¥ã€‚å­—ç¬¦ä¸²æœ‰å…­ä¸ªæµç±»ï¼Œï¼šåœ¨å¤´æ–‡ä»¶sstreamä¸­ã€‚ç”¨äºè¯»å–å’Œå†™å…¥æ­£å¸¸å­—ç¬¦å®½åº¦çš„å­—ç¬¦ä¸²ã€‚istringstream(ç»§æ‰¿è‡ªistream)ï¼Œostringstream(ç»§æ‰¿è‡ªostream)ï¼Œstringstream(ç»§æ‰¿è‡ªiostream)ç”¨äºè¯»å–å’Œå†™å…¥å®½å­—ç¬¦ä¸²ã€‚wistringstreamwostringstreamwstringstreamæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å°†æ•°æ®å¯¼å…¥stringstreamï¼šä½¿ç”¨æ’å…¥(&lt;&lt;)æ“ä½œç¬¦:12std::stringstream os;os &lt;&lt; \"en garde!\" &lt;&lt; '\\n'; // insert \"en garde!\" into the stringstreamä½¿ç”¨str(string)å‡½æ•°è®¾ç½®ç¼“å†²åŒºçš„å€¼:12std::stringstream os;os.str(\"en garde!\"); // set the stringstream buffer to \"en garde!\"ä»stringstreamä¸­è·å–æ•°æ®æœ‰ä¸¤ç§ç±»ä¼¼çš„æ–¹æ³•:ä½¿ç”¨str()å‡½æ•°æ£€ç´¢ç¼“å†²åŒºçš„ç»“æœ:123456std::stringstream os;os &lt;&lt; \"12345 67.89\" &lt;&lt; '\\n';cout &lt;&lt; os.str();/*ç»“æœ*/12345 67.89ä½¿ç”¨æå–(&gt;&gt;)æ“ä½œç¬¦:1234567891011std::stringstream os;os &lt;&lt; \"12345 67.89\"; // insert a string of numbers into the stream std::string strValue;os &gt;&gt; strValue; std::string strValue2;os &gt;&gt; strValue2; // print the numbers separated by a dashstd::cout &lt;&lt; strValue &lt;&lt; \" - \" &lt;&lt; strValue2 &lt;&lt; '\\n';æ³¨æ„ï¼Œ&gt;&gt;æ“ä½œç¬¦éå†å­—ç¬¦ä¸²â€”â€”æ¯æ¬¡è¿ç»­ä½¿ç”¨&gt;&gt;éƒ½ä¼šè¿”å›æµä¸­çš„ä¸‹ä¸€ä¸ªå¯æå–å€¼ã€‚å¦ä¸€æ–¹é¢ï¼Œstr()è¿”å›æµçš„æ•´ä¸ªå€¼ï¼Œå³ä½¿å·²ç»åœ¨æµä¸Šä½¿ç”¨äº†&gt;&gt;ã€‚å­—ç¬¦ä¸²å’Œæ•°å­—ä¹‹é—´çš„è½¬æ¢å› ä¸ºæ’å…¥å’Œæå–æ“ä½œç¬¦çŸ¥é“å¦‚ä½•å¤„ç†æ‰€æœ‰åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒä»¬å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œåä¹‹äº¦ç„¶ã€‚é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å°†æ•°å­—è½¬æ¢æˆå­—ç¬¦ä¸²:12345678910111213std::stringstream os; int nValue&#123; 12345 &#125;;double dValue&#123; 67.89 &#125;;os &lt;&lt; nValue &lt;&lt; ' ' &lt;&lt; dValue; std::string strValue1, strValue2;os &gt;&gt; strValue1 &gt;&gt; strValue2; std::cout &lt;&lt; strValue1 &lt;&lt; ' ' &lt;&lt; strValue2 &lt;&lt; '\\n';/*ç»“æœ*/12345 67.89ç°åœ¨è®©æˆ‘ä»¬æŠŠä¸€ä¸ª æ•°å­— å­—ç¬¦ä¸² è½¬æ¢æˆä¸€ä¸ªæ•°å­—:1234567891011std::stringstream os;os &lt;&lt; \"12345 67.89\"; // insert a string of numbers into the streamint nValue;double dValue; os &gt;&gt; nValue &gt;&gt; dValue; cout &lt;&lt; nValue &lt;&lt; ' ' &lt;&lt; dValue &lt;&lt; '\\n';/*ç»“æœ*/12345 67.89æ¸…é™¤stringstreamä»¥ä¾¿é‡ç”¨æœ‰å‡ ç§æ–¹æ³•å¯ä»¥æ¸…ç©ºstringstreamçš„ç¼“å†²åŒºã€‚ä½¿ç”¨str()ä¸ä¸€ä¸ªç©ºç™½cé£æ ¼çš„å­—ç¬¦ä¸² å°†å®ƒè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²:1234567std::stringstream os;os &lt;&lt; \"Hello \"; os.str(\"\"); // erase the buffer os &lt;&lt; \"World!\";std::cout &lt;&lt; os.str();ä½¿ç”¨str()å’Œä¸€ä¸ªç©ºçš„std::stringå¯¹è±¡ å°†å®ƒè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²:1234567std::stringstream os;os &lt;&lt; \"Hello \"; os.str(std::string&#123;&#125;); // erase the buffer os &lt;&lt; \"World!\";cout &lt;&lt; os.str();è¿™ä¸¤ä¸ªç¨‹åºäº§ç”Ÿä»¥ä¸‹ç›¸åŒçš„ç»“æœ:1World!å½“æ¸…é™¤ä¸€ä¸ªstringstreamæ—¶ï¼Œè°ƒç”¨clear()å‡½æ•°é€šå¸¸ä¹Ÿæ˜¯ä¸€ä¸ªå¥½ä¸»æ„:12345678std::stringstream os;os &lt;&lt; \"Hello \"; os.str(\"\"); // erase the bufferos.clear(); // reset error flags os &lt;&lt; \"World!\";std::cout &lt;&lt; os.str();clear()å‡½æ•° é‡ç½®å¯èƒ½å·²ç»è®¾ç½®çš„ä»»ä½•é”™è¯¯æ ‡å¿—ï¼Œå¹¶å°†æµè¿”å›åˆ°okçŠ¶æ€ã€‚åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†æ›´å¤šåœ°è®¨è®ºæµçŠ¶æ€å’Œé”™è¯¯æ ‡å¿—ã€‚","categories":[],"tags":[]},{"title":"C&C++/ostreamä¸ios è¾“å‡º","slug":"C&C++/ostreamä¸ios è¾“å‡º","date":"2020-05-27T02:02:36.147Z","updated":"2020-05-27T03:17:42.008Z","comments":true,"path":"archives/927246b0.html","link":"","permalink":"https://longlongqin.github.io/archives/927246b0.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/183-output-with-ostream-and-ios/åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶iostreamè¾“å‡ºç±»(ostream)çš„å„ä¸ªæ–¹é¢ã€‚æ³¨æ„:æœ¬è¯¾ä¸­çš„æ‰€æœ‰I/OåŠŸèƒ½éƒ½ä½äºstdåç§°ç©ºé—´ä¸­ã€‚è¿™æ„å‘³ç€æ‰€æœ‰I/Oå¯¹è±¡å’Œå‡½æ•°è¦ä¹ˆå¿…é¡»ä»¥â€œstd::â€ä¸ºå‰ç¼€ï¼Œè¦ä¹ˆå¿…é¡»ä½¿ç”¨â€œusing namespace std;â€è¯­å¥ã€‚æ’å…¥æ“ä½œç¬¦(&lt;&lt;)æ’å…¥æ“ä½œç¬¦(&lt;&lt;)ç”¨äºå°†ä¿¡æ¯æ”¾å…¥è¾“å‡ºæµã€‚c++ä¸ºæ‰€æœ‰å†…ç½®æ•°æ®ç±»å‹é¢„å®šä¹‰äº†æ’å…¥æ“ä½œï¼Œæ‚¨å·²ç»äº†è§£äº†å¦‚ä½•ä¸ºæ‚¨è‡ªå·±çš„ç±»[é‡è½½æ’å…¥æ“ä½œç¬¦](overload the insertion operator)ã€‚åœ¨å…³äºInput and output (I/O) streamsçš„è¯¾ç¨‹ä¸­ï¼Œæ‚¨çœ‹åˆ°istreamå’Œostreaméƒ½æ¥è‡ªäºä¸€ä¸ªåä¸ºiosçš„ç±»ã€‚ios(å’Œios_base)çš„ä»»åŠ¡ä¹‹ä¸€æ˜¯æ§åˆ¶è¾“å‡ºçš„æ ¼å¼åŒ–é€‰é¡¹ã€‚è¾“å‡ºæ ¼å¼æœ‰ä¸¤ç§æ–¹æ³•æ¥æ”¹å˜æ ¼å¼é€‰é¡¹:æ ‡å¿—(flag)â€”â€”å¯ä»¥å°†æ ‡å¿—çœ‹ä½œå¯ä»¥æ‰“å¼€å’Œå…³é—­çš„å¸ƒå°”å˜é‡ã€‚æ§åˆ¶å™¨(manipulator)â€”â€”æ§åˆ¶å™¨ æ˜¯æ”¾ç½®åœ¨æµä¸­çš„å¯¹è±¡ï¼Œå®ƒå½±å“è¾“å…¥å’Œè¾“å‡ºçš„æ–¹å¼ã€‚æ ‡å¿—(flag)è¦æ‰“å¼€æ ‡å¿—ï¼Œè¯·ä½¿ç”¨setf()å‡½æ•°ï¼Œå¹¶å°†é€‚å½“çš„æ ‡å¿—ä½œä¸ºå‚æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œc++ä¸ä¼šåœ¨æ­£æ•°å‰é¢æ‰“å°+ç¬¦å·ã€‚ä½†æ˜¯ï¼Œé€šè¿‡ä½¿ç”¨std::ios::showposæ ‡å¿—ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜è¿™ä¸ªè¡Œä¸º:12345std::cout.setf(std::ios::showpos); // turn on the std::ios::showpos flagstd::cout &lt;&lt; 27 &lt;&lt; '\\n';/*è¿™å°†äº§ç”Ÿä»¥ä¸‹è¾“å‡º:*/+27å¯ä»¥ä½¿ç”¨OR(|)æ“ä½œç¬¦åŒæ—¶æ‰“å¼€å¤šä¸ªiosæ ‡å¿—:12std::cout.setf(std::ios::showpos | std::ios::uppercase); // turn on the std::ios::showpos and std::ios::uppercase flagstd::cout &lt;&lt; 27 &lt;&lt; '\\n';è¦å…³é—­æ ‡å¿—ï¼Œè¯·ä½¿ç”¨unsetf()å‡½æ•°:12345678std::cout.setf(std::ios::showpos); // turn on the std::ios::showpos flagstd::cout &lt;&lt; 27 &lt;&lt; '\\n';std::cout.unsetf(std::ios::showpos); // turn off the std::ios::showpos flagstd::cout &lt;&lt; 28 &lt;&lt; '\\n';/*è¿™å°†äº§ç”Ÿä»¥ä¸‹è¾“å‡º:*/+2728åœ¨ä½¿ç”¨setf()æ—¶ï¼Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚è®¸å¤šæ ‡å¿—å±äºç»„ï¼Œç§°ä¸ºæ ¼å¼ç»„(format group)ã€‚æ ¼å¼ç»„æ˜¯ä¸€ç»„æ‰§è¡Œç±»ä¼¼ (æœ‰æ—¶äº’æ–¥) æ ¼å¼é€‰é¡¹çš„æ ‡å¿—ã€‚ä¾‹å¦‚ï¼Œåä¸ºâ€œbasefieldâ€çš„æ ¼å¼ç»„åŒ…å«æ ‡å¿—â€œoctâ€ã€â€œdecâ€å’Œâ€œhexâ€ï¼Œå®ƒä»¬æ§åˆ¶æ•´æ•°å€¼çš„åŸºæ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¾ç½®â€œdecâ€æ ‡å¿—ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬è¿™æ ·åš:12345std::cout.setf(std::ios::hex); // try to turn on hex outputstd::cout &lt;&lt; 27 &lt;&lt; '\\n';/*æˆ‘ä»¬å¾—åˆ°å¦‚ä¸‹è¾“å‡º:*/27å®ƒæ²¡æœ‰å·¥ä½œ! åŸå› æ˜¯setf()åªæ‰“å¼€æ ‡å¿—â€”â€”å› æ­¤ï¼Œå½“æˆ‘ä»¬æ‰“å¼€std::hexæ—¶ï¼Œstd::ios::decä»ç„¶æ˜¯æ‰“å¼€çš„ï¼Œè€Œstd::ios::decæ˜¾ç„¶æ˜¯ä¼˜å…ˆçš„ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥å…³é—­std::ios::decï¼Œè¿™æ ·å°±åªè®¾ç½®äº†std::ios::hex:123456std::cout.unsetf(std::ios::dec); // turn off decimal outputstd::cout.setf(std::ios::hex); // turn on hexadecimal outputstd::cout &lt;&lt; 27 &lt;&lt; '\\n';/*ç»“æœ*/1bç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨å¦ä¸€ç§å½¢å¼çš„setf()ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°:ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è®¾ç½®çš„æ ‡å¿—ï¼Œç¬¬äºŒä¸ªæ˜¯å®ƒæ‰€å±çš„æ ¼å¼åŒ–ç»„ã€‚å½“ä½¿ç”¨è¿™ç§å½¢å¼çš„setf()æ—¶ï¼Œå±äºè¿™ä¸ªç»„çš„æ‰€æœ‰æ ‡å¿—éƒ½æ˜¯å…³é—­çš„ï¼Œåªæœ‰ä¼ å…¥çš„æ ‡å¿—æ˜¯æ‰“å¼€çš„ã€‚123456// Turn on std::ios::hex as the only std::ios::basefield flagstd::cout.setf(std::ios::hex, std::ios::basefield);std::cout &lt;&lt; 27 &lt;&lt; '\\n';/*ç»“æœ*/1bæ§åˆ¶å™¨(manipulator)ä½¿ç”¨setf()å’Œunsetf()å¯èƒ½ä¼šæœ‰äº›ç¬¨æ‹™ï¼Œå› æ­¤c++æä¾›äº†ç¬¬äºŒç§æ–¹æ³•æ¥æ›´æ”¹æ ¼å¼åŒ–é€‰é¡¹: æ§åˆ¶å™¨(manipulator)ã€‚æ§åˆ¶å™¨çš„ä¼˜ç‚¹æ˜¯ä»–ä»¬è¶³å¤Ÿèªæ˜ï¼Œèƒ½å¤Ÿæ‰“å¼€å’Œå…³é—­é€‚å½“çš„æ ‡å¿—ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼Œä½¿ç”¨ä¸€äº›æ§åˆ¶å™¨æ¥æ”¹å˜åŸºåœ°:123std::cout &lt;&lt; std::hex &lt;&lt; 27 &lt;&lt; '\\n'; // print 27 in hexstd::cout &lt;&lt; 28 &lt;&lt; '\\n'; // we're still in hexstd::cout &lt;&lt; std::dec &lt;&lt; 29 &lt;&lt; '\\n'; // back to decimalè¿™ä¸ªç¨‹åºäº§ç”Ÿçš„è¾“å‡º:1231b1c29é€šå¸¸ï¼Œä½¿ç”¨ æ§åˆ¶å™¨ æ¯” è®¾ç½®å’Œå–æ¶ˆæ ‡å¿— è¦å®¹æ˜“å¾—å¤šã€‚è®¸å¤šé€‰é¡¹å¯ä»¥é€šè¿‡æ ‡å¿—å’Œæ“ä½œå™¨(ä¾‹å¦‚æ›´æ”¹åŸºæ•°)æ¥ä½¿ç”¨ï¼Œä½†æ˜¯ï¼Œå…¶ä»–é€‰é¡¹åªèƒ½é€šè¿‡æ ‡å¿—æˆ–æ“ä½œå™¨æ¥ä½¿ç”¨ï¼Œå› æ­¤äº†è§£å¦‚ä½•ä½¿ç”¨è¿™ä¸¤ä¸ªé€‰é¡¹éå¸¸é‡è¦ã€‚æœ‰ç”¨çš„æ ¼å¼å™¨ä¸‹é¢æ˜¯ä¸€äº›æ›´æœ‰ç”¨çš„æ ‡å¿—ã€æ§åˆ¶å™¨å’Œ æˆå‘˜å‡½æ•° çš„åˆ—è¡¨ã€‚æ ‡è®°ä½äºstd::iosç±»ä¸­æ§åˆ¶å™¨ä½äºstdåç§°ç©ºé—´ä¸­ï¼Œæˆå‘˜å‡½æ•°ä½äºstd::ostreamç±»ä¸­ã€‚GroupFlagMeaningstd::ios::boolalphaIf set, booleans print â€œtrueâ€ or â€œfalseâ€. If not set, booleans print 0 or 1ManipulatorMeaningstd::boolalphaBooleans print â€œtrueâ€ or â€œfalseâ€std::noboolalphaBooleans print 0 or 1 (default)ä¾‹å­ï¼š1234567891011121314std::cout &lt;&lt; true &lt;&lt; \" \" &lt;&lt; false &lt;&lt; '\\n'; std::cout.setf(std::ios::boolalpha);std::cout &lt;&lt; true &lt;&lt; \" \" &lt;&lt; false &lt;&lt; '\\n'; std::cout &lt;&lt; std::noboolalpha &lt;&lt; true &lt;&lt; \" \" &lt;&lt; false &lt;&lt; '\\n'; std::cout &lt;&lt; std::boolalpha &lt;&lt; true &lt;&lt; \" \" &lt;&lt; false &lt;&lt; '\\n';/*ç»“æœ*/1 0true false1 0true falseGroupFlagMeaningstd::ios::showposIf set, prefix positive numbers with a +ManipulatorMeaningstd::showposPrefixes positive numbers with a +std::noshowposDoesnâ€™t prefix positive numbers with a +ä¾‹å­ï¼š1234567891011121314std::cout &lt;&lt; 5 &lt;&lt; '\\n'; std::cout.setf(std::ios::showpos);std::cout &lt;&lt; 5 &lt;&lt; '\\n'; std::cout &lt;&lt; std::noshowpos &lt;&lt; 5 &lt;&lt; '\\n'; std::cout &lt;&lt; std::showpos &lt;&lt; 5 &lt;&lt; '\\n';/*ç»“æœ*/5+55+5GroupFlagMeaningstd::ios::uppercaseIf set, uses upper case lettersManipulatorMeaningstd::uppercaseUses upper case lettersstd::nouppercaseUses lower case lettersä¾‹å­ï¼š1234567891011121314std::cout &lt;&lt; 12345678.9 &lt;&lt; '\\n'; std::cout.setf(std::ios::uppercase);std::cout &lt;&lt; 12345678.9 &lt;&lt; '\\n'; std::cout &lt;&lt; std::nouppercase &lt;&lt; 12345678.9 &lt;&lt; '\\n'; std::cout &lt;&lt; std::uppercase &lt;&lt; 12345678.9 &lt;&lt; '\\n';/*ç»“æœ*/1.23457e+0071.23457E+0071.23457e+0071.23457E+007GroupFlagMeaningstd::ios::basefieldstd::ios::decPrints values in decimal (default)std::ios::basefieldstd::ios::hexPrints values in hexadecimalstd::ios::basefieldstd::ios::octPrints values in octalstd::ios::basefield(none)Prints values according to leading characters of valueManipulatorMeaningstd::decPrints values in decimalstd::hexPrints values in hexadecimalstd::octPrints values in octalä¾‹å­ï¼š1234567891011121314151617181920212223std::cout &lt;&lt; 27 &lt;&lt; '\\n'; std::cout.setf(std::ios::dec, std::ios::basefield);std::cout &lt;&lt; 27 &lt;&lt; '\\n'; std::cout.setf(std::ios::oct, std::ios::basefield);std::cout &lt;&lt; 27 &lt;&lt; '\\n'; std::cout.setf(std::ios::hex, std::ios::basefield);std::cout &lt;&lt; 27 &lt;&lt; '\\n'; std::cout &lt;&lt; std::dec &lt;&lt; 27 &lt;&lt; '\\n';std::cout &lt;&lt; std::oct &lt;&lt; 27 &lt;&lt; '\\n';std::cout &lt;&lt; std::hex &lt;&lt; 27 &lt;&lt; '\\n';/*ç»“æœ*/2727331b27331bç°åœ¨ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿé€šè¿‡æ ‡è®°å’Œæ§åˆ¶å™¨æŸ¥çœ‹è®¾ç½®æ ¼å¼ä¹‹é—´çš„å…³ç³»ã€‚åœ¨ä»¥åçš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ§åˆ¶å™¨ï¼Œé™¤éå®ƒä»¬ä¸å¯ç”¨ã€‚ç²¾åº¦ã€ç¬¦å·å’Œå°æ•°ç‚¹é€šè¿‡ä½¿ç”¨æ“ä½œå™¨(æˆ–æ ‡å¿—)ï¼Œå¯ä»¥æ›´æ”¹æ˜¾ç¤ºæµ®ç‚¹æ•°çš„ç²¾åº¦å’Œæ ¼å¼ã€‚æœ‰å‡ ç§æ ¼å¼åŒ–é€‰é¡¹ä»¥æŸç§å¤æ‚çš„æ–¹å¼ç»„åˆåœ¨ä¸€èµ·ï¼Œå› æ­¤æˆ‘ä»¬å°†ä»”ç»†ç ”ç©¶è¿™ä¸ªé—®é¢˜ã€‚GroupFlagMeaningstd::ios::floatfieldstd::ios::fixedUses decimal notation for floating-point numbersstd::ios::floatfieldstd::ios::scientificUses scientific notation for floating-point numbersstd::ios::floatfield(none)Uses fixed for numbers with few digits, scientific otherwisestd::ios::floatfieldstd::ios::showpointAlways show a decimal point and trailing 0â€™s for floating-point valuesManipulatorMeaningstd::fixedUse decimal notation for valuesstd::scientificUse scientific notation for valuesstd::showpointShow a decimal point and trailing 0â€™s for floating-point valuesstd::noshowpointDonâ€™t show a decimal point and trailing 0â€™s for floating-point valuesstd::setprecision(int)Sets the precision of floating-point numbers (defined in iomanip.h)Member functionMeaningstd::precision()Returns the current precision of floating-point numbersstd::precision(int)Sets the precision of floating-point numbers and returns old precisionå¦‚æœä½¿ç”¨å›ºå®šè®°æ•°æ³•æˆ–ç§‘å­¦è®°æ•°æ³•ï¼Œåˆ™ç²¾åº¦å†³å®šäº†åœ¨åˆ†æ•°ä¸­æ˜¾ç¤ºå¤šå°‘ä½å°æ•°ã€‚æ³¨æ„ï¼Œå¦‚æœç²¾åº¦å°äºæœ‰æ•ˆæ•°å­—çš„æ•°ç›®ï¼Œåˆ™è¯¥æ•°å­—å°†å››èˆäº”å…¥ã€‚12345678910111213std::cout &lt;&lt; std::fixed &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(3) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(4) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(5) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(6) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(7) &lt;&lt; 123.456 &lt;&lt; '\\n'; std::cout &lt;&lt; std::scientific &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(3) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(4) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(5) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(6) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(7) &lt;&lt; 123.456 &lt;&lt; '\\n';ç»“æœï¼š1234567891011123.456123.4560123.45600123.456000123.45600001.235e+0021.2346e+0021.23456e+0021.234560e+0021.2345600e+002å¦‚æœæ—¢ä¸ä½¿ç”¨å›ºå®šæ•°å­—ï¼Œä¹Ÿä¸ä½¿ç”¨ç§‘å­¦æ•°å­—ï¼Œåˆ™ç²¾åº¦å†³å®šåº”æ˜¾ç¤ºå¤šå°‘ä½æœ‰æ•ˆæ•°å­—ã€‚åŒæ ·ï¼Œå¦‚æœç²¾åº¦å°äºæœ‰æ•ˆæ•°å­—çš„æ•°ç›®ï¼Œåˆ™è¯¥æ•°å­—å°†å››èˆäº”å…¥ã€‚12345std::cout &lt;&lt; std::setprecision(3) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(4) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(5) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(6) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(7) &lt;&lt; 123.456 &lt;&lt; '\\n';ç»“æœï¼š12345123123.5123.46123.456123.456ä½¿ç”¨showpointæ§åˆ¶å™¨å™¨æˆ–æ ‡è®°ï¼Œæ‚¨å¯ä»¥è®©æµ å†™å…¥å°æ•°ç‚¹å’Œå°¾éšé›¶ã€‚123456std::cout &lt;&lt; std::showpoint &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(3) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(4) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(5) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(6) &lt;&lt; 123.456 &lt;&lt; '\\n';std::cout &lt;&lt; std::setprecision(7) &lt;&lt; 123.456 &lt;&lt; '\\n';ç»“æœï¼š12345123.123.5123.46123.456123.4560ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­çš„æ€»ç»“è¡¨:OptionPrecision12345.00.12345Normal31.23e+0040.12341.235e+0040.12355123450.123456123450.12345Showpoint31.23e+0040.12341.235e+0040.1235512345.0.12345612345.00.123450Fixed312345.0000.123412345.00000.1235512345.000000.12345612345.0000000.123450Scientific31.235e+0041.235e-00141.2345e+0041.2345e-00151.23450e+0041.23450e-00161.234500e+0041.234500e-001å®½åº¦ã€å¡«å……å­—ç¬¦å’Œå¯¹é½é€šå¸¸ï¼Œå½“æ‚¨æ‰“å°æ•°å­—æ—¶ï¼Œæ•°å­—çš„æ‰“å°ä¸å‘¨å›´çš„ç©ºé—´æ— å…³ã€‚ç„¶è€Œï¼Œå‘å·¦æˆ–å‘å³æ‰“å°æ•°å­—æ˜¯å¯èƒ½çš„ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆå®šä¹‰ä¸€ä¸ªå­—æ®µå®½åº¦ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªå€¼å°†å…·æœ‰çš„è¾“å‡ºç©ºé—´çš„æ•°é‡ã€‚å¦‚æœå®é™…æ‰“å°çš„æ•°å­—å°äºå­—æ®µå®½åº¦ï¼Œå®ƒå°†è¢«å·¦å¯¹é½æˆ–å³å¯¹é½(å¦‚æŒ‡å®š)ã€‚å¦‚æœå®é™…æ•°å­—å¤§äºå­—æ®µå®½åº¦ï¼Œåˆ™ä¸ä¼šæˆªæ–­å®ƒâ€”â€”å®ƒå°†æº¢å‡ºå­—æ®µã€‚GroupFlagMeaningstd::ios::adjustfieldstd::ios::internalLeft-justifies the sign of the number, and right-justifies the valuestd::ios::adjustfieldstd::ios::leftLeft-justifies the sign and valuestd::ios::adjustfieldstd::ios::rightRight-justifies the sign and value (default)ManipulatorMeaningstd::internalLeft-justifies the sign of the number, and right-justifies the valuestd::leftLeft-justifies the sign and valuestd::rightRight-justifies the sign and valuestd::setfill(char)Sets the parameter as the fill character (defined in iomanip.h)std::setw(int)Sets the field width for input and output to the parameter (defined in iomanip.h)Member functionMeaningstd::fill()Returns the current fill characterstd::fill(char)Sets the fill character and returns the old fill characterstd::width()Returns the current field widthstd::width(int)Sets the current field width and returns old field widthä¸ºäº†ä½¿ç”¨ä»»ä½•è¿™äº›æ ¼å¼åŒ–å™¨ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»è®¾ç½®å­—æ®µå®½åº¦ã€‚è¿™å¯ä»¥é€šè¿‡width(int)æˆå‘˜å‡½æ•°æˆ–setw()æœºæ¢°æ‰‹æ¥å®Œæˆã€‚æ³¨æ„ï¼Œå³å¯¹é½æ˜¯é»˜è®¤çš„ã€‚123456789101112std::cout &lt;&lt; -12345 &lt;&lt; '\\n'; // print default value with no field widthstd::cout &lt;&lt; std::setw(10) &lt;&lt; -12345 &lt;&lt; '\\n'; // print default with field widthstd::cout &lt;&lt; std::setw(10) &lt;&lt; left &lt;&lt; -12345 &lt;&lt; '\\n'; // print left justifiedstd::cout &lt;&lt; std::setw(10) &lt;&lt; right &lt;&lt; -12345 &lt;&lt; '\\n'; // print right justifiedstd::cout &lt;&lt; std::setw(10) &lt;&lt; internal &lt;&lt; -12345 &lt;&lt; '\\n'; // print internally justified/*ç»“æœ*/-12345 -12345-12345 -12345- 12345éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œsetw()å’Œwidth()åªå½±å“ä¸‹ä¸€ä¸ªè¾“å‡ºè¯­å¥ã€‚å®ƒä»¬ä¸åƒå…¶ä»–ä¸€äº›æ ‡å¿—/æ“çºµå™¨é‚£æ ·æŒä¹…ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå¡«å……å­—ç¬¦ï¼Œå¹¶åšåŒæ ·çš„ä¾‹å­:12345678910111213std::cout.fill('*');std::cout &lt;&lt; -12345 &lt;&lt; '\\n'; // print default value with no field widthstd::cout &lt;&lt; std::setw(10) &lt;&lt; -12345 &lt;&lt; '\\n'; // print default with field widthstd::cout &lt;&lt; std::setw(10) &lt;&lt; left &lt;&lt; -12345 &lt;&lt; '\\n'; // print left justifiedstd::cout &lt;&lt; std::setw(10) &lt;&lt; right &lt;&lt; -12345 &lt;&lt; '\\n'; // print right justifiedstd::cout &lt;&lt; std::setw(10) &lt;&lt; internal &lt;&lt; -12345 &lt;&lt; '\\n'; // print internally justified/*ç»“æœ*/-12345****-12345-12345********-12345-****12345è¯·æ³¨æ„ï¼Œå­—æ®µä¸­çš„æ‰€æœ‰ç©ºæ ¼éƒ½å·²ç”¨å¡«å……å­—ç¬¦å¡«å……ã€‚ostreamç±»å’Œiostreamåº“åŒ…å«å…¶ä»–å¯èƒ½æœ‰ç”¨çš„è¾“å‡ºå‡½æ•°ã€æ ‡å¿—å’Œæ“ä½œç¬¦ï¼Œè¿™å–å†³äºæ‚¨éœ€è¦åšä»€ä¹ˆã€‚ä¸istreamç±»ä¸€æ ·ï¼Œè¿™äº›ä¸»é¢˜å®é™…ä¸Šæ›´é€‚åˆäºå…³æ³¨æ ‡å‡†åº“çš„æ•™ç¨‹æˆ–ä¹¦ç±(ä¾‹å¦‚Nicolai M. Josuttisçš„ä¼˜ç§€ä¹¦ç±ã€Šc++æ ‡å‡†æ¨¡æ¿åº“ã€‹)ã€‚","categories":[],"tags":[]},{"title":"C&C++/istreamè¾“å…¥","slug":"C&C++/istreamè¾“å…¥","date":"2020-05-27T01:28:28.965Z","updated":"2020-05-27T01:59:51.258Z","comments":true,"path":"archives/dac06bda.html","link":"","permalink":"https://longlongqin.github.io/archives/dac06bda.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/182-input-with-istream/iostreamåº“ç›¸å½“å¤æ‚â€”â€”å› æ­¤æˆ‘ä»¬æ— æ³•åœ¨æœ¬æ•™ç¨‹ä¸­å®Œæ•´åœ°ä»‹ç»å®ƒã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å°†å‘æ‚¨å±•ç¤ºæœ€å¸¸ç”¨çš„åŠŸèƒ½ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶inputç±»(istream)çš„å„ä¸ªæ–¹é¢ã€‚æå–æ“ä½œç¬¦(&gt;&gt;)æ­£å¦‚åœ¨è®¸å¤šè¯¾ç¨‹ä¸­çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æå–æ“ä½œç¬¦(&gt;&gt;)ä»è¾“å…¥æµä¸­è¯»å–ä¿¡æ¯ã€‚c++ä¸ºæ‰€æœ‰å†…ç½®æ•°æ®ç±»å‹æä¾›äº†é¢„å®šä¹‰çš„æå–æ“ä½œï¼Œæ‚¨å·²ç»äº†è§£äº†å¦‚ä½•é‡è½½è‡ªå·±ç±»çš„æå–æ“ä½œç¬¦ã€‚è¯»å–å­—ç¬¦ä¸²æ—¶ï¼Œæå–æ“ä½œç¬¦çš„ä¸€ä¸ªå¸¸è§é—®é¢˜æ˜¯å¦‚ä½•é˜²æ­¢è¾“å…¥æº¢å‡ºç¼“å†²åŒºã€‚ç»™å‡ºä»¥ä¸‹ä¾‹å­:12char buf[10];std::cin &gt;&gt; buf;å¦‚æœç”¨æˆ·è¾“å…¥18ä¸ªå­—ç¬¦ä¼šå‘ç”Ÿä»€ä¹ˆ?ç¼“å†²åŒºæº¢å‡ºï¼Œå°±ä¼šå‘ç”Ÿä¸å¥½çš„äº‹æƒ…ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹ç”¨æˆ·å°†è¾“å…¥å¤šå°‘å­—ç¬¦åšä»»ä½•å‡è®¾éƒ½ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚å¤„ç†è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æ§åˆ¶ç¬¦ã€‚æ§åˆ¶ç¬¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå½“ä½¿ç”¨æå–(&gt;&gt;)æˆ–æ’å…¥(&lt;&lt;)æ“ä½œç¬¦æ—¶ï¼Œç”¨äºä¿®æ”¹æµã€‚æ‚¨å·²ç»å¹¿æ³›ä½¿ç”¨è¿‡çš„ä¸€ä¸ªæ§åˆ¶ç¬¦æ˜¯â€œendlâ€ï¼Œå®ƒæ—¢æ‰“å°æ¢è¡Œå­—ç¬¦ï¼Œåˆåˆ·æ–°ä»»ä½•ç¼“å†²è¾“å‡ºã€‚c++æä¾›äº†ä¸€ä¸ªåä¸ºsetwçš„æœºæ¢°æ‰‹(åœ¨iomanip.hå¤´æ–‡ä»¶ä¸­)ï¼Œå®ƒå¯ä»¥ç”¨æ¥é™åˆ¶ä»æµä¸­è¯»å–çš„å­—ç¬¦çš„æ•°é‡ã€‚è¦ä½¿ç”¨setw()ï¼Œåªéœ€æä¾›ä½œä¸ºå‚æ•°è¯»å–çš„æœ€å¤§å­—ç¬¦æ•°ï¼Œå¹¶å°†å…¶æ’å…¥åˆ°æ‚¨çš„è¾“å…¥è¯­å¥ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤º:123#include &lt;iomanip.h&gt;char buf[10];std::cin &gt;&gt; std::setw(10) &gt;&gt; buf;è¿™ä¸ªç¨‹åºç°åœ¨å°†åªä»æµä¸­è¯»å–å‰9ä¸ªå­—ç¬¦(ä¸ºç»ˆæ­¢ç¬¦ç•™å‡ºç©ºé—´)ã€‚ä»»ä½•å‰©ä½™çš„å­—ç¬¦éƒ½å°†ç•™åœ¨æµä¸­ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡æå–ã€‚æå–å’Œç©ºç™½åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ²¡æœ‰æåˆ°çš„ä¸€ä»¶äº‹æ˜¯æå–æ“ä½œç¬¦å¤„ç†â€œæ ¼å¼åŒ–â€çš„æ•°æ®â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒè·³è¿‡ç©ºç™½(ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦)ã€‚çœ‹çœ‹ä¸‹é¢çš„ç¨‹åº:12345678int main()&#123; char ch; while (std::cin &gt;&gt; ch) std::cout &lt;&lt; ch; return 0;&#125;å½“ç”¨æˆ·è¾“å…¥ä»¥ä¸‹å†…å®¹æ—¶:1Hello my name is Alexæå–æ“ä½œç¬¦è·³è¿‡ç©ºæ ¼å’Œæ¢è¡Œç¬¦ã€‚å› æ­¤ï¼Œè¾“å‡ºä¸º:1HellomynameisAlexé€šå¸¸ï¼Œæ‚¨å¸Œæœ›è·å¾—ç”¨æˆ·è¾“å…¥ï¼Œä½†ä¸æ”¾å¼ƒç©ºæ ¼ã€‚ä¸ºæ­¤ï¼Œistreamç±»æä¾›äº†è®¸å¤šå¯ç”¨äºæ­¤ç›®çš„çš„å‡½æ•°ã€‚get()get()â€”â€”æœ€æœ‰ç”¨çš„å‡½æ•°ä¹‹ä¸€æ˜¯get()å‡½æ•°ï¼Œå®ƒåªä»è¾“å…¥æµä¸­è·å–ä¸€ä¸ªå­—ç¬¦ã€‚ä¸‹é¢æ˜¯ä¸Šé¢ä½¿ç”¨get()çš„åŒä¸€ä¸ªç¨‹åº:12345678910111213int main()&#123; char ch; while (std::cin.get(ch)) std::cout &lt;&lt; ch; return 0;&#125;/*ç°åœ¨å½“æˆ‘ä»¬ä½¿ç”¨è¾“å…¥:*/Hello my name is Alex/*å®ƒçš„ç»“æœæ˜¯*/Hello my name is Alexstd::get()ä¹Ÿæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç‰ˆæœ¬ï¼Œéœ€è¦è¯»å–æœ€å¤šçš„å­—ç¬¦:12345678910111213int main()&#123; char strBuf[11]; std::cin.get(strBuf, 11); std::cout &lt;&lt; strBuf &lt;&lt; '\\n'; return 0;&#125;/*ç°åœ¨å½“æˆ‘ä»¬ä½¿ç”¨è¾“å…¥:*/Hello my name is Alex/*å®ƒçš„ç»“æœæ˜¯*/Hello my næ³¨æ„ï¼Œæˆ‘ä»¬åªè¯»å–äº†å‰10ä¸ªå­—ç¬¦(å¿…é¡»ç•™ä¸‹ä¸€ä¸ªå­—ç¬¦ä½œä¸ºç»ˆæ­¢ç¬¦)ã€‚å…¶ä½™å­—ç¬¦ç•™åœ¨è¾“å…¥æµä¸­ã€‚å…³äºget()éœ€è¦æ³¨æ„çš„ä¸€ä»¶é‡è¦äº‹æƒ…æ˜¯ï¼Œå®ƒä¸è¯»å–æ¢è¡Œå­—ç¬¦! è¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ„æƒ³ä¸åˆ°çš„ç»“æœ:123456789101112int main()&#123; char strBuf[11]; // Read up to 10 characters std::cin.get(strBuf, 11); std::cout &lt;&lt; strBuf &lt;&lt; '\\n'; // Read up to 10 more characters std::cin.get(strBuf, 11); std::cout &lt;&lt; strBuf &lt;&lt; '\\n'; return 0;&#125;å¦‚æœç”¨æˆ·è¾“å…¥:1Hello!ç¨‹åºå°†æ‰“å°:1Hello!ç„¶åç»ˆæ­¢! ä¸ºä»€ä¹ˆä¸è¦æ±‚å¢åŠ 10ä¸ªå­—ç¬¦å‘¢? ç­”æ¡ˆæ˜¯ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªget()è¯»åˆ°æ¢è¡Œï¼Œç„¶ååœæ­¢ã€‚ç¬¬äºŒä¸ªget()çœ‹åˆ°cinæµä¸­ä»ç„¶æœ‰è¾“å…¥ï¼Œå¹¶è¯•å›¾è¯»å–å®ƒã€‚ä½†ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥å®ƒç«‹å³åœæ­¢ã€‚getline()å› æ­¤ï¼Œè¿˜æœ‰å¦ä¸€ä¸ªåä¸ºgetline()çš„å‡½æ•°ï¼Œå®ƒçš„å·¥ä½œæ–¹å¼ä¸get()å®Œå…¨ç›¸åŒï¼Œä½†å®ƒä¼šè¯»å–æ¢è¡Œç¬¦ã€‚123456789101112int main()&#123; char strBuf[11]; // Read up to 10 characters std::cin.getline(strBuf, 11); std::cout &lt;&lt; strBuf &lt;&lt; '\\n'; // Read up to 10 more characters std::cin.getline(strBuf, 11); std::cout &lt;&lt; strBuf &lt;&lt; '\\n'; return 0;&#125;è¿™æ®µä»£ç å°†æŒ‰ç…§æ‚¨çš„æœŸæœ›æ‰§è¡Œï¼Œå³ä½¿ç”¨æˆ·è¾“å…¥ä¸€ä¸ªå¸¦æœ‰æ¢è¡Œç¬¦çš„å­—ç¬¦ä¸²ã€‚å¦‚æœéœ€è¦çŸ¥é“getline()çš„æœ€åä¸€æ¬¡è°ƒç”¨æå–äº†å¤šå°‘å­—ç¬¦ï¼Œ ä½¿ç”¨gcount () :123456789int main()&#123; char strBuf[100]; std::cin.getline(strBuf, 100); std::cout &lt;&lt; strBuf &lt;&lt; '\\n'; std::cout &lt;&lt; std::cin.gcount() &lt;&lt; \" characters were read\" &lt;&lt; endl; return 0;&#125;ä¸€äº›æ›´æœ‰ç”¨çš„istreamå‡½æ•°è¿™é‡Œæœ‰ä¸€äº›æ›´æœ‰ç”¨çš„è¾“å…¥å‡½æ•°ï¼Œä½ å¯èƒ½æƒ³åˆ©ç”¨:ignore()ï¼šä¸¢å¼ƒæµä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦**ã€‚ignore(int nCount)ï¼šä¸¢å¼ƒç¬¬ä¸€ä¸ªnCountå­—ç¬¦ã€‚peek()ï¼šå…è®¸æ‚¨ä»æµä¸­è¯»å–å­—ç¬¦ï¼Œè€Œæ— éœ€ä»æµä¸­åˆ é™¤å­—ç¬¦ã€‚unget()ï¼šå°†æœ€åè¯»å–çš„å­—ç¬¦è¿”å›åˆ°æµä¸­ï¼Œä»¥ä¾¿ä¸‹ä¸€ä¸ªè°ƒç”¨å¯ä»¥å†æ¬¡è¯»å–å®ƒã€‚putback(char ch)ï¼šå…è®¸æ‚¨å°†é€‰æ‹©çš„å­—ç¬¦æ”¾å›æµä¸­ï¼Œä»¥ä¾¿ä¸‹ä¸€æ¬¡è°ƒç”¨è¯»å–ã€‚istreamåŒ…å«äº†è®¸å¤šå…¶ä»–çš„å‡½æ•°å’Œä¸Šé¢æåˆ°çš„å‡½æ•°çš„å˜ä½“ï¼Œå®ƒä»¬å¯èƒ½æ˜¯æœ‰ç”¨çš„ï¼Œè¿™å–å†³äºä½ éœ€è¦åšä»€ä¹ˆã€‚ä½†æ˜¯ï¼Œè¿™äº›ä¸»é¢˜æ›´é€‚åˆäºå…³æ³¨æ ‡å‡†åº“çš„æ•™ç¨‹æˆ–ä¹¦ç±ï¼ˆå¦‚ â€œThe C++ Standard Libraryâ€ by Nicolai M. Josuttisï¼‰","categories":[],"tags":[]},{"title":"C&C++/è¾“å…¥è¾“å‡º(IO)æµ","slug":"C&C++/è¾“å…¥è¾“å‡º(IO)æµ","date":"2020-05-27T00:43:46.335Z","updated":"2020-05-27T01:17:58.901Z","comments":true,"path":"archives/57266241.html","link":"","permalink":"https://longlongqin.github.io/archives/57266241.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/181-input-and-output-io-streams/è¾“å…¥å’Œè¾“å‡ºåŠŸèƒ½ä¸æ˜¯ä½œä¸ºæ ¸å¿ƒc++è¯­è¨€çš„ä¸€éƒ¨åˆ†å®šä¹‰çš„ï¼Œè€Œæ˜¯é€šè¿‡c++æ ‡å‡†åº“æä¾›çš„ (å› æ­¤é©»ç•™åœ¨stdåç§°ç©ºé—´ä¸­)ã€‚åœ¨ä»¥å‰çš„è¯¾ç¨‹ä¸­ï¼Œæ‚¨åŒ…æ‹¬äº†iostreamåº“å¤´ï¼Œå¹¶ä½¿ç”¨cinå’Œcoutå¯¹è±¡æ¥æ‰§è¡Œç®€å•çš„I/Oã€‚åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°äº†è§£iostreamåº“ã€‚iostreamåº“å½“æ‚¨åŒ…å«iostreamæŠ¥å¤´æ—¶ï¼Œæ‚¨å¯ä»¥è®¿é—® è´Ÿè´£æä¾›I/OåŠŸèƒ½çš„æ•´ä¸ªç±»å±‚æ¬¡ç»“æ„ (åŒ…æ‹¬ä¸€ä¸ªå®é™…åä¸ºiostreamçš„ç±»)ã€‚éæ–‡ä»¶ I/Oç±»çš„ç±»å±‚æ¬¡ç»“æ„å¦‚ä¸‹:å…³äºè¿™ä¸ªå±‚æ¬¡ç»“æ„ï¼Œæ‚¨å¯èƒ½æ³¨æ„åˆ°çš„ç¬¬ä¸€ä»¶äº‹æ˜¯å®ƒä½¿ç”¨äº†å¤šé‡ç»§æ‰¿(æˆ‘ä»¬å‘Šè¯‰æ‚¨å°½å¯èƒ½é¿å…çš„äº‹æƒ…)ã€‚ä½†æ˜¯ï¼Œä¸ºäº†é¿å…ä»»ä½•å…¸å‹çš„å¤šé‡ç»§æ‰¿é—®é¢˜ï¼Œå·²ç»è®¾è®¡å¹¶å¹¿æ³›æµ‹è¯•äº†iostreamåº“ï¼Œæ‰€ä»¥æ‚¨å¯ä»¥è‡ªç”±åœ°ä½¿ç”¨å®ƒã€‚æµ(Streams)ä½ å¯èƒ½æ³¨æ„åˆ°çš„ç¬¬äºŒä»¶äº‹æ˜¯ï¼Œâ€œæµâ€è¿™ä¸ªè¯ä½¿ç”¨å¾—éå¸¸é¢‘ç¹ã€‚åœ¨æœ€åŸºæœ¬çš„æ–¹é¢ï¼Œc++ä¸­çš„I/Oæ˜¯ç”¨æµå®ç°çš„ã€‚æŠ½è±¡åœ°è¯´ï¼Œæµå°±æ˜¯å¯ä»¥æŒ‰é¡ºåºè®¿é—®çš„å­—èŠ‚åºåˆ—ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæµå¯èƒ½äº§ç”Ÿæˆ–æ¶ˆè€—æ— é™æ•°é‡çš„æ•°æ®ã€‚é€šå¸¸æˆ‘ä»¬å¤„ç†ä¸¤ç§ä¸åŒç±»å‹çš„æµï¼šè¾“å…¥æµç”¨äºä¿å­˜æ¥è‡ªæ•°æ®ç”Ÿæˆå™¨ (å¦‚é”®ç›˜ã€æ–‡ä»¶æˆ–ç½‘ç»œ)çš„è¾“å…¥ã€‚ä¾‹å¦‚ï¼Œå½“ç¨‹åºå½“å‰ä¸æœŸæœ›ä»»ä½•è¾“å…¥æ—¶ï¼Œç”¨æˆ·å¯ä»¥æŒ‰é”®ç›˜ä¸Šçš„ä¸€ä¸ªé”®ã€‚è€Œä¸æ˜¯å¿½ç•¥ç”¨æˆ·çš„æŒ‰é”®ï¼Œæ•°æ®è¢«æ”¾å…¥ä¸€ä¸ªè¾“å…¥æµï¼Œåœ¨é‚£é‡Œå®ƒå°†ç­‰å¾…ï¼Œç›´åˆ°ç¨‹åºä¸ºå®ƒå‡†å¤‡å¥½ã€‚ç›¸åï¼Œè¾“å‡ºæµç”¨äºä¿å­˜ç‰¹å®šæ•°æ®ä½¿ç”¨è€… (å¦‚ç›‘è§†å™¨ã€æ–‡ä»¶æˆ–æ‰“å°æœº)çš„è¾“å‡ºã€‚å½“å‘è¾“å‡ºè®¾å¤‡å†™å…¥æ•°æ®æ—¶ï¼Œè®¾å¤‡å¯èƒ½è¿˜æ²¡æœ‰å‡†å¤‡å¥½æ¥å—è¯¥æ•°æ®â€”â€”ä¾‹å¦‚ï¼Œå½“ç¨‹åºå°†æ•°æ®å†™å…¥å…¶è¾“å‡ºæµæ—¶ï¼Œæ‰“å°æœºå¯èƒ½ä»ç„¶å¤„äºé¢„çƒ­çŠ¶æ€ã€‚è¿™äº›æ•°æ®å°†ä¿å­˜åœ¨è¾“å‡ºæµä¸­ï¼Œç›´åˆ°æ‰“å°æœºå¼€å§‹ä½¿ç”¨å®ƒã€‚ä¸€äº›è®¾å¤‡ï¼Œå¦‚æ–‡ä»¶å’Œç½‘ç»œï¼Œå¯ä»¥åŒæ—¶ä½œä¸ºè¾“å…¥æºå’Œè¾“å‡ºæºã€‚æµçš„å¥½å¤„æ˜¯ç¨‹åºå‘˜åªéœ€è¦å­¦ä¹ å¦‚ä½•ä¸æµäº¤äº’ï¼Œå°±å¯ä»¥å°†æ•°æ®è¯»å†™åˆ°è®¸å¤šä¸åŒçš„è®¾å¤‡ä¸Šã€‚æµå¦‚ä½•ä¸å®ƒä»¬æ‰€è¿æ¥çš„å®é™…è®¾å¤‡è¿›è¡Œæ¥å£çš„è¯¦ç»†ä¿¡æ¯ç”±ç¯å¢ƒæˆ–æ“ä½œç³»ç»Ÿå†³å®šã€‚åœ¨c++ä¸­çš„è¾“å…¥/è¾“å‡ºè™½ç„¶iosç±»é€šå¸¸æ´¾ç”Ÿè‡ªios_baseç±»ï¼Œä½†ios é€šå¸¸æ˜¯æ‚¨å°†ç›´æ¥ä½¿ç”¨çš„æœ€åŸºæœ¬çš„ç±»ã€‚iosç±»å®šä¹‰äº†ä¸€äº›è¾“å…¥æµå’Œè¾“å‡ºæµå…±æœ‰çš„ä¸œè¥¿ã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„è¯¾ç¨‹ä¸­è®¨è®ºè¿™äº›å†…å®¹ã€‚istreamç±»æ˜¯å¤„ç†è¾“å…¥æµæ—¶ä½¿ç”¨çš„ä¸»è¦ç±»ã€‚å¯¹äºè¾“å…¥æµï¼Œæå–æ“ä½œç¬¦(&gt;&gt;) ç”¨äºä»æµä¸­åˆ é™¤å€¼ã€‚ è¿™æ˜¯æœ‰æ„ä¹‰çš„:å½“ç”¨æˆ·åœ¨é”®ç›˜ä¸ŠæŒ‰ä¸‹ä¸€ä¸ªé”®æ—¶ï¼Œé”®ä»£ç å°±è¢«æ”¾ç½®åœ¨è¾“å…¥æµä¸­ã€‚ç„¶åï¼Œç¨‹åºä»æµä¸­æå–å€¼ï¼Œä»¥ä¾¿ä½¿ç”¨å®ƒã€‚ostreamç±»æ˜¯å¤„ç†è¾“å‡ºæµæ—¶ä½¿ç”¨çš„ä¸»è¦ç±»ã€‚å¯¹äºè¾“å‡ºæµï¼Œä½¿ç”¨æ’å…¥æ“ä½œç¬¦(&lt;&lt;)å°†å€¼æ”¾å…¥æµä¸­ã€‚è¿™ä¹Ÿæ˜¯æœ‰æ„ä¹‰çš„:æ‚¨å°†æ‚¨çš„å€¼æ’å…¥åˆ°æµä¸­ï¼Œæ•°æ®ä½¿ç”¨è€…(ä¾‹å¦‚ã€‚ç›‘æ§)ä½¿ç”¨ã€‚iostreamç±»å¯ä»¥å¤„ç†è¾“å…¥å’Œè¾“å‡ºï¼Œå…è®¸åŒå‘I/Oã€‚æœ€åï¼Œæœ‰ä¸€å †ç±»ä»¥â€œ_withassignâ€ç»“æŸã€‚è¿™äº› æµç±» æ´¾ç”Ÿè‡ªistreamã€ostreamå’Œiostream (åˆ†åˆ«)ï¼Œå¹¶å®šä¹‰äº†èµ‹å€¼è¿ç®—ç¬¦ï¼Œå…è®¸æ‚¨å°†ä¸€ä¸ªæµåˆ†é…ç»™å¦ä¸€ä¸ªæµã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨ä¸ä¼šç›´æ¥å¤„ç†è¿™äº›ç±»ã€‚c++ä¸­çš„æ ‡å‡†æµæ ‡å‡†æµæ˜¯ç”±ç¯å¢ƒæä¾›ç»™è®¡ç®—æœºç¨‹åºçš„é¢„å…ˆè¿æ¥çš„æµã€‚c++é™„å¸¦äº†å››ä¸ªé¢„å®šä¹‰çš„æ ‡å‡†æµå¯¹è±¡ï¼Œå®ƒä»¬å·²ç»ä¸ºæ‚¨çš„ä½¿ç”¨è¿›è¡Œäº†è®¾ç½®ã€‚cinâ€”â€”ä¸æ ‡å‡†è¾“å…¥(é€šå¸¸æ˜¯é”®ç›˜)ç»‘å®šçš„ istream_withassignç±»coutâ€”â€”ä¸æ ‡å‡†è¾“å‡º(é€šå¸¸æ˜¯ç›‘è§†å™¨)ç»‘å®šçš„ostream_withassignç±»cerrâ€”â€” ä¸€ä¸ªä¸æ ‡å‡†é”™è¯¯(é€šå¸¸æ˜¯ç›‘è§†å™¨)ç»‘å®šçš„ostream_withassignç±»ï¼Œæä¾› æœªç¼“å†² çš„è¾“å‡ºclogâ€”â€” ä¸€ä¸ªä¸æ ‡å‡†é”™è¯¯(é€šå¸¸æ˜¯ç›‘è§†å™¨)ç»‘å®šçš„ostream_withassignç±»ï¼Œæä¾›ç¼“å†² è¾“å‡ºéç¼“å†²è¾“å‡ºé€šå¸¸æ˜¯ç«‹å³å¤„ç†çš„ï¼Œè€Œç¼“å†²è¾“å‡ºé€šå¸¸æ˜¯ä½œä¸ºä¸€ä¸ªå—å­˜å‚¨å’Œå†™å…¥çš„ã€‚å› ä¸ºclogä¸æ˜¯ç»å¸¸ä½¿ç”¨ï¼Œæ‰€ä»¥å®ƒå¸¸å¸¸ä»æ ‡å‡†æµåˆ—è¡¨ä¸­è¢«çœç•¥ã€‚","categories":[],"tags":[]},{"title":"C&C++/stdï¼šï¼šstringçš„æ’å…¥","slug":"C&C++/stdï¼šï¼šstringçš„æ’å…¥","date":"2020-05-26T15:14:08.036Z","updated":"2020-05-26T15:18:25.497Z","comments":true,"path":"archives/e56a544e.html","link":"","permalink":"https://longlongqin.github.io/archives/e56a544e.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/17-7-stdstring-inserting/å¯ä»¥é€šè¿‡insert()å‡½æ•°å°†å­—ç¬¦æ’å…¥åˆ°ç°æœ‰çš„å­—ç¬¦ä¸²ä¸­ã€‚string&amp; string::insert (size_type index, const string&amp; str)string&amp; string::insert (size_type index, const char* str)è¿™ä¸¤ä¸ªå‡½æ•°éƒ½å°†strçš„å­—ç¬¦æ’å…¥åˆ°ç´¢å¼•å¤„çš„å­—ç¬¦ä¸²ä¸­ä¸¤ä¸ªå‡½æ•°éƒ½è¿”å›*thisï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢«â€œé“¾æ¥â€ã€‚å¦‚æœç´¢å¼•æ— æ•ˆï¼Œä¸¤ä¸ªå‡½æ•°éƒ½ä¼šæŠ›å‡ºout_of_rangeå¦‚æœç»“æœè¶…è¿‡æœ€å¤§å­—ç¬¦æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªlength_errorå¼‚å¸¸ã€‚åœ¨cé£æ ¼çš„å­—ç¬¦ä¸²ç‰ˆæœ¬ä¸­ï¼Œsträ¸èƒ½ä¸ºç©ºã€‚å¦‚ï¼š12345678string sString(\"aaaa\");cout &lt;&lt; sString &lt;&lt; endl; sString.insert(2, string(\"bbbb\"));cout &lt;&lt; sString &lt;&lt; endl; sString.insert(4, \"cccc\");cout &lt;&lt; sString &lt;&lt; endl;ç»“æœï¼š123aaaaaabbbbaaaabbccccbbaaä¸‹é¢ï¼Œå°†åªç»™å‡ºå‡½æ•°çš„å£°æ˜ï¼Œå…·ä½“è§£é‡Šï¼Œè¯·çœ‹åŸæ–‡å¯¹åº”å†…å®¹ï¼šstring&amp; string::insert (size_type index, const string&amp; str, size_type startindex, size_type num)string&amp; string::insert(size_type index, const char* str, size_type len)string&amp; string::insert(size_type index, size_type num, char c)void insert(iterator it, size_type num, char c)iterator string::insert(iterator it, char c)void string::insert(iterator it, InputIterator begin, InputIterator end)","categories":[],"tags":[]},{"title":"C&C++/stdï¼šï¼šstringçš„æœ«å°¾è¿½åŠ å­—ç¬¦ä¸²","slug":"C&C++/stdï¼šï¼šstringçš„æœ«å°¾è¿½åŠ å­—ç¬¦ä¸²","date":"2020-05-26T14:50:42.447Z","updated":"2020-05-26T15:12:56.340Z","comments":true,"path":"archives/54babab5.html","link":"","permalink":"https://longlongqin.github.io/archives/54babab5.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/17-6-stdstring-appending/ä½¿ç”¨è¿ç®—ç¬¦+=ã€append()æˆ–push_back()å‡½æ•°å¯ä»¥å¾ˆå®¹æ˜“åœ°å°†å­—ç¬¦ä¸²è¿½åŠ åˆ°ç°æœ‰å­—ç¬¦ä¸²çš„æœ«å°¾ã€‚string&amp; string::operator+= (const string&amp; str)string&amp; string::append (const string&amp; str)è¿™ä¸¤ä¸ªå‡½æ•°éƒ½å°†strçš„å­—ç¬¦è¿½åŠ åˆ°å­—ç¬¦ä¸²ä¸­ã€‚ä¸¤ä¸ªå‡½æ•°éƒ½è¿”å›*thisï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢«â€œé“¾æ¥â€ã€‚å¦‚æœç»“æœè¶…è¿‡æœ€å¤§å­—ç¬¦æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªlength_errorå¼‚å¸¸ã€‚å¦‚ï¼š12345678string sString(\"one\"); sString += string(\" two\"); string sThree(\" three\");sString.append(sThree); cout &lt;&lt; sString &lt;&lt; endl;ç»“æœï¼š1one two threeè¿˜æœ‰ä¸€ç§append()æ–¹æ³•å¯ä»¥é™„åŠ å­å­—ç¬¦ä¸²:string&amp; string::append (const string&amp; str, size_type index, size_type num)è¿™ä¸ªå‡½æ•°å°†ä»strå¼€å§‹çš„numå­—ç¬¦è¿½åŠ åˆ°å­—ç¬¦ä¸²ã€‚è¿”å›*thisï¼Œè¿™æ ·å®ƒå¯ä»¥è¢«â€œé“¾æ¥â€ã€‚å¦‚æœç´¢å¼•è¶…å‡ºèŒƒå›´ï¼Œåˆ™æŠ›å‡ºout_of_rangeå¦‚æœç»“æœè¶…è¿‡æœ€å¤§å­—ç¬¦æ•°ï¼Œåˆ™æŠ›å‡ºlength_errorå¼‚å¸¸ã€‚å¦‚ï¼š12345string sString(\"one \"); const string sTemp(\"twothreefour\");sString.append(sTemp, 3, 5); // append substring of sTemp starting at index 3 of length 5cout &lt;&lt; sString &lt;&lt; endl;ç»“æœï¼š1one threeè¿ç®—ç¬¦+=å’Œappend()ä¹Ÿæœ‰å¤„ç†cé£æ ¼å­—ç¬¦ä¸²çš„ç‰ˆæœ¬:string&amp; string::operator+= (const char* str)string&amp; string::append (const char* str)è¿™ä¸¤ä¸ªå‡½æ•°éƒ½å°†strçš„å­—ç¬¦è¿½åŠ åˆ°å­—ç¬¦ä¸²ä¸­ã€‚ä¸¤ä¸ªå‡½æ•°éƒ½è¿”å›*thisï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢«â€œé“¾æ¥â€ã€‚å¦‚æœç»“æœè¶…è¿‡æœ€å¤§å­—ç¬¦æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šæŠ›å‡ºä¸€ä¸ªlength_errorå¼‚å¸¸ã€‚strä¸åº”è¯¥ä¸ºç©ºã€‚å¦‚ï¼š12345string sString(\"one\"); sString += \" two\";sString.append(\" three\");cout &lt;&lt; sString &lt;&lt; endl;ç»“æœï¼š1one two threeä¸‹é¢è¿˜æœ‰å¾ˆå¤šï¼Œå°†åªç»™å‡ºå…¶å£°æ˜ï¼Œå…·ä½“è§£é‡Šï¼Œè¯·çœ‹åŸæ•™ç¨‹å¯¹åº”å†…å®¹ï¼šstring&amp; string::append (const char* str, size_type len)string&amp; string::operator+= (char c)void string::push_back (char c)string&amp; string::append (size_type num, char c)string&amp; string::append (InputIterator start, InputIterator end)","categories":[],"tags":[]},{"title":"C&C++/stdï¼šï¼šstringçš„èµ‹å€¼ ä¸ äº¤æ¢","slug":"C&C++/stdï¼šï¼šstringçš„èµ‹å€¼ ä¸ äº¤æ¢","date":"2020-05-26T14:34:12.818Z","updated":"2020-05-26T14:49:37.863Z","comments":true,"path":"archives/6b2ecf81.html","link":"","permalink":"https://longlongqin.github.io/archives/6b2ecf81.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/17-5-stdstring-assignment-and-swapping/å­—ç¬¦ä¸²èµ‹å€¼ç»™å­—ç¬¦ä¸²èµ‹å€¼çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨é‡è½½çš„è¿ç®—ç¬¦=å‡½æ•°ã€‚è¿˜æœ‰ä¸€ä¸ªassign()æˆå‘˜å‡½æ•°ï¼Œå®ƒå¤åˆ¶äº†æŸäº›åŠŸèƒ½ã€‚string&amp; string::operator= (const string&amp; str)string&amp; string::assign (const string&amp; str)string&amp; string::operator= (const char* str)string&amp; string::assign (const char* str)string&amp; string::operator= (char c)è¿™äº›å‡½æ•°å°†å„ç§ç±»å‹çš„å€¼èµ‹ç»™å­—ç¬¦ä¸²ã€‚è¿™äº›å‡½æ•°è¿”å›*thisï¼Œå› æ­¤å®ƒä»¬å¯ä»¥è¢«â€œé“¾æ¥â€ã€‚æ³¨æ„ï¼Œä¸å­˜åœ¨æ¥å—å•ä¸ªå­—ç¬¦çš„assign()å‡½æ•°ã€‚å¦‚ï¼š12345678910111213141516171819202122232425string sString; // Assign a string valuesString = string(\"One\");cout &lt;&lt; sString &lt;&lt; endl; const string sTwo(\"Two\");sString.assign(sTwo);cout &lt;&lt; sString &lt;&lt; endl; // Assign a C-style stringsString = \"Three\";cout &lt;&lt; sString &lt;&lt; endl; sString.assign(\"Four\");cout &lt;&lt; sString &lt;&lt; endl; // Assign a charsString = '5';cout &lt;&lt; sString &lt;&lt; endl; // Chain assignmentstring sOther;sString = sOther = \"Six\";cout &lt;&lt; sString &lt;&lt; \" \" &lt;&lt; sOther &lt;&lt; endl;ç»“æœï¼š123456OneTwoThreeFour5Six Sixassign()æˆå‘˜å‡½æ•°ä¹Ÿæœ‰å…¶ä»–ä¸€äº›ç‰ˆæœ¬string&amp; string::assign (const string&amp; str, size_type index, size_type len)èµ‹å€¼ä¸€ä¸ªstrçš„å­å­—ç¬¦ä¸²ï¼Œä»indexå¼€å§‹ï¼Œé•¿åº¦ä¸ºlenå¦‚æœç´¢å¼•è¶…å‡ºèŒƒå›´ï¼Œåˆ™æŠ›å‡ºout_of_rangeå¼‚å¸¸è¿”å›*thisï¼Œè¿™æ ·å®ƒå¯ä»¥è¢«â€œé“¾æ¥â€ã€‚å¦‚ï¼š12345const string sSource(\"abcdefg\");string sDest; sDest.assign(sSource, 2, 4); // assign a substring of source from index 2 of length 4cout &lt;&lt; sDest &lt;&lt; endl;ç»“æœï¼š1cdefstring&amp; string::assign (const char\\* chars, size_type len)ä»cé£æ ¼çš„æ•°ç»„å­—ç¬¦ä¸­åˆ†é…lenå­—ç¬¦å¦‚æœç»“æœè¶…è¿‡æœ€å¤§å­—ç¬¦æ•°ï¼Œåˆ™æŠ›å‡ºlength_errorå¼‚å¸¸è¿”å›*thisï¼Œè¿™æ ·å®ƒå¯ä»¥è¢«â€œé“¾æ¥â€ã€‚å¦‚ï¼š1234string sDest; sDest.assign(\"abcdefg\", 4);cout &lt;&lt; sDest &lt;&lt; endl;ç»“æœï¼š1abcdè¿™ä¸ªå‡½æ•°æœ‰æ½œåœ¨çš„å±é™©ï¼Œä¸å»ºè®®ä½¿ç”¨å®ƒã€‚string&amp; string::assign (size_type len, char c)ä½¿ç”¨lenä¸ªå­—ç¬¦c æ¥èµ‹å€¼å¦‚æœç»“æœè¶…è¿‡æœ€å¤§å­—ç¬¦æ•°ï¼Œåˆ™æŠ›å‡ºlength_errorå¼‚å¸¸è¿”å›*thisï¼Œè¿™æ ·å®ƒå¯ä»¥è¢«â€œé“¾æ¥â€ã€‚å¦‚ï¼š1234string sDest; sDest.assign(4, 'g');cout &lt;&lt; sDest &lt;&lt; endl;ç»“æœï¼š1ggggäº¤æ¢å¦‚æœæœ‰ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å¸Œæœ›äº¤æ¢å®ƒä»¬çš„å€¼ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªåä¸ºswap()çš„å‡½æ•°ã€‚void string::swap (string &amp;str)void swap (string &amp;str1, string &amp;str2)ä¸¤ä¸ªå‡½æ•°äº¤æ¢ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å€¼ã€‚æˆå‘˜å‡½æ•°äº¤æ¢thiså’Œstrï¼Œ*å…¨å±€å‡½æ•°**äº¤æ¢str1å’Œstr2ã€‚è¿™äº›å‡½æ•°æ˜¯æœ‰æ•ˆçš„ï¼Œåº”è¯¥ç”¨æ¥ä»£æ›¿èµ‹å€¼æ¥æ‰§è¡Œå­—ç¬¦ä¸²äº¤æ¢ã€‚å¦‚ï¼š12345678string sStr1(\"red\");string sStr2(\"blue\"); cout &lt;&lt; sStr1 &lt;&lt; \" \" &lt;&lt; sStr2 &lt;&lt; endl;swap(sStr1, sStr2);cout &lt;&lt; sStr1 &lt;&lt; \" \" &lt;&lt; sStr2 &lt;&lt; endl;sStr1.swap(sStr2);cout &lt;&lt; sStr1 &lt;&lt; \" \" &lt;&lt; sStr2 &lt;&lt; endl;ç»“æœï¼š123red blueblue redred blue","categories":[],"tags":[]},{"title":"C&C++/stdï¼šï¼šstringçš„å­—ç¬¦è®¿é—® åŠ è½¬æ¢ä¸ºCé£æ ¼æ•°ç»„","slug":"C&C++/stdï¼šï¼šstringçš„å­—ç¬¦è®¿é—® åŠ è½¬æ¢ä¸ºCé£æ ¼æ•°ç»„","date":"2020-05-26T14:04:03.302Z","updated":"2020-05-26T14:32:56.148Z","comments":true,"path":"archives/a3edb06.html","link":"","permalink":"https://longlongqin.github.io/archives/a3edb06.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/17-4-stdstring-character-access-and-conversion-to-c-style-arrays/è®¿é—®å­—ç¬¦é‡è½½è¿ç®—ç¬¦[]æœ‰ä¸¤ç§å‡ ä¹ç›¸åŒçš„æ–¹æ³•æ¥è®¿é—®å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚æ›´å®¹æ˜“ä½¿ç”¨å’Œæ›´å¿«çš„ç‰ˆæœ¬æ˜¯é‡è½½è¿ç®—ç¬¦[]:char&amp; string::operator[] (size_type nIndex)const char&amp; string::operator[] (size_type nIndex) constè¿™ä¸¤ä¸ªå‡½æ•°éƒ½è¿”å›å¸¦æœ‰ç´¢å¼•nIndexçš„å­—ç¬¦ä¼ é€’æ— æ•ˆç´¢å¼•å°†å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºä½¿ç”¨length()ä½œä¸ºç´¢å¼•ä»…å¯¹constå­—ç¬¦ä¸²æœ‰æ•ˆï¼Œå¹¶è¿”å›ç”±å­—ç¬¦ä¸²çš„é»˜è®¤æ„é€ å‡½æ•°ç”Ÿæˆçš„å€¼ã€‚ä¸å»ºè®®æ‚¨è¿™æ ·åšã€‚å› ä¸ºchar&amp;æ˜¯è¿”å›ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨å®ƒç¼–è¾‘æ•°ç»„ä¸­çš„å­—ç¬¦å¦‚ï¼š1234std::string sSource&#123; \"abcdefg\" &#125;;std::cout &lt;&lt; sSource[5] &lt;&lt; '\\n';sSource[5] = 'X';std::cout &lt;&lt; sSource &lt;&lt; '\\n';ç»“æœï¼š12fabcdeXgéæ“ä½œç¬¦ç‰ˆæœ¬è¿˜æœ‰ä¸€ä¸ªéæ“ä½œç¬¦ç‰ˆæœ¬ã€‚è¿™ä¸ªç‰ˆæœ¬æ¯”è¾ƒæ…¢ï¼Œå› ä¸ºå®ƒä½¿ç”¨å¼‚å¸¸æ¥æ£€æŸ¥nIndexæ˜¯å¦æœ‰æ•ˆã€‚å¦‚æœä½ ä¸ç¡®å®šnIndexæ˜¯å¦æœ‰æ•ˆï¼Œä½ åº”è¯¥ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬æ¥è®¿é—®æ•°ç»„:char&amp; string::at (size_type nIndex)const char&amp; string::at (size_type nIndex) constè¿™ä¸¤ä¸ªå‡½æ•°éƒ½è¿”å›å¸¦æœ‰ç´¢å¼•nIndexçš„å­—ç¬¦ä¼ é€’æ— æ•ˆç´¢å¼•å°†å¯¼è‡´out_of_rangeå¼‚å¸¸å› ä¸ºchar&amp;æ˜¯è¿”å›ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨å®ƒç¼–è¾‘æ•°ç»„ä¸­çš„å­—ç¬¦å¦‚ï¼š1234std::string sSource&#123; \"abcdefg\" &#125;;std::cout &lt;&lt; sSource.at(5) &lt;&lt; '\\n';sSource.at(5) = 'X';std::cout &lt;&lt; sSource &lt;&lt; '\\n';è½¬æ¢ä¸ºcé£æ ¼çš„æ•°ç»„è®¸å¤šå‡½æ•°(åŒ…æ‹¬æ‰€æœ‰Cå‡½æ•°)éƒ½å¸Œæœ›å°†å­—ç¬¦ä¸²æ ¼å¼åŒ–ä¸ºCé£æ ¼çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯std::stringã€‚ç”±äºè¿™ä¸ªåŸå› ï¼Œstd::stringæä¾›äº†3ç§ä¸åŒçš„æ–¹æ³•æ¥å°†std::stringè½¬æ¢æˆcé£æ ¼çš„å­—ç¬¦ä¸²ã€‚const char* string::c_str () const â­ã€æ¨èã€‘ä»¥const cé£æ ¼çš„å­—ç¬¦ä¸²è¿”å›å­—ç¬¦ä¸²çš„å†…å®¹å°†è¿½åŠ ä¸€ä¸ªç©ºç»ˆæ­¢ç¬¦cé£æ ¼çš„å­—ç¬¦ä¸²å±äºstd::stringï¼Œä¸åº”è¯¥è¢«åˆ é™¤å¦‚ï¼š12std::string sSource&#123; \"abcdefg\" &#125;;std::cout &lt;&lt; std::strlen(sSource.c_str());ç»“æœï¼š17const char* string::data () constä»¥const cé£æ ¼çš„å­—ç¬¦ä¸²è¿”å›å­—ç¬¦ä¸²çš„å†…å®¹å°†è¿½åŠ ä¸€ä¸ªç©ºç»ˆæ­¢ç¬¦ã€‚è¿™ä¸ªå‡½æ•°æ‰§è¡Œçš„æ“ä½œä¸c_str()ç›¸åŒcé£æ ¼çš„å­—ç¬¦ä¸²å±äºstd::stringï¼Œä¸åº”è¯¥è¢«åˆ é™¤å¦‚ï¼š12345678std::string sSource&#123; \"abcdefg\" &#125;;const char *szString&#123; \"abcdefg\" &#125;;// æ¯”è¾ƒä¸¤ä¸ªcæ ·å¼å­—ç¬¦ä¸²çš„å‰nä¸ªå­—ç¬¦ï¼Œå¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œåˆ™è¿”å›0if (std::memcmp(sSource.data(), szString, sSource.length()) == 0) std::cout &lt;&lt; \"The strings are equal\";else std::cout &lt;&lt; \"The strings are not equal\";ç»“æœï¼š1The strings are equalsize_type string::copy(char *szBuf, size_type nLength) constsize_type string::copy(char *szBuf, size_type nLength, size_type nIndex) constè¿™ä¸¤ç§é£æ ¼éƒ½å°†å­—ç¬¦ä¸²çš„æœ€å¤šnLengthå­—ç¬¦å¤åˆ¶åˆ°szBufï¼Œä»å­—ç¬¦nIndexå¼€å§‹è¿”å›å¤åˆ¶çš„å­—ç¬¦æ•°æ²¡æœ‰ç©ºå€¼è¢«è¿½åŠ ã€‚ç”±è°ƒç”¨è€…è´Ÿè´£ç¡®ä¿szBufè¢«åˆå§‹åŒ–ä¸ºNULLæˆ–ä½¿ç”¨è¿”å›çš„é•¿åº¦ç»ˆæ­¢å­—ç¬¦ä¸²è°ƒç”¨è€…è´Ÿè´£ä¸æº¢å‡ºszBufå¦‚ï¼š1234567std::string sSource&#123; \"sphinx of black quartz, judge my vow\" &#125;; char szBuf[20];int nLength&#123; static_cast&lt;int&gt;(sSource.copy(szBuf, 5, 10)) &#125;;szBuf[nLength] = '\\0'; // ç¡®ä¿ç»ˆæ­¢ç¼“å†²åŒºä¸­çš„å­—ç¬¦ä¸² std::cout &lt;&lt; szBuf &lt;&lt; '\\n';ç»“æœï¼š1blacké™¤éæ‚¨éœ€è¦å……åˆ†åˆ©ç”¨æ•ˆç‡ï¼Œå¦åˆ™c_str()æ˜¯è¿™ä¸‰ä¸ªå‡½æ•°ä¸­æœ€ç®€å•ã€æœ€å®‰å…¨çš„ä¸€ä¸ªã€‚","categories":[],"tags":[]},{"title":"C&C++/stdï¼šï¼šstringé•¿åº¦å’Œå®¹é‡","slug":"C&C++/stdï¼šï¼šstringé•¿åº¦å’Œå®¹é‡","date":"2020-05-26T09:30:48.856Z","updated":"2020-05-26T14:01:51.473Z","comments":true,"path":"archives/cc14dac2.html","link":"","permalink":"https://longlongqin.github.io/archives/cc14dac2.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/17-3-stdstring-length-and-capacity/ä¸€æ—¦åˆ›å»ºäº†å­—ç¬¦ä¸²ï¼Œäº†è§£å®ƒä»¬çš„é•¿åº¦é€šå¸¸æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚è¿™å°±æ˜¯é•¿åº¦å’Œå®¹é‡æ“ä½œå‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚æˆ‘ä»¬è¿˜å°†è®¨è®ºå°†std::stringè½¬æ¢å›cé£æ ¼å­—ç¬¦ä¸²çš„å„ç§æ–¹æ³•ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥å°†å®ƒä»¬ç”¨äºéœ€è¦char*ç±»å‹çš„å­—ç¬¦ä¸²çš„å‡½æ•°ã€‚å­—ç¬¦ä¸²é•¿åº¦å­—ç¬¦ä¸²çš„é•¿åº¦éå¸¸ç®€å•â€”â€”å®ƒæ˜¯å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ•°ã€‚ç¡®å®šå­—ç¬¦ä¸²é•¿åº¦æœ‰ä¸¤ä¸ªç›¸åŒçš„å‡½æ•°:size_type string::length() constsize_type string::size() constè¿™ä¸¤ä¸ªå‡½æ•°éƒ½è¿”å›å­—ç¬¦ä¸²ä¸­çš„å½“å‰å­—ç¬¦æ•°(ä¸åŒ…æ‹¬nullç»ˆæ­¢ç¬¦)ã€‚12string sSource(\"012345678\");cout &lt;&lt; sSource.length() &lt;&lt; endl;ç¡®å®šå­—ç¬¦ä¸²æ˜¯å¦æœ‰å­—ç¬¦è™½ç„¶å¯ä»¥ä½¿ç”¨length()æ¥ç¡®å®šä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æœ‰å­—ç¬¦ï¼Œä½†æ˜¯ä½¿ç”¨empty()å‡½æ•°æ›´æœ‰æ•ˆ:bool string::empty() constå¦‚æœå­—ç¬¦ä¸²æ²¡æœ‰å­—ç¬¦ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚å¦‚ï¼š1234string sString1(\"Not Empty\");cout &lt;&lt; (sString1.empty() ? \"true\" : \"false\") &lt;&lt; endl;string sString2; // emptycout &lt;&lt; (sString2.empty() ? \"true\" : \"false\") &lt;&lt; endl;å­—ç¬¦ä¸²å¯å®¹çº³æœ€å¤§çš„å®¹é‡è¿˜æœ‰ä¸€ä¸ªä¸å¤§å°ç›¸å…³çš„å‡½æ•°ï¼Œæ‚¨å¯èƒ½æ°¸è¿œä¸ä¼šç”¨åˆ°ï¼Œä½†æ˜¯ä¸ºäº†å®Œæ•´èµ·è§ï¼Œæˆ‘ä»¬å°†åœ¨è¿™é‡ŒåŒ…æ‹¬å®ƒ:size_type string::max_size() constè¿”å›å­—ç¬¦ä¸²å…è®¸çš„æœ€å¤§å­—ç¬¦æ•°ã€‚è¿™ä¸ªå€¼ä¼šéšç€æ“ä½œç³»ç»Ÿå’Œç³»ç»Ÿæ¶æ„çš„ä¸åŒè€Œå˜åŒ–ã€‚12string sString(\"MyString\");cout &lt;&lt; sString.max_size() &lt;&lt; endl;ç»“æœï¼š12345&#x2F;&#x2F;æ•™ç¨‹ä¸­çš„ç»“æœ4294967294&#x2F;&#x2F;åœ¨æˆ‘è‡ªå·±ç”µè„‘ä¸­çš„ç»“æœ2147483647å­—ç¬¦ä¸²çš„å®¹é‡( capacity)å­—ç¬¦ä¸²çš„å®¹é‡åæ˜ äº†å­—ç¬¦ä¸²ä¸ºä¿å­˜å…¶å†…å®¹è€Œåˆ†é…çš„å†…å­˜å¤§å°ã€‚æ­¤å€¼ä»¥å­—ç¬¦ä¸²å­—ç¬¦ä¸ºåº¦é‡ï¼Œä¸åŒ…æ‹¬NULLç»ˆæ­¢ç¬¦ã€‚ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªå®¹é‡ä¸º8çš„å­—ç¬¦ä¸²å¯ä»¥å®¹çº³8ä¸ªå­—ç¬¦ã€‚ï¼‰size_type string::capacity() constè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨ä¸é‡æ–°åˆ†é…çš„æƒ…å†µä¸‹å¯ä»¥å®¹çº³çš„å­—ç¬¦æ•°ã€‚å¦‚ï¼š123string sString(\"01234567\");cout &lt;&lt; \"Length: \" &lt;&lt; sString.length() &lt;&lt; endl;cout &lt;&lt; \"Capacity: \" &lt;&lt; sString.capacity() &lt;&lt; endl;ç»“æœï¼š12Length: 8Capacity: 15æ³¨æ„ï¼Œå®¹é‡å¤§äºå­—ç¬¦ä¸²çš„é•¿åº¦!è™½ç„¶æˆ‘ä»¬çš„å­—ç¬¦ä¸²é•¿åº¦ä¸º8ï¼Œä½†å®é™…ä¸Šè¯¥å­—ç¬¦ä¸²åˆ†é…äº†è¶³å¤Ÿ15ä¸ªå­—ç¬¦çš„å†…å­˜!ä¸ºä»€ä¹ˆè¦è¿™æ ·åš?å­—ç¬¦ä¸²å®¹é‡( capacity) å¤§äºç­‰äº å­—ç¬¦ä¸²é•¿åº¦æ³¨æ„ï¼Œå®¹é‡å¤§äºå­—ç¬¦ä¸²çš„é•¿åº¦!è™½ç„¶æˆ‘ä»¬çš„å­—ç¬¦ä¸²é•¿åº¦ä¸º8ï¼Œä½†å®é™…ä¸Šè¯¥å­—ç¬¦ä¸²åˆ†é…äº†è¶³å¤Ÿ15ä¸ªå­—ç¬¦çš„å†…å­˜!ä¸ºä»€ä¹ˆè¦è¿™æ ·åš?å¦‚æœç”¨æˆ·æƒ³åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ”¾å…¥æ¯”è¯¥å­—ç¬¦ä¸²æ‰€èƒ½å®¹çº³çš„æ›´å¤šçš„å­—ç¬¦ï¼Œåˆ™å¿…é¡»å°†è¯¥å­—ç¬¦ä¸²é‡æ–°åˆ†é…åˆ°æ›´å¤§çš„å®¹é‡ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦å’Œå®¹é‡éƒ½ä¸º8ï¼Œé‚£ä¹ˆå‘è¯¥å­—ç¬¦ä¸²æ·»åŠ ä»»ä½•å­—ç¬¦éƒ½å°†å¼ºåˆ¶é‡æ–°åˆ†é…ã€‚é€šè¿‡ä½¿å®¹é‡å¤§äºå®é™…çš„å­—ç¬¦ä¸²ï¼Œè¿™å°±ä¸ºç”¨æˆ·æä¾›äº†ä¸€äº›ç¼“å†²ç©ºé—´ï¼Œä»¥ä¾¿åœ¨éœ€è¦è¿›è¡Œé‡æ–°åˆ†é…ä¹‹å‰æ‰©å±•å­—ç¬¦ä¸²ã€‚äº‹å®è¯æ˜ï¼Œé‡æ–°åˆ†é…æœ‰ä»¥ä¸‹å‡ ä¸ªä¸åˆ©åŸå› ï¼šé¦–å…ˆï¼Œé‡æ–°åˆ†é…å­—ç¬¦ä¸²ç›¸å¯¹æ¯”è¾ƒæ˜‚è´µã€‚é¦–å…ˆï¼Œå¿…é¡»åˆ†é…æ–°å†…å­˜ã€‚ç„¶åå¿…é¡»å°†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦å¤åˆ¶åˆ°æ–°å†…å­˜ä¸­ã€‚å¦‚æœå­—ç¬¦ä¸²å¾ˆå¤§ï¼Œè¿™å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚æœ€åï¼Œæ—§çš„å†…å­˜ç©ºé—´å¿…é¡»é‡Šæ”¾ã€‚å¦‚æœæ‚¨æ­£åœ¨è¿›è¡Œè®¸å¤šé‡æ–°åˆ†é…ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šæ˜¾è‘—é™ä½ç¨‹åºçš„è¿è¡Œé€Ÿåº¦ã€‚å…¶æ¬¡ï¼Œæ¯å½“é‡æ–°åˆ†é…ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œè¯¥å­—ç¬¦ä¸²çš„å†…å®¹å°±ä¼šæ›´æ”¹ä¸ºä¸€ä¸ªæ–°çš„å†…å­˜åœ°å€ã€‚è¿™æ„å‘³ç€å¯¹å­—ç¬¦ä¸²çš„æ‰€æœ‰å¼•ç”¨ã€æŒ‡é’ˆå’Œè¿­ä»£å™¨éƒ½æ˜¯æ— æ•ˆçš„!è®¾ç½®å­—ç¬¦ä¸²çš„å®¹é‡çš„ä¸‹é™void string::reserve(size_type unSize)void string::reserve()ç¬¬ä¸€ä¸ªå‡½æ•°ç‰¹ç‚¹æ˜¯å°†å­—ç¬¦ä¸²çš„å®¹é‡è‡³å°‘è®¾ç½®ä¸ºunSize(å¯ä»¥æ›´å¤§)ã€‚æ³¨æ„ï¼Œè¿™å¯èƒ½éœ€è¦é‡æ–°åˆ†é…ã€‚å½“è°ƒç”¨ç¬¬ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä½†å¤§å°å°äºå½“å‰å®¹é‡ï¼Œåˆ™å‡½æ•°å°†å°è¯•æ”¶ç¼©å®¹é‡ä»¥åŒ¹é…é•¿åº¦ã€‚è¿™æ˜¯ä¸€ä¸ªéç»‘å®šè¯·æ±‚ã€‚1234567891011string sString(\"01234567\");cout &lt;&lt; \"Length: \" &lt;&lt; sString.length() &lt;&lt; endl;cout &lt;&lt; \"Capacity: \" &lt;&lt; sString.capacity() &lt;&lt; endl; sString.reserve(200);cout &lt;&lt; \"Length: \" &lt;&lt; sString.length() &lt;&lt; endl;cout &lt;&lt; \"Capacity: \" &lt;&lt; sString.capacity() &lt;&lt; endl; sString.reserve();cout &lt;&lt; \"Length: \" &lt;&lt; sString.length() &lt;&lt; endl;cout &lt;&lt; \"Capacity: \" &lt;&lt; sString.capacity() &lt;&lt; endl;ç»“æœï¼š123456Length: 8Capacity: 15Length: 8Capacity: 207Length: 8Capacity: 207è¿™ä¸ªä¾‹å­å±•ç¤ºäº†ä¸¤ä»¶æœ‰è¶£çš„äº‹æƒ…ã€‚é¦–å…ˆï¼Œè™½ç„¶æˆ‘ä»¬è¦æ±‚200çš„å®¹é‡ï¼Œä½†å®é™…ä¸Šæˆ‘ä»¬å¾—åˆ°äº†207çš„å®¹é‡ã€‚å®¹é‡æ€»æ˜¯ä¿è¯è‡³å°‘ä¸æ‚¨çš„è¯·æ±‚ä¸€æ ·å¤§ï¼Œä½†ä¹Ÿå¯èƒ½æ›´å¤§ã€‚ç„¶åï¼Œæˆ‘ä»¬è¯·æ±‚æ›´æ”¹å®¹é‡ä»¥é€‚åº”å­—ç¬¦ä¸²ã€‚è¿™ä¸ªè¯·æ±‚è¢«å¿½ç•¥äº†ï¼Œå› ä¸ºå®¹é‡æ²¡æœ‰æ”¹å˜ã€‚å‘å­—ç¬¦ä¸²æ·»åŠ ä¸€ä¸ªå­—ç¬¦12345678string sString(\"0123456789abcde\");cout &lt;&lt; \"Length: \" &lt;&lt; sString.length() &lt;&lt; endl;cout &lt;&lt; \"Capacity: \" &lt;&lt; sString.capacity() &lt;&lt; endl; // Now add a new charactersString += \"f\"; â­â­â­cout &lt;&lt; \"Length: \" &lt;&lt; sString.length() &lt;&lt; endl;cout &lt;&lt; \"Capacity: \" &lt;&lt; sString.capacity() &lt;&lt; endl;ç»“æœï¼š1234Length: 15Capacity: 15Length: 16Capacity: 31","categories":[],"tags":[]},{"title":"C&C++/stdï¼šï¼šstringæ„é€ å’Œé”€æ¯","slug":"C&C++/stdï¼šï¼šstringæ„é€ å’Œé”€æ¯","date":"2020-05-26T08:40:46.744Z","updated":"2020-05-26T09:27:51.826Z","comments":true,"path":"archives/550c4d87.html","link":"","permalink":"https://longlongqin.github.io/archives/550c4d87.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/17-2-stdstring-construction-and-destruction/åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•æ„é€ std::stringçš„å¯¹è±¡ï¼Œä»¥åŠå¦‚ä½•ä»æ•°å­—åˆ›å»ºå­—ç¬¦ä¸²ï¼Œåä¹‹äº¦ç„¶ã€‚String çš„æ„é€ stringç±»æœ‰è®¸å¤šæ„é€ å‡½æ•°ï¼Œå¯ç”¨äºåˆ›å»ºå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬å°†åœ¨è¿™é‡Œé€ä¸€ä»‹ç»ã€‚æ³¨æ„ï¼šstring::size_typeè§£æä¸ºsize_tï¼Œå®ƒä¸sizeofæ“ä½œç¬¦è¿”å›çš„æ— ç¬¦å·æ•´æ•°ç±»å‹ ç›¸åŒã€‚å®ƒçš„å®é™…å¤§å°å› ç¯å¢ƒè€Œå¼‚ã€‚å‡ºäºæœ¬æ•™ç¨‹çš„ç›®çš„ï¼Œå°†å®ƒæƒ³è±¡æˆä¸€ä¸ªæ— ç¬¦å·æ•´å‹ã€‚string::string()è¿™æ˜¯é»˜è®¤çš„æ„é€ å‡½æ•°ã€‚å®ƒåˆ›å»ºä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚å¦‚ï¼š12345std::string sSource;std::cout &lt;&lt; sSource;/*ç»“æœ*/ //ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œå› ä¸ºè¿™æ˜¯ç©ºå­—ç¬¦ä¸²string::string(const string&amp; strString)è¿™æ˜¯å¤åˆ¶æ„é€ å‡½æ•°ã€‚è¿™ä¸ªæ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ä½œä¸ºstrStringçš„å‰¯æœ¬ã€‚å¦‚ï¼š123std::string sSource&#123; \"my string\" &#125;;std::string sOutput&#123; sSource &#125;;std::cout &lt;&lt; sOutput;ç»“æœï¼š1my stringstring::string(const string&amp; strString, size_type unIndex, size_type unLength)string::string(const string&amp; strString, size_type unIndex)string::string(const string&amp; strString, size_type unIndex, size_type unLength)æ­¤æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²ä»ç´¢å¼• unIndexå¼€å§‹ï¼Œæœ€å¤šåŒ…å«æ¥è‡ªstrStringçš„ unLengthé•¿åº¦å­—ç¬¦ã€‚å¦‚æœé‡åˆ°NULLï¼Œå³ä½¿æ²¡æœ‰è¾¾åˆ°unLengthï¼Œå­—ç¬¦ä¸²å¤åˆ¶ä¹Ÿå°†ç»“æŸã€‚å¦‚æœä¸æä¾›unLengthï¼Œåˆ™ä½¿ç”¨ä»unIndexå¼€å§‹çš„æ‰€æœ‰å­—ç¬¦ã€‚å¦‚æœunIndexå¤§äºå­—ç¬¦ä¸²çš„å¤§å°ï¼Œåˆ™ä¼šæŠ›å‡ºout_of_rangeå¼‚å¸¸ã€‚å¦‚ï¼š12345std::string sSource&#123; \"my string\" &#125;;std::string sOutput&#123; sSource, 3 &#125;;std::cout &lt;&lt; sOutput&lt;&lt; '\\n';std::string sOutput2(sSource, 3, 4);std::cout &lt;&lt; sOutput2 &lt;&lt; '\\n';ç»“æœï¼š12stringstristring::string(const char *szCString)è¿™ä¸ªæ„é€ å‡½æ•°ä»cé£æ ¼çš„å­—ç¬¦ä¸²szCStringåˆ›å»ºä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œç›´åˆ°ä½†ä¸åŒ…æ‹¬NULLç»ˆæ­¢ç¬¦ã€‚å¦‚æœç»“æœå¤§å°è¶…è¿‡æœ€å¤§å­—ç¬¦ä¸²é•¿åº¦ï¼Œå°†æŠ›å‡ºlength_errorå¼‚å¸¸ã€‚è­¦å‘Š:szCStringä¸èƒ½ä¸ºç©ºã€‚å¦‚ï¼š123const char *szSource&#123; \"my string\" &#125;;std::string sOutput&#123; szSource &#125;;std::cout &lt;&lt; sOutput &lt;&lt; '\\n';ç»“æœï¼š1my stringstring::string(const char *szCString, size_type unLength)è¿™ä¸ªæ„é€ å‡½æ•°ä»cæ ·å¼çš„å­—ç¬¦ä¸²szCStringçš„ ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ åˆ° ç¬¬ unLengthä¸ªå­—ç¬¦(åŒ…å«å®ƒ) ç»“æŸ åˆ›å»ºä¸€ä¸ªæ–°å­—ç¬¦ä¸²ã€‚å¦‚æœç»“æœå¤§å°è¶…è¿‡æœ€å¤§å­—ç¬¦ä¸²é•¿åº¦ï¼Œå°†æŠ›å‡ºlength_errorå¼‚å¸¸ã€‚è­¦å‘Šï¼šä»…å¯¹äºæ­¤å‡½æ•°ï¼Œåœ¨szCStringä¸­nullä¸è¢«è§†ä¸ºå­—ç¬¦ä¸²ç»“æŸå­—ç¬¦! è¿™æ„å‘³ç€å¦‚æœå­—ç¬¦ä¸²çš„é•¿åº¦å¤ªå¤§ï¼Œæ˜¯å¯ä»¥è¯»å–å­—ç¬¦ä¸²çš„æœ«å°¾çš„å­—ç¬¦çš„ã€‚ æ³¨æ„ä¸è¦æº¢å‡ºä½ çš„å­—ç¬¦ä¸²ç¼“å†²åŒº!å¦‚ï¼š123const char *szSource&#123; \"my string\" &#125;;std::string sOutput(szSource, 4);std::cout &lt;&lt; sOutput &lt;&lt; '\\n';ç»“æœï¼š1my sstring::string(size_type nNum, char chChar)è¿™ä¸ªæ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªç”±nNumä¸ª chCharå­—ç¬¦ åˆå§‹åŒ–çš„æ–°å­—ç¬¦ä¸²ã€‚å¦‚æœç»“æœå¤§å°è¶…è¿‡æœ€å¤§å­—ç¬¦ä¸²é•¿åº¦ï¼Œå°†æŠ›å‡ºlength_errorå¼‚å¸¸ã€‚å¦‚ï¼š12std::string sOutput(4, 'Q');cout &lt;&lt; sOutput &lt;&lt; endl;ç»“æœï¼š1QQQQtemplate string::string(InputIterator itBeg, InputIterator itEnd)è¿™ä¸ªæ„é€ å‡½æ•°åˆ›å»ºç”±ä¸€ä¸ªèŒƒå›´ä¸º [itBeg, itEnd]å­—ç¬¦ åˆå§‹åŒ–çš„æ–°å­—ç¬¦ä¸²ã€‚å¦‚æœç»“æœå¤§å°è¶…è¿‡æœ€å¤§å­—ç¬¦ä¸²é•¿åº¦ï¼Œå°†æŠ›å‡ºlength_errorå¼‚å¸¸ã€‚è¿™ä¸ªæ²¡æœ‰ç¤ºä¾‹ä»£ç ã€‚å®ƒå¾ˆæ¨¡ç³Šï¼Œä½ å¯èƒ½æ°¸è¿œä¸ä¼šç”¨åˆ°å®ƒã€‚string çš„é”€æ¯string::~string()å­—ç¬¦ä¸²çš„é”€æ¯ï¼šè¿™æ˜¯ç ´åè€…ã€‚å®ƒé”€æ¯å­—ç¬¦ä¸²å¹¶é‡Šæ”¾å†…å­˜ã€‚è¿™é‡Œä¹Ÿæ²¡æœ‰ç¤ºä¾‹ä»£ç ï¼Œå› ä¸ºææ„å‡½æ•°ä¸æ˜¯æ˜¾å¼è°ƒç”¨çš„ã€‚ç”±æ•°å­—æ„é€ å­—ç¬¦ä¸²åœ¨std::stringç±»ä¸­ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„é—æ¼æ˜¯ç¼ºä¹ä»æ•°å­—åˆ›å»ºå­—ç¬¦ä¸²çš„èƒ½åŠ›ã€‚ä¾‹å¦‚:1std::string sFour&#123; 4 &#125;;äº§ç”Ÿä»¥ä¸‹é”™è¯¯:1c:vcprojectstest2test2test.cpp(10) : error C2664: &#39;std::basic_string&lt;_Elem,_Traits,_Ax&gt;::basic_string(std::basic_string&lt;_Elem,_Traits,_Ax&gt;::_Has_debug_it)&#39; : cannot convert parameter 1 from &#39;int&#39; to &#39;std::basic_string&lt;_Elem,_Traits,_Ax&gt;::_Has_debug_it&#39;è¿˜è®°å¾—æˆ‘è¯´è¿‡å­—ç¬¦ä¸²ç±»ä¼šäº§ç”Ÿå¯æ€•çš„é”™è¯¯å—? è¿™é‡Œçš„ç›¸å…³ä¿¡æ¯æ˜¯:ä¸èƒ½å°†å‚æ•°1ä»&#39;int&#39;è½¬æ¢ä¸º&#39;std::basic_stringæ¢å¥è¯è¯´ï¼Œå®ƒè¯•å›¾å°†intè½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œä½†æ˜¯å¤±è´¥äº†ã€‚å°†æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨std::ostringstreamç±»ã€‚std::ostringstreamï¼ˆå¤´æ–‡ä»¶&lt;sstream&gt;ä¸­ï¼‰å·²ç»è®¾ç½®ä¸ºæ¥å—æ¥è‡ªå„ç§æ¥æºçš„è¾“å…¥ï¼ŒåŒ…æ‹¬å­—ç¬¦ã€æ•°å­—ã€å­—ç¬¦ä¸²ç­‰â€¦â€¦.ã€‚å®ƒåŒæ ·èƒ½å¤Ÿè¾“å‡ºå­—ç¬¦ä¸²ï¼ˆå¯ä»¥é€šè¿‡æå–æ“ä½œç¬¦&gt;&gt;ï¼Œä¹Ÿå¯ä»¥é€šè¿‡str()å‡½æ•°ï¼‰ã€‚æœ‰å…³std::ostringstreamçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·çœ‹18.4 â€“ Stream classes for strings.è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆæ¥åˆ›å»ºstd::stringä»å„ç§ç±»å‹çš„è¾“å…¥:1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;sstream&gt;#include &lt;string&gt; template &lt;typename T&gt;inline std::string ToString(T tX)&#123; std::ostringstream oStream; oStream &lt;&lt; tX; return oStream.str();&#125;int main()&#123; std::string sFour&#123; ToString(4) &#125;; std::string sSixPointSeven&#123; ToString(6.7) &#125;; std::string sA&#123; ToString('A') &#125;; std::cout &lt;&lt; sFour &lt;&lt; '\\n'; std::cout &lt;&lt; sSixPointSeven &lt;&lt; '\\n'; std::cout &lt;&lt; sA &lt;&lt; '\\n'; return 0;&#125;ç»“æœï¼š12346.7Aè¯·æ³¨æ„ï¼Œæ­¤è§£å†³æ–¹æ¡ˆçœç•¥äº†ä»»ä½•é”™è¯¯æ£€æŸ¥ã€‚å°†tXæ’å…¥oStreamå¯èƒ½ä¼šå¤±è´¥ã€‚ä¸€ä¸ªé€‚å½“çš„å“åº”æ˜¯åœ¨è½¬æ¢å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ç±»ä¼¼äºä¸Šé¢çš„è§£å†³æ–¹æ¡ˆ:12345678910111213141516171819#include &lt;iostream&gt;#include &lt;sstream&gt;#include &lt;string&gt; template &lt;typename T&gt;inline bool FromString(const std::string&amp; sString, T &amp;tX)&#123; std::istringstream iStream(sString); return !(iStream &gt;&gt; tX).fail(); // extract value into tX, return success or not&#125;int main()&#123; double dX; if (FromString(\"3.4\", dX)) cout &lt;&lt; dX &lt;&lt; '\\n'; if (FromString(\"ABC\", dX)) cout &lt;&lt; dX &lt;&lt; '\\n'; &#125;ç»“æœï¼š13.4æ³¨æ„ï¼Œç¬¬äºŒæ¬¡è½¬æ¢å¤±è´¥å¹¶è¿”å›falseã€‚","categories":[],"tags":[]},{"title":"C&C++/stdï¼šï¼šstring and stdï¼šï¼šwstring","slug":"C&C++/stdï¼šï¼šstring and stdï¼šï¼šwstring","date":"2020-05-26T07:45:21.184Z","updated":"2020-05-26T08:35:59.014Z","comments":true,"path":"archives/67452a19.html","link":"","permalink":"https://longlongqin.github.io/archives/67452a19.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/17-1-stdstring-and-stdwstring/æ ‡å‡†åº“åŒ…å«è®¸å¤šæœ‰ç”¨çš„ç±»â€”â€”ä½†æœ€æœ‰ç”¨çš„å¯èƒ½æ˜¯std::stringã€‚std::string(å’Œstd::wstring)æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»ï¼Œå®ƒæä¾›äº†è®¸å¤šæ“ä½œæ¥åˆ†é…ã€æ¯”è¾ƒå’Œä¿®æ”¹å­—ç¬¦ä¸²ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥ç ”ç©¶è¿™äº›å­—ç¬¦ä¸²ç±»ã€‚æ³¨æ„:C-styleå­—ç¬¦ä¸²å°†è¢«ç§°ä¸ºâ€œC-style stringâ€ï¼Œè€Œstd::string(å’Œstd::wstring)å°†è¢«ç®€å•åœ°ç§°ä¸ºâ€œstringâ€ã€‚å­—ç¬¦ä¸²ç±»(å­—ç¬¦ä¸²ç±»çš„åŠ¨æœº)çš„åŠ¨æœºCé£æ ¼å­—ç¬¦ä¸²çš„ç¼ºç‚¹åœ¨ C-style stringsä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†cé£æ ¼çš„å­—ç¬¦ä¸²ï¼Œå®ƒä½¿ç”¨å­—ç¬¦æ•°ç»„æ¥å­˜å‚¨å­—ç¬¦ä¸²ã€‚å¦‚æœæ‚¨å°è¯•è¿‡ä½¿ç”¨cé£æ ¼çš„å­—ç¬¦ä¸²åšä»»ä½•äº‹æƒ…ï¼Œé‚£ä¹ˆæ‚¨ä¼šå¾ˆå¿«å¾—å‡ºè¿™æ ·çš„ç»“è®º:ä½¿ç”¨cé£æ ¼çš„å­—ç¬¦ä¸²å¾ˆéº»çƒ¦ï¼Œå¾ˆå®¹æ˜“å‡ºé”™ï¼Œè€Œä¸”å¾ˆéš¾è°ƒè¯•ã€‚cé£æ ¼çš„å­—ç¬¦ä¸²æœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œä¸»è¦æ˜¯å›´ç»•è¿™æ ·ä¸€ä¸ªäº‹å®:æ‚¨å¿…é¡»è‡ªå·±å®Œæˆæ‰€æœ‰çš„å†…å­˜ç®¡ç†ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³è¦åˆ†é…å­—ç¬¦ä¸²â€œhello!è¿›å…¥ä¸€ä¸ªç¼“å†²åŒºï¼Œä½ å¿…é¡»å…ˆåŠ¨æ€åˆ†é…ä¸€ä¸ªç¼“å†²åŒºçš„æ­£ç¡®é•¿åº¦:12char *strHello = new char[7];//ä¸è¦å¿˜è®°è¯´æ˜nullç»ˆæ­¢ç¬¦çš„é¢å¤–å­—ç¬¦!ç„¶åä½ å¿…é¡»å®é™… å¤åˆ¶å€¼:12strcpy(strHello, \"hello!\"); &gt;//å¸Œæœ›ä½ ä½¿ä½ çš„ç¼“å†²åŒºè¶³å¤Ÿå¤§ï¼Œæ‰€ä»¥æ²¡æœ‰ç¼“å†²åŒºæº¢å‡º!å½“ç„¶ï¼Œå› ä¸ºå­—ç¬¦ä¸²æ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œä½ å¿…é¡»è®°ä½ï¼Œå½“ä½ å¤„ç†å®Œå®ƒæ—¶ï¼Œè¦æ­£ç¡®åœ°é‡Šæ”¾å®ƒ:12delete[] strHello; &gt;//ä¸è¦å¿˜è®°ä½¿ç”¨æ•°ç»„åˆ é™¤ä»£æ›¿æ™®é€šçš„åˆ é™¤!æ­¤å¤–ï¼ŒCæä¾›çš„ç”¨äºå¤„ç†æ•°å­—çš„è®¸å¤šç›´è§‚æ“ä½œç¬¦(å¦‚èµ‹å€¼å’Œæ¯”è¾ƒ)æ ¹æœ¬ä¸é€‚ç”¨äºCé£æ ¼çš„å­—ç¬¦ä¸²ã€‚æœ‰æ—¶è¿™äº›æ–¹æ³•çœ‹ä¼¼æœ‰æ•ˆï¼Œä½†å®é™…ä¸Šäº§ç”Ÿäº†ä¸æ­£ç¡®çš„ç»“æœã€‚ä¾‹å¦‚ï¼šä½¿ç”¨==æ¯”è¾ƒä¸¤ä¸ªcé£æ ¼çš„å­—ç¬¦ä¸²å®é™…ä¸Šä¼šè¿›è¡ŒæŒ‡é’ˆæ¯”è¾ƒï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²æ¯”è¾ƒã€‚ä½¿ç”¨operator=å°†ä¸€ä¸ªcé£æ ¼çš„å­—ç¬¦ä¸²èµ‹å€¼ç»™å¦ä¸€ä¸ªcé£æ ¼çš„å­—ç¬¦ä¸²ï¼Œä¹ä¸€çœ‹ä¼¼ä¹å¯è¡Œï¼Œä½†å®é™…ä¸Šæ˜¯åœ¨åšæŒ‡é’ˆå¤åˆ¶(æµ…å¤åˆ¶)ï¼Œè¿™é€šå¸¸ä¸æ˜¯æ‚¨æƒ³è¦çš„ã€‚è¿™ç±»äº‹æƒ…ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œå¾ˆéš¾æ‰¾åˆ°å’Œè°ƒè¯•!æœ€åï¼Œå¤„ç†cé£æ ¼çš„å­—ç¬¦ä¸²éœ€è¦è®°ä½è®¸å¤šå…³äºä»€ä¹ˆæ˜¯å®‰å…¨/ä¸å®‰å…¨çš„æŒ‘å‰”è§„åˆ™ï¼Œè®°ä½ä¸€å †å…·æœ‰æœ‰è¶£åç§°çš„å‡½æ•°ï¼Œå¦‚strcat()å’Œstrcmp()ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç›´è§‚çš„æ“ä½œç¬¦ï¼Œå¹¶æ‰§è¡Œå¤§é‡æ‰‹å·¥å†…å­˜ç®¡ç†ã€‚å¹¸è¿çš„æ˜¯ï¼Œc++å’Œæ ‡å‡†åº“æä¾›äº†æ›´å¥½çš„å¤„ç†å­—ç¬¦ä¸²çš„æ–¹æ³•: std::stringå’Œstd::wstringç±»ã€‚é€šè¿‡ä½¿ç”¨c++æ¦‚å¿µï¼Œä¾‹å¦‚æ„é€ å‡½æ•°ã€ææ„å‡½æ•°å’Œæ“ä½œç¬¦é‡è½½ï¼Œstd::stringå…è®¸æ‚¨ä»¥ä¸€ç§ç›´è§‚å’Œå®‰å…¨çš„æ–¹å¼åˆ›å»ºå’Œæ“ä½œå­—ç¬¦ä¸²! ä¸å†éœ€è¦å†…å­˜ç®¡ç†ï¼Œä¸å†éœ€è¦å¥‡æ€ªçš„å‡½æ•°åï¼Œç¾éš¾å‘ç”Ÿçš„å¯èƒ½æ€§ä¹Ÿå¤§å¤§é™ä½ã€‚std::stringæ¦‚è¿°ä½äº å¤´æ–‡ä»¶&lt;string&gt;ä¸­å®é™…ä¸Šåœ¨å­—ç¬¦ä¸²å¤´ä¸­æœ‰3ä¸ªä¸åŒçš„å­—ç¬¦ä¸²ç±»ã€‚ç¬¬ä¸€ä¸ªæ¨¡æ¿åŸºç±»åä¸ºbasic_string&lt;&gt;:12345namespace std&#123; template&lt;class charT, class traits = char_traits&lt;charT&gt;, class Allocator = allocator&lt;charT&gt; &gt; class basic_string;&#125;æ‚¨ä¸ä¼šç›´æ¥ä½¿ç”¨è¿™ä¸ªç±»ï¼Œæ‰€ä»¥æš‚æ—¶ä¸è¦æ‹…å¿ƒä»€ä¹ˆtraitæˆ– Allocatorã€‚åœ¨å‡ ä¹æ‰€æœ‰å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼å°±è¶³å¤Ÿäº†ã€‚æ ‡å‡†åº“æä¾›äº†ä¸¤ç§basic_string&lt;&gt;:12345namespace std&#123; typedef basic_string&lt;char&gt; string; typedef basic_string&lt;wchar_t&gt; wstring;&#125;è¿™æ˜¯æ‚¨å°†å®é™…ä½¿ç”¨çš„ä¸¤ä¸ªç±»ã€‚std::stringç”¨äº æ ‡å‡†asciiå’Œutf-8å­— ç¬¦ä¸²ã€‚std::wstringç”¨äº å®½å­—ç¬¦/unicode (utf-16) å­—ç¬¦ä¸²ã€‚æ²¡æœ‰ç”¨äºutf-32å­—ç¬¦ä¸²çš„å†…ç½®ç±»(å°½ç®¡å¦‚æœéœ€è¦çš„è¯ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿä»basic_string&lt;&gt;æ‰©å±•è‡ªå·±çš„ç±»)ã€‚å°½ç®¡æ‚¨å°†ç›´æ¥ä½¿ç”¨std::stringå’Œstd::wstringï¼Œä½†æ‰€æœ‰å­—ç¬¦ä¸²åŠŸèƒ½éƒ½æ˜¯åœ¨basic_string&lt;&gt;ç±»ä¸­å®ç°çš„ã€‚é€šè¿‡æ¨¡æ¿åŒ–ï¼ŒStringå’Œwstringèƒ½å¤Ÿç›´æ¥è®¿é—®è¯¥åŠŸèƒ½ã€‚å› æ­¤ï¼Œæœ¬æ–‡æä¾›çš„æ‰€æœ‰å‡½æ•°éƒ½å¯ä»¥ç”¨äºstringå’Œwstringã€‚è¿™é‡Œæ˜¯stringç±»ä¸­æ‰€æœ‰å‡½æ•°çš„åˆ—è¡¨ã€‚è¿™äº›å‡½æ•°ä¸­çš„å¤§å¤šæ•°å…·æœ‰å¤šç§é£æ ¼ï¼Œå¯ä»¥å¤„ç†ä¸åŒç±»å‹çš„è¾“å…¥ï¼Œæˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„è¯¾ç¨‹ä¸­æ›´æ·±å…¥åœ°ä»‹ç»è¿™äº›å†…å®¹ã€‚FunctionEffectCreation and destruction(constructor) (destructor)Create or copy a string Destroy a stringSize and capacitycapacity() empty() length(), size() max_size() reserve()Returns the number of characters that can be held without reallocation Returns a boolean indicating whether the string is empty Returns the number of characters in string Returns the maximum string size that can be allocated Expand or shrink the capacity of the stringElement access[], at()Accesses the character at a particular indexModification=, assign() +=, append(), push_back() insert() clear() erase() replace() resize() swap()Assigns a new value to the string Concatenates characters to end of the string Inserts characters at an arbitrary index in string Delete all characters in the string Erase characters at an arbitrary index in string Replace characters at an arbitrary index with other characters Expand or shrink the string (truncates or adds characters at end of string) Swaps the value of two stringsInput and Output&gt;&gt;, getline() &lt;&lt; c_str() copy() data()Reads values from the input stream into the string Writes string value to the output stream Returns the contents of the string as a NULL-terminated C-style string Copies contents (not NULL-terminated) to a character array Returns the contents of the string as a non-NULL-terminated character arrayString comparison==, != &lt;, &lt;=, &gt; &gt;= compare()Compares whether two strings are equal/unequal (returns bool) Compares whether two strings are less than / greater than each other (returns bool) Compares whether two strings are equal/unequal (returns -1, 0, or 1)Substrings and concatenation+ substr()Concatenates two strings Returns a substringSearchingfind() find_first_of() find_first_not_of() find_last_of() find_last_not_of() rfind()Find index of first character/substring Find index of first character from a set of characters Find index of first character not from a set of characters Find index of last character from a set of characters Find index of last character not from a set of characters Find index of last character/substringIterator and allocator supportbegin(), end() get_allocator() rbegin(), rend()Forward-direction iterator support for beginning/end of string Returns the allocator Reverse-direction iterator support for beginning/end of stringè™½ç„¶æ ‡å‡†çš„åº“å­—ç¬¦ä¸²ç±»æä¾›äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä½†æœ‰å‡ ä¸ªæ˜æ˜¾çš„é—æ¼:æ­£åˆ™è¡¨è¾¾å¼ç”¨äºä»æ•°å­—åˆ›å»ºå­—ç¬¦ä¸²çš„æ„é€ å‡½æ•°å¤§å†™/å¤§å†™/å°å†™å‡½æ•°ä¸åŒºåˆ†å¤§å°å†™çš„æ¯”è¾ƒæ ‡è®°åŒ–/å°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºæ•°ç»„è·å–å­—ç¬¦ä¸²çš„å·¦æˆ–å³éƒ¨åˆ†çš„ç®€å•å‡½æ•°ç©ºç™½ä¿®å‰ªæ ¼å¼åŒ–ä¸€ä¸ªå­—ç¬¦ä¸² sprintf æ ·å¼ç”±utf-8è½¬æ¢ä¸ºutf-16æˆ–åä¹‹äº¦ç„¶å¯¹äºå¤§å¤šæ•°æƒ…å†µï¼Œæ‚¨å¿…é¡»ç¼–å†™è‡ªå·±çš„å‡½æ•°ï¼Œæˆ–è€…å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºCæ ·å¼çš„å­—ç¬¦ä¸²(ä½¿ç”¨c_str())ï¼Œå¹¶ä½¿ç”¨æä¾›æ­¤åŠŸèƒ½çš„Cå‡½æ•°ã€‚","categories":[],"tags":[]},{"title":"C&C++/algorithm","slug":"C&C++/algorithm","date":"2020-05-26T07:01:48.858Z","updated":"2020-05-26T07:18:20.422Z","comments":true,"path":"archives/38f02bc7.html","link":"","permalink":"https://longlongqin.github.io/archives/38f02bc7.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/16-4-stl-algorithms-overview/å¤´æ–‡ä»¶ï¼šalgorithmé™¤äº†å®¹å™¨ç±»å’Œè¿­ä»£å™¨ä¹‹å¤–ï¼ŒSTLè¿˜æä¾›äº†ä¸€äº›ç”¨äºå¤„ç†å®¹å™¨ç±»å…ƒç´ çš„é€šç”¨ç®—æ³•ã€‚å®ƒä»¬å…è®¸æ‚¨æ‰§è¡Œè¯¸å¦‚æœç´¢ã€æ’åºã€æ’å…¥ã€é‡æ–°æ’åºã€åˆ é™¤å’Œå¤åˆ¶å®¹å™¨ç±»çš„å…ƒç´ ç­‰æ“ä½œã€‚æ³¨æ„ï¼Œç®—æ³•æ˜¯ä½œä¸ºä½¿ç”¨è¿­ä»£å™¨æ“ä½œçš„å‡½æ•°æ¥å®ç°çš„ã€‚è¿™æ„å‘³ç€æ¯ä¸ªç®—æ³•åªéœ€è¦å®ç°ä¸€æ¬¡ï¼Œå®ƒé€šå¸¸ä¼šè‡ªåŠ¨ä¸ºæ‰€æœ‰æä¾›ä¸€ç»„è¿­ä»£å™¨çš„å®¹å™¨(åŒ…æ‹¬æ‚¨çš„è‡ªå®šä¹‰å®¹å™¨ç±»)å·¥ä½œã€‚è™½ç„¶è¿™æ˜¯éå¸¸å¼ºå¤§çš„ï¼Œå¯ä»¥å¯¼è‡´ç¼–å†™å¤æ‚ä»£ç çš„èƒ½åŠ›éå¸¸å¿«ï¼Œå®ƒä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼šæŸäº›ç®—æ³•å’Œå®¹å™¨ç±»å‹çš„ç»„åˆå¯èƒ½ä¸èµ·ä½œç”¨ï¼Œå¯èƒ½å¯¼è‡´æ— é™å¾ªç¯ï¼Œæˆ–è€…å¯èƒ½èµ·ä½œç”¨ï¼Œä½†æ€§èƒ½éå¸¸å·®ã€‚å› æ­¤ï¼Œä½¿ç”¨è¿™äº›åœ¨ä½ çš„é£é™©ã€‚STLæä¾›äº†ç›¸å½“å¤šçš„ç®—æ³•ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªè®¨è®ºä¸€äº›æ›´å¸¸è§ã€æ›´å®¹æ˜“ä½¿ç”¨çš„æ–¹æ³•ã€‚å…¶ä½™çš„(å’Œå®Œæ•´çš„ç»†èŠ‚)å°†ä¿å­˜åœ¨å…³äºSTLç®—æ³•çš„ä¸€ç« ä¸­ã€‚min_element ä¸ max_elementstd::min_elementå’Œstd::max_elementç®—æ³•æŸ¥æ‰¾å®¹å™¨ç±»ä¸­çš„æœ€å°å’Œæœ€å¤§å…ƒç´ ã€‚std::iotaç”Ÿæˆä¸€ç³»åˆ—è¿ç»­çš„å€¼ã€‚åœ¨å¤´æ–‡ä»¶ï¼š&lt;numeric&gt;ä¸­12345678910111213141516171819#include &lt;algorithm&gt; // â­std::min_element and std::max_element#include &lt;iostream&gt;#include &lt;list&gt;#include &lt;numeric&gt; // std::iota int main()&#123; std::list&lt;int&gt; li(6); // ç”¨ä»0å¼€å§‹çš„æ•°å­— å¡«å……liã€‚ std::iota(li.begin(), li.end(), 0); std::cout &lt;&lt; *std::min_element(li.begin(), li.end()) &lt;&lt; ' ' &lt;&lt; *std::max_element(li.begin(), li.end()) &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœï¼š*/0 5","categories":[],"tags":[]},{"title":"C&C++/STLè¿­ä»£å™¨","slug":"C&C++/STLè¿­ä»£å™¨","date":"2020-05-26T02:47:38.727Z","updated":"2020-05-26T03:29:01.487Z","comments":true,"path":"archives/34a9aaba.html","link":"","permalink":"https://longlongqin.github.io/archives/34a9aaba.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/16-3-stl-iterators-overview/Iterator(è¿­ä»£å™¨)æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¯ä»¥éå†(è¿­ä»£)ä¸€ä¸ªå®¹å™¨ç±»ï¼Œè€Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“å®¹å™¨æ˜¯å¦‚ä½•å®ç°çš„ã€‚å¯¹äºè®¸å¤šç±»(ç‰¹åˆ«æ˜¯åˆ—è¡¨å’Œå…³è”ç±»)ï¼Œè¿­ä»£å™¨æ˜¯è®¿é—®è¿™äº›ç±»å…ƒç´ çš„ä¸»è¦æ–¹å¼ã€‚æ“ä½œç¬¦*ï¼š\\å¯¹è¿­ä»£å™¨çš„è§£å¼•ç”¨å°†è¿”å›è¿­ä»£å™¨å½“å‰æŒ‡å‘çš„å…ƒç´ ã€‚æ“ä½œç¬¦++ï¼šå°†è¿­ä»£å™¨ç§»åŠ¨åˆ°å®¹å™¨ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ï¼ˆå¤§å¤šæ•°è¿­ä»£å™¨è¿˜æä¾›è¿ç®—ç¬¦â€”â€”ç§»åŠ¨åˆ°å‰é¢çš„å…ƒç´ ã€‚ï¼‰æ“ä½œç¬¦==ä¸!=ï¼šç¡®å®šä¸¤ä¸ªè¿­ä»£å™¨æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå…ƒç´ çš„åŸºæœ¬æ¯”è¾ƒæ“ä½œç¬¦ã€‚è¦æ¯”è¾ƒä¸¤ä¸ªè¿­ä»£å™¨æ‰€æŒ‡å‘çš„å€¼ï¼Œé¦–å…ˆå–æ¶ˆå¯¹è¿­ä»£å™¨çš„å¼•ç”¨ï¼Œç„¶åä½¿ç”¨æ¯”è¾ƒæ“ä½œç¬¦ã€‚æ“ä½œç¬¦=ï¼šå°†è¿­ä»£å™¨åˆ†é…åˆ°ä¸€ä¸ªæ–°ä½ç½®(é€šå¸¸æ˜¯å®¹å™¨å…ƒç´ çš„å¼€å§‹æˆ–ç»“æŸä½ç½®)ã€‚è¦åˆ†é…è¿­ä»£å™¨æ‰€æŒ‡å‘çš„å…ƒç´ çš„å€¼ï¼Œé¦–å…ˆå¯¹è¿­ä»£å™¨è§£å¼•ç”¨ï¼Œç„¶åä½¿ç”¨èµ‹å€¼æ“ä½œç¬¦(=)ã€‚æ¯ä¸ªå®¹å™¨åŒ…å«å››ä¸ªåŸºæœ¬çš„æˆå‘˜å‡½æ•°ï¼Œç”¨äºæ“ä½œç¬¦=:begin()ï¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¡¨ç¤ºå®¹å™¨ä¸­å…ƒç´ çš„å¼€å¤´ã€‚end()ï¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨è¡¨ç¤ºå…ƒç´ çš„æœ«å°¾ã€‚cbegin()ï¼šè¿”å›ä¸€ä¸ªconst(åªè¯»)è¿­ä»£å™¨ï¼Œè¡¨ç¤ºå®¹å™¨ä¸­å…ƒç´ çš„å¼€å¤´ã€‚cend()ï¼šè¿”å›ä¸€ä¸ªconst(åªè¯»)è¿­ä»£å™¨ï¼Œè¡¨ç¤ºå…ƒç´ çš„æœ«å°¾ã€‚æœ€åï¼Œæ‰€æœ‰å®¹å™¨éƒ½æä¾›(è‡³å°‘)ä¸¤ç§è¿­ä»£å™¨:container::iteratorï¼šæä¾›äº†ä¸€ä¸ªè¯»/å†™è¿­ä»£å™¨container::const_iteratorï¼šæä¾›äº†ä¸€ä¸ªåªè¯»è¿­ä»£å™¨ä¾‹å­éå†ä¸€ä¸ª vector12345678910111213141516171819#include &lt;iostream&gt;#include &lt;vector&gt; int main()&#123; std::vector&lt;int&gt; vect; for (int count=0; count &lt; 6; ++count) vect.push_back(count); std::vector&lt;int&gt;::const_iterator it; // declare a read-only iterator it = vect.cbegin(); // assign it to the start of the vector while (it != vect.cend()) // while it hasn't reach the end &#123; std::cout &lt;&lt; *it &lt;&lt; \" \"; // print the value of the element it points to ++it; // and iterate to the next element &#125; std::cout &lt;&lt; '\\n';&#125;éå†list(åˆ—è¡¨)1234567891011121314151617181920#include &lt;iostream&gt;#include &lt;list&gt; int main()&#123; std::list&lt;int&gt; li; for (int count=0; count &lt; 6; ++count) li.push_back(count); std::list&lt;int&gt;::const_iterator it; // declare an iterator it = li.cbegin(); // assign it to the start of the list while (it != li.cend()) // while it hasn't reach the end &#123; std::cout &lt;&lt; *it &lt;&lt; \" \"; // print the value of the element it points to ++it; // and iterate to the next element &#125; std::cout &lt;&lt; '\\n';&#125;æ³¨æ„ï¼Œä»£ç å‡ ä¹ä¸å‘é‡çš„æƒ…å†µç›¸åŒï¼Œå°½ç®¡å‘é‡å’Œåˆ—è¡¨çš„å†…éƒ¨å®ç°å‡ ä¹å®Œå…¨ä¸åŒ!éå†ä¸€ä¸ªset(é›†åˆ)åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä»6ä¸ªæ•°å­—åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œå¹¶ä½¿ç”¨è¿­ä»£å™¨æ¥æ‰“å°é›†åˆä¸­çš„å€¼:1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;set&gt; int main()&#123; std::set&lt;int&gt; myset; myset.insert(7); myset.insert(2); myset.insert(-6); myset.insert(8); myset.insert(1); myset.insert(-4); std::set&lt;int&gt;::const_iterator it; // declare an iterator it = myset.cbegin(); // assign it to the start of the set while (it != myset.cend()) // while it hasn't reach the end &#123; std::cout &lt;&lt; *it &lt;&lt; \" \"; // print the value of the element it points to ++it; // and iterate to the next element &#125; std::cout &lt;&lt; '\\n';&#125;æ³¨æ„ï¼Œå°½ç®¡å¡«å……é›†åˆçš„æ–¹å¼ä¸å¡«å…… vector å’Œ listçš„æ–¹å¼ä¸åŒï¼Œä½†æ˜¯ç”¨äºè¿­ä»£é›†åˆå…ƒç´ çš„ä»£ç åœ¨æœ¬è´¨ä¸Šæ˜¯ç›¸åŒçš„ã€‚éå†map(æ˜ å°„)è¿™ä¸ªæœ‰ç‚¹å¤æ‚ã€‚Maps and multimaps å–å…ƒç´ å¯¹(å®šä¹‰ä¸ºstd::pair)ã€‚æˆ‘ä»¬ä½¿ç”¨make_pair()è¾…åŠ©å‡½æ•°æ¥è½»æ¾åœ°åˆ›å»ºå¯¹ã€‚*std::pair *å…è®¸é€šè¿‡ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæˆå‘˜è®¿é—®pairçš„å…ƒç´ ã€‚åœ¨æˆ‘ä»¬çš„mapä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨firstä½œä¸ºé”®ï¼Œsecondä½œä¸ºå€¼ã€‚1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;map&gt;#include &lt;string&gt; int main()&#123; std::map&lt;int, std::string&gt; mymap; mymap.insert(std::make_pair(4, \"apple\")); mymap.insert(std::make_pair(2, \"orange\")); mymap.insert(std::make_pair(1, \"banana\")); mymap.insert(std::make_pair(3, \"grapes\")); mymap.insert(std::make_pair(6, \"mango\")); mymap.insert(std::make_pair(5, \"peach\")); auto it&#123; mymap.cbegin() &#125;; // declare a const iterator and assign to start of vector while (it != mymap.cend()) // while it hasn't reach the end &#123; std::cout &lt;&lt; it-&gt;first &lt;&lt; \"=\" &lt;&lt; it-&gt;second &lt;&lt; \" \"; // print the value of the element it points to ++it; // and iterate to the next element &#125; std::cout &lt;&lt; '\\n';&#125;è¯·æ³¨æ„ï¼Œè¿­ä»£å™¨å¾ˆå®¹æ˜“éå†å®¹å™¨çš„æ¯ä¸ªå…ƒç´ ã€‚æ‚¨æ ¹æœ¬ä¸éœ€è¦å…³å¿ƒmapå¦‚ä½•å­˜å‚¨æ•°æ®!","categories":[],"tags":[]},{"title":"C&C++/å®¹å™¨ç±»STL","slug":"C&C++/å®¹å™¨ç±»STL","date":"2020-05-26T01:17:51.614Z","updated":"2020-05-26T02:44:38.151Z","comments":true,"path":"archives/ef749515.html","link":"","permalink":"https://longlongqin.github.io/archives/ef749515.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/16-2-stl-containers-overview/åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒSTLåº“æœ€å¸¸ç”¨çš„åŠŸèƒ½æ˜¯STLå®¹å™¨ç±»ã€‚å¦‚æœæ‚¨éœ€è¦å¿«é€Ÿå¤ä¹ ä¸€ä¸‹å®¹å™¨ç±»ï¼Œè¯·æŸ¥çœ‹10.6 â€“ Container classesã€‚STLåŒ…å«è®¸å¤šä¸åŒçš„å®¹å™¨ç±»ï¼Œå¯ä»¥åœ¨ä¸åŒçš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå®¹å™¨ç±»åˆ†ä¸ºä¸‰ä¸ªåŸºæœ¬ç±»åˆ«:åºåˆ—å®¹å™¨å…³è”å®¹å™¨å®¹å™¨é€‚é…å™¨åºåˆ—å®¹å™¨åºåˆ—å®¹å™¨æ˜¯ç»´æŠ¤å®¹å™¨ä¸­å…ƒç´ é¡ºåºçš„å®¹å™¨ç±»ã€‚åºåˆ—å®¹å™¨çš„ä¸€ä¸ªå®šä¹‰ç‰¹æ€§æ˜¯ï¼Œæ‚¨å¯ä»¥æ ¹æ®ä½ç½®é€‰æ‹©å…ƒç´ çš„æ’å…¥ä½ç½®ã€‚åºåˆ—å®¹å™¨æœ€å¸¸è§çš„ä¾‹å­æ˜¯æ•°ç»„ï¼šå¦‚æœæ‚¨å°†å››ä¸ªå…ƒç´ æ’å…¥åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œé‚£ä¹ˆè¿™äº›å…ƒç´ å°†æŒ‰ç…§æ‚¨æ’å…¥å®ƒä»¬çš„ç¡®åˆ‡é¡ºåºæ’åˆ—ã€‚åœ¨c++ 11ä¸­ï¼ŒSTLåŒ…å«6ä¸ªåºåˆ—å®¹å™¨:std::vectoråœ¨å¤´æ–‡ä»¶ï¼švectorä¸­std::dequeåœ¨å¤´æ–‡ä»¶ï¼šdequeä¸­std::arraystd::liststd::forward_liststd::basic_stringstd::vectorå¦‚æœä½ å­¦è¿‡ç‰©ç†ï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºçŸ¢é‡æ˜¯åŒæ—¶å…·æœ‰å¤§å°å’Œæ–¹å‘çš„å®ä½“ã€‚ä½†æ˜¯ï¼ŒSTLä¸­åä¸ºvectorçš„ç±»æ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œèƒ½å¤Ÿæ ¹æ®éœ€è¦å¢é•¿ä»¥åŒ…å«å®ƒçš„å…ƒç´ ã€‚vectorç±»å…è®¸é€šè¿‡æ“ä½œç¬¦[]éšæœºè®¿é—®å®ƒçš„å…ƒç´ ï¼Œå¹¶ä¸”æ’å…¥å’Œåˆ é™¤vectorä¸­æœ«å°¾çš„å…ƒç´ é€šå¸¸æ˜¯å¾ˆå¿«çš„ã€‚ä¸‹é¢çš„ç¨‹åºå°†6ä¸ªæ•°å­—æ’å…¥åˆ°ä¸€ä¸ªå‘é‡ä¸­ï¼Œå¹¶ä½¿ç”¨é‡è½½çš„[]è¿ç®—ç¬¦è®¿é—®å®ƒä»¬ä»¥æ‰“å°å®ƒä»¬ã€‚123456789101112131415161718#include &lt;vector&gt;#include &lt;iostream&gt; int main()&#123; std::vector&lt;int&gt; vect; for (int count=0; count &lt; 6; ++count) vect.push_back(10 - count); // insert at end of array for (int index=0; index &lt; vect.size(); ++index) std::cout &lt;&lt; vect[index] &lt;&lt; ' '; std::cout &lt;&lt; '\\n';&#125;/*ç»“æœ*/10 9 8 7 6 5std::dequedequeç±»(å‘éŸ³ä¸ºâ€œdeckâ€)æ˜¯ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ç±»ï¼Œå®ç°ä¸ºä¸€ä¸ªå¯ä»¥ä»ä¸¤ç«¯å¢é•¿çš„åŠ¨æ€æ•°ç»„ã€‚1234567891011121314151617181920#include &lt;iostream&gt;#include &lt;deque&gt; int main()&#123; std::deque&lt;int&gt; deq; for (int count=0; count &lt; 3; ++count) &#123; deq.push_back(count); // insert at end of array deq.push_front(10 - count); // insert at front of array &#125; for (int index=0; index &lt; deq.size(); ++index) std::cout &lt;&lt; deq[index] &lt;&lt; ' '; std::cout &lt;&lt; '\\n';&#125;/*ç»“æœ*/8 9 10 0 1 2std::liststd::listæ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„åºåˆ—å®¹å™¨ï¼Œç§°ä¸ºåŒé“¾è¡¨ï¼Œå…¶ä¸­å®¹å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½åŒ…å«æŒ‡å‘åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªå’Œå‰ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚std::liståªæä¾›å¯¹åˆ—è¡¨çš„å¼€å§‹å’Œç»“æŸçš„è®¿é—®ã€‚ä¸æä¾›éšæœºè®¿é—®ã€‚å¦‚æœæ‚¨æƒ³è¦åœ¨ä¸­é—´æ‰¾åˆ°ä¸€ä¸ªå€¼ï¼Œæ‚¨å¿…é¡»ä»ä¸€ç«¯å¼€å§‹å¹¶â€œéå†åˆ—è¡¨â€ï¼Œç›´åˆ°æ‰¾åˆ°æ‚¨æƒ³è¦æ‰¾åˆ°çš„å…ƒç´ ã€‚é€šå¸¸ä½¿ç”¨è¿­ä»£å™¨éå†åˆ—è¡¨ã€‚åˆ—è¡¨çš„ä¼˜ç‚¹æ˜¯ï¼Œå¦‚æœæ‚¨å·²ç»çŸ¥é“è¦å°†å…ƒç´ æ’å…¥åˆ°åˆ—è¡¨çš„ä½•å¤„ï¼Œé‚£ä¹ˆå°†å…ƒç´ æ’å…¥åˆ°åˆ—è¡¨ä¸­ä¼šéå¸¸å¿«ã€‚ç‰¹æ®Šçš„ï¼šstringå°½ç®¡STL string(å’Œwstring)ç±»é€šå¸¸ä¸ä½œä¸ºä¸€ç§åºåˆ—å®¹å™¨ç±»å‹åŒ…å«åœ¨å†…ï¼Œä½†å®ƒä»¬å®é™…ä¸Šæ˜¯ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå¸¦æœ‰char(æˆ–wchar)ç±»å‹æ•°æ®å…ƒç´ çš„å‘é‡ã€‚å…³è”å®¹å™¨å…³è”å®¹å™¨æ˜¯åœ¨å°†è¾“å…¥æ’å…¥å®¹å™¨æ—¶è‡ªåŠ¨å¯¹å…¶è¾“å…¥æ’åºçš„å®¹å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå…³è”å®¹å™¨ä½¿ç”¨æ“ä½œç¬¦&lt;æ¯”è¾ƒå…ƒç´ ã€‚setæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒå­˜å‚¨æƒŸä¸€çš„å…ƒç´ ï¼Œä¸å…è®¸æœ‰é‡å¤çš„å…ƒç´ ã€‚å…ƒç´ æ ¹æ®å®ƒä»¬çš„å€¼æ’åºã€‚multisetæ˜¯ä¸€ä¸ªå…è®¸é‡å¤å…ƒç´ çš„é›†åˆã€‚map(ä¹Ÿç§°ä¸ºå…³è”æ•°ç»„)æ˜¯ä¸€ä¸ªé›†åˆï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€å¯¹ï¼Œç§°ä¸ºé”®/å€¼å¯¹ã€‚è¯¥é”®ç”¨äºå¯¹æ•°æ®è¿›è¡Œæ’åºå’Œç´¢å¼•ï¼Œå¹¶ä¸”å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚å€¼æ˜¯å®é™…çš„æ•°æ®ã€‚multimap(ä¹Ÿç§°ä¸ºå­—å…¸) æ˜¯å…è®¸é‡å¤é”®çš„æ˜ å°„ã€‚æ‰€æœ‰é”®æŒ‰å‡åºæ’åˆ—ï¼Œä½ å¯ä»¥é€šè¿‡é”®æŸ¥æ‰¾å€¼ã€‚ç°å®ç”Ÿæ´»ä¸­çš„å­—å…¸æ˜¯å¤šç§å¤šæ ·çš„:é”®æ˜¯å•è¯ï¼Œè€Œå€¼æ˜¯å•è¯çš„å«ä¹‰ã€‚æœ‰äº›å•è¯å¯ä»¥æœ‰å¤šç§å«ä¹‰ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå­—å…¸æ˜¯å¤šç”¨é€”åœ°å›¾è€Œä¸æ˜¯åœ°å›¾çš„åŸå› ã€‚å®¹å™¨é€‚é…å™¨å®¹å™¨é€‚é…å™¨æ˜¯é€‚åº”ç‰¹å®šç”¨é€”çš„ç‰¹æ®Šé¢„å®šä¹‰å®¹å™¨ã€‚å…³äºå®¹å™¨é€‚é…å™¨çš„æœ‰è¶£ä¹‹å¤„åœ¨äºï¼Œæ‚¨å¯ä»¥é€‰æ‹©å¸Œæœ›å®ƒä»¬ä½¿ç”¨çš„åºåˆ—å®¹å™¨ã€‚stack(æ ˆ)æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå…ƒç´ åœ¨åè¿›å…ˆå‡ºä¸Šä¸‹æ–‡ä¸­æ“ä½œã€‚æ ˆé»˜è®¤ä½¿ç”¨dequeä½œä¸ºå®ƒä»¬çš„é»˜è®¤åºåˆ—å®¹å™¨(è¿™çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œå› ä¸ºvectorä¼¼ä¹æ›´é€‚åˆ)ï¼Œä½†å¯ä»¥ä½¿ç”¨vectoræˆ– listã€‚queue(é˜Ÿåˆ—)æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå…ƒç´ åœ¨FIFO(å…ˆå…¥å…ˆå‡º)ä¸Šä¸‹æ–‡ä¸­æ“ä½œï¼Œå…ƒç´ è¢«æ’å…¥(æ¨å…¥)åˆ°å®¹å™¨çš„åé¢ï¼Œç„¶åä»å‰é¢åˆ é™¤(å¼¹å‡º)ã€‚é˜Ÿåˆ—é»˜è®¤ä½¿ç”¨dequeï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨listã€‚*priority queue(ä¼˜å…ˆé˜Ÿåˆ—) * æ˜¯ä¸€ç§ä¿æŒå…ƒç´ æ’åºçš„é˜Ÿåˆ—(é€šè¿‡æ“ä½œç¬¦&lt;)ã€‚æ¨å…¥å…ƒç´ æ—¶ï¼Œå…ƒç´ åœ¨é˜Ÿåˆ—ä¸­æ’åºã€‚ä»å‰ç«¯åˆ é™¤ä¸€ä¸ªå…ƒç´ å°† è¿”å› ä¼˜å…ˆé˜Ÿåˆ—ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„é¡¹ã€‚","categories":[],"tags":[]},{"title":"C&C++/æ ‡å‡†åº“","slug":"C&C++/æ ‡å‡†åº“","date":"2020-05-26T00:48:20.949Z","updated":"2020-05-26T00:59:31.475Z","comments":true,"path":"archives/b054a192.html","link":"","permalink":"https://longlongqin.github.io/archives/b054a192.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/16-1-the-standard-template-library-stl/æ­å–œä½ ! æ‚¨å·²ç»å®Œæˆäº†æ•™ç¨‹çš„ä¸»è¦éƒ¨åˆ†!å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†è®¸å¤šc++è¯­è¨€çš„ä¸»è¦ç‰¹æ€§(åŒ…æ‹¬c++ 11/14/17è¯­è¨€æ‰©å±•ä¸­çš„ä¸€äº›ç‰¹æ€§)ã€‚å› æ­¤ï¼Œæ˜¾è€Œæ˜“è§çš„é—®é¢˜æ˜¯ï¼Œâ€œä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆ?â€ä½ å¯èƒ½æ³¨æ„åˆ°çš„ä¸€ä»¶äº‹æ˜¯ï¼Œå¾ˆå¤šç¨‹åºéƒ½åœ¨åå¤ä½¿ç”¨ç›¸åŒçš„æ¦‚å¿µ:å¾ªç¯ã€å­—ç¬¦ä¸²ã€æ•°ç»„ã€æ’åºç­‰ç­‰â€¦â€¦ æ‚¨å¯èƒ½è¿˜æ³¨æ„åˆ°ï¼Œä½¿ç”¨å®¹å™¨çš„éç±»ç‰ˆæœ¬å’Œé€šç”¨ç®—æ³•ç¼–å†™ç¨‹åºå¾ˆå®¹æ˜“å‡ºé”™ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œc++é™„å¸¦äº†ä¸€ä¸ªå……æ»¡äº†å¯é‡ç”¨ç±»çš„åº“ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­æ„å»ºç¨‹åºã€‚è¿™ä¸ªåº“ç§°ä¸ºc++æ ‡å‡†åº“ã€‚The Standard Libraryæ ‡å‡†åº“åŒ…å«ä¸€ç»„æä¾›æ¨¡æ¿å®¹å™¨ã€ç®—æ³•å’Œè¿­ä»£å™¨çš„ç±»ã€‚å¦‚æœæ‚¨éœ€è¦ä¸€ä¸ªå…¬å…±ç±»æˆ–ç®—æ³•ï¼Œæ ‡å‡†åº“ä¸­å¾ˆå¯èƒ½å°±æœ‰ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ‚¨å¯ä»¥åˆ©ç”¨è¿™äº›ç±»ï¼Œè€Œä¸éœ€è¦è‡ªå·±ç¼–å†™å’Œè°ƒè¯•è¿™äº›ç±»ï¼Œè€Œä¸”æ ‡å‡†åº“å¾ˆå¥½åœ°æä¾›äº†è¿™äº›ç±»çš„ç›¸å½“æœ‰æ•ˆçš„ç‰ˆæœ¬ã€‚ç¼ºç‚¹æ˜¯æ ‡å‡†åº“å¾ˆå¤æ‚ï¼Œè€Œä¸”å¯èƒ½æœ‰ç‚¹å“äººï¼Œå› ä¸ºæ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯æ¨¡æ¿åŒ–çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œæ‚¨å¯ä»¥å°†æ ‡å‡†åº“åˆ†æˆå°å—ï¼Œåªä½¿ç”¨éœ€è¦çš„éƒ¨åˆ†ï¼Œè€Œå¿½ç•¥å…¶ä»–éƒ¨åˆ†ï¼Œç›´åˆ°æ‚¨å‡†å¤‡å¥½å¤„ç†å®ƒã€‚åœ¨æ¥ä¸‹æ¥çš„å‡ èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä»é«˜å±‚æ¬¡ä¸Šäº†è§£æ ‡å‡†åº“æä¾›çš„å®¹å™¨ã€ç®—æ³•å’Œè¿­ä»£å™¨çš„ç±»å‹ã€‚åœ¨ä»¥åçš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ä¸€äº›ç‰¹å®šçš„ç±»ã€‚","categories":[],"tags":[]},{"title":"C&C++/stdï¼šï¼šshared_ptrå’Œstdï¼šï¼šweak_ptrçš„å¾ªç¯ä¾èµ–é—®é¢˜","slug":"C&C++/stdï¼šï¼šshared_ptrå’Œstdï¼šï¼šweak_ptrçš„å¾ªç¯ä¾èµ–é—®é¢˜","date":"2020-05-25T14:51:17.282Z","updated":"2020-05-25T16:55:14.593Z","comments":true,"path":"archives/8cf18577.html","link":"","permalink":"https://longlongqin.github.io/archives/8cf18577.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/15-7-circular-dependency-issues-with-stdshared_ptr-and-stdweak_ptr/åœ¨ä¸Šä¸€èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†std::shared_ptrå¦‚ä½•å…è®¸å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆå…±åŒæ‹¥æœ‰ç›¸åŒçš„èµ„æºã€‚ç„¶è€Œï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½ä¼šæˆä¸ºé—®é¢˜ã€‚è€ƒè™‘ä¸‹é¢çš„æƒ…å†µï¼Œä¸¤ä¸ªç‹¬ç«‹å¯¹è±¡ä¸­çš„å…±äº«æŒ‡é’ˆéƒ½æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡:12345678910111213141516171819202122232425262728293031323334353637383940414243#include &lt;iostream&gt;#include &lt;memory&gt; // for std::shared_ptr#include &lt;string&gt; class Person&#123; std::string m_name; std::shared_ptr&lt;Person&gt; m_partner; // initially created empty public: Person(const std::string &amp;name): m_name(name) &#123; std::cout &lt;&lt; m_name &lt;&lt; \" created\\n\"; &#125; ~Person() &#123; std::cout &lt;&lt; m_name &lt;&lt; \" destroyed\\n\"; &#125; friend bool partnerUp(std::shared_ptr&lt;Person&gt; &amp;p1, std::shared_ptr&lt;Person&gt; &amp;p2) &#123; if (!p1 || !p2) return false; p1-&gt;m_partner = p2; p2-&gt;m_partner = p1; std::cout &lt;&lt; p1-&gt;m_name &lt;&lt; \" is now partnered with \" &lt;&lt; p2-&gt;m_name &lt;&lt; \"\\n\"; return true; &#125;&#125;; int main()&#123; auto lucy = std::make_shared&lt;Person&gt;(\"Lucy\"); // create a Person named \"Lucy\" auto ricky = std::make_shared&lt;Person&gt;(\"Ricky\"); // create a Person named \"Ricky\" partnerUp(lucy, ricky); // Make \"Lucy\" point to \"Ricky\" and vice-versa return 0;&#125;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨make_shared()åŠ¨æ€åˆ†é…ä¸¤ä¸ªpersonï¼Œâ€œLucyâ€å’Œâ€œRickyâ€ (ä»¥ç¡®ä¿Lucyå’ŒRickyåœ¨main()çš„æœ«å°¾è¢«é”€æ¯) ã€‚ç„¶åæˆ‘ä»¬æŠŠå®ƒä»¬åˆèµ·æ¥(å³ã€‚è°ƒç”¨å‡½æ•°partnerUp)ã€‚è¿™å°†std::shared_ptrå†…çš„â€œLucyâ€æŒ‡å‘â€œRickyâ€ï¼Œè€Œstd::shared_ptrå†…çš„â€œRickyâ€æŒ‡å‘â€œLucyâ€ã€‚å…±äº«æŒ‡é’ˆæ˜¯ç”¨æ¥å…±äº«çš„ï¼Œæ‰€ä»¥lucyå…±äº«æŒ‡é’ˆå’ŒRickçš„m_partnerå…±äº«æŒ‡é’ˆéƒ½æŒ‡å‘â€œlucyâ€æ˜¯å¯ä»¥çš„(åä¹‹äº¦ç„¶)ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªç¨‹åºå¹¶æ²¡æœ‰æŒ‰ç…§é¢„æœŸæ‰§è¡Œ:123Lucy createdRicky createdLucy is now partnered with Rickyæ²¡æœ‰æŒ‰ç…§é¢„æœŸè¿›è¡Œèµ„æºé‡Šæ”¾ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿè°ƒç”¨partnerUp()ä¹‹åï¼Œæœ‰ä¸¤ä¸ªæŒ‡å‘â€œRickyâ€ (rickyå’Œlucyçš„m_partner) çš„å…±äº«æŒ‡é’ˆï¼Œä»¥åŠä¸¤ä¸ªæŒ‡å‘â€œLucyâ€ (Lucyå’ŒRickyçš„m_partner) çš„å…±äº«æŒ‡é’ˆã€‚åœ¨å‡½æ•°ç»“æŸæ—¶ï¼Œrickyå…±äº«æŒ‡é’ˆé¦–å…ˆè¶…å‡ºä½œç”¨åŸŸã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œrickyä¼šæ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–å…±äº«æŒ‡é’ˆå…±åŒæ‹¥æœ‰è¿™ä¸ªPersonâ€œRickyâ€ã€‚æ˜¯æœ‰çš„(Lucyçš„m_partner)ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œå®ƒæ²¡æœ‰é‡Šæ”¾â€œRickyâ€(å¦‚æœé‡Šæ”¾äº†ï¼Œé‚£ä¹ˆLucyçš„m_partnerå°†ä»¥ä¸€ä¸ªæ‚¬æµ®æŒ‡é’ˆç»“æŸ)ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæŒ‡å‘â€œRickyâ€(Lucyçš„m_partner)çš„å…±äº«æŒ‡é’ˆï¼Œè¿˜æœ‰ä¸¤ä¸ªæŒ‡å‘â€œLucyâ€(Lucyï¼Œå’ŒRickyçš„m_partner)çš„å…±äº«æŒ‡é’ˆã€‚æ¥ä¸‹æ¥ï¼Œlucyå…±äº«æŒ‡é’ˆè¶…å‡ºèŒƒå›´ï¼ŒåŒæ ·çš„äº‹æƒ…å‘ç”Ÿäº†ã€‚å…±äº«æŒ‡é’ˆlucyæ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–å…±äº«æŒ‡é’ˆå…±åŒæ‹¥æœ‰è¿™ä¸ªäººâ€œlucyâ€ã€‚æ˜¯æœ‰çš„(Rickyçš„m_partner)ï¼Œæ‰€ä»¥â€œLucyâ€æ²¡æœ‰è¢«é‡Šæ”¾ã€‚æ­¤æ—¶ï¼Œæœ‰ä¸€ä¸ªå…±äº«æŒ‡é’ˆæŒ‡å‘â€œLucyâ€(Rickyçš„m_partner)ï¼Œè¿˜æœ‰ä¸€ä¸ªå…±äº«æŒ‡é’ˆæŒ‡å‘â€œRickyâ€(Lucyçš„m_partner)ã€‚ç„¶åç¨‹åºå°±ç»“æŸäº†â€”â€” â€œLucyâ€ å’Œ â€œRickyâ€ éƒ½æ²¡æœ‰è¢«é‡Šæ”¾! ä»æœ¬è´¨ä¸Šè®²ï¼Œâ€œLucyâ€æœ€ç»ˆé˜»æ­¢äº† â€œRickyâ€è¢«æ¯ç­ï¼Œ â€œRickyâ€æœ€ç»ˆé˜»æ­¢äº†â€œLucyâ€è¢«æ¯ç­ã€‚äº‹å®è¯æ˜ï¼Œè¿™ç§æƒ…å†µåœ¨å…±äº«æŒ‡é’ˆå½¢æˆå¾ªç¯å¼•ç”¨çš„ä»»ä½•æ—¶å€™éƒ½å¯èƒ½å‘ç”Ÿã€‚å¾ªç¯å¼•ç”¨å¾ªç¯å¼•ç”¨æ˜¯ä¸€ç³»åˆ—å¼•ç”¨ï¼Œå…¶ä¸­æ¯ä¸ªå¯¹è±¡å¼•ç”¨ä¸‹ä¸€ä¸ªå¯¹è±¡ï¼Œæœ€åä¸€ä¸ªå¯¹è±¡å¼•ç”¨å›ç¬¬ä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œå¯¼è‡´å¼•ç”¨å¾ªç¯ã€‚è¿™äº›å¼•ç”¨ä¸éœ€è¦æ˜¯å®é™…çš„c++å¼•ç”¨â€”â€”å®ƒä»¬å¯ä»¥æ˜¯æŒ‡é’ˆã€æƒŸä¸€idæˆ–ä»»ä½•å…¶ä»–æ ‡è¯†ç‰¹å®šå¯¹è±¡çš„æ–¹æ³•ã€‚åœ¨å…±äº«æŒ‡é’ˆçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå¼•ç”¨å°†æ˜¯æŒ‡é’ˆã€‚è¿™æ­£æ˜¯æˆ‘ä»¬åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­çœ‹åˆ°çš„:â€œLucyâ€ æŒ‡å‘ â€œRickyâ€ï¼›è€Œ â€œRickyâ€ ä¹ŸæŒ‡å‘ â€œLucyâ€ ã€‚ç”¨ä¸‰ä¸ªæŒ‡é’ˆï¼Œå½“Aç‚¹åœ¨Bç‚¹ï¼ŒBç‚¹åœ¨Cç‚¹ï¼ŒCç‚¹åœ¨Aç‚¹ï¼Œä¼šå¾—åˆ°åŒæ ·çš„ç»“æœã€‚å…±äº«æŒ‡é’ˆå½¢æˆå¾ªç¯çš„å®é™…æ•ˆæœæ˜¯ï¼Œæ¯ä¸ªå¯¹è±¡æœ€ç»ˆä¿æŒä¸‹ä¸€ä¸ªå¯¹è±¡ä¸ºæ´»åŠ¨çŠ¶æ€ï¼ˆæœ€åä¸€ä¸ªå¯¹è±¡ä¿æŒç¬¬ä¸€ä¸ªå¯¹è±¡ä¸ºæ´»åŠ¨çŠ¶æ€ã€‚ï¼‰å› æ­¤ï¼Œåœ¨è¿™ä¸ªç³»åˆ—ä¸­æ²¡æœ‰å¯¹è±¡å¯ä»¥è¢«é‡Šæ”¾ï¼Œå› ä¸ºå®ƒä»¬éƒ½è®¤ä¸ºå…¶ä»–ä¸€äº›å¯¹è±¡ä»ç„¶éœ€è¦å®ƒ!å•ä¸ªstd::shared_pträ¹Ÿå¯ä»¥é€ æˆå¾ªç¯ä¾èµ–é—®é¢˜1234567891011121314151617181920#include &lt;iostream&gt;#include &lt;memory&gt; // for std::shared_ptr class Resource&#123;public: std::shared_ptr&lt;Resource&gt; m_ptr; // initially created empty Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125;&#125;; int main()&#123; auto ptr1 = std::make_shared&lt;Resource&gt;(); ptr1-&gt;m_ptr = ptr1; // â­m_ptrç°åœ¨æ­£åœ¨å…±äº«åŒ…å«å®ƒè‡ªå·±çš„èµ„æº return 0;&#125;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå½“ptr1è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œå®ƒä¸ä¼šé‡Šæ”¾èµ„æºï¼Œå› ä¸ºèµ„æºçš„m_ptræ­£åœ¨å…±äº«èµ„æºã€‚ç„¶åå°±æ²¡æœ‰äººå¯ä»¥åˆ é™¤èµ„æºäº†(m_ptræ°¸è¿œä¸ä¼šè¶…å‡ºä½œç”¨åŸŸï¼Œæ‰€ä»¥å®ƒæ°¸è¿œä¸ä¼šæœ‰æœºä¼š)ã€‚å› æ­¤ï¼Œç¨‹åºæ‰“å°:1Resource acquiredstd::weak_ptræ¥è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜std::weak_ptræ˜¯ä¸ºäº†è§£å†³ä¸Šé¢æè¿°çš„â€œå‘¨æœŸæ€§æ‰€æœ‰æƒâ€é—®é¢˜è€Œè®¾è®¡çš„ã€‚std::weak_ptræ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…â€”â€”å®ƒå¯ä»¥ åƒstd::shared_pträ¸€æ · è§‚å¯Ÿå’Œè®¿é—®(æˆ–å…¶ä»–std::weak_ptrs)ç›¸åŒçš„å¯¹è±¡ï¼Œä½†å®ƒä¸è¢«è§†ä¸ºæ‰€æœ‰è€…ã€‚è¯·è®°ä½ï¼Œå½“ä¸€ä¸ªstd::sharedæŒ‡é’ˆè¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œå®ƒåªè€ƒè™‘å…¶ä»–std::shared_ptræ˜¯å¦å…±åŒæ‹¥æœ‰è¯¥å¯¹è±¡ã€‚std: weak_pträ¸ç®—æ•°!è®©æˆ‘ä»¬ä½¿ç”¨std::weak_ptræ¥è§£å†³æœ¬èŠ‚ä¸­åˆšå¼€å§‹çš„ä¾‹å­:12345678910111213141516171819202122232425262728293031323334353637383940414243#include &lt;iostream&gt;#include &lt;memory&gt; // for std::shared_ptr and std::weak_ptr#include &lt;string&gt; class Person&#123; std::string m_name; std::weak_ptr&lt;Person&gt; m_partner; // â­â­â­note: This is now a std::weak_ptr public: Person(const std::string &amp;name): m_name(name) &#123; std::cout &lt;&lt; m_name &lt;&lt; \" created\\n\"; &#125; ~Person() &#123; std::cout &lt;&lt; m_name &lt;&lt; \" destroyed\\n\"; &#125; friend bool partnerUp(std::shared_ptr&lt;Person&gt; &amp;p1, std::shared_ptr&lt;Person&gt; &amp;p2) &#123; if (!p1 || !p2) return false; p1-&gt;m_partner = p2; p2-&gt;m_partner = p1; std::cout &lt;&lt; p1-&gt;m_name &lt;&lt; \" is now partnered with \" &lt;&lt; p2-&gt;m_name &lt;&lt; \"\\n\"; return true; &#125;&#125;; int main()&#123; auto lucy = std::make_shared&lt;Person&gt;(\"Lucy\"); auto ricky = std::make_shared&lt;Person&gt;(\"Ricky\"); partnerUp(lucy, ricky); return 0;&#125;ç»“æœï¼š12345Lucy createdRicky createdLucy is now partnered with RickyRicky destroyedLucy destroyedåœ¨åŠŸèƒ½ä¸Šï¼Œå®ƒçš„å·¥ä½œæ–¹å¼å‡ ä¹ä¸æœ‰é—®é¢˜çš„ç¤ºä¾‹ç›¸åŒã€‚ä½†æ˜¯ï¼Œç°åœ¨å½“rickyè¶…å‡ºèŒƒå›´æ—¶ï¼Œå®ƒä¼šçœ‹åˆ°æ²¡æœ‰å…¶ä»–std::shared_ptræŒ‡å‘â€œrickyâ€(æ¥è‡ªâ€œLucyâ€çš„std::weak_pträ¸è®¡ç®—)ã€‚å› æ­¤ï¼Œå®ƒå°†é‡Šæ”¾â€œRickyâ€ã€‚éœ²è¥¿ä¹Ÿæ˜¯å¦‚æ­¤ã€‚std::weak_ptr çš„ä½¿ç”¨std::weak_ptrç¼ºç‚¹æ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨(å®ƒä»¬æ²¡æœ‰æ“ä½œç¬¦-&gt;)ã€‚è¦ä½¿ç”¨std::weak_ptrï¼Œå¿…é¡»é¦–å…ˆå°†å…¶è½¬æ¢ä¸ºstd::shared_ptrã€‚ç„¶åå¯ä»¥ä½¿ç”¨std::shared_ptrã€‚è¦å°†std::weak_ptrè½¬æ¢ä¸ºstd::shared_ptrï¼Œå¯ä»¥ä½¿ç”¨lock()æˆå‘˜å‡½æ•°ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include &lt;iostream&gt;#include &lt;memory&gt; // for std::shared_ptr and std::weak_ptr#include &lt;string&gt; class Person&#123; std::string m_name; std::weak_ptr&lt;Person&gt; m_partner; // note: This is now a std::weak_ptr public: Person(const std::string &amp;name) : m_name(name) &#123; std::cout &lt;&lt; m_name &lt;&lt; \" created\\n\"; &#125; ~Person() &#123; std::cout &lt;&lt; m_name &lt;&lt; \" destroyed\\n\"; &#125; friend bool partnerUp(std::shared_ptr&lt;Person&gt; &amp;p1, std::shared_ptr&lt;Person&gt; &amp;p2) &#123; if (!p1 || !p2) return false; p1-&gt;m_partner = p2; p2-&gt;m_partner = p1; std::cout &lt;&lt; p1-&gt;m_name &lt;&lt; \" is now partnered with \" &lt;&lt; p2-&gt;m_name &lt;&lt; \"\\n\"; return true; &#125; const std::shared_ptr&lt;Person&gt; getPartner() const &#123; return m_partner.lock(); &#125; //â­â­â­ use lock() to convert weak_ptr to shared_ptr const std::string&amp; getName() const &#123; return m_name; &#125;&#125;; int main()&#123; auto lucy = std::make_shared&lt;Person&gt;(\"Lucy\"); auto ricky = std::make_shared&lt;Person&gt;(\"Ricky\"); partnerUp(lucy, ricky); auto partner = ricky-&gt;getPartner(); // get shared_ptr to Ricky's partner std::cout &lt;&lt; ricky-&gt;getName() &lt;&lt; \"'s partner is: \" &lt;&lt; partner-&gt;getName() &lt;&lt; '\\n'; return 0;&#125;ç»“æœï¼š123456Lucy createdRicky createdLucy is now partnered with RickyRicky&#39;s partner is: LucyRicky destroyedLucy destroyedæˆ‘ä»¬ä¸éœ€è¦æ‹…å¿ƒä¸std::shared_ptrå˜é‡â€œm_partnerâ€çš„å¾ªç¯ä¾èµ–å…³ç³»ï¼Œå› ä¸ºå®ƒåªæ˜¯å‡½æ•°å†…éƒ¨çš„ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚å®ƒæœ€ç»ˆå°†åœ¨å‡½æ•°ç»“æŸæ—¶è¶…å‡ºä½œç”¨åŸŸï¼Œå¼•ç”¨è®¡æ•°å°†é€’å‡1ã€‚å°ç»“std::hared_ptrå¯ä»¥åœ¨éœ€è¦å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆå…±äº«èµ„æºæ—¶ä½¿ç”¨ã€‚å½“æœ€åä¸€ä¸ªstd::shared_ptrè¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œèµ„æºå°†è¢«é‡Šæ”¾ã€‚std::weak_ptrå¯ä»¥åœ¨éœ€è¦æ™ºèƒ½æŒ‡é’ˆæ—¶ä½¿ç”¨ï¼Œè¯¥æŒ‡é’ˆå¯ä»¥æŸ¥çœ‹å’Œä½¿ç”¨å…±äº«èµ„æºï¼Œä½†ä¸å‚ä¸è¯¥èµ„æºçš„æ‰€æœ‰æƒ","categories":[],"tags":[]},{"title":"C&C++/æ™ºèƒ½æŒ‡é’ˆâ€œstdï¼šï¼šshared_ptrâ€","slug":"C&C++/æ™ºèƒ½æŒ‡é’ˆâ€œstdï¼šï¼šshared_ptrâ€","date":"2020-05-25T00:43:16.239Z","updated":"2020-05-25T08:43:42.578Z","comments":true,"path":"archives/96b73b83.html","link":"","permalink":"https://longlongqin.github.io/archives/96b73b83.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/15-6-stdshared_ptr/std::unique_ptræ™ºèƒ½æŒ‡é’ˆstd::unique_ptrï¼Œæ—¨åœ¨å•ç‹¬æ‹¥æœ‰å’Œç®¡ç†ä¸€ç§èµ„æºã€‚è€Œï¼Œæ™ºèƒ½æŒ‡é’ˆstd::shared_ptrï¼Œæ—¨åœ¨è§£å†³éœ€è¦å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆå…±åŒæ‹¥æœ‰ä¸€ä¸ªèµ„æºçš„æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤šä¸ªstd::shared_ptræŒ‡å‘åŒä¸€ä¸ªèµ„æºæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚std::shared_ptr ä½äºå¤´æ–‡ä»¶&lt;memory&gt; ä¹‹ä¸­ï¼ˆstd::unique_pträ¹Ÿåœ¨è¯¥å¤´æ–‡ä»¶ä¸­ï¼‰å½“å¤šä¸ªstd::shared_ptræŒ‡å‘åŒä¸€èµ„æºï¼Œä½¿ç”¨â€œå¤åˆ¶â€åœ¨å†…éƒ¨ï¼Œstd::shared_ptr ä¼šè·Ÿè¸ªå…±äº«èµ„æºçš„ std::shared_ptrçš„æ•°é‡ã€‚åªè¦æœ‰è‡³å°‘ä¸€ä¸ªstd::shared_ptræŒ‡å‘è¯¥èµ„æºï¼Œè¯¥èµ„æºå°±ä¸ä¼šè¢«é‡Šæ”¾ï¼Œå³ä½¿å•ä¸ªstd::shared_ptrè¢«é”€æ¯ã€‚åªæœ‰åœ¨è¿™äº›ä¼—å¤šæŒ‡å‘åŒä¸€èµ„æºçš„ std::shared_ptr ä¸­çš„æœ€åä¸€ä¸ª è¶…å‡ºå…¶ä½œç”¨åŸŸï¼ˆæˆ–è€… è¢«é‡æ–°åˆ†é…æŒ‡å‘å…¶ä»–ä¸œè¥¿ï¼‰æ—¶ï¼Œè¿™ä¸ªèµ„æºæ‰ä¼šè¢«é‡Šæ”¾ã€‚12345678910111213141516171819202122232425#include &lt;iostream&gt;#include &lt;memory&gt; // for std::shared_ptr class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125;&#125;; int main()&#123; // åˆ†é…ä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œå¹¶è®©std::shared_ptr æ‹¥æœ‰å®ƒ Resource *res = new Resource; std::shared_ptr&lt;Resource&gt; ptr1(res); &#123; std::shared_ptr&lt;Resource&gt; ptr2(ptr1); // ä½¿ç”¨å¤åˆ¶åˆå§‹åŒ– ä½¿å¦ä¸€ä¸ªstd::shared_ptræŒ‡å‘ç›¸åŒçš„å¯¹è±¡ std::cout &lt;&lt; \"Killing one shared pointer\\n\"; &#125; // ptr2è¶…å‡ºäº†èŒƒå›´ï¼Œä½†æ˜¯ä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘ç”Ÿ std::cout &lt;&lt; \"Killing another shared pointer\\n\"; return 0;&#125; // ptr1è¶…å‡ºäº†è¿™é‡Œçš„èŒƒå›´ï¼Œåˆ†é…çš„èµ„æºè¢«é”€æ¯ç»“æœï¼š1234Resource acquiredKilling one shared pointerKilling another shared pointerResource destroyedåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŠ¨æ€ èµ„æºå¯¹è±¡ï¼Œå¹¶è®¾ç½®äº†ä¸€ä¸ªåä¸ºptr1çš„std::shared_ptræ¥ç®¡ç†å®ƒã€‚åœ¨åµŒå¥—å—å†…éƒ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨å¤åˆ¶åˆå§‹åŒ– (std::shared_ptrå…è®¸è¿™æ ·åšï¼Œå› ä¸ºèµ„æºå¯ä»¥å…±äº«) æ¥åˆ›å»ºç¬¬äºŒä¸ªstd::shared_ptr (ptr2)ï¼Œå®ƒæŒ‡å‘ç›¸åŒçš„èµ„æºã€‚å½“ptr2è¶…å‡ºèŒƒå›´æ—¶ï¼Œèµ„æºä¸ä¼šè¢«é‡Šæ”¾ï¼Œå› ä¸ºptr1ä»ç„¶æŒ‡å‘èµ„æºã€‚å½“ptr1è¶…å‡ºèŒƒå›´æ—¶ï¼Œptr1æ³¨æ„åˆ°ä¸å†æœ‰std::shared_ptrç®¡ç†èµ„æºï¼Œå› æ­¤å®ƒé‡Šæ”¾èµ„æºã€‚æ³¨æ„ï¼Œæˆ‘ä»¬ä»ç¬¬ä¸€ä¸ªå…±äº«æŒ‡é’ˆåˆ›å»ºäº†ç¬¬äºŒä¸ªå…±äº«æŒ‡é’ˆ(ä½¿ç”¨å¤åˆ¶åˆå§‹åŒ–)ã€‚è¿™æ˜¯å¾ˆé‡è¦çš„ã€‚è€ƒè™‘ä»¥ä¸‹ç±»ä¼¼çš„æ–¹æ¡ˆ:123456789101112131415161718192021222324#include &lt;iostream&gt;#include &lt;memory&gt; // for std::shared_ptr class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125;&#125;; int main()&#123; Resource *res = new Resource; std::shared_ptr&lt;Resource&gt; ptr1(res); &#123; std::shared_ptr&lt;Resource&gt; ptr2(res); // â­ç›´æ¥ä»resåˆ›å»ºptr2(è€Œä¸æ˜¯ptr1) std::cout &lt;&lt; \"Killing one shared pointer\\n\"; &#125; // ptr2 goes out of scope here, and the allocated Resource is destroyed std::cout &lt;&lt; \"Killing another shared pointer\\n\"; return 0;&#125; // ptr1 goes out of scope here, and the allocated Resource is destroyed againç»“æœï¼š12345Resource acquiredKilling one shared pointerResource destroyedKilling another shared pointerResource destroyedè¿™é‡Œçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬åˆ†åˆ«åˆ›å»ºäº†ä¸¤ä¸ªstd::shared_ptrã€‚å› æ­¤ï¼Œå³ä½¿å®ƒä»¬éƒ½æŒ‡å‘ç›¸åŒçš„èµ„æºï¼Œå®ƒä»¬ä¹Ÿä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ã€‚ï¼ˆå…·ä½“è§£é‡Šåœ¨ä¸‹é¢ï¼‰ å½“ptr2è¶…å‡ºèŒƒå›´æ—¶ï¼Œå®ƒè®¤ä¸ºè‡ªå·±æ˜¯èµ„æºçš„å”¯ä¸€æ‰€æœ‰è€…ï¼Œå¹¶é‡Šæ”¾èµ„æºã€‚å½“ptr1ç¨åè¶…å‡ºèŒƒå›´æ—¶ï¼Œå®ƒä¼šè¿›è¡Œç›¸åŒçš„æ€è€ƒï¼Œå¹¶å†æ¬¡å°è¯•åˆ é™¤èµ„æºã€‚ç„¶ååäº‹å‘ç”Ÿäº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œå½“éœ€è¦å¤šä¸ªå…±äº«æŒ‡é’ˆæŒ‡å‘åŒä¸€èµ„æºæ—¶ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨å¤åˆ¶èµ‹å€¼æˆ–å¤åˆ¶åˆå§‹åŒ–è½»æ¾é¿å…è¿™ç§æƒ…å†µã€‚è§„åˆ™:å¦‚æœéœ€è¦å¤šä¸ªæŒ‡å‘åŒä¸€èµ„æºçš„std::shared_ptrï¼Œåˆ™å§‹ç»ˆå¤åˆ¶ä¸€ä¸ªç°æœ‰çš„std::shared_ptrã€‚std::make_sharedå°±åƒstd::make_unique()å¯ä»¥ç”¨æ¥åœ¨c++ 14ä¸­åˆ›å»ºä¸€ä¸ªstd::unique_ptrï¼›std::make_shared()å¯ä»¥ç”¨æ¥åˆ›å»ºä¸€ä¸ªstd::shared_ptrã€‚std::make_shared()åœ¨c++ 11ä¸­å¯ç”¨ã€‚è¿™æ˜¯æˆ‘ä»¬æœ€åˆçš„ä¾‹å­ï¼Œä½¿ç”¨std::make_shared():123456789101112131415161718192021222324#include &lt;iostream&gt;#include &lt;memory&gt; // for std::shared_ptr class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125;&#125;; int main()&#123; // åˆ†é…ä¸€ä¸ªResourceå¯¹è±¡ï¼Œå¹¶å°†å…¶æ‰€æœ‰æƒ ç»™std::shared_ptr auto ptr1 = std::make_shared&lt;Resource&gt;(); &#123; auto ptr2 = ptr1; // ä½¿ç”¨ptr1çš„å¤åˆ¶åˆå§‹åŒ–åˆ›å»ºptr2 std::cout &lt;&lt; \"Killing one shared pointer\\n\"; &#125; // ptr2 goes out of scope here, but nothing happens std::cout &lt;&lt; \"Killing another shared pointer\\n\"; return 0;&#125; // ptr1 goes out of scope here, and the allocated Resource is destroyedä½¿ç”¨std::make_shared()çš„åŸå› ä¸std::make_unique()ç›¸åŒã€‚std::make_shared()æ›´ç®€å•ã€æ›´å®‰å…¨ (ä½†æ— æ³•ä½¿ç”¨æ­¤æ–¹æ³•ç›´æ¥åˆ›å»ºæŒ‡å‘åŒä¸€èµ„æºçš„ä¸¤ä¸ªstd::shared_ptr)ã€‚std::shared_ptrå®é™…ä¸ŠåŒ…å«ä¸¤ä¸ªæŒ‡é’ˆstd::unique_ptrï¼Œå®ƒåœ¨å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆï¼›è€Œstd::shared_ptrï¼Œå®ƒåœ¨å†…éƒ¨ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆã€‚ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘è¢«ç®¡ç†çš„èµ„æºã€‚å…¶ä»–çš„ç‚¹æŒ‡å‘ä¸€ä¸ªâ€œæ§åˆ¶å—â€ã€‚å®ƒæ˜¯ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„å¯¹è±¡ï¼Œè·Ÿè¸ªä¸€å †ä¸œè¥¿ï¼ŒåŒ…æ‹¬æœ‰å¤šå°‘std::shared_ptræŒ‡å‘èµ„æºã€‚å½“é€šè¿‡std::shared_ptrçš„æ„é€ å‡½æ•° åˆ›å»ºstd::shared_ptræ—¶ï¼Œå°†åˆ†åˆ«åˆ†é… æ‰˜ç®¡å¯¹è±¡(é€šå¸¸ä¼ å…¥) å’Œ æ§åˆ¶å—(æ„é€ å‡½æ•°åˆ›å»º) çš„å†…å­˜ã€‚ä½†æ˜¯ï¼Œåœ¨ä½¿ç”¨std::make_shared()æ—¶ï¼Œå¯ä»¥å°†å…¶ä¼˜åŒ–ä¸ºå•ä¸ªå†…å­˜åˆ†é…ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ç‹¬ç«‹åˆ›å»ºä¸¤ä¸ªæŒ‡å‘ç›¸åŒèµ„æºçš„std::shared_pträ¼šå‡ºé”™è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆç‹¬ç«‹åœ°åˆ›å»ºä¸¤ä¸ªæŒ‡å‘ç›¸åŒèµ„æºçš„std::shared_pträ¼šç»™æˆ‘ä»¬å¸¦æ¥éº»çƒ¦ã€‚æ¯ä¸ªstd::shared_ptréƒ½æœ‰ä¸€ä¸ªæŒ‡å‘èµ„æºçš„æŒ‡é’ˆã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªstd::shared_ptrå°†ç‹¬ç«‹åœ°åˆ†é…å®ƒè‡ªå·±çš„æ§åˆ¶å—ï¼Œè¿™å°†è¡¨æ˜å®ƒæ˜¯å”¯ä¸€æ‹¥æœ‰è¯¥èµ„æºçš„æŒ‡é’ˆã€‚å› æ­¤ï¼Œå½“std::shared_ptrè¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œå®ƒå°†é‡Šæ”¾èµ„æºï¼Œè€Œæ²¡æœ‰æ„è¯†åˆ°è¿˜æœ‰å…¶ä»–std::shared_pträ¹Ÿè¯•å›¾ç®¡ç†è¯¥èµ„æºã€‚ä½†æ˜¯ï¼Œå½“ä½¿ç”¨å¤åˆ¶èµ‹å€¼å…‹éš†std::shared_ptræ—¶ï¼Œå¯ä»¥é€‚å½“åœ°æ›´æ–°æ§åˆ¶å—ä¸­çš„æ•°æ®ï¼Œä»¥æŒ‡ç¤ºç°åœ¨æœ‰é¢å¤–çš„std::shared_ptrå…±åŒç®¡ç†èµ„æºã€‚std::shared_ptrå¯ä»¥std::unique_pträ¸­åˆ›å»ºä¸€ä¸ªstd::unique_ptrå¯ä»¥é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„std::shared_ptræ„é€ å‡½æ•°è½¬æ¢æˆä¸€ä¸ªstd::shared_ptrï¼Œè¿™ä¸ªæ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªstd::unique_ptr r-valueã€‚std::unique_ptrçš„å†…å®¹å°†è¢«ç§»åŠ¨åˆ°std::shared_ptrã€‚ä½†æ˜¯ï¼Œstd::shared_pträ¸èƒ½å®‰å…¨åœ°è½¬æ¢ä¸ºstd::unique_ptrã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœè¦åˆ›å»ºä¸€ä¸ªå°†è¿”å›æ™ºèƒ½æŒ‡é’ˆçš„å‡½æ•°ï¼Œæœ€å¥½è¿”å›ä¸€ä¸ªstd::unique_ptrï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶å€™å°†å…¶åˆ†é…ç»™ä¸€ä¸ªstd::shared_ptrã€‚std::shared_ptrçš„å±å®³std::shared_ptré‡åˆ°äº†ä¸€äº›ä¸std::unique_ptrç›¸åŒçš„æŒ‘æˆ˜ï¼šå¦‚æœæ²¡æœ‰æ­£ç¡®åœ°å¤„ç†std::shared_ptr (å¯èƒ½æ˜¯å› ä¸ºå®ƒæ˜¯åŠ¨æ€åˆ†é…çš„ä¸”ä»æœªåˆ é™¤ï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸ºå®ƒæ˜¯åŠ¨æ€åˆ†é…ä¸”ä»æœªåˆ é™¤çš„å¯¹è±¡çš„ä¸€éƒ¨åˆ†) é‚£ä¹ˆå®ƒæ‰€ç®¡ç†çš„èµ„æºä¹Ÿä¸ä¼šè¢«é‡Šæ”¾ã€‚ä½¿ç”¨std::unique_ptrï¼Œæ‚¨åªéœ€è¦æ‹…å¿ƒä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆè¢«æ­£ç¡®å¤„ç†ã€‚å¯¹äºstd::shared_ptrï¼Œæ‚¨å¿…é¡»è€ƒè™‘æ‰€æœ‰è¿™äº›é—®é¢˜ã€‚å¦‚æœç®¡ç†èµ„æºçš„std::shared_pträ¸­çš„ä»»ä½•ä¸€ä¸ªæ²¡æœ‰è¢«æ­£ç¡®é”€æ¯ï¼Œèµ„æºå°†ä¸ä¼šè¢«æ­£ç¡®é‡Šæ”¾ã€‚std::shared_ptrå’Œæ•°ç»„åœ¨c++ 14å’Œæ›´æ—©çš„ç‰ˆæœ¬ä¸­ï¼Œstd::shared_pträ¸æ”¯æŒç®¡ç†æ•°ç»„ï¼Œä¸åº”è¯¥ç”¨äºç®¡ç†Cé£æ ¼çš„æ•°ç»„ã€‚ä»c++ 17å¼€å§‹ï¼Œstd::shared_ptrå°±æ”¯æŒæ•°ç»„äº†ã€‚ä½†æ˜¯ï¼Œä»c++ 17å¼€å§‹ï¼Œstd::make_sharedä»ç„¶ç¼ºä¹å¯¹æ•°ç»„çš„é€‚å½“æ”¯æŒï¼Œä¸åº”è¯¥ç”¨äºåˆ›å»ºå…±äº«æ•°ç»„ã€‚è¿™å¯èƒ½ä¼šåœ¨c++ 20ä¸­å¾—åˆ°è§£å†³ã€‚å°ç»“std::shared_ptræ˜¯ä¸ºéœ€è¦å¤šä¸ªæ™ºèƒ½æŒ‡é’ˆå…±åŒç®¡ç†åŒä¸€èµ„æºè€Œè®¾è®¡çš„ã€‚å½“ç®¡ç†èµ„æºçš„æœ€åä¸€ä¸ªstd::shared_ptrè¢«é”€æ¯æ—¶ï¼Œèµ„æºå°†è¢«é‡Šæ”¾ã€‚","categories":[],"tags":[]},{"title":"C&C++/æ™ºèƒ½æŒ‡é’ˆâ€œstdï¼šï¼šunique_ptrâ€","slug":"C&C++/æ™ºèƒ½æŒ‡é’ˆâ€œstdï¼šï¼šunique_ptrâ€","date":"2020-05-24T02:38:03.842Z","updated":"2020-05-24T09:34:02.132Z","comments":true,"path":"archives/e8f15917.html","link":"","permalink":"https://longlongqin.github.io/archives/e8f15917.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/15-5-stdunique_ptr/æ™ºèƒ½æŒ‡é’ˆæ˜¯ä¸€ä¸ªç®¡ç†åŠ¨æ€åˆ†é…å¯¹è±¡çš„ç±»ã€‚å°½ç®¡æ™ºèƒ½æŒ‡é’ˆå¯ä»¥æä¾›å…¶ä»–ç‰¹æ€§ï¼Œä½†æ™ºèƒ½æŒ‡é’ˆçš„å®šä¹‰ç‰¹å¾æ˜¯å®ƒç®¡ç†åŠ¨æ€åˆ†é…çš„èµ„æºï¼Œå¹¶ç¡®ä¿åœ¨é€‚å½“çš„æ—¶é—´(é€šå¸¸æ˜¯å½“æ™ºèƒ½æŒ‡é’ˆè¶…å‡ºèŒƒå›´æ—¶)æ­£ç¡®åœ°æ¸…ç†åŠ¨æ€åˆ†é…çš„å¯¹è±¡ã€‚å› æ­¤ï¼Œæ™ºèƒ½æŒ‡é’ˆæ°¸è¿œä¸åº”è¯¥è‡ªå·±åŠ¨æ€åˆ†é… (å¦åˆ™ï¼Œæ™ºèƒ½æŒ‡é’ˆå¯èƒ½æ²¡æœ‰è¢«é‡Šæ”¾ï¼Œè¿™æ„å‘³ç€å®ƒæ‹¥æœ‰çš„å¯¹è±¡å°†ä¸ä¼šè¢«é‡Šæ”¾ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„æ¼)ã€‚é€šè¿‡åœ¨æ ˆä¸Šåˆ†é…æ™ºèƒ½æŒ‡é’ˆ(ä½œä¸ºå±€éƒ¨å˜é‡æˆ–ç±»çš„ç»„åˆæˆå‘˜)ï¼Œæˆ‘ä»¬å¯ä»¥ä¿è¯å½“æ™ºèƒ½æŒ‡é’ˆåŒ…å«çš„å‡½æ•°æˆ–å¯¹è±¡ç»“æŸæ—¶ï¼Œå®ƒå°†æ­£ç¡®åœ°è¶…å‡ºä½œç”¨åŸŸï¼Œç¡®ä¿æ™ºèƒ½æŒ‡é’ˆæ‹¥æœ‰çš„å¯¹è±¡è¢«æ­£ç¡®é‡Šæ”¾ã€‚c++ 11æ ‡å‡†åº“é™„å¸¦äº†4ä¸ªæ™ºèƒ½æŒ‡é’ˆç±»:std::auto_ptr(ä½ ä¸åº”è¯¥ä½¿ç”¨å®ƒâ€”â€”å®ƒåœ¨c++ 17ä¸­è¢«åˆ é™¤äº†)ï¼Œstd::unique_ptr, â­std::shared_ptrstd::weak_ptrã€‚å…¶ä¸­ï¼Œstd::unique_ptræ˜¯ä½¿ç”¨æœ€å¤šçš„æ™ºèƒ½æŒ‡é’ˆç±»ï¼Œæ‰€ä»¥ï¼Œå°±ä¸»è¦è®²ä¸€ä¸‹è¿™ä¸ªæŒ‡é’ˆç±»ã€‚std::unique_ptråœ¨å¤´æ–‡ä»¶ &lt;memory&gt; ä¸­åœ¨C++11ä¸­ï¼Œstd::unique_ptræ˜¯std::auto_ptr çš„æ›¿ä»£å“ã€‚å®ƒåº”è¯¥ç”¨äºç®¡ç†ä»»ä½•ä¸è¢«å¤šä¸ªå¯¹è±¡å…±äº«çš„åŠ¨æ€åˆ†é…çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œstd::unique_ptråº”è¯¥å®Œå…¨æ‹¥æœ‰å®ƒç®¡ç†çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸å…¶ä»–ç±»å…±äº«è¯¥æ‰€æœ‰æƒã€‚ä¸€ä¸ªä¾‹å­ï¼š1234567891011121314151617#include &lt;iostream&gt;#include &lt;memory&gt; // for std::unique_ptr class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125;&#125;; int main()&#123; // allocate a Resource object and have it owned by std::unique_ptr std::unique_ptr&lt;Resource&gt; res&#123; new Resource() &#125;; //â­ return 0;&#125; // res goes out of scope here, and the allocated Resource is destroyedå› ä¸ºstd::unique_ptræ˜¯åœ¨è¿™é‡Œçš„æ ˆä¸Šåˆ†é…çš„ï¼Œæ‰€ä»¥å®ƒæœ€ç»ˆè‚¯å®šä¼šè¶…å‡ºèŒƒå›´ï¼Œå½“è¶…å‡ºèŒƒå›´æ—¶ï¼Œå®ƒå°†åˆ é™¤å®ƒæ­£åœ¨ç®¡ç†çš„èµ„æºã€‚std::unique_ptrå†…ç½®ä½¿ç”¨ç§»åŠ¨è¯­ä¹‰12345678910111213141516171819202122232425262728#include &lt;iostream&gt;#include &lt;memory&gt; // for std::unique_ptr class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125;&#125;; int main()&#123; std::unique_ptr&lt;Resource&gt; res1&#123; new Resource&#123;&#125; &#125;; // Resource created here std::unique_ptr&lt;Resource&gt; res2&#123;&#125;; // Start as nullptr std::cout &lt;&lt; \"res1 is \" &lt;&lt; (static_cast&lt;bool&gt;(res1) ? \"not null\\n\" : \"null\\n\"); std::cout &lt;&lt; \"res2 is \" &lt;&lt; (static_cast&lt;bool&gt;(res2) ? \"not null\\n\" : \"null\\n\"); // res2 = res1; //æ— æ³•ç¼–è¯‘: å› ä¸ºstd::unique_ptr ç¦æ­¢å¤åˆ¶èµ‹å€¼ res2 = std::move(res1); // res2å‡å®šä¸º æ‰€æœ‰è€…ï¼Œres1è®¾ç½®ä¸ºnull std::cout &lt;&lt; \"Ownership transferred\\n\"; std::cout &lt;&lt; \"res1 is \" &lt;&lt; (static_cast&lt;bool&gt;(res1) ? \"not null\\n\" : \"null\\n\"); std::cout &lt;&lt; \"res2 is \" &lt;&lt; (static_cast&lt;bool&gt;(res2) ? \"not null\\n\" : \"null\\n\"); return 0;&#125; // Resource åœ¨res2è¶…å‡ºä½œç”¨åŸŸæ—¶è¢«é”€æ¯ç»“æœï¼š1234567Resource acquiredres1 is not nullres2 is nullOwnership transferredres1 is nullres2 is not nullResource destroyedå› ä¸ºstd::unique_ptråœ¨è®¾è®¡æ—¶è€ƒè™‘åˆ°äº†ç§»åŠ¨è¯­ä¹‰ï¼Œæ‰€ä»¥ç¦ç”¨äº†å¤åˆ¶åˆå§‹åŒ–å’Œå¤åˆ¶èµ‹å€¼ã€‚å¦‚æœè¦ä¼ è¾“std::unique_ptrç®¡ç†çš„å†…å®¹ï¼Œå¿…é¡»ä½¿ç”¨ç§»åŠ¨è¯­ä¹‰ã€‚åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬é€šè¿‡std::move(å®ƒå°†res1è½¬æ¢ä¸ºr-valueï¼Œè¿™å°†è§¦å‘ä¸€ä¸ª ç§»åŠ¨èµ‹å€¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¤åˆ¶èµ‹å€¼)æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚è®¿é—®è¢«ç®¡ç†çš„å¯¹è±¡std::unique_ptræœ‰ä¸€ä¸ªé‡è½½çš„æ“ä½œç¬¦*å’Œæ“ä½œç¬¦-&gt;ï¼Œå¯ä»¥ç”¨æ¥è¿”å›è¢«ç®¡ç†çš„èµ„æºã€‚æ“ä½œç¬¦*è¿”å›å¯¹æ‰˜ç®¡èµ„æºçš„å¼•ç”¨ï¼›æ“ä½œç¬¦-&gt;è¿”å›ä¸€ä¸ªæŒ‡é’ˆã€‚è¯·è®°ä½ï¼Œstd::unique_ptrå¯èƒ½å¹¶ä¸æ€»æ˜¯ç®¡ç†ä¸€ä¸ªå¯¹è±¡ â€”â€” è¿™å¯èƒ½æ˜¯å› ä¸ºå®ƒåˆ›å»ºä¸ºç©º (ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°æˆ–ä¼ é€’nullpträ½œä¸ºå‚æ•°)ï¼›ä¹Ÿå¯èƒ½æ˜¯å› ä¸ºå®ƒæ‰€ç®¡ç†çš„èµ„æºè¢«ç§»åŠ¨åˆ°äº†å¦ä¸€ä¸ªstd::unique_ptrã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨è¿™ä¸¤ç§æ“ä½œç¬¦ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥æ£€æŸ¥std::unique_ptræ˜¯å¦ç¡®å®æœ‰èµ„æºã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™å¾ˆç®€å•ï¼šstd::unique_ptræœ‰ä¸€ä¸ªåˆ°boolçš„å¼ºåˆ¶è½¬æ¢ï¼Œå¦‚æœstd::unique_ptræ­£åœ¨ç®¡ç†ä¸€ä¸ªèµ„æºï¼Œè¯¥è½¬æ¢å°†è¿”å›trueã€‚123456789101112131415161718192021222324#include &lt;iostream&gt;#include &lt;memory&gt; // for std::unique_ptr class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125; friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Resource &amp;res) &#123; out &lt;&lt; \"I am a resource\\n\"; return out; &#125;&#125;; int main()&#123; std::unique_ptr&lt;Resource&gt; res&#123; new Resource&#123;&#125; &#125;; if (res) // ä½¿ç”¨éšå¼å¼ºåˆ¶è½¬æ¢ä¸ºbool ä»¥ç¡®ä¿resåŒ…å«èµ„æº std::cout &lt;&lt; *res &lt;&lt; '\\n'; // print the Resource that res is owningâ­â­â­ return 0;&#125;ç»“æœï¼š123Resource acquiredI am a resourceResource destroyedæ³¨æ„ï¼šä¸Šé¢ä¾‹å­ä¸­çš„ï¼šstd::cout &lt;&lt; *res &lt;&lt; &#39;\\n&#39;;è¿™ä¸€å¥ï¼Œå®é™…ä¸Šä¸ºï¼šstd::operator&lt;&lt;(operator&lt;&lt;(std::cout, res.operator*()), &#39;\\n&#39;);ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™é‡Œçš„æ“ä½œç¬¦* å®é™…ä¸Šæ˜¯è¿”å›çš„æ˜¯ å¼•ç”¨ã€‚åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é‡è½½æ“ä½œç¬¦*è·å–std::unique_ptr resæ‹¥æœ‰çš„èµ„æºå¯¹è±¡ï¼Œç„¶åå°†å…¶å‘é€åˆ°std::coutè¿›è¡Œæ‰“å°ã€‚std::unique_ptrå’Œæ•°ç»„ä¸std::auto_pträ¸åŒï¼Œstd::unique_ptrè¶³å¤Ÿæ™ºèƒ½ï¼Œå¯ä»¥çŸ¥é“æ˜¯ä½¿ç”¨æ ‡é‡åˆ é™¤è¿˜æ˜¯æ•°ç»„åˆ é™¤ï¼Œå› æ­¤std::unique_ptrå¯ä»¥ç”¨äºæ ‡é‡å¯¹è±¡å’Œæ•°ç»„ã€‚ä½†æ˜¯ï¼Œstd::arrayæˆ–std::vector(æˆ–std::string )å‡ ä¹æ€»æ˜¯æ¯”ä½¿ç”¨å›ºå®šæ•°ç»„ã€åŠ¨æ€æ•°ç»„æˆ–cé£æ ¼çš„å­—ç¬¦ä¸²çš„std::unique_ptræ›´å¥½çš„é€‰æ‹©ã€‚std::make_uniquec++ 14é™„å¸¦äº†ä¸€ä¸ªåä¸ºstd::make_unique()çš„é™„åŠ å‡½æ•°ã€‚è¿™ä¸ªæ¨¡æ¿å‡½æ•°æ„é€ ä¸€ä¸ªæ¨¡æ¿ç±»å‹çš„å¯¹è±¡ï¼Œå¹¶ç”¨ä¼ å…¥å‡½æ•°çš„å‚æ•°å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ã€‚123456789101112131415161718192021222324252627282930313233343536#include &lt;memory&gt; // for std::unique_ptr and std::make_unique#include &lt;iostream&gt; class Fraction&#123;private: int m_numerator&#123; 0 &#125;; int m_denominator&#123; 1 &#125;; public: Fraction(int numerator = 0, int denominator = 1) : m_numerator&#123; numerator &#125;, m_denominator&#123; denominator &#125; &#123; &#125; friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Fraction &amp;f1) &#123; out &lt;&lt; f1.m_numerator &lt;&lt; \"/\" &lt;&lt; f1.m_denominator; return out; &#125;&#125;; int main()&#123; // ç”¨åˆ†å­3å’Œåˆ†æ¯5åˆ›å»ºä¸€ä¸ªåŠ¨æ€åˆ†é…çš„Fraction std::unique_ptr&lt;Fraction&gt; f1&#123; std::make_unique&lt;Fraction&gt;(3, 5) &#125;; std::cout &lt;&lt; *f1 &lt;&lt; '\\n'; // åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º4çš„Fractionçš„åŠ¨æ€åˆ†é…æ•°ç»„ // åœ¨è¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªåŠ¨ç±»å‹æ¨æ–­æ¥è¾¾åˆ°å¾ˆå¥½çš„æ•ˆæœ auto f2&#123; std::make_unique&lt;Fraction[]&gt;(4) &#125;; std::cout &lt;&lt; f2[0] &lt;&lt; '\\n'; return 0;&#125;ç»“æœï¼š123&#x2F;50&#x2F;1ä½¿ç”¨std::make_unique()æ˜¯å¯é€‰çš„ï¼Œä½†å»ºè®®ä¸è¦è‡ªå·±åˆ›å»ºstd::unique_ptrã€‚è¿™æ˜¯å› ä¸ºä½¿ç”¨std::make_uniqueçš„ä»£ç æ›´ç®€å•ï¼Œè€Œä¸”éœ€è¦çš„è¾“å…¥ä¹Ÿæ›´å°‘(ä¸è‡ªåŠ¨ç±»å‹æ¨æ–­ä¸€èµ·ä½¿ç”¨æ—¶)ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜è§£å†³äº†ä¸€ä¸ªå¼‚å¸¸å®‰å…¨é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜å¯èƒ½æ˜¯ç”±äºc++æ²¡æœ‰æŒ‡å®šå‡½æ•°å‚æ•°çš„è®¡ç®—é¡ºåºè€Œå¯¼è‡´çš„ã€‚ä½¿ç”¨std::make_unique()è€Œä¸æ˜¯åˆ›å»ºstd::unique_ptrå¹¶è‡ªå·±ä½¿ç”¨newæ›´è¯¦ç»†çš„çœ‹å¼‚å¸¸å®‰å…¨é—®é¢˜å¯¹äºé‚£äº›æƒ³çŸ¥é“ä¸Šé¢æåˆ°çš„â€œå¼‚å¸¸å®‰å…¨é—®é¢˜â€æ˜¯ä»€ä¹ˆï¼Œè¿™é‡Œæ˜¯å¯¹è¿™ä¸ªé—®é¢˜çš„æè¿°ã€‚è€ƒè™‘è¿™æ ·ä¸€ä¸ªè¡¨è¾¾:1some_function(std::unique_ptr&lt;T&gt;(new T), function_that_can_throw_exception());ç¼–è¯‘å™¨åœ¨å¤„ç†è¿™ä¸ªè°ƒç”¨æ–¹é¢æœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚å®ƒå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„Tï¼Œç„¶åè°ƒç”¨function_that_can_throw_exception()ï¼Œç„¶ååˆ›å»ºstd::unique_ptræ¥ç®¡ç†åŠ¨æ€åˆ†é…çš„Tã€‚å¦‚æœfunction_that_can_throw_exception()æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆåˆ†é…çš„Tå°†ä¸ä¼šè¢«å›æ”¶ï¼Œå› ä¸ºæ‰§è¡Œå›æ”¶çš„æ™ºèƒ½æŒ‡é’ˆè¿˜æ²¡æœ‰åˆ›å»ºã€‚è¿™å¯¼è‡´äº†Tè¢«æ³„éœ²ã€‚std::make_unique()ä¸ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå¯¹è±¡Tçš„åˆ›å»ºå’Œstd::unique_ptrçš„åˆ›å»ºéƒ½å‘ç”Ÿåœ¨std::make_unique()å‡½æ•°ä¸­ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œæ‰§è¡Œé¡ºåºæ²¡æœ‰æ­§ä¹‰ã€‚ä»å‡½æ•°è¿”å›std::unique_ptrstd::unique_ptrå¯ä»¥å®‰å…¨åœ°ä»ä¸€ä¸ªå‡½æ•°è¿”å›å€¼:12345678910111213std::unique_ptr&lt;Resource&gt; createResource()&#123; return std::make_unique&lt;Resource&gt;();&#125; int main()&#123; std::unique_ptr&lt;Resource&gt; ptr&#123; createResource() &#125;; // do whatever return 0;&#125;åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒcreateResource()æŒ‰å€¼è¿”å›std::unique_ptrã€‚å¦‚æœæœªå°†æ­¤å€¼èµ‹ç»™ä»»ä½•å€¼ï¼Œåˆ™ä¸´æ—¶è¿”å›å€¼å°†è¶…å‡ºèŒƒå›´ï¼Œèµ„æºå°†è¢«æ¸…ç†ã€‚å¦‚æœå®ƒè¢«èµ‹å€¼ (å¦‚main()æ‰€ç¤º)ï¼Œåœ¨c++ 14æˆ–æ›´æ—©çš„ç‰ˆæœ¬ä¸­ï¼Œå°†ä½¿ç”¨moveè¯­ä¹‰å°†èµ„æºä»è¿”å›å€¼è½¬ç§»åˆ°èµ‹å€¼çš„å¯¹è±¡(åœ¨ä¸Šé¢çš„ç¤ºä¾‹pträ¸­)è€Œåœ¨c++ 17æˆ–æ›´æ–°ç‰ˆæœ¬ä¸­ï¼Œå°†çœç•¥è¿”å›ã€‚è¿™ä½¿å¾—é€šè¿‡std::unique_ptrè¿”å›èµ„æºæ¯”è¿”å›åŸå§‹æŒ‡é’ˆå®‰å…¨å¾—å¤š!é€šå¸¸ï¼Œæ‚¨ä¸åº”è¯¥é€šè¿‡ æŒ‡é’ˆ æˆ– å¼•ç”¨ è¿”å›std::unique_ptr(é™¤éæ‚¨æœ‰ç‰¹å®šçš„å¼ºåˆ¶ç†ç”±)ã€‚,åº”è¯¥ç›´æ¥è¿”å›std::unique_ptrå°†std::unique_pträ¼ é€’ç»™ä¸€ä¸ªå‡½æ•°è·å¾—ä¼ å…¥å‚æ•°çš„æ‰€æœ‰æƒå¦‚æœå¸Œæœ›å‡½æ•°è·å¾—æŒ‡é’ˆå†…å®¹çš„æ‰€æœ‰æƒï¼Œè¯·æŒ‰å€¼ä¼ é€’std::unique_ptrã€‚æ³¨æ„ï¼Œç”±äºå·²ç»ç¦ç”¨äº†å¤åˆ¶è¯­ä¹‰ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨std::moveæ¥å®é™…ä¼ å…¥å˜é‡ï¼ˆå¦‚æœä¼ å…¥å‚æ•°æ˜¯å·¦å€¼æ—¶ï¼Œéœ€è¦ï¼‰ã€‚12345678910111213141516171819202122232425262728293031#include &lt;memory&gt; // for std::unique_ptr class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125; friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Resource &amp;res) &#123; out &lt;&lt; \"I am a resource\\n\"; return out; &#125;&#125;; void takeOwnership(std::unique_ptr&lt;Resource&gt; res) â­&#123; if (res) std::cout &lt;&lt; *res &lt;&lt; '\\n';&#125; // the Resource is destroyed here int main()&#123; auto ptr&#123; std::make_unique&lt;Resource&gt;() &#125;; // takeOwnership(ptr); è¿™ä¸èµ·ä½œç”¨ï¼Œéœ€è¦ä½¿ç”¨ç§»åŠ¨è¯­ä¹‰â­â­ takeOwnership(std::move(ptr)); // ok: use move semantics std::cout &lt;&lt; \"Ending program\\n\"; return 0;&#125;ç»“æœï¼š1234Resource acquiredI am a resourceResource destroyedEnding programæ³¨æ„ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒResourceçš„æ‰€æœ‰æƒè¢«è½¬ç§»åˆ°takeOwnership()ï¼Œå› æ­¤Resourceåœ¨takeOwnership()çš„æœ«å°¾è€Œä¸æ˜¯main()çš„æœ«å°¾è¢«é”€æ¯ã€‚ä¸è·å¾—ä¼ å…¥å‚æ•°çš„æ‰€æœ‰æƒä½†æ˜¯ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨ä¸å¸Œæœ›å‡½æ•°å–å¾—èµ„æºçš„æ‰€æœ‰æƒã€‚è™½ç„¶å¯ä»¥é€šè¿‡å¼•ç”¨ä¼ é€’std::unique_ptr(è¿™å°†å…è®¸å‡½æ•°ä½¿ç”¨å¯¹è±¡è€Œä¸æ‹¥æœ‰è¯¥å¯¹è±¡)ï¼Œä½†æ˜¯åº”è¯¥åªåœ¨è°ƒç”¨çš„å‡½æ•°å¯èƒ½æ›´æ”¹æˆ–æ”¹å˜è¢«ç®¡ç†çš„å¯¹è±¡æ—¶æ‰è¿™æ ·åšã€‚ç›¸åï¼Œæœ€å¥½åªä¼ é€’èµ„æºæœ¬èº«(é€šè¿‡æŒ‡é’ˆæˆ–å¼•ç”¨ä¼ é€’ï¼Œè¿™å–å†³äºnullæ˜¯å¦ä¸ºæœ‰æ•ˆå‚æ•°)ã€‚è¿™å…è®¸å‡½æ•°ä¸çŸ¥é“è°ƒç”¨æ–¹æ˜¯å¦‚ä½•ç®¡ç†å…¶èµ„æºçš„ã€‚è¦ä»std::unique_ptrè·å¾—åŸå§‹èµ„æºæŒ‡é’ˆï¼Œå¯ä»¥ä½¿ç”¨get()æˆå‘˜å‡½æ•°:123456789101112131415161718192021222324252627282930313233#include &lt;memory&gt; // for std::unique_ptr#include &lt;iostream&gt; class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125; friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Resource &amp;res) &#123; out &lt;&lt; \"I am a resource\\n\"; return out; &#125;&#125;; // è¯¥å‡½æ•°åªä½¿ç”¨è¯¥èµ„æºï¼Œå› æ­¤æˆ‘ä»¬å°†æ¥å—æŒ‡å‘è¯¥èµ„æºçš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯å¯¹æ•´ä¸ªstd::unique_ptr&lt; resource &gt;çš„å¼•ç”¨void useResource(Resource *res)&#123; if (res) std::cout &lt;&lt; *res &lt;&lt; '\\n';&#125; int main()&#123; auto ptr&#123; std::make_unique&lt;Resource&gt;() &#125;; useResource(ptr.get()); // æ³¨æ„:è¿™é‡Œä½¿ç”¨get()è·å–æŒ‡å‘èµ„æºçš„æŒ‡é’ˆ std::cout &lt;&lt; \"Ending program\\n\"; return 0;&#125; // The Resource is destroyed hereç»“æœï¼š1234Resource acquiredI am a resourceEnding programResource destroyedstd::unique_ptr å’Œ ç±»å½“ç„¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨std::unique_pträ½œä¸ºç±»çš„ç»„åˆæˆå‘˜ã€‚è¿™æ ·ï¼Œæ‚¨å°±ä¸å¿…æ‹…å¿ƒç±»ææ„å‡½æ•°ä¼šä¸ä¼šåˆ é™¤åŠ¨æ€å†…å­˜ï¼Œå› ä¸ºstd::unique_ptrå°†åœ¨ç±»å¯¹è±¡è¢«é”€æ¯æ—¶è‡ªåŠ¨é”€æ¯ã€‚ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨çš„ç±»å¯¹è±¡æ˜¯åŠ¨æ€åˆ†é…çš„ï¼Œé‚£ä¹ˆå¯¹è±¡æœ¬èº«å°±æœ‰å¯èƒ½æ²¡æœ‰è¢«æ­£ç¡®é‡Šæ”¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå³ä½¿ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆä¹Ÿæ— æµäºäº‹ã€‚æ»¥ç”¨std:: unique_ptræœ‰ä¸¤ç§å®¹æ˜“è¯¯ç”¨std::unique_ptrçš„æ–¹æ³•ï¼Œè¿™ä¸¤ç§æ–¹æ³•éƒ½å¾ˆå®¹æ˜“é¿å…ã€‚é¦–å…ˆï¼Œä¸è¦è®©å¤šä¸ªç±»ç®¡ç†ç›¸åŒçš„èµ„æºã€‚ä¾‹å¦‚:123Resource *res&#123; new Resource() &#125;;std::unique_ptr&lt;Resource&gt; res1&#123; res &#125;;std::unique_ptr&lt;Resource&gt; res2&#123; res &#125;;è™½ç„¶è¿™åœ¨è¯­æ³•ä¸Šæ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯æœ€ç»ˆçš„ç»“æœæ˜¯res1å’Œres2éƒ½å°†å°è¯•åˆ é™¤èµ„æºï¼Œè¿™å°†å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚å…¶æ¬¡ï¼Œä¸è¦åœ¨std::unique_pträ¸­æ‰‹åŠ¨åˆ é™¤èµ„æºã€‚123Resource *res&#123; new Resource() &#125;;std::unique_ptr&lt;Resource&gt; res1&#123; res &#125;;delete res;å¦‚æœè¿™æ ·åšï¼Œé‚£ä¹ˆstd::unique_ptrå°†å°è¯•åˆ é™¤å·²ç»åˆ é™¤çš„èµ„æºï¼Œå†æ¬¡å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚æ³¨æ„ï¼Œstd::make_unique()å¯ä»¥é˜²æ­¢ä¸Šè¿°ä¸¤ç§æƒ…å†µåœ¨æ— æ„ä¸­å‘ç”Ÿã€‚","categories":[],"tags":[]},{"title":"C&C++/stdï¼šï¼šmove","slug":"C&C++/stdï¼šï¼šmove","date":"2020-05-24T02:00:58.451Z","updated":"2020-05-24T02:34:45.481Z","comments":true,"path":"archives/323fcdb7.html","link":"","permalink":"https://longlongqin.github.io/archives/323fcdb7.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/15-4-stdmove/ä¸€æ—¦æ‚¨å¼€å§‹æ›´ç»å¸¸åœ°ä½¿ç”¨moveè¯­ä¹‰ï¼Œæ‚¨å°±ä¼šå¼€å§‹å‘ç°éœ€è¦è°ƒç”¨moveè¯­ä¹‰çš„æƒ…å†µï¼Œä½†æ˜¯æ‚¨å¿…é¡»ä½¿ç”¨çš„å¯¹è±¡æ˜¯l-valuesï¼Œè€Œä¸æ˜¯r-valuesã€‚ä»¥ä¸‹é¢çš„swapå‡½æ•°ä¸ºä¾‹:1234567891011121314151617181920212223242526#include &lt;iostream&gt;#include &lt;string&gt; template&lt;class T&gt;void myswap(T&amp; a, T&amp; b) &#123; T tmp &#123; a &#125;; // invokes copy constructor a = b; // invokes copy assignment b = tmp; // invokes copy assignment&#125; int main()&#123; std::string x&#123; \"abc\" &#125;; std::string y&#123; \"de\" &#125;; std::cout &lt;&lt; \"x: \" &lt;&lt; x &lt;&lt; '\\n'; std::cout &lt;&lt; \"y: \" &lt;&lt; y &lt;&lt; '\\n'; myswap(x, y); std::cout &lt;&lt; \"x: \" &lt;&lt; x &lt;&lt; '\\n'; std::cout &lt;&lt; \"y: \" &lt;&lt; y &lt;&lt; '\\n'; return 0;&#125;ä¼ å…¥ä¸¤ä¸ªç±»å‹ä¸ºTçš„å¯¹è±¡(åœ¨æœ¬ä¾‹ä¸­æ˜¯std::string)ï¼Œè¿™ä¸ªå‡½æ•°é€šè¿‡åˆ›å»ºä¸‰ä¸ªå‰¯æœ¬æ¥äº¤æ¢å®ƒä»¬çš„å€¼ã€‚å› æ­¤ï¼Œè¿™ä¸ªç¨‹åºæ‰“å°:1234x: abcy: dex: dey: abcæ­£å¦‚æˆ‘ä»¬ä¸ŠèŠ‚è¯¾æ‰€ç¤ºï¼Œå¤åˆ¶çš„æ•ˆç‡å¯èƒ½å¾ˆä½ã€‚è¿™ä¸ªç‰ˆæœ¬çš„swapä¼šå¤åˆ¶3ä»½ã€‚è¿™ä¼šå¯¼è‡´å¤§é‡çš„å­—ç¬¦ä¸²åˆ›å»ºå’Œé”€æ¯ï¼Œè¿™æ˜¯ç¼“æ…¢çš„ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œæ²¡æœ‰å¿…è¦è¿›è¡Œå¤åˆ¶ã€‚æˆ‘ä»¬çœŸæ­£è¦åšçš„æ˜¯äº¤æ¢aå’Œbçš„å€¼ï¼Œç”¨3æ­¥å°±å¯ä»¥å®Œæˆ! å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬ä»å¤åˆ¶è¯­ä¹‰åˆ‡æ¢åˆ°ç§»åŠ¨è¯­ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿æˆ‘ä»¬çš„ä»£ç æ›´å…·æœ‰æ€§èƒ½ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œå‚æ•°aå’Œbæ˜¯l-valueå¼•ç”¨ï¼Œè€Œä¸æ˜¯r-valueå¼•ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡æœ‰åŠæ³•è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œæ¥æ›¿æ¢ å¤åˆ¶æ„é€ å‡½æ•°å’Œå¤åˆ¶èµ‹å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è·å¾—å¤åˆ¶æ„é€ å‡½æ•°å’Œå¤åˆ¶èµ‹å€¼è¡Œä¸ºã€‚æˆ‘ä»¬è¯¥æ€ä¹ˆåŠ?std::moveåœ¨c++ 11ä¸­ï¼Œstd::moveæ˜¯ä¸€ä¸ªæ ‡å‡†çš„åº“å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨åªæœ‰ä¸€ä¸ªâ€”â€”å°†å®ƒçš„å‚æ•°è½¬æ¢æˆr-valueã€‚æˆ‘ä»¬å¯ä»¥å‘std::moveä¼ é€’ä¸€ä¸ªl-valueï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªr-valueå¼•ç”¨ã€‚std::moveåœ¨å¤´æ–‡ä»¶ï¼šutilityä¸­å®šä¹‰ã€‚ä¸‹é¢æ˜¯ä¸ä¸Šé¢ç›¸åŒçš„ç¨‹åºï¼Œä½†æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªmyswap()å‡½æ•°ï¼Œè¯¥å‡½æ•°ä½¿ç”¨std::moveå°†æˆ‘ä»¬çš„l-valuesè½¬æ¢æˆr-valuesï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨ç§»åŠ¨è¯­ä¹‰:123456789101112131415161718192021222324252627#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;utility&gt; // for std::moveâ­ template&lt;class T&gt;void myswap(T&amp; a, T&amp; b) &#123; T tmp &#123; std::move(a) &#125;; // invokes move constructorâ­ a = std::move(b); // invokes move assignmentâ­ b = std::move(tmp); // invokes move assignmentâ­&#125; int main()&#123; std::string x&#123; \"abc\" &#125;; std::string y&#123; \"de\" &#125;; std::cout &lt;&lt; \"x: \" &lt;&lt; x &lt;&lt; '\\n'; std::cout &lt;&lt; \"y: \" &lt;&lt; y &lt;&lt; '\\n'; myswap(x, y); std::cout &lt;&lt; \"x: \" &lt;&lt; x &lt;&lt; '\\n'; std::cout &lt;&lt; \"y: \" &lt;&lt; y &lt;&lt; '\\n'; return 0;&#125;ç»“æœï¼š1234x: abcy: dex: dey: abcè¿™æ ·æ›´æœ‰æ•ˆç‡ã€‚åˆå§‹åŒ–tmpæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨std::moveå°†l-valueå˜é‡xè½¬æ¢ä¸ºr-valueï¼Œè€Œä¸æ˜¯å¤åˆ¶xã€‚ç”±äºå‚æ•°æ˜¯r-valueï¼Œå› æ­¤è°ƒç”¨moveè¯­ä¹‰ï¼Œå¹¶å°†xç§»åŠ¨åˆ°tmpä¸­ã€‚é€šè¿‡å¤šæ¬¡äº¤æ¢ï¼Œå˜é‡xçš„å€¼è¢«ç§»åŠ¨åˆ°y, yçš„å€¼ä¹Ÿè¢«ç§»åŠ¨åˆ°xã€‚åœ¨std::vectorä¸­ä½¿ç”¨std::moveæˆ‘ä»¬è¿˜å¯ä»¥åœ¨å¡«å……å®¹å™¨çš„å…ƒç´ æ—¶ä½¿ç”¨std::moveï¼Œä¾‹å¦‚ä½¿ç”¨ l-value å¡«å……std::vectorã€‚åœ¨æ¥ä¸‹æ¥çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨å¤åˆ¶è¯­ä¹‰å‘ å‘é‡ æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚ç„¶åä½¿ç”¨ç§»åŠ¨è¯­ä¹‰å‘å‘é‡æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚12345678910111213141516171819202122232425262728293031323334#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;utility&gt; // for std::move#include &lt;vector&gt; int main()&#123; std::vector&lt;std::string&gt; v; std::string str = \"Knock\"; std::cout &lt;&lt; \"Copying str\\n\"; v.push_back(str); // calls l-value version of push_back, which copies str into the array element std::cout &lt;&lt; \"str: \" &lt;&lt; str &lt;&lt; '\\n'; std::cout &lt;&lt; \"vector: \" &lt;&lt; v[0] &lt;&lt; '\\n'; std::cout &lt;&lt; \"\\nMoving str\\n\"; v.push_back(std::move(str)); // calls r-value version of push_back, which moves str into the array element std::cout &lt;&lt; \"str: \" &lt;&lt; str &lt;&lt; '\\n'; std::cout &lt;&lt; \"vector:\" &lt;&lt; v[0] &lt;&lt; ' ' &lt;&lt; v[1] &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/Copying strstr: Knockvector: KnockMoving strstr: //â­â­â­vector: Knock Knockåœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‘push_back()ä¼ é€’ä¸€ä¸ªl-valueï¼Œå› æ­¤å®ƒä½¿ç”¨å¤åˆ¶è¯­ä¹‰å‘å‘é‡æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚ç”±äºè¿™ä¸ªåŸå› ï¼Œsträ¸­çš„å€¼è¢«ä¿ç•™äº†ã€‚åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å‘push_back()ä¼ é€’äº†ä¸€ä¸ªr-value (å®é™…ä¸Šæ˜¯ä¸€ä¸ªé€šè¿‡std::moveè½¬æ¢çš„lå€¼)ï¼Œå› æ­¤å®ƒä½¿ç”¨moveè¯­ä¹‰å‘å‘é‡æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚è¿™æ›´æœ‰æ•ˆï¼Œå› ä¸ºå‘é‡å…ƒç´ å¯ä»¥çªƒå–å­—ç¬¦ä¸²çš„å€¼ï¼Œè€Œä¸å¿…å¤åˆ¶å®ƒã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œsträ¸ºç©ºã€‚æ³¨æ„ï¼Œåœ¨ä½¿ç”¨ç§»åŠ¨è¯­ä¹‰åï¼Œè¢«ä½¿ç”¨çš„å¯¹è±¡ï¼ˆåœ¨æœ¬ä¾‹ä¸ºstrï¼‰ä¸­çš„æ•°æ®ä¼šè¢«çªƒå–ç»™ ä½¿ç”¨ç§»åŠ¨è¯­ä¹‰çš„å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œç§»åŠ¨è¯­å¥æ‰§è¡Œä¹‹åï¼Œè¢«ä½¿ç”¨çš„å¯¹è±¡çš„å€¼å°†ä¸å¤å­˜åœ¨ã€‚std::moveåœ¨ä»€ä¹ˆåœ°æ–¹æ¯”è¾ƒæœ‰ç”¨ï¼Ÿåœ¨å¯¹å…ƒç´ æ•°ç»„è¿›è¡Œæ’åºæ—¶ï¼Œstd::moveä¹Ÿå¾ˆæœ‰ç”¨ã€‚è®¸å¤šæ’åºç®—æ³•(å¦‚é€‰æ‹©æ’åºå’Œå†’æ³¡æ’åº)éƒ½æ˜¯é€šè¿‡äº¤æ¢å…ƒç´ å¯¹æ¥å®ç°çš„ã€‚åœ¨ä»¥å‰çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸å¾—ä¸æ±‚åŠ©äºå¤åˆ¶è¯­ä¹‰æ¥è¿›è¡Œäº¤æ¢ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç§»åŠ¨è¯­ä¹‰ï¼Œè¿™æ˜¯æ›´æœ‰æ•ˆçš„ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›å°†ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆç®¡ç†çš„å†…å®¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒä¹Ÿå¾ˆæœ‰ç”¨ã€‚å°ç»“å½“æˆ‘ä»¬æƒ³æŠŠ l-value å½“ä½œ r-value æ¥è°ƒç”¨ ç§»åŠ¨è¯­ä¹‰ è€Œä¸æ˜¯ å¤åˆ¶è¯­ä¹‰ æ—¶ï¼Œå¯ä»¥ä½¿ç”¨std::moveã€‚","categories":[],"tags":[]},{"title":"C&C++/ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼","slug":"C&C++/ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼","date":"2020-05-23T03:35:13.868Z","updated":"2020-05-23T14:52:20.823Z","comments":true,"path":"archives/68c36619.html","link":"","permalink":"https://longlongqin.github.io/archives/68c36619.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/15-3-move-constructors-and-move-assignment/åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥äº†è§£c++ 11å¦‚ä½•é€šè¿‡ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚å¤åˆ¶æ„é€ å‡½æ•°å’Œå¤åˆ¶èµ‹å€¼å¤åˆ¶æ„é€ å‡½æ•°ç”¨äºé€šè¿‡å¤åˆ¶åŒä¸€ä¸ªç±»çš„å¯¹è±¡æ¥åˆå§‹åŒ–ä¸€ä¸ªç±»ã€‚å¤åˆ¶èµ‹å€¼ç”¨äºå°†ä¸€ä¸ªç±»å¤åˆ¶åˆ°å¦ä¸€ä¸ªç°æœ‰ç±»ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰æ˜¾å¼æä¾›ï¼Œc++å°†æä¾›å¤åˆ¶æ„é€ å‡½æ•°å’Œå¤åˆ¶èµ‹å€¼æ“ä½œç¬¦ã€‚è¿™äº›ç¼–è¯‘å™¨æä¾›çš„å‡½æ•°æ‰§è¡Œæµ…æ‹·è´ï¼Œè¿™å¯èƒ½ä¼šç»™åˆ†é…åŠ¨æ€å†…å­˜çš„ç±»å¸¦æ¥é—®é¢˜ã€‚å› æ­¤ï¼Œå¤„ç†åŠ¨æ€å†…å­˜çš„ç±»åº”è¯¥è¦†ç›–è¿™äº›å‡½æ•°æ¥æ‰§è¡Œæ·±åº¦å¤åˆ¶ã€‚è®©æˆ‘ä»¬å›åˆ°æœ¬ç« ç¬¬ä¸€èŠ‚è¯¾ï¼ˆhttps://www.yuque.com/longlongqin/pw9qpx/pn4inyï¼‰çš„Auto_ptræ™ºèƒ½æŒ‡é’ˆç±»çš„ä¾‹å­ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªå®ç°äº†å¤åˆ¶æ„é€ å‡½æ•°å’Œå¤åˆ¶èµ‹å€¼è¿ç®—ç¬¦çš„ç‰ˆæœ¬ï¼Œ**å®ƒå¯ä»¥è¿›è¡Œæ·±åº¦å¤åˆ¶**ï¼Œä»¥åŠä¸€ä¸ªæ‰§è¡Œè¿™äº›æ“ä½œçš„ç¤ºä¾‹ç¨‹åº:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566template&lt;class T&gt;class Auto_ptr3&#123; T* m_ptr;public: Auto_ptr3(T* ptr = nullptr) :m_ptr(ptr) &#123; &#125; ~Auto_ptr3() &#123; delete m_ptr; &#125; // Copy constructor // Do deep copy of a.m_ptr to m_ptrï¼ˆæ·±åº¦å¤åˆ¶ï¼‰ Auto_ptr3(const Auto_ptr3&amp; a) &#123; m_ptr = new T; *m_ptr = *a.m_ptr; &#125; // Copy assignment // Do deep copy of a.m_ptr to m_ptrï¼ˆæ·±åº¦å¤åˆ¶ï¼‰ Auto_ptr3&amp; operator=(const Auto_ptr3&amp; a) &#123; // Self-assignment detection if (&amp;a == this) return *this; // Release any resource we're holding delete m_ptr; // Copy the resource m_ptr = new T; *m_ptr = *a.m_ptr; return *this; &#125; T&amp; operator*() const &#123; return *m_ptr; &#125; T* operator-&gt;() const &#123; return m_ptr; &#125; bool isNull() const &#123; return m_ptr == nullptr; &#125;&#125;; class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125;&#125;; Auto_ptr3&lt;Resource&gt; generateResource()&#123; Auto_ptr3&lt;Resource&gt; res(new Resource); return res; // this return value will invoke the copy constructor&#125; int main()&#123; Auto_ptr3&lt;Resource&gt; mainres; mainres = generateResource(); // this assignment will invoke the copy assignment return 0;&#125;åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåä¸ºgenerateResource()çš„å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªå°è£…äº†èµ„æºçš„æ™ºèƒ½æŒ‡é’ˆï¼Œç„¶åå°†å…¶ä¼ é€’å›å‡½æ•°main()ã€‚å‡½æ•°main()ç„¶åå°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªç°æœ‰çš„Auto_ptr3å¯¹è±¡ã€‚ç»“æœï¼š123456Resource acquiredResource acquiredResource destroyedResource acquiredResource destroyedResource destroyedå¯¹äºè¿™æ ·ä¸€ä¸ªç®€å•çš„ç¨‹åºæ¥è¯´ï¼Œéœ€è¦åˆ›å»ºå’Œé”€æ¯å¤§é‡çš„èµ„æº!è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿè®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹ã€‚åœ¨è¿™ä¸ªç¨‹åºä¸­æœ‰6ä¸ªå…³é”®æ­¥éª¤(æ¯ä¸ªæ‰“å°æ¶ˆæ¯ä¸€ä¸ª):åœ¨generateResource()å†…éƒ¨ï¼Œä½¿ç”¨åŠ¨æ€åˆ†é…çš„èµ„æºåˆ›å»ºå¹¶åˆå§‹åŒ–å±€éƒ¨å˜é‡resï¼Œè¿™å°†å¯¼è‡´ç¬¬ä¸€ä¸ªâ€œResource acquiredâ€ã€‚Resé€šè¿‡å€¼è¿”å›åˆ°main()ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œé€šè¿‡å€¼è¿”å›ï¼Œå› ä¸ºresæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡â€”â€”å®ƒä¸èƒ½é€šè¿‡åœ°å€æˆ–å¼•ç”¨è¿”å›ï¼Œå› ä¸ºå½“generateResource()ç»“æŸæ—¶reså°†è¢«é”€æ¯ã€‚å› æ­¤resè¢«æ‹·è´åˆ›å»ºåˆ°ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ä¸­ã€‚å› ä¸ºæˆ‘ä»¬çš„å¤åˆ¶æ„é€ å‡½æ•°åšäº†æ·±åº¦å¤åˆ¶ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œåˆ†é…äº†ä¸€ä¸ªæ–°çš„èµ„æºï¼Œè¿™å°†å¯¼è‡´ç¬¬äºŒä¸ªâ€œResource acquiredâ€ã€‚Resè¶…å‡ºèŒƒå›´ï¼Œç ´åæœ€åˆåˆ›å»ºçš„èµ„æºï¼Œä»è€Œå¯¼è‡´ç¬¬ä¸€ä¸ªâ€œResource destroyedâ€ã€‚ä¸´æ—¶å¯¹è±¡é€šè¿‡å¤åˆ¶åˆ†é…è¢«åˆ†é…ç»™mainresã€‚ç”±äºæˆ‘ä»¬çš„å¤åˆ¶èµ‹å€¼ä¹Ÿæ˜¯æ·±åº¦å¤åˆ¶ï¼Œæ‰€ä»¥ä¼šåˆ†é…ä¸€ä¸ªæ–°çš„èµ„æºï¼Œä»è€Œå¯¼è‡´å¦ä¸€ä¸ªâ€œResource acquiredâ€ã€‚èµ‹å€¼è¡¨è¾¾å¼ç»“æŸï¼Œä¸´æ—¶å¯¹è±¡è¶…å‡ºè¡¨è¾¾å¼èŒƒå›´å¹¶è¢«é”€æ¯ï¼Œå¯¼è‡´â€œResource destroyedâ€ã€‚åœ¨main()çš„æœ«å°¾ï¼Œmainresè¶…å‡ºèŒƒå›´ï¼Œå¹¶æ˜¾ç¤ºæœ€ç»ˆçš„â€œResource destroyedâ€ã€‚å› æ­¤ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå› ä¸ºæˆ‘ä»¬è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°ä¸€æ¬¡æ¥å°†æ„é€ reså¤åˆ¶åˆ°ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œè€Œè°ƒç”¨å¤åˆ¶èµ‹å€¼ä¸€æ¬¡æ¥å°†ä¸´æ—¶å¯¹è±¡å¤åˆ¶åˆ°mainresï¼Œæˆ‘ä»¬æœ€ç»ˆæ€»å…±åˆ†é…å’Œé”€æ¯äº†3ä¸ªå•ç‹¬çš„å¯¹è±¡ã€‚æ•ˆç‡å¾ˆä½ï¼Œä½†è‡³å°‘å®ƒä¸ä¼šå´©æºƒ!ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼ä½†æ˜¯ï¼Œä½¿ç”¨ç§»åŠ¨è¯­ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ã€‚c++ 11å®šä¹‰äº†ä¸¤ä¸ªæ–°çš„å‡½æ•°æ¥æœåŠ¡äºç§»åŠ¨è¯­ä¹‰ï¼šç§»åŠ¨æ„é€ å‡½æ•°ã€ç§»åŠ¨èµ‹å€¼å¤åˆ¶æ„é€ å‡½æ•°å’Œå¤åˆ¶èµ‹å€¼çš„ç›®çš„æ˜¯å°†ä¸€ä¸ªå¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼›å®ƒçš„å‚æ•°è¦æ±‚ï¼šconst l-value reference parameterï¼ˆconst çš„å·¦å€¼å¼•ç”¨ ä½œä¸ºå½¢å‚ï¼‰ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼çš„ç›®æ ‡æ˜¯å°†èµ„æºçš„æ‰€æœ‰æƒä»ä¸€ä¸ªå¯¹è±¡è½¬ç§»åˆ°å¦ä¸€ä¸ªå¯¹è±¡(è¿™æ¯”å¤åˆ¶è¦ä¾¿å®œå¾—å¤š)ã€‚å®ƒçš„å‚æ•°è¦æ±‚ï¼šnon-const r-value reference parametersï¼ˆéconst çš„å³å€¼å¼•ç”¨ ä½œä¸ºå½¢å‚ï¼‰è¿™é‡Œæ˜¯ä¸ä¸Šé¢ç›¸åŒçš„Auto_ptr3ç±»ï¼Œä½¿ç”¨ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼ è¿ç®—ç¬¦ã€‚ä¸ºäº†è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬åœ¨æ·±åº¦å¤åˆ¶å¤åˆ¶æ„é€ å‡½æ•°å’Œå¤åˆ¶èµ‹å€¼æ“ä½œç¬¦ä¸­ç•™äº†ä¸€ä¸ªã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394#include &lt;iostream&gt; template&lt;class T&gt;class Auto_ptr4&#123; T* m_ptr;public: Auto_ptr4(T* ptr = nullptr) :m_ptr(ptr) &#123; &#125; ~Auto_ptr4() &#123; delete m_ptr; &#125; // Copy constructor // Do deep copy of a.m_ptr to m_ptr Auto_ptr4(const Auto_ptr4&amp; a) &#123; m_ptr = new T; *m_ptr = *a.m_ptr; &#125; // Move constructorâ­â­â­ // Transfer ownership of a.m_ptr to m_ptr Auto_ptr4(Auto_ptr4&amp;&amp; a) : m_ptr(a.m_ptr) &#123; a.m_ptr = nullptr; // we'll talk more about this line below &#125; // Copy assignment // Do deep copy of a.m_ptr to m_ptr Auto_ptr4&amp; operator=(const Auto_ptr4&amp; a) &#123; // Self-assignment detection if (&amp;a == this) return *this; // Release any resource we're holding delete m_ptr; // Copy the resource m_ptr = new T; *m_ptr = *a.m_ptr; return *this; &#125; // Move assignmentâ­â­â­ // Transfer ownership of a.m_ptr to m_ptr Auto_ptr4&amp; operator=(Auto_ptr4&amp;&amp; a) &#123; // Self-assignment detection if (&amp;a == this) return *this; // Release any resource we're holding delete m_ptr; // Transfer ownership of a.m_ptr to m_ptr m_ptr = a.m_ptr; a.m_ptr = nullptr; // we'll talk more about this line below return *this; &#125; T&amp; operator*() const &#123; return *m_ptr; &#125; T* operator-&gt;() const &#123; return m_ptr; &#125; bool isNull() const &#123; return m_ptr == nullptr; &#125;&#125;; class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125;&#125;; Auto_ptr4&lt;Resource&gt; generateResource()&#123; Auto_ptr4&lt;Resource&gt; res(new Resource); return res; // this return value will invoke the move constructor&#125; int main()&#123; Auto_ptr4&lt;Resource&gt; mainres; mainres = generateResource(); // this assignment will invoke the move assignment return 0;&#125;ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦å¾ˆç®€å•ã€‚æˆ‘ä»¬åªæ˜¯ç§»åŠ¨(çªƒå–)æºå¯¹è±¡çš„èµ„æºï¼Œè€Œä¸æ˜¯å°†æºå¯¹è±¡(a)æ·±åº¦å¤åˆ¶åˆ°éšå¼å¯¹è±¡ä¸­ã€‚è¿™æ¶‰åŠåˆ°å°†æºæŒ‡é’ˆæµ…å¤åˆ¶åˆ°éšå¼å¯¹è±¡ä¸­ï¼Œç„¶åå°†æºæŒ‡é’ˆè®¾ç½®ä¸ºnullã€‚ç»“æœï¼š12Resource acquiredResource destroyedè¿™å°±ç®€æ´å¾ˆå¤šäº†ã€‚ç¨‹åºçš„æµç¨‹å’Œä»¥å‰å®Œå…¨ä¸€æ ·ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªç¨‹åºä¸æ˜¯è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°å’Œå¤åˆ¶èµ‹å€¼æ“ä½œç¬¦ï¼Œè€Œæ˜¯è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°å’Œç§»åŠ¨èµ‹å€¼æ“ä½œç¬¦ã€‚å†çœ‹å¾—æ·±ä¸€ç‚¹:åœ¨generateResource()å†…éƒ¨ï¼Œä½¿ç”¨åŠ¨æ€åˆ†é…çš„èµ„æºåˆ›å»ºå¹¶åˆå§‹åŒ–å±€éƒ¨å˜é‡resï¼Œè¿™å°†å¯¼è‡´ç¬¬ä¸€ä¸ªâ€œResource acquiredâ€ã€‚Resé€šè¿‡å€¼è¿”å›åˆ°main()ã€‚Resè¢«æ„é€ æˆä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œå°†å­˜å‚¨åœ¨Resä¸­çš„åŠ¨æ€åˆ›å»ºçš„å¯¹è±¡ä¼ é€’ç»™ä¸´æ—¶å¯¹è±¡ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹é¢è®¨è®ºä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚Resè¶…å‡ºäº†èŒƒå›´ã€‚å› ä¸ºresä¸å†ç®¡ç†æŒ‡é’ˆ(å®ƒè¢«ç§»åŠ¨åˆ°ä¸´æ—¶æŒ‡é’ˆ)ï¼Œæ‰€ä»¥è¿™é‡Œæ²¡æœ‰ä»€ä¹ˆæœ‰è¶£çš„äº‹æƒ…å‘ç”Ÿã€‚ä¸´æ—¶å¯¹è±¡ è¢«ç§»åŠ¨èµ‹å€¼ç»™mainresã€‚è¿™å°† åŠ¨æ€åˆ›å»ºçš„å¯¹è±¡ å­˜å‚¨åˆ° ä¸´æ—¶å¯¹è±¡mainres ä¸­ã€‚èµ‹å€¼è¡¨è¾¾å¼ç»“æŸï¼Œä¸´æ—¶å¯¹è±¡è¶…å‡ºè¡¨è¾¾å¼ä½œç”¨åŸŸå¹¶è¢«é”€æ¯ã€‚ä½†æ˜¯ï¼Œå› ä¸ºä¸´æ—¶ä¸å†ç®¡ç†æŒ‡é’ˆ(å®ƒè¢«ç§»åŠ¨åˆ°mainres)ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆæœ‰è¶£çš„äº‹æƒ…å‘ç”Ÿã€‚åœ¨main()çš„æœ«å°¾ï¼Œmainresè¶…å‡ºèŒƒå›´ï¼Œå¹¶æ˜¾ç¤ºæœ€ç»ˆçš„â€œResource destroyedâ€ã€‚ç§»åŠ¨è¯­ä¹‰çš„èƒŒåç°åœ¨æ‚¨å·²ç»æœ‰äº†è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡æ¥ç†è§£ç§»åŠ¨è¯­ä¹‰èƒŒåçš„å…³é”®è§è§£ã€‚å¦‚æœæˆ‘ä»¬æ„é€ ä¸€ä¸ªå¯¹è±¡æˆ–è€…åšä¸€ä¸ªèµ‹å€¼ï¼Œå‚æ•°æ˜¯l-valueï¼Œæˆ‘ä»¬å”¯ä¸€èƒ½åšçš„å°±æ˜¯*å¤åˆ¶ *l-valueã€‚æˆ‘ä»¬ä¸èƒ½å‡å®šæ”¹å˜l-valueæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒå¯èƒ½åœ¨ä»¥åçš„ç¨‹åºä¸­å†æ¬¡ä½¿ç”¨ã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªè¡¨è¾¾å¼â€œa = bâ€ï¼Œæˆ‘ä»¬å°±ä¸ä¼šå¸Œæœ›bä¼šä»¥ä»»ä½•æ–¹å¼æ”¹å˜ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬æ„é€ ä¸€ä¸ªå¯¹è±¡æˆ–è€…åšä¸€ä¸ªèµ‹å€¼ï¼Œå…¶ä¸­å‚æ•°æ˜¯r-valueï¼Œé‚£ä¹ˆæˆ‘ä»¬çŸ¥é“r-valueåªæ˜¯æŸç§ä¸´æ—¶å¯¹è±¡ã€‚ä¸å…¶å¤åˆ¶å®ƒ(è¿™å¯èƒ½å¾ˆæ˜‚è´µ)ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†å®ƒçš„èµ„æº(è¿™å¾ˆä¾¿å®œ)è½¬ç§»åˆ°æˆ‘ä»¬æ­£åœ¨æ„é€ æˆ–åˆ†é…çš„å¯¹è±¡ã€‚è¿™æ ·åšæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºè¿™ä¸ªä¸´æ—¶çš„è¡¨è¾¾å¼å°†åœ¨è¡¨è¾¾å¼çš„æœ€åè¢«é”€æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“å®ƒå°†æ°¸è¿œä¸ä¼šå†è¢«ä½¿ç”¨!c++ 11ï¼Œé€šè¿‡r-valueå¼•ç”¨ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨å‚æ•°æ˜¯r-valueè¿˜æ˜¯l-valueæ—¶æä¾›ä¸åŒçš„è¡Œä¸ºï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿæ›´èªæ˜ã€æ›´æœ‰æ•ˆåœ°å†³å®šæˆ‘ä»¬çš„å¯¹è±¡åº”è¯¥å¦‚ä½•è¡Œä¸ºã€‚ç§»åŠ¨å‡½æ•°åº”è¯¥å§‹ç»ˆä¿æŒä¸¤ä¸ªå¯¹è±¡å¤„äºè‰¯å¥½å®šä¹‰çš„çŠ¶æ€åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç§»åŠ¨æ„é€ å‡½æ•° å’Œ ç§»åŠ¨èµ‹å€¼å‡½æ•° éƒ½å°†a.m_ptrè®¾ç½®ä¸ºnullptrã€‚è¿™ä¼¼ä¹æ— å…³ç´§è¦â€”â€”æ¯•ç«Ÿï¼Œå¦‚æœâ€œaâ€æ˜¯ä¸€ä¸ªä¸´æ—¶çš„r-valueï¼Œå¦‚æœå‚æ•°â€œaâ€æ— è®ºå¦‚ä½•éƒ½å°†è¢«é”€æ¯ï¼Œä¸ºä»€ä¹ˆè¿˜è¦åšâ€œæ¸…é™¤â€å‘¢?ç­”æ¡ˆå¾ˆç®€å•ï¼šå½“â€œaâ€è¶…å‡ºèŒƒå›´æ—¶ï¼Œå°†è°ƒç”¨açš„ææ„å‡½æ•°ï¼Œa.m_ptrå°†è¢«åˆ é™¤ã€‚ å¦‚æœåœ¨æ­¤æ—¶ï¼Œa.m_pträ»ç„¶æŒ‡å‘ä¸m_ptrç›¸åŒçš„å¯¹è±¡ï¼Œç„¶åm_ptrå°†ä¿ç•™ä¸ºç©ºæ‚¬æŒ‡é’ˆã€‚å½“åŒ…å«m_ptrçš„å¯¹è±¡æœ€ç»ˆè¢«ä½¿ç”¨(æˆ–é”€æ¯)æ—¶ï¼Œæˆ‘ä»¬å°†å¾—åˆ°æœªå®šä¹‰çš„è¡Œä¸ºã€‚ç”±â€œå€¼â€è¿”å›çš„l-value ä¼šè‡ªåŠ¨ç”¨â€œç§»åŠ¨â€è€Œä¸æ˜¯â€œå¤åˆ¶â€åœ¨ä¸Šé¢Auto_ptr4ç¤ºä¾‹çš„generateResource()å‡½æ•°ä¸­ï¼Œå½“å˜é‡resç”±å€¼è¿”å›æ—¶ï¼Œå®ƒå°†è¢«ç§»åŠ¨è€Œä¸æ˜¯å¤åˆ¶ï¼Œå³ä½¿resæ˜¯ä¸€ä¸ªl-valueã€‚c++è§„èŒƒæœ‰ä¸€ä¸ªç‰¹æ®Šçš„è§„åˆ™ï¼Œè¯¥è§„åˆ™è¯´ï¼Œä»å‡½æ•°æŒ‰å€¼è¿”å›çš„è‡ªåŠ¨å¯¹è±¡å¯ä»¥ç§»åŠ¨ï¼Œå³ä½¿å®ƒä»¬æ˜¯l-valueã€‚è¿™æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºreså°†åœ¨å‡½æ•°çš„æœ«å°¾è¢«é”€æ¯! æˆ‘ä»¬è¿˜ä¸å¦‚çªƒå–å®ƒçš„èµ„æºï¼Œè€Œä¸æ˜¯åˆ¶é€ ä¸€ä¸ªæ˜‚è´µä¸”ä¸å¿…è¦çš„å‰¯æœ¬ã€‚è™½ç„¶ç¼–è¯‘å™¨å¯ä»¥ç§»åŠ¨l-valueè¿”å›å€¼ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒç”šè‡³å¯ä»¥é€šè¿‡å®Œå…¨çœç•¥å¤åˆ¶æ¥åšå¾—æ›´å¥½(è¿™é¿å…äº†å¤åˆ¶æˆ–ç§»åŠ¨)ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ—¢ä¸è°ƒç”¨å¤åˆ¶æ„é€ å‡½æ•°ï¼Œä¹Ÿä¸è°ƒç”¨ç§»åŠ¨æ„é€ å‡½æ•°ã€‚ç¦ç”¨å¤åˆ¶åœ¨ä¸Šé¢çš„Auto_ptr4ç±»ä¸­ï¼Œæˆ‘ä»¬å°† å¤åˆ¶æ„é€ å‡½æ•° å’Œ èµ‹å€¼è¿ç®—ç¬¦ ç•™ä½œæ¯”è¾ƒä¹‹ç”¨ã€‚ä½†åœ¨æ”¯æŒç§»åŠ¨çš„ç±»ä¸­ï¼Œæœ‰æ—¶éœ€è¦åˆ é™¤ å¤åˆ¶æ„é€ å‡½æ•° å’Œ å¤åˆ¶èµ‹å€¼å‡½æ•°ï¼Œä»¥ç¡®ä¿ä¸è¿›è¡Œå¤åˆ¶ã€‚åœ¨Auto_ptrç±»çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸æƒ³å¤åˆ¶æˆ‘ä»¬çš„æ¨¡æ¿å¯¹è±¡Tâ€”â€”å› ä¸ºå®ƒå¾ˆæ˜‚è´µï¼Œè€Œä¸”ä¸ç®¡Tæ˜¯ä»€ä¹ˆç±»ï¼Œéƒ½å¯èƒ½ä¸æ”¯æŒå¤åˆ¶!è¿™æ˜¯Auto_ptrçš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ”¯æŒç§»åŠ¨è¯­ä¹‰ï¼Œä½†ä¸æ”¯æŒå¤åˆ¶è¯­ä¹‰:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253#include &lt;iostream&gt; template&lt;class T&gt;class Auto_ptr5&#123; T* m_ptr;public: Auto_ptr5(T* ptr = nullptr) :m_ptr(ptr) &#123; &#125; ~Auto_ptr5() &#123; delete m_ptr; &#125; // Copy constructor -- no copying allowed!â­ Auto_ptr5(const Auto_ptr5&amp; a) = delete; // Move constructorâ­â­ // Transfer ownership of a.m_ptr to m_ptr Auto_ptr5(Auto_ptr5&amp;&amp; a) : m_ptr(a.m_ptr) &#123; a.m_ptr = nullptr; &#125; // Copy assignment -- no copying allowed!â­ Auto_ptr5&amp; operator=(const Auto_ptr5&amp; a) = delete; // Move assignmentâ­â­ // Transfer ownership of a.m_ptr to m_ptr Auto_ptr5&amp; operator=(Auto_ptr5&amp;&amp; a) &#123; // Self-assignment detection if (&amp;a == this) return *this; // Release any resource we're holding delete m_ptr; // Transfer ownership of a.m_ptr to m_ptr m_ptr = a.m_ptr; a.m_ptr = nullptr; return *this; &#125; T&amp; operator*() const &#123; return *m_ptr; &#125; T* operator-&gt;() const &#123; return m_ptr; &#125; bool isNull() const &#123; return m_ptr == nullptr; &#125;&#125;;å¦‚æœè¯•å›¾æŒ‰å€¼å‘å‡½æ•°ä¼ é€’ä¸€ä¸ª Auto_ptr5ç±»å‹çš„l-valueï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼šåˆå§‹åŒ–å¤åˆ¶æ„é€ å‡½æ•°å‚æ•°æ‰€éœ€çš„å¤åˆ¶æ„é€ å‡½æ•°å·²è¢«åˆ é™¤ã€‚è¿™å¾ˆå¥½ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½åº”è¯¥é€šè¿‡const l-valueå¼•ç”¨ä¼ é€’Auto_ptr5 !Auto_ptr5æ˜¯(æœ€å)ä¸€ä¸ªå¥½çš„æ™ºèƒ½æŒ‡é’ˆç±»ã€‚äº‹å®ä¸Šï¼Œæ ‡å‡†åº“åŒ…å«ä¸€ä¸ªéå¸¸ç±»ä¼¼çš„ç±»(æ‚¨åº”è¯¥ä½¿ç”¨å®ƒ)ï¼Œåä¸ºstd::unique_ptrã€‚æˆ‘ä»¬å°†åœ¨æœ¬ç« ç¨åè®¨è®ºstd::unique_ptrã€‚æµ‹è¯• ä½¿ç”¨â€œå¤åˆ¶â€å’Œâ€œç§»åŠ¨â€ä¹‹é—´çš„æ€§èƒ½å·®åˆ«è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å¦ä¸€ä¸ªä½¿ç”¨åŠ¨æ€å†…å­˜çš„ç±»: ä¸€ä¸ªç®€å•çš„åŠ¨æ€æ¨¡æ¿åŒ–æ•°ç»„ã€‚è¯¥ç±»åŒ…å«ä¸€ä¸ªæ·±åº¦å¤åˆ¶å¤åˆ¶æ„é€ å‡½æ•°å’Œå¤åˆ¶èµ‹å€¼æ“ä½œç¬¦ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#include &lt;iostream&gt; template &lt;class T&gt;class DynamicArray&#123;private: T* m_array; int m_length; public: DynamicArray(int length) : m_array(new T[length]), m_length(length) &#123; &#125; ~DynamicArray() &#123; delete[] m_array; &#125; // Copy constructor(æ·±åº¦å¤åˆ¶) DynamicArray(const DynamicArray &amp;arr) : m_length(arr.m_length) &#123; m_array = new T[m_length]; for (int i = 0; i &lt; m_length; ++i) m_array[i] = arr.m_array[i]; &#125; // Copy assignmentï¼ˆæ·±åº¦å¤åˆ¶ï¼‰ DynamicArray&amp; operator=(const DynamicArray &amp;arr) &#123; if (&amp;arr == this) return *this; delete[] m_array; m_length = arr.m_length; m_array = new T[m_length]; for (int i = 0; i &lt; m_length; ++i) m_array[i] = arr.m_array[i]; return *this; &#125; int getLength() const &#123; return m_length; &#125; T&amp; operator[](int index) &#123; return m_array[index]; &#125; const T&amp; operator[](int index) const &#123; return m_array[index]; &#125; &#125;;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ 8.16 â€“ Timing your codeä¸­çš„å‡½æ•°ï¼Œæ¥æµ‹è¯•ï¼šæ·±åº¦å¤åˆ¶ã€ç§»åŠ¨è¯­ä¹‰ è¿™ä¸¤è€…å®ç°çš„ç¨‹åºä¹‹é—´çš„æ€§èƒ½çš„å·®åˆ«ã€‚å…·ä½“æµ‹è¯•ä»£ç ï¼šè¯¦è§https://www.learncpp.com/cpp-tutorial/15-3-move-constructors-and-move-assignment/ ä¸­çš„â€œAnother exampleâ€æ¿å—ã€‚æ¯”è¾ƒä¸¤ä¸ªç¨‹åºçš„è¿è¡Œæ—¶ï¼Œ0.0056 / 0.00825559 = 67.8%ã€‚ç§»åŠ¨ç‰ˆæœ¬å‡ ä¹å¿«äº†33% !","categories":[],"tags":[]},{"title":"C&C++/å³å€¼å¼•ç”¨","slug":"C&C++/å³å€¼å¼•ç”¨","date":"2020-05-22T01:51:10.157Z","updated":"2020-05-22T03:39:10.220Z","comments":true,"path":"archives/145edd42.html","link":"","permalink":"https://longlongqin.github.io/archives/145edd42.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/15-2-rvalue-references/å›åˆ°ç¬¬ä¸€ç« ï¼Œæˆ‘ä»¬æåˆ°äº†å·¦å€¼å’Œå³å€¼ï¼Œç„¶åå‘Šè¯‰ä½ ä»¬ä¸è¦å¤ªæ‹…å¿ƒå®ƒä»¬ã€‚åœ¨c++ 11ä¹‹å‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¬å¹³çš„å»ºè®®ã€‚ä½†æ˜¯åœ¨c++ 11ä¸­ç†è§£ç§»åŠ¨è¯­ä¹‰éœ€è¦é‡æ–°å®¡è§†è¿™ä¸ªä¸»é¢˜ã€‚ç°åœ¨æˆ‘ä»¬æ¥åšä¸€ä¸‹ã€‚å·¦å€¼ä¸å³å€¼å°½ç®¡åœ¨å®ƒä»¬çš„åå­—ä¸­æœ‰â€œvalueâ€è¿™ä¸ªè¯ï¼Œl-valueså’Œr-valueså®é™…ä¸Šå¹¶ä¸æ˜¯å€¼çš„å±æ€§ï¼Œè€Œæ˜¯è¡¨è¾¾å¼çš„å±æ€§ã€‚c++ä¸­çš„æ¯ä¸ªè¡¨è¾¾å¼éƒ½æœ‰ä¸¤ä¸ªå±æ€§:ç±»å‹(ç”¨äºç±»å‹æ£€æŸ¥) å’Œ å€¼ç±»åˆ«(ç”¨äºæŸäº›ç±»å‹çš„è¯­æ³•æ£€æŸ¥ï¼Œä¾‹å¦‚è¡¨è¾¾å¼çš„ç»“æœæ˜¯å¦å¯ä»¥èµ‹å€¼)ã€‚åœ¨c++ 03å’Œæ›´æ—©çš„ç‰ˆæœ¬ä¸­ï¼Œl-å€¼å’Œr-å€¼æ˜¯ä»…æœ‰çš„ä¸¤ä¸ªå¯ç”¨çš„å€¼ç±»åˆ«ã€‚å·¦å€¼ï¼šå°†l-value(ä¹Ÿç§°ä¸ºlocatorå€¼)ï¼š è§†ä¸ºå‡½æ•°æˆ–å¯¹è±¡ (æˆ–è®¡ç®—ç»“æœ ä¸ºå‡½æ•°æˆ–å¯¹è±¡çš„è¡¨è¾¾å¼) æ˜¯æœ€ç®€å•çš„ã€‚æ‰€æœ‰çš„å·¦å€¼éƒ½æœ‰æŒ‡å®šçš„å†…å­˜åœ°å€ã€‚å½“å·¦å€¼æœ€åˆè¢«å®šä¹‰æ—¶ï¼Œå®ƒä»¬è¢«å®šä¹‰ä¸ºâ€œé€‚åˆä½äºèµ‹å€¼è¡¨è¾¾å¼å·¦ä¾§çš„å€¼â€ã€‚ä½†æ˜¯ï¼Œåæ¥ï¼Œconstå…³é”®å­—è¢«æ·»åŠ åˆ°è¯­è¨€ä¸­ï¼Œå·¦å€¼è¢«åˆ†ä¸ºä¸¤ä¸ªå­ç±»åˆ«:å¯ä¿®æ”¹çš„å·¦å€¼(å…¶å€¼å¯è¢«ä¿®æ”¹)ï¼›ä¸å¯ä¿®æ”¹çš„å·¦å€¼(å…¶å€¼ä¸å¯è¢«ä¿®æ”¹)ï¼Œè¢«consté™å®šã€‚å³å€¼ï¼šæŠŠå³å€¼çœ‹ä½œ â€œä¸æ˜¯å·¦å€¼çš„æ‰€æœ‰ä¸œè¥¿â€ æ˜¯æœ€ç®€å•çš„ã€‚è¿™æ˜¾ç„¶åŒ…æ‹¬æ–‡å­—(ä¾‹å¦‚5)ã€ä¸´æ—¶å€¼(ä¾‹å¦‚x+1 ) å’ŒåŒ¿åå¯¹è±¡(ä¾‹å¦‚ Fraction(5,2))ã€‚å³å€¼é€šå¸¸é’ˆå¯¹å®ƒä»¬çš„å€¼è¿›è¡Œè®¡ç®—ï¼Œå…·æœ‰è¡¨è¾¾å¼ä½œç”¨åŸŸ(åœ¨å®ƒä»¬æ‰€åœ¨çš„è¡¨è¾¾å¼ç»“æŸæ—¶æ­»äº¡)ï¼Œå¹¶ä¸”ä¸èƒ½è¢«èµ‹å€¼ã€‚è¿™ä¸ªä¸èƒ½è¢«èµ‹å€¼è§„åˆ™æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºèµ‹å€¼ä¼šå¯¹å¯¹è±¡äº§ç”Ÿå‰¯ä½œç”¨ã€‚å› ä¸ºå³å€¼æœ‰è¡¨è¾¾å¼ä½œç”¨åŸŸï¼Œå¦‚æœæˆ‘ä»¬å°†ä¸€ä¸ªå€¼èµ‹å€¼ç»™å³å€¼ï¼Œè¿™ä¸ªå³å€¼ä¼šåœ¨ æˆ‘ä»¬åœ¨ä¸‹ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ä½¿ç”¨å®ƒæ—¶ è¶…å‡ºä½œç”¨åŸŸã€‚æˆ–è€…ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨è¡¨è¾¾å¼ä¸­å¤šæ¬¡ä½¿ç”¨å…·æœ‰å‰¯ä½œç”¨çš„å˜é‡(åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‚¨åº”è¯¥çŸ¥é“å¯¼è‡´æœªå®šä¹‰è¡Œä¸ºçš„åŸå› !)3ä¸ªæ–°çš„å€¼ç±»åˆ«ä¸ºäº†æ”¯æŒç§»åŠ¨è¯­ä¹‰ï¼Œc++ 11å¼•å…¥äº†3ä¸ªæ–°çš„å€¼ç±»åˆ«:pr-valuesï¼›x-valuesï¼›gl-valuesï¼›å¦‚æœæ‚¨æ„Ÿå…´è¶£ï¼Œ cppreference.com æä¾›äº†ä¸€ä¸ªå¹¿æ³›çš„è¡¨è¾¾å¼åˆ—è¡¨ï¼Œè¿™äº›è¡¨è¾¾å¼é€‚ç”¨äºå„ç§å€¼ç±»åˆ«ï¼Œä»¥åŠå…³äºå®ƒä»¬çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚å·¦å€¼å¼•ç”¨åœ¨c++ 11ä¹‹å‰ï¼Œåªæœ‰ä¸€ç§ç±»å‹çš„å¼•ç”¨å­˜åœ¨äºc++ä¸­ï¼Œå› æ­¤å®ƒè¢«ç§°ä¸ºâ€œå¼•ç”¨â€ã€‚ç„¶è€Œï¼Œåœ¨c++ 11ä¸­ï¼Œå®ƒæœ‰æ—¶è¢«ç§°ä¸ºl-valueå¼•ç”¨ã€‚å·¦å€¼å¼•ç”¨åªèƒ½ç”¨ å¯ä¿®æ”¹çš„å·¦å€¼ åˆå§‹åŒ–ã€‚L-value referenceCan be initialized withCan modifyModifiable l-valuesYesYesNon-modifiable l-valuesNoNoR-valuesNoNoè¢«consté™å®šçš„L-valueå¯¹è±¡ å¼•ç”¨ å¯ä»¥ç”¨ l-valueså’Œr-values è¿›è¡Œåˆå§‹åŒ–ã€‚ä½†æ˜¯ï¼Œè¿™äº›å€¼ä¸èƒ½ä¿®æ”¹ã€‚L-value reference to constCan be initialized withCan modifyModifiable l-valuesYesNoNon-modifiable l-valuesYesNoR-valuesYesNoå¯¹constå¯¹è±¡çš„L-valueå¼•ç”¨ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬å…è®¸æˆ‘ä»¬å°†ä»»ä½•ç±»å‹çš„å‚æ•°(L-valueæˆ–r-value)ä¼ é€’åˆ°å‡½æ•°ä¸­ï¼Œè€Œä¸éœ€è¦å¤åˆ¶å‚æ•°ã€‚å³å€¼å¼•ç”¨c++ 11æ·»åŠ äº†ä¸€ç§ç§°ä¸º r-valueå¼•ç”¨ çš„æ–°å¼•ç”¨ç±»å‹ã€‚r-valueå¼•ç”¨ æ˜¯ä¸€ä¸ªè¢«è®¾è®¡ä¸ºåªèƒ½ä½¿ç”¨ r-value æ¥åˆå§‹åŒ–çš„å¼•ç”¨ã€‚å·¦å€¼å¼•ç”¨ çš„å®šä¹‰ä½¿ç”¨ä¸€ä¸ª&amp;ç¬¦å·ï¼›å³å€¼å¼•ç”¨ çš„å®šä¹‰ä½¿ç”¨ä¸¤ä¸ª&amp;ç¬¦å·ï¼›123int x&#123;5&#125;;int &amp;lref&#123;x&#125;; //å·¦å€¼å¼•ç”¨ä½¿ç”¨ å·¦å€¼x æ¥åˆå§‹åŒ–int &amp;&amp;rref&#123;5&#125;; //å³å€¼å¼•ç”¨ä½¿ç”¨ å³å€¼5 æ¥åˆå§‹åŒ–å³å€¼å¼•ç”¨ ä¸èƒ½ä½¿ç”¨ å·¦å€¼æ¥åˆå§‹åŒ–ã€‚R-value referenceCan be initialized withCan modifyModifiable l-valuesNoNoNon-modifiable l-valuesNoNoR-valuesYesYesR-value reference to constCan be initialized withCan modifyModifiable l-valuesNoNoNon-modifiable l-valuesNoNoR-valuesYesNoR-valueå¼•ç”¨æœ‰ä¸¤ä¸ªæœ‰ç”¨çš„å±æ€§ã€‚é¦–å…ˆï¼Œr-valueå¼•ç”¨ å°† åˆå§‹åŒ–å®ƒä»¬çš„å¯¹è±¡ çš„ç”Ÿå‘½å‘¨æœŸå»¶é•¿ ( å¯¹constå¯¹è±¡çš„l-valueå¼•ç”¨ä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹)ã€‚éå¸¸é‡çš„å³å€¼å¼•ç”¨ å…è®¸æ‚¨ä¿®æ”¹å®ƒçš„å³å€¼!çœ‹ä¸€ä¸ªä¾‹å­ï¼š123456789101112131415161718192021222324252627282930#include &lt;iostream&gt; class Fraction&#123;private: int m_numerator; int m_denominator; public: Fraction(int numerator = 0, int denominator = 1) : m_numerator&#123; numerator &#125;, m_denominator&#123; denominator &#125; &#123; &#125; friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Fraction &amp;f1) &#123; out &lt;&lt; f1.m_numerator &lt;&lt; '/' &lt;&lt; f1.m_denominator; return out; &#125;&#125;; int main()&#123; auto &amp;&amp;rref&#123; Fraction&#123; 3, 5 &#125; &#125;; // r-value å¼•ç”¨ä¸€ä¸ª ä¸´æ—¶çš„Fraction // f1 çš„operator&lt;&lt; ç»‘å®šåˆ°ä¸´æ—¶çš„Fractionï¼Œä¸åˆ›å»ºå‰¯æœ¬ã€‚ std::cout &lt;&lt; rref &lt;&lt; '\\n'; return 0;&#125; // rref (and the temporary Fraction) goes out of scope hereç»“æœï¼š13&#x2F;5ä½œä¸ºä¸€ä¸ªåŒ¿åå¯¹è±¡çš„Fraction(3, 5) é€šå¸¸ä¼šåœ¨å®šä¹‰å®ƒçš„è¡¨è¾¾å¼ç»“æŸæ—¶è¶…å‡ºèŒƒå›´ã€‚ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬æ­£åœ¨ç”¨å®ƒåˆå§‹åŒ–ä¸€ä¸ªr-valueå¼•ç”¨ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè¢«å»¶é•¿åˆ°å—çš„æœ«å°¾ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨rå€¼å¼•ç”¨æ¥æ‰“å°Fractionçš„å€¼ã€‚ç°åœ¨è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¸é‚£ä¹ˆç›´è§‚çš„ä¾‹å­:12345678910111213#include &lt;iostream&gt; int main()&#123; int &amp;&amp;rref&#123; 5 &#125;; // å› ä¸ºæˆ‘ä»¬æ­£åœ¨ç”¨æ–‡å­—å¸¸é‡åˆå§‹åŒ–ä¸€ä¸ªr-valueå¼•ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªå€¼ä¸º5çš„ä¸´æ—¶å¼•ç”¨ rref = 10; std::cout &lt;&lt; rref &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/10è™½ç„¶ç”¨ä¸€ä¸ªæ–‡å­—å€¼åˆå§‹åŒ–ä¸€ä¸ªr-valueå¼•ç”¨ç„¶åèƒ½å¤Ÿæ”¹å˜é‚£ä¸ªå€¼çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä½†æ˜¯å½“ç”¨ä¸€ä¸ªæ–‡å­—å€¼åˆå§‹åŒ–ä¸€ä¸ªr-valueå¼•ç”¨æ—¶ï¼Œä¸€ä¸ªæ–‡å­—å€¼å¾—ä¸´æ—¶å€¼ å°†è¢«æ„å»ºï¼Œæ‰€ä»¥è¿™ä¸ªå¼•ç”¨å¼•ç”¨çš„æ˜¯ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ–‡å­—å€¼ã€‚åœ¨ä¸Šè¿°ä¸¤ç§æ–¹å¼ä¸­ï¼Œå³å€¼å¼•ç”¨éƒ½ä¸å¸¸ç”¨ã€‚å³å€¼å¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°R-valueå¼•ç”¨é€šå¸¸ç”¨ä½œå‡½æ•°å‚æ•°ã€‚å½“æ‚¨å¸Œæœ›å¯¹l-valueå’Œr-valueå‚æ•°æœ‰ä¸åŒçš„è¡Œä¸ºæ—¶ï¼Œè¿™å¯¹äºå‡½æ•°é‡è½½éå¸¸æœ‰ç”¨ã€‚12345678910111213141516171819202122void fun(const int &amp;lref) // l-value arguments will select this function&#123; std::cout &lt;&lt; \"l-value reference to const\\n\";&#125; void fun(int &amp;&amp;rref) // r-value arguments will select this function&#123; std::cout &lt;&lt; \"r-value reference\\n\";&#125; int main()&#123; int x&#123; 5 &#125;; fun(x); // l-value argument calls l-value version of function fun(5); // r-value argument calls r-value version of function return 0;&#125;/*å°†æ‰“å°*/l-value reference to constr-value referenceä½ ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåš?æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€è¯¾ä¸­æ›´è¯¦ç»†åœ°è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚ä¸ç”¨è¯´ï¼Œå®ƒæ˜¯ç§»åŠ¨è¯­ä¹‰çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚æ³¨æ„ä¸€ä¸ªæœ‰è¶£çš„ä¸œè¥¿ï¼š12int &amp;&amp;ref&#123;4&#125;;fun(ref);è¿™å®é™…ä¼šè°ƒç”¨å‡½æ•°çš„l-valueç‰ˆæœ¬! è™½ç„¶è™½ç„¶å˜é‡refçš„ç±»å‹æ˜¯ r-valueå¼•ç”¨ä¸€ä¸ªå­—é¢å¸¸é‡æ•´æ•°ï¼Œä½†å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªl-valueæœ¬èº«(æ‰€æœ‰å‘½åå˜é‡éƒ½æ˜¯è¿™æ ·)ã€‚é€ æˆè¿™ç§æ··æ·†çš„åŸå› æ˜¯åœ¨ä¸¤ä¸ªä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨äº†â€œå³å€¼â€è¿™ä¸ªè¯ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·æƒ³ï¼šè¢«å‘½åçš„å¯¹è±¡ æ˜¯ å·¦å€¼ï¼›åŒ¿åå¯¹è±¡ æ˜¯ å³å€¼ã€‚æ— è®ºæ˜¯ å‘½åå¯¹è±¡ è¿˜æ˜¯ åŒ¿åå¯¹è±¡çš„ç±»å‹ ä¸å®ƒæœ¬èº«æ˜¯ å·¦å€¼è¿˜æ˜¯å³å€¼ æ— å…³ã€‚æ‰€ä»¥ï¼Œä¸Šé¢çš„refè¢«å‘½åäº†ï¼ˆåå­—å°±æ˜¯refï¼‰ï¼Œæ‰€ä»¥ å¯¹è±¡ref æ˜¯ä¸€ä¸ªå·¦å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå®ƒæ˜¯ä¸€ä¸ª å³å€¼å¼•ç”¨ çš„è¢«å‘½åçš„å¯¹è±¡ã€‚è¿”å›ä¸€ä¸ªå³å€¼å¼•ç”¨æ‚¨å‡ ä¹ä¸åº”è¯¥è¿”å›ä¸€ä¸ªr-valueå¼•ç”¨ï¼ŒåŒç†ï¼Œæ‚¨å‡ ä¹ä¸åº”è¯¥è¿”å›ä¸€ä¸ªl-valueå¼•ç”¨ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“è¢«å¼•ç”¨çš„å¯¹è±¡åœ¨å‡½æ•°ç»“æŸæ—¶è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œæ‚¨å°†è¿”å›ä¸€ä¸ªæŒ‚èµ·çš„å¼•ç”¨ã€‚","categories":[],"tags":[]},{"title":"C&C++/æ™ºèƒ½æŒ‡é’ˆä¸ç§»åŠ¨è¯­ä¹‰","slug":"C&C++/æ™ºèƒ½æŒ‡é’ˆä¸ç§»åŠ¨è¯­ä¹‰","date":"2020-05-21T03:15:50.748Z","updated":"2020-05-21T09:02:33.186Z","comments":true,"path":"archives/cace6777.html","link":"","permalink":"https://longlongqin.github.io/archives/cace6777.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/15-1-intro-to-smart-pointers-move-semantics/è€ƒè™‘ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬åŠ¨æ€åˆ†é…ä¸€ä¸ªå€¼:12345678void someFunction()&#123; Resource *ptr = new Resource; // Resourceæ˜¯ä¸€ä¸ªç»“æ„ä½“æˆ–è€…ç±» //æ“ä½œ delete ptr;&#125;å°½ç®¡ä¸Šé¢çš„ä»£ç çœ‹èµ·æ¥ç›¸å½“ç®€å•ï¼Œä½†æ˜¯å¾ˆå®¹æ˜“å¿˜è®°é‡Šæ”¾ptrã€‚å³ä½¿æ‚¨è®°å¾—åœ¨å‡½æ•°ç»“æŸæ—¶åˆ é™¤ptrï¼Œå¦‚æœå‡½æ•°æå‰é€€å‡ºï¼Œä¹Ÿæœ‰è®¸å¤šæ–¹æ³•å¯ä»¥ä¸åˆ é™¤ptrã€‚é€šè¿‡æå‰è¿”å›:1234567891011121314151617#include &lt;iostream&gt; void someFunction()&#123; Resource *ptr = new Resource; int x; std::cout &lt;&lt; \"Enter an integer: \"; std::cin &gt;&gt; x; if (x == 0) return; // å‡½æ•°æå‰è¿”å›ï¼Œpträ¸ä¼šè¢«åˆ é™¤! // do stuff with ptr here delete ptr;&#125;é€šè¿‡æŠ›å‡ºå¼‚å¸¸:1234567891011121314151617#include &lt;iostream&gt; void someFunction()&#123; Resource *ptr = new Resource; int x; std::cout &lt;&lt; \"Enter an integer: \"; std::cin &gt;&gt; x; if (x == 0) throw 0; // å‡½æ•°æå‰è¿”å›ï¼Œpträ¸ä¼šè¢«åˆ é™¤! // do stuff with ptr here delete ptr;&#125;åœ¨ä¸Šè¿°ä¸¤ä¸ªç¨‹åºä¸­ï¼Œæ‰§è¡Œæ—©æœŸçš„returnæˆ–throwè¯­å¥ï¼Œå¯¼è‡´å‡½æ•°ç»ˆæ­¢è€Œä¸åˆ é™¤å˜é‡ptrã€‚å› æ­¤ï¼Œä¸ºå˜é‡ptråˆ†é…çš„å†…å­˜ç°åœ¨ä¼šæ³„æ¼(å¹¶ä¸”åœ¨æ¯æ¬¡è°ƒç”¨æ­¤å‡½æ•°å¹¶æå‰è¿”å›æ—¶å°†å†æ¬¡æ³„æ¼)ã€‚æœ¬è´¨ä¸Šï¼Œè¿™ç±»é—®é¢˜çš„å‘ç”Ÿæ˜¯å› ä¸ºæŒ‡é’ˆå˜é‡æœ¬èº«æ²¡æœ‰å†…åœ¨çš„æœºåˆ¶æ¥æ¸…é™¤ã€‚æ™ºèƒ½æŒ‡é’ˆç±»çš„æ‹¯æ•‘?ç±»æœ€å¥½çš„ä¸€ç‚¹æ˜¯ï¼Œå®ƒä»¬åŒ…å«ææ„å‡½æ•°ï¼Œå½“ç±»çš„å¯¹è±¡è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œææ„å‡½æ•°ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚å› æ­¤ï¼Œå¦‚æœåœ¨æ„é€ å‡½æ•°ä¸­åˆ†é…(æˆ–è·å–)å†…å­˜ï¼Œå¯ä»¥åœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾å†…å­˜ï¼Œå¹¶ç¡®ä¿åœ¨é”€æ¯ç±»å¯¹è±¡æ—¶é‡Šæ”¾å†…å­˜(ä¸ç®¡å®ƒæ˜¯å¦è¶…å‡ºä½œç”¨åŸŸã€æ˜¯å¦è¢«æ˜¾å¼åˆ é™¤ç­‰ç­‰)ã€‚è¿™æ˜¯æˆ‘ä»¬åœ¨ 8.7 â€“ Destructorsä¸­è®¨è®ºçš„RAIIç¼–ç¨‹èŒƒä¾‹çš„æ ¸å¿ƒã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç±»æ¥å¸®åŠ©æˆ‘ä»¬ç®¡ç†å’Œæ¸…ç†æŒ‡é’ˆå—?æˆ‘ä»¬å¯ä»¥!è€ƒè™‘è¿™æ ·ä¸€ä¸ªç±»ï¼Œå®ƒçš„å”¯ä¸€å·¥ä½œå°±æ˜¯æŒæœ‰å¹¶â€œæ‹¥æœ‰â€ä¼ é€’ç»™å®ƒçš„æŒ‡é’ˆï¼Œç„¶ååœ¨ç±»å¯¹è±¡è¶…å‡ºä½œç”¨åŸŸæ—¶é‡Šæ”¾è¯¥æŒ‡é’ˆã€‚åªè¦è¯¥ç±»çš„å¯¹è±¡ä»…ä½œä¸ºå±€éƒ¨å˜é‡åˆ›å»ºï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¿è¯è¯¥ç±»å°†é€‚å½“åœ°è¶…å‡ºä½œç”¨åŸŸ(ä¸ç®¡æˆ‘ä»¬çš„å‡½æ•°ä½•æ—¶æˆ–å¦‚ä½•ç»ˆæ­¢)ï¼Œå¹¶ä¸”æ‰€æ‹¥æœ‰çš„æŒ‡é’ˆå°†è¢«é”€æ¯ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;iostream&gt; template&lt;class T&gt;class Auto_ptr1&#123; T* m_ptr;public: // Pass in a pointer to \"own\" via the constructor Auto_ptr1(T* ptr=nullptr) :m_ptr(ptr) &#123; &#125; // The destructor will make sure it gets deallocated ~Auto_ptr1() &#123; delete m_ptr; &#125; // Overload dereference and operator-&gt; so we can use Auto_ptr1 like m_ptr. T&amp; operator*() const &#123; return *m_ptr; &#125; T* operator-&gt;() const &#123; return m_ptr; &#125;&#125;; // A sample class to prove the above worksclass Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125;&#125;; int main()&#123; &#123;Auto_ptr1&lt;Resource&gt; res(new Resource); &#125; // æ³¨æ„è¿™é‡Œçš„å†…å­˜åˆ†é… // ... ä½†ä¸éœ€è¦æ˜¾å¼åˆ é™¤ // è¿˜è¦æ³¨æ„ï¼Œè§’æ‹¬å·ä¸­çš„èµ„æºä¸éœ€è¦ * ç¬¦å·ï¼Œå› ä¸ºå®ƒæ˜¯ç”±æ¨¡æ¿æä¾›çš„ return 0;&#125; // resè¶…å‡ºäº†è¿™é‡Œçš„èŒƒå›´ï¼Œå¹¶ç ´åäº†ä¸ºæˆ‘ä»¬åˆ†é…çš„èµ„æºç»“æœï¼š12Resource acquiredResource destroyedè€ƒè™‘ä¸€ä¸‹è¿™ä¸ªç¨‹åºå’Œç±»æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åŠ¨æ€åˆ›å»ºä¸€ä¸ª Resourceï¼Œå¹¶å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ¨¡æ¿åŒ–çš„Auto_ptr1ç±»ã€‚ä»è¿™ä¸€ç‚¹å¼€å§‹ï¼Œæˆ‘ä»¬çš„Auto_ptr1å˜é‡resæ‹¥æœ‰è¿™ä¸ªResourceå¯¹è±¡ã€‚ï¼ˆAuto_ptr1ä¸m_ptræœ‰ä¸€ä¸ªå¤åˆå…³ç³»ã€‚ï¼‰å› ä¸ºresè¢«å£°æ˜ä¸ºä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå¹¶ä¸”å…·æœ‰å—ä½œç”¨åŸŸï¼Œæ‰€ä»¥å½“å—ç»“æŸæ—¶ï¼Œå®ƒå°†è¶…å‡ºä½œç”¨åŸŸï¼Œå¹¶è¢«é”€æ¯(ä¸ç”¨æ‹…å¿ƒå¿˜è®°é‡Šæ”¾å®ƒ)ã€‚å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªç±»ï¼Œå½“å®ƒè¢«é”€æ¯æ—¶ï¼ŒAuto_ptr1ææ„å‡½æ•°å°†è¢«è°ƒç”¨ã€‚è¿™ä¸ªææ„å‡½æ•°å°†ç¡®ä¿å®ƒæ‰€æŒæœ‰çš„èµ„æºæŒ‡é’ˆè¢«åˆ é™¤!åªè¦Auto_ptr1è¢«å®šä¹‰ä¸ºä¸€ä¸ªå±€éƒ¨å˜é‡(å…·æœ‰è‡ªåŠ¨æŒç»­æ—¶é—´ï¼Œå› æ­¤ç±»åçš„â€œAutoâ€éƒ¨åˆ†)ï¼Œæ— è®ºå‡½æ•°å¦‚ä½•ç»ˆæ­¢(å³ä½¿å®ƒæå‰ç»ˆæ­¢)ï¼Œèµ„æºéƒ½å°†ä¿è¯åœ¨å£°æ˜å®ƒçš„å—çš„æœ«å°¾è¢«é”€æ¯ã€‚è¿™æ ·çš„ç±»ç§°ä¸ºæ™ºèƒ½æŒ‡é’ˆã€‚æ™ºèƒ½æŒ‡é’ˆæ˜¯ä¸€ä¸ªå¤åˆç±»ï¼Œç”¨äºç®¡ç†åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼Œå¹¶ç¡®ä¿åœ¨æ™ºèƒ½æŒ‡é’ˆå¯¹è±¡è¶…å‡ºä½œç”¨åŸŸæ—¶åˆ é™¤å†…å­˜ã€‚(ä¸æ­¤ç›¸å…³çš„æ˜¯ï¼Œå†…ç½®æŒ‡é’ˆæœ‰æ—¶è¢«ç§°ä¸ºâ€œå“‘æŒ‡é’ˆâ€ï¼Œå› ä¸ºå®ƒä»¬è‡ªå·±ä¸èƒ½æ¸…ç†)ã€‚ç°åœ¨è®©æˆ‘ä»¬å›åˆ°ä¸Šé¢çš„someFunction()ä¾‹å­ï¼Œå¹¶å±•ç¤ºä¸€ä¸ªæ™ºèƒ½æŒ‡é’ˆç±»å¦‚ä½•è§£å†³æˆ‘ä»¬çš„æŒ‘æˆ˜:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354#include &lt;iostream&gt; template&lt;class T&gt;class Auto_ptr1&#123; T* m_ptr;public: // Pass in a pointer to \"own\" via the constructor Auto_ptr1(T* ptr=nullptr) :m_ptr(ptr) &#123; &#125; // The destructor will make sure it gets deallocated ~Auto_ptr1() &#123; delete m_ptr; &#125; // Overload dereference and operator-&gt; so we can use Auto_ptr1 like m_ptr. T&amp; operator*() const &#123; return *m_ptr; &#125; T* operator-&gt;() const &#123; return m_ptr; &#125;&#125;; // A sample class to prove the above worksclass Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125; void sayHi() &#123; std::cout &lt;&lt; \"Hi!\\n\"; &#125;&#125;; void someFunction()&#123; Auto_ptr1&lt;Resource&gt; ptr(new Resource); // ptr now owns the Resource int x; std::cout &lt;&lt; \"Enter an integer: \"; std::cin &gt;&gt; x; if (x == 0) return; // the function returns early // do stuff with ptr here ptr-&gt;sayHi();&#125; int main()&#123; someFunction(); return 0;&#125;å¦‚æœç”¨æˆ·è¾“å…¥ä¸€ä¸ªéé›¶æ•´æ•°ï¼Œä¸Šé¢çš„ç¨‹åºå°†æ‰“å°:1234Resource acquiredEnter an integer: 1HiResource destroyedå¦‚æœç”¨æˆ·è¾“å…¥0ï¼Œä»¥ä¸Šç¨‹åºå°†æå‰ç»ˆæ­¢ï¼Œæ‰“å°:123Resource acquiredEnter an integer: 0Resource destroyedæ³¨æ„ï¼Œå³ä½¿åœ¨ç”¨æˆ·è¾“å…¥0å¹¶ä¸”å‡½æ•°æå‰ç»ˆæ­¢çš„æƒ…å†µä¸‹ï¼Œèµ„æºä»ç„¶è¢«æ­£ç¡®é‡Šæ”¾ã€‚å› ä¸ºptrå˜é‡æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥å½“å‡½æ•°ç»ˆæ­¢æ—¶ptrå°†è¢«é”€æ¯(ä¸ç®¡å®ƒå¦‚ä½•ç»ˆæ­¢)ã€‚å› ä¸ºAuto_ptr1ææ„å‡½æ•°å°†æ¸…ç†èµ„æºï¼Œæ‰€ä»¥æˆ‘ä»¬ç¡®ä¿¡èµ„æºå°†è¢«æ­£ç¡®æ¸…ç†ã€‚ä¸€ä¸ªå…³é”®çš„ç¼ºé™·Auto_ptr1ç±»æœ‰ä¸€ä¸ªä¸¥é‡çš„ç¼ºé™·ï¼Œéšè—åœ¨ä¸€äº›è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç åé¢ã€‚åœ¨è¿›ä¸€æ­¥é˜…è¯»ä¹‹å‰ï¼Œçœ‹çœ‹æ‚¨æ˜¯å¦èƒ½å¤Ÿè¯†åˆ«å®ƒæ˜¯ä»€ä¹ˆã€‚æˆ‘ä»¬ä¼šç­‰å¾…â€¦â€¦Rather than tell you, weâ€™ll show you. Consider the following program:123456789101112131415161718192021222324252627282930313233343536#include &lt;iostream&gt; // Same as abovetemplate&lt;class T&gt;class Auto_ptr1&#123; T* m_ptr;public: Auto_ptr1(T* ptr=nullptr) :m_ptr(ptr) &#123; &#125; ~Auto_ptr1() &#123; delete m_ptr; &#125; T&amp; operator*() const &#123; return *m_ptr; &#125; T* operator-&gt;() const &#123; return m_ptr; &#125;&#125;; class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125;&#125;; int main()&#123; Auto_ptr1&lt;Resource&gt; res1(new Resource); Auto_ptr1&lt;Resource&gt; res2(res1); // æˆ–è€…ï¼Œä¸åˆå§‹åŒ–res2ï¼Œç„¶åèµ‹å€¼res2 = res1; return 0;&#125;è¿™ä¸ªç¨‹åºæ‰“å°:123Resource acquiredResource destroyedResource destroyedæ‚¨çš„ç¨‹åºå¾ˆå¯èƒ½(ä½†ä¸ä¸€å®š)ä¼šåœ¨æ­¤æ—¶å´©æºƒã€‚ç°åœ¨çœ‹åˆ°é—®é¢˜äº†å—?å› ä¸ºæˆ‘ä»¬æ²¡æœ‰æä¾›å¤åˆ¶æ„é€ å‡½æ•°æˆ–èµ‹å€¼è¿ç®—ç¬¦ï¼Œc++ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªã€‚å®ƒæä¾›çš„å‡½æ•°åªåšæµ…æ‹·è´ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬ç”¨res1åˆå§‹åŒ–res2æ—¶ï¼ŒAuto_ptr1å˜é‡éƒ½æŒ‡å‘ç›¸åŒçš„èµ„æºã€‚å½“res2è¶…å‡ºèŒƒå›´æ—¶ï¼Œå®ƒä¼šåˆ é™¤èµ„æºï¼Œç•™ä¸‹ä¸€ä¸ªæ‚¬ç©ºæŒ‡é’ˆç»™res1ã€‚å½“res1åˆ é™¤å®ƒçš„(å·²åˆ é™¤çš„)èµ„æºæ—¶ï¼Œå´©æºƒ!ä½¿ç”¨ç§»åŠ¨è¯­å¥(Move semantics)è§£å†³å¦‚æœä¸è®©æˆ‘ä»¬çš„å¤åˆ¶æ„é€ å‡½æ•°å’Œèµ‹å€¼æ“ä½œç¬¦å¤åˆ¶æŒ‡é’ˆ(â€œå¤åˆ¶è¯­ä¹‰â€)ï¼Œè€Œæ˜¯å°†æŒ‡é’ˆçš„æ‰€æœ‰æƒä»æºå¯¹è±¡è½¬ç§»/ç§»åŠ¨åˆ°ç›®æ ‡å¯¹è±¡ä¼šæ€ä¹ˆæ ·? è¿™æ˜¯moveè¯­ä¹‰èƒŒåçš„æ ¸å¿ƒæ€æƒ³ã€‚ç§»åŠ¨è¯­ä¹‰ æ„å‘³ç€è¯¥ç±»å°†è½¬ç§»å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œè€Œä¸æ˜¯å¤åˆ¶ã€‚è®©æˆ‘ä»¬æ›´æ–°æˆ‘ä»¬çš„Auto_ptr1ç±»ï¼Œä»¥å±•ç¤ºå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465#include &lt;iostream&gt; template&lt;class T&gt;class Auto_ptr2&#123; T* m_ptr;public: Auto_ptr2(T* ptr=nullptr) :m_ptr(ptr) &#123; &#125; ~Auto_ptr2() &#123; delete m_ptr; &#125; // ç”±ç§»åŠ¨è¯­ä¹‰ å®ç°çš„å¤åˆ¶æ„é€ å‡½æ•° Auto_ptr2(Auto_ptr2&amp; a) // note: not const &#123; m_ptr = a.m_ptr; // å°†å“‘æŒ‡é’ˆä»æºå¯¹è±¡è½¬ç§»åˆ°æœ¬åœ°å¯¹è±¡ a.m_ptr = nullptr; // ç¡®ä¿è¯¥æŒ‡é’ˆä¸å†æ‹¥æœ‰æºå¯¹è±¡ &#125; // å®ç°ç§»åŠ¨è¯­ä¹‰çš„èµ‹å€¼è¿ç®—ç¬¦ Auto_ptr2&amp; operator=(Auto_ptr2&amp; a) // note: not const &#123; if (&amp;a == this) return *this; delete m_ptr; // ç¡®ä¿æˆ‘ä»¬é¦–å…ˆé‡Šæ”¾ç›®æ ‡å·²ç»æŒæœ‰çš„æŒ‡é’ˆ m_ptr = a.m_ptr; // ç„¶åå°†å“‘æŒ‡é’ˆä»æºå¯¹è±¡è½¬ç§»åˆ°æœ¬åœ°å¯¹è±¡ a.m_ptr = nullptr; // ç¡®ä¿è¯¥æŒ‡é’ˆä¸å†æ‹¥æœ‰æºå¯¹è±¡ return *this; &#125; T&amp; operator*() const &#123; return *m_ptr; &#125; T* operator-&gt;() const &#123; return m_ptr; &#125; bool isNull() const &#123; return m_ptr == nullptr; &#125;&#125;; class Resource&#123;public: Resource() &#123; std::cout &lt;&lt; \"Resource acquired\\n\"; &#125; ~Resource() &#123; std::cout &lt;&lt; \"Resource destroyed\\n\"; &#125;&#125;; int main()&#123; Auto_ptr2&lt;Resource&gt; res1(new Resource); Auto_ptr2&lt;Resource&gt; res2; // Start as nullptr std::cout &lt;&lt; \"res1 is \" &lt;&lt; (res1.isNull() ? \"null\\n\" : \"not null\\n\"); std::cout &lt;&lt; \"res2 is \" &lt;&lt; (res2.isNull() ? \"null\\n\" : \"not null\\n\"); res2 = res1; // res2 assumes ownership, res1 is set to null std::cout &lt;&lt; \"Ownership transferred\\n\"; std::cout &lt;&lt; \"res1 is \" &lt;&lt; (res1.isNull() ? \"null\\n\" : \"not null\\n\"); std::cout &lt;&lt; \"res2 is \" &lt;&lt; (res2.isNull() ? \"null\\n\" : \"not null\\n\"); return 0;&#125;ç»“æœï¼š1234567Resource acquiredres1 is not nullres2 is nullOwnership transferredres1 is nullres2 is not nullResource destroyedæ³¨æ„ï¼Œæˆ‘ä»¬çš„é‡è½½æ“ä½œç¬¦=å°†m_ptrçš„æ‰€æœ‰æƒä»res1èµ‹äºˆç»™äº†res2! å› æ­¤ï¼Œæˆ‘ä»¬ä¸ä¼šå¾—åˆ°æŒ‡é’ˆçš„å‰¯æœ¬ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè¢«æ¸…ç†å¹²å‡€ã€‚ï¼ˆæ™ºèƒ½æŒ‡é’ˆçš„ï¼‰std::auto_ptråŠä¸ºä»€ä¹ˆè¦é¿å…ä½¿ç”¨å®ƒç°åœ¨æ˜¯è®¨è®ºstd::auto_ptrçš„åˆé€‚æ—¶æœºã€‚std::auto_ptræ˜¯åœ¨c++ 98ä¸­å¼•å…¥çš„ï¼Œå®ƒæ˜¯c++å¯¹æ ‡å‡†åŒ–æ™ºèƒ½æŒ‡é’ˆçš„ç¬¬ä¸€æ¬¡å°è¯•ã€‚std::auto_ptré€‰æ‹© åƒAuto_ptr2ç±» ä¸€æ ·å®ç°moveè¯­ä¹‰ã€‚ä½†æ˜¯ï¼Œstd::auto_ptr(ä»¥åŠæˆ‘ä»¬çš„Auto_ptr2ç±»)æœ‰å¾ˆå¤šé—®é¢˜ï¼Œä½¿å¾—ä½¿ç”¨å®ƒå¾ˆå±é™©ã€‚é¦–å…ˆï¼Œç”±äºstd::auto_ptré€šè¿‡å¤åˆ¶æ„é€ å‡½æ•°å’Œèµ‹å€¼æ“ä½œç¬¦(=)å®ç°äº†ç§»åŠ¨è¯­ä¹‰ï¼Œå› æ­¤æŒ‰å€¼å‘å‡½æ•°ä¼ é€’std::auto_ptrå°†å¯¼è‡´æ‚¨çš„èµ„æºè¢«ç§»åŠ¨åˆ°å‡½æ•°å‚æ•°å¤„ (å¹¶åœ¨å‡½æ•°å‚æ•°è¶…å‡ºä½œç”¨åŸŸæ—¶åœ¨å‡½æ•°æœ«å°¾é”€æ¯)ã€‚ç„¶åï¼Œå½“æ‚¨ä»è°ƒç”¨æ–¹è®¿é—®auto_ptrå‚æ•°æ—¶(æ²¡æœ‰æ„è¯†åˆ°å®ƒå·²è¢«ä¼ è¾“å’Œåˆ é™¤)ï¼Œæ‚¨çªç„¶å–æ¶ˆäº†å¯¹ç©ºæŒ‡é’ˆçš„å¼•ç”¨ã€‚å´©æºƒ!å…¶æ¬¡ï¼Œstd::auto_ptræ€»æ˜¯ä½¿ç”¨éæ•°ç»„deleteåˆ é™¤å…¶å†…å®¹ã€‚è¿™æ„å‘³ç€auto_pträ¸èƒ½æ­£ç¡®åœ°å¤„ç†åŠ¨æ€åˆ†é…çš„æ•°ç»„ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†é”™è¯¯çš„é‡æ–°åˆ†é…ç±»å‹ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå®ƒä¸èƒ½é˜»æ­¢æ‚¨å‘å®ƒä¼ é€’ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œç„¶åå®ƒä¼šé”™è¯¯åœ°ç®¡ç†è¿™ä¸ªæ•°ç»„ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚æœ€åï¼Œauto_pträ¸èƒ½å¾ˆå¥½åœ°å¤„ç†æ ‡å‡†åº“ä¸­çš„è®¸å¤šå…¶ä»–ç±»ï¼ŒåŒ…æ‹¬å¤§å¤šæ•°å®¹å™¨å’Œç®—æ³•ã€‚è¿™æ˜¯å› ä¸ºè¿™äº›æ ‡å‡†åº“ç±»å‡è®¾å½“å®ƒä»¬å¤åˆ¶ä¸€ä¸ªé¡¹æ—¶ï¼Œå®ƒå®é™…ä¸Šæ˜¯å¤åˆ¶ è€Œä¸æ˜¯ç§»åŠ¨ã€‚ç”±äºä¸Šè¿°ç¼ºç‚¹ï¼Œstd::auto_ptråœ¨c++ 11ä¸­å·²ç»è¢«å¼ƒç”¨ï¼Œä¸åº”è¯¥ä½¿ç”¨ã€‚äº‹å®ä¸Šï¼Œstd::auto_ptrå°†ä½œä¸ºc++ 17çš„ä¸€éƒ¨åˆ†ä»æ ‡å‡†åº“ä¸­å®Œå…¨åˆ é™¤!è§„åˆ™:std::auto_ptræ˜¯ä¸æ¨èçš„ï¼Œä¸åº”è¯¥ä½¿ç”¨ã€‚(æ¨èä½¿ç”¨std::unique_ptræˆ–std::shared_ptr)..Moving forwardauto_ptrçš„è®¾è®¡çš„æ ¸å¿ƒé—®é¢˜æ˜¯ï¼Œåœ¨c++ 11ä¹‹å‰ï¼Œc++è¯­è¨€æ ¹æœ¬æ²¡æœ‰æœºåˆ¶æ¥åŒºåˆ†â€œå¤åˆ¶è¯­ä¹‰â€å’Œâ€œç§»åŠ¨è¯­ä¹‰â€ã€‚è¦†ç›–å¤åˆ¶è¯­ä¹‰ æ¥å®ç°ç§»åŠ¨è¯­ä¹‰ ä¼šå¯¼è‡´å¥‡æ€ªçš„è¾¹ç¼˜æƒ…å†µå’Œæ„å¤–çš„é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ç¼–å†™res1 = res2ï¼Œå´ä¸çŸ¥é“res2æ˜¯å¦ä¼šè¢«æ›´æ”¹!å› æ­¤ï¼Œåœ¨c++ 11ä¸­ï¼Œâ€œç§»åŠ¨â€çš„æ¦‚å¿µè¢«æ­£å¼å®šä¹‰ï¼Œâ€œç§»åŠ¨è¯­ä¹‰â€è¢«æ·»åŠ åˆ°è¯­è¨€ä¸­ï¼Œä»¥æ­£ç¡®åŒºåˆ†å¤åˆ¶å’Œç§»åŠ¨ã€‚æ—¢ç„¶æˆ‘ä»¬å·²ç»ä¸ºç§»åŠ¨è¯­ä¹‰çš„ç”¨å¤„åšå¥½äº†å‡†å¤‡ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç« çš„å…¶ä½™éƒ¨åˆ†æ¢ç´¢ç§»åŠ¨è¯­ä¹‰çš„ä¸»é¢˜ã€‚æˆ‘ä»¬è¿˜å°†ä½¿ç”¨ç§»åŠ¨è¯­ä¹‰ä¿®å¤Auto_ptr2ç±»ã€‚åœ¨c++ 11ä¸­ï¼Œstd::auto_ptrå·²ç»è¢«ä¸€å †å…¶ä»–ç±»å‹çš„ â€œç§»åŠ¨æ„ŸçŸ¥â€æ™ºèƒ½æŒ‡é’ˆ æ‰€å–ä»£ï¼šstd::unique_ptr,std::weak_ptrï¼Œä»¥åŠstd::shared_ptrã€‚","categories":[],"tags":[]},{"title":"C&C++/å¼‚å¸¸çš„ç¼ºç‚¹å’Œå±é™©","slug":"C&C++/å¼‚å¸¸çš„ç¼ºç‚¹å’Œå±é™©","date":"2020-05-21T02:22:53.422Z","updated":"2020-05-21T02:56:04.955Z","comments":true,"path":"archives/263cd357.html","link":"","permalink":"https://longlongqin.github.io/archives/263cd357.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/148-exception-dangers-and-downsides/ä¸å‡ ä¹æ‰€æœ‰æœ‰åˆ©å› ç´ ä¸€æ ·ï¼Œä¾‹å¤–ä¹Ÿæœ‰ä¸€äº›æ½œåœ¨çš„ä¸åˆ©å› ç´ ã€‚æœ¬æ–‡å¹¶ä¸æ˜¯å…¨é¢çš„ï¼Œåªæ˜¯æŒ‡å‡ºåœ¨ä½¿ç”¨å¼‚å¸¸(æˆ–å†³å®šæ˜¯å¦ä½¿ç”¨å¼‚å¸¸)æ—¶åº”è¯¥è€ƒè™‘çš„ä¸€äº›ä¸»è¦é—®é¢˜ã€‚æ¸…ç†èµ„æºæ–°ç¨‹åºå‘˜åœ¨ä½¿ç”¨å¼‚å¸¸æ—¶é‡åˆ°çš„æœ€å¤§é—®é¢˜ä¹‹ä¸€æ˜¯å½“å¼‚å¸¸å‘ç”Ÿæ—¶æ¸…ç†èµ„æºçš„é—®é¢˜ã€‚è€ƒè™‘ä¸‹é¢çš„ä¾‹å­:12345678910try&#123; openFile(filename); writeFile(filename, data); closeFile(filename);&#125;catch (FileException &amp;exception)&#123; cerr &lt;&lt; \"Failed to write to file: \" &lt;&lt; exception.what() &lt;&lt; '\\n';&#125;å¦‚æœWriteFile()å¤±è´¥å¹¶æŠ›å‡ºä¸€ä¸ªFileExceptionï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µ?æ­¤æ—¶ï¼Œæˆ‘ä»¬å·²ç»æ‰“å¼€äº†æ–‡ä»¶ï¼Œç°åœ¨æ§åˆ¶æµè·³è½¬åˆ°FileExceptionå¤„ç†ç¨‹åºï¼Œæ‰“å°é”™è¯¯å¹¶é€€å‡ºã€‚æ³¨æ„ï¼Œè¯¥æ–‡ä»¶ä»æœªå…³é—­è¿‡!è¿™ä¸ªä¾‹å­åº”è¯¥æ”¹å†™å¦‚ä¸‹:12345678910111213try&#123; openFile(filename); writeFile(filename, data); closeFile(filename);&#125;catch (FileException &amp;exception)&#123; // Make sure file is closed closeFile(filename); // Then write error cerr &lt;&lt; \"Failed to write to file: \" &lt;&lt; exception.what() &lt;&lt; '\\n';&#125;åœ¨å¤„ç†åŠ¨æ€åˆ†é…çš„å†…å­˜æ—¶ï¼Œè¿™ç§é”™è¯¯é€šå¸¸ä»¥å¦ä¸€ç§å½¢å¼å‡ºç°:12345678910try&#123; Person *john &#123; new Person(\"John\", 18, PERSON_MALE) &#125;; processPerson(john); delete john;&#125;catch (PersonException &amp;exception)&#123; std::cerr&lt;&lt; \"Failed to process person: \" &lt;&lt; exception.what() &lt;&lt; '\\n';&#125;å¦‚æœprocessPerson()æŠ›å‡ºå¼‚å¸¸ï¼Œæ§åˆ¶æµå°†è·³è½¬åˆ°catchå¤„ç†ç¨‹åºã€‚ç»“æœï¼Œjohnå†ä¹Ÿæ²¡æœ‰è¢«é‡Šæ”¾äº†!è¿™ä¸ªç¤ºä¾‹æ¯”å‰ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€äº›â€”â€”å› ä¸ºjohnæ˜¯tryå—çš„æœ¬åœ°å¯¹è±¡ï¼Œæ‰€ä»¥å½“tryå—é€€å‡ºæ—¶ï¼Œå®ƒå°±è¶…å‡ºäº†ä½œç”¨åŸŸã€‚è¿™æ„å‘³ç€å¼‚å¸¸å¤„ç†ç¨‹åºæ ¹æœ¬ä¸èƒ½è®¿é—®john(å®ƒå·²ç»è¢«é”€æ¯äº†)ï¼Œæ‰€ä»¥å®ƒæ— æ³•é‡Šæ”¾å†…å­˜ã€‚ç„¶è€Œï¼Œæœ‰ä¸¤ç§ç›¸å¯¹ç®€å•çš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚é¦–å…ˆï¼Œåœ¨tryå—å¤–éƒ¨å£°æ˜johnï¼Œè¿™æ ·å½“tryå—é€€å‡ºæ—¶ï¼Œå®ƒå°±ä¸ä¼šè¶…å‡ºä½œç”¨åŸŸ:123456789101112Person *john = nullptr;try&#123; john &#123; new Person(\"John\", 18, PERSON_MALE) &#125;; processPerson(john); delete john;&#125;catch (PersonException &amp;exception)&#123; delete john; cerr &lt;&lt; \"Failed to process person: \" &lt;&lt; exception.what() &lt;&lt; '\\n';&#125;å› ä¸ºjohnå£°æ˜åœ¨tryå—ä¹‹å¤–ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åœ¨tryå—å’Œcatchå¤„ç†ç¨‹åºä¸­è®¿é—®ã€‚è¿™æ„å‘³ç€catchå¤„ç†ç¨‹åºå¯ä»¥æ­£ç¡®åœ°è¿›è¡Œæ¸…ç†ã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨ç±»çš„å±€éƒ¨å˜é‡ï¼Œè¯¥å˜é‡çŸ¥é“åœ¨è¶…å‡ºä½œç”¨åŸŸæ—¶å¦‚ä½•æ¸…é™¤è‡ªèº«(é€šå¸¸ç§°ä¸ºâ€œæ™ºèƒ½æŒ‡é’ˆâ€)ã€‚æ ‡å‡†åº“æä¾›äº†ä¸€ä¸ªåä¸ºstd::unique_ptrçš„ç±»ï¼Œå¯ç”¨äºæ­¤ç›®çš„ã€‚std::unique_ptræ˜¯ä¸€ä¸ªä¿å­˜æŒ‡é’ˆçš„æ¨¡æ¿ç±»ï¼Œå½“æŒ‡é’ˆè¶…å‡ºä½œç”¨åŸŸæ—¶é‡Šæ”¾å®ƒã€‚1234567891011121314#include &lt;memory&gt; // for std::unique_ptrtry&#123; Person *john &#123; new Person(\"John\", 18, PERSON_MALE) &#125;; std::unique_ptr&lt;Person&gt; upJohn &#123;john&#125;; // upJohn ç°åœ¨æ‹¥æœ‰ john ProcessPerson(john); // å½“upJohnè¶…å‡ºèŒƒå›´æ—¶ï¼Œå®ƒå°†åˆ é™¤john&#125;catch (PersonException &amp;exception)&#123; std::cerr &lt;&lt; \"Failed to process person: \" &lt;&lt; exception.what() &lt;&lt; '\\n';&#125;å¼‚å¸¸å’Œææ„å‡½æ•°ä¸æ„é€ å‡½æ•°ä¸åŒï¼Œåœ¨æ„é€ å‡½æ•°ä¸­æŠ›å‡ºå¼‚å¸¸æ˜¯æŒ‡ç¤ºå¯¹è±¡åˆ›å»ºæœªæˆåŠŸçš„ä¸€ç§æœ‰ç”¨æ–¹æ³•ï¼Œä½†æ˜¯å¼‚å¸¸ä¸åº”è¯¥åœ¨ææ„å‡½æ•°ä¸­æŠ›å‡ºã€‚å½“æ ˆå±•å¼€è¿‡ç¨‹ä¸­ä»ææ„å‡½æ•°å¼•å‘å¼‚å¸¸æ—¶ï¼Œä¼šå‘ç”Ÿæ­¤é—®é¢˜ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œç¼–è¯‘å™¨å°±ä¼šå¤„äºè¿™æ ·ä¸€ç§æƒ…å†µ: å®ƒä¸çŸ¥é“æ˜¯ç»§ç»­ æ ˆå±•å¼€è¿‡ç¨‹ è¿˜æ˜¯ å¤„ç†æ–°çš„å¼‚å¸¸ã€‚â€”â€”æœ€ç»ˆçš„ç»“æœæ˜¯æ‚¨çš„ç¨‹åºå°†ç«‹å³ç»ˆæ­¢ã€‚å› æ­¤ï¼Œæœ€å¥½çš„åšæ³•å°±æ˜¯å®Œå…¨é¿å…åœ¨ææ„å‡½æ•°ä¸­ä½¿ç”¨å¼‚å¸¸ã€‚è€Œæ˜¯å°†æ¶ˆæ¯å†™å…¥æ—¥å¿—æ–‡ä»¶ã€‚æ€§èƒ½æ–¹é¢å¼‚å¸¸æƒ…å†µç¡®å®ä¼šå¸¦æ¥å°å°çš„æ€§èƒ½ä»£ä»·ã€‚å®ƒä»¬ä¼šå¢åŠ å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°ï¼Œè€Œä¸”ç”±äºå¿…é¡»æ‰§è¡Œé¢å¤–çš„æ£€æŸ¥ï¼Œå®ƒä»¬è¿˜å¯èƒ½å¯¼è‡´è¿è¡Œé€Ÿåº¦å˜æ…¢ã€‚ ç„¶è€Œï¼Œå¼‚å¸¸çš„ä¸»è¦æ€§èƒ½æŸå¤±æ˜¯åœ¨å®é™…æŠ›å‡ºå¼‚å¸¸æ—¶å‘ç”Ÿçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»é‡Šæ”¾æ ˆå¹¶æ‰¾åˆ°é€‚å½“çš„å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œè¿™æ˜¯ä¸€ä¸ªç›¸å¯¹æ˜‚è´µçš„æ“ä½œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€äº›ç°ä»£è®¡ç®—æœºæ¶æ„æ”¯æŒä¸€ç§ç§°ä¸ºé›¶æˆæœ¬å¼‚å¸¸çš„å¼‚å¸¸æ¨¡å‹ã€‚é›¶æˆæœ¬å¼‚å¸¸(å¦‚æœå—æ”¯æŒ)åœ¨éé”™è¯¯æƒ…å†µä¸‹æ²¡æœ‰é¢å¤–çš„è¿è¡Œæ—¶æˆæœ¬(è¿™æ˜¯æˆ‘ä»¬æœ€å…³å¿ƒçš„æ€§èƒ½æƒ…å†µ)ã€‚ç„¶è€Œï¼Œåœ¨å‘ç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œå®ƒä»¬ä¼šæ‹›è‡´æ›´å¤§çš„æ€§èƒ½æ¶ˆè€—ã€‚ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨å¼‚å¸¸ï¼Ÿå½“ä¸‹åˆ—å„é¡¹éƒ½ä¸ºçœŸæ—¶ï¼Œæœ€å¥½ä½¿ç”¨å¼‚å¸¸å¤„ç†:æ­£åœ¨å¤„ç†çš„é”™è¯¯å¯èƒ½åªä¼šå¶å°”å‘ç”Ÿã€‚ä¸¥é‡çš„é”™è¯¯ï¼Œå¹¶ä¸”æ‰§è¡Œæ— æ³•ç»§ç»­ã€‚é”™è¯¯ä¸èƒ½åœ¨å®ƒå‘ç”Ÿçš„åœ°æ–¹å¤„ç†ã€‚æ²¡æœ‰ä¸€ç§å¥½çš„æ–¹æ³•å¯ä»¥å°†é”™è¯¯ä»£ç è¿”å›ç»™è°ƒç”¨è€…ã€‚","categories":[],"tags":[]},{"title":"C&C++/å‡½æ•°tryå—","slug":"C&C++/å‡½æ•°tryå—","date":"2020-05-21T01:44:55.082Z","updated":"2020-05-21T02:21:45.149Z","comments":true,"path":"archives/2b44a8c.html","link":"","permalink":"https://longlongqin.github.io/archives/2b44a8c.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/14-7-function-try-blocks/Tryå’Œcatchå—åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½èƒ½å¾ˆå¥½åœ°å·¥ä½œï¼Œä½†æ˜¯æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µä¸‹å®ƒä»¬æ˜¯ä¸å……åˆ†çš„ã€‚è€ƒè™‘ä¸‹é¢çš„ä¾‹å­:1234567891011121314151617181920212223242526272829303132class A&#123;private: int m_x;public: A(int x) : m_x(x) &#123; if (x &lt;= 0) throw 1; &#125;&#125;; class B : public A&#123;public: B(int x) : A(x) &#123; // What happens if creation of A fails and we want to handle it here? &#125;&#125;; int main()&#123; try &#123; B b(0); &#125; catch (int) &#123; std::cout &lt;&lt; \"Oops\\n\"; &#125;&#125;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ´¾ç”Ÿç±»Bè°ƒç”¨åŸºç±»æ„é€ å‡½æ•°Aï¼Œè¿™ä¼šå¼•å‘å¼‚å¸¸ã€‚å› ä¸ºå¯¹è±¡bçš„åˆ›å»ºå·²ç»æ”¾åœ¨tryå—ä¸­(åœ¨main()å‡½æ•°ä¸­)ï¼Œå¦‚æœAæŠ›å‡ºå¼‚å¸¸ï¼Œmainçš„tryå—ä¼šæ•æ‰åˆ°å®ƒã€‚å› æ­¤ï¼Œè¿™ä¸ªç¨‹åºæ‰“å°:1Oopsä½†å¦‚æœæˆ‘ä»¬æƒ³åœ¨Bå†…éƒ¨æ•è·å¼‚å¸¸å‘¢ï¼Ÿåœ¨è°ƒç”¨Bæ„é€ å‡½æ•°çš„ä¸»ä½“ä¹‹å‰ï¼Œå¯¹åŸºæ„é€ å‡½æ•°Açš„è°ƒç”¨é€šè¿‡æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨è¿›è¡Œã€‚æ²¡æœ‰åŠæ³•åœ¨å®ƒå‘¨å›´åŒ…è£…ä¸€ä¸ªæ ‡å‡†çš„tryå—ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ä¸€ä¸ªç¨å¾®ä¿®æ”¹è¿‡çš„tryå—ï¼Œç§°ä¸ºå‡½æ•°tryå—ã€‚å‡½æ•°tryå—å‡½æ•°tryå—çš„è®¾è®¡å…è®¸æ‚¨å›´ç»•æ•´ä¸ªå‡½æ•°ä½“å»ºç«‹å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œè€Œä¸æ˜¯å›´ç»•ä¸€ä¸ªä»£ç å—ã€‚å‡½æ•°tryå—çš„è¯­æ³•æœ‰ç‚¹éš¾æè¿°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†é€šè¿‡ä¾‹å­æ¥è¯´æ˜:12345678910111213141516171819202122232425262728293031323334353637383940#include &lt;iostream&gt; class A&#123;private: int m_x;public: A(int x) : m_x(x) &#123; if (x &lt;= 0) throw 1; &#125;&#125;; class B : public A&#123;public: B(int x) try : A(x) // æ³¨æ„è¿™é‡Œæ·»åŠ äº†tryå…³é”®å­— &#123; &#125; catch (...) // æ³¨æ„ï¼Œè¿™ä¸å‡½æ•°æœ¬èº«å¤„äºåŒä¸€ç¼©è¿›çº§åˆ« &#123; // æˆå‘˜åˆå§‹åŒ–å™¨åˆ—è¡¨æˆ–æ„é€ å‡½æ•°ä½“ä¸­çš„å¼‚å¸¸åœ¨è¿™é‡Œæ•è· std::cerr &lt;&lt; \"Exception caught\\n\"; // å¦‚æœè¿™é‡Œæ²¡æœ‰æ˜¾å¼åœ°æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™å°†éšå¼åœ°é‡æ–°æŠ›å‡ºå½“å‰å¼‚å¸¸ &#125;&#125;; int main()&#123; try &#123; B b(0); &#125; catch (int) &#123; std::cout &lt;&lt; \"Oops\\n\"; &#125;&#125;å½“è¿™ä¸ªç¨‹åºè¿è¡Œæ—¶ï¼Œå®ƒäº§ç”Ÿçš„è¾“å‡º:12Exception caughtOopsè®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°ç ”ç©¶ä¸€ä¸‹è¿™ä¸ªç¨‹åºã€‚é¦–å…ˆï¼Œæ³¨æ„åœ¨æˆå‘˜åˆå§‹åŒ–å™¨åˆ—è¡¨ä¹‹å‰æ·»åŠ äº†â€œtryâ€å…³é”®å­—ã€‚è¿™è¡¨æ˜åœ¨è¯¥ç‚¹ä¹‹å (ç›´åˆ°å‡½æ•°ç»“æŸ) çš„æ‰€æœ‰å†…å®¹éƒ½åº”è¯¥åœ¨tryå—ä¸­è€ƒè™‘ã€‚å…¶æ¬¡ï¼Œè¯·æ³¨æ„ï¼Œå…³è”çš„catchå—ä¸æ•´ä¸ªå‡½æ•°çš„ç¼©è¿›çº§åˆ«ç›¸åŒã€‚åœ¨tryå…³é”®å­—å’Œå‡½æ•°ä½“æœ«å°¾ä¹‹é—´æŠ›å‡ºçš„ä»»ä½•å¼‚å¸¸éƒ½å¯ä»¥åœ¨è¿™é‡Œæ•è·ã€‚æœ€åï¼Œä¸æ™®é€šçš„catchå—ä¸åŒï¼Œå®ƒå…è®¸æ‚¨è§£æå¼‚å¸¸ã€æŠ›å‡ºæ–°å¼‚å¸¸æˆ–é‡æ–°æŠ›å‡ºç°æœ‰å¼‚å¸¸ï¼Œä½¿ç”¨å‡½æ•°çº§tryå—ï¼Œæ‚¨å¿…é¡»æŠ›å‡ºæˆ–é‡æ–°æŠ›å‡ºå¼‚å¸¸ã€‚ å¦‚æœæ‚¨æ²¡æœ‰æ˜¾å¼åœ°æŠ›å‡ºä¸€ä¸ªæ–°çš„å¼‚å¸¸ï¼Œæˆ–è€…é‡æ–°æŠ›å‡ºå½“å‰çš„å¼‚å¸¸(ä½¿ç”¨throwå…³é”®å­—æœ¬èº«)ï¼Œè¯¥å¼‚å¸¸å°†è¢«éšå¼åœ°é‡æ–°æŠ›å‡ºæ ˆã€‚å°½ç®¡å‡½æ•°çº§tryå—ä¹Ÿå¯ä»¥ç”¨äºéæˆå‘˜å‡½æ•°ï¼Œä½†é€šå¸¸ä¸ä¼šè¿™æ ·åšï¼Œå› ä¸ºå¾ˆå°‘éœ€è¦è¿™æ ·åšã€‚å®ƒä»¬å‡ ä¹åªç”¨äºæ„é€ å‡½æ•°!å‡½æ•°tryå—å¯ä»¥æ•è·åŸºç±»å’Œå½“å‰ç±»çš„å¼‚å¸¸åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœAå’ŒBçš„æ„é€ å‡½æ•°éƒ½æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå®ƒå°†è¢«Bçš„æ„é€ å‡½æ•°å‘¨å›´çš„tryå—æ•è·ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­çœ‹åˆ°ï¼Œæˆ‘ä»¬ä»ç±»Bè€Œä¸æ˜¯ç±»AæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸:123456789101112131415161718192021222324252627282930313233343536373839#include &lt;iostream&gt; class A&#123;private: int m_x;public: A(int x) : m_x(x) &#123; &#125;&#125;; class B : public A&#123;public: B(int x) try : A(x) // note addition of try keyword here &#123; if (x &lt;= 0) // æŠŠè¿™ä¸ªä»Aç§»åˆ°B throw 1; // è¿™ä¸ªä¹Ÿè¢«ç§»è¿‡æ¥ &#125; catch (...) &#123; std::cerr &lt;&lt; \"Exception caught\\n\"; // If an exception isn't explicitly thrown here, the current exception will be implicitly rethrown &#125;&#125;; int main()&#123; try &#123; B b(0); &#125; catch (int) &#123; std::cout &lt;&lt; \"Oops\\n\"; &#125;&#125;ç»“æœï¼š12Exception caughtOopsä¸è¦ä½¿ç”¨å‡½æ•°tryå—æ¥æ¸…ç†èµ„æºå½“å¯¹è±¡æ„é€ å¤±è´¥æ—¶ï¼Œå°†ä¸è°ƒç”¨è¯¥ç±»çš„ææ„å‡½æ•°ã€‚å› æ­¤ï¼Œæ‚¨å¯èƒ½ä¼šè¯•å›¾ä½¿ç”¨ä¸€ä¸ª å‡½æ•°tryå— æ¥æ¸…ç†ä¸€ä¸ªåœ¨å¤±è´¥ä¹‹å‰å·²ç»éƒ¨åˆ†åˆ†é…äº†èµ„æºçš„ç±»ã€‚ä½†æ˜¯ï¼Œå¼•ç”¨å¤±è´¥å¯¹è±¡çš„æˆå‘˜è¢«è®¤ä¸ºæ˜¯æœªå®šä¹‰çš„è¡Œä¸ºï¼Œå› ä¸ºåœ¨catchå—æ‰§è¡Œä¹‹å‰å¯¹è±¡æ˜¯â€œæ­»â€çš„ã€‚ è¿™æ„å‘³ç€ä½ ä¸èƒ½åœ¨ç±»åä½¿ç”¨ å‡½æ•°tryå— æ¥æ¸…ç†ã€‚å¦‚æœæ‚¨å¸Œæœ›åœ¨ç±»ä¹‹åè¿›è¡Œæ¸…ç†ï¼Œè¯·éµå¾ªæ¸…ç†æŠ›å‡ºå¼‚å¸¸çš„ç±»çš„æ ‡å‡†è§„åˆ™ï¼ˆå‚è§14.5 â€“ Exceptions, classes, and inheritanceçš„ â€œå½“æ„é€ å‡½æ•°å¤±è´¥æ—¶(When constructor fail)â€ å°èŠ‚ï¼‰å‡½æ•°tryä¸»è¦ç”¨äºåœ¨å°†å¼‚å¸¸ä¼ é€’åˆ°æ ˆä¹‹å‰è®°å½•å¤±è´¥ï¼Œæˆ–è€…æ›´æ”¹æŠ›å‡ºå¼‚å¸¸çš„ç±»å‹ã€‚","categories":[],"tags":[]},{"title":"C&C++/é‡æ–°æŠ›å‡ºå¼‚å¸¸","slug":"C&C++/é‡æ–°æŠ›å‡ºå¼‚å¸¸","date":"2020-05-21T00:48:12.059Z","updated":"2020-05-21T01:27:56.951Z","comments":true,"path":"archives/9b640ff1.html","link":"","permalink":"https://longlongqin.github.io/archives/9b640ff1.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/14-6-rethrowing-exceptions/æœ‰æ—¶å€™ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µ:æ‚¨æƒ³è¦æ•è·å¼‚å¸¸ï¼Œä½†åˆä¸æƒ³(æˆ–æœ‰èƒ½åŠ› )åœ¨æ•è·å®ƒçš„æ—¶å€™å®Œå…¨å¤„ç†å®ƒã€‚å½“æ‚¨æƒ³è¦è®°å½•ä¸€ä¸ªé”™è¯¯ï¼Œä½†æ˜¯å°†é—®é¢˜ä¼ é€’ç»™è°ƒç”¨è€…å®é™…å¤„ç†æ—¶ï¼Œè¿™æ˜¯å¾ˆå¸¸è§çš„ã€‚å½“å‡½æ•°å¯ä»¥ä½¿ç”¨è¿”å›ä»£ç æ—¶ï¼Œè¿™å¾ˆç®€å•ã€‚è€ƒè™‘ä¸‹é¢çš„ä¾‹å­:1234567891011121314151617Database* createDatabase(std::string filename)&#123; try &#123; Database *d = new Database(filename); d-&gt;open(); // assume this throws an int exception on failure return d; &#125; catch (int exception) &#123; // Database creation failed // Write an error to some global logfile g_log.logError(\"Creation of Database failed\"); &#125; return nullptr;&#125;åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œå‡½æ•°çš„ä»»åŠ¡æ˜¯åˆ›å»ºæ•°æ®åº“å¯¹è±¡ã€æ‰“å¼€æ•°æ®åº“å¹¶è¿”å›æ•°æ®åº“å¯¹è±¡ã€‚åœ¨å‡ºç°é”™è¯¯çš„æƒ…å†µä¸‹(ä¾‹å¦‚ä¼ å…¥äº†é”™è¯¯çš„æ–‡ä»¶å)ï¼Œå¼‚å¸¸å¤„ç†ç¨‹åºè®°å½•ä¸€ä¸ªé”™è¯¯ï¼Œç„¶ååˆç†åœ°è¿”å›ä¸€ä¸ªç©ºæŒ‡é’ˆã€‚ç°åœ¨è€ƒè™‘ä»¥ä¸‹å‡½æ•°:1234567891011121314151617int getIntValueFromDatabase(Database *d, std::string table, std::string key)&#123; assert(d); try &#123; return d-&gt;getIntValue(table, key); // throws int exception on failure &#125; catch (int exception) &#123; // Write an error to some global logfile g_log.logError(\"doSomethingImportant failed\"); // However, we haven't actually handled this error // So what do we do here? &#125;&#125;åœ¨è¿™ä¸ªå‡½æ•°æˆåŠŸçš„æƒ…å†µä¸‹ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•´æ•°å€¼â€”â€”ä»»ä½•æ•´æ•°å€¼éƒ½å¯ä»¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆå€¼ã€‚ä½†æ˜¯åœ¨getIntValue()å‡ºç°é—®é¢˜çš„æƒ…å†µä¸‹åˆå¦‚ä½•å‘¢? åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒgetIntValue()å°†æŠ›å‡ºä¸€ä¸ªæ•´æ•°å¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸å°†è¢«getIntValueFromDatabase()ä¸­çš„catchå—æ•è·ï¼Œè¯¥å—å°†è®°å½•é”™è¯¯ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•å‘Šè¯‰getIntValueFromDatabase()çš„è°ƒç”¨è€…å‡ºé”™äº†å‘¢? ä¸ä¸Šé¢çš„ä¾‹å­ä¸åŒï¼Œè¿™é‡Œæ²¡æœ‰ä¸€ä¸ªå¥½çš„è¿”å›ä»£ç å¯ä»¥ä½¿ç”¨(å› ä¸ºä»»ä½•æ•´æ•°è¿”å›å€¼éƒ½å¯èƒ½æ˜¯æœ‰æ•ˆçš„)ã€‚æŠ›å‡ºæ–°å¼‚å¸¸ä¸€ä¸ªæ˜æ˜¾çš„è§£å†³æ–¹æ¡ˆæ˜¯æŠ›å‡ºä¸€ä¸ªæ–°çš„å¼‚å¸¸ã€‚12345678910111213141516int getIntValueFromDatabase(Database *d, std::string table, std::string key)&#123; assert(d); try &#123; return d-&gt;getIntValue(table, key); // throws int exception on failure &#125; catch (int exception) &#123; // Write an error to some global logfile g_log.logError(\"doSomethingImportant failed\"); throw 'q'; // throw char exception 'q' up the stack to be handled by caller of getIntValueFromDatabase() &#125;&#125;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç¨‹åºä»getIntValue()è·å–intå¼‚å¸¸ï¼Œè®°å½•é”™è¯¯ï¼Œç„¶åç”¨ charå€¼â€™ q â€˜ æŠ›å‡ºä¸€ä¸ªæ–°çš„å¼‚å¸¸ã€‚è™½ç„¶ä»catchå—æŠ›å‡ºå¼‚å¸¸çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä½†è¿™æ˜¯å…è®¸çš„ã€‚è¯·è®°ä½ï¼Œåªæœ‰åœ¨tryå—ä¸­æŠ›å‡ºçš„å¼‚å¸¸æ‰æœ‰èµ„æ ¼è¢«æ•è·ã€‚è¿™æ„å‘³ç€åœ¨catchå—ä¸­æŠ›å‡ºçš„å¼‚å¸¸ä¸ä¼šè¢«å®ƒæ‰€åœ¨çš„catchå—æ•è·ã€‚ç›¸åï¼Œå®ƒå°†åœ¨å †æ ˆä¸Šä¼ æ’­åˆ°è°ƒç”¨è€…ã€‚ä»catchå—æŠ›å‡ºçš„å¼‚å¸¸å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¼‚å¸¸â€”â€”å®ƒä¸éœ€è¦ä¸åˆšæ‰æ•è·çš„å¼‚å¸¸ç›¸åŒçš„ç±»å‹ã€‚é‡æ–°æŠ›å‡ºå¼‚å¸¸(é”™è¯¯çš„æ–¹å¼)å¦ä¸€ä¸ªé€‰é¡¹æ˜¯é‡æ–°æŠ›å‡ºç›¸åŒçš„å¼‚å¸¸ã€‚ä¸€ç§æ–¹æ³•æ˜¯è¿™æ ·åš:12345678910111213141516int getIntValueFromDatabase(Database *d, std::string table, std::string key)&#123; assert(d); try &#123; return d-&gt;getIntValue(table, key); // throws int exception on failure &#125; catch (int exception) &#123; // Write an error to some global logfile g_log.logError(\"doSomethingImportant failed\"); throw exception; &#125;&#125;å°½ç®¡è¿™ç§æ–¹æ³•æœ‰æ•ˆï¼Œä½†ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œå®ƒä¸ä¼šæŠ›å‡ºä¸æ•è·åˆ°çš„å¼‚å¸¸å®Œå…¨ç›¸åŒçš„å¼‚å¸¸â€”â€”è€Œæ˜¯æŠ›å‡ºä¸€ä¸ªç»è¿‡å¤åˆ¶åˆå§‹åŒ–çš„å˜é‡å¼‚å¸¸å‰¯æœ¬ã€‚å°½ç®¡ç¼–è¯‘å™¨å¯ä»¥è‡ªç”±åœ°çœç•¥å‰¯æœ¬ï¼Œä½†ä¹Ÿæœ‰å¯èƒ½ä¸è¿™ä¹ˆåšï¼Œå› æ­¤è¿™å¯èƒ½ä¼šé™ä½æ€§èƒ½ã€‚ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè€ƒè™‘ä¸‹é¢çš„æƒ…å†µ:12345678910111213141516int getIntValueFromDatabase(Database *d, std::string table, std::string key)&#123; assert(d); try &#123; return d-&gt;getIntValue(table, key); // throws Derived exception on failure &#125; catch (Base &amp;exception) //â­ä½¿ç”¨å¼•ç”¨ ä¼ å…¥ &#123; // Write an error to some global logfile g_log.logError(\"doSomethingImportant failed\"); throw exception; // Danger: this throws a Base object, not a Derived object &#125;&#125;åœ¨æœ¬ä¾‹ä¸­ï¼ŒgetIntValue()æŠ›å‡ºä¸€ä¸ªæ´¾ç”Ÿå¯¹è±¡ï¼Œä½†æ˜¯catchå—æ­£åœ¨æ•è·ä¸€ä¸ªåŸºå¼•ç”¨ã€‚å¯ä»¥è¿™æ ·ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬å¯ä»¥æœ‰ä¸€ä¸ªæ´¾ç”Ÿå¯¹è±¡çš„åŸºå¼•ç”¨ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬æŠ›å‡ºå¼‚å¸¸æ—¶ï¼ŒæŠ›å‡ºçš„å¼‚å¸¸æ˜¯ç”±å˜é‡exceptionå¤åˆ¶åˆå§‹åŒ–çš„ã€‚å˜é‡exception æ˜¯ åŸºç±»å‹ï¼Œå› æ­¤å¤åˆ¶åˆå§‹åŒ–çš„å¼‚å¸¸ ä¹Ÿæ˜¯åŸºç±»å‹(ä¸æ˜¯æ´¾ç”Ÿçš„!)ä½ å¯ä»¥åœ¨ä¸‹é¢çš„ç¨‹åºä¸­çœ‹åˆ°:1234567891011121314151617181920212223242526272829303132333435363738394041424344#include &lt;iostream&gt;class Base&#123;public: Base() &#123;&#125; virtual void print() &#123; std::cout &lt;&lt; \"Base\"; &#125;&#125;; class Derived: public Base&#123;public: Derived() &#123;&#125; virtual void print() &#123; std::cout &lt;&lt; \"Derived\"; &#125;&#125;; int main()&#123; try &#123; try &#123; throw Derived(); &#125; catch (Base&amp; b) &#123; std::cout &lt;&lt; \"Caught Base b, which is actually a \"; b.print(); std::cout &lt;&lt; \"\\n\"; throw b; // the Derived object gets sliced here &#125; &#125; catch (Base&amp; b) &#123; std::cout &lt;&lt; \"Caught Base b, which is actually a \"; b.print(); std::cout &lt;&lt; \"\\n\"; &#125; return 0;&#125;/*ç»“æœ*/Caught Base b, which is actually a DerivedCaught Base b, which is actually a Baseç»“æœçš„ç¬¬äºŒè¡Œ è¡¨æ˜Baseå®é™…ä¸Šæ˜¯ä¸€ä¸ªBaseè€Œä¸æ˜¯ä¸€ä¸ªæ´¾ç”Ÿçš„äº‹å® è¯æ˜æ´¾ç”Ÿå¯¹è±¡æ˜¯è¢«åˆ‡ç‰‡çš„ã€‚é‡æ–°æŠ›å‡ºå¼‚å¸¸(æ­£ç¡®çš„æ–¹å¼)å¹¸è¿çš„æ˜¯ï¼ŒC++æä¾›äº†ä¸€ç§æ–¹æ³•æ¥é‡æ–°æŠ›å‡ºä¸åˆšæ‰æ•è·çš„å¼‚å¸¸å®Œå…¨ç›¸åŒçš„å¼‚å¸¸ã€‚ è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œåªéœ€ä½¿ç”¨catchå—ä¸­çš„ throwå…³é”®å­—(æ²¡æœ‰å…³è”çš„å˜é‡)ï¼Œå°±åƒè¿™æ ·:1234567891011121314151617181920212223242526272829303132333435363738394041424344#include &lt;iostream&gt;class Base&#123;public: Base() &#123;&#125; virtual void print() &#123; std::cout &lt;&lt; \"Base\"; &#125;&#125;; class Derived: public Base&#123;public: Derived() &#123;&#125; virtual void print() &#123; std::cout &lt;&lt; \"Derived\"; &#125;&#125;; int main()&#123; try &#123; try &#123; throw Derived(); &#125; catch (Base&amp; b) &#123; std::cout &lt;&lt; \"Caught Base b, which is actually a \"; b.print(); std::cout &lt;&lt; \"\\n\"; throw; // â­â­ æ³¨æ„:æˆ‘ä»¬ç°åœ¨åœ¨è¿™é‡Œé‡æ–°æŠ›å‡ºå¯¹è±¡ &#125; &#125; catch (Base&amp; b) &#123; std::cout &lt;&lt; \"Caught Base b, which is actually a \"; b.print(); std::cout &lt;&lt; \"\\n\"; &#125; return 0;&#125;/*ç»“æœ*/Caught Base b, which is actually a DerivedCaught Base b, which is actually a Derived â­è¿™ä¸ªthrowå…³é”®å­—çœ‹èµ·æ¥ä¸ä¼šæŠ›å‡ºä»»ä½•ç‰¹å®šçš„ä¸œè¥¿ï¼Œå®é™…ä¸Šä¼šé‡æ–°æŠ›å‡ºåˆšæ‰æ•è·çš„å¼‚å¸¸ã€‚ä¸éœ€è¦åˆ›å»ºå‰¯æœ¬ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸å¿…æ‹…å¿ƒæ€§èƒ½é—®é¢˜ã€‚","categories":[],"tags":[]},{"title":"C&C++/å¼‚å¸¸ã€ç±»ã€ç»§æ‰¿","slug":"C&C++/å¼‚å¸¸ã€ç±»ã€ç»§æ‰¿","date":"2020-05-20T08:16:37.618Z","updated":"2020-05-20T10:03:20.881Z","comments":true,"path":"archives/ee7242dc.html","link":"","permalink":"https://longlongqin.github.io/archives/ee7242dc.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/145-exceptions-classes-and-inheritance/å¼‚å¸¸å’Œæˆå‘˜å‡½æ•°åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‚¨åªçœ‹åˆ°äº†éæˆå‘˜å‡½æ•°ä¸­ä½¿ç”¨çš„å¼‚å¸¸ã€‚ä½†æ˜¯ï¼Œå¼‚å¸¸åœ¨æˆå‘˜å‡½æ•°ä¸­åŒæ ·æœ‰ç”¨ï¼Œåœ¨é‡è½½æ“ä½œç¬¦ä¸­æ›´æ˜¯å¦‚æ­¤ã€‚è€ƒè™‘ä»¥ä¸‹é‡è½½çš„[]è¿ç®—ç¬¦ä½œä¸ºä¸€ä¸ªç®€å•æ•´æ•°æ•°ç»„ç±»çš„ä¸€éƒ¨åˆ†:1234int&amp; IntArray::operator[](const int index)&#123; return m_data[index];&#125;å°½ç®¡åªè¦ç´¢å¼•æ˜¯æœ‰æ•ˆçš„æ•°ç»„ç´¢å¼•ï¼Œè¿™ä¸ªå‡½æ•°å°±å¯ä»¥å¾ˆå¥½åœ°å·¥ä½œï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°ä¸¥é‡ç¼ºä¹ä¸€äº›è‰¯å¥½çš„é”™è¯¯æ£€æŸ¥ã€‚æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªassertè¯­å¥æ¥ç¡®ä¿ç´¢å¼•æ˜¯æœ‰æ•ˆçš„:12345int&amp; IntArray::operator[](const int index)&#123; assert (index &gt;= 0 &amp;&amp; index &lt; getLength()); return m_data[index];&#125;ç°åœ¨ï¼Œå¦‚æœç”¨æˆ·ä¼ å…¥ä¸€ä¸ªæ— æ•ˆç´¢å¼•ï¼Œæ“ä½œç¬¦[]å°†æŠ›å‡ºä¸€ä¸ªintå¼‚å¸¸ã€‚è™½ç„¶è¿™å¯¹äºå‘ç”¨æˆ·æŒ‡å‡ºå‡ºé”™çš„åœ°æ–¹å¾ˆæœ‰ç”¨ï¼Œä½†æœ‰æ—¶æ›´å¥½çš„åšæ³•æ˜¯é™é»˜åœ°å¤±è´¥ï¼Œå¹¶è®©è°ƒç”¨è€…çŸ¥é“å‡ºé”™çš„åœ°æ–¹ï¼Œä»¥ä¾¿ä»–ä»¬å¯ä»¥é€‚å½“åœ°å¤„ç†å®ƒã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è®©å®ƒæŠ›å‡ºå¼‚å¸¸ï¼š1234567int&amp; IntArray::operator[](const int index)&#123; if (index &lt; 0 || index &gt;= getLength()) throw index; return m_data[index];&#125;å½“æ„é€ å‡½æ•°å¤±è´¥æ„é€ å‡½æ•°æ˜¯å¼‚å¸¸åœ¨ç±»ä¸­ç¬¬äºŒä¸ªæœ‰ç”¨çš„åœ°æ–¹ã€‚å¦‚æœæ„é€ å‡½æ•°ç”±äºæŸç§åŸå› å¿…é¡»å¤±è´¥(ä¾‹å¦‚ï¼Œç”¨æˆ·ä¼ å…¥äº†æ— æ•ˆçš„è¾“å…¥)ï¼Œåªéœ€æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸æ¥æŒ‡ç¤ºå¯¹è±¡åˆ›å»ºå¤±è´¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„æ„é€ è¢«ä¸­æ­¢ï¼Œæ‰€æœ‰ç±»æˆå‘˜(åœ¨æ„é€ å‡½æ•°æ‰§è¡Œä¹‹å‰å·²ç»åˆ›å»ºå¹¶åˆå§‹åŒ–çš„ç±»æˆå‘˜)æŒ‰ç…§é€šå¸¸çš„æ–¹å¼è¢«é”€æ¯ã€‚ä½†æ˜¯ï¼Œæ°¸è¿œä¸ä¼šè°ƒç”¨ç±»çš„ææ„å‡½æ•°(å› ä¸ºå¯¹è±¡æ°¸è¿œä¸ä¼šå®Œæˆæ„é€ )ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354#include &lt;iostream&gt; class Member&#123;public: Member() &#123; std::cerr &lt;&lt; \"Member allocated some resources\\n\"; &#125; ~Member() &#123; std::cerr &lt;&lt; \"Member cleaned up\\n\"; &#125;&#125;; class A&#123;private: int m_x; Member m_member; public: A(int x) : m_x(x) &#123; if (x &lt;= 0) throw 1; &#125; ~A() &#123; std::cerr &lt;&lt; \"~A\\n\"; // should not be called &#125;&#125;; int main()&#123; try &#123; A a(0); &#125; catch (int) &#123; std::cerr &lt;&lt; \"Oops\\n\"; &#125; return 0;&#125;/*ç»“æœ*/Member allocated some resourcesMember cleaned upOopsåœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œå½“ç±»AæŠ›å‡ºå¼‚å¸¸æ—¶ï¼ŒAçš„æ‰€æœ‰æˆå‘˜éƒ½è¢«é”€æ¯ã€‚è¿™ç»™äº†m_memberä¸€ä¸ªæœºä¼šæ¥æ¸…ç†ä»»ä½•è¢«åˆ†é…çš„èµ„æºã€‚è¿™æ˜¯RAII(å¼•ç”¨:8.7 â€“ Destructors)è¢«å¦‚æ­¤æ¨å´‡çš„éƒ¨åˆ†åŸå› â€”â€”å³ä½¿åœ¨ä¸æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œæ­£ç¡®å®ç°RAIIçš„ç±»åº”è¯¥èƒ½å¤Ÿåœ¨ä¹‹åè¿›è¡Œæ¸…ç†å¼‚å¸¸ç±»ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹(ä¾‹å¦‚int)ä½œä¸ºå¼‚å¸¸ç±»å‹çš„ä¸€ä¸ªä¸»è¦é—®é¢˜æ˜¯ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯æ¨¡ç³Šçš„ã€‚ä¸€ä¸ªæ›´å¤§çš„é—®é¢˜æ˜¯ï¼Œå½“tryå—ä¸­æœ‰å¤šä¸ªè¯­å¥æˆ–å‡½æ•°è°ƒç”¨æ—¶ï¼Œå¦‚ä½•æ¶ˆé™¤å¼‚å¸¸å«ä¹‰çš„æ­§ä¹‰ã€‚12345678910// ä½¿ç”¨ä¸Šé¢çš„IntArrayé‡è½½è¿ç®—ç¬¦[]try&#123; int *value = new int(array[index1] + array[index2]);&#125;catch (int value)&#123; // æˆ‘ä»¬åœ¨è¿™é‡Œæ•æ‰ä»€ä¹ˆ?&#125;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ•è·ä¸€ä¸ªintå¼‚å¸¸ï¼Œå®ƒçœŸæ­£å‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆ?æ˜¯å¦æœ‰ä¸€ä¸ªæ•°ç»„ç´¢å¼•è¶…å‡ºäº†ç•Œé™?æ“ä½œç¬¦+æ˜¯å¦å¯¼è‡´æ•´æ•°æº¢å‡º?æ“ä½œç¬¦newæ˜¯å¦å› ä¸ºå†…å­˜ä¸è¶³è€Œå¤±è´¥?ä¸å¹¸çš„æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ²¡æœ‰ç®€å•çš„æ–¹æ³•æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥æŠ›å‡ºconst char*å¼‚å¸¸æ¥è§£å†³è¯†åˆ«é”™è¯¯çš„é—®é¢˜ï¼Œä½†è¿™ä»ç„¶ä¸èƒ½ä¸ºæˆ‘ä»¬æä¾›ä»¥ä¸åŒçš„æ–¹å¼å¤„ç†ä¸åŒæ¥æºçš„å¼‚å¸¸çš„èƒ½åŠ›ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å¼‚å¸¸ç±»(exception class)ã€‚å¼‚å¸¸ç±»åªæ˜¯ä¸€ä¸ªæ™®é€šçš„ç±»ï¼Œå®ƒæ˜¯ä¸“é—¨è®¾è®¡æ¥ä½œä¸ºå¼‚å¸¸æŠ›å‡ºçš„ã€‚è®©æˆ‘ä»¬è®¾è®¡ä¸€ä¸ªç®€å•çš„å¼‚å¸¸ç±»ä¸æˆ‘ä»¬çš„IntArrayç±»ä¸€èµ·ä½¿ç”¨:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#include &lt;iostream&gt;#include &lt;string&gt; class ArrayException&#123;private: std::string m_error; public: ArrayException(std::string error) : m_error(error) &#123; &#125; const char* getError() &#123; return m_error.c_str(); &#125;&#125;; class IntArray&#123;private: int m_data[3]; // assume array is length 3 for simplicitypublic: IntArray() &#123;&#125; int getLength() &#123; return 3; &#125; int&amp; operator[](const int index) &#123; if (index &lt; 0 || index &gt;= getLength()) throw ArrayException(\"Invalid index\"); return m_data[index]; &#125; &#125;; int main()&#123; IntArray array; try &#123; int value = array[5]; &#125; catch (ArrayException &amp;exception) &#123; std::cerr &lt;&lt; \"An array exception occurred (\" &lt;&lt; exception.getError() &lt;&lt; \")\\n\"; &#125;&#125;ä½¿ç”¨è¿™æ ·çš„ç±»ï¼Œæˆ‘ä»¬å¯ä»¥è®©å¼‚å¸¸ è¿”å›å‘ç”Ÿçš„é—®é¢˜çš„æè¿°ï¼Œå®ƒæä¾›äº†å‡ºé”™çš„ä¸Šä¸‹æ–‡ã€‚ç”±äºArrayExceptionæ˜¯å®ƒè‡ªå·±æƒŸä¸€çš„ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸“é—¨æ•è·æ•°ç»„ç±»æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¹¶æ ¹æ®éœ€è¦å°†å®ƒä»¬ä¸å…¶ä»–å¼‚å¸¸åŒºåˆ«å¯¹å¾…ã€‚æ³¨æ„ï¼Œå¼‚å¸¸å¤„ç†ç¨‹åºåº”è¯¥ é€šè¿‡å¼•ç”¨ è€Œä¸æ˜¯é€šè¿‡å€¼ æ¥æ•è·ç±»å¼‚å¸¸å¯¹è±¡ã€‚è¿™å¯ä»¥é˜²æ­¢ç¼–è¯‘å™¨å¤åˆ¶å¼‚å¸¸ï¼Œå½“å¼‚å¸¸æ˜¯ä¸€ä¸ªç±»å¯¹è±¡æ—¶ï¼Œå¤åˆ¶å¼‚å¸¸çš„ä»£ä»·å¯èƒ½å¾ˆé«˜ï¼›å¹¶ä¸”åœ¨å¤„ç†æ´¾ç”Ÿå¼‚å¸¸ç±»æ—¶é˜²æ­¢å¯¹è±¡åˆ‡ç‰‡(ç¨åæˆ‘ä»¬å°†è®¨è®ºè¿™ä¸ªé—®é¢˜)ã€‚é€šå¸¸åº”è¯¥é¿å…é€šè¿‡æŒ‡é’ˆæ•è·å¼‚å¸¸ï¼Œé™¤éæ‚¨æœ‰ç‰¹å®šçš„ç†ç”±è¿™æ ·åšã€‚å¼‚å¸¸å’Œç»§æ‰¿ç”±äºå¯ä»¥å°†ç±»ä½œä¸ºå¼‚å¸¸æŠ›å‡ºï¼Œå¹¶ä¸”ç±»å¯ä»¥ä»å…¶ä»–ç±»æ´¾ç”Ÿï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è€ƒè™‘å½“ä½¿ç”¨ç»§æ‰¿çš„ç±»ä½œä¸ºå¼‚å¸¸æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ äº‹å®è¯æ˜ï¼Œå¼‚å¸¸å¤„ç†ç¨‹åºä¸ä»…ä¼šåŒ¹é…ç‰¹å®šç±»å‹çš„ç±»ï¼Œè¿˜ä¼šåŒ¹é…ä»è¯¥ç‰¹å®šç±»å‹æ´¾ç”Ÿçš„ç±»!è€ƒè™‘ä¸‹é¢çš„ä¾‹å­:1234567891011121314151617181920212223242526272829303132class Base&#123;public: Base() &#123;&#125;&#125;; class Derived: public Base&#123;public: Derived() &#123;&#125;&#125;; int main()&#123; try &#123; throw Derived(); &#125; catch (Base &amp;base) &#123; cerr &lt;&lt; \"caught Base\"; &#125; catch (Derived &amp;derived) &#123; cerr &lt;&lt; \"caught Derived\"; &#125; return 0;&#125;/*ç»“æœ*/caught Baseå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿé¦–å…ˆï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œæ´¾ç”Ÿç±»å°†ç”±åŸºç±»å‹çš„å¤„ç†ç¨‹åºæ•è·ã€‚å› ä¸ºDerivedæ¥è‡ªäºBaseï¼Œæ‰€ä»¥Derivedæ˜¯ is-a Base(å®ƒä»¬æœ‰ä¸€ä¸ªis-aå…³ç³»)ã€‚å…¶æ¬¡ï¼Œå½“c++è¯•å›¾ä¸ºå¼•å‘çš„å¼‚å¸¸æŸ¥æ‰¾å¤„ç†ç¨‹åºæ—¶ï¼Œå®ƒæŒ‰é¡ºåºæ‰§è¡Œã€‚å› æ­¤ï¼Œc++åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ£€æŸ¥ Baseå¼‚å¸¸å¤„ç†ç¨‹åºæ˜¯å¦ä¸ Derivedå¼‚å¸¸åŒ¹é…ã€‚å› ä¸ºDerived is-a Baseï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯yesï¼Œæ‰€ä»¥å®ƒæ‰§è¡Œ ç±»å‹Base çš„catchå—! åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ´¾ç”Ÿçš„catchå—ç”šè‡³ä»æœªç»è¿‡æµ‹è¯•ã€‚ä¸ºäº†è®©è¿™ä¸ªä¾‹å­åƒé¢„æœŸçš„é‚£æ ·å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦é¢ å€’catchå—çš„é¡ºåº:1234567891011121314151617181920212223242526272829class Base&#123;public: Base() &#123;&#125;&#125;; class Derived: public Base&#123;public: Derived() &#123;&#125;&#125;; int main()&#123; try &#123; throw Derived(); &#125; catch (Derived &amp;derived) //å°†ä¸¤ä¸ªcatchè¯­å¥é¡ºåºè°ƒæ¢ä¸€ä¸‹ &#123; cerr &lt;&lt; \"caught Derived\"; &#125; catch (Base &amp;base) &#123; cerr &lt;&lt; \"caught Base\"; &#125; return 0;&#125;è¿™æ ·ï¼Œ Derivedçš„å¤„ç†ç¨‹åºå°†é¦–å…ˆæ•è·æ´¾ç”Ÿç±»å‹çš„å¯¹è±¡(åœ¨Baseçš„å¤„ç†ç¨‹åºä¹‹å‰)ã€‚Baseç±»å‹çš„å¯¹è±¡å°†ä¸åŒ¹é…æ´¾ç”Ÿçš„å¤„ç†ç¨‹åº(Derived is-a Baseï¼Œä½†åŸºä¸æ˜¯æ´¾ç”Ÿçš„)ï¼Œå› æ­¤å°†åœ¨Baseå¤„ç†ç¨‹åº â€œå¤±è´¥â€ã€‚è§„åˆ™:æ´¾ç”Ÿå¼‚å¸¸ç±»çš„å¤„ç†ç¨‹åºåº”è¯¥åˆ—åœ¨åŸºç±»çš„å¤„ç†ç¨‹åºä¹‹å‰ã€‚std::exceptionæ ‡å‡†åº“ä¸­çš„è®¸å¤šç±»å’Œæ“ä½œç¬¦åœ¨å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸ç±»ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ“ä½œç¬¦newæ— æ³•åˆ†é…è¶³å¤Ÿçš„å†…å­˜ï¼Œåˆ™ä¼šæŠ›å‡ºstd::bad_allocã€‚dynamic_castå¤±è´¥å°†æŠ›å‡ºstd::bad_castã€‚ä»c++ 17å¼€å§‹ï¼Œå¯ä»¥æŠ›å‡º25ä¸ªä¸åŒçš„å¼‚å¸¸ç±»ï¼Œåœ¨æ¯ä¸ªåç»­çš„è¯­è¨€æ ‡å‡†ä¸­è¿˜ä¼šæ·»åŠ æ›´å¤šçš„å¼‚å¸¸ç±»ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œæ‰€æœ‰è¿™äº›å¼‚å¸¸ç±»éƒ½æ´¾ç”Ÿè‡ªä¸€ä¸ªåä¸ºstd::exceptionçš„ç±»ã€‚exceptionæ˜¯ä¸€ä¸ªå¾ˆå°çš„æ¥å£ç±»ï¼Œè®¾è®¡ç”¨æ¥ä½œä¸º c++æ ‡å‡†åº“æŠ›å‡ºçš„ä»»ä½•å¼‚å¸¸çš„åŸºç±»ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“æ ‡å‡†åº“æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒå®ƒæ˜¯ä¸€ä¸ªç³Ÿç³•çš„åˆ†é…ã€ä¸€ä¸ªç³Ÿç³•çš„å¼ºåˆ¶è½¬æ¢è¿˜æ˜¯å…¶ä»–ä»€ä¹ˆã€‚æˆ‘ä»¬åªå…³å¿ƒå‘ç”Ÿäº†ç¾éš¾æ€§çš„é”™è¯¯ï¼Œç°åœ¨æˆ‘ä»¬çš„ç¨‹åºæ­£åœ¨çˆ†ç‚¸ã€‚å¤šäºäº†std::exceptionï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªå¼‚å¸¸å¤„ç†ç¨‹åºæ¥æ•è·std::exceptionç±»å‹çš„å¼‚å¸¸ï¼Œæœ€ç»ˆæˆ‘ä»¬å°†åœ¨ä¸€ä¸ªåœ°æ–¹æ•è·std::exceptionå’Œæ‰€æœ‰(21+)æ´¾ç”Ÿå¼‚å¸¸ã€‚ç®€å•!1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;exception&gt; // for std::exception#include &lt;string&gt; // for this exampleint main()&#123; try &#123; // ä½¿ç”¨æ ‡å‡†åº“çš„ä»£ç åœ¨è¿™é‡Œ // ä¸ºäº†ä¸¾ä¾‹ï¼Œæˆ‘ä»¬å°†æ•…æ„è§¦å‘å…¶ä¸­ä¸€ä¸ªå¼‚å¸¸ std::string s; s.resize(-1); // å°†ä¼šè§¦å‘std::length_error &#125; // è¿™ä¸ªå¤„ç†ç¨‹åºå°†æ•è·std::exception å’Œ æ‰€æœ‰æ´¾ç”Ÿ çš„å¼‚å¸¸ catch (std::exception &amp;exception) &#123; std::cerr &lt;&lt; \"Standard exception: \" &lt;&lt; exception.what() &lt;&lt; '\\n'; &#125; return 0;&#125;/*ç»“æœ*/Standard exception: string too longä¸Šé¢çš„ä¾‹å­åº”è¯¥å¾ˆç®€å•ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œstd::exceptionæœ‰ä¸€ä¸ªåä¸ºwhat()çš„è™šæˆå‘˜å‡½æ•°ï¼Œå®ƒè¿”å›å¼‚å¸¸ çš„cé£æ ¼å­—ç¬¦ä¸²æè¿°ã€‚å¤§å¤šæ•°æ´¾ç”Ÿç±»éƒ½é‡å†™what()å‡½æ•°æ¥æ›´æ”¹æ¶ˆæ¯ã€‚è¯·æ³¨æ„ï¼Œæ­¤å­—ç¬¦ä¸²ä»…ç”¨äºæè¿°æ€§æ–‡æœ¬â€”â€”ä¸è¦å°†å…¶ç”¨äºæ¯”è¾ƒï¼Œå› ä¸ºå®ƒä¸èƒ½ä¿è¯åœ¨ç¼–è¯‘å™¨ä¹‹é—´æ˜¯ç›¸åŒçš„ã€‚æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ä»¥ä¸åŒçš„æ–¹å¼å¤„ç†ç‰¹å®šç±»å‹çš„å¼‚å¸¸ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºè¯¥ç‰¹å®šç±»å‹æ·»åŠ ä¸€ä¸ªå¤„ç†ç¨‹åºï¼Œå¹¶è®©æ‰€æœ‰å…¶ä»–çš„å¤„ç†ç¨‹åºâ€œè½å…¥â€åŸºå¤„ç†ç¨‹åºã€‚è€ƒè™‘:1234567891011121314try&#123; // ä½¿ç”¨æ ‡å‡†åº“çš„ä»£ç åœ¨è¿™é‡Œ&#125; // ï¼šè¿™ä¸ªå¤„ç†ç¨‹åºå°†åœ¨è¿™é‡Œæ•è·std::length_error(ä»¥åŠç”±æ­¤æ´¾ç”Ÿçš„ä»»ä½•å¼‚å¸¸)catch (std::length_error &amp;exception)&#123; std::cerr &lt;&lt; \"You ran out of memory!\" &lt;&lt; '\\n';&#125;// è¿™ä¸ªå¤„ç†ç¨‹åºå°†æ•è· è½å…¥åœ¨è¿™é‡Œçš„ std::exception(ä»¥åŠä»å®ƒæ´¾ç”Ÿçš„ä»»ä½•å¼‚å¸¸)catch (std::exception &amp;exception)&#123; std::cerr &lt;&lt; \"Standard exception: \" &lt;&lt; exception.what() &lt;&lt; '\\n';&#125;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œstd::length_errorç±»å‹çš„å¼‚å¸¸å°†è¢«ç¬¬ä¸€ä¸ªå¤„ç†ç¨‹åºæ•è·å¹¶åœ¨é‚£é‡Œå¤„ç†ã€‚ç±»å‹std::exceptionå’Œæ‰€æœ‰å…¶ä»–æ´¾ç”Ÿç±»çš„å¼‚å¸¸å°†ç”±ç¬¬äºŒä¸ªå¤„ç†ç¨‹åºæ•è·ã€‚è¿™æ ·çš„ç»§æ‰¿å±‚æ¬¡ç»“æ„å…è®¸æˆ‘ä»¬ä½¿ç”¨ç‰¹å®šçš„å¤„ç†ç¨‹åºæ¥é’ˆå¯¹ç‰¹å®šçš„æ´¾ç”Ÿå¼‚å¸¸ç±»ï¼Œæˆ–è€…ä½¿ç”¨åŸºç±»å¤„ç†ç¨‹åºæ¥æ•è·æ•´ä¸ªå¼‚å¸¸å±‚æ¬¡ç»“æ„ã€‚è¿™å…è®¸æˆ‘ä»¬åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ§åˆ¶æˆ‘ä»¬æƒ³è¦å¤„ç†çš„å¼‚å¸¸ç±»å‹ï¼ŒåŒæ—¶ç¡®ä¿æˆ‘ä»¬ä¸éœ€è¦åšå¤ªå¤šçš„å·¥ä½œæ¥æ•è·å±‚æ¬¡ç»“æ„ä¸­çš„â€œå…¶ä»–æ‰€æœ‰å†…å®¹â€ç›´æ¥ä½¿ç”¨æ ‡å‡†å¼‚å¸¸æ²¡æœ‰ä»»ä½•ä¸œè¥¿ä¼šç›´æ¥æŠ›å‡ºstd::exceptionï¼Œæ‚¨ä¹Ÿä¸åº”è¯¥è¿™æ ·åšã€‚ä½†æ˜¯ï¼Œå¦‚æœæ ‡å‡†åº“ä¸­çš„å…¶ä»–æ ‡å‡†å¼‚å¸¸ç±»èƒ½å¤Ÿå……åˆ†ä»£è¡¨æ‚¨çš„éœ€æ±‚ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥éšæ„æŠ›å‡ºå®ƒä»¬ã€‚æ‚¨å¯ä»¥åœ¨ cppreferenceä¸Šæ‰¾åˆ°æ‰€æœ‰æ ‡å‡†å¼‚å¸¸çš„åˆ—è¡¨ã€‚std::runtime_error(åœ¨å¤´æ–‡ä»¶ï¼šstdexceptä¸­) æ˜¯ä¸€ä¸ªæµè¡Œçš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒæœ‰ä¸€ä¸ªé€šç”¨çš„åç§°ï¼Œå®ƒçš„æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå¯å®šåˆ¶çš„æ¶ˆæ¯:1234567891011121314151617181920#include &lt;iostream&gt;#include &lt;stdexcept&gt; int main()&#123; try &#123; throw std::runtime_error(\"Bad things happened\"); &#125; // This handler will catch std::exception and all the derived exceptions too catch (std::exception &amp;exception) &#123; std::cerr &lt;&lt; \"Standard exception: \" &lt;&lt; exception.what() &lt;&lt; '\\n'; &#125; return 0;&#125;/*ç»“æœ*/Standard exception: Bad things happenedä»std::exceptionæ´¾ç”Ÿæ‚¨è‡ªå·±çš„ç±»å½“ç„¶ï¼Œæ‚¨å¯ä»¥ä»std::exceptionæ´¾ç”Ÿè‡ªå·±çš„ç±»ï¼Œå¹¶è¦†ç›–è™šwhat() constæˆå‘˜å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸ä¸Šé¢ç›¸åŒçš„ç¨‹åºï¼ŒArrayExceptionæ´¾ç”Ÿè‡ªstd::exception:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;exception&gt; // for std::exception class ArrayException: public std::exception&#123;private: std::string m_error; public: ArrayException(std::string error) : m_error(error) &#123; &#125; // return the std::string as a const C-style string// const char* what() const &#123; return m_error.c_str(); &#125; // pre-C++11 version const char* what() const noexcept &#123; return m_error.c_str(); &#125; // C++11 version&#125;; class IntArray&#123;private: int m_data[3]; // assume array is length 3 for simplicitypublic: IntArray() &#123;&#125; int getLength() &#123; return 3; &#125; int&amp; operator[](const int index) &#123; if (index &lt; 0 || index &gt;= getLength()) throw ArrayException(\"Invalid index\"); return m_data[index]; &#125; &#125;; int main()&#123; IntArray array; try &#123; int value = array[5]; &#125; catch (ArrayException &amp;exception) // derived catch blocks go first &#123; std::cerr &lt;&lt; \"An array exception occurred (\" &lt;&lt; exception.what() &lt;&lt; \")\\n\"; &#125; catch (std::exception &amp;exception) &#123; std::cerr &lt;&lt; \"Some other std::exception occurred (\" &lt;&lt; exception.what() &lt;&lt; \")\\n\"; &#125; return 0;&#125;/*ç»“æœ*/An array exception occurred (Invalid index)åœ¨c++ 11ä¸­ï¼Œè™šå‡½æ•°what()è¢«æ›´æ–°ä¸ºå¸¦æœ‰è¯´æ˜ç¬¦noexcept (è¿™æ„å‘³ç€å‡½æ•°æœ¬èº«æ‰¿è¯ºä¸æŠ›å‡ºå¼‚å¸¸)ã€‚å› æ­¤ï¼Œåœ¨c++ 11å’Œæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬çš„é‡è½½åº”è¯¥ä¹Ÿå¸¦æœ‰è¯´æ˜ç¬¦noexceptã€‚ç”±æ‚¨å†³å®šæ˜¯åˆ›å»ºè‡ªå·±çš„ç‹¬ç«‹å¼‚å¸¸ç±»ã€ä½¿ç”¨æ ‡å‡†å¼‚å¸¸ç±»ï¼Œè¿˜æ˜¯ä»std::exceptionæ´¾ç”Ÿè‡ªå·±çš„å¼‚å¸¸ç±»ã€‚æ ¹æ®ä½ çš„ç›®æ ‡ï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚","categories":[],"tags":[]},{"title":"C&C++/æœªæ•è·å¼‚å¸¸ã€å¤„ç†æ‰€æœ‰å¼‚å¸¸ã€å¼‚å¸¸è¯´æ˜ç¬¦(noexcept)","slug":"C&C++/æœªæ•è·å¼‚å¸¸ã€å¤„ç†æ‰€æœ‰å¼‚å¸¸ã€å¼‚å¸¸è¯´æ˜ç¬¦(noexcept)","date":"2020-05-20T07:37:21.798Z","updated":"2020-05-20T08:11:21.991Z","comments":true,"path":"archives/f016036.html","link":"","permalink":"https://longlongqin.github.io/archives/f016036.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/144-uncaught-exceptions-catch-all-handlers-and-exception-specifiers/ç°åœ¨ï¼Œæ‚¨åº”è¯¥å¯¹å¼‚å¸¸å¦‚ä½•å·¥ä½œæœ‰äº†ä¸€ä¸ªåˆç†çš„æ¦‚å¿µã€‚åœ¨æœ¬è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€äº›æ›´æœ‰è¶£çš„å¼‚å¸¸æƒ…å†µã€‚æœªæ•è·å¼‚å¸¸åœ¨è¿‡å»çš„å‡ ä¸ªä¾‹å­ä¸­ï¼Œæœ‰ç›¸å½“å¤šçš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå‡½æ•°å‡è®¾å®ƒçš„è°ƒç”¨è€… (æˆ–è€…è°ƒç”¨æ ˆä¸Šçš„å¦ä¸€ä¸ªå‡½æ•°)å°†å¤„ç†å¼‚å¸¸ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒmySqrt()å‡è®¾æœ‰äººä¼šå¤„ç†å®ƒæŠ›å‡ºçš„å¼‚å¸¸â€”â€”ä½†æ˜¯å®é™…ä¸Šå¦‚æœæ²¡æœ‰äººå¤„ç†ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢?è¿™æ˜¯æˆ‘ä»¬çš„å¹³æ–¹æ ¹ç¨‹åºå†æ¬¡ï¼Œå‡å»åœ¨main()ä¸­çš„tryå—:123456789101112131415161718192021222324#include &lt;iostream&gt;#include &lt;cmath&gt; // for sqrt() function // A modular square root functiondouble mySqrt(double x)&#123; // If the user entered a negative number, this is an error condition if (x &lt; 0.0) throw \"Can not take sqrt of negative number\"; // throw exception of type const char* return sqrt(x);&#125; int main()&#123; std::cout &lt;&lt; \"Enter a number: \"; double x; std::cin &gt;&gt; x; // Look ma, no exception handler! std::cout &lt;&lt; \"The sqrt of \" &lt;&lt; x &lt;&lt; \" is \" &lt;&lt; mySqrt(x) &lt;&lt; '\\n'; return 0;&#125;ç°åœ¨ï¼Œå‡è®¾ç”¨æˆ·è¾“å…¥-4, mySqrt(-4)å¼•å‘ä¸€ä¸ªå¼‚å¸¸ã€‚å‡½æ•°mySqrt()ä¸å¤„ç†å¼‚å¸¸ï¼Œå› æ­¤ç¨‹åº æ ˆå±•å¼€ å¹¶å°†æ§åˆ¶è¿”å›åˆ°main()ã€‚ä½†æ˜¯è¿™é‡Œä¹Ÿæ²¡æœ‰å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œæ‰€ä»¥main()ç»ˆæ­¢ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬åˆšåˆšç»ˆæ­¢äº†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åº!å½“main()å› æœªå¤„ç†çš„å¼‚å¸¸è€Œç»ˆæ­¢æ—¶ï¼Œæ“ä½œç³»ç»Ÿé€šå¸¸ä¼šé€šçŸ¥æ‚¨å‘ç”Ÿäº†æœªå¤„ç†çš„å¼‚å¸¸é”™è¯¯ã€‚å®ƒå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å–å†³äºæ“ä½œç³»ç»Ÿï¼Œä½†å¯èƒ½æ€§åŒ…æ‹¬æ‰“å°é”™è¯¯æ¶ˆæ¯ã€å¼¹å‡ºé”™è¯¯å¯¹è¯æ¡†æˆ–ç®€å•åœ°å´©æºƒã€‚å¤„ç†æ‰€æœ‰å¼‚å¸¸(Catch-all handlers)ç°åœ¨æˆ‘ä»¬å‘ç°è‡ªå·±é™·å…¥äº†ä¸€ä¸ªéš¾é¢˜: å‡½æ•°å¯èƒ½æŠ›å‡ºä»»ä½•æ•°æ®ç±»å‹çš„å¼‚å¸¸ï¼Œå¦‚æœæ²¡æœ‰æ•è·åˆ°å¼‚å¸¸ï¼Œå®ƒå°†ä¼ æ’­åˆ°ç¨‹åºçš„é¡¶éƒ¨å¹¶å¯¼è‡´ç»ˆæ­¢ã€‚æ—¢ç„¶æœ‰å¯èƒ½åœ¨ä¸çŸ¥é“å‡½æ•°æ˜¯å¦‚ä½•å®ç°çš„æƒ…å†µä¸‹è°ƒç”¨å‡½æ•°(å› æ­¤ä¹Ÿä¸çŸ¥é“å®ƒä»¬å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹)ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ‰èƒ½é˜²æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿå‘¢?å¹¸è¿çš„æ˜¯ï¼Œc++ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æœºåˆ¶æ¥æ•è·æ‰€æœ‰ç±»å‹çš„å¼‚å¸¸ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œå…¨éƒ¨æ•è·ï¼ˆcatch-all handlerï¼‰â€å¤„ç†ç¨‹åºã€‚catch-all handler ç¨‹åºçš„å·¥ä½œåŸç†ä¸æ™®é€šçš„catchå—ä¸€æ ·ï¼Œåªæ˜¯å®ƒæ²¡æœ‰ä½¿ç”¨ç‰¹å®šçš„ç±»å‹æ¥è¿›è¡Œcatchï¼Œè€Œæ˜¯ä½¿ç”¨çœç•¥å·æ“ä½œç¬¦(â€¦) ä½œä¸ºè¦è¿›è¡Œcatchçš„ç±»å‹ã€‚å¦‚æœæ‚¨å›æƒ³ä¸€ä¸‹ç¬¬7.14è¯¾ ellipses and why to avoid them ã€‚åœ¨ä»¥å‰ï¼Œçœç•¥å·ç”¨äºå‘å‡½æ•°ä¼ é€’ä»»ä½•ç±»å‹çš„å‚æ•°ã€‚åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­ï¼Œå®ƒä»¬è¡¨ç¤ºä»»ä½•æ•°æ®ç±»å‹çš„å¼‚å¸¸ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­:1234567891011121314151617#include &lt;iostream&gt;int main()&#123; try &#123; throw 5; // throw an int exception &#125; catch (double x) &#123; std::cout &lt;&lt; \"We caught an exception of type double: \" &lt;&lt; x &lt;&lt; '\\n'; &#125; catch (...) // catch-all handler &#123; std::cout &lt;&lt; \"We caught an exception of an undetermined type\\n\"; &#125;&#125;å› ä¸ºå¯¹äºintç±»å‹æ²¡æœ‰ç‰¹å®šçš„å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œæ‰€ä»¥catch-all handlerä¼šæ•è·è¿™ä¸ªå¼‚å¸¸ã€‚è¿™ä¸ªä¾‹å­äº§ç”Ÿäº†ä»¥ä¸‹ç»“æœ:1We caught an exception of an undetermined typecatch-all handler åº”è¯¥æ”¾åœ¨catchå—é“¾çš„æœ€åã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿åœ¨å¼‚å¸¸å¤„ç†ç¨‹åºå­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå¼‚å¸¸å¤„ç†ç¨‹åºå¯ä»¥æ ¹æ®ç‰¹å®šçš„æ•°æ®ç±»å‹æ•è·å¼‚å¸¸ã€‚Visual Studioå¼ºåˆ¶æ‰§è¡Œè¿™ä¸ªçº¦æŸâ€”â€”æˆ‘ä¸ç¡®å®šæ˜¯å¦å…¶ä»–ç¼–è¯‘å™¨ä¹Ÿè¿™æ ·åšã€‚(æ ¹æ®ä¸‹é¢è¯„è®ºä¸­çš„è¯»è€…Lonamiçš„è§‚ç‚¹ï¼ŒGCCä¹Ÿæ˜¯å¦‚æ­¤)ã€‚å¼‚å¸¸è¯´æ˜ç¬¦ï¼šnoexceptc++ 11å¢åŠ äº†ç¬¬å››ä¸ªå¼‚å¸¸è¯´æ˜ç¬¦:noexceptã€‚Noexceptæ˜¯ä¸€ä¸ªå¼‚å¸¸è¯´æ˜ç¬¦ï¼Œç”¨äºæŒ‡ç¤ºå‡½æ•°ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ã€‚ä»è¯­ä¹‰ä¸Šè®²ï¼Œå®ƒå…è®¸æ‚¨ä¸€çœ¼å°±çœ‹å‡ºä¸€ä¸ªå‡½æ•°ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚å®ƒè¿˜å¯èƒ½å¯ç”¨ä¸€äº›ç¼–è¯‘å™¨ä¼˜åŒ–ã€‚ææ„å‡½æ•°é€šå¸¸æ˜¯éšå¼noexceptï¼ˆå› ä¸ºå®ƒä»¬ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ï¼‰å¦‚æœnoexceptå‡½æ•°ç¡®å®è¯•å›¾æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆå°†è°ƒç”¨std::terminateå‡½æ•°æ¥ç»ˆæ­¢åº”ç”¨ç¨‹åºã€‚","categories":[],"tags":[]},{"title":"C&C++/å¼‚å¸¸ã€å‡½æ•°ã€æ ˆå±•å¼€","slug":"C&C++/å¼‚å¸¸ã€å‡½æ•°ã€æ ˆå±•å¼€","date":"2020-05-19T13:14:49.299Z","updated":"2020-05-19T15:07:28.729Z","comments":true,"path":"archives/7d1f8966.html","link":"","permalink":"https://longlongqin.github.io/archives/7d1f8966.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/143-exceptions-functions-and-stack-unwinding/åœ¨tryå—ä¹‹å¤–æŠ›å‡º(throw)å¼‚å¸¸åœ¨ä¸Šä¸€è¯¾çš„ç¤ºä¾‹ä¸­ï¼Œthrowè¯­å¥ç›´æ¥æ”¾åœ¨tryå—ä¸­ã€‚å¦‚æœè¿™æ˜¯å¿…è¦çš„ï¼Œé‚£ä¹ˆå¼‚å¸¸å¤„ç†çš„ä½œç”¨å°†æ˜¯æœ‰é™çš„ã€‚å¼‚å¸¸å¤„ç†æœ€æœ‰ç”¨çš„å±æ€§ä¹‹ä¸€æ˜¯ï¼Œç”±äºå¼‚å¸¸åœ¨æŠ›å‡ºæ—¶å‘ä¸Šä¼ æ’­æ ˆçš„æ–¹å¼ï¼ŒæŠ›å‡ºè¯­å¥ä¸å¿…ç›´æ¥æ”¾åœ¨tryå—ä¸­ã€‚è¿™å…è®¸æˆ‘ä»¬ä»¥æ›´åŠ æ¨¡å—åŒ–çš„æ–¹å¼ä½¿ç”¨å¼‚å¸¸å¤„ç†ã€‚æˆ‘ä»¬å°†é€šè¿‡é‡å†™å‰ä¸€è¯¾çš„å¹³æ–¹æ ¹ç¨‹åºæ¥æ¼”ç¤ºè¿™ä¸€ç‚¹ï¼Œä»¥ä½¿ç”¨æ¨¡å—å‡½æ•°ã€‚12345678910111213141516171819202122232425262728293031#include &lt;cmath&gt; // for sqrt() function#include &lt;iostream&gt; // A modular square root functiondouble mySqrt(double x)&#123; // If the user entered a negative number, this is an error condition if (x &lt; 0.0) throw \"Can not take sqrt of negative number\"; // throw exception of type const char* return sqrt(x);&#125; int main()&#123; std::cout &lt;&lt; \"Enter a number: \"; double x; std::cin &gt;&gt; x; try // Look for exceptions that occur within try block and route to attached catch block(s) &#123; double d = mySqrt(x); std::cout &lt;&lt; \"The sqrt of \" &lt;&lt; x &lt;&lt; \" is \" &lt;&lt; d &lt;&lt; '\\n'; &#125; catch (const char* exception) // catch exceptions of type const char* &#123; std::cerr &lt;&lt; \"Error: \" &lt;&lt; exception &lt;&lt; std::endl; &#125; return 0;&#125;åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œæˆ‘ä»¬å°†æ£€æŸ¥å¼‚å¸¸å¹¶è®¡ç®—å¹³æ–¹æ ¹çš„ä»£ç æ”¾å…¥åä¸ºmySqrt()çš„æ¨¡å—å‡½æ•°ä¸­ã€‚ç„¶åæˆ‘ä»¬åœ¨tryå—ä¸­è°ƒç”¨è¿™ä¸ªmySqrt()å‡½æ•°ã€‚è®©æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹å®ƒæ˜¯å¦ä»ç„¶åƒé¢„æœŸçš„é‚£æ ·å·¥ä½œ:12Enter a number: -4Error: Can not take sqrt of negative numberæ ˆçš„å±•å¼€è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹å¼‚å¸¸å¼•å‘æ—¶çš„æƒ…å†µã€‚é¦–å…ˆï¼Œç¨‹åºæ£€æŸ¥å¼‚å¸¸æ˜¯å¦å¯ä»¥ç«‹å³å¤„ç†(è¿™æ„å‘³ç€å®ƒæ˜¯åœ¨tryå—ä¸­æŠ›å‡ºçš„)ã€‚å¦‚æœæ²¡æœ‰ï¼Œå½“å‰å‡½æ•°å°†è¢«ç»ˆæ­¢ï¼Œç¨‹åºå°†æ£€æŸ¥å‡½æ•°çš„è°ƒç”¨è€…æ˜¯å¦ä¼šå¤„ç†å¼‚å¸¸ã€‚å¦‚æœä¸èƒ½ï¼Œå®ƒå°†ç»ˆæ­¢è°ƒç”¨è€…å¹¶æ£€æŸ¥è°ƒç”¨è€…çš„è°ƒç”¨è€…ã€‚ï¼ˆä¸€å±‚ä¸€å±‚çš„å¯»æ‰¾å¤„ç†å¼‚å¸¸çš„ä»£ç ï¼‰æ¯ä¸ªå‡½æ•°æŒ‰é¡ºåºç»ˆæ­¢ï¼Œç›´åˆ°æ‰¾åˆ°å¼‚å¸¸çš„å¤„ç†ç¨‹åºï¼›æˆ–è€…ç›´åˆ°main()åœ¨ä¸å¤„ç†å¼‚å¸¸çš„æƒ…å†µä¸‹ç»ˆæ­¢ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºæ ˆçš„å±•å¼€ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬è¯¦ç»†äº†è§£ä¸€ä¸‹ï¼Œå½“ä»mySqrt()ä¸­å¼•å‘å¼‚å¸¸æ—¶ï¼Œå®ƒæ˜¯å¦‚ä½•åº”ç”¨äºè¿™ä¸ªç¨‹åºçš„ã€‚é¦–å…ˆï¼Œç¨‹åºæ£€æŸ¥å¼‚å¸¸æ˜¯å¦ä»å‡½æ•°ä¸­çš„tryå—ä¸­æŠ›å‡ºã€‚(åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒä¸æ˜¯ã€‚)ç„¶åï¼Œæ ˆå¼€å§‹å±•å¼€ã€‚é¦–å…ˆ,mySqrt()ç»ˆæ­¢ï¼Œæ§ä»¶è¿”å›åˆ°main()ã€‚ç¨‹åºç°åœ¨æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦åœ¨ä¸€ä¸ªtryå—ä¸­ã€‚æˆ‘ä»¬æ˜¯ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªconst char*å¤„ç†ç¨‹åºï¼Œæ‰€ä»¥å¼‚å¸¸ç”±main()ä¸­çš„tryå—å¤„ç†ã€‚å°ç»“è¿™ä¸ªä¾‹å­mySqrt()å¼•å‘å¼‚å¸¸ï¼Œä½†æ˜¯main()ä¸­çš„try/catchå—æ•è·å¹¶å¤„ç†å¼‚å¸¸ã€‚æˆ–è€…ï¼Œæ¢å¥è¯è¯´ï¼Œtryå—ä¸ä»…ä»tryå—ä¸­çš„è¯­å¥æ•æ‰å¼‚å¸¸ï¼Œè€Œä¸”è¿˜ä»tryå—ä¸­è°ƒç”¨çš„å‡½æ•°æ•æ‰å¼‚å¸¸ã€‚ä¸Šé¢ç¨‹åºä¸­æœ€æœ‰è¶£çš„éƒ¨åˆ†æ˜¯mySqrt()å‡½æ•°å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ˜¯è¿™ä¸ªå¼‚å¸¸ä¸æ˜¯ç«‹å³å‡ºç°åœ¨tryå—ä¸­! è¿™æœ¬è´¨ä¸Šæ„å‘³ç€ï¼šmySqrtæ„¿æ„è¯´:â€œå˜¿ï¼Œæœ‰ä¸ªé—®é¢˜!ï¼Œä½†ä¸æ„¿è‡ªå·±å¤„ç†é—®é¢˜ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒæ˜¯å°†å¤„ç†å¼‚å¸¸çš„è´£ä»»å§”æ‰˜ç»™å®ƒçš„è°ƒç”¨è€… (ç›¸å½“äºä½¿ç”¨è¿”å›ä»£ç å°†å¤„ç†é”™è¯¯çš„è´£ä»»ä¼ é€’å›å‡½æ•°çš„è°ƒç”¨è€…)ã€‚æ­¤æ—¶ï¼Œæœ‰äº›äººå¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆå°†é”™è¯¯ä¼ é€’å›è°ƒç”¨è€…æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚ä¸ºä»€ä¹ˆä¸ç›´æ¥è®©MySqrt()å¤„ç†å®ƒè‡ªå·±çš„é”™è¯¯å‘¢?ç­”ï¼šé—®é¢˜æ˜¯ï¼Œä¸åŒçš„åº”ç”¨ç¨‹åºå¯èƒ½å¸Œæœ›ä»¥ä¸åŒçš„æ–¹å¼å¤„ç†é”™è¯¯ã€‚æ§åˆ¶å°åº”ç”¨ç¨‹åºå¯èƒ½éœ€è¦æ‰“å°æ–‡æœ¬æ¶ˆæ¯ï¼›windowsåº”ç”¨ç¨‹åºå¯èƒ½å¸Œæœ›å¼¹å‡ºä¸€ä¸ªé”™è¯¯å¯¹è¯æ¡†ã€‚åœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªè‡´å‘½é”™è¯¯ï¼Œè€Œåœ¨å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­å¯èƒ½ä¸æ˜¯ã€‚é€šè¿‡å°†é”™è¯¯ä¼ é€’å›æ ˆï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½å¯ä»¥ä»¥æœ€é€‚åˆå®ƒçš„ä¸Šä¸‹æ–‡æ–¹å¼å¤„ç†æ¥è‡ªmySqrt()çš„é”™è¯¯!æœ€ç»ˆï¼Œè¿™å°†ä½¿mySqrt()å°½å¯èƒ½æ¨¡å—åŒ–ï¼Œå¹¶ä¸”é”™è¯¯å¤„ç†å¯ä»¥æ”¾åœ¨ä»£ç ä¸­æ¨¡å—åŒ–ç¨‹åº¦è¾ƒä½çš„éƒ¨åˆ†ã€‚å¦ä¸€ä¸ªæ ˆå±•å¼€çš„ä¾‹å­â­ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä½¿ç”¨æ›´å¤§å †æ ˆè¿›è¡Œå®é™…å †æ ˆå±•å¼€çš„ç¤ºä¾‹ã€‚è™½ç„¶è¿™ä¸ªç¨‹åºå¾ˆé•¿ï¼Œä½†å®ƒéå¸¸ç®€å•:main()è°ƒç”¨first()ã€first()è°ƒç”¨second()ã€second()ã€second()è°ƒç”¨third()ã€third()è°ƒç”¨last()å’Œlast()æŠ›å‡ºå¼‚å¸¸ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465#include &lt;iostream&gt; void last() // called by third()&#123; std::cout &lt;&lt; \"Start last\\n\"; std::cout &lt;&lt; \"last throwing int exception\\n\"; throw -1; std::cout &lt;&lt; \"End last\\n\"; &#125; void third() // called by second()&#123; std::cout &lt;&lt; \"Start third\\n\"; last(); std::cout &lt;&lt; \"End third\\n\";&#125; void second() // called by first()&#123; std::cout &lt;&lt; \"Start second\\n\"; try &#123; third(); &#125; catch(double) &#123; std::cerr &lt;&lt; \"second caught double exception\\n\"; &#125; std::cout &lt;&lt; \"End second\\n\";&#125; void first() // called by main()&#123; std::cout &lt;&lt; \"Start first\\n\"; try &#123; second(); &#125; catch (int) &#123; std::cerr &lt;&lt; \"first caught int exception\\n\"; &#125; catch (double) &#123; std::cerr &lt;&lt; \"first caught double exception\\n\"; &#125; std::cout &lt;&lt; \"End first\\n\";&#125; int main()&#123; std::cout &lt;&lt; \"Start main\\n\"; try &#123; first(); &#125; catch (int) &#123; std::cerr &lt;&lt; \"main caught int exception\\n\"; &#125; std::cout &lt;&lt; \"End main\\n\"; return 0;&#125;æ›´è¯¦ç»†åœ°çœ‹ä¸€ä¸‹è¿™ä¸ªç¨‹åºï¼Œçœ‹çœ‹æ‚¨æ˜¯å¦å¯ä»¥æ‰¾å‡ºåœ¨è¿è¡Œæ—¶æ‰“å°çš„å†…å®¹å’Œä¸æ‰“å°çš„å†…å®¹ã€‚ç­”æ¡ˆ:123456789Start mainStart firstStart secondStart thirdStart lastlast throwing int exceptionfirst caught int exceptionEnd firstEnd mainè®©æˆ‘ä»¬çœ‹çœ‹åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚æ‰€æœ‰â€œStartâ€è¯­å¥çš„æ‰“å°éå¸¸ç®€å•ï¼Œä¸éœ€è¦è¿›ä¸€æ­¥è§£é‡Šã€‚å‡½æ•°last()æ‰“å°â€œæœ€åä¸€æ¬¡æŠ›å‡ºintå¼‚å¸¸â€ï¼Œç„¶åæŠ›å‡ºä¸€ä¸ªintå¼‚å¸¸ã€‚è¿™å°±æ˜¯äº‹æƒ…å¼€å§‹å˜å¾—æœ‰è¶£çš„åœ°æ–¹ã€‚å› ä¸ºlast()æœ¬èº«ä¸å¤„ç†å¼‚å¸¸ï¼Œæ ˆå¼€å§‹å±•å¼€ã€‚å‡½æ•°last()ç«‹å³ç»ˆæ­¢ï¼Œæ§åˆ¶æƒè¿”å›ç»™è°ƒç”¨æ–¹ï¼Œå³third()ã€‚å‡½æ•°third()ä¸å¤„ç†ä»»ä½•å¼‚å¸¸ï¼Œå› æ­¤å®ƒç«‹å³ç»ˆæ­¢ï¼Œæ§åˆ¶æƒè¿”å›åˆ°second()ã€‚å‡½æ•°second()æœ‰ä¸€ä¸ªtryå—ï¼Œè€Œå¯¹third()çš„è°ƒç”¨åœ¨å…¶ä¸­ï¼Œå› æ­¤ç¨‹åºå°è¯•ç”¨ä¸€ä¸ªé€‚å½“çš„catchå—æ¥åŒ¹é…å¼‚å¸¸ã€‚ä½†æ˜¯ï¼Œè¿™é‡Œæ²¡æœ‰intç±»å‹çš„å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œæ‰€ä»¥second()ç«‹å³ç»ˆæ­¢ï¼Œæ§åˆ¶æƒè¿”å›first()ã€‚æ³¨æ„ï¼Œæ•´æ•°å¼‚å¸¸æ²¡æœ‰éšå¼è½¬æ¢ä¸ºåŒ¹é…å¤„ç†doubleçš„catchå—ã€‚å‡½æ•°first()ä¹Ÿæœ‰ä¸€ä¸ªtryå—ï¼Œå¯¹second()çš„è°ƒç”¨ä¹Ÿåœ¨å…¶ä¸­ï¼Œå› æ­¤ç¨‹åºä¼šæŸ¥çœ‹æ˜¯å¦æœ‰ä¸€ä¸ªç”¨äºintå¼‚å¸¸çš„catchå¤„ç†ç¨‹åºã€‚æœ‰!å› æ­¤ï¼Œfirst()å¤„ç†å¼‚å¸¸ï¼Œå¹¶æ‰“å°â€œfirst caught int exceptionâ€ã€‚å› ä¸ºç°åœ¨å·²ç»å¤„ç†äº†å¼‚å¸¸ï¼Œæ‰€ä»¥æ§åˆ¶é€šå¸¸åœ¨first()ä¸­çš„catchå—çš„æœ«å°¾ç»§ç»­ã€‚è¿™æ„å‘³ç€first()æ‰“å°â€œEnd firstâ€ï¼Œç„¶åæ­£å¸¸ç»ˆæ­¢ã€‚æ§åˆ¶æƒè¿”å›åˆ°main()ã€‚è™½ç„¶main()æœ‰ä¸€ä¸ªintçš„å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œä½†æ˜¯æˆ‘ä»¬çš„å¼‚å¸¸å·²ç»è¢«first()å¤„ç†äº†ï¼Œæ‰€ä»¥main()ä¸­çš„catchå—ä¸ä¼šè¢«æ‰§è¡Œã€‚main()ç®€å•åœ°æ‰“å°â€œEnd mainâ€ï¼Œç„¶åæ­£å¸¸ç»ˆæ­¢ã€‚è¿™ä¸ªä¾‹å­ä¸­æœ‰å¾ˆå¤šæœ‰è¶£çš„åŸåˆ™:é¦–å…ˆï¼Œå‡½æ•°çš„ç›´æ¥è°ƒç”¨è€…æŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœä¸å¸Œæœ›å¤„ç†å¼‚å¸¸ åˆ™ä¸å¿…å¤„ç†å¼‚å¸¸ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œthird()æ²¡æœ‰å¤„ç†last()æŠ›å‡ºçš„å¼‚å¸¸ã€‚å®ƒå°†è¯¥èŒè´£å§”æ‰˜ç»™æ ˆä¸Šçš„ä¸€ä¸ªè°ƒç”¨è€…ã€‚å…¶æ¬¡ï¼Œå¦‚æœtryå—æ²¡æœ‰é’ˆå¯¹æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹çš„catchå¤„ç†ç¨‹åºï¼Œé‚£ä¹ˆå°±ä¼šå‘ç”Ÿæ ˆè§£é™¤ï¼Œå°±å¥½åƒæ ¹æœ¬æ²¡æœ‰tryå—ä¸€æ ·ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œsecond()ä¹Ÿæ²¡æœ‰å¤„ç†å¼‚å¸¸ï¼Œå› ä¸ºå®ƒæ²¡æœ‰æ­£ç¡®çš„catchå—ç±»å‹ã€‚ç¬¬ä¸‰ï¼Œä¸€æ—¦å¼‚å¸¸å¾—åˆ°å¤„ç†ï¼Œæ§åˆ¶æµå°±ä¼šåƒæ­£å¸¸æƒ…å†µä¸€æ ·ä»catchå—çš„æœ«å°¾å¼€å§‹ã€‚æœ¬ä¾‹å­ä¸­ï¼Œè¿™æ˜¯é€šè¿‡first()å¤„ç†é”™è¯¯ï¼Œç„¶åæ­£å¸¸ç»ˆæ­¢æ¥æ¼”ç¤ºçš„ã€‚å½“ç¨‹åºè¿”å›main()æ—¶ï¼Œå¼‚å¸¸å·²ç»è¢«æŠ›å‡ºå¹¶å¤„ç†äº†â€”â€”main()ç”šè‡³å®Œå…¨ä¸çŸ¥é“å­˜åœ¨å¼‚å¸¸!æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œå †æ ˆå±•å¼€ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€äº›éå¸¸æœ‰ç”¨çš„è¡Œä¸ºâ€”â€”å¦‚æœä¸€ä¸ªå‡½æ•°ä¸æƒ³å¤„ç†å¼‚å¸¸ï¼Œå®ƒå°±ä¸éœ€è¦å¤„ç†å¼‚å¸¸ã€‚ å¼‚å¸¸å°†å‘ä¸Šä¼ æ’­æ ˆï¼Œç›´åˆ°æ‰¾åˆ°æ„¿æ„è¿™æ ·åšçš„äºº!","categories":[],"tags":[]},{"title":"C&C++/åŸºæœ¬çš„å¼‚å¸¸å¤„ç†","slug":"C&C++/åŸºæœ¬çš„å¼‚å¸¸å¤„ç†","date":"2020-05-19T08:57:53.663Z","updated":"2020-05-19T10:05:52.524Z","comments":true,"path":"archives/b215c449.html","link":"","permalink":"https://longlongqin.github.io/archives/b215c449.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/142-basic-exception-handling/åœ¨the need for exceptionsä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•ä½¿ç”¨è¿”å›ä»£ç ä½¿æ§åˆ¶æµå’Œé”™è¯¯æµæ··åˆåœ¨ä¸€èµ·ï¼Œä»è€Œå¯¹ä¸¤è€…è¿›è¡Œçº¦æŸã€‚**C++ä¸­çš„å¼‚å¸¸æ˜¯ä½¿ç”¨ä¸‰ä¸ªç›¸äº’å…³è”çš„å…³é”®å­—å®ç°çš„ï¼šthrowtrycatchæŠ›å‡º(throw)å¼‚å¸¸æˆ‘ä»¬åœ¨ç°å®ç”Ÿæ´»ä¸­ä¸€ç›´ä½¿ç”¨ä¿¡å·æ¥è®°å½•ç‰¹å®šäº‹ä»¶çš„å‘ç”Ÿã€‚ä¾‹å¦‚ï¼Œåœ¨ç¾å¼æ©„æ¦„çƒæ¯”èµ›ä¸­ï¼Œå¦‚æœä¸€ä¸ªçƒå‘˜çŠ¯è§„äº†ï¼Œè£åˆ¤å°±ä¼šæŠŠä¸€é¢æ——å­æ‰”åˆ°åœ°ä¸Šï¼Œç„¶åç”¨å“¨å­å®£å¸ƒæ¯”èµ›ç»“æŸã€‚ç„¶åè¯„ä¼°å¹¶æ‰§è¡Œæƒ©ç½šã€‚ä¸€æ—¦å¤„ç½šè¢«å¤„ç†å¥½ï¼Œæ¯”èµ›é€šå¸¸ä¼šæ¢å¤æ­£å¸¸ã€‚åœ¨c++ä¸­ï¼Œthrowè¯­å¥ ç”¨äºæŒ‡ç¤ºå‘ç”Ÿäº†å¼‚å¸¸æˆ–é”™è¯¯æƒ…å†µ(è€ƒè™‘æŠ›å‡ºæƒ©ç½šæ ‡å¿—)ã€‚å‘å‡º å¼‚å¸¸å·²ç»å‘ç”Ÿçš„ ä¿¡å· é€šå¸¸ä¹Ÿç§°ä¸ºå¼•å‘ï¼ˆraisingï¼‰å¼‚å¸¸ã€‚è¦ä½¿ç”¨throwè¯­å¥ï¼Œåªéœ€ä½¿ç”¨throwå…³é”®å­—ï¼Œåé¢è·Ÿä¸€ä¸ªä»»æ„æ•°æ®ç±»å‹çš„å€¼ï¼Œç”¨æ¥è¡¨ç¤ºå‘ç”Ÿäº†é”™è¯¯ã€‚é€šå¸¸ï¼Œè¯¥å€¼æ˜¯ä¸€ä¸ªé”™è¯¯ä»£ç ã€é—®é¢˜æè¿°æˆ–è‡ªå®šä¹‰å¼‚å¸¸ç±»ã€‚12345throw -1; // æŠ›å‡ºä¸€ä¸ªæ–‡æœ¬æ•´æ•°å€¼throw ENUM_INVALID_INDEX; //æŠ›å‡ºä¸€ä¸ªæšä¸¾å€¼throw \"Can not take square root of negative number\"; //æŠ›å‡ºä¸€ä¸ªcæ ·å¼çš„å­—ç¬¦ä¸²(const char*)throw dX; //æŠ›å‡ºä¸€ä¸ªåœ¨æ­¤ä¹‹å‰å®šä¹‰çš„doubleå‹å˜é‡throw MyException(\"Fatal Error\"); //æŠ›å‡º ä¸€ä¸ª ç±»å¯¹è±¡ï¼šMyExceptionè¿™äº›è¯­å¥ä¸­çš„æ¯ä¸€æ¡éƒ½å……å½“ä¸€ä¸ªä¿¡å·ï¼Œè¡¨ç¤ºéœ€è¦å¤„ç†çš„æŸç§é—®é¢˜å·²ç»å‘ç”Ÿã€‚å¯»æ‰¾(try)å¼‚å¸¸æŠ›å‡ºå¼‚å¸¸åªæ˜¯å¼‚å¸¸å¤„ç†è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬å›åˆ°ç¾å¼è¶³çƒçš„æ¯”å–»: ä¸€æ—¦è£åˆ¤æŠ›å‡ºäº†ç½šçƒï¼Œæ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆ?çƒå‘˜ä»¬æ³¨æ„åˆ°å¤„ç½šå·²ç»å‘ç”Ÿï¼Œäºæ˜¯åœæ­¢æ¯”èµ›ã€‚è¶³çƒæ¯”èµ›çš„æ­£å¸¸ç§©åºè¢«æ‰“ä¹±äº†ã€‚åœ¨c++ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨tryå…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ª è¯­å¥å—(ç§°ä¸ºtryå—)ã€‚tryå—å……å½“è§‚å¯Ÿè€…ï¼ŒæŸ¥æ‰¾tryå—ä¸­çš„ä»»ä½•è¯­å¥ æŠ›å‡ºçš„ä»»ä½•å¼‚å¸¸ã€‚12345try&#123; //å¯èƒ½å¼•å‘æ‚¨æƒ³è¦å¤„ç†çš„å¼‚å¸¸çš„è¯­å¥è¯·è½¬åˆ°è¿™é‡Œ throw -1; //è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æŠ›å‡ºè¯­å¥&#125;æ³¨æ„ï¼Œtryå—æ²¡æœ‰å®šä¹‰å¦‚ä½•å¤„ç†å¼‚å¸¸ã€‚å®ƒåªæ˜¯å‘Šè¯‰ç¨‹åºï¼Œâ€œå˜¿ï¼Œå¦‚æœtryå—ä¸­çš„ä»»ä½•è¯­å¥æŠ›å‡ºå¼‚å¸¸ï¼ŒæŠ“ä½å®ƒ!â€å¤„ç†(catch)å¼‚å¸¸æœ€åï¼Œç¾å¼è¶³çƒçš„æ¯”å–»åˆ°æ­¤ç»“æŸ: åœ¨åˆ¤ç½šç»“æŸï¼Œæ¯”èµ›åœæ­¢åï¼Œè£åˆ¤ä¼šå¯¹åˆ¤ç½šè¿›è¡Œè¯„ä¼°å¹¶æ‰§è¡Œã€‚æ¢å¥è¯è¯´ï¼Œåœ¨æ¢å¤æ­£å¸¸æ¯”èµ›ä¹‹å‰ï¼Œå¿…é¡»å¯¹ç‚¹çƒè¿›è¡Œå¤„ç†ã€‚å®é™…å¤„ç†å¼‚å¸¸æ˜¯catchå—çš„å·¥ä½œã€‚catchå…³é”®å­—ç”¨äº å®šä¹‰å¤„ç†å•ä¸ªæ•°æ®ç±»å‹å¼‚å¸¸çš„ä»£ç å—(ç§°ä¸ºcatchå—)ã€‚12345catch (int x)&#123; //å¤„ç†ä¸€ä¸ªintç±»å‹çš„å¼‚å¸¸ std::cerr &lt;&lt;\"We caught an int exception with value\" &lt;&lt; x &lt;&lt; '\\n';&#125;Tryå—å’Œcatchå—ä¸€èµ·å·¥ä½œâ€”â€”Tryå—æ£€æµ‹Tryå—ä¸­çš„è¯­å¥æŠ›å‡ºçš„ä»»ä½•å¼‚å¸¸ï¼Œå¹¶å°†å®ƒä»¬é€åˆ°åˆ°é€‚å½“çš„catchå—è¿›è¡Œå¤„ç†ã€‚ä¸€ä¸ªtryå—å¿…é¡»æœ‰è‡³å°‘ä¸€ä¸ªcatchå—ç´§è·Ÿç€å®ƒï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªcatchå—æŒ‰é¡ºåºåˆ—å‡ºã€‚ä¸€æ—¦tryå—æ•è·äº†å¼‚å¸¸å¹¶å°†å…¶é€åˆ°catchå—è¿›è¡Œå¤„ç†ï¼Œå°±ä¼šè®¤ä¸ºå¼‚å¸¸å·²è¢«å¤„ç†ï¼Œå¹¶ä¸”åœ¨catchå—ä¹‹åæ‰§è¡Œå°†æ¢å¤æ­£å¸¸ã€‚Catchå‚æ•°çš„å·¥ä½œåŸç†ä¸å‡½æ•°å‚æ•°ä¸€æ ·ï¼Œåœ¨åç»­çš„Catchå—ä¸­å¯ä»¥ä½¿ç”¨è¯¥å‚æ•°ã€‚åŸºæœ¬ç±»å‹çš„å¼‚å¸¸å¯ä»¥é€šè¿‡å€¼æ•è·ï¼Œä½†æ˜¯éåŸºæœ¬ç±»å‹çš„å¼‚å¸¸åº”è¯¥é€šè¿‡constå¼•ç”¨æ•è·ï¼Œä»¥é¿å…ä¸å¿…è¦çš„å¤åˆ¶ã€‚å°±åƒå‡½æ•°ä¸€æ ·ï¼Œå¦‚æœå‚æ•°ä¸åœ¨catchå—ä¸­ä½¿ç”¨ï¼Œå˜é‡åå¯ä»¥çœç•¥:1234catch (double) //æ³¨æ„:æ²¡æœ‰å˜é‡åï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä¸‹é¢çš„catchå—ä¸­æ²¡æœ‰ä½¿ç”¨å®ƒ&#123; std::cerr &lt;&lt; \"We caught an exception of type double\" &lt;&lt; '\\n';&#125;è¿™å¯ä»¥é˜²æ­¢ç¼–è¯‘å™¨å¯¹æœªä½¿ç”¨çš„å˜é‡å‘å‡ºè­¦å‘Šã€‚throw, try,catch ä¸€èµ·ä½¿ç”¨è¿™é‡Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¨‹åºï¼Œä½¿ç”¨æŠ›å‡ºï¼Œå°è¯•ï¼Œå’Œå¤šä¸ªæ•æ‰å—:12345678910111213141516171819202122232425262728293031323334#include &lt;iostream&gt;#include &lt;string&gt; int main()&#123; try &#123; // å¯èƒ½å¼•å‘æ‚¨æƒ³è¦å¤„ç†çš„å¼‚å¸¸çš„è¯­å¥è¯·è½¬åˆ°è¿™é‡Œ throw -1; // here's a trivial example &#125; catch (int x) &#123; // åœ¨ä¸Šé¢çš„tryå—ä¸­æŠ›å‡ºçš„ä»»ä½•intç±»å‹çš„å¼‚å¸¸éƒ½ä¼šè¢«å‘é€åˆ°è¿™é‡Œ std::cerr &lt;&lt; \"We caught an int exception with value: \" &lt;&lt; x &lt;&lt; '\\n'; &#125; catch (double) // æ²¡æœ‰å˜é‡åï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨ä¸‹é¢çš„catchå—ä¸­ä½¿ç”¨å¼‚å¸¸æœ¬èº« &#123; // åœ¨ä¸Šé¢çš„tryå—ä¸­ï¼Œä»»ä½•ç±»å‹ä¸ºdoubleæŠ›å‡ºçš„å¼‚å¸¸éƒ½ä¼šè¢«å‘é€åˆ°è¿™é‡Œ std::cerr &lt;&lt; \"We caught an exception of type double\" &lt;&lt; '\\n'; &#125; catch (const std::string &amp;str) // é€šè¿‡constå¼•ç”¨æ•è·ç±» &#123; // åœ¨ä¸Šé¢çš„tryå—ä¸­æŠ›å‡ºçš„ä»»ä½•std::stringç±»å‹çš„å¼‚å¸¸éƒ½ä¼šè¢«å‘é€åˆ°è¿™é‡Œ std::cerr &lt;&lt; \"We caught an exception of type std::string\" &lt;&lt; '\\n'; &#125; std::cout &lt;&lt; \"Continuing on our merry way\\n\"; return 0;&#125;/*ç»“æœ*/We caught an int exception with value -1Continuing on our merry wayå¼‚å¸¸å¤„ç†å°ç»“å¼‚å¸¸å¤„ç†å®é™…ä¸Šéå¸¸ç®€å•ï¼Œä»¥ä¸‹ä¸¤æ®µæ¶µç›–äº†æ‚¨éœ€è¦è®°ä½çš„å¤§éƒ¨åˆ†å†…å®¹:å½“æŠ›å‡ºå¼‚å¸¸(ä½¿ç”¨throw)æ—¶ï¼Œç¨‹åºçš„æ‰§è¡Œç«‹å³è·³è½¬åˆ°æœ€è¿‘çš„å°é—­tryå— (å¦‚æœéœ€è¦æ‰¾åˆ°ä¸€ä¸ªå°é—­çš„tryå—ï¼Œåˆ™å‘ä¸Šä¼ æ’­æ ˆâ€”â€”ä¸‹ä¸€è¯¾æˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°è®¨è®ºè¿™ä¸ªé—®é¢˜)ã€‚å¦‚æœè¿æ¥åˆ°tryå—å¥æŸ„çš„ ä»»ä½•catchå¤„ç†ç¨‹åºå‡ºç°è¿™ç§ç±»å‹çš„å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œè¯¥å¤„ç†ç¨‹åºï¼Œå¹¶è®¤ä¸ºè¯¥å¼‚å¸¸å·²å¾—åˆ°å¤„ç†ã€‚å¦‚æœæ²¡æœ‰åˆé€‚çš„catchå¤„ç†ç¨‹åºå­˜åœ¨ï¼Œç¨‹åºçš„æ‰§è¡Œå°†ä¼ æ’­åˆ°ä¸‹ä¸€ä¸ªå°é—­çš„tryå—ã€‚å¦‚æœåœ¨ç¨‹åºç»“æŸä¹‹å‰æ‰¾ä¸åˆ°åˆé€‚çš„catchå¤„ç†ç¨‹åºï¼Œç¨‹åºå°†å¤±è´¥å¹¶å‡ºç°å¼‚å¸¸é”™è¯¯ã€‚æ³¨æ„ï¼Œå½“å¼‚å¸¸ä¸catchå—åŒ¹é…æ—¶ï¼Œç¼–è¯‘å™¨ä¸ä¼šæ‰§è¡Œéšå¼è½¬æ¢æˆ–æå‡!ä¾‹å¦‚ï¼Œcharå¼‚å¸¸å°†ä¸int catchå—ä¸åŒ¹é…ã€‚ä¸€ä¸ªintå¼‚å¸¸å°†ä¸åŒ¹é…ä¸€ä¸ªæµ®ç‚¹æ•è·å—ã€‚ä½†æ˜¯ï¼Œå°†æ‰§è¡Œä»æ´¾ç”Ÿç±»åˆ°å…¶çˆ¶ç±»ä¹‹ä¸€çš„è½¬æ¢ã€‚å¼‚å¸¸ä¼šç«‹å³å¤„ç†ä¸‹é¢æ˜¯ä¸€ä¸ªæ¼”ç¤ºå¦‚ä½•ç«‹å³å¤„ç†å¼‚å¸¸çš„ç®€çŸ­ç¨‹åº:12345678910111213141516171819#include &lt;iostream&gt;int main()&#123; try &#123; throw 4.5; std::cout &lt;&lt;\"This never prints\\n\"; &#125; catch (double x) &#123; std::cerr &lt;&lt; \"We caught a double of value: \" &lt;&lt; x &lt;&lt; '\\n'; &#125; return 0;&#125;/*ç»“æœ*/We caught a double of value: 4.5è¿™ä¸ªç¨‹åºéå¸¸ç®€å•ã€‚æƒ…å†µæ˜¯è¿™æ ·çš„:æŠ›å‡ºï¼ˆthrowï¼‰è¯­å¥æ˜¯æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªè¯­å¥â€”â€”è¿™ä¼šå¼•å‘doubleç±»å‹çš„å¼‚å¸¸ã€‚æ‰§è¡Œç«‹å³ç§»åŠ¨åˆ°æœ€è¿‘çš„å°é—­tryå—ï¼Œè¿™æ˜¯è¿™ä¸ªç¨‹åºä¸­æƒŸä¸€çš„tryå—ã€‚ç„¶åæ£€æŸ¥catchå¤„ç†ç¨‹åºï¼Œä»¥æŸ¥çœ‹æ˜¯å¦æœ‰åŒ¹é…çš„å¤„ç†ç¨‹åºã€‚æˆ‘ä»¬çš„å¼‚å¸¸ç±»å‹æ˜¯doubleï¼Œå› æ­¤æˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ç±»å‹ä¸ºdoubleçš„catchå¤„ç†ç¨‹åºã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥å®ƒæ‰§è¡Œã€‚æ³¨æ„ï¼šâ€œThis never printsâ€ æ˜¯æ°¸è¿œä¸ä¼šè¢«æ‰“å°çš„ï¼Œå› ä¸ºå¼‚å¸¸å¯¼è‡´æ‰§è¡Œè·¯å¾„ç«‹å³è·³è½¬åˆ° doubleç±»å‹çš„å¼‚å¸¸å¤„ç†ç¨‹åºã€‚ä¸€ä¸ªæ›´çœŸå®çš„ä¾‹å­è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¸é‚£ä¹ˆå­¦æœ¯çš„ä¾‹å­:1234567891011121314151617181920212223#include \"math.h\" // for sqrt() function#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Enter a number: \"; double x; std::cin &gt;&gt; x; try //æŸ¥æ‰¾tryå—ä¸­å‘ç”Ÿçš„å¼‚å¸¸ï¼Œå¹¶å°†å¼‚å¸¸é€åˆ°é™„åŠ çš„ catchå— &#123; // å¦‚æœç”¨æˆ·è¾“å…¥äº†ä¸€ä¸ªè´Ÿæ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªé”™è¯¯æ¡ä»¶ if (x &lt; 0.0) throw \"Can not take sqrt of negative number\"; // æŠ›å‡ºconst char*ç±»å‹çš„å¼‚å¸¸ // å¦åˆ™ï¼Œæ‰“å°ç­”æ¡ˆ std::cout &lt;&lt; \"The sqrt of \" &lt;&lt; x &lt;&lt; \" is \" &lt;&lt; sqrt(x) &lt;&lt; '\\n'; &#125; catch (const char* exception) // æ•è·const char*ç±»å‹çš„å¼‚å¸¸ &#123; std::cerr &lt;&lt; \"Error: \" &lt;&lt; exception &lt;&lt; '\\n'; &#125;&#125;åœ¨è¿™æ®µä»£ç ä¸­ï¼Œè¦æ±‚ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•°å­—ã€‚å¦‚æœè¾“å…¥çš„æ˜¯æ­£æ•°ï¼Œåˆ™Ifè¯­å¥ä¸æ‰§è¡Œï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶æ‰“å°è¯¥æ•°å­—çš„å¹³æ–¹æ ¹ã€‚å› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥catchå—ä¸­çš„ä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œã€‚ç»“æœæ˜¯è¿™æ ·çš„:12Enter a number: 9The sqrt of 9 is 3å¦‚æœç”¨æˆ·è¾“å…¥ä¸€ä¸ªè´Ÿæ•°ï¼Œæˆ‘ä»¬æŠ›å‡ºä¸€ä¸ªconst char*ç±»å‹çš„å¼‚å¸¸ã€‚å› ä¸ºæˆ‘ä»¬åœ¨tryå—ä¸­ï¼Œå¹¶ä¸”æ‰¾åˆ°äº†åŒ¹é…çš„å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œæ‰€ä»¥æ§ä»¶ç«‹å³è½¬ç§»åˆ°const char*å¼‚å¸¸å¤„ç†ç¨‹åºã€‚å…¶ç»“æœæ˜¯:12Enter a number: -4Error: Can not take sqrt of negative numberä»€ä¹ˆæ˜¯å…¸å‹çš„ catchå—å¦‚æœä¸€ä¸ªå¼‚å¸¸è¢«é€åˆ°ä¸€ä¸ªcatchå—ï¼Œå³ä½¿catchå—æ˜¯ç©ºçš„ï¼Œå®ƒä¹Ÿè¢«è®¤ä¸ºæ˜¯â€œå·²å¤„ç†â€çš„ã€‚ç„¶è€Œï¼Œé€šå¸¸æ‚¨ä¼šå¸Œæœ›æ‚¨çš„catchå—åšä¸€äº›æœ‰ç”¨çš„äº‹æƒ…ã€‚å½“catchå—æ•è·å¼‚å¸¸æ—¶ï¼Œé€šå¸¸ä¼šåšä¸‰ä»¶äº‹æƒ…:é¦–å…ˆï¼Œcatchå—å¯èƒ½ä¼šæ‰“å°é”™è¯¯(è¾“å‡ºåˆ°æ§åˆ¶å°æˆ–æ—¥å¿—æ–‡ä»¶)ã€‚å…¶æ¬¡ï¼Œcatchå—å¯èƒ½ä¼šå‘è°ƒç”¨è€…è¿”å›ä¸€ä¸ªå€¼æˆ–é”™è¯¯ä»£ç ã€‚ç¬¬ä¸‰ï¼Œcatchå—å¯èƒ½æŠ›å‡ºå¦ä¸€ä¸ªå¼‚å¸¸ã€‚å› ä¸ºcatchå—ä½äºtryå—ä¹‹å¤–ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ–°æŠ›å‡ºçš„å¼‚å¸¸ä¸æ˜¯ç”±å‰ä¸€ä¸ªtryå—å¤„ç†çš„â€”â€”è€Œæ˜¯ç”±ä¸‹ä¸€ä¸ªå°é—­çš„tryå—å¤„ç†çš„ã€‚","categories":[],"tags":[]},{"title":"C&C++/å¼‚å¸¸å¤„ç†","slug":"C&C++/å¼‚å¸¸å¤„ç†","date":"2020-05-19T03:28:11.960Z","updated":"2020-05-19T03:57:21.595Z","comments":true,"path":"archives/800f51f0.html","link":"","permalink":"https://longlongqin.github.io/archives/800f51f0.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/141-the-need-for-exceptions/åœ¨handling errorsä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†ä½¿ç”¨assert()ã€cerr()å’Œexit()æ¥å¤„ç†é”™è¯¯çš„æ–¹æ³•ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬ç°åœ¨å°†è®¨è®ºï¼šexceptionså½“è¿”å›ç å¤±è´¥æ—¶åœ¨ç¼–å†™å¯é‡ç”¨ä»£ç æ—¶ï¼Œé”™è¯¯å¤„ç†æ˜¯å¿…è¦çš„ã€‚å¤„ç†æ½œåœ¨é”™è¯¯çš„æœ€å¸¸è§æ–¹æ³•ä¹‹ä¸€æ˜¯é€šè¿‡è¿”å›ä»£ç ã€‚ä¾‹å¦‚:1234567891011int findFirstChar(const char* string, char ch)&#123; const std::size_t stringlength&#123;str(string)&#125;; for(std::size_t index = 0; index &lt; stringlength; ++index) &#123; if(string[index] == ch) return index; &#125; return -1;&#125;è¿™ä¸ªå‡½æ•°è¿”å›å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…chçš„å­—ç¬¦çš„ç´¢å¼•ã€‚å¦‚æœæ‰¾ä¸åˆ°å­—ç¬¦ï¼Œå‡½æ•°å°†è¿”å›-1ä½œä¸ºé”™è¯¯æŒ‡ç¤ºç¬¦ã€‚è¿™ç§æ–¹æ³•çš„ä¸»è¦ä¼˜ç‚¹æ˜¯éå¸¸ç®€å•ã€‚ç„¶è€Œï¼Œä½¿ç”¨è¿”å›ç æœ‰ä¸€äº›ç¼ºç‚¹ï¼Œåœ¨éå¹³å‡¡çš„æƒ…å†µä¸‹å¾ˆå¿«å°±ä¼šå˜å¾—æ˜æ˜¾:é¦–å…ˆï¼Œè¿”å›å€¼å¯èƒ½æ˜¯æ¨¡ç³Šçš„â€”â€”å¦‚æœä¸€ä¸ªå‡½æ•°è¿”å›-1ï¼Œå®ƒæ˜¯è¯•å›¾æŒ‡ç¤ºä¸€ä¸ªé”™è¯¯ï¼Œè¿˜æ˜¯å®é™…ä¸Šæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„è¿”å›å€¼? å¦‚æœä¸æ·±å…¥äº†è§£å‡½æ•°çš„æœ¬è´¨ï¼Œé€šå¸¸å¾ˆéš¾åˆ¤æ–­ã€‚å…¶æ¬¡ï¼Œå‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥å½“éœ€è¦åŒæ—¶è¿”å›å‡½æ•°ç»“æœå’Œé”™è¯¯ä»£ç æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µ?è€ƒè™‘ä»¥ä¸‹åŠŸèƒ½:1234double divide(int x, int y)&#123; return static_cast&lt;double&gt;(x)/y;&#125;è¿™ä¸ªå‡½æ•°éå¸¸éœ€è¦ä¸€äº›é”™è¯¯å¤„ç†ï¼Œå› ä¸ºå¦‚æœç”¨æˆ·ä¼ å…¥0ä½œä¸ºå‚æ•°yï¼Œå®ƒä¼šå´©æºƒï¼Œä½†æ˜¯å®ƒè¿˜éœ€è¦è¿”å›x/yçš„ç»“æœã€‚æ€ä¹ˆèƒ½ä¸¤å…¨å…¶ç¾å‘¢?æœ€å¸¸è§çš„ç­”æ¡ˆæ˜¯ï¼Œç»“æœæˆ–é”™è¯¯å¤„ç†å¿…é¡»ä½œä¸ºå¼•ç”¨å‚æ•°ä¼ é€’å›å»ï¼Œè¿™ä½¿å¾—ä½¿ç”¨èµ·æ¥æ›´ä¸æ–¹ä¾¿ã€‚ä¾‹å¦‚:1234567891011121314151617181920212223242526#include &lt;iostream&gt;double divide(int x, int y, bool &amp;success)&#123; if(y==0) &#123; success = false; return 0.0; &#125; success = true; return static_cast&lt;double&gt;(x)/y;&#125;int main()&#123; bool success; double result = divide(5,3,success); if(!success) std::cerr&lt;&lt;\"An error occurred\"&lt;&lt;std::endl; else std::cout &lt;&lt;\"The answer is \" &lt;&lt; result &lt;&lt; '\\n'; return 0;&#125;ç¬¬ä¸‰ï¼Œåœ¨å¯èƒ½å‡ºé”™çš„ä»£ç åºåˆ—ä¸­ï¼Œå¿…é¡»ç»å¸¸æ£€æŸ¥é”™è¯¯ä»£ç ã€‚è€ƒè™‘ä¸€ä¸‹ä¸‹é¢çš„ä»£ç ç‰‡æ®µï¼Œå®ƒæ¶‰åŠåˆ°è§£æä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå¯»æ‰¾åº”è¯¥å­˜åœ¨çš„å€¼:12345678910111213141516171819202122232425262728234567891011121314 std::ifstream setupIni(\"setup.ini\"); // open setup.ini for reading // If the file couldn't be opened (e.g. because it was missing) return some error enum if (!setupIni) return ERROR_OPENING_FILE; // Now read a bunch of values from a file if (!readIntegerFromFile(setupIni, m_firstParameter)) // try to read an integer from the file return ERROR_READING_VALUE; // Return enum value indicating value couldn't be read if (!readDoubleFromFile(setupIni, m_secondParameter)) // try to read a double from the file return ERROR_READING_VALUE; if (!readFloatFromFile(setupIni, m_thirdParameter)) // try to read a float from the file return ERROR_READING_VALUE;æˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®ºæ–‡ä»¶è®¿é—®ï¼Œæ‰€ä»¥å¦‚æœæ‚¨ä¸ç†è§£ä¸Šé¢çš„å·¥ä½œåŸç†ï¼Œä¹Ÿä¸è¦æ‹…å¿ƒâ€”â€”åªéœ€æ³¨æ„è¿™æ ·ä¸€ä¸ªäº‹å®:æ¯ä¸ªè°ƒç”¨éƒ½éœ€è¦è¿›è¡Œé”™è¯¯æ£€æŸ¥å¹¶è¿”å›ç»™è°ƒç”¨è€…ã€‚ç°åœ¨æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæœ‰20ä¸ªä¸åŒç±»å‹çš„å‚æ•°â€”â€”æ‚¨å®é™…ä¸Šæ˜¯åœ¨æ£€æŸ¥ä¸€ä¸ªé”™è¯¯å¹¶è¿”å›ERROR_READING_VALUE 20æ¬¡!æ‰€æœ‰è¿™äº›é”™è¯¯æ£€æŸ¥å’Œè¿”å›å€¼ ä½¿å¾—ç¡®å®šå‡½æ•°è¦æ‰§è¡Œçš„æ“ä½œæ›´åŠ éš¾ä»¥è¯†åˆ«ã€‚ç¬¬å››ï¼Œè¿”å›ä»£ç ä¸èƒ½å¾ˆå¥½åœ°ä¸æ„é€ å‡½æ•°æ··åˆã€‚å¦‚æœä½ åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œæ„é€ å‡½æ•°é‡Œé¢çš„ä¸€äº›ä¸œè¥¿å‡ºäº†ç¾éš¾æ€§çš„é”™è¯¯ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæ„é€ å‡½æ•°æ²¡æœ‰è¿”å›ç±»å‹æ¥è¿”å›çŠ¶æ€æŒ‡ç¤ºå™¨ï¼Œå¹¶ä¸”é€šè¿‡å¼•ç”¨å‚æ•°è¿”å›ä¸€ä¸ªçŠ¶æ€æŒ‡ç¤ºå™¨æ˜¯æ··ä¹±çš„ï¼Œå¿…é¡»æ˜¾å¼åœ°æ£€æŸ¥ã€‚è€Œä¸”ï¼Œå³ä½¿è¿™æ ·åšï¼Œä»ç„¶ä¼šåˆ›å»ºå¯¹è±¡ï¼Œç„¶åå¿…é¡»å¤„ç†æˆ–é‡Šæ”¾å¯¹è±¡ã€‚æœ€åï¼Œå½“å‘è°ƒç”¨æ–¹è¿”å›é”™è¯¯ä»£ç æ—¶ï¼Œè°ƒç”¨æ–¹å¯èƒ½å¹¶ä¸æ€»æ˜¯èƒ½å¤Ÿå¤„ç†é”™è¯¯ã€‚å¦‚æœè°ƒç”¨è€…ä¸æƒ³å¤„ç†é”™è¯¯ï¼Œå®ƒè¦ä¹ˆå¿½ç•¥å®ƒ(åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå°†æ°¸è¿œä¸¢å¤±)ï¼Œè¦ä¹ˆå°†é”™è¯¯è¿”å›åˆ°è°ƒç”¨å®ƒçš„å‡½æ•°ã€‚è¿™å¯èƒ½æ˜¯æ··ä¹±çš„ï¼Œå¹¶å¯¼è‡´è®¸å¤šç›¸åŒçš„é—®é¢˜ä¸Šé¢æåˆ°ã€‚æ€»ä¹‹ï¼Œè¿”å›ä»£ç çš„ä¸»è¦é—®é¢˜æ˜¯é”™è¯¯å¤„ç†ä»£ç æœ€ç»ˆå¤æ‚åœ°é“¾æ¥åˆ°ä»£ç çš„æ­£å¸¸æ§åˆ¶æµã€‚è¿™åè¿‡æ¥åˆé™åˆ¶äº†ä»£ç çš„å¸ƒå±€ï¼Œä»¥åŠå¦‚ä½•åˆç†åœ°å¤„ç†é”™è¯¯ã€‚å¼‚å¸¸å¼‚å¸¸å¤„ç†æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å°†é”™è¯¯æˆ–å…¶ä»–å¼‚å¸¸æƒ…å†µçš„å¤„ç†ä¸ä»£ç çš„å…¸å‹æ§åˆ¶æµåˆ†ç¦»å¼€æ¥ã€‚è¿™å…è®¸åœ¨ç‰¹å®šæƒ…å†µä¸‹æ›´è‡ªç”±åœ°å¤„ç†é”™è¯¯ï¼Œå‡è½»äº†è¿”å›ä»£ç é€ æˆçš„æ··ä¹±(å¦‚æœä¸æ˜¯å…¨éƒ¨çš„è¯)ã€‚","categories":[],"tags":[]},{"title":"C&C++/æŒ‡é’ˆçš„å±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–","slug":"C&C++/æŒ‡é’ˆçš„å±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–","date":"2020-05-17T08:30:44.323Z","updated":"2020-05-17T09:35:01.172Z","comments":true,"path":"archives/db2a8c7a.html","link":"","permalink":"https://longlongqin.github.io/archives/db2a8c7a.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/13-8-partial-template-specialization-for-pointers/åœ¨ 13.5 â€“ Function template specializationä¸­ï¼Œæˆ‘ä»¬çœ‹äº†ä¸€ä¸ªç®€å•çš„æ¨¡æ¿åŒ– Storageç±»:12345678910111213141516171819202122#include &lt;iostream&gt; template &lt;class T&gt;class Storage&#123;private: T m_value;public: Storage(T value) &#123; m_value = value; &#125; ~Storage() &#123; &#125; void print() &#123; std::cout &lt;&lt; m_value &lt;&lt; '\\n'; &#125;&#125;;æˆ‘ä»¬æŒ‡å‡ºï¼Œå½“æ¨¡æ¿å‚æ•°Tä¸ºchar*ç±»å‹æ—¶ï¼Œè¯¥ç±»ä¼šå‡ºç°é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸ºæ„é€ å‡½æ•°ä¸­å‘ç”Ÿäº†æµ…æ‹·è´/æŒ‡é’ˆèµ‹å€¼ã€‚åœ¨é‚£èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å®Œæ•´çš„æ¨¡æ¿ä¸“é—¨åŒ–æ¥åˆ›å»ºchar*ç±»å‹çš„å­˜å‚¨æ„é€ å‡½æ•°çš„ä¸“é—¨åŒ–ç‰ˆæœ¬ï¼Œå®ƒåˆ†é…å†…å­˜å¹¶åˆ›å»ºm_valueçš„å®é™…æ·±åº¦å‰¯æœ¬ã€‚ä½œä¸ºå‚è€ƒï¼Œè¿™é‡Œæ˜¯å®Œå…¨ä¸“é—¨åŒ–çš„char*å­˜å‚¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°:123456789101112131415161718192021222324// æ‚¨éœ€è¦åŒ…å«ä¸Šé¢ç¤ºä¾‹ä¸­çš„Storageç±»template &lt;&gt;Storage&lt;char*&gt;::Storage(char* value)&#123; // Figure out how long the string in value is int length=0; while (value[length] != '\\0') ++length; ++length; // +1 to account for null terminator // Allocate memory to hold the value string m_value = new char[length]; // Copy the actual value string into the m_value memory we just allocated for (int count=0; count &lt; length; ++count) m_value[count] = value[count];&#125; template&lt;&gt;Storage&lt;char*&gt;::~Storage()&#123; delete[] m_value;&#125;è™½ç„¶è¿™å¯¹äºå­˜å‚¨éå¸¸æœ‰æ•ˆï¼Œä½†æ˜¯å…¶ä»–æŒ‡é’ˆç±»å‹(ä¾‹å¦‚int*)åˆå¦‚ä½•å‘¢?å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œå¦‚æœTæ˜¯ä»»ä½•æŒ‡é’ˆç±»å‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¼šé‡åˆ°æ„é€ å‡½æ•°æ‰§è¡ŒæŒ‡é’ˆèµ‹å€¼çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯åˆ›å»ºè¢«æŒ‡å‘çš„å…ƒç´ çš„å®é™…æ·±åº¦å‰¯æœ¬ã€‚å› ä¸ºå®Œå…¨çš„æ¨¡æ¿ä¸“é—¨åŒ–è¿«ä½¿æˆ‘ä»¬å®Œå…¨è§£ææ¨¡æ¿ç±»å‹ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºæˆ‘ä»¬æƒ³è¦ä½¿ç”¨Storageçš„æ¯ä¸ªæŒ‡é’ˆç±»å‹å®šä¹‰ä¸€ä¸ªæ–°çš„ä¸“é—¨åŒ–æ„é€ å‡½æ•°(å’Œææ„å‡½æ•°)! è¿™å°†å¯¼è‡´å¤§é‡é‡å¤çš„ä»£ç ï¼Œæ­£å¦‚æ‚¨ç°åœ¨æ‰€çŸ¥é“çš„ï¼Œè¿™æ˜¯æˆ‘ä»¬å¸Œæœ›å°½å¯èƒ½é¿å…çš„ã€‚æŒ‡é’ˆçš„å±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–ä¸€æ¬¡åªå¤åˆ¶ä¸€ä¸ªå€¼å¹¸è¿çš„æ˜¯ï¼Œå±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç±»å±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–æ¥å®šä¹‰ç”¨äºæŒ‡é’ˆå€¼çš„å­˜å‚¨ç±»çš„ç‰¹æ®Šç‰ˆæœ¬ã€‚è¿™ä¸ªç±»è¢«è®¤ä¸ºæ˜¯éƒ¨åˆ†ä¸“é—¨åŒ–çš„ï¼Œå› ä¸ºæˆ‘ä»¬å‘Šè¯‰ç¼–è¯‘å™¨å®ƒåªç”¨äºæŒ‡é’ˆç±»å‹ï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰ç²¾ç¡®åœ°æŒ‡å®šåº•å±‚ç±»å‹ã€‚1234567891011121314151617181920212223242526#include &lt;iostream&gt; // æ‚¨éœ€è¦åŒ…å«ä¸Šé¢ç¤ºä¾‹ä¸­çš„Storageç±» template &lt;typename T&gt;class Storage&lt;T*&gt; // è¿™æ˜¯ä½¿ç”¨æŒ‡é’ˆç±»å‹çš„ Storageçš„éƒ¨åˆ†ä¸“é—¨åŒ–&#123;private: T* m_value;public: Storage(T* value) // for pointer type T &#123; // å¯¹äºæŒ‡é’ˆï¼Œæˆ‘ä»¬å°†è¿›è¡Œæ·±åº¦å¤åˆ¶ m_value = new T(*value); // å®ƒåªå¤åˆ¶ä¸€ä¸ªå€¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„ &#125; ~Storage() &#123; delete m_value; // è¿™é‡Œæˆ‘ä»¬ç”¨çš„æ˜¯æ ‡é‡deleteï¼Œä¸æ˜¯æ•°ç»„delete &#125; void print() &#123; std::cout &lt;&lt; *m_value &lt;&lt; '\\n'; &#125;&#125;;è¿™æ–¹é¢çš„ä¸€ä¸ªä¾‹å­æ˜¯:123456789101112131415161718192021int main()&#123; // Declare a non-pointer Storage to show it works Storage&lt;int&gt; myint(5); myint.print(); // Declare a pointer Storage to show it works int x = 7; Storage&lt;int*&gt; myintptr(&amp;x); // å¦‚æœmyintptråœ¨xä¸Šåšäº†ä¸€ä¸ªæŒ‡é’ˆèµ‹å€¼ï¼Œ // é‚£ä¹ˆæ”¹å˜xä¹Ÿä¼šæ”¹å˜myintptr x = 9; myintptr.print(); return 0;&#125;/*ç»“æœ*/57å½“myintpträ½¿ç”¨int* templateå‚æ•°å®šä¹‰æ—¶ï¼Œç¼–è¯‘å™¨ä¼šçœ‹åˆ°æˆ‘ä»¬å·²ç»å®šä¹‰äº†ä¸€ä¸ªéƒ¨åˆ†ä¸“ç”¨çš„æ¨¡æ¿ç±»ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä»»ä½•æŒ‡é’ˆç±»å‹ï¼Œå¹¶ä½¿ç”¨è¯¥æ¨¡æ¿å®ä¾‹åŒ–ä¸€ä¸ªç‰ˆæœ¬çš„ Storageã€‚è¯¥ç±»çš„æ„é€ å‡½æ•°åˆ›å»ºäº†å‚æ•°xçš„æ·±åº¦å‰¯æœ¬ã€‚ç¨åï¼Œå½“æˆ‘ä»¬å°†xæ›´æ”¹ä¸º9æ—¶ï¼Œå°†åˆ›å»ºmyintptrã€‚m_valueä¸å—å½±å“ï¼Œå› ä¸ºå®ƒæŒ‡å‘çš„æ˜¯å®ƒè‡ªå·±çš„å•ç‹¬çš„å€¼å‰¯æœ¬ã€‚å¦‚æœéƒ¨åˆ†æ¨¡æ¿ä¸“é—¨åŒ–ç±»ä¸å­˜åœ¨ï¼Œmyintptrå°†ä½¿ç”¨æ¨¡æ¿çš„æ™®é€š(ééƒ¨åˆ†ä¸“é—¨åŒ–)ç‰ˆæœ¬ã€‚è¯¥ç±»çš„æ„é€ å‡½æ•°æ‰§è¡Œä¸€ä¸ªæµ…å¤åˆ¶æŒ‡é’ˆèµ‹å€¼ï¼Œè¿™æ„å‘³ç€myintptrã€‚m_valueå’Œxå°†å¼•ç”¨ç›¸åŒçš„åœ°å€ã€‚ç„¶åï¼Œå½“æˆ‘ä»¬å°†xçš„å€¼æ›´æ”¹ä¸º9æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¼šæ›´æ”¹myintptrçš„å€¼ã€‚å¤åˆ¶æ•´ä¸ªå­—ç¬¦ä¸²å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºè¿™ä¸ªéƒ¨åˆ†ä¸“é—¨åŒ–çš„å­˜å‚¨ç±»åªä¸ºcé£æ ¼çš„å­—ç¬¦ä¸²åˆ†é…ä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥åªå¤åˆ¶ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚å¦‚æœå¸Œæœ›å¤åˆ¶æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥å®Œå…¨ä¸“é—¨åŒ–char*ç±»å‹çš„æ„é€ å‡½æ•°(å’Œææ„å‡½æ•°)ã€‚ å®Œå…¨ä¸“é—¨åŒ–çš„ç‰ˆæœ¬å°†ä¼˜å…ˆäºéƒ¨åˆ†ä¸“é—¨åŒ–çš„ç‰ˆæœ¬ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ç¨‹åºï¼Œå®ƒå¯¹æŒ‡é’ˆä½¿ç”¨éƒ¨åˆ†ä¸“é—¨åŒ–ï¼Œå¯¹char*ä½¿ç”¨å®Œå…¨ä¸“é—¨åŒ–:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117#include &lt;iostream&gt;#include &lt;cstring&gt; // éæŒ‡é’ˆçš„Storageç±»template &lt;class T&gt;class Storage&#123;private: T m_value;public: Storage(T value) &#123; m_value = value; &#125; ~Storage() &#123; &#125; void print() &#123; std::cout &lt;&lt; m_value &lt;&lt; '\\n'; &#125;&#125;; // æŒ‡é’ˆçš„Storageç±»çš„å±€éƒ¨ä¸“é—¨åŒ–template &lt;class T&gt;class Storage&lt;T*&gt;&#123;private: T* m_value;public: Storage(T* value) &#123; m_value = new T(*value); &#125; ~Storage() &#123; delete m_value; &#125; void print() &#123; std::cout &lt;&lt; *m_value &lt;&lt; '\\n'; &#125;&#125;; // char*ç±»å‹çš„æ„é€ å‡½æ•°çš„å®Œå…¨ä¸“é—¨åŒ–template &lt;&gt;Storage&lt;char*&gt;::Storage(char* value)&#123; // Figure out how long the string in value is int length = 0; while (value[length] != '\\0') ++length; ++length; // +1 to account for null terminator // Allocate memory to hold the value string m_value = new char[length]; // Copy the actual value string into the m_value memory we just allocated for (int count = 0; count &lt; length; ++count) m_value[count] = value[count];&#125; // char*ç±»å‹çš„ææ„å‡½æ•°çš„å®Œå…¨ä¸“é—¨åŒ–template&lt;&gt;Storage&lt;char*&gt;::~Storage()&#123; delete[] m_value;&#125; // char*ç±»å‹çš„æ‰“å°åŠŸèƒ½çš„å®Œå…¨ä¸“é—¨åŒ–//å¦‚æœæ²¡æœ‰è¿™ä¸ªï¼Œæ‰“å°ä¼šè°ƒç”¨Storage&lt;T*&gt;::print()ï¼Œå®ƒåªæ‰“å°ç¬¬ä¸€ä¸ªå…ƒç´ template&lt;&gt;void Storage&lt;char*&gt;::print()&#123; std::cout &lt;&lt; m_value;&#125; int main()&#123; // Declare a non-pointer Storage to show it works Storage&lt;int&gt; myint(5); myint.print(); // Declare a pointer Storage to show it works int x = 7; Storage&lt;int*&gt; myintptr(&amp;x); // If myintptr did a pointer assignment on x, // then changing x will change myintptr too x = 9; myintptr.print(); // Dynamically allocate a temporary string char *name = new char[40]&#123; \"Alex\" &#125;; // requires C++14 // If your compiler isn't C++14 compatible, comment out the above line and uncomment these// char *name = new char[40];// strcpy(name, \"Alex\"); // Store the name Storage&lt; char*&gt; myname(name); // Delete the temporary string delete[] name; // Print out our name myname.print();&#125;/*ç»“æœ*/57Alexä½¿ç”¨éƒ¨åˆ†æ¨¡æ¿ç±»ä¸“é—¨åŒ–æ¥åˆ›å»ºç±»çš„ å•ç‹¬æŒ‡é’ˆ å’Œ éæŒ‡é’ˆå®ç°ï¼Œå½“æ‚¨å¸Œæœ›ç±»ä»¥å®Œå…¨é€æ˜çš„æ–¹å¼åˆ†åˆ«å¤„ç†è¿™ä¸¤ç§æƒ…å†µæ—¶ï¼Œè¿™æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚","categories":[],"tags":[]},{"title":"C&C++/å±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–","slug":"C&C++/å±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–","date":"2020-05-17T02:46:54.815Z","updated":"2020-05-17T03:44:01.603Z","comments":true,"path":"archives/a3ee11a9.html","link":"","permalink":"https://longlongqin.github.io/archives/a3ee11a9.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/137-partial-template-specialization/æœ¬è¯¾å’Œä¸‹ä¸€è¯¾æ˜¯é‚£äº›å¸Œæœ›å¯¹c++æ¨¡æ¿æœ‰æ›´æ·±å…¥äº†è§£çš„äººçš„é€‰è¯»ã€‚å±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–å¹¶ä¸ç»å¸¸ä½¿ç”¨(ä½†æ˜¯åœ¨ç‰¹å®šçš„æƒ…å†µä¸‹å¾ˆæœ‰ç”¨)ã€‚ä¸€ä¸ªä¾‹å­è®©æˆ‘ä»¬å†çœ‹ä¸€ä¸‹æˆ‘ä»¬åœ¨å‰é¢çš„ä¾‹å­ä¸­ä½¿ç”¨çš„é™æ€æ•°ç»„ç±»:123456789101112131415template &lt;class T, int size&gt; // size is the expression parameterclass StaticArray&#123;private: // The expression parameter controls the size of the array T m_array[size]&#123;&#125;; public: T* getArray() &#123; return m_array; &#125; T&amp; operator[](int index) &#123; return m_array[index]; &#125;&#125;;è¯¥ç±»æ¥å—ä¸¤ä¸ªæ¨¡æ¿å‚æ•°ï¼Œä¸€ä¸ªç±»å‹å‚æ•°å’Œä¸€ä¸ªè¡¨è¾¾å¼å‚æ•°ã€‚å®ç°æ‰“å°æ•´ä¸ªæ•°ç»„ç°åœ¨ï¼Œå‡è®¾æˆ‘ä»¬è¦å†™ä¸€ä¸ªå‡½æ•°æ¥è¾“å‡ºæ•´ä¸ªæ•°ç»„ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥å°†å®ƒä½œä¸ºä¸€ä¸ªæˆå‘˜å‡½æ•°æ¥å®ç°ï¼Œä½†æˆ‘ä»¬å°†å®ƒä½œä¸ºä¸€ä¸ªéæˆå‘˜å‡½æ•°æ¥å®ç°ï¼Œå› ä¸ºå®ƒå°†ä½¿åç»­çš„ä¾‹å­æ›´å®¹æ˜“ç†è§£ã€‚ä½¿ç”¨æ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™:123456template &lt;typename T, int size&gt;void print(StaticArray&lt;T, size&gt; &amp;array)&#123; for (int count&#123; 0 &#125;; count &lt; size; ++count) std::cout &lt;&lt; array[count] &lt;&lt; ' ';&#125;è¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿåšåˆ°ä»¥ä¸‹å‡ ç‚¹:12345678910111213141516171819202122232425262728293031323334353637383940414243#include &lt;iostream&gt;#include &lt;cstring&gt; template &lt;class T, int size&gt; // size is the expression parameterclass StaticArray&#123;private: // The expression parameter controls the size of the array T m_array[size]&#123;&#125;; public: T* getArray() &#123; return m_array; &#125; T&amp; operator[](int index) &#123; return m_array[index]; &#125;&#125;; template &lt;typename T, int size&gt;void print(StaticArray&lt;T, size&gt; &amp;array)&#123; for (int count&#123; 0 &#125;; count &lt; size; ++count) std::cout &lt;&lt; array[count] &lt;&lt; ' ';&#125; int main()&#123; // declare an int array StaticArray&lt;int, 4&gt; int4&#123;&#125;; int4[0] = 0; int4[1] = 1; int4[2] = 2; int4[3] = 3; // Print the array print(int4); return 0;&#125;/*ç»“æœ*/0 1 2 3ç¼ºé™·è™½ç„¶è¿™æ˜¯å¯è¡Œçš„ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªè®¾è®¡ç¼ºé™·ã€‚è€ƒè™‘ä»¥ä¸‹:123456789101112int main()&#123; // declare a char array StaticArray&lt;char, 14&gt; char14&#123;&#125;; std::strcpy(char14.getArray(), \"Hello, world!\"); // Print the array print(char14); return 0;&#125;(æˆ‘ä»¬åœ¨ 6.6 â€“ C-style stringså­¦ä¹ äº†std::strcpyï¼Œå¦‚æœä½ éœ€è¦å¤ä¹ çš„è¯)è¿™ä¸ªç¨‹åºå°†ç¼–è¯‘ã€æ‰§è¡Œå¹¶ç”Ÿæˆä»¥ä¸‹å€¼(æˆ–ç±»ä¼¼çš„å€¼):1H e l l o , w o r l d !å¯¹äºécharç±»å‹ï¼Œåœ¨æ¯ä¸ªæ•°ç»„å…ƒç´ ä¹‹é—´æ”¾ä¸€ä¸ªç©ºæ ¼æ˜¯æœ‰æ„ä¹‰çš„ï¼Œè¿™æ ·å®ƒä»¬å°±ä¸ä¼šä¸€èµ·è¿è¡Œã€‚ä½†æ˜¯ï¼Œå¯¹äºcharç±»å‹ï¼Œæ‰“å°æ‰€æœ‰ä»¥cæ ·å¼å­—ç¬¦ä¸²è¿è¡Œçš„å†…å®¹æ›´æœ‰æ„ä¹‰ï¼Œè€Œæˆ‘ä»¬çš„print()å‡½æ•°å¹¶æ²¡æœ‰è¿™æ ·åšã€‚å¦‚ä½•ä¿®å¤?1ã€æ¨¡æ¿ä¸“é—¨åŒ–é¦–å…ˆè€ƒè™‘ä½¿ç”¨æ¨¡æ¿ä¸“é—¨åŒ–ã€‚å®Œå…¨æ¨¡æ¿ä¸“é—¨åŒ–çš„é—®é¢˜æ˜¯å¿…é¡»æ˜¾å¼å®šä¹‰æ‰€æœ‰æ¨¡æ¿å‚æ•°ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &lt;iostream&gt;#include &lt;cstring&gt; template &lt;class T, int size&gt; // size is the expression parameterclass StaticArray&#123;private: // The expression parameter controls the size of the array T m_array[size]&#123;&#125;; public: T* getArray() &#123; return m_array; &#125; T&amp; operator[](int index) &#123; return m_array[index]; &#125;&#125;; template &lt;typename T, int size&gt;void print(StaticArray&lt;T, size&gt; &amp;array)&#123; for (int count&#123; 0 &#125;; count &lt; size; ++count) std::cout &lt;&lt; array[count] &lt;&lt; ' ';&#125; // Override print() for fully specialized StaticArray&lt;char, 14&gt;// ä½¿ç”¨æ¨¡æ¿ä¸“é—¨åŒ–ï¼Œæ‰€ä»¥å¿…é¡»æ˜¾å¼çš„å®šä¹‰æ‰€æœ‰æ¨¡æ¿å‚æ•°ã€‚â­â­template &lt;&gt;void print(StaticArray&lt;char, 14&gt; &amp;array)&#123; for (int count&#123; 0 &#125;; count &lt; 14; ++count) std::cout &lt;&lt; array[count];&#125; int main()&#123; // declare a char array StaticArray&lt;char, 14&gt; char14&#123;&#125;; std::strcpy(char14.getArray(), \"Hello, world!\"); // Print the array print(char14); return 0;&#125;å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬ç°åœ¨ä¸ºå®Œå…¨ä¸“é—¨åŒ–çš„StaticArrayæä¾›äº†ä¸€ä¸ªé‡è½½çš„æ‰“å°å‡½æ•°ã€‚äº‹å®ä¸Š,è¿™ç§æ‰“å°:1Hello, world!æœ‰éšæ‚£è™½ç„¶è¿™è§£å†³äº†ä½¿ç”¨StaticArrayè°ƒç”¨print()çš„é—®é¢˜ï¼Œä½†å®ƒå¸¦æ¥äº†å¦ä¸€ä¸ªé—®é¢˜: ä½¿ç”¨å®Œæ•´çš„æ¨¡æ¿ä¸“é—¨åŒ–æ„å‘³ç€æˆ‘ä»¬å¿…é¡»æ˜¾å¼åœ°å®šä¹‰è¿™ä¸ªå‡½æ•°å°†æ¥å—çš„æ•°ç»„çš„é•¿åº¦! è€ƒè™‘ä¸‹é¢çš„ä¾‹å­:123456789101112int main()&#123; // declare a char array StaticArray&lt;char, 12&gt; char12&#123;&#125;; std::strcpy(char12.getArray(), \"Hello, mom!\"); // Print the array print(char12); return 0;&#125;ä½¿ç”¨char12è°ƒç”¨ print()å°†è°ƒç”¨ æ¥å—StaticArray&lt;T, size&gt;çš„print()ç‰ˆæœ¬ï¼Œå› ä¸ºchar12çš„ç±»å‹æ˜¯StaticArray&lt;char, 12&gt;ï¼Œè€Œæˆ‘ä»¬é‡è½½çš„print()åªæœ‰åœ¨ä¼ é€’StaticArray&lt;char, 14&gt;æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªprint()çš„å‰¯æœ¬æ¥å¤„ç†StaticArrayï¼Œä½†æ˜¯å½“æˆ‘ä»¬è°ƒç”¨æ•°ç»„å¤§å°ä¸º5æˆ–22çš„print()æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢?æˆ‘ä»¬éœ€è¦å¤åˆ¶æ¯ä¸ªä¸åŒæ•°ç»„å¤§å°çš„å‡½æ•°ã€‚è¿™æ˜¯å¤šä½™çš„ã€‚æ˜¾ç„¶ï¼Œå®Œå…¨æ¨¡æ¿ä¸“é—¨åŒ–åœ¨è¿™é‡Œæ˜¯ä¸€ç§é™åˆ¶æ€§å¤ªå¼ºçš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬æ­£åœ¨å¯»æ‰¾çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼šå±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–ã€‚2ã€å±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–â­â­â­å±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–å…è®¸æˆ‘ä»¬ä¸“é—¨åŒ–ç±»(ä½†ä¸æ˜¯å•ç‹¬çš„å‡½æ•°!)ï¼Œ å…¶ä¸­ä¸€äº›(ä½†ä¸æ˜¯æ‰€æœ‰)æ¨¡æ¿å‚æ•°å·²è¢«æ˜¾å¼å®šä¹‰ã€‚å¯¹äºä¸Šé¢çš„æŒ‘æˆ˜ï¼Œç†æƒ³çš„è§£å†³æ–¹æ¡ˆæ˜¯è®©é‡è½½çš„æ‰“å°å‡½æ•°ä½¿ç”¨charç±»å‹çš„StaticArrayï¼Œä½†ä¿ç•™é•¿åº¦è¡¨è¾¾å¼å‚æ•°æ¨¡æ¿ï¼Œä»¥ä¾¿æ ¹æ®éœ€è¦è¿›è¡Œæ›´æ”¹ã€‚å±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–å…è®¸æˆ‘ä»¬è¿™æ ·åš!ä¸‹é¢æ˜¯ä¸€ä¸ªé‡è½½æ‰“å°å‡½æ•°çš„ä¾‹å­ï¼Œå®ƒä½¿ç”¨äº†ä¸€ä¸ªéƒ¨åˆ†ä¸“é—¨åŒ–çš„StaticArray:1234567// print()å‡½æ•°çš„é‡è½½ï¼Œç”¨äºéƒ¨åˆ†ç‰¹æ®Šçš„StaticArray&lt;char, size&gt;template &lt;int size&gt; // sizeä»ç„¶æ˜¯ä¸€ä¸ªæ¨¡æ¿åŒ–çš„è¡¨è¾¾å¼å‚æ•°void print(StaticArray&lt;char, size&gt; &amp;array) // æˆ‘ä»¬åœ¨è¿™é‡Œæ˜¾å¼å®šä¹‰äº†charç±»å‹&#123; for (int count&#123; 0 &#125;; count &lt; size; ++count) std::cout &lt;&lt; array[count];&#125;æ­£å¦‚æ‚¨åœ¨è¿™é‡Œçœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å·²ç»æ˜ç¡®å£°æ˜è¿™ä¸ªå‡½æ•°åªé€‚ç”¨äºcharç±»å‹çš„StaticArrayï¼Œä½†æ˜¯sizeä»ç„¶æ˜¯ä¸€ä¸ªæ¨¡æ¿åŒ–çš„è¡¨è¾¾å¼å‚æ•°ï¼Œæ‰€ä»¥å®ƒé€‚ç”¨äºä»»ä½•å¤§å°çš„charæ•°ç»„ã€‚å°±æ˜¯è¿™æ ·!æ³¨æ„æ³¨æ„ï¼Œä»c++ 14å¼€å§‹ï¼Œéƒ¨åˆ†æ¨¡æ¿ä¸“é—¨åŒ–åªèƒ½ç”¨äºç±»ï¼Œè€Œä¸èƒ½ç”¨äºå‡½æ•°æ¨¡æ¿(å‡½æ•°å¿…é¡»å®Œå…¨ä¸“é—¨åŒ–)ã€‚æˆ‘ä»¬çš„void print(StaticArray &amp;array)ç¤ºä¾‹å¯ä»¥å·¥ä½œï¼Œå› ä¸ºprintå‡½æ•°ä¸æ˜¯éƒ¨åˆ†ä¸“é—¨åŒ–çš„(å®ƒåªæ˜¯ä½¿ç”¨äº†éƒ¨åˆ†ä¸“é—¨åŒ–çš„ç±»å‚æ•°çš„é‡è½½å‡½æ•°)ã€‚æˆå‘˜å‡½æ•°çš„å±€éƒ¨æ¨¡æ¿ä¸“é—¨åŒ–å‡½æ•°æ¨¡æ¿ä¸èƒ½å±€éƒ¨ä¸“é—¨åŒ–åœ¨å¤„ç†æˆå‘˜å‡½æ•°æ—¶ï¼Œå¯¹å‡½æ•°å±€éƒ¨ä¸“é—¨åŒ–çš„é™åˆ¶å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æŒ‘æˆ˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åƒè¿™æ ·å®šä¹‰StaticArrayå‘¢?12345678910111213141516171819202122template &lt;class T, int size&gt; // size is the expression parameterclass StaticArray&#123;private: // The expression parameter controls the size of the array T m_array[size]&#123;&#125;; public: T* getArray() &#123; return m_array; &#125; T&amp; operator[](int index) &#123; return m_array[index]; &#125; void print() &#123; for (int i&#123; 0 &#125;; i &lt; size; ++i) std::cout &lt;&lt; m_array[i] &lt;&lt; ' '; std::cout &lt;&lt; '\\n'; &#125;&#125;;print()ç°åœ¨æ˜¯ StaticArray&lt;T, int&gt;ç±»çš„æˆå‘˜å‡½æ•°ã€‚é‚£ä¹ˆï¼Œå½“æˆ‘ä»¬æƒ³è¦ éƒ¨åˆ†ä¸“é—¨åŒ–print()ä»¥ä½¿å…¶å·¥ä½œæ–¹å¼ä¸åŒæ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢?ä½ å¯ä»¥è¯•è¯•è¿™ä¸ª:12345678// Doesn't worktemplate &lt;int size&gt;void StaticArray&lt;double, size&gt;::print()&#123; for (int i&#123; 0 &#125;; i &lt; size; ++i) std::cout &lt;&lt; std::scientific &lt;&lt; m_array[i] &lt;&lt; ' '; std::cout &lt;&lt; '\\n';&#125;ä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸èµ·ä½œç”¨ï¼Œå› ä¸ºæˆ‘ä»¬è¯•å›¾éƒ¨åˆ†ä¸“é—¨åŒ–ä¸€ä¸ªå‡½æ•°ï¼Œè¿™æ˜¯ä¸å…è®¸çš„ã€‚è®©æ•´ä¸ªç±»éƒ¨åˆ†ä¸“é—¨åŒ–é‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢?ä¸€ä¸ªæ˜æ˜¾çš„æ–¹æ³•æ˜¯è®©æ•´ä¸ªç±»éƒ¨åˆ†ä¸“é—¨åŒ–:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768#include&lt;iostream&gt; template &lt;class T, int size&gt; // size is the expression parameterclass StaticArray&#123;private: // The expression parameter controls the size of the array T m_array[size]&#123;&#125;; public: T* getArray() &#123; return m_array; &#125; T&amp; operator[](int index) &#123; return m_array[index]; &#125; void print() &#123; for (int i&#123; 0 &#125;; i &lt; size; ++i) std::cout &lt;&lt; m_array[i] &lt;&lt; ' '; std::cout &lt;&lt; \"\\n\"; &#125;&#125;; //å±€éƒ¨ä¸“é—¨åŒ– æ•´ä¸ªç±»template &lt;int size&gt; // size is the expression parameterclass StaticArray&lt;double, size&gt;&#123;private: // The expression parameter controls the size of the array double m_array[size]&#123;&#125;; public: double* getArray() &#123; return m_array; &#125; double&amp; operator[](int index) &#123; return m_array[index]; &#125; void print() &#123; for (int i&#123; 0 &#125;; i &lt; size; ++i) std::cout &lt;&lt; std::scientific &lt;&lt; m_array[i] &lt;&lt; ' '; std::cout &lt;&lt; '\\n'; &#125;&#125;; int main()&#123; // declare an integer array with room for 6 integers StaticArray&lt;int, 6&gt; intArray&#123;&#125;; // Fill it up in order, then print it for (int count&#123; 0 &#125;; count &lt; 6; ++count) intArray[count] = count; intArray.print(); // declare a double buffer with room for 4 doubles StaticArray&lt;double, 4&gt; doubleArray&#123;&#125;; for (int count&#123; 0 &#125;; count &lt; 4; ++count) doubleArray[count] = (4.0 + 0.1 * count); doubleArray.print(); return 0;&#125;è™½ç„¶å®ƒå¯ä»¥å·¥ä½œï¼Œä½†è¿™ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»å¤åˆ¶å¾ˆå¤šä»£ç ï¼Œä»StaticArray&lt;T, size&gt;è‡³ StaticArray&lt;double, size&gt;ä½¿ç”¨ä¸€ä¸ªå…¬å…±åŸºç±»ï¼Œä½¿æ´¾ç”Ÿç±»æ¨¡æ¿å±€éƒ¨ä¸“é—¨åŒ–â­â­â­å¦‚æœæœ‰åŠæ³•åœ¨StaticArray&lt;double, size&gt;ä¸­ é‡ç”¨StaticArray&lt;T, size&gt;ä¸­çš„ä»£ç  ã€‚å¬èµ·æ¥åƒæ˜¯ç»§æ‰¿çš„å·¥ä½œ!å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªå˜é€šæ–¹æ³•ï¼Œé€šè¿‡ä½¿ç”¨ä¸€ä¸ªå…¬å…±åŸºç±»:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869#include&lt;iostream&gt; template &lt;class T, int size&gt; // sizeæ˜¯è¡¨è¾¾å¼å‚æ•°class StaticArray_Base //åŸºç±»â­&#123;protected: // The expression parameter controls the size of the array T m_array[size]&#123;&#125;; public: T* getArray() &#123; return m_array; &#125; T&amp; operator[](int index) &#123; return m_array[index]; &#125; virtual void print() &#123; for (int i&#123; 0 &#125;; i &lt; size; ++i) std::cout &lt;&lt; m_array[i]; std::cout &lt;&lt; '\\n'; &#125; virtual ~StaticArray_Base() = default;&#125;; //æ´¾ç”Ÿç±»1â­template &lt;class T, int size&gt; // size is the expression parameterclass StaticArray: public StaticArray_Base&lt;T, size&gt; &#123;public:&#125;; //æ´¾ç”Ÿç±»2â­template &lt;int size&gt; // size is the expression parameterclass StaticArray&lt;double, size&gt;: public StaticArray_Base&lt;double, size&gt; //æ³¨æ„è¿™é‡Œçš„æ ¼å¼â­&#123;public: virtual void print() override &#123; for (int i&#123; 0 &#125;; i &lt; size; ++i) std::cout &lt;&lt; std::scientific &lt;&lt; this-&gt;m_array[i] &lt;&lt; ' ';// note: The this-&gt; prefix in the above line is needed.// See https://stackoverflow.com/a/6592617 or https://isocpp.org/wiki/faq/templates#nondependent-name-lookup-members for more info on why. std::cout &lt;&lt; '\\n'; &#125;&#125;; int main()&#123; // declare an integer array with room for 6 integers StaticArray&lt;int, 6&gt; intArray&#123;&#125;; // Fill it up in order, then print it for (int count&#123; 0 &#125;; count &lt; 6; ++count) intArray[count] = count; intArray.print(); // declare a double buffer with room for 4 doubles StaticArray&lt;double, 4&gt; doubleArray&#123;&#125;; for (int count&#123; 0 &#125;; count &lt; 4; ++count) doubleArray[count] = (4.0 + 0.1 * count); doubleArray.print(); return 0;&#125;è¿™ä¸ä¸Šé¢çš„è¾“å‡ºç›¸åŒï¼Œä½†æ˜¯å…·æœ‰æ˜æ˜¾è¾ƒå°‘çš„é‡å¤ä»£ç ã€‚","categories":[],"tags":[]},{"title":"C&C++/ç±»æ¨¡æ¿å®šåˆ¶","slug":"C&C++/ç±»æ¨¡æ¿å®šåˆ¶","date":"2020-05-17T00:16:04.321Z","updated":"2020-05-17T02:15:15.139Z","comments":true,"path":"archives/dad59d93.html","link":"","permalink":"https://longlongqin.github.io/archives/dad59d93.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/136-class-template-specialization/çœ‹ä¸€ä¸ªä¾‹å­ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344#include &lt;iostream&gt;template &lt;class T&gt;class Storage8&#123;private: T m_array[8];public: void set(int index, const T value) &#123; m_array[index] = value; &#125; const T&amp; get(int index) &#123; return m_array[index]; &#125;&#125;;int main()&#123; Storage8&lt;int&gt; intStorage; for (int count = 0; count &lt; 8; ++count) intStorage.set(count, count + 1); for (int count = 0; count &lt; 8; ++count) std::cout &lt;&lt; intStorage.get(count) &lt;&lt; '\\t'; std::cout &lt;&lt; '\\n'; Storage8&lt;bool&gt; boolStorage; for (int count = 0; count &lt; 8; ++count) boolStorage.set(count, count &amp; 3); for (int count = 0; count &lt; 8; ++count) std::cout &lt;&lt; (boolStorage.get(count) ? \"true\" : \"false\") &lt;&lt; '\\t'; return 0;&#125;/*ç»“æœ*/1 2 3 4 5 6 7 8false true true true false true true trueè™½ç„¶è¿™ä¸ªç±»æ˜¯å®Œå…¨åŠŸèƒ½æ€§çš„ï¼Œä½†äº‹å®è¯æ˜Storage8çš„å®ç°æ¯”å®ƒéœ€è¦çš„æ•ˆç‡è¦ä½å¾—å¤šã€‚å› ä¸ºæ‰€æœ‰çš„å˜é‡éƒ½å¿…é¡»æœ‰ä¸€ä¸ªåœ°å€ï¼Œå¹¶ä¸”CPUä¸èƒ½å¯»å€ä»»ä½•å°äºä¸€ä¸ªå­—èŠ‚çš„ä¸œè¥¿ï¼Œæ‰€ä»¥æ‰€æœ‰çš„å˜é‡éƒ½å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªå­—èŠ‚çš„å¤§å°ã€‚å­˜å‚¨boolç±»å‹çš„å˜é‡æ—¶æµªè´¹ç©ºé—´ï¼šå› æ­¤ï¼Œboolç±»å‹çš„å˜é‡æœ€ç»ˆä½¿ç”¨æ•´ä¸ªå­—èŠ‚ï¼Œå³ä½¿ä»æŠ€æœ¯ä¸Šè®²ï¼Œå®ƒåªéœ€è¦ä¸€ä¸ªä½æ¥å­˜å‚¨å®ƒçš„çœŸå€¼æˆ–å‡å€¼! å› æ­¤ï¼Œboolæ˜¯1ä½æœ‰ç”¨çš„ä¿¡æ¯å’Œ7ä½æµªè´¹çš„ç©ºé—´ã€‚æˆ‘ä»¬çš„ Storage8&lt;bool&gt;ç±»ï¼Œå…¶ä¸­åŒ…å«8ä¸ªboolsï¼Œå³1ä¸ªå­—èŠ‚çš„æœ‰ç”¨ä¿¡æ¯ å’Œ7ä¸ªå­—èŠ‚çš„æµªè´¹ç©ºé—´ã€‚å¦‚ä½•è§£å†³ï¼Ÿ1ã€è™½ç„¶æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç±»æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯è¿™æ ·åšæœ‰ä¸€ä¸ªä¸»è¦çš„ç¼ºç‚¹ï¼šæˆ‘ä»¬å¿…é¡»ç»™å®ƒèµ·ä¸€ä¸ªä¸åŒçš„åå­—ã€‚ç„¶åç¨‹åºå‘˜å¿…é¡»è®°ä½Storage8æ˜¯ç”¨äºéboolç±»å‹çš„ï¼Œè€ŒStorage8Bool(æˆ–è€…æˆ‘ä»¬ç»™æ–°ç±»èµ·çš„ä»»ä½•åå­—)æ˜¯ç”¨äºboolsçš„ã€‚æˆ‘ä»¬å®æ„¿é¿å…ä¸å¿…è¦çš„å¤æ‚æ€§ã€‚å¹¸è¿çš„æ˜¯ï¼Œc++ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•:ç±»æ¨¡æ¿ä¸“é—¨åŒ–ã€‚2ã€å¹¸è¿çš„æ˜¯ï¼Œc++ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ï¼šç±»æ¨¡æ¿ä¸“é—¨åŒ–(Class template specialization)ã€‚ç±»æ¨¡æ¿ä¸“é—¨åŒ–ç±»æ¨¡æ¿ä¸“é—¨ åŒ–å…è®¸æˆ‘ä»¬ ä¸“é—¨åŒ–ç‰¹å®šæ•°æ®ç±»å‹ (æˆ–æ•°æ®ç±»å‹ï¼Œå¦‚æœæœ‰å¤šä¸ªæ¨¡æ¿å‚æ•°) çš„æ¨¡æ¿ç±»ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç±»æ¨¡æ¿ä¸“é—¨åŒ–æ¥ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰ç‰ˆæœ¬çš„Storage8ï¼Œå®ƒå°†ä¼˜å…ˆäºé€šç”¨çš„Storage8ç±»ã€‚è¿™ç±»ä¼¼äºä¸“é—¨åŒ–å‡½æ•°ä¼˜å…ˆäºæ³›å‹æ¨¡æ¿å‡½æ•°ã€‚ç±»æ¨¡æ¿ä¸“é—¨åŒ–è¢«è§†ä¸ºå®Œå…¨ç‹¬ç«‹çš„ç±»ï¼Œå³ä½¿å®ƒä»¬æ˜¯ä»¥ä¸æ¨¡æ¿ç±»ç›¸åŒçš„æ–¹å¼åˆ†é…çš„ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ”¹å˜å…³äºä¸“é—¨åŒ–ç±»çš„ä»»ä½•äº‹æƒ…ï¼ŒåŒ…æ‹¬å®ƒçš„å®ç°æ–¹å¼ï¼Œç”šè‡³å®ƒå…¬å¼€çš„å‡½æ•°ï¼Œå°±å¥½åƒå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç±»ä¸€æ ·ã€‚è¿™æ˜¯æˆ‘ä»¬çš„ä¸“é—¨åŒ–ç±»:123456789101112131415161718192021222324252627282930313233 template &lt;&gt; // ä¸‹é¢æ˜¯ä¸€ä¸ª æ— å‚æ•°æ¨¡æ¿ çš„æ¨¡æ¿ç±»class Storage8&lt;bool&gt; // we're specializing Storage8 for bool&#123;// What follows is just standard class implementation detailsprivate: unsigned char m_data; public: Storage8() : m_data(0) &#123; &#125; void set(int index, bool value) &#123; // æ‰¾å‡ºæˆ‘ä»¬æ­£åœ¨è®¾ç½®/å–æ¶ˆè®¾ç½®çš„ä½ // è¿™å°†åœ¨æˆ‘ä»¬æ„Ÿå…´è¶£çš„ bitåŠ 1 unsigned char mask = 1 &lt;&lt; index; if (value) // If we're setting a bit m_data |= mask; // Use bitwise-or to turn that bit on else // if we're turning a bit off m_data &amp;= ~mask; // bitwise-and the inverse mask to turn that bit off &#125; bool get(int index) &#123; // Figure out which bit we're getting unsigned char mask = 1 &lt;&lt; index; // bitwise-and to get the value of the bit we're interested in // Then implicit cast to boolean return (m_data &amp; mask); &#125;&#125;;é¦–å…ˆï¼Œæ³¨æ„æˆ‘ä»¬ä»template&lt;&gt;å¼€å§‹ã€‚templateå…³é”®å­— å‘Šè¯‰ç¼–è¯‘å™¨ä¸‹é¢çš„å†…å®¹æ˜¯æ¨¡æ¿åŒ–çš„ï¼Œè€Œç©ºå°–æ‹¬å·è¡¨ç¤ºæ²¡æœ‰ä»»ä½•æ¨¡æ¿å‚æ•°ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæ²¡æœ‰ä»»ä½•æ¨¡æ¿å‚æ•°ï¼Œå› ä¸ºæˆ‘ä»¬ç”¨ç‰¹å®šçš„ç±»å‹(bool)æ›¿æ¢äº†å”¯ä¸€çš„æ¨¡æ¿å‚æ•°(typename T)ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†&lt;bool&gt;æ·»åŠ åˆ°ç±»åä¸­ï¼Œä»¥è¡¨ç¤ºæˆ‘ä»¬æ­£åœ¨ä¸“é—¨åŒ– Storage8ç±» çš„ boolç‰ˆæœ¬ã€‚æ‰€æœ‰å…¶ä»–æ›´æ”¹éƒ½åªæ˜¯ç±»å®ç°ç»†èŠ‚ã€‚ä¸ºäº†ä½¿ç”¨è¿™ä¸ªç±»ï¼Œæ‚¨ä¸éœ€è¦äº†è§£ä½é€»è¾‘æ˜¯å¦‚ä½•å·¥ä½œçš„(å¦‚æœæ‚¨æƒ³äº†è§£å®ƒï¼Œå¯ä»¥å¤ä¹  O.2 â€“ Bitwise operatorsï¼Œä½†æ˜¯éœ€è¦å¤ä¹ ä¸€ä¸‹ä½è¿ç®—ç¬¦æ˜¯å¦‚ä½•å·¥ä½œçš„)ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªä¸“é—¨åŒ–ç±»ä½¿ç”¨ä¸€ä¸ªæ— ç¬¦å·å­—ç¬¦(1å­—èŠ‚)ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª8ä¸ªbools(8å­—èŠ‚)çš„æ•°ç»„ã€‚","categories":[],"tags":[]},{"title":"C&C++/å‡½æ•°æ¨¡æ¿å®šåˆ¶","slug":"C&C++/å‡½æ•°æ¨¡æ¿å®šåˆ¶","date":"2020-05-16T14:43:17.235Z","updated":"2020-05-16T15:47:26.643Z","comments":true,"path":"archives/9a78acc3.html","link":"","permalink":"https://longlongqin.github.io/archives/9a78acc3.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/13-5-function-template-specialization/å½“ä¸ºç»™å®šç±»å‹å®ä¾‹åŒ–å‡½æ•°æ¨¡æ¿æ—¶ï¼Œç¼–è¯‘å™¨å°†è¾“å‡ºæ¨¡æ¿å‡½æ•°çš„å‰¯æœ¬ï¼Œå¹¶å°†æ¨¡æ¿ç±»å‹å‚æ•°æ›¿æ¢ä¸ºå˜é‡å£°æ˜ä¸­ä½¿ç”¨çš„å®é™…ç±»å‹ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°å¯¹äºæ¯ä¸ªå®ä¾‹ç±»å‹éƒ½æœ‰ç›¸åŒçš„å®ç°ç»†èŠ‚(åªæ˜¯ä½¿ç”¨ä¸åŒçš„ç±»å‹)ã€‚è™½ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ­£æ˜¯æ‚¨æƒ³è¦çš„ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸ºç‰¹å®šçš„æ•°æ®ç±»å‹å®ç°ç•¥æœ‰ä¸åŒçš„æ¨¡æ¿å‡½æ•°æ˜¯æœ‰ç”¨çš„ã€‚æˆå‘˜å‡½æ•°æ¨¡æ¿çš„å®šåˆ¶å‡½æ•°æ¨¡æ¿ä¸“å®šåˆ¶ (æœ‰æ—¶ç§°ä¸ºå®Œæ•´æˆ–æ˜¾å¼å‡½æ•°æ¨¡æ¿ä¸“é—¨åŒ–)ï¼Œå®ç°æ­¥éª¤æ¯”è¾ƒç®€å•ï¼šåªéœ€å®šä¹‰ä¸“é—¨çš„å‡½æ•° (å¦‚æœè¯¥å‡½æ•°æ˜¯æˆå‘˜å‡½æ•°ï¼Œåˆ™åœ¨ç±»å®šä¹‰ä¹‹å¤–å®šä¹‰)ï¼Œå°†æ¨¡æ¿ç±»å‹æ›¿æ¢ä¸ºæ‚¨å¸Œæœ›ä¸ºå…¶é‡æ–°å®šä¹‰å‡½æ•°çš„ç‰¹å®šç±»å‹ã€‚ä¾‹å­1ï¼š12345678910111213141516171819202122232425262728293031template &lt;class T&gt;class Storage&#123;private: T m_value;public: Storage(T value) &#123; m_value = value; &#125; ~Storage() &#123; &#125; void print() &#123; std::cout &lt;&lt; m_value &lt;&lt; '\\n'; &#125;&#125;;int main()&#123; // Define some storage units Storage&lt;int&gt; nValue(5); Storage&lt;double&gt; dValue(6.7); // Print out some values nValue.print(); dValue.print();&#125;å¦‚æœæ­¤æ—¶ï¼Œä½ æƒ³è®©æµ®ç‚¹ç±»å‹çš„æ•°ä»¥ ç§‘å­¦è®¡æ•°æ³• çš„å½¢å¼æ‰“å°ï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿâ€”â€”åº”è¯¥ä½¿ç›¸åº”çš„æ‰“å°å‡½æ•°ç‰¹æ®ŠåŒ–ï¼š12345template &lt;&gt; //â­â­ æ³¨æ„è¿™é‡Œæ²¡æœ‰ æ¨¡æ¿ç±»å‹å‚æ•°void Storage&lt;double&gt;::print() //æ˜¾å¼çš„å°†æ¨¡æ¿ç±»å‹ æ›¿æ¢ä¸º æˆ‘æƒ³è¦çš„ç±»å‹&#123; std::cout &lt;&lt; std::scientific &lt;&lt; m_value &lt;&lt; '\\n'; //å‡½æ•°ä¸»ä½“ä¹Ÿä¿®æ”¹äº†&#125;å½“ç¼–è¯‘å™¨å®ä¾‹åŒ–Storage&lt;double&gt;::print()æ—¶ï¼Œå®ƒä¼šçœ‹åˆ°æˆ‘ä»¬å·²ç»æ˜¾å¼åœ°å®šä¹‰äº†é‚£ä¸ªå‡½æ•°ï¼Œå®ƒå°†ä½¿ç”¨æˆ‘ä»¬å®šä¹‰çš„é‚£ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯ä»æ³›å‹æ¨¡æ¿ç±»ä¸­è¾“å‡ºä¸€ä¸ªç‰ˆæœ¬ã€‚template &lt;&gt;å‘Šè¯‰ç¼–è¯‘å™¨è¿™æ˜¯ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œä½†æ˜¯æ²¡æœ‰æ¨¡æ¿å‚æ•° (å› ä¸ºåœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬æ˜¾å¼åœ°æŒ‡å®šäº†æ‰€æœ‰ç±»å‹)ã€‚ä¸€äº›ç¼–è¯‘å™¨å¯èƒ½å…è®¸æ‚¨çœç•¥å®ƒï¼Œä½†æ˜¯æœ€å¥½åŒ…æ‹¬å®ƒã€‚ä¾‹å­2ï¼šç°åœ¨è®©æˆ‘ä»¬çœ‹å¦ä¸€ä¸ªæ¨¡æ¿ä¸“é—¨åŒ–å¯èƒ½æœ‰ç”¨çš„ä¾‹å­ã€‚è€ƒè™‘ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•ä½¿ç”¨å¸¦æœ‰æ•°æ®ç±»å‹char*çš„æ¨¡æ¿åŒ– Storageç±»ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆ:123456789101112131415161718int main()&#123; // ï¼šåŠ¨æ€åˆ†é…ä¸€ä¸ªä¸´æ—¶å­—ç¬¦ä¸² char *string = new char[40]; // Ask user for their name std::cout &lt;&lt; \"Enter your name: \"; std::cin &gt;&gt; string; // Store the name Storage&lt;char*&gt; storage(string); // Delete the temporary string delete[] string; // Print out our value storage.print(); // This will print garbage&#125;ç»“æœæ˜¾ç¤ºï¼Œä¸æ‰“å°ç”¨æˆ·è¾“å…¥çš„åç§°ä¸åŒï¼Œstorage.print()æ‰“å°çš„æ˜¯åƒåœ¾! è¿™æ˜¯æ€ä¹ˆå›äº‹?å®ä¾‹åŒ–charç±»å‹çš„Storageæ—¶ï¼ŒStorage&lt;char\\&gt;çš„æ„é€ å‡½æ•°å¦‚ä¸‹:12345template &lt;&gt;Storage&lt;char*&gt;::Storage(char* value)&#123; m_value = value;&#125;æ¢å¥è¯è¯´ï¼Œè¿™åªæ˜¯åšä¸€ä¸ªæŒ‡é’ˆèµ‹å€¼(æµ…æ‹·è´)! ç»“æœï¼Œm_valueæœ€ç»ˆæŒ‡å‘ä¸stringç›¸åŒçš„å†…å­˜ä½ç½®ã€‚å½“æˆ‘ä»¬åˆ é™¤main()ä¸­çš„å­—ç¬¦ä¸²æ—¶ï¼Œæˆ‘ä»¬æœ€ç»ˆä¼šåˆ é™¤m_valueæŒ‡å‘çš„å€¼!å› æ­¤ï¼Œå½“æˆ‘ä»¬è¯•å›¾æ‰“å°é‚£ä¸ªå€¼æ—¶ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°åƒåœ¾ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¨¡æ¿ä¸“é—¨åŒ–æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å¸Œæœ›æ„é€ å‡½æ•°å¤åˆ¶è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯å¤åˆ¶æŒ‡é’ˆã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬ä¸ºæ•°æ®ç±»å‹char*ç¼–å†™ä¸€ä¸ªä¸“é—¨çš„æ„é€ å‡½æ•°ï¼š1234567891011121314template &lt;&gt; //â­â­â­Storage&lt;char*&gt;::Storage(char* value)&#123; //æ±‚valueçš„é•¿åº¦ int length = 0; while(value[length] != '\\0') ++length; ++length; //+1 è¡¨ç¤ºç©ºç»ˆæ­¢ç¬¦ //åˆ†é…å†…å­˜æ¥ä¿å­˜ valueå­—ç¬¦ä¸² m_value = new char[length]; for(int count=0; count &lt; length; ++count) //å°†å®é™…çš„valueå­—ç¬¦ä¸²å¤åˆ¶åˆ°æˆ‘ä»¬åˆšåˆšåˆ†é…çš„m_valueå†…å­˜ä¸­ m_value[count] = value[count];&#125;ç°åœ¨ï¼Œå½“æˆ‘ä»¬åˆ†é…ä¸€ä¸ª Storage&lt;char*&gt;ç±»å‹çš„å˜é‡æ—¶ï¼Œå°†ä½¿ç”¨è¿™ä¸ªæ„é€ å‡½æ•°è€Œä¸æ˜¯é»˜è®¤çš„æ„é€ å‡½æ•°ã€‚ç»“æœï¼Œm_valueå°†æ”¶åˆ°å®ƒè‡ªå·±çš„å­—ç¬¦ä¸²å‰¯æœ¬ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬åˆ é™¤å­—ç¬¦ä¸²æ—¶ï¼Œm_valueå°†ä¸å—å½±å“ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªç±»ç°åœ¨å­˜åœ¨ char*ç±»å‹çš„å†…å­˜æ³„æ¼ï¼Œå› ä¸ºå½“å­˜å‚¨å˜é‡è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œm_valueä¸ä¼šè¢«åˆ é™¤ã€‚ä½ å¯èƒ½å·²ç»çŒœåˆ°äº†ï¼Œè¿™ä¹Ÿå¯ä»¥é€šè¿‡ä¸“é—¨åŒ– Storage&lt;char*&gt;ææ„å‡½æ•°:12345template &lt;&gt;Storage&lt;char*&gt;::~Storage()&#123; delete[] m_value; &#125;ç°åœ¨ï¼Œå½“Storageç±»å‹çš„å˜é‡è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œåœ¨ ä¸“ç”¨æ„é€ å‡½æ•°ä¸­åˆ†é…çš„å†…å­˜å°†åœ¨ ä¸“ç”¨ææ„å‡½æ•°ä¸­åˆ é™¤ã€‚éæˆå‘˜å‡½æ•°æ¨¡æ¿çš„å®šåˆ¶å°½ç®¡ä¸Šé¢çš„ä¾‹å­éƒ½ä½¿ç”¨äº†æˆå‘˜å‡½æ•°ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•ä¸“é—¨åŒ–éæˆå‘˜æ¨¡æ¿å‡½æ•°ã€‚","categories":[],"tags":[]},{"title":"C&C++/éç±»å‹å‚æ•°æ¨¡æ¿","slug":"C&C++/éç±»å‹å‚æ•°æ¨¡æ¿","date":"2020-05-16T14:20:10.932Z","updated":"2020-05-16T14:41:46.683Z","comments":true,"path":"archives/388fba4a.html","link":"","permalink":"https://longlongqin.github.io/archives/388fba4a.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/134-template-non-type-parameters/åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæ‚¨å·²ç»å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ æ¨¡æ¿ç±»å‹å‚æ•° æ¥åˆ›å»ºä¸ç±»å‹æ— å…³çš„å‡½æ•°å’Œç±»ã€‚ç„¶è€Œï¼Œæ¨¡æ¿ç±»å‹å‚æ•°å¹¶ä¸æ˜¯å”¯ä¸€å¯ç”¨çš„æ¨¡æ¿å‚æ•°ç±»å‹ã€‚æ¨¡æ¿ç±»å’Œå‡½æ•°å¯ä»¥ä½¿ç”¨å¦ä¸€ç§ç§°ä¸ºéç±»å‹å‚æ•°æ¨¡æ¿çš„å‚æ•°ã€‚éç±»å‹å‚æ•°éç±»å‹å‚æ•°æ¨¡æ¿æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å‚æ•°ï¼Œå®ƒä¸æ›¿æ¢ç±»å‹ï¼Œè€Œæ˜¯ç”±å€¼æ›¿æ¢ã€‚éç±»å‹å‚æ•°å¯ä»¥æ˜¯ä»¥ä¸‹ä»»æ„ä¸€ç§:å…·æœ‰æ•´å‹æˆ–æšä¸¾çš„å€¼æŒ‡å‘ç±»å¯¹è±¡çš„æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘ç±»æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆæˆ–å¼•ç”¨std::nullptr_tä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åˆ›å»ºç±»ä¸€ä¸ªé™æ€æ•°ç»„ï¼Œä½¿ç”¨äº†ä¸¤ä¸ª ç±»å‹å‚æ•°ï¼šä¸€ä¸ªæ˜¯ï¼šç±»å‹å‚æ•°ã€‚å®ƒæ§åˆ¶é™æ€æ•°ç»„çš„æ•°æ®ç±»å‹ã€‚ä¸€ä¸ªæ˜¯ï¼šéç±»å‹å‚æ•°ã€‚ä»–æ§åˆ¶é™æ€æ•°ç»„çš„é•¿åº¦ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include &lt;iostream&gt; template &lt;class T, int size&gt; // sizeæ˜¯éç±»å‹å‚æ•°class StaticArray&#123;private: // éç±»å‹å‚æ•°æ§åˆ¶æ•°ç»„çš„é•¿åº¦ T m_array[size]; public: T* getArray(); T&amp; operator[](int index) &#123; return m_array[index]; &#125;&#125;; // è¯´æ˜å¦‚ä½•åœ¨ç±»å¤–éƒ¨å®šä¹‰å…·æœ‰éç±»å‹å‚æ•°çš„ç±»çš„å‡½æ•° â­â­â­template &lt;class T, int size&gt;T* StaticArray&lt;T, size&gt;::getArray()&#123; return m_array;&#125; int main()&#123; //â­ declare an integer array with room for 12 integers StaticArray&lt;int, 12&gt; intArray; // Fill it up in order, then print it backwards for (int count=0; count &lt; 12; ++count) intArray[count] = count; for (int count=11; count &gt;= 0; --count) std::cout &lt;&lt; intArray[count] &lt;&lt; \" \"; std::cout &lt;&lt; '\\n'; //â­ declare a double buffer with room for 4 doubles StaticArray&lt;double, 4&gt; doubleArray; for (int count=0; count &lt; 4; ++count) doubleArray[count] = 4.4 + 0.1*count; for (int count=0; count &lt; 4; ++count) std::cout &lt;&lt; doubleArray[count] &lt;&lt; ' '; return 0;&#125;ç»“æœï¼š1211 10 9 8 7 6 5 4 3 2 1 04.4 4.5 4.6 4.7å…³äºä¸Šé¢çš„ä¾‹å­ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯æˆ‘ä»¬ä¸éœ€è¦åŠ¨æ€åˆ†é…m_arrayæˆå‘˜å˜é‡!è¿™æ˜¯å› ä¸ºå¯¹äºStaticArrayç±» çš„ä»»ä½•ç»™å®šå®ä¾‹ï¼Œsizeå®é™…ä¸Šéƒ½æ˜¯å¸¸é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå®ä¾‹åŒ–ä¸ºï¼šStaticArray&lt;int, 12&gt;ï¼Œç¼–è¯‘å™¨å°†å¤§å°æ›¿æ¢ä¸º12ã€‚å› æ­¤m_arrayçš„ç±»å‹æ˜¯int[12]ï¼Œå¯ä»¥é™æ€åˆ†é…ã€‚æ ‡å‡†åº“ç±»std::arrayå°±æ˜¯ç”¨çš„è¿™ä¸ªåŠŸèƒ½ã€‚å½“æ‚¨åˆ†é…ä¸€ä¸ªstd::arrayæ—¶ï¼Œintæ˜¯ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œè€Œ5æ˜¯ä¸€ä¸ªéç±»å‹å‚æ•°!","categories":[],"tags":[]},{"title":"C&C++/æ¨¡æ¿ç±»","slug":"C&C++/æ¨¡æ¿ç±»","date":"2020-05-16T08:55:47.873Z","updated":"2020-05-16T10:43:54.333Z","comments":true,"path":"archives/3bfe5978.html","link":"","permalink":"https://longlongqin.github.io/archives/3bfe5978.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/133-template-classes/åœ¨10.6 â€“ Container classesä¸­ï¼Œæ‚¨å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨å¤åˆæ¥å®ç°åŒ…å«å…¶ä»–ç±»çš„å¤šä¸ªå®ä¾‹çš„ç±»ã€‚ä½œä¸ºè¿™ç§å®¹å™¨çš„ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†IntArrayç±»ã€‚ä¸‹é¢æ˜¯è¯¥ç±»çš„ä¸€ä¸ªç®€åŒ–ç¤ºä¾‹:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#ifndef INTARRAY_H#define INTARRAY_H #include &lt;cassert&gt; class IntArray&#123;private: int m_length&#123;&#125;; int *m_data&#123;&#125;; public: IntArray(int length) &#123; assert(length &gt; 0); m_data = new int[length]&#123;&#125;; m_length = length; &#125; // We don't want to allow copies of IntArray to be created. IntArray(const IntArray&amp;) = delete; IntArray&amp; operator=(const IntArray&amp;) = delete; ~IntArray() &#123; delete[] m_data; &#125; void Erase() &#123; delete[] m_data; // We need to make sure we set m_data to 0 here, otherwise it will // be left pointing at deallocated memory! m_data = nullptr; m_length = 0; &#125; int&amp; operator[](int index) &#123; assert(index &gt;= 0 &amp;&amp; index &lt; m_length); return m_data[index]; &#125; int getLength() const &#123; return m_length; &#125;&#125;; #endifè™½ç„¶è¿™ä¸ªç±»æä¾›äº†ä¸€ç§åˆ›å»ºæ•´æ•°æ•°ç»„çš„ç®€å•æ–¹æ³•ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªåŒç²¾åº¦æ•°ç»„å‘¢?ä½¿ç”¨ä¼ ç»Ÿçš„ç¼–ç¨‹æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç±»!ä¸‹é¢æ˜¯DoubleArrayçš„ä¸€ä¸ªä¾‹å­ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ç±»ï¼Œç”¨äºä¿å­˜doubleã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#ifndef DOUBLEARRAY_H#define DOUBLEARRAY_H #include &lt;cassert&gt; class DoubleArray&#123;private: int m_length&#123;&#125;; double *m_data&#123;&#125;; public: DoubleArray(int length) &#123; assert(length &gt; 0); m_data = new double[length]&#123;&#125;; m_length = length; &#125; DoubleArray(const DoubleArray&amp;) = delete; DoubleArray&amp; operator=(const DoubleArray&amp;) = delete; ~DoubleArray() &#123; delete[] m_data; &#125; void Erase() &#123; delete[] m_data; // We need to make sure we set m_data to 0 here, otherwise it will // be left pointing at deallocated memory! m_data = nullptr; m_length = 0; &#125; double&amp; operator[](int index) &#123; assert(index &gt;= 0 &amp;&amp; index &lt; m_length); return m_data[index]; &#125; int getLength() const &#123; return m_length; &#125;&#125;; #endifå°½ç®¡ä»£ç æ¸…å•å¾ˆé•¿ï¼Œä½†æ‚¨ä¼šæ³¨æ„åˆ°è¿™ä¸¤ä¸ªç±»å‡ ä¹å®Œå…¨ç›¸åŒ!å®é™…ä¸Šï¼ŒæƒŸä¸€çš„å®è´¨æ€§åŒºåˆ«æ˜¯æ‰€åŒ…å«çš„æ•°æ®ç±»å‹(intå’Œdouble)ã€‚æ‚¨å¯èƒ½å·²ç»çŒœåˆ°äº†ï¼Œè¿™æ˜¯å¦ä¸€ä¸ªå¯ä»¥å……åˆ†åˆ©ç”¨æ¨¡æ¿çš„é¢†åŸŸï¼Œä»è€Œä½¿æˆ‘ä»¬ä¸å¿…åˆ›å»ºç»‘å®šåˆ°ç‰¹å®šæ•°æ®ç±»å‹çš„ç±»ã€‚ä½¿ç”¨æ¨¡æ¿ç±»åˆ›å»ºæ¨¡æ¿ç±»çš„å·¥ä½œæ–¹å¼ä¸åˆ›å»ºæ¨¡æ¿å‡½æ•°çš„å·¥ä½œæ–¹å¼å‡ ä¹ç›¸åŒï¼Œå› æ­¤æˆ‘ä»¬å°†é€šè¿‡ç¤ºä¾‹ç»§ç»­ã€‚è¿™æ˜¯æˆ‘ä»¬çš„æ•°ç»„ç±»ï¼Œæ¨¡æ¿ç‰ˆæœ¬:Array.h:12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#ifndef ARRAY_H#define ARRAY_H #include &lt;cassert&gt; template &lt;class T&gt;class Array&#123;private: int m_length&#123;&#125;; T *m_data&#123;&#125;; public: Array(int length) &#123; assert(length &gt; 0); m_data = new T[length]&#123;&#125;; m_length = length; &#125; Array(const Array&amp;) = delete; Array&amp; operator=(const Array&amp;) = delete; ~Array() &#123; delete[] m_data; &#125; void Erase() &#123; delete[] m_data; // æˆ‘ä»¬éœ€è¦ç¡®ä¿æˆ‘ä»¬åœ¨è¿™é‡Œè®¾ç½®m_dataä¸º0ï¼Œå¦åˆ™å®ƒä¼š æŒ‡å‘é‡Šæ”¾äº†çš„å†…å­˜!! m_data = nullptr; m_length = 0; &#125; T&amp; operator[](int index) &#123; assert(index &gt;= 0 &amp;&amp; index &lt; m_length); return m_data[index]; &#125; // æ¨¡æ¿å‡½æ•°getLength() çš„å®šä¹‰åœ¨ä¸‹é¢ int getLength() const; &#125;; // å®šä¹‰åœ¨ç±»å¤–éƒ¨çš„æˆå‘˜å‡½æ•°éœ€è¦å®ƒä»¬è‡ªå·±çš„æ¨¡æ¿å£°æ˜â­template &lt;class T&gt;int Array&lt;T&gt;::getLength() const // æ³¨æ„ç±»åæ˜¯Array&lt;T&gt;ï¼Œä¸æ˜¯Arrayâ­&#123; return m_length;&#125; #endifæ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œè¿™ä¸ªç‰ˆæœ¬ä¸IntArrayç‰ˆæœ¬å‡ ä¹å®Œå…¨ç›¸åŒï¼Œåªæ˜¯æˆ‘ä»¬æ·»åŠ äº†æ¨¡æ¿å£°æ˜ï¼Œå¹¶å°†æ‰€åŒ…å«çš„æ•°æ®ç±»å‹ä»intæ›´æ”¹ä¸ºTã€‚æ³¨æ„ï¼šæ³¨æ„ï¼Œæˆ‘ä»¬è¿˜åœ¨ç±»å£°æ˜ä¹‹å¤–å®šä¹‰äº†getLength()å‡½æ•°ã€‚è¿™å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯ç”±äºè¯­æ³•çš„åŸå› ï¼Œæ–°ç¨‹åºå‘˜åœ¨ç¬¬ä¸€æ¬¡å°è¯•è¿™æ ·åšæ—¶é€šå¸¸ä¼šå‡ºé”™ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä¾‹å­å¾ˆæœ‰å¯å‘æ„ä¹‰ã€‚åœ¨ç±»å£°æ˜ä¹‹å¤–å£°æ˜çš„æ¯ä¸ªæ¨¡æ¿åŒ–æˆå‘˜å‡½æ•°éƒ½éœ€è¦è‡ªå·±çš„æ¨¡æ¿å£°æ˜ã€‚å¦å¤–ï¼Œè¯·æ³¨æ„æ¨¡æ¿åŒ–æ•°ç»„ç±»çš„åç§°æ˜¯Arrayï¼Œè€Œä¸æ˜¯arrayâ€”â€”arrayå°†å¼•ç”¨ä¸€ä¸ªåä¸ºarrayçš„ç±»çš„éæ¨¡æ¿åŒ–ç‰ˆæœ¬ã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªç®€çŸ­çš„ä¾‹å­ä½¿ç”¨ä¸Šè¿°æ¨¡æ¿ arrayç±»:123456789101112131415161718192021222324252627282930313233#include &lt;iostream&gt;#include \"Array.h\" int main()&#123; Array&lt;int&gt; intArray(12); Array&lt;double&gt; doubleArray(12); for (int count&#123; 0 &#125;; count &lt; intArray.getLength(); ++count) &#123; intArray[count] = count; doubleArray[count] = count + 0.5; &#125; for (int count&#123; intArray.getLength() - 1 &#125;; count &gt;= 0; --count) std::cout &lt;&lt; intArray[count] &lt;&lt; '\\t' &lt;&lt; doubleArray[count] &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/11 11.510 10.59 9.58 8.57 7.56 6.55 5.54 4.53 3.52 2.51 1.50 0.5æ¨¡æ¿ç±»çš„å®ä¾‹åŒ–æ–¹æ³•ä¸æ¨¡æ¿å‡½æ•°ç›¸åŒæ¨¡æ¿ç±»çš„å®ä¾‹åŒ–æ–¹å¼ä¸æ¨¡æ¿å‡½æ•°ç›¸åŒâ€”â€”ç¼–è¯‘å™¨æ ¹æ®éœ€è¦ æ¨¡æ¿åŒ–ä¸€ä¸ªå‰¯æœ¬ï¼Œç”¨ ç”¨æˆ·è¾“å…¥çš„å®é™…æ•°æ®ç±»å‹æ›¿æ¢ æ¨¡æ¿å‚æ•°ï¼Œç„¶åç¼–è¯‘è¯¥å‰¯æœ¬ã€‚å¦‚æœæ‚¨ä»æœªä½¿ç”¨è¿‡æ¨¡æ¿ç±»ï¼Œç¼–è¯‘å™¨ç”šè‡³ä¸ä¼šç¼–è¯‘å®ƒã€‚æ¿ç±»ç¡®å®æ˜¯c++æœ€å¥½å’Œæœ€æœ‰ç”¨çš„ç‰¹æ€§ä¹‹ä¸€æ¨¡æ¿ç±»æ˜¯å®ç°å®¹å™¨ç±»çš„ç†æƒ³å¯¹è±¡ï¼Œå› ä¸ºè®©å®¹å™¨è·¨å„ç§æ•°æ®ç±»å‹å·¥ä½œæ˜¯éå¸¸ç†æƒ³çš„ï¼Œè€Œæ¨¡æ¿å…è®¸æ‚¨åœ¨ä¸å¤åˆ¶ä»£ç çš„æƒ…å†µä¸‹è¿™æ ·åšã€‚è™½ç„¶è¯­æ³•å¾ˆéš¾çœ‹ï¼Œé”™è¯¯æ¶ˆæ¯ä¹Ÿå¾ˆéšæ™¦ï¼Œä½†æ˜¯æ¨¡æ¿ç±»ç¡®å®æ˜¯c++æœ€å¥½å’Œæœ€æœ‰ç”¨çš„ç‰¹æ€§ä¹‹ä¸€ã€‚æ ‡å‡†åº“ä¸­çš„æ¨¡æ¿ç±»ç°åœ¨æˆ‘ä»¬å·²ç»ä»‹ç»äº†æ¨¡æ¿ç±»ï¼Œæ‚¨åº”è¯¥ç†è§£std::vector&lt;int&gt;æ˜¯ä»€ä¹ˆæ„æ€äº†â€”â€”std::vectorå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œintæ˜¯æ¨¡æ¿çš„ç±»å‹å‚æ•°ã€‚æ ‡å‡†åº“ä¸­æœ‰å¾ˆå¤šé¢„å®šä¹‰çš„æ¨¡æ¿ç±»å¯ä¾›æ‚¨ä½¿ç”¨ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„ç« èŠ‚ä¸­è®¨è®ºè¿™äº›ã€‚åˆ†è§£æ¨¡æ¿ç±»æ¨¡æ¿ä¸æ˜¯ç±»ï¼Œä¹Ÿä¸æ˜¯å‡½æ•°â€”â€”å®ƒæ˜¯ç”¨äºåˆ›å»ºç±»æˆ–å‡½æ•°çš„æ¨¡æ¿ã€‚å› æ­¤ï¼Œå®ƒçš„å·¥ä½œæ–¹å¼ä¸æ™®é€šå‡½æ•°æˆ–ç±»ä¸å¤ªä¸€æ ·ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚ç„¶è€Œï¼Œæœ‰ä¸€ä¸ªæ–¹é¢é€šå¸¸ä¼šç»™å¼€å‘äººå‘˜å¸¦æ¥é—®é¢˜ã€‚ä¸ºä»€ä¹ˆè¦åˆ†è§£å¯¹äºéæ¨¡æ¿ç±»ï¼Œé€šå¸¸çš„è¿‡ç¨‹æ˜¯å°†ç±»å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶ä¸­(.h)ï¼Œå°†æˆå‘˜å‡½æ•°å®šä¹‰æ”¾åœ¨ç›¸åŒåå­—çš„ä»£ç æ–‡ä»¶ä¸­(.cpp)ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç±»çš„æºä»£ç (.cpp)è¢«ç¼–è¯‘ä¸ºä¸€ä¸ªå•ç‹¬çš„é¡¹ç›®æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œå¯¹äºæ¨¡æ¿ï¼Œè¿™æ˜¯è¡Œä¸é€šçš„ã€‚è€ƒè™‘ä»¥ä¸‹:Array.h:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#ifndef ARRAY_H#define ARRAY_H #include &lt;cassert&gt; template &lt;class T&gt;class Array&#123;private: int m_length&#123;&#125;; T* m_data&#123;&#125;; public: Array(int length) &#123; assert(length &gt; 0); m_data = new T[length]&#123;&#125;; m_length = length; &#125; Array(const Array&amp;) = delete; Array&amp; operator=(const Array&amp;) = delete; ~Array() &#123; delete[] m_data; &#125; void Erase() &#123; delete[] m_data; m_data = nullptr; m_length = 0; &#125; T&amp; operator[](int index) &#123; assert(index &gt;= 0 &amp;&amp; index &lt; m_length); return m_data[index]; &#125; int getLength() const; &#125;; #endifArray.cpp:1234567#include \"Array.h\" template &lt;class T&gt;int Array&lt;T&gt;::getLength() const // note class name is Array&lt;T&gt;, not Array&#123; return m_length;&#125;main.cpp:123456789101112131415161718#include \"Array.h\" int main()&#123; Array&lt;int&gt; intArray(12); Array&lt;double&gt; doubleArray(12); for (int count&#123; 0 &#125;; count &lt; intArray.getLength(); ++count) &#123; intArray[count] = count; doubleArray[count] = count + 0.5; &#125; for (int count&#123; intArray.getLength() - 1 &#125;; count &gt;= 0; --count) std::cout &lt;&lt; intArray[count] &lt;&lt; '\\t' &lt;&lt; doubleArray[count] &lt;&lt; '\\n'; return 0;&#125;ä»¥ä¸Šç¨‹åºå°†ç¼–è¯‘ï¼Œä½†å¯¼è‡´é“¾æ¥å™¨é”™è¯¯:1unresolved external symbol &quot;public: int __thiscall Array::getLength(void)&quot; (?GetLength@?$Array@H@@QAEHXZ)ä¸ºäº†è®©ç¼–è¯‘å™¨ä½¿ç”¨æ¨¡æ¿ï¼Œå®ƒå¿…é¡»åŒæ—¶çœ‹åˆ° æ¨¡æ¿å®šä¹‰(ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå£°æ˜) å’Œ ç”¨äºå®ä¾‹åŒ–æ¨¡æ¿çš„æ¨¡æ¿ç±»å‹ã€‚è¿˜è¦è®°ä½ï¼ŒC++å•ç‹¬ç¼–è¯‘æ–‡ä»¶ã€‚å½“ Array.h è¢«åŒ…å«åœ¨mainä¸­æ—¶ï¼Œæ¨¡æ¿ç±»å®šä¹‰ è¢«å¤åˆ¶åˆ°main.cppä¸­ã€‚å½“ç¼–è¯‘å™¨çœ‹åˆ°æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªæ¨¡æ¿å®ä¾‹ï¼ŒArray&lt;int&gt; å’Œ Array&lt;double&gt;ï¼Œå®ƒå°†å®ä¾‹åŒ–å®ƒä»¬ï¼Œå¹¶å°†å®ƒä»¬ç¼–è¯‘ä¸ºmain.cppçš„ä¸€éƒ¨åˆ†ã€‚ä½†æ˜¯ï¼Œå½“å•ç‹¬ç¼–è¯‘Array.cppæ—¶ï¼Œå®ƒä¼šå¿˜è®°æˆ‘ä»¬éœ€è¦ä¸€ä¸ªArray&lt;int&gt; å’Œ Array&lt;double&gt;ï¼Œè¿™æ ·æ¨¡æ¿å‡½æ•°å°±ä¸ä¼šè¢«å®ä¾‹åŒ–ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªé“¾æ¥å™¨é”™è¯¯ï¼Œå› ä¸ºç¼–è¯‘å™¨æ‰¾ä¸åˆ°Array&lt;int&gt;::getLength()æˆ–Array&lt;double&gt;::getLength()çš„å®šä¹‰ã€‚åˆ†è§£æ–¹æ³•æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å°†æ¨¡æ¿ç±»çš„.h ä¸ .cpp æ–‡ä»¶ä¸­çš„ä»£ç  å…¨éƒ¨æ”¾åœ¨ .hæ–‡ä»¶ä¸­ã€‚è¿™æ˜¯æˆ‘ä»¬çš„é¦–é€‰è§£å†³æ–¹æ¡ˆï¼Œé™¤éç¼–è¯‘æˆ–é“¾æ¥æ—¶é—´ å¼€å§‹æˆä¸ºé—®é¢˜ã€‚è¿™æ ·ï¼Œå½“æ‚¨#includeå¤´éƒ¨æ—¶ï¼Œæ‰€æœ‰çš„æ¨¡æ¿ä»£ç éƒ½å°†åœ¨ä¸€ä¸ªä½ç½®ã€‚è¿™ä¸ªè§£å†³æ–¹æ¡ˆçš„ä¼˜ç‚¹æ˜¯å®ƒå¾ˆç®€å•ã€‚è¿™é‡Œçš„ç¼ºç‚¹æ˜¯ï¼Œå¦‚æœæ¨¡æ¿ç±»åœ¨å¾ˆå¤šåœ°æ–¹ä½¿ç”¨ï¼Œæ‚¨å°†ä¼šå¾—åˆ°æ¨¡æ¿ç±»çš„è®¸å¤šæœ¬åœ°å‰¯æœ¬ï¼Œè¿™ä¼šå¢åŠ ç¼–è¯‘å’Œé“¾æ¥çš„æ—¶é—´(é“¾æ¥å™¨åº”è¯¥åˆ é™¤é‡å¤çš„å®šä¹‰ï¼Œå› æ­¤å®ƒä¸åº”è¯¥ä½¿æ‚¨çš„å¯æ‰§è¡Œæ–‡ä»¶è†¨èƒ€)ã€‚å°†xxx.cppæ–‡ä»¶é‡å‘½åä¸ºxxx.inlå¦‚æœæ‚¨è®¤ä¸ºå°†Array.cppä»£ç æ”¾åˆ°Array.hå¤´æ–‡ä»¶ä¸­ä¼šä½¿å¤´æ–‡ä»¶å¤ªé•¿/æ··ä¹±ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ–¹æ³•ï¼šå°†Array.cppé‡å‘½åä¸ºArray.inl(.inlä»£è¡¨å†…è”)ï¼Œç„¶ååœ¨Array.hä¸­çš„åº•éƒ¨ #include &quot;Array.inl&quot;ã€‚è¿™å°†äº§ç”Ÿä¸å°†æ‰€æœ‰ä»£ç æ”¾å…¥å¤´ä¸­ç›¸åŒçš„ç»“æœï¼Œä½†æœ‰åŠ©äºä¿æŒæ›´ç®€æ´ã€‚åœ¨main.cppæ–‡ä»¶ä¸­ï¼ŒåŒ…å«æ¨¡æ¿ç±»çš„.cppæ–‡ä»¶ï¼Œå³#include &quot;xxx.cpp&quot;ä½†æ˜¯æˆ‘ä»¬ä¸æ¨èè¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºè¿™æ˜¯#includeçš„éæ ‡å‡†ç”¨æ³•ã€‚ä¸‰æ–‡ä»¶æ³•è¿™ä¸ªæ–¹æ³•æ›´æœ‰æ•ˆï¼Œä½†æ˜¯éœ€è¦ç»´æŠ¤æ¯ä¸ªç¨‹åºçš„templates.cppæ–‡ä»¶ã€‚å°†æ¨¡æ¿ç±»çš„å®šä¹‰æ”¾åœ¨.hæ–‡ä»¶ä¸­ï¼›å°†æ¨¡æ¿ç±»çš„æˆå‘˜å‡½æ•°çš„å®šä¹‰æ”¾åœ¨.cppæ–‡ä»¶ä¸­ï¼›æœ€åä½ æ·»åŠ ç¬¬ä¸‰ä¸ªæ–‡ä»¶(å‡è®¾å«templates.cpp)ï¼Œå®ƒåŒ…å«äº†ä½ éœ€è¦çš„æ‰€æœ‰å®ä¾‹åŒ–ç±»ã€‚ç„¶ååœ¨main.cppä¸­åŒ…å«#include &quot;templates.cpp&quot;ã€‚å¦‚ï¼Œä¸‹é¢å±•ç¤ºäº†ä¸€ä¸ªæ·»åŠ çš„ç¬¬ä¸‰ä¸ªæ–‡ä»¶ï¼štemplates.cpp12345678// ç¡®ä¿å¯ä»¥çœ‹åˆ°å®Œæ•´çš„æ•°ç»„æ¨¡æ¿å®šä¹‰#include \"Array.h\"#include \"Array.cpp\" //æˆ‘ä»¬åœ¨è¿™é‡Œæ‰“ç ´äº†æœ€ä½³å®è·µï¼Œä½†åªæ˜¯åœ¨è¿™ä¸ªåœ°æ–¹// åœ¨è¿™é‡ŒåŒ…å«æ‚¨éœ€è¦çš„å…¶ä»–.hå’Œ.cppæ¨¡æ¿å®šä¹‰template class Array&lt;int&gt;; //â­æ˜¾å¼å®ä¾‹åŒ–æ¨¡æ¿Array&lt;int&gt;template class Array&lt;double&gt;; //â­æ˜¾å¼å®ä¾‹åŒ–æ¨¡æ¿Array&lt;double&gt;//åœ¨è¿™é‡Œå®ä¾‹åŒ–å…¶ä»–æ¨¡æ¿â€œæ¨¡æ¿ç±»â€å‘½ä»¤ä½¿ç¼–è¯‘å™¨æ˜¾å¼å®ä¾‹åŒ–æ¨¡æ¿ç±»ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç¼–è¯‘å™¨ä¼šåœ¨template .cppä¸­ æ¨¡æ¿å°åˆ·å‡ºArray&lt;int&gt; å’Œ Array&lt;double&gt;ã€‚å› ä¸ºtemplates.cppåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œè¿™ä¸ªå°†ä¼šè¢«ç¼–è¯‘ã€‚ç„¶åå¯ä»¥ä»å…¶ä»–åœ°æ–¹é“¾æ¥è¿™äº›å‡½æ•°ã€‚","categories":[],"tags":[]},{"title":"C&C++/å‡½æ•°æ¨¡æ¿å®ä¾‹åŒ–","slug":"C&C++/å‡½æ•°æ¨¡æ¿å®ä¾‹åŒ–","date":"2020-05-15T13:49:12.062Z","updated":"2020-05-15T14:29:00.782Z","comments":true,"path":"archives/28492eb.html","link":"","permalink":"https://longlongqin.github.io/archives/28492eb.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/132-function-template-instances/æˆ‘ä»¬æœ‰å¿…è¦ç®€è¦äº†è§£ä¸€ä¸‹æ¨¡æ¿å‡½æ•°æ˜¯å¦‚ä½•åœ¨c++ä¸­å®ç°çš„ï¼Œå› ä¸ºå°†æ¥çš„è¯¾ç¨‹å°†ä»¥è¿™äº›æ¦‚å¿µä¸ºåŸºç¡€ã€‚å‡½æ•°æ¨¡æ¿å®ä¾‹äº‹å®è¯æ˜ï¼Œc++å¹¶æ²¡æœ‰ç›´æ¥ç¼–è¯‘æ¨¡æ¿å‡½æ•°ã€‚ç›¸åï¼Œåœ¨ç¼–è¯‘æ—¶ï¼Œå½“ç¼–è¯‘å™¨é‡åˆ°å¯¹æ¨¡æ¿å‡½æ•°çš„è°ƒç”¨æ—¶ï¼Œå®ƒå¤åˆ¶æ¨¡æ¿å‡½æ•°å¹¶ç”¨å®é™…ç±»å‹æ›¿æ¢æ¨¡æ¿ç±»å‹å‚æ•°ã€‚ å…·æœ‰å®é™…ç±»å‹çš„å‡½æ•°ç§°ä¸ºå‡½æ•°æ¨¡æ¿å®ä¾‹ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹çš„ä¸€ä¸ªä¾‹å­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¨¡æ¿å‡½æ•°:12345template &lt;typename T&gt; // è¿™æ˜¯æ¨¡æ¿å‚æ•°å£°æ˜const T&amp; max(const T&amp; x, const T&amp; y)&#123; return (x &gt; y) ? x : y;&#125;ç¼–è¯‘ç¨‹åºæ—¶ï¼Œç¼–è¯‘å™¨é‡åˆ°ä¸€ä¸ªè°ƒç”¨æ¨¡æ¿å‡½æ•°:1int i&#123; max(3, 7) &#125;; // calls max(int, int)ç¼–è¯‘å™¨ä¼šè¯´ï¼Œâ€œå“¦ï¼Œæˆ‘ä»¬è¦è°ƒç”¨max(int, int)â€ ç¼–è¯‘å™¨å¤åˆ¶å‡½æ•°æ¨¡æ¿å¹¶åˆ›å»ºæ¨¡æ¿å®ä¾‹max(int, int):1234const int&amp; max(const int&amp; x, const int&amp; y)&#123; return (x&gt;y) ? x : y;&#125;è¿™ç°åœ¨æ˜¯ä¸€ä¸ªå¯ä»¥è¢«ç¼–è¯‘æˆæœºå™¨è¯­è¨€çš„â€œæ™®é€šå‡½æ•°â€ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨ç¨åçš„ä»£ç ä¸­ä½¿ç”¨ä¸åŒçš„ç±»å‹å†æ¬¡è°ƒç”¨max():1double d&#123;max(6.34, 18.523) &#125;; // calls max(double, double)c++è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ¨¡æ¿å®ä¾‹ï¼šmax(doubleï¼Œdouble):1234const double&amp; max(const double&amp; x, const double&amp; y)&#123; return (x&gt;y) ? x : y;&#125;ç„¶åç¼–è¯‘å®ƒã€‚ç¼–è¯‘å™¨è¶³å¤Ÿèªæ˜ï¼ŒçŸ¥é“å®ƒåªéœ€è¦ä¸ºæ¯ç»„æƒŸä¸€ç±»å‹å‚æ•°(æ¯ä¸ªæ–‡ä»¶) åˆ›å»ºä¸€ä¸ªæ¨¡æ¿å®ä¾‹ã€‚è¿˜æœ‰ï¼Œå¦‚æœæ‚¨åˆ›å»ºäº†ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œä½†æ˜¯æ²¡æœ‰è°ƒç”¨å®ƒï¼Œé‚£ä¹ˆå°†ä¸ä¼šåˆ›å»ºä»»ä½•æ¨¡æ¿å®ä¾‹ã€‚æ“ä½œç¬¦ã€å‡½æ•°è°ƒç”¨å’Œå‡½æ•°æ¨¡æ¿æ¨¡æ¿å‡½æ•°å¯ä»¥ä½¿ç”¨å†…ç½®ç±»å‹(ä¾‹å¦‚charã€intã€doubleç­‰)å’Œç±»ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦æ³¨æ„ï¼šå½“ç¼–è¯‘å™¨ç¼–è¯‘æ¨¡æ¿å®ä¾‹æ—¶ï¼Œå®ƒåƒæ™®é€šå‡½æ•°ä¸€æ ·ç¼–è¯‘å®ƒã€‚åœ¨æ™®é€šå‡½æ•°ä¸­ï¼Œå¿…é¡»å®šä¹‰ä¸ç±»å‹ä¸€èµ·ä½¿ç”¨çš„ä»»ä½•æ“ä½œç¬¦æˆ–å‡½æ•°è°ƒç”¨ï¼Œå¦åˆ™å°†å¾—åˆ°ç¼–è¯‘å™¨é”™è¯¯ã€‚ç±»ä¼¼åœ°ï¼Œæ¨¡æ¿å‡½æ•°ä¸­çš„ä»»ä½• æ“ä½œç¬¦æˆ–å‡½æ•°è°ƒç”¨ éƒ½å¿…é¡»ä¸ºå®ä¾‹åŒ–å‡½æ•°æ¨¡æ¿çš„ä»»ä½•ç±»å‹ å®šä¹‰ã€‚è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°çœ‹çœ‹è¿™ä¸ªï¼šé¦–å…ˆï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„ç±»:12345678910class Cents&#123;private: int m_cents;public: Cents(int cents) : m_cents&#123; cents &#125; &#123; &#125;&#125;;ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬å°è¯•è°ƒç”¨å¸¦æœ‰Centsç±»çš„æ¨¡æ¿åŒ–max()å‡½æ•°æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ:1234567891011121314151617181920212223242526template &lt;typename T&gt; // è¿™æ˜¯æ¨¡æ¿å‚æ•°å£°æ˜const T&amp; max(const T&amp; x, const T&amp; y)&#123; return (x &gt; y) ? x : y;&#125; class Cents&#123;private: int m_cents;public: Cents(int cents) : m_cents&#123; cents &#125; &#123; &#125;&#125;; int main()&#123; Cents nickle&#123; 5 &#125;; Cents dime&#123; 10 &#125;; Cents bigger&#123; max(nickle, dime) &#125;; return 0;&#125;c++å°†ä¸ºmax()åˆ›å»ºä¸€ä¸ªæ¨¡æ¿å®ä¾‹ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·:1234const Cents&amp; max(const Cents &amp;x, const Cents &amp;y)&#123; return (x &gt; y) ? x : y;&#125;ç„¶åå®ƒä¼šå°è¯•ç¼–è¯‘è¿™ä¸ªå‡½æ•°ã€‚çœ‹åˆ°é—®é¢˜äº†å—?c++ä¸èƒ½è®¡ç®—x &gt; yï¼Œå› ä¸ºxå’Œyæ˜¯ Cents ç±»å¯¹è±¡ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“å¦‚ä½•æ¯”è¾ƒå®ƒä»¬ã€‚å› æ­¤ï¼Œè¿™å°†äº§ç”Ÿä¸€ä¸ªç¼–è¯‘é”™è¯¯ï¼Œå¦‚ä¸‹æ‰€ç¤º:1234561&gt;c:\\consoleapplication1\\main.cpp(4): error C2676: binary &#39;&gt;&#39;: &#39;const Cents&#39; does not define this operator or a conversion to a type acceptable to the predefined operator1&gt; c:\\consoleapplication1\\main.cpp(23): note: see reference to function template instantiation &#39;const T &amp;max(const T &amp;,const T &amp;)&#39; being compiled1&gt; with1&gt; [1&gt; T&#x3D;Cents1&gt; ]é¡¶éƒ¨çš„é”™è¯¯æ¶ˆæ¯æŒ‡å‡ºäº†è¿™æ ·ä¸€ä¸ªäº‹å®: å¯¹äºCentsç±»ï¼Œæ²¡æœ‰é‡è½½æ“ä½œç¬¦&gt;ã€‚åº•éƒ¨çš„é”™è¯¯æŒ‡å‡ºäº†å¼•å‘é”™è¯¯çš„æ¨¡æ¿åŒ–å‡½æ•°è°ƒç”¨ï¼Œä»¥åŠæ¨¡æ¿åŒ–å‚æ•°çš„ç±»å‹ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€é‡è½½ä»»ä½•æˆ‘ä»¬å¸Œæœ›ä½¿ç”¨max()çš„ç±»çš„&gt;æ“ä½œç¬¦:1234567891011121314class Cents&#123;private: int m_cents;public: Cents(int cents) : m_cents&#123; cents &#125; &#123; &#125; friend bool operator&gt;(const Cents &amp;c1, const Cents &amp;c2) //é‡è½½æ“ä½œç¬¦ &gt; ï¼Œä»è€Œæ¨¡æ¿å®ä¾‹ä¸­å¯ä»¥ä½¿ç”¨è¯¥é‡è½½æ“ä½œç¬¦&gt; &#123; return (c1.m_cents &gt; c2.m_cents); &#125;ç°åœ¨c++å°†çŸ¥é“å½“xå’Œyæ˜¯Centsç±»çš„å¯¹è±¡æ—¶ï¼Œå¦‚ä½•æ¯”è¾ƒx &gt; y ! å› æ­¤ï¼Œæˆ‘ä»¬çš„max()å‡½æ•°ç°åœ¨å°†å¤„ç†ä¸¤ä¸ªç±»å‹ä¸ºCentsçš„å¯¹è±¡ã€‚","categories":[],"tags":[]},{"title":"C&C++/å‡½æ•°æ¨¡æ¿","slug":"C&C++/å‡½æ•°æ¨¡æ¿","date":"2020-05-15T09:18:03.325Z","updated":"2020-05-15T13:48:13.072Z","comments":true,"path":"archives/454c1de9.html","link":"","permalink":"https://longlongqin.github.io/archives/454c1de9.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/131-function-templates/åœ¨å‰å‡ ç« ä¸­ï¼Œæ‚¨å·²ç»å­¦ä¹ äº†å¦‚ä½•ç¼–å†™å‡½æ•°å’Œç±»ï¼Œè¿™äº›å‡½æ•°å’Œç±»æœ‰åŠ©äºä½¿ç¨‹åºæ›´å®¹æ˜“ç¼–å†™ã€æ›´å®‰å…¨ã€æ›´æ˜“äºç»´æŠ¤ã€‚è™½ç„¶å‡½æ•°å’Œç±»æ˜¯æœ‰æ•ˆç¼–ç¨‹çš„å¼ºå¤§è€Œçµæ´»çš„å·¥å…·ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå®ƒä»¬ä¹Ÿå¯èƒ½æœ‰ä¸€äº›é™åˆ¶ï¼Œå› ä¸ºc++è¦æ±‚æŒ‡å®šæ‰€æœ‰å‚æ•°çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨æƒ³ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ä¸¤ä¸ªæ•°å­—çš„æœ€å¤§å€¼ã€‚ä½ å¯ä»¥è¿™æ ·åš:1234int max(int x, int y)&#123; return (x &gt; y) ? x : y;&#125;è¿™ä¸ªå‡½æ•°å¯¹äºæ•´æ•°éå¸¸æœ‰ç”¨ã€‚å½“æ‚¨æ„è¯†åˆ°max()å‡½æ•°éœ€è¦ä½¿ç”¨doubleæ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆ? ä¼ ç»Ÿä¸Šï¼Œè§£å†³æ–¹æ³•æ˜¯é‡è½½max()å‡½æ•°ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªä½¿ç”¨åŒç²¾åº¦æµ®ç‚¹æ•°çš„æ–°ç‰ˆæœ¬:1234double max(double x, double y)&#123; return (x &gt; y) ? x : y;&#125;æ³¨æ„ï¼Œmax()çš„åŒç‰ˆæœ¬å®ç°çš„ä»£ç ä¸max()çš„intç‰ˆæœ¬å®Œå…¨ç›¸åŒ! äº‹å®ä¸Šï¼Œè¿™ä¸ªå®ç°é€‚ç”¨äºæ‰€æœ‰ä¸åŒçš„ç±»å‹:charã€intã€double ! ä½†æ˜¯ï¼Œå› ä¸ºc++è¦æ±‚æ‚¨ä½¿å˜é‡å…·æœ‰ç‰¹å®šçš„ç±»å‹ï¼Œæ‰€ä»¥æ‚¨å¿…é¡»ä¸ºå¸Œæœ›ä½¿ç”¨çš„æ¯ç§ç±»å‹ç¼–å†™ä¸€ä¸ªå‡½æ•°ã€‚å¿…é¡»ä¸ºåŒä¸€ä¸ªå‡½æ•°æŒ‡å®šä¸åŒçš„â€œé£æ ¼â€ï¼Œå…¶ä¸­æƒŸä¸€æ”¹å˜çš„æ˜¯å‚æ•°çš„ç±»å‹ï¼Œè¿™å¯èƒ½ä¼šæˆä¸ºç»´æŠ¤ä¸Šçš„éº»çƒ¦å’Œæ—¶é—´ä¸Šçš„æµªè´¹ï¼Œè€Œä¸”ä¹Ÿè¿åäº†ä¸€èˆ¬çš„ç¼–ç¨‹å‡†åˆ™ï¼Œå³å°½å¯èƒ½å‡å°‘é‡å¤çš„ä»£ç ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥ç¼–å†™max()çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå®ƒå¯ä»¥å¤„ç†ä»»ä½•ç±»å‹çš„å‚æ•°ï¼Œè¿™ä¸æ˜¯å¾ˆå¥½å—?æ¬¢è¿æ¥åˆ°æ¨¡æ¿çš„ä¸–ç•Œã€‚ä»€ä¹ˆæ˜¯å‡½æ•°æ¨¡æ¿?å¦‚æœä½ åœ¨å­—å…¸ä¸­æŸ¥æ‰¾â€œtemplateâ€è¿™ä¸ªè¯ï¼Œä½ ä¼šå‘ç°å®ƒçš„å®šä¹‰ä¸ä»¥ä¸‹å†…å®¹ç±»ä¼¼:â€œæ¨¡æ¿æ˜¯ä¸€ç§æ¨¡å‹ï¼Œç”¨ä½œåˆ›å»ºç±»ä¼¼å¯¹è±¡çš„æ¨¡å¼â€ã€‚åœ¨c++ä¸­ï¼Œå‡½æ•°æ¨¡æ¿æ˜¯ä½œä¸ºåˆ›å»ºå…¶ä»–ç±»ä¼¼å‡½æ•°çš„æ¨¡å¼çš„å‡½æ•°ã€‚å‡½æ•°æ¨¡æ¿èƒŒåçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸å¿…æŒ‡å®šæŸäº›æˆ–æ‰€æœ‰å˜é‡çš„ç¡®åˆ‡ç±»å‹ã€‚æˆ‘ä»¬ä½¿ç”¨å ä½ç¬¦ç±»å‹å®šä¹‰å‡½æ•°ï¼Œç§°ä¸ºæ¨¡æ¿ç±»å‹å‚æ•°ã€‚ä¸€æ—¦æˆ‘ä»¬ä½¿ç”¨è¿™äº›å ä½ç¬¦ç±»å‹åˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å°±æœ‰æ•ˆåœ°åˆ›å»ºäº†ä¸€ä¸ªâ€œå‡½æ•°æ¨¡æ¿â€ã€‚å½“æ‚¨è°ƒç”¨ä¸€ä¸ªæ¨¡æ¿å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨ä¼šâ€œæ¨¡æ¿åŒ–â€å‡ºæ¨¡æ¿çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œç”¨å‡½æ•°è°ƒç”¨ä¸­çš„å‚æ•°ä¸­çš„å®é™…å˜é‡ç±»å‹æ›¿æ¢å ä½ç¬¦ç±»å‹ !ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œç¼–è¯‘å™¨å¯ä»¥ä»ä¸€ä¸ªæ¨¡æ¿åˆ›å»ºå¤šä¸ªå‡½æ•°çš„â€œé£æ ¼â€! åœ¨ä¸‹ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°äº†è§£è¿™ä¸ªè¿‡ç¨‹ã€‚åœ¨C++ä¸­åˆ›å»ºå‡½æ•°æ¨¡æ¿æ­¤æ—¶ï¼Œæ‚¨å¯èƒ½æƒ³çŸ¥é“å¦‚ä½•åœ¨c++ä¸­å®é™…åˆ›å»ºå‡½æ•°æ¨¡æ¿ã€‚äº‹å®è¯æ˜ï¼Œè¿™å¹¶æ²¡æœ‰é‚£ä¹ˆéš¾ã€‚è®©æˆ‘ä»¬å†æ¥çœ‹çœ‹max()çš„intç‰ˆæœ¬:1234int max(int x, int y)&#123; return (x &gt; y) ? x : y;&#125;æ³¨æ„ï¼Œæœ‰3ä¸ªåœ°æ–¹ä½¿ç”¨äº†ç‰¹å®šçš„ç±»å‹: å‚æ•°xã€yå’Œ è¿”å›å€¼ éƒ½æŒ‡å®šå®ƒä»¬å¿…é¡»æ˜¯æ•´æ•°ã€‚è¦åˆ›å»ºå‡½æ•°æ¨¡æ¿ï¼Œæˆ‘ä»¬å°†ç”¨å ä½ç¬¦ç±»å‹æ›¿æ¢è¿™äº›ç‰¹å®šç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå› ä¸ºæˆ‘ä»¬åªæœ‰ä¸€ç§ç±»å‹éœ€è¦æ›¿æ¢(int)ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªæ¨¡æ¿ç±»å‹å‚æ•°ã€‚æ‚¨å¯ä»¥ä¸ºå ä½ç¬¦ç±»å‹å‘½åå‡ ä¹ä»»ä½•æ‚¨æƒ³è¦çš„åç§°ï¼Œåªè¦å®ƒä¸æ˜¯ä¿ç•™å­—ã€‚ç„¶è€Œï¼Œåœ¨c++ä¸­ï¼Œä¹ æƒ¯ä¸Šå°†æ¨¡æ¿ç±»å‹å‘½åä¸ºå­—æ¯T(â€œTypeâ€çš„ç¼©å†™)ã€‚â€‹ è¿™æ˜¯æˆ‘ä»¬çš„æ–°å‡½æ•°ä¸å ä½ç¬¦ç±»å‹:1234T max(T x, T y)&#123; return (x &gt; y) ? x : y;&#125;è¿™æ˜¯ä¸€ä¸ªå¥½çš„å¼€å§‹â€”â€”ä½†æ˜¯ï¼Œå®ƒä¸ä¼šç¼–è¯‘ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“â€œTâ€æ˜¯ä»€ä¹ˆ!ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰ç¼–è¯‘å™¨ä¸¤ä»¶äº‹:â­â­ç¬¬ä¸€ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¨¡æ¿å®šä¹‰ï¼Œç¬¬äºŒï¼ŒTæ˜¯ä¸€ä¸ªå ä½ç¬¦ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸€è¡Œä¸­å®Œæˆè¿™ä¸¤ä»¶äº‹ï¼Œä½¿ç”¨æ‰€è°“çš„æ¨¡æ¿å‚æ•°å£°æ˜( template parameter declaration):12345template &lt;typename T&gt; // è¿™æ˜¯æ¨¡æ¿å‚æ•°å£°æ˜ (åœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨â­ typename æˆ–è€… class)T max(T x, T y)&#123; return (x &gt; y) ? x : y;&#125;ç°åœ¨ï¼Œè®©æˆ‘ä»¬ç¨å¾®ä»”ç»†çœ‹çœ‹æ¨¡æ¿å‚æ•°å£°æ˜ï¼šæˆ‘ä»¬ä»å¼€å§‹äºï¼šå…³é”®å­—templateè¿™å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæ¥ä¸‹æ¥çš„å†…å®¹å°†æ˜¯ä¸€ä¸ªæ¨¡æ¿å‚æ•°åˆ—è¡¨ã€‚æˆ‘ä»¬å°†æ‰€æœ‰å‚æ•°æ”¾åœ¨å°–æ‹¬å·ä¸­(&lt;&gt;)ã€‚è¦åˆ›å»ºæ¨¡æ¿ç±»å‹å‚æ•°ï¼Œè¯·ä½¿ç”¨å…³é”®å­—typenameæˆ–classã€‚è¿™ä¸¤ä¸ªå…³é”®å­—åœ¨ä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰åŒºåˆ«ï¼Œæ‰€ä»¥ä½¿ç”¨å“ªä¸ªå…³é”®å­—å–å†³äºæ‚¨è‡ªå·±ã€‚æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨classå…³é”®å­—ï¼Œä¼ å…¥çš„ç±»å‹å®é™…ä¸Šä¸å¿…æ˜¯ä¸€ä¸ªç±»(å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªåŸºæœ¬å˜é‡ã€æŒ‡é’ˆæˆ–å…¶ä»–åŒ¹é…çš„ä¸œè¥¿)ã€‚ç„¶åå‘½åæ‚¨çš„ç±»å‹(é€šå¸¸ä¸ºâ€œTâ€)ã€‚å¦‚æœæ¨¡æ¿å‡½æ•°ä½¿ç”¨å¤šä¸ªæ¨¡æ¿ç±»å‹å‚æ•°ï¼Œå®ƒä»¬å¯ä»¥ç”¨é€—å·åˆ†éš”:12template &lt;typename T1, typename T2&gt;// template function hereå¯¹äºä½¿ç”¨ä¸æ­¢ä¸€ç§ç±»å‹çš„ï¼Œé€šå¸¸ä¼šçœ‹åˆ°å®ƒä»¬è¢«å‘½åä¸ºâ€œT1â€å’Œâ€œT2â€ï¼Œæˆ–è€…å…¶ä»–å•ä¸ªå¤§å†™å­—æ¯çš„åç§°ï¼Œä¾‹å¦‚â€œSâ€ã€‚æœ€åä¸€ç‚¹æ³¨æ„:å› ä¸ºä¼ å…¥Tç±»å‹çš„å‡½æ•°å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªç±»ç±»å‹ï¼Œé€šè¿‡å€¼ä¼ é€’ç±»é€šå¸¸ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œæ‰€ä»¥æœ€å¥½è®©æ¨¡æ¿å‡½æ•°çš„å‚æ•°å’Œè¿”å›ç±»å‹å¼•ç”¨:12345template &lt;typename T&gt;const T&amp; max(const T&amp; x, const T&amp; y) â­&#123; return (x &gt; y) ? x : y;&#125;ä½¿ç”¨å‡½æ•°æ¨¡æ¿ä½¿ç”¨å‡½æ•°æ¨¡æ¿éå¸¸ç®€å•â€”â€”æ‚¨å¯ä»¥åƒä½¿ç”¨å…¶ä»–å‡½æ•°ä¸€æ ·ä½¿ç”¨å®ƒã€‚è¿™é‡Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¨‹åºä½¿ç”¨æˆ‘ä»¬çš„æ¨¡æ¿å‡½æ•°:1234567891011121314151617181920212223242526#include &lt;iostream&gt; template &lt;typename T&gt;const T&amp; max(const T&amp; x, const T&amp; y)&#123; return (x &gt; y) ? x : y;&#125; int main()&#123; int i = max(3, 7); // returns 7 std::cout &lt;&lt; i &lt;&lt; '\\n'; double d = max(6.34, 18.523); // returns 18.523 std::cout &lt;&lt; d &lt;&lt; '\\n'; char ch = max('a', '6'); // returns 'a' std::cout &lt;&lt; ch &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/718.523aæ³¨æ„ï¼Œæ‰€æœ‰è¿™ä¸‰ä¸ªå¯¹max()çš„è°ƒç”¨éƒ½æœ‰ä¸åŒç±»å‹çš„å‚æ•°! å› ä¸ºæˆ‘ä»¬è°ƒç”¨äº†å…·æœ‰3ç§ä¸åŒç±»å‹çš„å‡½æ•°ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å°†ä½¿ç”¨æ¨¡æ¿å®šä¹‰æ¥åˆ›å»ºè¯¥å‡½æ•°çš„3ä¸ªä¸åŒç‰ˆæœ¬ï¼šä¸€ä¸ªå¸¦æœ‰intå‚æ•°(åä¸ºï¼šmax&lt;int&gt;)ï¼Œä¸€ä¸ªå…·æœ‰doubleå‚æ•°(åä¸ºï¼šmax&lt;double&gt;)ï¼Œä¸€ä¸ªå¸¦æœ‰charå‚æ•°(åä¸ºï¼šmax&lt;char&gt;)ã€‚æ³¨æ„ï¼Œåªè¦ç¼–è¯‘å™¨èƒ½å¤Ÿä»å‚æ•°ç±»å‹æ¨æ–­å‡ºæ¨¡æ¿ç±»å‹ï¼Œå°±ä¸éœ€è¦åœ¨å‡½æ•°åä¸­æ˜¾å¼åœ°æŒ‡å®šæ¨¡æ¿ç±»å‹(ä¾‹å¦‚maxçš„éƒ¨åˆ†)ã€‚å°ç»“1ã€æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œæ¨¡æ¿å‡½æ•°å¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´ï¼Œå› ä¸ºæ‚¨åªéœ€è¦ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸”å®ƒå¯ä»¥ä¸è®¸å¤šä¸åŒçš„ç±»å‹ä¸€èµ·å·¥ä½œã€‚ä¸€æ—¦æ‚¨ä¹ æƒ¯äº†ç¼–å†™å‡½æ•°æ¨¡æ¿ï¼Œæ‚¨å°±ä¼šå‘ç°ç¼–å†™å®ƒä»¬å®é™…ä¸Šå¹¶ä¸æ¯”ç¼–å†™å…·æœ‰å®é™…ç±»å‹çš„å‡½æ•°èŠ±è´¹æ›´å¤šçš„æ—¶é—´ã€‚æ¨¡æ¿å‡½æ•°å‡å°‘äº†ä»£ç ç»´æŠ¤ï¼Œå› ä¸ºé‡å¤çš„ä»£ç æ˜æ˜¾å‡å°‘ã€‚æœ€åï¼Œæ¨¡æ¿å‡½æ•°å¯ä»¥æ›´å®‰å…¨ï¼Œå› ä¸ºå½“æ‚¨éœ€è¦å‡½æ•°å¤„ç†æ–°ç±»å‹æ—¶ï¼Œä¸éœ€è¦æ‰‹åŠ¨å¤åˆ¶å‡½æ•°å’Œæ›´æ”¹ç±»å‹ !2ã€æ¨¡æ¿å‡½æ•°ç¡®å®æœ‰ä¸€äº›ç¼ºç‚¹ï¼Œå¦‚æœæˆ‘ä»¬ä¸æå®ƒä»¬ï¼Œé‚£å°±å¤ªä¸å°å¿ƒäº†ï¼šé¦–å…ˆï¼Œä¸€äº›è¾ƒè€çš„ç¼–è¯‘å™¨æ²¡æœ‰å¾ˆå¥½çš„æ”¯æŒ æ¨¡æ¿ã€‚ç„¶è€Œï¼Œè¿™ä¸ªç¼ºç‚¹ä¸å†åƒä»¥å‰é‚£æ ·æ˜¯ä¸ªå¤§é—®é¢˜ã€‚å…¶æ¬¡ï¼Œæ¨¡æ¿å‡½æ•°é€šå¸¸ä¼šäº§ç”Ÿçœ‹èµ·æ¥å¾ˆç–¯ç‹‚çš„é”™è¯¯æ¶ˆæ¯ï¼Œæ¯”æ™®é€šå‡½æ•°æ›´éš¾ç ´è¯‘ã€‚ç¬¬ä¸‰ï¼Œæ¨¡æ¿å‡½æ•°ä¼šå¢åŠ ç¼–è¯‘æ—¶é—´å’Œä»£ç å¤§å°ï¼Œå› ä¸ºå•ä¸ªæ¨¡æ¿å¯èƒ½ä¼šâ€œå®ç°â€å¹¶åœ¨è®¸å¤šæ–‡ä»¶ä¸­é‡æ–°ç¼–è¯‘(æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜)ã€‚ç„¶è€Œï¼Œä¸æ¨¡æ¿ä¸ºæ‚¨çš„ç¼–ç¨‹å·¥å…·åŒ…å¸¦æ¥çš„å¼ºå¤§å’Œçµæ´»æ€§ç›¸æ¯”ï¼Œè¿™äº›ç¼ºé™·æ˜¯ç›¸å½“å°çš„!æ³¨æ„:æ ‡å‡†åº“å·²ç»æä¾›äº†æ¨¡æ¿åŒ–çš„max()å‡½æ•°(åœ¨å¤´æ–‡ä»¶algorithmä¸­)ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦è‡ªå·±å†™(é™¤éä½ æƒ³å†™)ã€‚å¦‚æœæ‚¨ç¡®å®ç¼–å†™äº†è‡ªå·±çš„ç‰ˆæœ¬ï¼Œè¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨ä½¿ç”¨è¯­å¥â€œusing namespace std;â€ï¼Œå¯èƒ½ä¼šå‡ºç°å‘½åå†²çªï¼Œå› ä¸ºç¼–è¯‘å™¨å°†æ— æ³•åˆ¤æ–­æ‚¨æ˜¯æƒ³è¦max()ç‰ˆæœ¬è¿˜æ˜¯std::max()ç‰ˆæœ¬ã€‚","categories":[],"tags":[]},{"title":"C&C++/ä½¿ç”¨æ“ä½œç¬¦â€œã€Šâ€æ‰“å°ç»§æ‰¿ç±»","slug":"C&C++/ä½¿ç”¨æ“ä½œç¬¦â€œã€Šâ€æ‰“å°ç»§æ‰¿ç±»","date":"2020-05-15T08:05:02.406Z","updated":"2020-05-15T09:09:18.717Z","comments":true,"path":"archives/1639a92e.html","link":"","permalink":"https://longlongqin.github.io/archives/1639a92e.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/12-10-printing-inherited-classes-using-operator/è€ƒè™‘ä»¥ä¸‹ä½¿ç”¨è™šæ‹Ÿå‡½æ•°çš„ç¨‹åº:123456789101112131415161718192021222324class Base&#123;public: Base() &#123;&#125; virtual void print() const &#123; std::cout &lt;&lt; \"Base\"; &#125;&#125;; class Derived : public Base&#123;public: Derived() &#123;&#125; virtual void print() const override &#123; std::cout &lt;&lt; \"Derived\"; &#125;&#125;; int main()&#123; Derived d; Base &amp;b = d; b.print(); // will call Derived::print() return 0;&#125;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‚¨åº”è¯¥å·²ç»ç†Ÿæ‚‰äº†è¿™æ ·ä¸€ä¸ªäº‹å®: b.print()å°†è°ƒç”¨Derived::print()(å› ä¸ºbæŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡ï¼ŒBase::print()æ˜¯ä¸€ä¸ªè™šå‡½æ•°ï¼Œè€ŒDerived::print()æ˜¯ä¸€ä¸ªè¦†ç›–å‡½æ•°)ã€‚è™½ç„¶è°ƒç”¨è¿™æ ·çš„æˆå‘˜å‡½æ•°æ¥æ‰§è¡Œè¾“å‡ºæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è¿™ç§ç±»å‹çš„å‡½æ•°ä¸èƒ½å¾ˆå¥½åœ°ä¸std::coutæ··åˆä½¿ç”¨:123456789101112#include &lt;iostream&gt;int main()&#123; Derived d; Base &amp;b = d; std::cout &lt;&lt; \"b is a \"; b.print(); // æ··ä¹±ï¼Œæˆ‘ä»¬å¿…é¡»ä¸­æ–­æ‰“å°è¯­å¥æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•° std::cout &lt;&lt; '\\n'; return 0;&#125;åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ç»§æ‰¿é‡å†™è¿ç®—ç¬¦&lt;&lt;ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åƒé¢„æœŸçš„é‚£æ ·ä½¿ç”¨è¿ç®—ç¬¦&lt;&lt;ï¼Œå°±åƒè¿™æ ·:1std::cout &lt;&lt; \"b is a \" &lt;&lt; b &lt;&lt; '\\n'; // much betteræ“ä½œç¬¦&lt;&lt;çš„æŒ‘æˆ˜è®©æˆ‘ä»¬ä»é‡è½½è¿ç®—ç¬¦&lt;&lt;å¼€å§‹ï¼Œä»¥å…¸å‹çš„æ–¹å¼:12345678910111213141516171819202122232425262728293031323334353637383940#include &lt;iostream&gt;class Base&#123;public: Base() &#123;&#125; virtual void print() const &#123; std::cout &lt;&lt; \"Base\"; &#125; friend std::ostream&amp; operator&lt;&lt;(std::ostream &amp;out, const Base &amp;b) &#123; out &lt;&lt; \"Base\"; return out; &#125;&#125;; class Derived : public Base&#123;public: Derived() &#123;&#125; virtual void print() const override &#123; std::cout &lt;&lt; \"Derived\"; &#125; friend std::ostream&amp; operator&lt;&lt;(std::ostream &amp;out, const Derived &amp;d) &#123; out &lt;&lt; \"Derived\"; return out; &#125; &#125;; int main()&#123; Base b; std::cout &lt;&lt; b &lt;&lt; '\\n'; Derived d; std::cout &lt;&lt; d &lt;&lt; '\\n'; return 0;&#125;å› ä¸ºè¿™é‡Œä¸éœ€è¦è™šæ‹Ÿå‡½æ•°è§£æï¼Œè¿™ä¸ªç¨‹åºåƒæˆ‘ä»¬æœŸæœ›çš„é‚£æ ·å·¥ä½œï¼Œå¹¶æ‰“å°:12BaseDerivedç°åœ¨ï¼Œè€ƒè™‘ä»¥ä¸‹main()å‡½æ•°:1234567891011int main()&#123; Derived d; Base &amp;bref = d; std::cout &lt;&lt; bref &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/Baseè¿™å¯èƒ½ä¸æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„æ“ä½œç¬¦&lt;&lt;å¤„ç†åŸºå¯¹è±¡çš„ç‰ˆæœ¬ä¸æ˜¯virtualï¼Œæ‰€ä»¥std::cout &lt;&lt; brefè°ƒç”¨æ“ä½œç¬¦&lt;&lt;å¤„ç†åŸºå¯¹è±¡è€Œä¸æ˜¯æ´¾ç”Ÿå¯¹è±¡çš„ç‰ˆæœ¬ã€‚è¿™å°±æ˜¯æŒ‘æˆ˜æ‰€åœ¨ã€‚æˆ‘ä»¬å¯ä»¥è®©è¿ç®—ç¬¦&lt;&lt; virtualå—?â€”â€”ä¸å¯ä»¥å¦‚æœè¿™ä¸ªé—®é¢˜æ˜¯æ“ä½œç¬¦&lt;&lt;ä¸æ˜¯è™šçš„ï¼Œæˆ‘ä»¬ä¸èƒ½ç®€å•åœ°è®©å®ƒæˆä¸ºè™šçš„å—?ç­”æ¡ˆæ˜¯ï¼šä¸å¯ä»¥ã€‚è¿™æœ‰å¾ˆå¤šåŸå› ã€‚é¦–å…ˆï¼Œåªæœ‰æˆå‘˜å‡½æ•°å¯ä»¥è¢«è™šæ‹ŸåŒ–â€”â€”è¿™æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºåªæœ‰ç±»å¯ä»¥ä»å…¶ä»–ç±»ç»§æ‰¿ï¼Œè€Œä¸”æ²¡æœ‰åŠæ³•é‡å†™ï¼ˆè¦†ç›–ï¼‰ç±»ä¹‹å¤–çš„å‡½æ•° (å¯ä»¥é‡è½½éæˆå‘˜å‡½æ•°ï¼Œä½†ä¸èƒ½è¦†ç›–å®ƒä»¬)ã€‚å› ä¸ºæˆ‘ä»¬é€šå¸¸å°†æ“ä½œç¬¦&lt;&lt;ä½œä¸º friend å®ç°ï¼Œè€Œfriendä¸è¢«è®¤ä¸ºæ˜¯æˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥æ“ä½œç¬¦&lt;&lt;çš„friendç‰ˆæœ¬ä¸é€‚åˆè™šæ‹ŸåŒ–ã€‚(ä¸ºäº†å›é¡¾ä¸ºä»€ä¹ˆæˆ‘ä»¬ç”¨è¿™ç§æ–¹å¼å®ç°è¿ç®—ç¬¦&lt;&lt;ï¼Œè¯·é‡æ¸© 9.4 â€“ Overloading operators using member functions)ã€‚å…¶æ¬¡ï¼Œå³ä½¿æˆ‘ä»¬å¯ä»¥è™šæ‹ŸåŒ–è¿ç®—ç¬¦&lt;&lt;ï¼Œä¹Ÿå­˜åœ¨è¿™æ ·çš„é—®é¢˜: Base::operator&lt;&lt;å’ŒDerived::operator&lt;&lt; çš„å‡½æ•°å‚æ•°æ˜¯ä¸åŒçš„ (åŸºç‰ˆæœ¬å°†æ¥å— ä¸€ä¸ª Baseå‚æ•°ï¼Œæ´¾ç”Ÿç‰ˆæœ¬å°†æ¥å—ä¸€ä¸ª Derivedå‚æ•°)ã€‚å› æ­¤ï¼Œæ´¾ç”Ÿç‰ˆæœ¬ä¸ä¼šè¢«è®¤ä¸ºæ˜¯åŸºæœ¬ç‰ˆæœ¬çš„è¦†ç›–ï¼Œå› æ­¤ä¸é€‚åˆè¿›è¡Œè™šå‡½æ•°è§£æã€‚è§£å†³åŠæ³•äº‹å®è¯æ˜ï¼Œç­”æ¡ˆéå¸¸ç®€å•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åƒå¾€å¸¸ä¸€æ ·åœ¨åŸºç±»ä¸­å°†æ“ä½œç¬¦&lt;&lt;è®¾ç½®ä¸ºfriendã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸è®©æ“ä½œç¬¦&lt;&lt;è‡ªå·±æ‰“å°ï¼Œè€Œæ˜¯å°†æ­¤èŒè´£å§”æ‰˜ ç»™ä¸€ä¸ªå¯ä»¥è™šæ‹ŸåŒ–çš„æ™®é€šæˆå‘˜å‡½æ•°!çœ‹ä¸€ä¸ªä¾‹å­ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#include &lt;iostream&gt;class Base&#123;public: Base() &#123;&#125; // è¿™æ˜¯é‡è½½è¿ç®—ç¬¦&lt;&lt; friend std::ostream&amp; operator&lt;&lt;(std::ostream &amp;out, const Base &amp;b) &#123; // å°†æ‰“å°è´£ä»»å§”æ‰˜ç»™ æˆå‘˜å‡½æ•°print() return b.print(out); &#125; // æˆ‘ä»¬å°†ä¾èµ–äºæˆå‘˜å‡½æ•°print()æ¥è¿›è¡Œå®é™…çš„æ‰“å° // å› ä¸ºprintæ˜¯ä¸€ä¸ªæ™®é€šçš„æˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥å®ƒå¯ä»¥è¢«è™šæ‹ŸåŒ– virtual std::ostream&amp; print(std::ostream&amp; out) const &#123; out &lt;&lt; \"Base\"; return out; &#125;&#125;; class Derived : public Base&#123;public: Derived() &#123;&#125; // é¢æ˜¯å¤„ç†æ´¾ç”Ÿæƒ…å†µçš„è¦†ç›– printå‡½æ•° virtual std::ostream&amp; print(std::ostream&amp; out) const override &#123; out &lt;&lt; \"Derived\"; return out; &#125;&#125;; int main()&#123; Base b; std::cout &lt;&lt; b &lt;&lt; '\\n'; Derived d; std::cout &lt;&lt; d &lt;&lt; '\\n'; // æ³¨æ„ï¼Œå³ä½¿æ²¡æœ‰æ˜¾å¼å¤„ç†æ´¾ç”Ÿå¯¹è±¡çš„æ“ä½œç¬¦&lt;&lt;ï¼Œä¹Ÿå¯ä»¥è¿™æ ·åš Base &amp;bref = d; std::cout &lt;&lt; bref &lt;&lt; '\\n'; return 0;&#125;ç»“æœï¼š123BaseDerivedDerivedè®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°ç ”ç©¶ä¸€ä¸‹ã€‚é¦–å…ˆï¼Œåœ¨åŸºç±»Baseä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨æ“ä½œç¬¦&lt;&lt;ï¼Œå®ƒè°ƒç”¨è™šå‡½æ•°print()ã€‚å› ä¸ºæˆ‘ä»¬çš„åŸºå¼•ç”¨å‚æ•°æŒ‡å‘ä¸€ä¸ªåŸºå¯¹è±¡ï¼Œb.print()è§£æä¸ºBase::print()ï¼Œå®ƒæ‰§è¡Œæ‰“å°ã€‚æ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚åœ¨æ´¾ç”Ÿçš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨é¦–å…ˆæŸ¥çœ‹æ˜¯å¦å­˜åœ¨ æ¥å—æ´¾ç”Ÿå¯¹è±¡çš„æ“ä½œç¬¦&lt;&lt;ã€‚æ²¡æœ‰ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å®šä¹‰ã€‚æ¥ä¸‹æ¥ï¼Œç¼–è¯‘å™¨æŸ¥çœ‹æ˜¯å¦å­˜åœ¨ æ¥å—åŸºå¯¹è±¡çš„æ“ä½œç¬¦&lt;&lt;ã€‚æœ‰ã€‚æ‰€ä»¥ç¼–è¯‘å™¨éšå¼åœ°å°†æˆ‘ä»¬çš„æ´¾ç”Ÿå¯¹è±¡å‘ä¸Šè½¬æ¢ä¸ºä¸€ä¸ª Base&amp; å¹¶è°ƒç”¨è¿™ä¸ªå‡½æ•°(æˆ‘ä»¬å¯ä»¥è‡ªå·±åšè¿™ä¸ªå‘ä¸Šè½¬æ¢ï¼Œä½†æ˜¯ç¼–è¯‘å™¨åœ¨è¿™æ–¹é¢å¾ˆæœ‰å¸®åŠ©ï¼‰ã€‚ç„¶åï¼Œè¿™ä¸ªå‡½æ•°è°ƒç”¨virtual print()ï¼Œå®ƒè§£æä¸ºDerived::print().ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¸ºæ¯ä¸ªæ´¾ç”Ÿç±»å®šä¹‰è¿ç®—ç¬¦&lt;&lt; ! å¤„ç†åŸºå¯¹è±¡çš„ç‰ˆæœ¬ å¯¹äºåŸºå¯¹è±¡å’Œä»åŸºæ´¾ç”Ÿçš„ä»»ä½•ç±»éƒ½å¯ä»¥å¾ˆå¥½åœ°å·¥ä½œ!ç¬¬ä¸‰ç§æƒ…å†µæ˜¯å‰ä¸¤ç§æƒ…å†µçš„æ··åˆã€‚é¦–å…ˆï¼Œç¼–è¯‘å™¨å°†å˜é‡brefä¸æ¥å— åŸºçš„æ“ä½œç¬¦&lt;&lt;åŒ¹é…ã€‚ è°ƒç”¨æˆ‘ä»¬çš„ è™šprint()å‡½æ•°ï¼Œç”±äºåŸºå¼•ç”¨å®é™…ä¸ŠæŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿå¯¹è±¡ï¼Œå› æ­¤è§£æä¸ºDerived::print()ã€‚é—®é¢˜è§£å†³ã€‚","categories":[],"tags":[]},{"title":"C&C++/åŠ¨æ€å¼ºåˆ¶ç±»å‹è½¬æ¢","slug":"C&C++/åŠ¨æ€å¼ºåˆ¶ç±»å‹è½¬æ¢","date":"2020-05-15T06:49:35.096Z","updated":"2020-05-15T08:03:34.088Z","comments":true,"path":"archives/d7910ce1.html","link":"","permalink":"https://longlongqin.github.io/archives/d7910ce1.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/12-9-dynamic-casting/æ—©åœ¨6.16 â€“ Explicit type conversion (casting) and static_castä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¼ºåˆ¶è½¬æ¢çš„æ¦‚å¿µï¼Œä»¥åŠä½¿ç”¨static_castå°†å˜é‡ä»ä¸€ç§ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ã€‚åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­ç ”ç©¶å¦ä¸€ç§ç±»å‹çš„è½¬æ¢: dynamic_castã€‚dynamic_caståœ¨å¤„ç†å¤šæ€æ€§æ—¶ï¼Œæ‚¨ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µ: æ‚¨æœ‰ä¸€ä¸ªæŒ‡å‘åŸºç±»çš„æŒ‡é’ˆï¼Œä½†æ˜¯æ‚¨æƒ³è¦è®¿é—®ä¸€äº›åªå­˜åœ¨äºæ´¾ç”Ÿç±»ä¸­çš„ä¿¡æ¯ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include &lt;iostream&gt;#include &lt;string&gt; class Base&#123;protected: int m_value; public: Base(int value) : m_value(value) &#123; &#125; virtual ~Base() &#123;&#125;&#125;; class Derived : public Base&#123;protected: std::string m_name; public: Derived(int value, std::string name) : Base(value), m_name(name) &#123; &#125; const std::string&amp; getName() const &#123; return m_name; &#125;&#125;; Base* getObject(bool bReturnDerived)&#123; if (bReturnDerived) return new Derived(1, \"Apple\"); else return new Base(2);&#125; int main()&#123; Base *b = getObject(true); // å¦‚ä½•åœ¨åªæœ‰åŸºæŒ‡é’ˆçš„æƒ…å†µä¸‹æ‰“å°æ´¾ç”Ÿå¯¹è±¡çš„åç§°? delete b; return 0;&#125;åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œå‡½æ•°getObject()æ€»æ˜¯è¿”å›ä¸€ä¸ªåŸºæŒ‡é’ˆï¼Œä½†æ˜¯è¿™ä¸ªæŒ‡é’ˆå¯ä»¥æŒ‡å‘åŸºæŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥æŒ‡å‘æ´¾ç”Ÿçš„å¯¹è±¡ã€‚åœ¨æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿå¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¦‚ä½•è°ƒç”¨Derived::getName()?ä¸€ç§æ–¹æ³•æ˜¯å°†ä¸€ä¸ªè™šå‡½æ•°æ·»åŠ åˆ°åä¸ºgetName()çš„åŸºå‡½æ•°ä¸­(å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåŸºæŒ‡é’ˆ/å¼•ç”¨æ¥è°ƒç”¨å®ƒï¼Œå¹¶å°†å…¶åŠ¨æ€è§£æä¸º::getName())ã€‚ä½†æ˜¯å¦‚æœä½ ç”¨ä¸€ä¸ªå®é™…æŒ‡å‘åŸºå¯¹è±¡çš„åŸºæŒ‡é’ˆ/å¼•ç”¨æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå®ƒä¼šè¿”å›ä»€ä¹ˆå‘¢?æ²¡æœ‰ä»»ä½•æœ‰æ„ä¹‰çš„ä»·å€¼ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç”¨é‚£äº›å®é™…ä¸Šåªåº”è¯¥æ˜¯æ´¾ç”Ÿç±»å…³æ³¨çš„ä¸œè¥¿æ¥æ±¡æŸ“åŸºç±»ã€‚æˆ‘ä»¬çŸ¥é“c++å°†éšå¼åœ°å…è®¸æ‚¨å°†æ´¾ç”Ÿçš„æŒ‡é’ˆè½¬æ¢ä¸ºåŸºæŒ‡é’ˆ(äº‹å®ä¸Šï¼ŒgetObject()å°±æ˜¯è¿™æ ·åšçš„)ã€‚è¿™ä¸ªè¿‡ç¨‹æœ‰æ—¶è¢«ç§°ä¸ºå‘ä¸Šè½¬æ¢(upcasting)ã€‚ä½†æ˜¯ï¼Œå¦‚æœæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥å°†åŸºæŒ‡é’ˆè½¬æ¢å›æ´¾ç”ŸæŒ‡é’ˆå‘¢? ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥æŒ‡é’ˆè°ƒç”¨Derived::getName()ï¼Œè€Œå®Œå…¨ä¸éœ€è¦æ‹…å¿ƒè™šå‡½æ•°çš„è§£æé—®é¢˜ã€‚æœ‰ï¼Œé‚£å°±æ˜¯åŠ¨æ€ç±»å‹è½¬æ¢ï¼šdynamic_castä»€ä¹ˆæ˜¯dynamic_castc++æä¾›äº†ä¸€ä¸ªåä¸ºdynamic_castçš„è½¬æ¢æ“ä½œç¬¦ï¼Œå¯ç”¨äº å°†å³æŒ‡é’ˆè½¬æ¢å› æ´¾ç”ŸæŒ‡é’ˆã€‚å°½ç®¡åŠ¨æ€å¼ºåˆ¶è½¬æ¢æœ‰ä¸€äº›ä¸åŒçš„åŠŸèƒ½ï¼Œä½†åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒåŠ¨æ€å¼ºåˆ¶è½¬æ¢æœ€å¸¸è§çš„ç”¨é€”æ˜¯å°†åŸºç±»æŒ‡é’ˆè½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆã€‚â€”â€”è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå‘ä¸‹è½¬æ¢(downcasting)ã€‚ä½¿ç”¨dynamic_castçš„å·¥ä½œåŸç†ä¸ä½¿ç”¨static_castä¸€æ ·ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬çš„ä¾‹å­main()ï¼Œä½¿ç”¨dynamic_castå°†æˆ‘ä»¬çš„åŸºæŒ‡é’ˆè½¬æ¢å›æ´¾ç”ŸæŒ‡é’ˆ:12345678910111213int main()&#123; Base *b = getObject(true); //ä½¿ç”¨åŠ¨æ€å¼ºåˆ¶è½¬æ¢å°†åŸºæŒ‡é’ˆè½¬æ¢ä¸ºæ´¾ç”ŸæŒ‡é’ˆ Derived *d = dynamic_cast&lt;Derived*&gt;(b); std::cout &lt;&lt;\"The name of the Derived is: \" &lt;&lt; d-&gt;getName() &lt;&lt; '\\n'; delete b; return 0;&#125;ç»“æœï¼š1The name of the Derived is: AppleåŠ¨æ€å¼ºåˆ¶ç±»å‹è½¬æ¢ä¼šå¤±è´¥ä¸Šé¢çš„ä¾‹å­æ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºbå®é™…ä¸ŠæŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿçš„å¯¹è±¡ï¼Œæ‰€ä»¥å°†bè½¬æ¢æˆä¸€ä¸ªæ´¾ç”Ÿçš„æŒ‡é’ˆæ˜¯æˆåŠŸçš„ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬åšäº†ä¸€ä¸ªç›¸å½“å±é™©çš„å‡è®¾: bæŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿå¯¹è±¡ã€‚å¦‚æœbä¸æ˜¯æŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿå¯¹è±¡å‘¢?é€šè¿‡å°†å‚æ•°getObject()ä»trueæ›´æ”¹ä¸ºfalseï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°æµ‹è¯•è¿™ä¸€ç‚¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒgetObject()å°†è¿”å›ä¸€ä¸ªæŒ‡å‘åŸºå¯¹è±¡çš„åŸºæŒ‡é’ˆã€‚å½“æˆ‘ä»¬è¯•å›¾å°†dynamic_castè½¬æ¢ä¸ºæ´¾ç”Ÿç±»å‹æ—¶ï¼Œå®ƒå°†å¤±è´¥ï¼Œå› ä¸ºè½¬æ¢æ— æ³•è¿›è¡Œã€‚å¦‚æœdynamic_castå¤±è´¥ï¼Œè½¬æ¢çš„ç»“æœå°†æ˜¯ä¸€ä¸ªç©ºæŒ‡é’ˆã€‚å› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰æ£€æŸ¥ç©ºæŒ‡é’ˆç»“æœï¼Œæ‰€ä»¥æˆ‘ä»¬è®¿é—®äº†d-&gt;getName()ï¼Œå®ƒå°†å°è¯•å–æ¶ˆå¯¹ç©ºæŒ‡é’ˆçš„å¼•ç”¨ï¼Œä»è€Œå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸º(å¯èƒ½å¯¼è‡´å´©æºƒ)ã€‚ä¸ºäº†ä½¿è¿™ä¸ªç¨‹åºå®‰å…¨ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿dynamic_castçš„ç»“æœç¡®å®æˆåŠŸ:12345678910111213int main()&#123; Base *b = getObject(true); Derived *d = dynamic_cast&lt;Derived*&gt;(b); // ä½¿ç”¨åŠ¨æ€å¼ºåˆ¶è½¬æ¢å°†åŸºæŒ‡é’ˆè½¬æ¢ä¸ºæ´¾ç”ŸæŒ‡é’ˆ if (d) // ç¡®ä¿dæ˜¯éç©ºæŒ‡é’ˆ std::cout &lt;&lt; \"The name of the Derived is: \" &lt;&lt; d-&gt;getName() &lt;&lt; '\\n'; delete b; return 0;&#125;æ³¨æ„ï¼Œç”±äºdynamic_caståœ¨ è¿è¡Œæ—¶ æ‰§è¡Œä¸€äº› ä¸€è‡´æ€§æ£€æŸ¥(ä»¥ç¡®ä¿å¯ä»¥è¿›è¡Œè½¬æ¢)ï¼Œä½¿ç”¨dynamic_castç¡®å®ä¼šå¯¼è‡´æ€§èƒ½æŸå¤±ã€‚å…¶ä»–ä½¿ç”¨dynamic_castå¤±è´¥çš„æƒ…å†µå…·æœ‰ å—ä¿æŠ¤ æˆ– ç§æœ‰ ç»§æ‰¿çš„ã€‚å¯¹äºæ²¡æœ‰å£°æ˜æˆ–ç»§æ‰¿ä»»ä½•è™šå‡½æ•°(å› æ­¤æ²¡æœ‰è™šè¡¨)çš„ç±»ã€‚åœ¨æ¶‰åŠ è™šæ‹ŸåŸºç±» çš„æŸäº›æƒ…å†µä¸‹(æœ‰å…³è¿™äº›æƒ…å†µçš„ç¤ºä¾‹ä»¥åŠå¦‚ä½•è§£å†³å®ƒä»¬ï¼Œè¯·å‚è§ä¸‹é¢é“¾æ¥)ã€‚https://docs.microsoft.com/en-us/cpp/cpp/dynamic-cast-operator?redirectedfrom=MSDN&amp;view=vs-2019ç”¨static_castè¿›è¡Œå‘ä¸‹è½¬æ¢äº‹å®è¯æ˜ï¼Œå‘ä¸‹è½¬æ¢ä¹Ÿå¯ä»¥ç”¨static_castå®Œæˆã€‚ä¸»è¦çš„åŒºåˆ«æ˜¯static_castä¸æ‰§è¡Œè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ï¼Œæ¥ç¡®ä¿æ‚¨æ‰€åšçš„æ“ä½œæ˜¯æœ‰æ„ä¹‰çš„ã€‚è¿™ä½¿å¾—ä½¿ç”¨static_castæ›´å¿«ï¼Œä½†æ›´å±é™©ã€‚å¦‚æœå°† Base* å¼ºåˆ¶è½¬æ¢ä¸ºDerived* ï¼Œå³ä½¿åŸºæŒ‡é’ˆæ²¡æœ‰æŒ‡å‘æ´¾ç”Ÿå¯¹è±¡ï¼Œå®ƒä¹Ÿä¼šâ€œæˆåŠŸâ€ã€‚å½“æ‚¨è¯•å›¾è®¿é—®äº§ç”Ÿçš„æ´¾ç”ŸæŒ‡é’ˆ(å®é™…ä¸Šæ˜¯æŒ‡å‘åŸºå¯¹è±¡)æ—¶ï¼Œè¿™å°†å¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚å¦‚æœæ‚¨ç»å¯¹ç¡®å®šå‘ä¸‹å¼ºåˆ¶è½¬æ¢çš„æŒ‡é’ˆå°†æˆåŠŸï¼Œé‚£ä¹ˆä½¿ç”¨static_castæ˜¯å¯ä»¥æ¥å—çš„ã€‚ç¡®ä¿æ‚¨çŸ¥é“æ‰€æŒ‡å‘çš„å¯¹è±¡ç±»å‹çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨è™šå‡½æ•°ã€‚è¿™é‡Œæœ‰ä¸€ç§æ–¹æ³•(ä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†ä¸€ä¸ªå…¨å±€å˜é‡):1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465#include &lt;iostream&gt;#include &lt;string&gt; // ç±»æ ‡è¯†ç¬¦enum ClassID&#123; BASE, DERIVED // Others can be added here later&#125;; class Base&#123;protected: int m_value; public: Base(int value) : m_value(value) &#123; &#125; virtual ~Base() &#123;&#125; virtual ClassID getClassID() const &#123; return BASE; &#125;&#125;; class Derived : public Base&#123;protected: std::string m_name; public: Derived(int value, std::string name) : Base(value), m_name(name) &#123; &#125; const std::string&amp; getName() const &#123; return m_name; &#125; virtual ClassID getClassID() const &#123; return DERIVED; &#125; &#125;; Base* getObject(bool bReturnDerived)&#123; if (bReturnDerived) return new Derived(1, \"Apple\"); else return new Base(2);&#125; int main()&#123; Base *b = getObject(true); if (b-&gt;getClassID() == DERIVED) &#123; // æˆ‘ä»¬å·²ç»è¯æ˜äº†bæŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿçš„å¯¹è±¡ï¼Œæ‰€ä»¥è¿™åº”è¯¥æ€»æ˜¯æˆåŠŸçš„ Derived *d = static_cast&lt;Derived*&gt;(b); std::cout &lt;&lt; \"The name of the Derived is: \" &lt;&lt; d-&gt;getName() &lt;&lt; '\\n'; &#125; delete b; return 0;&#125;æœ€å¥½è¿˜æ˜¯ä½¿ç”¨dynamic_castä½†æ˜¯ï¼Œå¦‚æœæ‚¨è¦ç»å†å®ç°è¿™ä¸€ç‚¹çš„æ‰€æœ‰å›°éš¾( å¹¶ä¸”è¦ä¸ºè°ƒç”¨è™šå‡½æ•°å’Œå¤„ç†ç»“æœä»˜å‡ºä»£ä»· )ï¼Œé‚£ä¹ˆæœ€å¥½åªä½¿ç”¨dynamic_castã€‚dynamic_castå’Œå¼•ç”¨å°½ç®¡ä¸Šé¢æ‰€æœ‰çš„ä¾‹å­éƒ½æ˜¾ç¤ºäº†æŒ‡é’ˆçš„åŠ¨æ€è½¬æ¢(è¿™æ›´å¸¸è§)ï¼Œdynamic_castä¹Ÿå¯ä»¥ä¸å¼•ç”¨ä¸€èµ·ä½¿ç”¨ã€‚è¿™ç±»ä¼¼äºdynamic_castå¤„ç†æŒ‡é’ˆçš„æ–¹å¼ã€‚123456789101112131415161718192021222324252627282930313233343536373839#include &lt;string&gt;#include &lt;iostream&gt;class Base&#123;protected: int m_value; public: Base(int value) : m_value(value) &#123; &#125; virtual ~Base() &#123;&#125;&#125;;class Derived : public Base&#123;protected: std::string m_name; public: Derived(int value, std::string name) : Base(value), m_name(name) &#123; &#125; const std::string&amp; getName() const &#123; return m_name; &#125;&#125;;int main()&#123; Derived apple(1, \"Apple\"); Base &amp;b = apple; //ä½¿ç”¨å¼•ç”¨è€Œä¸æ˜¯æŒ‡é’ˆè¿›è¡ŒåŠ¨æ€è½¬æ¢ // æˆ‘ä»¬å¯ä»¥é€šè¿‡dè®¿é—®Derived::getName std::cout &lt;&lt; \"The name of the Derived is: \" &lt;&lt; d.getName() &lt;&lt; '\\n';&#125;å› ä¸ºc++æ²¡æœ‰â€œç©ºå¼•ç”¨â€ï¼Œdynamic_caståœ¨å¤±è´¥æ—¶ä¸èƒ½è¿”å›ç©ºå¼•ç”¨ã€‚ç›¸åï¼Œå¦‚æœå¼•ç”¨çš„dynamic_castå¤±è´¥ï¼Œåˆ™æŠ›å‡ºstd::bad_castç±»å‹çš„å¼‚å¸¸ã€‚æˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹çš„åé¢è®¨è®ºå¼‚å¸¸ã€‚dynamic_cast ä¸ static_cast çš„æ¯”è¾ƒæ–°ç¨‹åºå‘˜æœ‰æ—¶ä¼šå¯¹ä½•æ—¶ä½¿ç”¨static_castå’Œdynamic_castæ„Ÿåˆ°å›°æƒ‘ã€‚ç­”æ¡ˆå¾ˆç®€å•:ä½¿ç”¨static_castï¼Œé™¤éæ˜¯å‘ä¸‹å¼ºåˆ¶è½¬æ¢ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œdynamic_casté€šå¸¸æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ä½†æ˜¯ï¼Œæ‚¨è¿˜åº”è¯¥è€ƒè™‘å®Œå…¨é¿å…å¼ºåˆ¶è½¬æ¢ï¼Œåªä½¿ç”¨è™šå‡½æ•°ã€‚å‘ä¸‹è½¬æ¢vsè™šå‡½æ•°æœ‰äº›å¼€å‘äººå‘˜è®¤ä¸ºdynamic_castæ˜¯é‚ªæ¶çš„ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªç³Ÿç³•çš„ç±»è®¾è®¡çš„è±¡å¾ã€‚ç›¸åï¼Œè¿™äº›ç¨‹åºå‘˜è®¤ä¸ºåº”è¯¥ä½¿ç”¨è™šæ‹Ÿå‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä½¿ç”¨è™šå‡½æ•°æ¯”å‘ä¸‹å¼ºåˆ¶è½¬æ¢æ›´å¯å–ã€‚ç„¶è€Œï¼Œæœ‰æ—¶å‘ä¸‹è½¬æ¢æ˜¯æ›´å¥½çš„é€‰æ‹©:å½“æ‚¨ä¸èƒ½ä¿®æ”¹åŸºç±»æ¥æ·»åŠ è™šå‡½æ•°æ—¶(ä¾‹å¦‚ï¼Œå› ä¸ºåŸºç±»æ˜¯æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†)å½“æ‚¨éœ€è¦è®¿é—®ç‰¹å®šäºæ´¾ç”Ÿç±»çš„å†…å®¹æ—¶(ä¾‹å¦‚ï¼Œä»…å­˜åœ¨äºæ´¾ç”Ÿç±»ä¸­çš„è®¿é—®å‡½æ•°)å½“å‘åŸºç±»æ·»åŠ è™šå‡½æ•°æ²¡æœ‰æ„ä¹‰æ—¶(ä¾‹å¦‚ï¼ŒåŸºç±»è¿”å›çš„å€¼ä¸åˆé€‚)ã€‚å¦‚æœæ‚¨ä¸éœ€è¦å®ä¾‹åŒ–åŸºç±»ï¼Œé‚£ä¹ˆä½¿ç”¨çº¯è™šå‡½æ•°å¯èƒ½æ˜¯ä¸€ç§é€‰æ‹©ã€‚å…³äºdynamic_castå’ŒRTTIçš„è­¦å‘Šè¿è¡Œæ—¶ç±»å‹ä¿¡æ¯(RTTI)æ˜¯c++çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒåœ¨è¿è¡Œæ—¶å…¬å¼€æœ‰å…³å¯¹è±¡æ•°æ®ç±»å‹çš„ä¿¡æ¯ã€‚dynamic_caståˆ©ç”¨äº†è¿™ä¸ªåŠŸèƒ½ã€‚ç”±äºRTTIæœ‰ç›¸å½“å¤§çš„ç©ºé—´æ€§èƒ½æˆæœ¬ï¼Œä¸€äº›ç¼–è¯‘å™¨å…è®¸æ‚¨å…³é—­RTTIä½œä¸ºä¼˜åŒ–ã€‚å¦‚æœè¿™æ ·åšï¼Œdynamic_castå°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚","categories":[],"tags":[]},{"title":"C&C++/å¯¹è±¡åˆ‡ç‰‡","slug":"C&C++/å¯¹è±¡åˆ‡ç‰‡","date":"2020-05-15T03:01:20.179Z","updated":"2020-05-15T03:40:47.685Z","comments":true,"path":"archives/c1cd5bf1.html","link":"","permalink":"https://longlongqin.github.io/archives/c1cd5bf1.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/12-8-object-slicing/è®©æˆ‘ä»¬å›åˆ°ä¹‹å‰çœ‹çš„ä¸€ä¸ªä¾‹å­:123456789101112131415161718192021222324252627282930313233343536373839class Base&#123;protected: int m_value&#123;&#125;; public: Base(int value) : m_value&#123; value &#125; &#123; &#125; virtual const char* getName() const &#123; return \"Base\"; &#125; int getValue() const &#123; return m_value; &#125;&#125;; class Derived: public Base&#123;public: Derived(int value) : Base&#123; value &#125; &#123; &#125; virtual const char* getName() const &#123; return \"Derived\"; &#125;&#125;; int main()&#123; Derived derived&#123; 5 &#125;; std::cout &lt;&lt; \"derived is a \" &lt;&lt; derived.getName() &lt;&lt; \" and has value \" &lt;&lt; derived.getValue() &lt;&lt; '\\n'; Base &amp;ref&#123; derived &#125;; std::cout &lt;&lt; \"ref is a \" &lt;&lt; ref.getName() &lt;&lt; \" and has value \" &lt;&lt; ref.getValue() &lt;&lt; '\\n'; Base *ptr&#123; &amp;derived &#125;; std::cout &lt;&lt; \"ptr is a \" &lt;&lt; ptr-&gt;getName() &lt;&lt; \" and has value \" &lt;&lt; ptr-&gt;getValue() &lt;&lt; '\\n'; return 0;&#125;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œrefå¼•ç”¨å’ŒptræŒ‡å‘derivedï¼Œå®ƒæœ‰ä¸€ä¸ªåŸºéƒ¨åˆ†å’Œä¸€ä¸ªæ´¾ç”Ÿéƒ¨åˆ†ã€‚å› ä¸ºrefå’Œptræ˜¯Baseç±»å‹çš„ï¼Œrefå’Œptråªèƒ½çœ‹åˆ°derivedçš„Baseéƒ¨åˆ†â€”â€”derivedçš„derivedéƒ¨åˆ†ä»ç„¶å­˜åœ¨ï¼Œä½†æ˜¯ä¸èƒ½é€šè¿‡refæˆ–ptrçœ‹åˆ°ã€‚ç„¶è€Œï¼Œé€šè¿‡ä½¿ç”¨è™šå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®æœ€æ´¾ç”Ÿçš„å‡½æ•°ç‰ˆæœ¬ã€‚å› æ­¤ï¼Œä¸Šé¢çš„ç¨‹åºæ‰“å°:123derived is a Derived and has value 5ref is a Derived and has value 5ptr is a Derived and has value 5å¯¹è±¡åˆ‡ç‰‡ä½†æ˜¯ï¼Œå¦‚æœä¸è®¾ç½®åŸºå¼•ç”¨æˆ–æŒ‡å‘æ´¾ç”Ÿå¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œæ˜¯ç®€å•åœ°å°†æ´¾ç”Ÿå¯¹è±¡åˆ†é…ç»™åŸºå¯¹è±¡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢?12345678int main()&#123; Derived derived&#123; 5 &#125;; Base base&#123; derived &#125;; // what happens here? std::cout &lt;&lt; \"base is a \" &lt;&lt; base.getName() &lt;&lt; \" and has value \" &lt;&lt; base.getValue() &lt;&lt; '\\n'; return 0;&#125;è®°ä½ï¼Œå¯¼å‡½æ•°æœ‰åŸºéƒ¨å’Œå¯¼å‡½æ•°éƒ¨ã€‚å½“æˆ‘ä»¬å°†æ´¾ç”Ÿå¯¹è±¡åˆ†é…ç»™åŸºå¯¹è±¡æ—¶ï¼Œåªå¤åˆ¶æ´¾ç”Ÿå¯¹è±¡çš„åŸºéƒ¨åˆ†ã€‚æ´¾ç”Ÿéƒ¨åˆ†åˆ™ä¸æ˜¯ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œbaseæ¥æ”¶æ´¾ç”Ÿçš„åŸºæœ¬éƒ¨åˆ†çš„å‰¯æœ¬ï¼Œä½†ä¸æ¥æ”¶æ´¾ç”Ÿéƒ¨åˆ†çš„å‰¯æœ¬ã€‚è¿™ä¸ªè¡ç”Ÿçš„éƒ¨åˆ†å·²ç»è¢«æœ‰æ•ˆåœ°â€œåˆ‡æ‰â€äº†ã€‚å› æ­¤ï¼Œå°†æ´¾ç”Ÿç±»å¯¹è±¡ èµ‹å€¼ ç»™åŸºç±»å¯¹è±¡ ç§°ä¸ºå¯¹è±¡åˆ‡ç‰‡(æˆ–ç®€ç§°ä¸ºåˆ‡ç‰‡)ã€‚å› ä¸ºå˜é‡baseæ²¡æœ‰æ´¾ç”Ÿéƒ¨åˆ†ï¼Œæ‰€ä»¥base.getName()è§£æä¸ºbase::getName()ã€‚ä¸Šé¢çš„ä¾‹å­æ‰“å°:1base is a Base and has value 5è®¤çœŸä½¿ç”¨ï¼Œåˆ‡ç‰‡å¯ä»¥æ˜¯è‰¯æ€§çš„ã€‚ç„¶è€Œï¼Œå¦‚æœä½¿ç”¨ä¸å½“ï¼Œåˆ‡ç‰‡å¯èƒ½ä¼šä»¥è®¸å¤šä¸åŒçš„æ–¹å¼å¯¼è‡´æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚è®©æˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹å…¶ä¸­çš„ä¸€äº›æƒ…å†µï¼šåˆ‡ç‰‡å’Œå‡½æ•°ç°åœ¨ï¼Œä½ å¯èƒ½è§‰å¾—ä¸Šé¢çš„ä¾‹å­æœ‰ç‚¹å‚»ã€‚æ¯•ç«Ÿï¼Œä¸ºä»€ä¹ˆè¦æŠŠæ´¾ç”Ÿèµ‹ç»™baseå‘¢?ä½ å¯èƒ½ä¸ä¼šã€‚ç„¶è€Œï¼Œåˆ‡ç‰‡æ›´å¯èƒ½åœ¨å‡½æ•°ä¸­æ„å¤–å‘ç”Ÿã€‚1234void printName(const Base base) // æ³¨æ„:baseæ˜¯é€šè¿‡å€¼ä¼ é€’çš„ï¼Œè€Œä¸æ˜¯å¼•ç”¨&#123; std::cout &lt;&lt; \"I am a \" &lt;&lt; base.getName() &lt;&lt; '\\n';&#125;è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„å‡½æ•°ï¼Œå¸¦æœ‰ä¸€ä¸ªé€šè¿‡å€¼ä¼ é€’çš„conståŸºå¯¹è±¡å‚æ•°ã€‚å¦‚æœæˆ‘ä»¬è¿™æ ·è°ƒç”¨è¿™ä¸ªå‡½æ•°:1234567int main()&#123; Derived d&#123; 5 &#125;; printName(d); // ç³Ÿç³•ï¼Œæ²¡æœ‰æ„è¯†åˆ°è¿™æ˜¯ åœ¨è°ƒç”¨ç«¯æŒ‰å€¼ä¼ é€’çš„ return 0;&#125;åœ¨ç¼–å†™è¿™ä¸ªç¨‹åºæ—¶ï¼Œæ‚¨å¯èƒ½æ²¡æœ‰æ³¨æ„åˆ°baseæ˜¯ä¸€ä¸ªå€¼å‚æ•°ï¼Œè€Œä¸æ˜¯å¼•ç”¨ã€‚å› æ­¤ï¼Œå½“è°ƒç”¨printName(d)æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½æœŸæœ›base.getName()è°ƒç”¨è™šæ‹ŸåŒ–å‡½æ•°getName()å¹¶æ‰“å°â€œI am a Derivedâ€ï¼Œä½†å®é™…æƒ…å†µå¹¶éå¦‚æ­¤ã€‚ç›¸åï¼Œæ´¾ç”Ÿå¯¹è±¡dè¢«åˆ‡ç‰‡ï¼Œåªæœ‰åŸºéƒ¨åˆ†è¢«å¤åˆ¶åˆ°åŸºå‚æ•°ä¸­ã€‚å½“base.getName()æ‰§è¡Œæ—¶ï¼Œå³ä½¿å·²ç»è™šæ‹ŸåŒ–äº†getName()å‡½æ•°ï¼Œä¹Ÿæ²¡æœ‰ç±»çš„æ´¾ç”Ÿéƒ¨åˆ†éœ€è¦è§£æã€‚å› æ­¤ï¼Œè¿™ä¸ªç¨‹åºæ‰“å°:1I am a Baseåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¾ˆæ˜æ˜¾å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä½†æ˜¯å¦‚æœæ‚¨çš„å‡½æ•°å®é™…ä¸Šæ²¡æœ‰æ‰“å°ä»»ä½•åƒè¿™æ ·çš„æ ‡è¯†ä¿¡æ¯ï¼Œè·Ÿè¸ªé”™è¯¯å¯èƒ½ä¼šå¾ˆå›°éš¾ã€‚å½“ç„¶ï¼Œé€šè¿‡å°†å‡½æ•°å‚æ•°è®¾ç½®ä¸ºå¼•ç”¨è€Œä¸æ˜¯æŒ‰å€¼ä¼ é€’ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°é¿å…è¿™é‡Œçš„åˆ‡ç‰‡(è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæŒ‰å¼•ç”¨ä¼ é€’ç±»è€Œä¸æ˜¯æŒ‰å€¼ä¼ é€’ç±»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„çš„å¦ä¸€ä¸ªåŸå› )ã€‚123456789101112131415void printName(const Base &amp;base) // æ³¨æ„:baseç°åœ¨é€šè¿‡å¼•ç”¨ä¼ é€’&#123; std::cout &lt;&lt; \"I am a \" &lt;&lt; base.getName() &lt;&lt; '\\n';&#125; int main()&#123; Derived d&#123; 5 &#125;; printName(d); return 0;&#125;/*ç»“æœ*/I am a Derivedåˆ‡ç‰‡ vectorç„¶è€Œï¼Œæ–°ç¨‹åºå‘˜åœ¨ä½¿ç”¨åˆ‡ç‰‡æ—¶é‡åˆ°çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯è¯•å›¾ä½¿ç”¨std::vectorå®ç°å¤šæ€æ€§ã€‚è€ƒè™‘ä»¥ä¸‹ç¨‹åº:1234567891011121314#include &lt;vector&gt; int main()&#123; std::vector&lt;Base&gt; v&#123;&#125;; v.push_back(Base&#123; 5 &#125;); // add a Base object to our vector v.push_back(Derived&#123; 6 &#125;); // add a Derived object to our vector // Print out all of the elements in our vector for (const auto&amp; element : v) std::cout &lt;&lt; \"I am a \" &lt;&lt; element.getName() &lt;&lt; \" with value \" &lt;&lt; element.getValue() &lt;&lt; '\\n'; return 0;&#125;ç»“æœï¼š12I am a Base with value 5I am a Base with value 6ä¸å‰é¢çš„ç¤ºä¾‹ç±»ä¼¼ï¼Œå› ä¸ºstd::vectorè¢«å£°æ˜ä¸ºBaseç±»å‹çš„å‘é‡ï¼Œå½“æ´¾ç”Ÿ(6)æ·»åŠ åˆ°è¯¥å‘é‡æ—¶ï¼Œå®ƒè¢«åˆ‡ç‰‡ã€‚ä¿®å¤è¿™ä¸ªé—®é¢˜æœ‰ç‚¹å›°éš¾ã€‚è®¸å¤šæ–°ç¨‹åºå‘˜å°è¯•åˆ›å»ºä¸€ä¸ªstd::vectorå¯¹è±¡çš„å¼•ç”¨ï¼Œåƒè¿™æ ·:1std::vector&lt;Base&amp;&gt; v&#123;&#125;;ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ— æ³•ç¼–è¯‘ã€‚std::vectorçš„å…ƒç´ å¿…é¡»æ˜¯å¯èµ‹å€¼çš„ï¼Œè€Œå¼•ç”¨ä¸èƒ½è¢«é‡æ–°èµ‹å€¼(åªèƒ½åˆå§‹åŒ–)ã€‚è§£å†³åŠæ³•ï¼šæŒ‡é’ˆå‘é‡è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå‘é‡:12345678910111213141516171819#include &lt;iostream&gt;#include &lt;vector&gt; int main()&#123; std::vector&lt;Base*&gt; v&#123;&#125;; Base b&#123; 5 &#125;; // bå’Œdä¸èƒ½æ˜¯åŒ¿åå¯¹è±¡ Derived d&#123; 6 &#125;; v.push_back(&amp;b); // add a Base object to our vector v.push_back(&amp;d); // add a Derived object to our vector // Print out all of the elements in our vector for (const auto* element : v) std::cout &lt;&lt; \"I am a \" &lt;&lt; element-&gt;getName() &lt;&lt; \" with value \" &lt;&lt; element-&gt;getValue() &lt;&lt; '\\n'; return 0;&#125;ç»“æœï¼š12I am a Base with value 5I am a Derived with value 6å¯¹æ­¤æœ‰å‡ ç‚¹è¯„è®ºã€‚é¦–å…ˆï¼Œnullptrç°åœ¨æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„é€‰é¡¹ï¼Œè¿™å¯èƒ½æ˜¯å¯å–çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸å¯å–çš„ã€‚å…¶æ¬¡ï¼Œç°åœ¨å¿…é¡»å¤„ç†æŒ‡é’ˆè¯­ä¹‰ï¼Œè¿™å¯èƒ½ä¼šå¾ˆéº»çƒ¦ã€‚ä½†å¥½å¤„æ˜¯ï¼Œè¿™ä¹Ÿå…è®¸åŠ¨æ€å†…å­˜åˆ†é…çš„å¯èƒ½æ€§ï¼Œå¦‚æœæ‚¨çš„å¯¹è±¡å¯èƒ½è¶…å‡ºèŒƒå›´ï¼Œé‚£ä¹ˆåŠ¨æ€å†…å­˜åˆ†é…å°†éå¸¸æœ‰ç”¨ã€‚The Frankenobjectåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ç”±äºæ´¾ç”Ÿç±»è¢«åˆ‡å‰²è€Œå¯¼è‡´é”™è¯¯ç»“æœçš„æƒ…å†µã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹å¦ä¸€ç§å±é™©çš„æƒ…å†µï¼Œå³æ´¾ç”Ÿå¯¹è±¡ä»ç„¶å­˜åœ¨ !12345678910int main()&#123; Derived d1&#123; 5 &#125;; Derived d2&#123; 6 &#125;; Base &amp;b&#123; d2 &#125;; b = d1; // this line is æœ‰é—®é¢˜ return 0;&#125;å‡½æ•°çš„å‰ä¸‰è¡Œéå¸¸ç®€å•ã€‚åˆ›å»ºä¸¤ä¸ªæ´¾ç”Ÿå¯¹è±¡ï¼Œå¹¶è®¾ç½®ç¬¬äºŒä¸ªå¯¹è±¡çš„åŸºå¼•ç”¨ã€‚ç¬¬å››è¡Œæ˜¯è¯¯å…¥æ­§é€”çš„åœ°æ–¹ï¼šå› ä¸ºbæŒ‡å‘d2ï¼Œæˆ‘ä»¬åˆæŠŠd1èµ‹å€¼ç»™bï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºç»“æœæ˜¯d1ä¼šè¢«å¤åˆ¶åˆ°d2ä¸­ã€‚å¦‚æœbæ˜¯ä¸€ä¸ªæ´¾ç”Ÿçš„çš„è¯ï¼Œé‚£å®ƒæ˜¯å¯¹çš„ã€‚ä½†æ˜¯bæ˜¯ä¸€ä¸ªåŸºç±»ï¼Œc++ä¸ºç±»æä¾›çš„æ“ä½œç¬¦=åœ¨é»˜è®¤æƒ…å†µä¸‹ä¸æ˜¯è™šæ‹Ÿçš„ã€‚å› æ­¤ï¼Œåªæœ‰d1çš„åŸºéƒ¨åˆ†è¢«å¤åˆ¶åˆ°d2ä¸­ã€‚ç»“æœï¼Œä½ ä¼šå‘ç°d2ç°åœ¨æœ‰äº†ï¼šåŸºåº•éƒ¨åˆ†æ˜¯d1è¡ç”Ÿéƒ¨åˆ†æ˜¯d2ã€‚åœ¨è¿™ä¸ªç‰¹æ®Šçš„ä¾‹å­ä¸­ï¼Œè¿™ä¸æ˜¯é—®é¢˜(å› ä¸ºæ´¾ç”Ÿç±»æ²¡æœ‰è‡ªå·±çš„æ•°æ®)ï¼Œä½†æ˜¯åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨åªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªFrankenobjectFrankenobjectï¼šç”±å¤šä¸ªå¯¹è±¡çš„éƒ¨åˆ†ç»„æˆæ›´ç³Ÿç³•çš„æ˜¯ï¼Œæ²¡æœ‰ç®€å•çš„æ–¹æ³•æ¥é˜²æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿ (é™¤äº†å°½å¯èƒ½é¿å…è¿™æ ·çš„èµ‹å€¼)ã€‚å°ç»“å°½ç®¡c++æ”¯æŒé€šè¿‡å¯¹è±¡åˆ‡ç‰‡å°†æ´¾ç”Ÿå¯¹è±¡åˆ†é…ç»™åŸºå¯¹è±¡ï¼Œä½†é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½åªä¼šé€ æˆéº»çƒ¦ï¼Œæ‚¨é€šå¸¸åº”è¯¥å°½é‡é¿å…åˆ‡ç‰‡ã€‚æ–¹æ³•ï¼šç¡®ä¿æ‚¨çš„å‡½æ•°å‚æ•°æ˜¯å¼•ç”¨(æˆ–æŒ‡é’ˆ)ï¼Œå¹¶ä¸”åœ¨æ¶‰åŠåˆ°æ´¾ç”Ÿç±»æ—¶å°½é‡é¿å…ä»»ä½•ç±»å‹çš„æŒ‰å€¼ä¼ é€’ã€‚","categories":[],"tags":[]},{"title":"C&C++/è™šæ‹ŸåŸºç±»","slug":"C&C++/è™šæ‹ŸåŸºç±»","date":"2020-05-15T02:29:34.213Z","updated":"2020-05-15T02:58:37.707Z","comments":true,"path":"archives/f7358229.html","link":"","permalink":"https://longlongqin.github.io/archives/f7358229.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/128-virtual-base-classes/ä¸Šä¸€ç« ï¼Œåœ¨11.7 â€“ Multiple inheritanceä¸­ï¼Œæˆ‘ä»¬åœæ­¢äº†å¯¹â€œé’»çŸ³é—®é¢˜â€çš„è®¨è®ºã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç»§ç»­è®¨è®ºã€‚é’»çŸ³çš„é—®é¢˜ä¸‹é¢æ˜¯æˆ‘ä»¬ä»ä¸ŠèŠ‚è¯¾(å’Œä¸€äº›æ„é€ å‡½æ•°)ä¸­å¾—åˆ°çš„ä¾‹å­ï¼Œæ¼”ç¤ºäº†è±å½¢é—®é¢˜:12345678910111213141516171819202122232425262728293031323334353637class PoweredDevice&#123;public: PoweredDevice(int power) &#123; cout &lt;&lt; \"PoweredDevice: \" &lt;&lt; power &lt;&lt; '\\n'; &#125;&#125;; class Scanner: public PoweredDevice&#123;public: Scanner(int scanner, int power) : PoweredDevice(power) &#123; cout &lt;&lt; \"Scanner: \" &lt;&lt; scanner &lt;&lt; '\\n'; &#125;&#125;; class Printer: public PoweredDevice&#123;public: Printer(int printer, int power) : PoweredDevice(power) &#123; cout &lt;&lt; \"Printer: \" &lt;&lt; printer &lt;&lt; '\\n'; &#125;&#125;; class Copier: public Scanner, public Printer&#123;public: Copier(int scanner, int printer, int power) : Scanner(scanner, power), Printer(printer, power) &#123; &#125;&#125;;å°½ç®¡ä½ å¯èƒ½å¸Œæœ›å¾—åˆ°è¿™æ ·çš„ç»§æ‰¿å›¾:å¦‚æœæ‚¨è¦åˆ›å»ºä¸€ä¸ªcopyç±»å¯¹è±¡ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¨å°†å¾—åˆ°PoweredDeviceç±»çš„ä¸¤ä¸ªå‰¯æœ¬â€”â€”ä¸€ä¸ªæ¥è‡ªPrinterï¼Œå¦ä¸€ä¸ªæ¥è‡ªScannerã€‚å®ƒçš„ç»“æ„å¦‚ä¸‹:æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç®€çŸ­çš„ä¾‹å­ï¼Œå°†åœ¨è¡ŒåŠ¨ä¸­æ˜¾ç¤ºè¿™ä¸€ç‚¹:123456int main()&#123; Copier copier(1, 2, 3); return 0;&#125;è¿™å°±äº§ç”Ÿäº†ä»¥ä¸‹ç»“æœ:1234PoweredDevice: 3Scanner: 1PoweredDevice: 3Printer: 2å¦‚ä½ æ‰€è§ï¼ŒPoweredDeviceæ„å»ºäº†ä¸¤æ¬¡ã€‚è™½ç„¶è¿™é€šå¸¸æ˜¯éœ€è¦çš„ï¼Œä½†æœ‰æ—¶æ‚¨å¯èƒ½åªå¸Œæœ›æ‰«æä»ªå’Œæ‰“å°æœºå…±äº«PoweredDeviceçš„ä¸€ä¸ªå‰¯æœ¬ã€‚è™šæ‹ŸåŸºç±»è¦å…±äº«åŸºç±»ï¼Œåªéœ€åœ¨æ´¾ç”Ÿç±»çš„ç»§æ‰¿åˆ—è¡¨ä¸­æ’å…¥â€œvirtualâ€å…³é”®å­—å³å¯ã€‚è¿™åˆ›å»ºäº†æ‰€è°“çš„è™šåŸºç±»ï¼Œè¿™æ„å‘³ç€åªæœ‰ä¸€ä¸ªåŸºå¯¹è±¡ã€‚åŸºå¯¹è±¡åœ¨ç»§æ‰¿æ ‘ä¸­çš„æ‰€æœ‰å¯¹è±¡ä¹‹é—´å…±äº«ï¼Œå¹¶ä¸”åªæ„é€ ä¸€æ¬¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­(ä¸ºäº†ç®€å•ï¼Œæ²¡æœ‰æ„é€ å‡½æ•°)ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨virtualå…³é”®å­—åˆ›å»ºä¸€ä¸ªå…±äº«åŸºç±»:123456789101112131415class PoweredDevice&#123;&#125;; class Scanner: virtual public PoweredDevice&#123;&#125;; class Printer: virtual public PoweredDevice&#123;&#125;; class Copier: public Scanner, public Printer&#123;&#125;;ç°åœ¨ï¼Œå½“æ‚¨åˆ›å»ºå¤å°æœºç±»å¯¹è±¡æ—¶ï¼Œæ‚¨å°†ä»…ä¸ºæ¯ä¸ªå¤å°æœºè·å¾—ä¸€ä¸ªPoweredDeviceå‰¯æœ¬ï¼Œè¯¥å‰¯æœ¬å°†ç”±æ‰«æä»ªå’Œæ‰“å°æœºå…±äº«ã€‚ç„¶è€Œï¼Œè¿™åˆå¯¼è‡´äº†ä¸€ä¸ªé—®é¢˜:å¦‚æœæ‰«æä»ªå’Œæ‰“å°æœºå…±äº«ä¸€ä¸ªPoweredDeviceåŸºç±»ï¼Œè°è´Ÿè´£åˆ›å»ºå®ƒ?ç­”æ¡ˆæ˜¯ Copierã€‚Copier æ„é€ å‡½æ•° è´Ÿè´£åˆ›å»ºPoweredDeviceã€‚å› æ­¤ï¼Œè¿™æ˜¯ç¬¬ä¸€æ¬¡ å…è®¸Copierç›´æ¥è°ƒç”¨ éç›´çš„æ¥çˆ¶ç±» çš„æ„é€ å‡½æ•°ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &lt;iostream&gt; class PoweredDevice&#123;public: PoweredDevice(int power) &#123; std::cout &lt;&lt; \"PoweredDevice: \" &lt;&lt; power &lt;&lt; '\\n'; &#125;&#125;; class Scanner: virtual public PoweredDevice // æ³¨æ„:PoweredDeviceç°åœ¨æ˜¯ä¸€ä¸ªè™šæ‹ŸåŸºç±»&#123;public: Scanner(int scanner, int power) : PoweredDevice(power) // åˆ›å»ºæ‰«æå¯¹è±¡éœ€è¦è¿™ä¸€è¡Œï¼Œä½†åœ¨æœ¬ä¾‹ä¸­å¿½ç•¥äº†è¿™ä¸€è¡Œ &#123; std::cout &lt;&lt; \"Scanner: \" &lt;&lt; scanner &lt;&lt; '\\n'; &#125;&#125;; class Printer: virtual public PoweredDevice // æ³¨æ„:PoweredDeviceç°åœ¨æ˜¯ä¸€ä¸ªè™šæ‹ŸåŸºç±»&#123;public: Printer(int printer, int power) : PoweredDevice(power) // åˆ›å»ºæ‰«æå¯¹è±¡éœ€è¦è¿™ä¸€è¡Œï¼Œä½†åœ¨æœ¬ä¾‹ä¸­å¿½ç•¥äº†è¿™ä¸€è¡Œ &#123; std::cout &lt;&lt; \"Printer: \" &lt;&lt; printer &lt;&lt; '\\n'; &#125;&#125;; class Copier: public Scanner, public Printer&#123;public: Copier(int scanner, int printer, int power) : PoweredDevice(power), // PoweredDeviceæ˜¯åœ¨è¿™é‡Œæ„å»ºçš„ Scanner(scanner, power), Printer(printer, power) &#123; &#125;&#125;;int main()&#123; Copier copier(1, 2, 3); return 0;&#125;ç»“æœï¼š123PoweredDevice: 3Scanner: 1Printer: 2å¦‚æ‚¨æ‰€è§ï¼ŒPoweredDeviceåªæ„é€ ä¸€æ¬¡ã€‚æœ‰ä¸€äº›ç»†èŠ‚ï¼Œå¦‚æœæˆ‘ä»¬ä¸æï¼Œé‚£å°±æ˜¯æˆ‘ä»¬çš„ç–å¿½ï¼šé¦–å…ˆï¼Œè™šåŸºç±»æ€»æ˜¯åœ¨éè™šåŸºç±»ä¹‹å‰åˆ›å»ºï¼Œè¿™ç¡®ä¿äº†æ‰€æœ‰çš„åŸº éƒ½åœ¨å®ƒä»¬çš„æ´¾ç”Ÿç±»ä¹‹å‰åˆ›å»ºã€‚å…¶æ¬¡ï¼Œæ³¨æ„Scanner å’Œ Printerçš„æ„é€ å‡½æ•°ä»ç„¶æœ‰å¯¹PoweredDeviceæ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚å½“åˆ›å»ºä¸€ä¸ªcopyå®ä¾‹æ—¶ï¼Œè¿™äº›æ„é€ å‡½æ•°è°ƒç”¨è¢«ç®€å•åœ°å¿½ç•¥ï¼Œå› ä¸ºcopierè´Ÿè´£åˆ›å»ºPoweredDeviceã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªScanneræˆ–Printerçš„å®ä¾‹ï¼Œå°†ä½¿ç”¨é‚£äº›æ„é€ å‡½æ•°è°ƒç”¨ï¼Œå¹¶åº”ç”¨å¸¸è§„ç»§æ‰¿è§„åˆ™ã€‚ç¬¬ä¸‰ï¼Œå¦‚æœä¸€ä¸ªç±»ç»§æ‰¿äº†ä¸€ä¸ªæˆ–å¤šä¸ªå…·æœ‰è™šçˆ¶ç±»çš„ç±»ï¼Œé‚£ä¹ˆæœ€æ´¾ç”Ÿçš„ç±»è´Ÿè´£æ„é€ è™šåŸºç±»ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œcopierç»§æ‰¿äº†Printerå’ŒScannerï¼Œå®ƒä»¬éƒ½æœ‰ä¸€ä¸ªPoweredDeviceè™šæ‹ŸåŸºç±»ã€‚copieræ˜¯æœ€æ´¾ç”Ÿçš„ç±»ï¼Œè´Ÿè´£åˆ›å»ºPoweredDeviceã€‚æ³¨æ„ï¼Œå³ä½¿åœ¨å•ä¸ªç»§æ‰¿æƒ…å†µä¸‹ä¹Ÿæ˜¯å¦‚æ­¤: å¦‚æœcopyæ˜¯ä»Printerå•ç‹¬ç»§æ‰¿çš„ï¼Œè€ŒPrinterå®é™…ä¸Šæ˜¯ä»PoweredDeviceç»§æ‰¿çš„ï¼Œé‚£ä¹ˆcopierä»ç„¶è´Ÿè´£åˆ›å»ºPoweredDeviceã€‚ç¬¬å››ï¼Œæ‰€æœ‰ç»§æ‰¿è™šåŸºç±»çš„ç±»éƒ½å°†æœ‰ä¸€ä¸ªè™šè¡¨ (å³ä½¿å®ƒä»¬é€šå¸¸æ²¡æœ‰è™šè¡¨) ï¼Œå› æ­¤å®ƒä»¬çš„å¤§å°ä¼šå¢å¤§ ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ã€‚å› ä¸ºScanner and Printer å®é™…ä¸Šæ˜¯ä»PoweredDeviceæ´¾ç”Ÿå‡ºæ¥çš„ï¼Œæ‰€ä»¥Copierå°†åªä½œä¸ºä¸€ä¸ªPoweredDeviceå­å¯¹è±¡ã€‚Scanner and Printer éƒ½éœ€è¦çŸ¥é“å¦‚ä½•æ‰¾åˆ°é‚£ä¸ªå•ç‹¬çš„PoweredDeviceå­å¯¹è±¡ï¼Œè¿™æ ·å®ƒä»¬å°±å¯ä»¥è®¿é—®å®ƒçš„æˆå‘˜(å› ä¸ºå®ƒä»¬æ¯•ç«Ÿæ˜¯ä»å®ƒæ´¾ç”Ÿå‡ºæ¥çš„)ã€‚è¿™é€šå¸¸æ˜¯é€šè¿‡ä¸€äº›è™šè¡¨ é­”æ³•æ¥å®Œæˆçš„(å®ƒå®é™…ä¸Šå°†æ¯ä¸ªå­ç±»çš„åç§»é‡å­˜å‚¨åˆ°PoweredDeviceå­å¯¹è±¡ä¸­)ã€‚","categories":[],"tags":[]},{"title":"C&C++/çº¯è™šå‡½æ•°ã€æŠ½è±¡åŸºç±»ã€æ¥å£ç±»","slug":"C&C++/çº¯è™šå‡½æ•°ã€æŠ½è±¡åŸºç±»ã€æ¥å£ç±»","date":"2020-05-15T00:52:29.292Z","updated":"2020-05-15T02:20:05.199Z","comments":true,"path":"archives/82369fbe.html","link":"","permalink":"https://longlongqin.github.io/archives/82369fbe.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/126-pure-virtual-functions-abstract-base-classes-and-interface-classes/çº¯è™š(æŠ½è±¡)å‡½æ•°ä¸ æŠ½è±¡åŸºç±»Pure virtual functionsï¼šçº¯è™šå‡½æ•°åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ç¼–å†™çš„æ‰€æœ‰è™šå‡½æ•°éƒ½æœ‰ä¸€ä¸ªä¸»ä½“(å®šä¹‰)ã€‚ä½†æ˜¯ï¼Œc++å…è®¸æ‚¨åˆ›å»ºä¸€ç§ç‰¹æ®Šçš„è™šå‡½æ•°ï¼Œç§°ä¸ºçº¯è™šå‡½æ•°(æˆ–æŠ½è±¡å‡½æ•°)ï¼Œå®ƒå®Œå…¨æ²¡æœ‰å®ä½“!ä¸€ä¸ªçº¯è™šå‡½æ•°åªæ˜¯ä½œä¸ºä¸€ä¸ªå ä½ç¬¦ï¼Œå®ƒå°†è¢«æ´¾ç”Ÿç±»é‡æ–°å®šä¹‰ã€‚è¦åˆ›å»ºä¸€ä¸ªçº¯è™šå‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸ºå‡½æ•°å®šä¹‰ä¸€ä¸ªä¸»ä½“ï¼Œæˆ‘ä»¬åªéœ€å°†å‡½æ•°èµ‹å€¼ä¸º0ã€‚1234567891011class Base&#123;public: const char* sayHi() &#123; return \"Hi\"; &#125; // a normal non-virtual function virtual const char* getName() &#123; return \"Base\"; &#125; // a normal virtual function virtual int getValue() = 0; // çº¯è™šå‡½æ•° int doSomething() = 0; // ç¼–è¯‘é”™è¯¯:æ— æ³•å°†éè™šå‡½æ•°è®¾ç½®ä¸º0&#125;;å½“æˆ‘ä»¬å‘ç±»æ·»åŠ ä¸€ä¸ªçº¯è™šå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨è¯´ï¼Œâ€œå®ç°è¿™ä¸ªå‡½æ•°å–å†³äºæ´¾ç”Ÿç±»â€ã€‚ä½¿ç”¨çº¯è™šå‡½æ•°æœ‰ä¸¤ä¸ªä¸»è¦çš„ç»“æœ:é¦–å…ˆï¼Œä»»ä½•å¸¦æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªçº¯è™šå‡½æ•°çš„ç±»éƒ½å˜æˆäº†ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œè¿™æ„å‘³ç€å®ƒä¸èƒ½è¢«å®ä¾‹åŒ–!12345678//è€ƒè™‘ä¸€ä¸‹å¦‚æœæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªBaseå®ä¾‹ä¼šå‘ç”Ÿä»€ä¹ˆ:int mian()&#123; Base base; // æˆ‘ä»¬ä¸èƒ½å®ä¾‹åŒ–ä¸€ä¸ªæŠ½è±¡åŸºç±»â­ï¼Œä½†æ˜¯ä¸ºäº†ä¸¾ä¾‹è¯´æ˜ï¼Œå‡è®¾è¿™æ˜¯å…è®¸çš„ base.getValue(); // what would this do? return 0;&#125;å› ä¸ºæ²¡æœ‰getValue()çš„å®šä¹‰ï¼Œé‚£ä¹ˆbase.getValue()è§£ææˆä»€ä¹ˆå‘¢?å…¶æ¬¡ï¼Œä»»ä½•æ´¾ç”Ÿç±»éƒ½å¿…é¡»ä¸ºè¿™ä¸ªå‡½æ•°å®šä¹‰ä¸€ä¸ªä¸»ä½“ï¼Œå¦åˆ™è¿™ä¸ªæ´¾ç”Ÿç±»ä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ã€‚ä¸€ä¸ªçº¯è™šå‡½æ•°çš„ä¾‹å­è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªçº¯è™šå‡½æ•°çš„ä¾‹å­ã€‚åœ¨å‰ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„åŠ¨ç‰©åŸºç±»ï¼Œå¹¶ä»ä¸­æ´¾ç”Ÿäº†ä¸€ä¸ªCatç±»ã€‚è¿™æ˜¯æˆ‘ä»¬ç•™ä¸‹çš„ä»£ç :12345678910111213141516171819202122232425262728#include &lt;string&gt;class Animal&#123;protected: std::string m_name; //æˆ‘ä»¬ä½¿è¿™ä¸ªæ„é€ å‡½æ•°å—ä¿æŠ¤ï¼Œå› ä¸º //æˆ‘ä»¬ä¸å¸Œæœ›äººä»¬ç›´æ¥åˆ›å»ºåŠ¨ç‰©å¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¸Œæœ›æ´¾ç”Ÿç±»èƒ½å¤Ÿä½¿ç”¨å®ƒã€‚ Animal(std::string name) : m_name(name) &#123; &#125; public: std::string getName() &#123; return m_name; &#125; virtual const char* speak() &#123; return \"???\"; &#125;&#125;; class Cat: public Animal&#123;public: Cat(std::string name) : Animal(name) &#123; &#125; virtual const char* speak() &#123; return \"Meow\"; &#125;&#125;;æˆ‘ä»¬é€šè¿‡ä½¿æ„é€ å‡½æ•°å—ä¿æŠ¤æ¥é˜»æ­¢äººä»¬åˆ†é…Animalç±»å‹çš„å¯¹è±¡ã€‚ç„¶è€Œï¼Œè¿™æ ·åšæœ‰ä¸¤ä¸ªé—®é¢˜:æ„é€ å‡½æ•°ä»ç„¶å¯ä»¥ä»æ´¾ç”Ÿç±»ä¸­è®¿é—®ï¼Œè¿™ä½¿å¾—å®ä¾‹åŒ–ä¸€ä¸ªAnimalå¯¹è±¡æˆä¸ºå¯èƒ½ã€‚ä»ç„¶å¯ä»¥åˆ›å»ºä¸é‡æ–°å®šä¹‰å‡½æ•°speak()çš„æ´¾ç”Ÿç±»ã€‚å¦‚ï¼š12345678910111213141516171819202122#include &lt;iostream&gt;class Cow: public Animal&#123;public: Cow(std::string name) : Animal(name) &#123; &#125; // We forgot to redefine speak&#125;; int main()&#123; Cow cow(\"Betsy\"); std::cout &lt;&lt; cow.getName() &lt;&lt; \" says \" &lt;&lt; cow.speak() &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/Betsy says ???å‘ç”Ÿäº†ä»€ä¹ˆäº‹? æˆ‘ä»¬å¿˜è®°äº†é‡æ–°å®šä¹‰å‡½æ•°speak()ï¼Œå› æ­¤cow.Speak()è§£æä¸ºAnimal.speak()ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚æ›´å¥½çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨çº¯è™šå‡½æ•°:123456789101112131415#include &lt;string&gt;class Animal // è¿™ä¸ªåŠ¨ç‰©æ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»&#123;protected: std::string m_name; public: Animal(std::string name) : m_name(name) &#123; &#125; std::string getName() &#123; return m_name; &#125; virtual const char* speak() = 0; // æ³¨æ„ï¼Œspeakç°åœ¨æ˜¯ä¸€ä¸ªçº¯è™šå‡½æ•°&#125;;è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ã€‚speak()ç°åœ¨æ˜¯ä¸€ä¸ªçº¯è™šå‡½æ•°ã€‚è¿™æ„å‘³ç€Animalç°åœ¨æ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦ä½¿æ„é€ å‡½æ•°ä¸ºprotected(å°½ç®¡å®ƒä¸ä¼šé€ æˆä¼¤å®³)ã€‚å…¶æ¬¡ï¼Œå› ä¸ºæˆ‘ä»¬çš„Cowç±»æ´¾ç”Ÿè‡ªAnimalï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰å®šä¹‰Cow::speak()ï¼Œ æ‰€ä»¥Cowä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ã€‚ç°åœ¨ï¼Œå½“æˆ‘ä»¬è¯•å›¾ç¼–è¯‘è¿™æ®µä»£ç :12345678910111213141516171819#include &lt;iostream&gt;class Cow: public Animal&#123;public: Cow(std::string name) : Animal(name) &#123; &#125; // We forgot to redefine speak&#125;; int main()&#123; Cow cow(\"Betsy\"); std::cout &lt;&lt; cow.getName() &lt;&lt; \" says \" &lt;&lt; cow.speak() &lt;&lt; '\\n'; return 0;&#125;ç¼–è¯‘å™¨ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªè­¦å‘Šï¼Œå› ä¸ºCowæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œæˆ‘ä»¬ä¸èƒ½åˆ›å»ºæŠ½è±¡åŸºç±»çš„å®ä¾‹:123C:\\Test.cpp(141) : error C2259: 'Cow' : cannot instantiate abstract class due to following members: C:Test.cpp(128) : see declaration of 'Cow'C:\\Test.cpp(141) : warning C4259: 'const char *__thiscall Animal::speak(void)' : pure virtual function was not definedè¿™å‘Šè¯‰æˆ‘ä»¬ï¼Œåªæœ‰å½“Cowä¸ºspeak()æä¾›äº†ä¸€ä¸ªä¸»ä½“æ—¶ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿå®ä¾‹åŒ–Cowã€‚ä¿®æ”¹åçš„ä»£ç ï¼š12345678910111213141516171819202122#include &lt;iostream&gt;class Cow: public Animal&#123;public: Cow(std::string name) : Animal(name) &#123; &#125; virtual const char* speak() &#123; return \"Moo\"; &#125;&#125;; int main()&#123; Cow cow(\"Betsy\"); std::cout &lt;&lt; cow.getName() &lt;&lt; \" says \" &lt;&lt; cow.speak() &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/Betsy says Mooå½“æˆ‘ä»¬æƒ³è¦å°†ä¸€ä¸ªå‡½æ•°æ”¾å…¥åŸºç±»ä¸­ï¼Œä½†åªæœ‰æ´¾ç”Ÿç±»çŸ¥é“å®ƒåº”è¯¥è¿”å›ä»€ä¹ˆæ—¶ï¼Œçº¯è™šå‡½æ•°æ˜¯æœ‰ç”¨çš„ã€‚çº¯è™šå‡½æ•°ä½¿åŸºç±»æ— æ³•å®ä¾‹åŒ–ï¼Œæ´¾ç”Ÿç±»è¢«è¿«åœ¨å®ä¾‹åŒ–è¿™äº›å‡½æ•°ä¹‹å‰å®šä¹‰å®ƒä»¬ã€‚è¿™æœ‰åŠ©äºç¡®ä¿æ´¾ç”Ÿç±»ä¸ä¼šå¿˜è®°é‡æ–°å®šä¹‰åŸºç±»æ‰€æœŸæœ›çš„å‡½æ•°ã€‚å¸¦æœ‰ä¸»ä½“çš„çº¯è™šå‡½æ•°äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å…·æœ‰è‚‰ä½“çš„çº¯è™šå‡½æ•°:1234567891011121314151617181920#include &lt;string&gt;class Animal // è¿™ä¸ªAnimalæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»&#123;protected: std::string m_name; public: Animal(std::string name) : m_name(name) &#123; &#125; std::string getName() &#123; return m_name; &#125; virtual const char* speak() = 0; // The = 0 è¡¨ç¤ºè¿™ä¸ªå‡½æ•°æ˜¯çº¯è™šå‡½æ•°&#125;; const char* Animal::speak() // å³ä½¿å®ƒæœ‰èº«ä½“&#123; return \"buzz\";&#125;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œspeak()ä»ç„¶è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªçº¯è™šå‡½æ•°(å› ä¸ºâ€œ= 0â€ï¼Œå³ä½¿å·²ç»ç»™äº†å®ƒä¸€ä¸ªä¸»ä½“)ï¼ŒAnimalä»ç„¶è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»(å› æ­¤ä¸èƒ½è¢«å®ä¾‹åŒ–)ã€‚ä»»ä½•ç»§æ‰¿è‡ªAnimalçš„ç±»éƒ½éœ€è¦ä¸ºspeak()æä¾›è‡ªå·±çš„å®šä¹‰ï¼Œå¦åˆ™ä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ã€‚å½“ä¸ºçº¯è™šå‡½æ•°æä¾›æ­£æ–‡æ—¶ï¼Œå¿…é¡»å•ç‹¬æä¾›æ­£æ–‡(ä¸æ˜¯å†…è”çš„)ã€‚å½“æ‚¨å¸Œæœ›åŸºç±»ä¸ºå‡½æ•°æä¾›é»˜è®¤å®ç°ï¼Œä½†ä»ç„¶å¼ºåˆ¶ä»»ä½•æ´¾ç”Ÿç±»æä¾›å®ƒä»¬è‡ªå·±çš„å®ç°æ—¶ï¼Œæ­¤èŒƒä¾‹éå¸¸æœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ´¾ç”Ÿç±»å¯¹åŸºç±»æä¾›çš„é»˜è®¤å®ç°æ„Ÿåˆ°æ»¡æ„ï¼Œå®ƒå¯ä»¥ç›´æ¥è°ƒç”¨åŸºç±»å®ç°ã€‚ä¾‹å¦‚ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#include &lt;string&gt;#include &lt;iostream&gt; class Animal // This Animal is an abstract base class&#123;protected: std::string m_name; public: Animal(std::string name) : m_name(name) &#123; &#125; std::string getName() &#123; return m_name; &#125; virtual const char* speak() = 0; // note that speak is a pure virtual function&#125;; const char* Animal::speak()&#123; return \"buzz\"; // some default implementation&#125; class Dragonfly: public Animal&#123; public: Dragonfly(std::string name) : Animal(name) &#123; &#125; virtual const char* speak() //â­ ä¸ªç±»ä¸å†æ˜¯æŠ½è±¡çš„ï¼Œå› ä¸ºæˆ‘ä»¬å®šä¹‰äº†è¿™ä¸ªå‡½æ•° &#123; return Animal::speak(); // ä½¿ç”¨Animalçš„é»˜è®¤å®ç°i &#125;&#125;; int main()&#123; Dragonfly dfly(\"Sally\"); std::cout &lt;&lt; dfly.getName() &lt;&lt; \" says \" &lt;&lt; dfly.speak() &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/Sally says buzzè¿™ç§åŠŸèƒ½å¹¶ä¸å¸¸ç”¨ã€‚æ¥å£ç±»Interface classes ï¼š æ¥å£ç±»æ¥å£ç±»æ˜¯ä¸€ä¸ªæ²¡æœ‰æˆå‘˜å˜é‡çš„ç±»ï¼Œå…¶ä¸­æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯çº¯è™šçš„!æ¢å¥è¯è¯´ï¼Œè¯¥ç±»çº¯ç²¹æ˜¯ä¸€ä¸ªå®šä¹‰ï¼Œæ²¡æœ‰å®é™…çš„å®ç°ã€‚å½“æ‚¨æƒ³å®šä¹‰æ´¾ç”Ÿç±»å¿…é¡»å®ç°çš„åŠŸèƒ½ï¼Œä½†å°†æ´¾ç”Ÿç±»å¦‚ä½•å®ç°è¯¥åŠŸèƒ½çš„ç»†èŠ‚å®Œå…¨ç•™ç»™æ´¾ç”Ÿç±»æ—¶ï¼Œæ¥å£æ˜¯æœ‰ç”¨çš„ã€‚æ¥å£ç±»é€šå¸¸ä»¥Iå¼€å¤´ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹æ¥å£ç±»:123456789101112class IerrorLog&#123;public: virtual bool openLog(const char *filename) = 0; virtual bool closeLog() = 0; virtual bool writeError(const char *errorMessage) = 0; // åˆ›å»ºä¸€ä¸ªè™šææ„å‡½æ•°ï¼Œå‡è®¾æˆ‘ä»¬åˆ é™¤ä¸€ä¸ªIErrorLogæŒ‡é’ˆï¼Œ // è¿™æ ·å°±å¯ä»¥è°ƒç”¨æ­£ç¡®çš„æ´¾ç”Ÿææ„å‡½æ•° virtual ~IErrorLog() &#123;&#125; &#125;;ä»IErrorLogç»§æ‰¿çš„ä»»ä½•ç±»å¿…é¡»ä¸ºæ‰€æœ‰ä¸‰ä¸ªå‡½æ•°æä¾›å®ç°ï¼Œä»¥ä¾¿å®ä¾‹åŒ–ã€‚æ‚¨å¯ä»¥æ´¾ç”Ÿä¸€ä¸ªåä¸ºFileErrorLogçš„ç±»ï¼Œå…¶ä¸­ï¼šopenLog()æ‰“å¼€ç£ç›˜ä¸Šçš„æ–‡ä»¶ï¼ŒcloseLog()å…³é—­æ–‡ä»¶ï¼ŒwriteError()å°†æ¶ˆæ¯å†™å…¥æ–‡ä»¶ã€‚æ‚¨å¯ä»¥æ´¾ç”Ÿå¦ä¸€ä¸ªåä¸ºScreenErrorLogçš„ç±»ï¼Œå…¶ä¸­openLog()å’ŒcloseLog()ä»€ä¹ˆéƒ½ä¸åšï¼ŒwriteError()åœ¨å±å¹•ä¸Šçš„å¼¹å‡ºæ¶ˆæ¯æ¡†ä¸­æ‰“å°æ¶ˆæ¯ã€‚ç°åœ¨ï¼Œå‡è®¾æ‚¨éœ€è¦ç¼–å†™ä¸€äº›ä½¿ç”¨é”™è¯¯æ—¥å¿—çš„ä»£ç ã€‚å¦‚æœæ‚¨ç¼–å†™çš„ä»£ç ä¸­ç›´æ¥åŒ…å«äº†FileErrorLogæˆ–ScreenErrorLogï¼Œé‚£ä¹ˆæ‚¨å®é™…ä¸Šæ˜¯åœ¨ä½¿ç”¨è¿™ç§é”™è¯¯æ—¥å¿—(è‡³å°‘åœ¨ä¸é‡æ–°ç¼–å†™ç¨‹åºçš„æƒ…å†µä¸‹)ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‡½æ•°æœ‰æ•ˆåœ°è¿«ä½¿mySqrt()çš„è°ƒç”¨è€…ä½¿ç”¨FileErrorLogï¼Œè¿™å¯èƒ½æ˜¯ä»–ä»¬æƒ³è¦çš„ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯ã€‚1234567891011#include &lt;cmath&gt; // for sqrt()double mySqrt(double value, FileErrorLog &amp;log)&#123; if (value &lt; 0.0) &#123; log.writeError(\"Tried to take square root of value less than 0\"); return 0.0; &#125; else return sqrt(value);&#125;å®ç°è¿™ä¸ªå‡½æ•°çš„ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨IErrorLog:1234567891011#include &lt;cmath&gt; // for sqrt()double mySqrt(double value, IErrorLog &amp;log)&#123; if (value &lt; 0.0) &#123; log.writeError(\"Tried to take square root of value less than 0\"); return 0.0; &#125; else return sqrt(value);&#125;ç°åœ¨ï¼Œè°ƒç”¨è€…å¯ä»¥ä¼ å…¥ä»»ä½•ç¬¦åˆIErrorLogæ¥å£çš„ç±»ã€‚â­å¦‚æœä»–ä»¬å¸Œæœ›é”™è¯¯è½¬ç§»åˆ°æ–‡ä»¶ä¸­ï¼Œä»–ä»¬å¯ä»¥ä¼ å…¥FileErrorLogçš„å®ä¾‹ã€‚å¦‚æœä»–ä»¬æƒ³è®©å®ƒæ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œä»–ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªScreenErrorLogå®ä¾‹ã€‚æˆ–è€…ï¼Œå¦‚æœä»–ä»¬æƒ³åšä¸€äº›æ‚¨ç”šè‡³æ²¡æœ‰æƒ³åˆ°çš„äº‹æƒ…ï¼Œæ¯”å¦‚åœ¨å‡ºç°é”™è¯¯æ—¶å‘æŸäººå‘é€ç”µå­é‚®ä»¶ï¼Œä»–ä»¬å¯ä»¥ä»IErrorLog(ä¾‹å¦‚EmailErrorLog)æ´¾ç”Ÿä¸€ä¸ªæ–°ç±»å¹¶ä½¿ç”¨å®ƒçš„ä¸€ä¸ªå®ä¾‹!é€šè¿‡ä½¿ç”¨IErrorLogï¼Œæ‚¨çš„å‡½æ•°å˜å¾—æ›´åŠ ç‹¬ç«‹å’Œçµæ´»ã€‚ä¸è¦å¿˜è®°ä¸ºæ‚¨çš„æ¥å£ç±»åŒ…å«ä¸€ä¸ªè™šææ„å‡½æ•°ï¼Œä»¥ä¾¿åœ¨åˆ é™¤æŒ‡å‘æ¥å£çš„æŒ‡é’ˆæ—¶è°ƒç”¨é€‚å½“çš„æ´¾ç”Ÿææ„å‡½æ•°ã€‚çº¯è™šå‡½æ•°ä¸è™šè¡¨æŠ½è±¡ç±»ä»ç„¶æœ‰è™šè¡¨ï¼Œå› ä¸ºå¦‚æœæœ‰æŒ‡å‘æŠ½è±¡ç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨è™šè¡¨ã€‚çº¯è™šå‡½æ•°çš„è™šè¡¨æ¡ç›®é€šå¸¸è¦ä¹ˆåŒ…å«ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œè¦ä¹ˆæŒ‡å‘ä¸€ä¸ªæ³›å‹å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰æä¾›è¦†ç›–ï¼Œè¿™ä¸ªæ³›å‹å‡½æ•°ä¼šè¾“å‡ºä¸€ä¸ªé”™è¯¯(æœ‰æ—¶è¿™ä¸ªå‡½æ•°è¢«å‘½åä¸º_purecall)ã€‚","categories":[],"tags":[]},{"title":"C&C++/è™šè¡¨åŠéšè—çš„æŒ‡é’ˆ(__vptr)","slug":"C&C++/è™šè¡¨åŠéšè—çš„æŒ‡é’ˆ(__vptr)","date":"2020-05-14T14:37:27.654Z","updated":"2020-05-14T15:40:06.249Z","comments":true,"path":"archives/71c91a8.html","link":"","permalink":"https://longlongqin.github.io/archives/71c91a8.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/125-the-virtual-table/è™šè¡¨ä¸ºäº†å®ç°è™šå‡½æ•°ï¼Œc++ä½¿ç”¨äº†ä¸€ç§ç‰¹æ®Šçš„åæœŸç»‘å®šå½¢å¼ï¼Œç§°ä¸ºè™šè¡¨ã€‚è™šè¡¨æ˜¯ç”¨äºä»¥ åŠ¨æ€/åæœŸç»‘å®šæ–¹å¼ è§£æå‡½æ•°è°ƒç”¨ çš„å‡½æ•°çš„æŸ¥æ‰¾è¡¨ã€‚è™šè¡¨æœ‰æ—¶ä½¿ç”¨å…¶ä»–åç§°ï¼šè™šå‡½æ•°è¡¨ã€è°ƒåº¦è¡¨ã€â€¦.â€œvtableâ€, â€œvirtual function tableâ€, â€œvirtual method tableâ€, or â€œdispatch tableâ€.è™šè¡¨å®é™…ä¸Šéå¸¸ç®€å•ï¼Œè™½ç„¶ç”¨æ–‡å­—æè¿°æœ‰ç‚¹å¤æ‚ã€‚é¦–å…ˆï¼Œæ¯ä¸ªä½¿ç”¨è™šå‡½æ•°çš„ç±» (æˆ–æ´¾ç”Ÿè‡ªä½¿ç”¨è™šå‡½æ•°çš„ç±») éƒ½æœ‰è‡ªå·±çš„è™šè¡¨ã€‚è¿™ä¸ªè¡¨åªæ˜¯ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶è®¾ç½®çš„ä¸€ä¸ªé™æ€æ•°ç»„ã€‚è™šè¡¨åŒ…å«ä¸€ä¸ªæ¡ç›®ï¼Œè®°å½•äº†ï¼šæ¯ä¸ªè™šå‡½æ•°å¯ä»¥è¢«è°ƒç”¨çš„ç±»çš„å¯¹è±¡ã€‚è¿™ä¸ªè¡¨ä¸­çš„æ¯ä¸ªæ¡ç›®éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥ç±»å¯è®¿é—®çš„æ´¾ç”Ÿç¨‹åº¦æœ€é«˜çš„å‡½æ•°ã€‚å…¶æ¬¡ï¼Œç¼–è¯‘å™¨è¿˜å‘åŸºç±»æ·»åŠ äº†ä¸€ä¸ªéšè—æŒ‡é’ˆï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º *__vptrã€‚*__vptråœ¨åˆ›å»ºç±»å®ä¾‹æ—¶è®¾ç½®(è‡ªåŠ¨)ï¼Œä»¥ä¾¿å®ƒæŒ‡å‘è¯¥ç±»çš„è™šè¡¨ã€‚thisæŒ‡é’ˆï¼Œå®ƒå®é™…ä¸Šæ˜¯ç¼–è¯‘å™¨ç”¨æ¥è§£æè‡ªå¼•ç”¨çš„*å‡½æ•°å‚æ•°***__vptrï¼šæ˜¯ä¸€ä¸ªçœŸå®çš„æŒ‡é’ˆï¼Œå®ƒä½¿åˆ†é…çš„æ¯ä¸ªç±»å¯¹è±¡çš„å¤§å°å¢åŠ ä¸€ä¸ªæŒ‡é’ˆã€‚è¿™ä¹Ÿæ„å‘³ç€*__vptræ˜¯ç”±æ´¾ç”Ÿç±»ç»§æ‰¿çš„ï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å¯èƒ½å¯¹è¿™äº›ä¸œè¥¿æ˜¯å¦‚ä½•ç»„åˆåœ¨ä¸€èµ·çš„æ„Ÿåˆ°å›°æƒ‘ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­:123456789101112131415161718class Base&#123;public: virtual void function1() &#123;&#125;; virtual void function2() &#123;&#125;;&#125;; class D1: public Base&#123;public: virtual void function1() &#123;&#125;;&#125;; class D2: public Base&#123;public: virtual void function2() &#123;&#125;;&#125;;å› ä¸ºè¿™é‡Œæœ‰3ä¸ªç±»ï¼Œç¼–è¯‘å™¨å°†è®¾ç½®3ä¸ªè™šè¡¨: ä¸€ä¸ªç”¨äºBaseï¼Œä¸€ä¸ªç”¨äºD1ï¼Œä¸€ä¸ªç”¨äºD2ã€‚éšè—æŒ‡é’ˆç¼–è¯‘å™¨è¿˜å‘ä½¿ç”¨è™šå‡½æ•°çš„æœ€åŸºç±»æ·»åŠ ä¸€ä¸ªéšè—æŒ‡é’ˆã€‚è™½ç„¶ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿™æ ·åšï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒæ”¾åœ¨ä¸‹ä¸€ä¸ªä¾‹å­ï¼Œåªæ˜¯ä¸ºäº†æ˜¾ç¤ºå®ƒæ˜¯åœ¨å“ªé‡Œæ·»åŠ çš„:12345678910111213141516171819class Base&#123;public: FunctionPointer *__vptr; virtual void function1() &#123;&#125;; virtual void function2() &#123;&#125;;&#125;; class D1: public Base&#123;public: virtual void function1() &#123;&#125;;&#125;; class D2: public Base&#123;public: virtual void function2() &#123;&#125;;&#125;;å½“åˆ›å»ºä¸€ä¸ªç±»å¯¹è±¡æ—¶ï¼Œ*__vptrè¢«è®¾ç½®ä¸ºæŒ‡å‘è¯¥ç±»çš„è™šè¡¨ã€‚ä¾‹å¦‚ï¼šå½“åˆ›å»ºäº†ä¸€ä¸ªBaseç±»å‹çš„å¯¹è±¡æ—¶ï¼Œ*__vptrè¢«è®¾ç½®ä¸ºæŒ‡å‘Baseçš„è™šè¡¨ã€‚å½“æ„é€ D1æˆ–D2ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œ*__vptrè¢«è®¾ç½®ä¸ºåˆ†åˆ«æŒ‡å‘D1æˆ–D2çš„è™šè¡¨ã€‚è™šè¡¨å¦‚ä½•ç”Ÿæˆçš„ï¼Ÿç°åœ¨ï¼Œè®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹è¿™äº›è™šæ‹Ÿè¡¨æ˜¯å¦‚ä½•å¡«å†™çš„ã€‚å› ä¸ºè¿™é‡Œåªæœ‰ä¸¤ä¸ªè™šå‡½æ•°ï¼Œæ¯ä¸ªè™šè¡¨å°†æœ‰ä¸¤ä¸ªæ¡ç›®(ä¸€ä¸ªç”¨äºfunction1()ï¼Œå¦ä¸€ä¸ªç”¨äºfunction2())ã€‚è¯·è®°ä½ï¼Œå½“è¿™äº›è™šè¡¨è¢«å¡«æ»¡æ—¶ï¼Œæ¯ä¸ªæ¡ç›®éƒ½å¡«æ»¡äº†è¯¥ç±»ç±»å‹çš„å¯¹è±¡å¯ä»¥è°ƒç”¨çš„æ´¾ç”Ÿç¨‹åº¦æœ€é«˜çš„å‡½æ•°ã€‚åŸºç±»å¯¹è±¡çš„è™šè¡¨å¾ˆç®€å•ã€‚Baseç±»å‹çš„å¯¹è±¡åªèƒ½è®¿é—®Baseçš„æˆå‘˜ã€‚Baseä¸èƒ½è®¿é—®D1æˆ–D2å‡½æ•°ã€‚å› æ­¤ï¼Œfunction1çš„å…¥å£æŒ‡å‘Base::function1()ï¼Œè€Œfunction2çš„å…¥å£æŒ‡å‘Base::function2()ã€‚D1çš„è™šè¡¨ç¨å¾®å¤æ‚ä¸€äº›ã€‚ç±»å‹D1çš„å¯¹è±¡å¯ä»¥è®¿é—®D1å’ŒBaseçš„æˆå‘˜ã€‚ä½†æ˜¯ï¼ŒD1å·²ç»è¦†ç›–äº†function1()ï¼Œä½¿å¾—D1::function1()æ¯”Base::function1()æ›´æ´¾ç”Ÿã€‚å› æ­¤ï¼Œfunction1çš„æ¡ç›®æŒ‡å‘D1::function1()ã€‚D1æ²¡æœ‰è¦†ç›–function2()ï¼Œå› æ­¤function2çš„æ¡ç›®å°†æŒ‡å‘Base::function2()ã€‚D2çš„è™šè¡¨ç±»ä¼¼äºD1ï¼Œé™¤äº†function1çš„æ¡ç›®æŒ‡å‘Base::function1()ï¼Œè€Œfunction2çš„æ¡ç›®æŒ‡å‘D2::function2()ã€‚å°±åƒä¸‹é¢è¿™ä¸ªå›¾æ˜¾ç¤ºçš„ä¸€æ ·ï¼šå°½ç®¡è¿™ä¸ªå›¾çœ‹èµ·æ¥æœ‰ç‚¹ç–¯ç‹‚ï¼Œä½†å®ƒç¡®å®éå¸¸ç®€å•: æ¯ä¸ªç±»ä¸­çš„* vptræŒ‡å‘è¯¥ç±»çš„è™šè¡¨ã€‚ è™šè¡¨ä¸­çš„æ¡ç›®æŒ‡å‘è¯¥ç±»çš„å‡½æ•°å¯¹è±¡çš„æ´¾ç”Ÿç¨‹åº¦æœ€é«˜çš„ç‰ˆæœ¬ã€‚é€šè¿‡ä¾‹å­ç†è§£è™šè¡¨ä¸éšè—æŒ‡é’ˆè€ƒè™‘ä¸€ä¸‹å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªD1ç±»å‹çš„å¯¹è±¡æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ:1234int main()&#123; D1 d1;&#125;å› ä¸ºd1æ˜¯D1å¯¹è±¡ï¼Œd1å°†å®ƒçš„*__vptr æŒ‡å‘ä¸ºd1è™šè¡¨ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªæŒ‡å‘D1çš„åŸºæŒ‡é’ˆ:1234567int main()&#123; D1 d1; Base *dPtr = &amp;d1; return 0;&#125;æ³¨æ„ï¼Œå› ä¸ºdPtræ˜¯ä¸€ä¸ªåŸºæŒ‡é’ˆï¼Œæ‰€ä»¥å®ƒåªæŒ‡å‘d1çš„åŸºéƒ¨åˆ†ã€‚ä½†æ˜¯ï¼Œè¿˜è¦æ³¨æ„ï¼Œ*__vpträ½äºç±»çš„åŸºéƒ¨åˆ†ï¼Œå› æ­¤dPtrå¯ä»¥è®¿é—®è¿™ä¸ªæŒ‡é’ˆã€‚æœ€åï¼Œè¯·æ³¨æ„dPtr-&gt;__vptræŒ‡å‘D1è™šè¡¨! å› æ­¤ï¼Œå³ä½¿dPtrçš„ç±»å‹æ˜¯Baseï¼Œå®ƒä»ç„¶å¯ä»¥è®¿é—®D1çš„è™šæ‹Ÿè¡¨(é€šè¿‡ __vptr)ã€‚é‚£ä¹ˆï¼Œå½“æˆ‘ä»¬å°è¯•è°ƒç”¨dPtr-&gt;function1()æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢?12345678int main()&#123; D1 d1; Base *dPtr = &amp;d1; dPtr-&gt;function1(); return 0;&#125;é¦–å…ˆï¼Œç¨‹åºè®¤è¯†åˆ°function1()æ˜¯ä¸€ä¸ªè™šå‡½æ•°ã€‚å…¶æ¬¡ï¼Œç¨‹åºä½¿ç”¨dPtr-&gt; vptræ¥è®¿é—®D1çš„è™šæ‹Ÿè¡¨ã€‚ç¬¬ä¸‰ï¼ŒæŸ¥æ‰¾function1()è°ƒç”¨D1çš„è™šè¡¨çš„ç‰ˆæœ¬ã€‚è¿™å·²ç»è®¾ç½®ä¸ºD1::function1()ã€‚å› æ­¤ï¼ŒdPtr-&gt;function1()è§£æä¸ºD1::function1()!é€šè¿‡ä½¿ç”¨è¿™äº›è¡¨ï¼Œç¼–è¯‘å™¨å’Œç¨‹åºèƒ½å¤Ÿç¡®ä¿å‡½æ•°è°ƒç”¨è§£æåˆ°é€‚å½“çš„è™šå‡½æ•°ï¼Œå³ä½¿æ‚¨åªä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆæˆ–å¯¹åŸºç±»çš„å¼•ç”¨!è°ƒç”¨è™šå‡½æ•°æ¯”è°ƒç”¨éè™šå‡½æ•°æ…¢1ã€è°ƒç”¨è™šå‡½æ•°æ¯”è°ƒç”¨éè™šå‡½æ•°æ…¢ï¼ŒåŸå› å¦‚ä¸‹:é¦–å…ˆï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨*__vptræ¥è®¿é—®é€‚å½“çš„è™šè¡¨ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºè™šè¡¨å»ºç«‹ç´¢å¼•ï¼Œä»¥æ‰¾åˆ°è¦è°ƒç”¨çš„æ­£ç¡®å‡½æ•°ã€‚åªæœ‰è¿™æ ·æˆ‘ä»¬æ‰èƒ½è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚å¼€å§‹è°ƒç”¨å‡½æ•°å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»æ‰§è¡Œ3ä¸ªæ“ä½œæ¥æ‰¾åˆ°è¦è°ƒç”¨çš„å‡½æ•°ï¼Œè€Œä¸æ˜¯å¯¹æ™®é€šçš„é—´æ¥å‡½æ•°è°ƒç”¨æ‰§è¡Œ2ä¸ªæ“ä½œï¼Œæˆ–è€…å¯¹ç›´æ¥å‡½æ•°è°ƒç”¨æ‰§è¡Œ1ä¸ªæ“ä½œã€‚ç„¶è€Œï¼Œå¯¹äºç°ä»£è®¡ç®—æœºæ¥è¯´ï¼Œè¿™äº›é¢å¤–çš„æ—¶é—´é€šå¸¸æ˜¯å¾®ä¸è¶³é“çš„ã€‚2ã€åŒæ ·éœ€è¦æé†’çš„æ˜¯ï¼Œä»»ä½•ä½¿ç”¨è™šå‡½æ•°çš„ç±»éƒ½æœ‰ä¸€ä¸ª__vptrï¼Œå› æ­¤å®ƒä½¿åˆ†é…çš„æ¯ä¸ªç±»å¯¹è±¡çš„å¤§å°å¢åŠ ä¸€ä¸ªæŒ‡é’ˆã€‚è™šæ‹Ÿå‡½æ•°éå¸¸å¼ºå¤§ï¼Œä½†æ˜¯å®ƒä»¬ä¹Ÿæœ‰æ€§èƒ½ä»£ä»·ã€‚","categories":[],"tags":[]},{"title":"C&C++/æ—©èµ·ç»‘å®šä¸åæœŸç»‘å®š","slug":"C&C++/æ—©èµ·ç»‘å®šä¸åæœŸç»‘å®š","date":"2020-05-14T14:14:36.723Z","updated":"2020-05-14T14:33:37.873Z","comments":true,"path":"archives/bc3a234a.html","link":"","permalink":"https://longlongqin.github.io/archives/bc3a234a.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/124-early-binding-and-late-binding/C++ç¨‹åºæ‰§è¡Œæ—¶CPUçš„å·¥ä½œåœ¨è¿™èŠ‚è¯¾å’Œä¸‹èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥äº†è§£è™šæ‹Ÿå‡½æ•°æ˜¯å¦‚ä½•å®ç°çš„ã€‚è™½ç„¶è¿™äº›ä¿¡æ¯å¯¹äºæœ‰æ•ˆåœ°ä½¿ç”¨è™šæ‹Ÿå‡½æ•°å¹¶ä¸æ˜¯ä¸¥æ ¼å¿…éœ€çš„ï¼Œä½†æ˜¯å®ƒå¾ˆæœ‰è¶£ã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸¤éƒ¨åˆ†éƒ½å½“ä½œå¯é€‰é˜…è¯»ã€‚å½“ä¸€ä¸ªc++ç¨‹åºè¢«æ‰§è¡Œæ—¶ï¼Œå®ƒæŒ‰é¡ºåºæ‰§è¡Œï¼Œä»main()çš„é¡¶éƒ¨å¼€å§‹ã€‚å½“é‡åˆ°å‡½æ•°è°ƒç”¨æ—¶ï¼Œæ‰§è¡Œç‚¹ä¼šè·³è½¬åˆ°è¢«è°ƒç”¨å‡½æ•°çš„å¼€å¤´ã€‚CPUæ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„?ç¼–è¯‘ç¨‹åºæ—¶ï¼Œç¼–è¯‘å™¨å°†c++ç¨‹åºä¸­çš„æ¯æ¡è¯­å¥è½¬æ¢æˆä¸€è¡Œæˆ–å¤šè¡Œæœºå™¨è¯­è¨€ã€‚æœºå™¨è¯­è¨€çš„æ¯ä¸€è¡Œéƒ½æœ‰å®ƒè‡ªå·±çš„å”¯ä¸€é¡ºåºåœ°å€ã€‚è¿™å¯¹äºå‡½æ•°æ¥è¯´æ²¡æœ‰ä»€ä¹ˆä¸åŒâ€”â€”å½“é‡åˆ°ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒè¢«è½¬æ¢æˆæœºå™¨è¯­è¨€å¹¶ç»™å‡ºä¸‹ä¸€ä¸ªå¯ç”¨çš„åœ°å€ã€‚å› æ­¤ï¼Œæ¯ä¸ªå‡½æ•°éƒ½ä»¥å”¯ä¸€çš„åœ°å€ç»“æŸã€‚ç»‘å®šç»‘å®šæ˜¯æŒ‡ç”¨äºå°†æ ‡è¯†ç¬¦ (å¦‚å˜é‡å’Œå‡½æ•°å) è½¬æ¢ä¸ºåœ°å€çš„è¿‡ç¨‹ã€‚è™½ç„¶ç»‘å®šåŒæ—¶ç”¨äºå˜é‡å’Œå‡½æ•°ï¼Œä½†åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹è®¨è®ºå‡½æ•°ç»‘å®šã€‚æ—©æœŸç»‘å®šæ—©æœŸç»‘å®šï¼ˆä¹Ÿç§°ä¸ºé™æ€ç»‘å®šï¼‰ï¼šè¡¨ç¤ºç¼–è¯‘å™¨(æˆ–é“¾æ¥å™¨) èƒ½å¤Ÿç›´æ¥å°† æ ‡è¯†ç¬¦åç§°(å¦‚å‡½æ•°æˆ–å˜é‡å) ä¸ æœºå™¨åœ°å€ ç›¸å…³è”ã€‚å› æ­¤ï¼Œå½“ç¼–è¯‘å™¨(æˆ–é“¾æ¥å™¨)é‡åˆ°ä¸€ä¸ªå‡½æ•°è°ƒç”¨æ—¶ï¼Œå®ƒä¼šç”¨ä¸€æ¡æœºå™¨è¯­è¨€æŒ‡ä»¤æ›¿æ¢è¯¥å‡½æ•°è°ƒç”¨ï¼Œè¯¥æŒ‡ä»¤å‘Šè¯‰CPUè·³è½¬åˆ°å‡½æ•°çš„åœ°å€ã€‚ç¼–è¯‘å™¨é‡åˆ°çš„å¤§å¤šæ•°å‡½æ•°è°ƒç”¨éƒ½æ˜¯ç›´æ¥çš„å‡½æ•°è°ƒç”¨ã€‚ç›´æ¥å‡½æ•°è°ƒç”¨æ˜¯ç›´æ¥è°ƒç”¨å‡½æ•°çš„è¯­å¥ã€‚ä¾‹å¦‚:123456789101112#include &lt;iostream&gt; void printValue(int value)&#123; std::cout &lt;&lt; value;&#125; int main()&#123; printValue(5); // è¿™æ˜¯ä¸€ä¸ªç›´æ¥çš„å‡½æ•°è°ƒç”¨ return 0;&#125;ç›´æ¥çš„å‡½æ•°è°ƒç”¨å¯ä»¥ä½¿ç”¨ç§°ä¸ºæ—©æœŸç»‘å®šçš„è¿›ç¨‹æ¥è§£å†³ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸ªä½¿ç”¨æ—©æœŸç»‘å®šçš„ç®€å•è®¡ç®—å™¨ç¨‹åº:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &lt;iostream&gt; int add(int x, int y)&#123; return x + y;&#125; int subtract(int x, int y)&#123; return x - y;&#125; int multiply(int x, int y)&#123; return x * y;&#125; int main()&#123; int x; std::cout &lt;&lt; \"Enter a number: \"; std::cin &gt;&gt; x; int y; std::cout &lt;&lt; \"Enter another number: \"; std::cin &gt;&gt; y; int op; do &#123; std::cout &lt;&lt; \"Enter an operation (0=add, 1=subtract, 2=multiply): \"; std::cin &gt;&gt; op; &#125; while (op &lt; 0 || op &gt; 2); int result = 0; switch (op) &#123; // ç›´æ¥ä½¿ç”¨æ—©æœŸç»‘å®šè°ƒç”¨ç›®æ ‡å‡½æ•° case 0: result = add(x, y); break; case 1: result = subtract(x, y); break; case 2: result = multiply(x, y); break; &#125; std::cout &lt;&lt; \"The answer is: \" &lt;&lt; result &lt;&lt; std::endl; return 0;&#125;å› ä¸ºadd()ã€subtract()å’Œmultiply()éƒ½æ˜¯ç›´æ¥çš„å‡½æ•°è°ƒç”¨ï¼Œç¼–è¯‘å™¨å°†ä½¿ç”¨æ—©æœŸç»‘å®šæ¥è§£æadd()ã€subtract()å’Œmultiply()å‡½æ•°è°ƒç”¨ã€‚ç¼–è¯‘å™¨å°†ç”¨ä¸€æ¡æœºå™¨è¯­è¨€æŒ‡ä»¤æ›¿æ¢add()å‡½æ•°è°ƒç”¨ï¼Œè¿™æ¡æŒ‡ä»¤å‘Šè¯‰CPUè·³è½¬åˆ°add()å‡½æ•°çš„åœ°å€ã€‚å¯¹äºsubtract() å’Œ multiply()åŒæ ·é€‚ç”¨ã€‚åæœŸç»‘å®šåœ¨æŸäº›ç¨‹åºä¸­ï¼Œç›´åˆ°è¿è¡Œæ—¶(ç¨‹åºè¿è¡Œæ—¶)æ‰çŸ¥é“å°†è°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚è¿™ç§°ä¸ºåæœŸç»‘å®š(æˆ–åŠ¨æ€ç»‘å®š)ã€‚åœ¨c++ä¸­ï¼Œè·å¾—åæœŸç»‘å®šçš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å‡½æ•°æŒ‡é’ˆã€‚ç®€å•å›é¡¾ä¸€ä¸‹å‡½æ•°æŒ‡é’ˆï¼Œå‡½æ•°æŒ‡é’ˆ æ˜¯ä¸€ç§æŒ‡å‘å‡½æ•°è€Œä¸æ˜¯å˜é‡çš„æŒ‡é’ˆã€‚å‡½æ•°æŒ‡é’ˆæŒ‡å‘çš„å‡½æ•° å¯ä»¥ä½¿ç”¨æŒ‡é’ˆä¸Šçš„ å‡½æ•°è°ƒç”¨æ“ä½œç¬¦(())æ¥è°ƒç”¨ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç è°ƒç”¨add()å‡½æ•°:123456789101112131415#include &lt;iostream&gt; int add(int x, int y)&#123; return x + y;&#125; int main()&#123; // åˆ›å»ºä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œä½¿å®ƒæŒ‡å‘ addå‡½æ•° int (*pFcn)(int, int) = add; std::cout &lt;&lt; pFcn(5, 3) &lt;&lt; std::endl; // add 5 + 3 return 0;&#125;é€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨å‡½æ•°ä¹Ÿç§°ä¸ºé—´æ¥å‡½æ•°è°ƒç”¨ã€‚ä¸‹é¢çš„è®¡ç®—å™¨ç¨‹åºåœ¨åŠŸèƒ½ä¸Šä¸ä¸Šé¢çš„è®¡ç®—å™¨ä¾‹å­ç›¸åŒï¼Œé™¤äº†å®ƒä½¿ç”¨äº†ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆè€Œä¸æ˜¯ç›´æ¥çš„å‡½æ•°è°ƒç”¨:123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#include &lt;iostream&gt; int add(int x, int y)&#123; return x + y;&#125; int subtract(int x, int y)&#123; return x - y;&#125; int multiply(int x, int y)&#123; return x * y;&#125; int main()&#123; int x; std::cout &lt;&lt; \"Enter a number: \"; std::cin &gt;&gt; x; int y; std::cout &lt;&lt; \"Enter another number: \"; std::cin &gt;&gt; y; int op; do &#123; std::cout &lt;&lt; \"Enter an operation (0=add, 1=subtract, 2=multiply): \"; std::cin &gt;&gt; op; &#125; while (op &lt; 0 || op &gt; 2); // åˆ›å»ºä¸€ä¸ªåä¸ºpFcnçš„å‡½æ•°æŒ‡é’ˆ(æ˜¯çš„ï¼Œè¯­æ³•å¾ˆéš¾çœ‹) int (*pFcn)(int, int) = nullptr; // è®¾ç½®pFcnæŒ‡å‘ç”¨æˆ·é€‰æ‹©çš„å‡½æ•° switch (op) &#123; case 0: pFcn = add; break; case 1: pFcn = subtract; break; case 2: pFcn = multiply; break; &#125; // ä»¥xå’Œyä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨pFcnæŒ‡å‘çš„å‡½æ•° // è¿™ä½¿ç”¨äº†åæœŸç»‘å®š std::cout &lt;&lt; \"The answer is: \" &lt;&lt; pFcn(x, y) &lt;&lt; std::endl; return 0;&#125;åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰ç›´æ¥è°ƒç”¨add()ã€subtract()æˆ–multiply()å‡½æ•°ï¼Œè€Œæ˜¯å°†pFcnè®¾ç½®ä¸ºæŒ‡å‘æˆ‘ä»¬å¸Œæœ›è°ƒç”¨çš„å‡½æ•°ã€‚ç„¶åé€šè¿‡æŒ‡é’ˆè°ƒç”¨å‡½æ•°ã€‚ç¼–è¯‘å™¨æ— æ³•ä½¿ç”¨æ—©æœŸç»‘å®šæ¥è§£æè°ƒç”¨pFcn(x, y)çš„å‡½æ•°ï¼Œå› ä¸ºå®ƒæ— æ³•åˆ¤æ–­åœ¨ç¼–è¯‘æ—¶pFcnå°†æŒ‡å‘å“ªä¸ªå‡½æ•°!å¯¹æ¯”æ—©æœŸç»‘å®šã€åæœŸç»‘å®šåæœŸç»‘å®šçš„æ•ˆç‡ç¨ä½ä¸€äº›ï¼Œå› ä¸ºå®ƒæ¶‰åŠé¢å¤–çš„é—´æ¥çº§åˆ«ã€‚ä½¿ç”¨åæœŸç»‘å®šï¼Œç¨‹åºå¿…é¡»è¯»å–æŒ‡é’ˆä¸­ä¿å­˜çš„åœ°å€ï¼Œç„¶åè·³è½¬åˆ°è¯¥åœ°å€ã€‚è¿™æ¶‰åŠä¸€ä¸ªé¢å¤–çš„æ­¥éª¤ï¼Œä½¿å®ƒç¨å¾®æ…¢ä¸€äº›ã€‚ä½†æ˜¯ï¼ŒåæœŸç»‘å®šçš„ä¼˜ç‚¹æ˜¯å®ƒæ¯”æ—©æœŸç»‘å®šæ›´çµæ´»ï¼Œå› ä¸ºç›´åˆ°è¿è¡Œæ—¶æ‰éœ€è¦å†³å®šè°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚é€šè¿‡æ—©æœŸç»‘å®šï¼ŒCPUå¯ä»¥ç›´æ¥è·³è½¬åˆ°å‡½æ•°çš„åœ°å€ã€‚","categories":[],"tags":[]},{"title":"C&C++/è™šæ‹Ÿææ„å‡½æ•°","slug":"C&C++/è™šæ‹Ÿææ„å‡½æ•°","date":"2020-05-14T09:53:44.600Z","updated":"2020-05-14T14:13:05.368Z","comments":true,"path":"archives/6a3f4577.html","link":"","permalink":"https://longlongqin.github.io/archives/6a3f4577.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/123-virtual-destructors-virtual-assignment-and-overriding-virtualization/è™šæ‹Ÿè™šæ„å‡½æ•°å°½ç®¡c++ä¸ºæ‚¨çš„ç±»æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„ææ„å‡½æ•°(å¦‚æœæ‚¨è‡ªå·±ä¸æä¾›çš„è¯)ï¼Œä½†æœ‰æ—¶æ‚¨ä¼šå¸Œæœ›æä¾›è‡ªå·±çš„ææ„å‡½æ•°(ç‰¹åˆ«æ˜¯å½“ç±»éœ€è¦é‡Šæ”¾å†…å­˜æ—¶)ã€‚å¦‚æœè¦å¤„ç†ç»§æ‰¿ï¼Œåº”è¯¥å§‹ç»ˆå°†ææ„å‡½æ•°è®¾ä¸ºè™šã€‚å½“çˆ¶ç±»çš„ææ„å‡½æ•°æ˜¯évirtualè€ƒè™‘ä¸‹é¢çš„ä¾‹å­:12345678910111213141516171819202122232425262728293031323334353637#include &lt;iostream&gt;class Base&#123;public: ~Base() // note: not virtual &#123; std::cout &lt;&lt; \"Calling ~Base()\\n\"; &#125;&#125;; class Derived: public Base&#123;private: int* m_array; public: Derived(int length) &#123; m_array = new int[length]; &#125; ~Derived() // note: not virtual (your compiler may warn you about this) &#123; std::cout &lt;&lt; \"Calling ~Derived()\\n\"; delete[] m_array; &#125;&#125;; int main()&#123; Derived *derived &#123; new Derived(5) &#125;; Base *base &#123; derived &#125;; delete base; return 0;&#125;å› ä¸ºbaseæ˜¯ä¸€ä¸ªåŸºæŒ‡é’ˆï¼Œæ‰€ä»¥åœ¨åˆ é™¤baseæ—¶ï¼Œç¨‹åºä¼šæŸ¥çœ‹åŸºææ„å‡½æ•°æ˜¯å¦æ˜¯è™šçš„ã€‚å®ƒä¸æ˜¯ï¼Œæ‰€ä»¥å®ƒå‡è®¾å®ƒåªéœ€è¦è°ƒç”¨åŸºææ„å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥ä»ä¸Šé¢çš„ä¾‹å­ä¸­çœ‹å‡ºè¿™ä¸€ç‚¹:1Calling ~Base()å½“çˆ¶ç±»çš„ææ„å‡½æ•°æ˜¯virtualä½†æ˜¯ï¼Œæˆ‘ä»¬ç¡®å®å¸Œæœ›deleteå‡½æ•°è°ƒç”¨ Derivedçš„ææ„å‡½æ•°(å®ƒå°†ä¾æ¬¡è°ƒç”¨Baseçš„ææ„å‡½æ•°)ï¼Œå¦åˆ™m_arrayå°†ä¸ä¼šè¢«åˆ é™¤ã€‚æˆ‘ä»¬é€šè¿‡ä½¿åŸºç±»çš„ææ„å‡½æ•°ä¸ºè™š:12345678910111213141516171819202122232425262728293031323334353637#include &lt;iostream&gt;class Base&#123;public: virtual ~Base() // note: virtual &#123; std::cout &lt;&lt; \"Calling ~Base()\\n\"; &#125;&#125;; class Derived: public Base&#123;private: int* m_array; public: Derived(int length) &#123; m_array = new int[length]; &#125; virtual ~Derived() // note: virtual &#123; std::cout &lt;&lt; \"Calling ~Derived()\\n\"; delete[] m_array; &#125;&#125;; int main()&#123; Derived *derived &#123; new Derived(5) &#125;; Base *base &#123; derived &#125;; delete base; return 0;&#125;ç»“æœï¼š12Calling ~Derived()Calling ~Base()æ— è®ºä½•æ—¶å¤„ç†ç»§æ‰¿ï¼Œéƒ½åº”è¯¥æ˜¾å¼çš„ä½¿ææ„å‡½æ•°ä¸ºè™šå‡½æ•°ä¸æ™®é€šçš„è™šæˆå‘˜å‡½æ•°ä¸€æ ·ï¼Œå¦‚æœåŸºç±»å‡½æ•°æ˜¯è™šçš„ï¼Œåˆ™æ‰€æœ‰æ´¾ç”Ÿé‡å†™éƒ½å°†è¢«è§†ä¸ºè™šçš„ï¼Œè€Œä¸ç®¡å®ƒä»¬æ˜¯å¦è¢«æŒ‡å®šä¸ºvirtualã€‚æ²¡æœ‰å¿…è¦åˆ›å»ºä¸€ä¸ªç©ºçš„æ´¾ç”Ÿç±»ææ„å‡½æ•°æ¥å°†å®ƒæ ‡è®°ä¸ºè™šçš„ã€‚è™šæ‹Ÿåˆ†é…å¯ä»¥ä½¿èµ‹å€¼è¿ç®—ç¬¦ä¸ºvirtualã€‚ç„¶è€Œï¼Œä¸ææ„å‡½æ•°çš„æƒ…å†µä¸åŒï¼Œè™šæ‹ŸåŒ–æ€»æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œè™šæ‹ŸåŒ–èµ‹å€¼æ“ä½œç¬¦å®é™…ä¸Šæ‰“å¼€äº†ä¸€ä¸ªå……æ»¡è •è™«çš„åŒ…ï¼Œå¹¶è¿›å…¥äº†æœ¬æ•™ç¨‹èŒƒå›´ä¹‹å¤–çš„ä¸€äº›é«˜çº§ä¸»é¢˜ã€‚å› æ­¤ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨æš‚æ—¶ä¸è¦ä½¿ç”¨è™šæ‹Ÿä»»åŠ¡ã€‚å¿½è§†è™šæ‹ŸåŒ–å¾ˆå°‘ä¼šå¿½ç•¥å‡½æ•°çš„è™šæ‹ŸåŒ–ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹ä»£ç :1234567891011class Base&#123;public: virtual const char* getName() &#123; return \"Base\"; &#125;&#125;; class Derived: public Base&#123;public: virtual const char* getName() &#123; return \"Derived\"; &#125;&#125;;åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦ä¸€ä¸ªæŒ‡å‘æ´¾ç”Ÿå¯¹è±¡çš„åŸºæŒ‡é’ˆæ¥è°ƒç”¨Base::getName()ï¼Œè€Œä¸æ˜¯Derived::getName()ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œåªéœ€ä½¿ç”¨èŒƒå›´è§£ææ“ä½œç¬¦:1234567891011#include &lt;iostream&gt;int main()&#123; Derived derived; Base &amp;base &#123; derived &#125;; //è°ƒç”¨Base::GetName()è€Œä¸æ˜¯è™šæ‹ŸåŒ–çš„Derived::GetName() std::cout &lt;&lt; base.Base::getName() &lt;&lt; '\\n'; return 0;&#125;ä½ å¯èƒ½ä¸ä¼šç»å¸¸ç”¨åˆ°å®ƒï¼Œä½†çŸ¥é“å®ƒè‡³å°‘æ˜¯å¯èƒ½çš„æ˜¯ä»¶å¥½äº‹ã€‚æˆ‘ä»¬åº”è¯¥è®©æ‰€æœ‰ææ„å‡½æ•°éƒ½æ˜¯è™šçš„å—?è¿™æ˜¯æ–°ç¨‹åºå‘˜å¸¸é—®çš„é—®é¢˜ã€‚å¦‚ä¸Šä¾‹æ‰€è¿°ï¼Œå¦‚æœåŸºç±»ææ„å‡½æ•°æ²¡æœ‰æ ‡è®°ä¸ºè™šå‡½æ•°ï¼Œé‚£ä¹ˆå¦‚æœç¨‹åºå‘˜ç¨ååˆ é™¤æŒ‡å‘æ´¾ç”Ÿå¯¹è±¡çš„åŸºç±»æŒ‡é’ˆï¼Œç¨‹åºå°±æœ‰å†…å­˜æ³„æ¼çš„é£é™©ã€‚é¿å…è¿™ç§æƒ…å†µçš„ä¸€ç§æ–¹æ³•æ˜¯å°†æ‰€æœ‰ææ„å‡½æ•°æ ‡è®°ä¸ºè™šå‡½æ•°ã€‚ä½†æ˜¯ä½ åº”è¯¥å—?å¾ˆå®¹æ˜“è¯´yesï¼Œè¿™æ ·æ‚¨ä»¥åå°±å¯ä»¥å°†ä»»ä½•ç±»ç”¨ä½œåŸºç±»â€”â€”ä½†æ˜¯è¿™æ ·åšä¼šå¸¦æ¥æ€§èƒ½æŸå¤±(å‘æ‚¨çš„ç±»çš„æ¯ä¸ªå®ä¾‹æ·»åŠ ä¸€ä¸ªè™šæŒ‡é’ˆ)ã€‚æ‰€ä»¥ä½ å¿…é¡»å¹³è¡¡æˆæœ¬å’Œä½ çš„æ„å›¾ã€‚","categories":[],"tags":[]},{"title":"C&C++/è¯´æ˜ç¬¦ï¼šoverrideã€final åŠ åå˜è¿”å›ç±»å‹","slug":"C&C++/è¯´æ˜ç¬¦ï¼šoverrideã€final åŠ åå˜è¿”å›ç±»å‹","date":"2020-05-14T09:00:13.877Z","updated":"2020-05-14T09:51:37.263Z","comments":true,"path":"archives/f30af5b2.html","link":"","permalink":"https://longlongqin.github.io/archives/f30af5b2.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/12-2a-the-override-and-final-specifiers-and-covariant-return-types/ä¸ºäº†è§£å†³ç»§æ‰¿çš„ä¸€äº›å¸¸è§é—®é¢˜ï¼Œc++ 11åœ¨c++ä¸­æ·»åŠ äº†ä¸¤ä¸ªç‰¹æ®Šçš„æ ‡è¯†ç¬¦:overrideå’Œ finalã€‚æ³¨æ„ï¼Œè¿™äº›æ ‡è¯†ç¬¦ä¸æ˜¯å…³é”®å­—â€”â€”å®ƒä»¬æ˜¯åœ¨ç‰¹å®šä¸Šä¸‹æ–‡ä¸­å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„æ™®é€šæ ‡è¯†ç¬¦ã€‚è™½ç„¶finalå¹¶ä¸æ˜¯ç»å¸¸ä½¿ç”¨ï¼Œä½†æ˜¯overrideæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„è¡¥å……ï¼Œæ‚¨åº”è¯¥ç»å¸¸ä½¿ç”¨å®ƒã€‚åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹ä¸€ä¸‹è¿™ä¸¤ç§æƒ…å†µï¼Œä»¥åŠè™šå‡½æ•°é‡å†™ è¿”å›ç±»å‹å¿…é¡»åŒ¹é…çš„è§„åˆ™çš„ä¸€ä¸ªä¾‹å¤–ã€‚overrideè¯´æ˜ç¬¦æ­£å¦‚æˆ‘ä»¬åœ¨å‰ä¸€è¯¾ä¸­æåˆ°çš„ï¼Œæ´¾ç”Ÿç±»è™šå‡½æ•°åªæœ‰åœ¨å…¶ç­¾åå’Œè¿”å›ç±»å‹å®Œå…¨åŒ¹é…æ—¶æ‰è¢«è®¤ä¸ºæ˜¯é‡å†™ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ— æ„çš„é—®é¢˜ï¼šåŸæœ¬æ‰“ç®—è¦†ç›–çš„å‡½æ•°å®é™…ä¸Šå¹¶ä¸æ˜¯è¿™æ ·ã€‚1234567891011121314151617181920212223242526class A&#123;public: virtual const char* getName1(int x) &#123; return \"A\"; &#125; virtual const char* getName2(int x) &#123; return \"A\"; &#125;&#125;; class B : public A&#123;public: virtual const char* getName1(short int x) &#123; return \"B\"; &#125; // note: parameter is a short int virtual const char* getName2(int x) const &#123; return \"B\"; &#125; // note: function is const&#125;; int main()&#123; B b; A &amp;rBase = b; std::cout &lt;&lt; rBase.getName1(1) &lt;&lt; '\\n'; std::cout &lt;&lt; rBase.getName2(2) &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/AAå› ä¸ºrBaseæ˜¯A å¼•ç”¨å¯¹Bå¯¹è±¡çš„å¼•ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œçš„ç›®çš„æ˜¯ä½¿ç”¨è™šå‡½æ•°æ¥è®¿é—®B::getName1()å’ŒB::getName2()ã€‚ä½†æ˜¯ï¼Œå› ä¸ºB::getName1()æ¥å—ä¸€ä¸ªä¸åŒçš„å‚æ•°(ä¸€ä¸ªçŸ­æ•´å‹è€Œä¸æ˜¯ä¸€ä¸ªæ•´å‹)ï¼Œæ‰€ä»¥å®ƒä¸è¢«è®¤ä¸ºæ˜¯å¯¹a::getName1()çš„è¦†ç›–ã€‚æ›´ç‹¡çŒ¾çš„æ˜¯ï¼Œå› ä¸ºB::getName2()æ˜¯constï¼Œè€ŒA::getName2()ä¸æ˜¯ï¼ŒB::getName2()ä¸è¢«è®¤ä¸ºæ˜¯å¯¹A::getName2()çš„è¦†ç›–ã€‚åœ¨è¿™ä¸ªç‰¹æ®Šçš„ä¾‹å­ä¸­ï¼Œå› ä¸ºAå’ŒBåªæ˜¯æ‰“å°å®ƒä»¬çš„åå­—ï¼Œå¾ˆå®¹æ˜“çœ‹å‡ºæˆ‘ä»¬æŠŠé‡å†™æç ¸äº†ï¼Œå¹¶ä¸”è°ƒç”¨äº†é”™è¯¯çš„è™šå‡½æ•°ã€‚ä½†æ˜¯ï¼Œåœ¨æ›´å¤æ‚çš„ç¨‹åºä¸­ï¼Œå‡½æ•°æœ‰æœªæ‰“å°çš„è¡Œä¸ºæˆ–è¿”å›å€¼ï¼Œè¿™æ ·çš„é—®é¢˜å¾ˆéš¾è°ƒè¯•ã€‚ä¸ºäº†å¸®åŠ©è§£å†³å‡½æ•°çš„é‡å†™é—®é¢˜ï¼Œc++ 11å¼•å…¥äº†é‡å†™è¯´æ˜ç¬¦(override specifier)ã€‚é‡å†™è¯´æ˜ç¬¦å¯ä»¥åº”ç”¨äºä»»ä½•é‡å†™å‡½æ•°ï¼Œæ–¹æ³•æ˜¯å°†è¯´æ˜ç¬¦æ”¾åœ¨constè¦å»çš„ç›¸åŒä½ç½®ã€‚å¦‚æœå‡½æ•°æ²¡æœ‰è¦†ç›–åŸºç±»å‡½æ•°(æˆ–åº”ç”¨äºéè™šå‡½æ•°)ï¼Œç¼–è¯‘å™¨ä¼šå°†è¯¥å‡½æ•°æ ‡è®°ä¸ºé”™è¯¯ã€‚1234567891011121314151617181920212223class A&#123;public: virtual const char* getName1(int x) &#123; return \"A\"; &#125; virtual const char* getName2(int x) &#123; return \"A\"; &#125; virtual const char* getName3(int x) &#123; return \"A\"; &#125;&#125;; class B : public A&#123;public: //ç¼–è¯‘é”™è¯¯ï¼Œå‡½æ•°ä¸æ˜¯è¦†ç›–(å› ä¸ºå‡½æ•°çš„å½¢å‚ä¸çˆ¶ç±»ä¸­çš„ä¸ä¸€æ ·) virtual const char* getName1(short int x) override &#123; return \"B\"; &#125; //ç¼–è¯‘é”™è¯¯ï¼Œå‡½æ•°ä¸æ˜¯è¦†ç›–(å› ä¸ºè¿™ä¸ªå‡½æ•°ä¸çˆ¶ç±»ä¸­ç›¸åº”çš„å‡½æ•°ä¸èƒ½å®Œå…¨å¹³åŒ¹é…ï¼Œå®ƒå¤šäº†ä¸€ä¸ª const) virtual const char* getName2(int x) const override &#123; return \"B\"; &#125; //å¥½çš„ï¼Œè¯¥å‡½æ•°æ˜¯é‡å†™A::getName3(int) virtual const char* getName3(int x) override &#123; return \"B\"; &#125;&#125;;int main()&#123; return 0;&#125;ä¸Šé¢çš„ç¨‹åºäº§ç”Ÿäº†ä¸¤ä¸ªç¼–è¯‘é”™è¯¯:ä¸€ä¸ªç”¨äºB::getName1()ï¼Œå¦ä¸€ä¸ªç”¨äºB::getName2()ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ²¡æœ‰è¦†ç›–å…ˆå‰çš„å‡½æ•°ã€‚è€ŒB::getName3()ä¼šè¦†ç›–A::getName3()ï¼Œå› æ­¤ä¸ä¼šä¸ºè¯¥è¡Œäº§ç”Ÿé”™è¯¯ã€‚ä½¿ç”¨overrideè¯´æ˜ç¬¦ä¸ä¼šå¯¼è‡´æ€§èƒ½æŸå¤±ä½¿ç”¨è¦†ç›–è¯´æ˜ç¬¦ä¸ä¼šå¯¼è‡´æ€§èƒ½æŸå¤±ï¼Œè€Œä¸”å®ƒæœ‰åŠ©äºé¿å…æ„å¤–é”™è¯¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®åœ¨æ‚¨ç¼–å†™çš„æ¯ä¸ªè™šå‡½æ•°é‡å†™ä¸­ä½¿ç”¨å®ƒï¼Œä»¥ç¡®ä¿æ‚¨ç¡®å®é‡å†™äº†æ‚¨è®¤ä¸ºå·²ç»é‡å†™çš„å‡½æ•°ã€‚finalè¯´æ˜ç¬¦åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½ä¸å¸Œæœ›åˆ«äººèƒ½å¤Ÿé‡å†™ä¸€ä¸ªè™šå‡½æ•°ï¼Œæˆ–è€…ä»ä¸€ä¸ªç±»ç»§æ‰¿ã€‚finalè¯´æ˜ç¬¦ å¯ä»¥ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨å¼ºåˆ¶æ‰§è¡Œå®ƒã€‚å¦‚æœç”¨æˆ·è¯•å›¾è¦†ç›–å·²æŒ‡å®šä¸ºfinalçš„å‡½æ•°æˆ–ç±»ï¼Œç¼–è¯‘å™¨å°†ç»™å‡ºä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚é™åˆ¶ç”¨æˆ·é‡å†™åœ¨æˆ‘ä»¬æƒ³è¦é™åˆ¶ç”¨æˆ·é‡å†™å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œæœ€ç»ˆè¯´æ˜ç¬¦( final specifier) çš„ä½ç½®ä¸override specifierçš„ä½ç½®ç›¸åŒï¼Œå°±åƒè¿™æ ·:123456789101112131415161718class A&#123;public: virtual const char* getName() &#123; return \"A\"; &#125;&#125;; class B : public A&#123;public: // æ³¨æ„åœ¨åé¢çš„è¡Œä¸­ä½¿ç”¨finalè¯´æ˜ç¬¦â€”â€”è¿™ä½¿å¾—è¿™ä¸ªå‡½æ•°ä¸å†æ˜¯å¯è¦†ç›–çš„ virtual const char* getName() override final &#123; return \"B\"; &#125; // okay, overrides A::getName()&#125;; class C : public B&#123;public: virtual const char* getName() override &#123; return \"C\"; &#125; // compile error: overrides B::getName(), which is final&#125;;åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒB::getName()è¦†ç›–äº†A::getName()ï¼Œè¿™æ˜¯å¯ä»¥çš„ã€‚ä½†æ˜¯B::getName()æœ‰final çš„è¯´æ˜ç¬¦ï¼Œè¿™æ„å‘³ç€å¯¹è¯¥å‡½æ•°çš„ä»»ä½•è¿›ä¸€æ­¥é‡å†™éƒ½åº”è¯¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ç¡®å®ï¼ŒC::getName()è¯•å›¾è¦†ç›–B::getName() (è¿™é‡Œçš„overrideè¯´æ˜ç¬¦ä¸ç›¸å…³ï¼Œåªæ˜¯ä¸ºäº†æ›´å¥½çš„å®è·µ)ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¼šç»™å‡ºä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚é™åˆ¶ä»è¯¥ç±»ç»§æ‰¿åœ¨æˆ‘ä»¬æƒ³è¦é˜²æ­¢ä»ç±»ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œæœ€åçš„è¯´æ˜ç¬¦åœ¨ç±»ååé¢åº”ç”¨:1234567891011121314151617class A&#123;public: virtual const char* getName() &#123; return \"A\"; &#125;&#125;; class B final : public A // æ³¨æ„è¿™é‡Œçš„ finalè¯´æ˜ç¬¦çš„ä½¿ç”¨&#123;public: virtual const char* getName() override &#123; return \"B\"; &#125;&#125;; class C : public B //â­ compile error: cannot inherit from final class&#123;public: virtual const char* getName() override &#123; return \"C\"; &#125;&#125;;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç±»Bè¢«å£°æ˜ä¸ºfinalã€‚å› æ­¤ï¼Œå½“Cè¯•å›¾ä»Bç»§æ‰¿æ—¶ï¼Œç¼–è¯‘å™¨ä¼šç»™å‡ºä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚åå˜è¿”å›ç±»å‹åœ¨ä¸€ç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæ´¾ç”Ÿç±»è™šå‡½æ•°é‡å†™ å¯èƒ½å…·æœ‰ä¸åŸºç±»ä¸åŒçš„è¿”å›ç±»å‹ï¼Œä½†ä»ç„¶è¢«è®¤ä¸ºæ˜¯åŒ¹é…é‡å†™ã€‚å¦‚æœè™šå‡½æ•°çš„è¿”å›ç±»å‹æ˜¯æŒ‡é’ˆæˆ–å¯¹ç±»çš„å¼•ç”¨ï¼Œåˆ™é‡å†™å‡½æ•°å¯ä»¥è¿”å›æŒ‡é’ˆæˆ–å¯¹æ´¾ç”Ÿç±»çš„å¼•ç”¨ã€‚è¿™äº›è¢«ç§°ä¸ºåå˜è¿”å›ç±»å‹ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­:12345678910111213141516171819202122232425262728293031323334#include &lt;iostream&gt; class Base&#123;public: // è¿™ä¸ªç‰ˆæœ¬çš„getThis()è¿”å›ä¸€ä¸ªæŒ‡å‘åŸºç±»çš„æŒ‡é’ˆ virtual Base* getThis() &#123; std::cout &lt;&lt; \"called Base::getThis()\\n\"; return this; &#125; void printType() &#123; std::cout &lt;&lt; \"returned a Base\\n\"; &#125;&#125;; class Derived : public Base&#123;public: //é€šå¸¸ï¼Œé‡å†™å‡½æ•°å¿…é¡»è¿”å›ä¸åŸºå‡½æ•°ç±»å‹ç›¸åŒçš„å¯¹è±¡ // ä½†æ˜¯ï¼Œå› ä¸ºDerivedæ˜¯ä»Baseæ´¾ç”Ÿçš„ï¼Œæ‰€ä»¥å¯ä»¥è¿”å›Derived*è€Œä¸æ˜¯Base* virtual Derived* getThis() &#123; std::cout &lt;&lt; \"called Derived::getThis()\\n\"; return this; &#125; void printType() &#123; std::cout &lt;&lt; \"returned a Derived\\n\"; &#125;&#125;; int main()&#123; Derived d; Base *b = &amp;d; d.getThis()-&gt;printType(); // è°ƒç”¨Derived::getThis()ï¼Œè¿”å›Derived*ï¼Œå†è°ƒç”¨Derived::printType b-&gt;getThis()-&gt;printType(); //è°ƒç”¨Derived::getThis(), è¿”å›Base*, å†è°ƒç”¨ Base::printType return 0;&#125;/*ç»“æœ*/called Derived::getThis()returned a Derivedcalled Derived::getThis()returned a Baseæ³¨æ„ï¼Œä¸€äº›è¾ƒè€çš„ç¼–è¯‘å™¨(ä¾‹å¦‚Visual Studio 6)ä¸æ”¯æŒåå˜è¿”å›ç±»å‹ã€‚å…³äºåå˜è¿”å›ç±»å‹æœ‰ä¸€ä¸ªæœ‰è¶£çš„æ³¨æ„: c++ä¸èƒ½åŠ¨æ€é€‰æ‹©ç±»å‹ï¼Œæ‰€ä»¥æ‚¨æ€»æ˜¯ä¼šå¾—åˆ°ä¸æ‰€è°ƒç”¨å‡½æ•°çš„åŸºç‰ˆæœ¬ç›¸åŒ¹é…çš„ç±»å‹ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè°ƒç”¨d.getThis()ã€‚ç”±äºdæ˜¯æ´¾ç”Ÿçš„ï¼Œå› æ­¤è°ƒç”¨äº†Derived::getThis()ï¼Œå®ƒè¿”å›ä¸€ä¸ªDerived*ã€‚ç„¶åä½¿ç”¨è¿™ä¸ªDerived* è°ƒç”¨éè™šå‡½æ•°Derived::printType()ã€‚æœ‰è¶£çš„æƒ…å†µæ˜¯ï¼š ç„¶åè°ƒç”¨b-&gt;getThis()ã€‚å˜é‡bæ˜¯ä¸€ä¸ªæŒ‡å‘æ´¾ç”Ÿå¯¹è±¡çš„BaseæŒ‡é’ˆã€‚Base::getThis()æ˜¯è™šå‡½æ•°ï¼Œå› æ­¤è°ƒç”¨äº†Derived::getThis()ã€‚è™½ç„¶Derived::getThis()è¿”å›ä¸€ä¸ªDerived*ï¼Œå› ä¸ºå‡½æ•°çš„åŸºç‰ˆæœ¬è¿”å›ä¸€ä¸ªBase*ï¼Œè¿”å›çš„Derived*å‘ä¸Šè½¬æ¢ä¸ºBase*ã€‚å› æ­¤ï¼Œè°ƒç”¨Base::printType()ã€‚","categories":[],"tags":[]},{"title":"C&C++/è™šå‡½æ•°å’Œå¤šæ€æ€§","slug":"C&C++/è™šå‡½æ•°å’Œå¤šæ€æ€§","date":"2020-05-14T02:53:56.184Z","updated":"2020-05-14T08:40:51.437Z","comments":true,"path":"archives/aba94da5.html","link":"","permalink":"https://longlongqin.github.io/archives/aba94da5.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/122-virtual-functions/è™šå‡½æ•°å¯ç”¨äºè§£å†³çš„é—®é¢˜ï¼Œè¯¦æƒ…è¯·çœ‹ï¼šåœ¨å‰é¢å…³äºpointers and references to the base class of derived objectsä¸­ï¼Œæˆ‘ä»¬çœ‹äº†ä¸€äº›ä¾‹å­ï¼Œå…¶ä¸­ä½¿ç”¨åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æœ‰å¯èƒ½ç®€åŒ–ä»£ç ã€‚ä½†æ˜¯ï¼Œåœ¨æ¯ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜: åŸºæŒ‡é’ˆæˆ–å¼•ç”¨åªèƒ½è°ƒç”¨å‡½æ•°çš„åŸºç‰ˆæœ¬ï¼Œè€Œä¸èƒ½è°ƒç”¨æ´¾ç”Ÿç‰ˆæœ¬ã€‚ä¸‹é¢æ˜¯è¿™ç§è¡Œä¸ºçš„ä¸€ä¸ªç®€å•ä¾‹å­:1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;string_view&gt; class Base&#123;public: std::string_view getName() const &#123; return \"Base\"; &#125;&#125;; class Derived: public Base&#123;public: std::string_view getName() const &#123; return \"Derived\"; &#125;&#125;; int main()&#123; Derived derived; Base &amp;rBase&#123; derived &#125;; std::cout &lt;&lt; \"rBase is a \" &lt;&lt; rBase.getName() &lt;&lt; '\\n'; return 0;&#125;åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨è™šå‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è™šå‡½æ•°å’Œå¤šæ€æ€§è™šå‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å‡½æ•°ï¼Œå½“è°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œè§£æä¸ºå­˜åœ¨äºåŸºç±»å’Œæ´¾ç”Ÿç±»ä¹‹é—´çš„å‡½æ•°çš„æœ€æ´¾ç”Ÿç‰ˆæœ¬ã€‚è¿™ç§èƒ½åŠ›ç§°ä¸ºå¤šæ€æ€§ã€‚ä¾‹å¦‚ï¼ŒAç»§æ‰¿äºBï¼ŒBç»§æ‰¿äºCã€‚å¦‚æœä»ç±»Aä¸­è°ƒç”¨ä¸€ä¸ªè™šå‡½æ•°ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¼šè§£æä¸ºç¦»Aæœ€è¿‘çš„è™šå‡½æ•°ã€‚å¦‚æœæ´¾ç”Ÿå‡½æ•°å…·æœ‰ç›¸åŒçš„ç­¾å (åç§°ã€å‚æ•°ç±»å‹ä»¥åŠæ˜¯å¦ä¸ºconst)å¹¶è¿”å›ç±»å‹ä½œä¸ºè¯¥å‡½æ•°çš„åŸºæœ¬ç‰ˆæœ¬ï¼Œåˆ™å°†è¯¥å‡½æ•°è§†ä¸ºåŒ¹é…ã€‚è¿™æ ·çš„å‡½æ•°ç§°ä¸ºè¦†ç›–ã€‚ç¬¬ä¸€ä¸ªä¾‹å­ï¼šè¦ä½¿å‡½æ•°æˆä¸ºè™šå‡½æ•°ï¼Œåªéœ€å°†â€œvirtualâ€å…³é”®å­—æ”¾åœ¨å‡½æ•°å£°æ˜ä¹‹å‰ã€‚1234567891011121314151617181920212223242526#include &lt;iostream&gt;#include &lt;string_view&gt; class Base&#123;public: virtual std::string_view getName() const &#123; return \"Base\"; &#125; // note addition of virtual keyword&#125;; class Derived: public Base&#123;public: virtual std::string_view getName() const &#123; return \"Derived\"; &#125;&#125;; int main()&#123; Derived derived; Base &amp;rBase&#123; derived &#125;; std::cout &lt;&lt; \"rBase is a \" &lt;&lt; rBase.getName() &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/rBase is a Derivedå› ä¸ºrBaseæ˜¯å¯¹æ´¾ç”Ÿå¯¹è±¡çš„åŸºéƒ¨åˆ†çš„å¼•ç”¨ï¼Œæ‰€ä»¥åœ¨è®¡ç®—rBase.getName()æ—¶ï¼Œå®ƒé€šå¸¸ä¼šè§£æä¸ºBase::getName()ã€‚ä½†æ˜¯ï¼ŒBase::getName()æ˜¯è™šçš„ï¼Œå®ƒå‘Šè¯‰ç¨‹åºå»æŸ¥çœ‹åœ¨Baseå’Œæ´¾ç”Ÿä¹‹é—´æ˜¯å¦è¿˜æœ‰å…¶ä»–æ´¾ç”Ÿç‰ˆæœ¬çš„å‡½æ•°å¯ç”¨ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒå°†è§£æä¸º Derived::getName()!æœ¬ä¾‹ä¸­ï¼Œå¼•ç”¨çš„å¯¹è±¡derivedæ˜¯ Derivedç±»ï¼Œä½¿ç”¨å“ªä¸ªè™šå‡½æ•°ï¼Ÿ æˆ‘ä»¬å°±ä»Derivedç±»å¼€å§‹ åœ¨è¿™ä¸ªç»§æ‰¿æ ‘å½¢å±‚çº§ç»“æ„ä¸­ï¼Œæ‰¾åˆ°ç¦»Derivedç±»æœ€è¿‘çš„é‚£ä¸ªè™šå‡½æ•°ã€‚â€”åœ¨è¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯Derivedç±»ä¸­çš„é‚£ä¸ªè™šå‡½æ•°ç‰ˆæœ¬ï¼ˆå› ä¸ºå®ƒç¦»Derivedç±»æœ€è¿‘å‘€ã€‚ï¼‰ç¬¬äºŒä¸ªä¾‹å­ï¼š1234567891011121314151617181920212223242526272829303132333435363738#include &lt;iostream&gt;#include &lt;string_view&gt; class A&#123;public: virtual std::string_view getName() const &#123; return \"A\"; &#125;&#125;; class B: public A&#123;public: virtual std::string_view getName() const &#123; return \"B\"; &#125;&#125;; class C: public B&#123;public: virtual std::string_view getName() const &#123; return \"C\"; &#125;&#125;; class D: public C&#123;public: virtual std::string_view getName() const &#123; return \"D\"; &#125;&#125;; int main()&#123; C c; A &amp;rBase&#123; c &#125;; std::cout &lt;&lt; \"rBase is a \" &lt;&lt; rBase.getName() &lt;&lt; '\\n'; return 0;&#125;/*ä½ è®¤ä¸ºè¿™ä¸ªç¨‹åºä¼šè¾“å‡ºä»€ä¹ˆ?*/rBase is a Cï¼šè®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªCç±»å¯¹è±¡ã€‚rBaseæ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œæˆ‘ä»¬å°†å…¶è®¾ç½®ä¸ºå¼•ç”¨Cå¯¹è±¡çš„ä¸€éƒ¨åˆ† çš„ Aã€‚æœ€åï¼Œæˆ‘ä»¬è°ƒç”¨rBase.getName()ã€‚getName()çš„è®¡ç®—ç»“æœæ˜¯A::getName()ã€‚ä½†æ˜¯ï¼ŒA::getName() æ˜¯è™šçš„ï¼Œå› æ­¤ç¼–è¯‘å™¨å°†è°ƒç”¨Aå’ŒCä¹‹é—´æœ€æ´¾ç”Ÿçš„åŒ¹é…ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå°±æ˜¯C::getName()ã€‚æ³¨æ„ï¼Œå®ƒä¸ä¼šè°ƒç”¨D::getName()ï¼Œå› ä¸ºæˆ‘ä»¬çš„åŸå§‹å¯¹è±¡æ˜¯Cï¼Œè€Œä¸æ˜¯Dï¼Œæ‰€ä»¥åªè€ƒè™‘Aå’ŒCä¹‹é—´çš„å‡½æ•°ã€‚ä½¿ç”¨virtualå…³é”®å­—å¦‚æœä¸€ä¸ªå‡½æ•°è¢«æ ‡è®°ä¸ºvirtualï¼Œé‚£ä¹ˆæ‰€æœ‰åŒ¹é…çš„è¦†ç›–ä¹Ÿè¢«è®¤ä¸ºæ˜¯è™šå‡½æ•°ï¼Œå³ä½¿å®ƒä»¬æ²¡æœ‰æ˜¾å¼åœ°æ ‡è®°ä¸ºè™šå‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœçˆ¶ç±»Açš„æŸä¸ªå‡½æ•°è¢«æ ‡è®°ä¸ºvirtualï¼Œä»¥Aä¸ºåŸºç±»çš„æ´¾ç”Ÿç±»ä¸­çš„ ç›¸åŒ¹é…çš„è¯¥å‡½æ•°çš„è¦†ç›–ï¼Œå°±ç®—ä¸æ˜¾å¼çš„æ ‡è®°è¯¥å‡½æ•°ä¸ºvirtualï¼Œå®ƒä»ç„¶æ˜¯ä¸€ä¸ªè™šå‡½æ•°ã€‚å¦‚ï¼š12345678910111213class Base&#123;public: //çˆ¶ç±»ä¸­è¯¥å‡½æ•°è¢«æ ‡è®°ä¸º virtual virtual std::string_view getName() const &#123; return \"Base\"; &#125;&#125;;class Derived : public Base&#123;public: //è¯¥æ´¾ç”Ÿç±» å¯¹è¯¥å‡½æ•°çš„è¦†ç›– æ²¡æœ‰æ˜¾å¼çš„æ ‡è®°å®ƒä¸º virtualï¼Œä½†å®ƒä»ç„¶æ˜¯è™šå‡½æ•° std::string_view getName() const &#123; return \"Derived\"; &#125;&#125;;ä½†æ˜¯ï¼Œåœ¨æ´¾ç”Ÿå‡½æ•°ä¸Šä½¿ç”¨å…³é”®å­—virtualå¹¶æ²¡æœ‰ä»€ä¹ˆå®³å¤„ï¼Œå®ƒå¯ä»¥æé†’æ‚¨ï¼Œè¯¥å‡½æ•°æ˜¯ä¸€ä¸ªè™šå‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ã€‚å› æ­¤ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­å¯¹è™šæ‹ŸåŒ–å‡½æ•°ä½¿ç”¨virtualå…³é”®å­—é€šå¸¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå°½ç®¡è¿™å¹¶ä¸æ˜¯ä¸¥æ ¼å¿…éœ€çš„ã€‚è™šå‡½æ•°çš„è¿”å›ç±»å‹åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œè™šå‡½æ•°çš„è¿”å›ç±»å‹ åŠ å…¶è¦†ç›– å¿…é¡»åŒ¹é…ã€‚è€ƒè™‘ä¸‹é¢çš„ä¾‹å­:1234567891011class Base&#123;public: virtual int getValue() const &#123; return 5; &#125; //int&#125;; class Derived: public Base&#123;public: virtual double getValue() const &#123; return 6.78; &#125; //double&#125;;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒDerived::getValue() ä¸è¢«è®¤ä¸ºæ˜¯Base::getValue()çš„åŒ¹é…è¦†ç›– (å®ƒè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„å‡½æ•°)ã€‚å› ä¸ºDerived::getValue()ä¸Base::getValue()çš„è¿”å›ç±»å‹ä¸ä¸€æ ·ï¼šä¸€ä¸ªä¸ºintï¼Œä¸€ä¸ªä¸ºdoubleä¸è¦ä»æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°è°ƒç”¨è™šå‡½æ•°è¿™æ˜¯å¦ä¸€ä¸ªé™·é˜±ï¼Œç»å¸¸æŠ“ä½ä¸çŸ¥æƒ…çš„æ–°ç¨‹åºå‘˜ã€‚ä¸åº”è¯¥ä»æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°è°ƒç”¨è™šå‡½æ•°ã€‚ä¸ºä»€ä¹ˆ?è¯·è®°ä½ï¼Œåœ¨åˆ›å»ºæ´¾ç”Ÿç±»æ—¶ï¼Œé¦–å…ˆæ„é€ åŸºéƒ¨åˆ†ã€‚å¦‚æœä»åŸºç±»æ„é€ å‡½æ•°è°ƒç”¨è™šå‡½æ•°ï¼Œä½†ç±»çš„æ´¾ç”Ÿéƒ¨åˆ†è¿˜æ²¡æœ‰åˆ›å»ºï¼Œå®ƒå°†æ— æ³•è°ƒç”¨å‡½æ•°çš„æ´¾ç”Ÿç‰ˆæœ¬ï¼Œå› ä¸ºæ´¾ç”Ÿå‡½æ•°æ²¡æœ‰è¦å¤„ç†çš„æ´¾ç”Ÿå¯¹è±¡ã€‚åœ¨C++ä¸­ï¼Œå®ƒå°†è°ƒç”¨åŸºç±»ç‰ˆæœ¬ã€‚ææ„å‡½æ•°ä¹Ÿå­˜åœ¨ç±»ä¼¼çš„é—®é¢˜ã€‚å¦‚æœåœ¨åŸºç±»ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°ï¼Œå®ƒå°†å§‹ç»ˆè§£æä¸ºå‡½æ•°çš„åŸºç±»ç‰ˆæœ¬ï¼Œå› ä¸ºç±»çš„æ´¾ç”Ÿéƒ¨åˆ†å·²ç»è¢«é”€æ¯ã€‚è§„åˆ™:æ°¸è¿œä¸è¦ä»æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°è°ƒç”¨è™šå‡½æ•°è™šå‡½æ•°çš„ç¼ºç‚¹æ—¢ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹ä½ å¸Œæœ›å‡½æ•°æ˜¯è™šçš„ï¼Œä¸ºä»€ä¹ˆä¸è®©æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯è™šçš„å‘¢?ç­”æ¡ˆæ˜¯ï¼šå› ä¸ºå®ƒçš„æ•ˆç‡å¾ˆä½â€”â€”è§£æä¸€ä¸ªè™šå‡½æ•°è°ƒç”¨è¦æ¯”è§£æä¸€ä¸ªå¸¸è§„å‡½æ•°è°ƒç”¨èŠ±è´¹æ›´é•¿çš„æ—¶é—´ã€‚æ­¤å¤–ï¼Œç¼–è¯‘å™¨è¿˜å¿…é¡»ä¸ºæ¯ä¸ªå…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè™šå‡½æ•°çš„ç±»å¯¹è±¡åˆ†é…ä¸€ä¸ªé¢å¤–çš„æŒ‡é’ˆã€‚æˆ‘ä»¬å°†åœ¨æœ¬ç« ä»¥åçš„è¯¾ç¨‹ä¸­æ›´å¤šåœ°è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚â€”â€”è¡¥å……â€”â€”-å¤šæ€æ€§(polymorphism)å¯ä»¥ç®€å•åœ°æ¦‚æ‹¬ä¸ºâ€œä¸€ä¸ªæ¥å£ï¼Œå¤šç§æ–¹æ³•â€ï¼Œå®ƒæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹é¢†åŸŸçš„æ ¸å¿ƒæ¦‚å¿µã€‚å¤šæ€æ€§æŒ‡ç›¸åŒå¯¹è±¡æ”¶åˆ°ä¸åŒæ¶ˆæ¯æˆ–ä¸åŒå¯¹è±¡æ”¶åˆ°ç›¸åŒæ¶ˆæ¯æ—¶äº§ç”Ÿä¸åŒçš„å®ç°åŠ¨ä½œã€‚C++æ”¯æŒä¸¤ç§å¤šæ€æ€§ï¼šç¼–è¯‘æ—¶å¤šæ€æ€§ï¼Œè¿è¡Œæ—¶å¤šæ€æ€§ã€‚ç¼–è¯‘æ—¶å¤šæ€æ€§ï¼ˆé™æ€å¤šæ€ï¼‰ï¼šé€šè¿‡é‡è½½å‡½æ•°å®ç°ï¼šå…ˆæœŸè”ç¼– early bindingè¿è¡Œæ—¶å¤šæ€æ€§ï¼ˆåŠ¨æ€å¤šæ€ï¼‰ï¼šé€šè¿‡è™šå‡½æ•°å®ç° ï¼šæ»åè”ç¼– late bindingC++è¿è¡Œæ—¶å¤šæ€æ€§æ˜¯é€šè¿‡è™šå‡½æ•°æ¥å®ç°çš„ï¼Œè™šå‡½æ•°å…è®¸å­ç±»é‡æ–°å®šä¹‰æˆå‘˜å‡½æ•°ï¼Œè€Œå­ç±»é‡æ–°å®šä¹‰çˆ¶ç±»çš„åšæ³•ç§°ä¸ºè¦†ç›–(Override)ï¼Œæˆ–è€…ç§°ä¸ºé‡å†™ã€‚å¤šæ€ä¸éå¤šæ€çš„å®è´¨åŒºåˆ«å°±æ˜¯å‡½æ•°åœ°å€æ˜¯æ—©ç»‘å®šè¿˜æ˜¯æ™šç»‘å®šã€‚å¦‚æœå‡½æ•°çš„è°ƒç”¨ï¼Œåœ¨ç¼–è¯‘å™¨ç¼–è¯‘æœŸé—´å°±å¯ä»¥ç¡®å®šå‡½æ•°çš„è°ƒç”¨åœ°å€ï¼Œå¹¶ç”Ÿäº§ä»£ç ï¼Œæ˜¯é™æ€çš„ï¼Œå°±æ˜¯è¯´åœ°å€æ˜¯æ—©ç»‘å®šçš„ã€‚è€Œå¦‚æœå‡½æ•°è°ƒç”¨çš„åœ°å€ä¸èƒ½åœ¨ç¼–è¯‘å™¨æœŸé—´ç¡®å®šï¼Œéœ€è¦åœ¨è¿è¡Œæ—¶æ‰ç¡®å®šï¼Œè¿™å°±å±äºæ™šç»‘å®šã€‚å¤šæ€çš„ç›®çš„ï¼šå°è£…å¯ä»¥ä½¿å¾—ä»£ç æ¨¡å—åŒ–ï¼Œç»§æ‰¿å¯ä»¥æ‰©å±•å·²å­˜åœ¨çš„ä»£ç ï¼Œä»–ä»¬çš„ç›®çš„éƒ½æ˜¯ä¸ºäº†ä»£ç é‡ç”¨ã€‚è€Œå¤šæ€çš„ç›®çš„åˆ™æ˜¯ä¸ºäº†â€œæ¥å£é‡ç”¨â€ã€‚ä¹Ÿå³ï¼Œä¸è®ºä¼ é€’è¿‡æ¥çš„ç©¶ç«Ÿæ˜¯ç±»çš„å“ªä¸ªå¯¹è±¡ï¼Œå‡½æ•°éƒ½èƒ½å¤Ÿé€šè¿‡åŒä¸€ä¸ªæ¥å£è°ƒç”¨åˆ°é€‚åº”å„è‡ªå¯¹è±¡çš„å®ç°æ–¹æ³•ã€‚å¤šæ€æœ€å¸¸è§çš„ç”¨æ³•å°±æ˜¯å£°æ˜åŸºç±»ç±»å‹çš„æŒ‡é’ˆï¼Œåˆ©ç”¨è¯¥æŒ‡é’ˆæŒ‡å‘ä»»æ„ä¸€ä¸ªå­ç±»å¯¹è±¡ï¼Œè°ƒç”¨ç›¸åº”çš„è™šå‡½æ•°ï¼Œå¯ä»¥æ ¹æ®æŒ‡å‘çš„å­ç±»çš„ä¸åŒè€Œå®ç°ä¸åŒçš„æ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨è™šå‡½æ•°çš„è¯ï¼Œå³æ²¡æœ‰åˆ©ç”¨C++å¤šæ€æ€§ï¼Œåˆ™åˆ©ç”¨åŸºç±»æŒ‡é’ˆè°ƒç”¨ç›¸åº”çš„å‡½æ•°çš„æ—¶å€™ï¼Œå°†æ€»è¢«é™åˆ¶åœ¨åŸºç±»å‡½æ•°æœ¬èº«ï¼Œè€Œæ— æ³•è°ƒç”¨åˆ°å­ç±»ä¸­è¢«é‡å†™è¿‡çš„å‡½æ•°ã€‚å› ä¸ºæ²¡æœ‰å¤šæ€æ€§ï¼Œå‡½æ•°è°ƒç”¨çš„åœ°å€å°†æ˜¯å›ºå®šçš„ï¼Œå› æ­¤å°†å§‹ç»ˆè°ƒç”¨åˆ°åŒä¸€ä¸ªå‡½æ•°ï¼Œè¿™å°±æ— æ³•å®ç°â€œä¸€ä¸ªæ¥å£ï¼Œå¤šç§æ–¹æ³•â€çš„ç›®çš„äº†ã€‚éœ€è¦æ³¨æ„ï¼šåªæœ‰ç±»çš„æˆå‘˜å‡½æ•°æ‰èƒ½å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œè™šå‡½æ•°ä»…é€‚ç”¨äºæœ‰ç»§æ‰¿å…³ç³»çš„ç±»å¯¹è±¡ã€‚æ™®é€šå‡½æ•°ä¸èƒ½å£°æ˜ä¸ºè™šå‡½æ•°ã€‚é™æ€æˆå‘˜å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°ï¼Œå› ä¸ºé™æ€æˆå‘˜å‡½æ•°ä¸å—é™äºæŸä¸ªå¯¹è±¡ã€‚å†…è”å‡½æ•°ï¼ˆinlineï¼‰ä¸èƒ½æ˜¯è™šå‡½æ•°ï¼Œå› ä¸ºå†…è”å‡½æ•°ä¸èƒ½åœ¨è¿è¡Œä¸­åŠ¨æ€ç¡®å®šä½ç½®ã€‚æ„é€ å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°ã€‚ææ„å‡½æ•°å¯ä»¥æ˜¯è™šå‡½æ•°ï¼Œè€Œä¸”å»ºè®®å£°æ˜ä¸ºè™šå‡½æ•°ã€‚é‡å†™ vs é‡è½½ï¼šé‡å†™å¯ä»¥æœ‰ä¸¤ç§ï¼Œç›´æ¥é‡å†™æˆå‘˜å‡½æ•°å’Œé‡å†™è™šå‡½æ•°ï¼Œåªæœ‰é‡å†™äº†è™šå‡½æ•°çš„æ‰èƒ½ç®—ä½œæ˜¯ä½“ç°äº†C++å¤šæ€æ€§ã€‚è€Œé‡è½½åˆ™æ˜¯å…è®¸æœ‰å¤šä¸ªåŒåçš„å‡½æ•°ï¼Œè€Œè¿™äº›å‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸åŒï¼Œå…è®¸å‚æ•°ä¸ªæ•°ä¸åŒï¼Œå‚æ•°ç±»å‹ä¸åŒï¼Œæˆ–è€…ä¸¤è€…éƒ½ä¸åŒã€‚ç¼–è¯‘å™¨ä¼šæ ¹æ®è¿™äº›å‡½æ•°çš„ä¸åŒåˆ—è¡¨ï¼Œå°†åŒåçš„å‡½æ•°çš„åç§°åšä¿®é¥°ï¼Œä»è€Œç”Ÿæˆä¸€äº›ä¸åŒåç§°çš„é¢„å¤„ç†å‡½æ•°ï¼Œæ¥å®ç°åŒåå‡½æ•°è°ƒç”¨æ—¶çš„é‡è½½é—®é¢˜ã€‚ä½†è¿™å¹¶æ²¡æœ‰ä½“ç°å¤šæ€æ€§ã€‚éšè—ï¼šé™¤äº†é‡è½½ä¸è¦†ç›–ï¼ˆé‡å†™ï¼‰ï¼ŒC++è¿˜æœ‰éšè—ã€‚éšè—æ˜¯æŒ‡æ´¾ç”Ÿç±»çš„å‡½æ•°å±è”½äº†ä¸å…¶åŒåçš„åŸºç±»å‡½æ•°ã€‚éšè—è§„åˆ™å¦‚ä¸‹ï¼šå¦‚æœæ´¾ç”Ÿç±»çš„å‡½æ•°ä¸åŸºç±»çš„å‡½æ•°åŒåï¼Œä½†æ˜¯å‚æ•°ä¸åŒã€‚æ­¤æ—¶ï¼Œä¸è®ºæœ‰æ— virtual å…³é”®å­—ï¼ŒåŸºç±»çš„å‡½æ•°å°†è¢«éšè—ï¼ˆæ³¨æ„åˆ«ä¸é‡è½½æ··æ·†ï¼Œé‡è½½æ˜¯åœ¨åŒä¸€ä¸ªç±»ä¸­å‘ç”Ÿï¼‰ã€‚å¦‚æœæ´¾ç”Ÿç±»çš„å‡½æ•°ä¸åŸºç±»çš„å‡½æ•°åŒåï¼Œå¹¶ä¸”å‚æ•°ä¹Ÿç›¸åŒï¼Œä½†æ˜¯åŸºç±»å‡½æ•°æ²¡æœ‰virtual å…³é”®å­—ã€‚æ­¤æ—¶ï¼ŒåŸºç±»çš„å‡½æ•°è¢«éšè—ï¼ˆæ³¨æ„åˆ«ä¸è¦†ç›–æ··æ·†ï¼Œè¦†ç›–æœ‰virtualå…³é”®å­—ï¼‰ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#include&lt;iostream&gt;using namespace std;class Base&#123;public: virtual void f(float x) &#123; cout&lt;&lt;\"Base::f(float)\"&lt;&lt; x &lt;&lt;endl; &#125; void g(float x) &#123; cout&lt;&lt;\"Base::g(float)\"&lt;&lt; x &lt;&lt;endl; &#125; void h(float x) &#123; cout&lt;&lt;\"Base::h(float)\"&lt;&lt; x &lt;&lt;endl; &#125;&#125;;class Derived : public Base&#123;public: //å­ç±»ä¸åŸºç±»å‡½æ•°åŒåï¼Œæœ‰virtualå…³é”®å­—ï¼Œè¿è¡Œæ—¶å¤šæ€ virtual void f(float x) &#123; cout&lt;&lt;\"Derived::f(float)\"&lt;&lt; x &lt;&lt;endl; //å¤šæ€ã€è¦†ç›– &#125; //å­ç±»ä¸åŸºç±»å‡½æ•°åŒåï¼Œä¸”æ— virtualå…³é”®å­—ï¼Œéšè— //å‚æ•°ä¸åŒçš„éšè— void g(int x) &#123; cout&lt;&lt;\"Derived::g(int)\"&lt;&lt; x &lt;&lt;endl; //éšè— &#125; //å‚æ•°ç›¸åŒçš„éšè— void h(float x) &#123; cout&lt;&lt;\"Derived::h(float)\"&lt;&lt; x &lt;&lt;endl; //éšè— &#125;&#125;;int main(void)&#123; Derived d; //å­ç±»å¯¹è±¡ Base *pb = &amp;d; //åŸºç±»ç±»å‹æŒ‡é’ˆï¼ŒæŒ‡å‘å­ç±»å¯¹è±¡ Derived *pd = &amp;d; //å­ç±»ç±»å‹æŒ‡é’ˆï¼ŒæŒ‡å‘å­ç±»å¯¹è±¡ // Good : behavior depends solely on type of the object pb-&gt;f(3.14f); // Derived::f(float) 3.14 è°ƒç”¨å­ç±»æ–¹æ³•ï¼Œå¤šæ€ pd-&gt;f(3.14f); // Derived::f(float) 3.14 è°ƒç”¨è‡ªå·±æ–¹æ³• // Bad : behavior depends on type of the pointer pb-&gt;g(3.14f); // Base::g(float) 3.14 pd-&gt;g(3.14f); // Derived::g(int) 3 // Bad : behavior depends on type of the pointer pb-&gt;h(3.14f); // Base::h(float) 3.14 pd-&gt;h(3.14f); // Derived::h(float) 3.14 return 0;&#125;æœ‰virtualæ‰å¯èƒ½å‘ç”Ÿå¤šæ€ç°è±¡ï¼Œä¸å‘ç”Ÿå¤šæ€ï¼ˆæ— virtualï¼‰è°ƒç”¨å°±æŒ‰åŸç±»å‹è°ƒç”¨ ã€‚ä¸Šé¢çš„ç¨‹åºä¸­ï¼šï¼ˆ1ï¼‰å‡½æ•°Derived::f(float)è¦†ç›–äº†Base::f(float)ï¼Œå‘ç”Ÿå¤šæ€é‡å†™ï¼ˆè¦†ç›–ï¼‰ã€‚ï¼ˆ2ï¼‰å‡½æ•°Derived::g(int)éšè—äº†Base::g(float)ï¼Œè€Œä¸æ˜¯é‡è½½ã€‚ï¼ˆ3ï¼‰å‡½æ•°Derived::h(float)éšè—äº†Base::h(float)ï¼Œè€Œä¸æ˜¯è¦†ç›–ã€‚æ€»ç»“ä¸ºï¼šåœ¨åŸºç±»ä¸å­ç±»å‡½æ•°åç›¸åŒçš„å‰æä¸‹ï¼Œæ ¹æ®å‚æ•°æ˜¯å¦ç›¸åŒã€æ˜¯å¦å…·æœ‰vritualå…³é”®å­—ï¼Œå¯åˆ†ä¸º4ç§æƒ…å†µï¼šå‚æ•°ç›¸åŒã€æœ‰virtualå…³é”®å­—ï¼šå¤šæ€é‡å†™ï¼›å‚æ•°ç›¸åŒã€æ— virtualå…³é”®å­—ï¼šéšè—ï¼›ä¸é‡å†™åŒºåˆ†ã€‚å‚æ•°ä¸åŒã€æœ‰virtualå…³é”®å­—ï¼šéšè—ï¼›ä¸é‡è½½åŒºåˆ†ã€‚å‚æ•°ä¸åŒã€æ— virtualå…³é”®å­—ï¼šéšè—ï¼›ä¸é‡è½½åŒºåˆ†ã€‚","categories":[],"tags":[]},{"title":"C&C++/æŒ‡å‘æ´¾ç”Ÿå¯¹è±¡çš„åŸºç±»çš„æŒ‡é’ˆå’Œå¼•ç”¨","slug":"C&C++/æŒ‡å‘æ´¾ç”Ÿå¯¹è±¡çš„åŸºç±»çš„æŒ‡é’ˆå’Œå¼•ç”¨","date":"2020-05-13T15:07:01.522Z","updated":"2020-05-14T02:53:23.033Z","comments":true,"path":"archives/66c8de20.html","link":"","permalink":"https://longlongqin.github.io/archives/66c8de20.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/121-pointers-and-references-to-the-base-class-of-derived-objects/åœ¨å‰ä¸€ç« ä¸­ï¼Œæ‚¨å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ç»§æ‰¿ä»ç°æœ‰ç±»æ´¾ç”Ÿæ–°ç±»çš„æ‰€æœ‰çŸ¥è¯†ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹è®¨è®ºç»§æ‰¿æœ€é‡è¦å’Œæœ€å¼ºå¤§çš„æ–¹é¢ä¹‹ä¸€â€”â€”è™šæ‹Ÿå‡½æ•°ã€‚ä½†æ˜¯åœ¨æˆ‘ä»¬è®¨è®ºä»€ä¹ˆæ˜¯è™šå‡½æ•°ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ¥è®¾ç½®ä¸ºä»€ä¹ˆéœ€è¦å®ƒä»¬ã€‚åœ¨ construction of derived classesä¸­ï¼Œæ‚¨äº†è§£äº†åœ¨åˆ›å»ºæ´¾ç”Ÿç±»æ—¶ï¼Œå®ƒç”±å¤šä¸ªéƒ¨åˆ†ç»„æˆï¼šä¸€éƒ¨åˆ†æ˜¯ç»§æ‰¿çš„ç±»ï¼›å¦ä¸€éƒ¨åˆ†æ˜¯å®ƒæœ¬èº«ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­:12345678910111213141516171819202122232425262728#include &lt;string_view&gt; class Base&#123;protected: int m_value; public: Base(int value) : m_value&#123; value &#125; &#123; &#125; std::string_view getName() const &#123; return \"Base\"; &#125; int getValue() const &#123; return m_value; &#125;&#125;; class Derived: public Base&#123;public: Derived(int value) : Base&#123; value &#125; &#123; &#125; std::string_view getName() const &#123; return \"Derived\"; &#125; int getValueDoubled() const &#123; return m_value * 2; &#125;&#125;;å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ´¾ç”Ÿå¯¹è±¡æ—¶ï¼Œå®ƒåŒ…å«ä¸€ä¸ªåŸºç±»Base éƒ¨åˆ†(é¦–å…ˆæ„é€ ) å’Œ ä¸€ä¸ªæ´¾ç”ŸDerivedéƒ¨åˆ†(å…¶æ¬¡æ„é€ )ã€‚è¯·è®°ä½ï¼Œç»§æ‰¿æ„å‘³ç€ä¸¤ä¸ªç±»ä¹‹é—´å­˜åœ¨ä¸€ä¸ªis-aå…³ç³»ã€‚å› ä¸º æ´¾ç”Ÿçš„is-a åŸºï¼Œæ‰€ä»¥æ´¾ç”Ÿçš„åŒ…å«åŸºéƒ¨åˆ†æ˜¯åˆé€‚çš„ã€‚æŒ‡é’ˆã€å¼•ç”¨å’Œæ´¾ç”Ÿç±»è¿™åº”è¯¥æ˜¯ç›¸å½“ç›´è§‚çš„ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æ´¾ç”ŸæŒ‡é’ˆå’Œå¼•ç”¨çš„æ´¾ç”Ÿå¯¹è±¡:123456789101112131415#include &lt;iostream&gt; int main()&#123; Derived derived&#123; 5 &#125;; std::cout &lt;&lt; \"derived is a \" &lt;&lt; derived.getName() &lt;&lt; \" and has value \" &lt;&lt; derived.getValue() &lt;&lt; '\\n'; Derived &amp;rDerived&#123; derived &#125;; std::cout &lt;&lt; \"rDerived is a \" &lt;&lt; rDerived.getName() &lt;&lt; \" and has value \" &lt;&lt; rDerived.getValue() &lt;&lt; '\\n'; Derived *pDerived&#123; &amp;derived &#125;; std::cout &lt;&lt; \"pDerived is a \" &lt;&lt; pDerived-&gt;getName() &lt;&lt; \" and has value \" &lt;&lt; pDerived-&gt;getValue() &lt;&lt; '\\n'; return 0;&#125;æŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡çš„åŸºç±»æŒ‡é’ˆä¸å¼•ç”¨ç„¶è€Œï¼Œç”±äºDerivedæœ‰ä¸€ä¸ªåŸºéƒ¨åˆ†ï¼Œä¸€ä¸ªæ›´æœ‰è¶£çš„é—®é¢˜æ˜¯c++æ˜¯å¦ä¼šè®©æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªåŸºæŒ‡é’ˆæˆ–å¼•ç”¨åˆ°ä¸€ä¸ªæ´¾ç”Ÿçš„å¯¹è±¡ã€‚äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬å¯ä»¥!12345678910111213141516#include &lt;iostream&gt; int main()&#123; Derived derived&#123; 5 &#125;; //ä¸‹é¢çš„ä¹Ÿæ˜¯åˆç†çš„ Base &amp;rBase &#123;derived&#125;; Base *pBase &#123;&amp;deriverd&#125;; std::cout &lt;&lt; \"derived is a \" &lt;&lt; derived.getName() &lt;&lt; \" and has value \" &lt;&lt; derived.getValue() &lt;&lt; '\\n'; std::cout &lt;&lt; \"rBase is a \" &lt;&lt; rBase.getName() &lt;&lt; \" and has value \" &lt;&lt; rBase.getValue() &lt;&lt; '\\n'; std::cout &lt;&lt; \"pBase is a \" &lt;&lt; pBase-&gt;getName() &lt;&lt; \" and has value \" &lt;&lt; pBase-&gt;getValue() &lt;&lt; '\\n'; return 0;&#125;å› ä¸ºrBaseå’ŒpBaseæ˜¯ä¸€ä¸ªåŸºç±»çš„å¼•ç”¨å’ŒæŒ‡é’ˆï¼Œæ‰€ä»¥å®ƒä»¬åªèƒ½çœ‹åˆ°åŸºç±»çš„æˆå‘˜(æˆ–è€…åŸºç±»ç»§æ‰¿çš„ä»»ä½•ç±»)ã€‚å› æ­¤ï¼Œå³ä½¿Derived::getName() çš„é˜´å½±(éšè—)Base::getName()çš„æ´¾ç”Ÿå¯¹è±¡ï¼ŒåŸºæŒ‡é’ˆ/å¼•ç”¨ä¸èƒ½çœ‹åˆ°Derived::getName()ã€‚å› æ­¤ï¼Œå®ƒä»¬è°ƒç”¨Base::getName()ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆrBaseå’ŒpBaseæŠ¥å‘Šè¯´å®ƒä»¬æ˜¯åŸºè€Œä¸æ˜¯æ´¾ç”Ÿçš„ã€‚æ³¨æ„ï¼Œè¿™ä¹Ÿæ„å‘³ç€ä¸å¯èƒ½ä½¿ç”¨rBaseæˆ–pBaseè°ƒç”¨Derived::getValueDoubled()ã€‚ä»–ä»¬çœ‹ä¸åˆ°ä»»ä½•è¡ç”Ÿçš„ä¸œè¥¿ã€‚å¦ä¸€ä¸ªä¾‹å­ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;string_view&gt;class Animal&#123;protected: std::string m_name; //æˆ‘ä»¬ä½¿è¿™ä¸ªæ„é€ å‡½æ•°å—ä¿æŠ¤ï¼Œå› ä¸º //æˆ‘ä»¬ä¸å¸Œæœ›äººä»¬ç›´æ¥åˆ›å»ºåŠ¨ç‰©å¯¹è±¡ï¼Œ //ä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¸Œæœ›æ´¾ç”Ÿç±»èƒ½å¤Ÿä½¿ç”¨å®ƒã€‚ Animal(const std::string &amp;name) : m_name &#123;name&#125; &#123; &#125;public: const std::string&amp; getName() const &#123; return m_name; &#125; std::string_view speak() const &#123; return \"???\"; &#125;&#125;;class Cat : public Animal&#123;public: Cat(const std::string&amp; name) : Animal&#123;name&#125; &#123; &#125; std::string_view speak() const &#123; return \"Meow\"; &#125;&#125;;class Dog : public Animal&#123;public: Dog(const std::string&amp; name) : Animal&#123;name&#125; &#123; &#125; std::string_view speak() const &#123; return \"Woof\"; &#125;&#125;;int main()&#123; Cat cat&#123; \"Freed\" &#125;; std::cout &lt;&lt; \"cat is named \" &lt;&lt; cat.getName() &lt;&lt; \", and it says\" &lt;&lt; cat.speak() &lt;&lt; '\\n'; Dog dog&#123; \"HeiHu\" &#125;; std::cout &lt;&lt; \"dog is named \" &lt;&lt; dog.getName() &lt;&lt; \", and it says \" &lt;&lt; dog.speak() &lt;&lt; '\\n'; Animal* pAnimal&#123; &amp;cat &#125;; std::cout &lt;&lt; \"pAnimal is named \" &lt;&lt; pAnimal-&gt;getName() &lt;&lt; \", and it says \" &lt;&lt; pAnimal-&gt;speak() &lt;&lt; '\\n'; pAnimal = &amp;dog; std::cout &lt;&lt; \"pAnimal is named \" &lt;&lt; pAnimal-&gt;getName() &lt;&lt; \", and it says \" &lt;&lt; pAnimal-&gt;speak() &lt;&lt; '\\n'; std::cin.clear(); std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); std::cin.get(); return 0;&#125;/*ç»“æœ*/cat is named Fred, and it says Meowdog is named Garbo, and it says WoofpAnimal is named Fred, and it says ???pAnimal is named Garbo, and it says ???æˆ‘ä»¬åœ¨è¿™é‡Œçœ‹åˆ°äº†åŒæ ·çš„é—®é¢˜ã€‚å› ä¸ºpAnimalæ˜¯ä¸€ä¸ªåŠ¨ç‰©æŒ‡é’ˆï¼Œæ‰€ä»¥å®ƒåªèƒ½çœ‹åˆ°ç±»çš„åŠ¨ç‰©éƒ¨åˆ†ã€‚å› æ­¤ï¼ŒpAnimal-&gt;speak()è°ƒç”¨Animal::speak()ï¼Œè€Œä¸æ˜¯Dog:: speak()æˆ–Cat::speak()å‡½æ•°ã€‚ç”¨äºæŒ‡å‘åŸºç±»çš„æŒ‡é’ˆå’Œå¼•ç”¨ç°åœ¨ä½ å¯èƒ½ä¼šè¯´ï¼Œâ€œä¸Šé¢çš„ä¾‹å­çœ‹èµ·æ¥æœ‰ç‚¹å‚»ã€‚å½“æˆ‘å¯ä»¥ä½¿ç”¨æ´¾ç”Ÿå¯¹è±¡æ—¶ï¼Œä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸€ä¸ªæŒ‡é’ˆæˆ–å¼•ç”¨æ¥æŒ‡å‘æ´¾ç”Ÿå¯¹è±¡çš„åŸºç±»?â€œäº‹å®è¯æ˜ï¼Œæœ‰ç›¸å½“å¤šçš„ç†ç”±ã€‚é¦–å…ˆï¼Œå‡è®¾æ‚¨æƒ³ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æ‰“å°åŠ¨ç‰©çš„åå­—å’Œå£°éŸ³ã€‚å¦‚æœä¸ä½¿ç”¨æŒ‡å‘åŸºç±»çš„æŒ‡é’ˆï¼Œå°±å¿…é¡»ä½¿ç”¨é‡è½½å‡½æ•°æ¥ç¼–å†™å®ƒï¼Œå¦‚ä¸‹æ‰€ç¤º:123456789void report(const Cat &amp;cat)&#123; std::cout &lt;&lt; cat.getName() &lt;&lt; \" says \" &lt;&lt; cat.speak() &lt;&lt; '\\n';&#125; void report(const Dog &amp;dog)&#123; std::cout &lt;&lt; dog.getName() &lt;&lt; \" says \" &lt;&lt; dog.speak() &lt;&lt; '\\n';&#125;ä¸éš¾ï¼Œä½†æ˜¯æƒ³æƒ³å¦‚æœæˆ‘ä»¬æœ‰30ç§ä¸åŒçš„åŠ¨ç‰©è€Œä¸æ˜¯2ç§ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆã€‚ä½ å¿…é¡»å†™30ä¸ªå‡ ä¹ç›¸åŒçš„å‡½æ•°!å¦å¤–ï¼Œå¦‚æœä½ æ·»åŠ äº†ä¸€ç§æ–°çš„åŠ¨ç‰©ï¼Œä½ ä¹Ÿå¿…é¡»ä¸ºå®ƒå†™ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚è€ƒè™‘åˆ°å”¯ä¸€çœŸæ­£çš„åŒºåˆ«æ˜¯å‚æ•°çš„ç±»å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„æ—¶é—´æµªè´¹ã€‚ç„¶è€Œï¼Œå› ä¸ºCat å’Œ Dog æ´¾ç”Ÿäº Animalï¼ŒCat å’Œ Dog æœ‰ä¸€ä¸ªAnimalçš„éƒ¨åˆ†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿè¿™æ ·åšæ˜¯æœ‰æ„ä¹‰çš„:1234void report(const Animal &amp;rAnimal)&#123; std::cout &lt;&lt; rAnimal.getName() &lt;&lt; \" says \" &lt;&lt; rAnimal.speak() &lt;&lt; '\\n';&#125;è¿™å°†å…è®¸æˆ‘ä»¬ä¼ å…¥ä»»ä½•æ´¾ç”Ÿè‡ªAnimalçš„ç±»ï¼Œç”šè‡³æ˜¯æˆ‘ä»¬åœ¨ç¼–å†™å‡½æ•°ä¹‹ååˆ›å»ºçš„ç±»! ä¸æ˜¯æ¯ä¸ªæ´¾ç”Ÿç±»éƒ½æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯æœ‰ä¸€ä¸ªå‡½æ•°å¯ä»¥å¤„ç†æ‰€æœ‰ä»Animalæ´¾ç”Ÿçš„ç±»!å½“ç„¶ï¼Œé—®é¢˜æ˜¯ï¼Œå› ä¸ºrAnimalæ˜¯ä¸€ä¸ª Animal å¼•ç”¨ï¼Œæ‰€ä»¥rAnimal.speak()å°†è°ƒç”¨Animal::speak()ï¼Œè€Œä¸æ˜¯speak()çš„æ´¾ç”Ÿç‰ˆæœ¬ã€‚å…¶æ¬¡ï¼Œå‡è®¾æ‚¨æœ‰3åªçŒ«å’Œ3åªç‹—ï¼Œæ‚¨å¸Œæœ›å°†å®ƒä»¬æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä»¥ä¾¿äºè®¿é—®ã€‚å› ä¸ºæ•°ç»„åªèƒ½ä¿å­˜ä¸€ç§ç±»å‹çš„å¯¹è±¡ï¼Œæ²¡æœ‰æŒ‡é’ˆæˆ–å¯¹åŸºç±»çš„å¼•ç”¨ï¼Œæ‰€ä»¥å¿…é¡»ä¸ºæ¯ä¸ªæ´¾ç”Ÿç±»å‹åˆ›å»ºä¸åŒçš„æ•°ç»„ï¼Œå¦‚ä¸‹æ‰€ç¤º:123456789101112131415#include &lt;iostream&gt; int main()&#123; Cat cats[]&#123; &#123; \"Fred\" &#125;, &#123; \"Misty\" &#125;, &#123; \"Zeke\" &#125; &#125;; Dog dogs[]&#123; &#123; \"Garbo\" &#125;, &#123; \"Pooky\" &#125;, &#123; \"Truffle\" &#125; &#125;; for (const auto &amp;cat : cats) std::cout &lt;&lt; cat.getName() &lt;&lt; \" says \" &lt;&lt; cat.speak() &lt;&lt; '\\n'; for (const auto &amp;dog : dogs) std::cout &lt;&lt; dog.getName() &lt;&lt; \" says \" &lt;&lt; dog.speak() &lt;&lt; '\\n'; return 0;&#125;ç°åœ¨ï¼Œè€ƒè™‘ä¸€ä¸‹å¦‚æœä½ æœ‰30ç§ä¸åŒçš„åŠ¨ç‰©ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ä½ éœ€è¦30ä¸ªæ•°ç»„ï¼Œæ¯ç§åŠ¨ç‰©ä¸€ä¸ª!ç„¶è€Œï¼Œå› ä¸ºçŒ«å’Œç‹—éƒ½æ¥è‡ªäºåŠ¨ç‰©ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿåšè¿™æ ·çš„äº‹æƒ…æ˜¯æœ‰é“ç†çš„:12345678910111213141516171819#include &lt;iostream&gt; int main()&#123; Cat fred&#123; \"Fred\" &#125;; Cat misty&#123; \"Misty\" &#125;; Cat zeke&#123; \"Zeke\" &#125;; Dog garbo&#123; \"Garbo\" &#125;; Dog pooky&#123; \"Pooky\" &#125;; Dog truffle&#123; \"Truffle\" &#125;; // è®¾ç½®ä¸€ä¸ªæŒ‡å‘animalsçš„ æŒ‡é’ˆæ•°ç»„ï¼Œå¹¶å°†è¿™äº›æŒ‡é’ˆè®¾ç½®ä¸ºæŒ‡å‘æˆ‘ä»¬çš„Catå’ŒDogå¯¹è±¡ Animal *animals[]&#123; &amp;fred, &amp;garbo, &amp;misty, &amp;pooky, &amp;truffle, &amp;zeke &#125;; for (const auto animal : animals) std::cout &lt;&lt; animal-&gt;getName() &lt;&lt; \" says \" &lt;&lt; animal-&gt;speak() &lt;&lt; '\\n'; return 0;&#125;è™½ç„¶ä»–ä»¬å¯ç¼–è¯‘ï¼Œå¯æ‰§è¡Œæ—¶ï¼Œä¸å¹¸çš„æ˜¯ï¼Œæ•°ç»„â€œanimalsâ€çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯æŒ‡å‘åŠ¨ç‰©çš„æŒ‡é’ˆï¼Œè¿™æ„å‘³ç€animals[iii]-&gt;speak()å°†è°ƒç”¨Animal::speak()ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„speak()çš„æ´¾ç”Ÿç±»ç‰ˆæœ¬ã€‚è™½ç„¶è¿™ä¸¤ç§æŠ€æœ¯éƒ½å¯ä»¥èŠ‚çœæˆ‘ä»¬å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›ï¼Œä½†å®ƒä»¬éƒ½æœ‰ç›¸åŒçš„é—®é¢˜ã€‚æŒ‡å‘åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨å‡½æ•°çš„åŸºç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯æ´¾ç”Ÿç‰ˆæœ¬ã€‚å¦‚æœæœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥è®©è¿™äº›åŸºæŒ‡é’ˆè°ƒç”¨å‡½æ•°çš„æ´¾ç”Ÿç‰ˆæœ¬è€Œä¸æ˜¯åŸºç‰ˆæœ¬å°±å¥½äº†â€¦â€¦ -â€”â€”â€”â€”è™šå‡½æ•°","categories":[],"tags":[]},{"title":"C&C++/å¤šé‡ç»§æ‰¿","slug":"C&C++/å¤šé‡ç»§æ‰¿","date":"2020-05-13T14:25:49.678Z","updated":"2020-05-13T14:43:38.445Z","comments":true,"path":"archives/38f967fd.html","link":"","permalink":"https://longlongqin.github.io/archives/38f967fd.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/117-multiple-inheritance/å¤šé‡ç»§æ‰¿åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä»‹ç»çš„æ‰€æœ‰ç»§æ‰¿ç¤ºä¾‹éƒ½æ˜¯å•ç»§æ‰¿â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªç»§æ‰¿çš„ç±»éƒ½æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶ç±»ã€‚ç„¶è€Œï¼Œc++æä¾›äº†è¿›è¡Œå¤šé‡ç»§æ‰¿çš„èƒ½åŠ›ã€‚å¤šé‡ç»§æ‰¿ä½¿æ´¾ç”Ÿç±»èƒ½å¤Ÿä»å¤šä¸ªçˆ¶ç±»ç»§æ‰¿æˆå‘˜ã€‚å‡è®¾ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦ç¼–å†™ä¸€ä¸ªç¨‹åºæ¥è·Ÿè¸ªä¸€ç¾¤è€å¸ˆã€‚è€å¸ˆæ˜¯ä¸€ä¸ªäººï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªé›‡å‘˜(å¦‚æœä¸ºè‡ªå·±å·¥ä½œï¼Œä»–ä»¬å°±æ˜¯è‡ªå·±çš„é›‡ä¸»)ã€‚å¤šé‡ç»§æ‰¿å¯ç”¨äºåˆ›å»ºæ•™å¸ˆç±»ï¼Œè¯¥ç±»ç»§æ‰¿Personå’ŒEmployeeçš„å±æ€§ã€‚è¦ä½¿ç”¨å¤šé‡ç»§æ‰¿ï¼Œåªéœ€æŒ‡å®šæ¯ä¸ªåŸºç±»(å°±åƒåœ¨å•ç»§æ‰¿ä¸­ä¸€æ ·)ï¼Œä¸­é—´ç”¨é€—å·åˆ†éš”ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546#include &lt;string&gt; class Person&#123;private: std::string m_name; int m_age; public: Person(std::string name, int age) : m_name(name), m_age(age) &#123; &#125; std::string getName() &#123; return m_name; &#125; int getAge() &#123; return m_age; &#125;&#125;; class Employee&#123;private: std::string m_employer; double m_wage; public: Employee(std::string employer, double wage) : m_employer(employer), m_wage(wage) &#123; &#125; std::string getEmployer() &#123; return m_employer; &#125; double getWage() &#123; return m_wage; &#125;&#125;; // Teacher publicly inherits Person and Employeeclass Teacher: public Person, public Employee //â­è®°å¾—ç”¨ é€—å· éš”å¼€&#123;private: int m_teachesGrade; public: Teacher(std::string name, int age, std::string employer, double wage, int teachesGrade) : Person(name, age), Employee(employer, wage), m_teachesGrade(teachesGrade) &#123; &#125;&#125;;å¤šé‡ç»§æ‰¿çš„é—®é¢˜è™½ç„¶å¤šé‡ç»§æ‰¿çœ‹èµ·æ¥åƒæ˜¯å•ç»§æ‰¿çš„ç®€å•æ‰©å±•ï¼Œä½†æ˜¯å¤šé‡ç»§æ‰¿å¼•å…¥äº†å¾ˆå¤šé—®é¢˜ï¼Œè¿™äº›é—®é¢˜ä¼šæ˜¾è‘—å¢åŠ ç¨‹åºçš„å¤æ‚æ€§ï¼Œä½¿å®ƒä»¬æˆä¸ºç»´æŠ¤çš„æ¢¦é­‡ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›æƒ…å†µã€‚é¦–å…ˆï¼Œå½“å¤šä¸ªåŸºç±»åŒ…å«å…·æœ‰ç›¸åŒåç§°çš„å‡½æ•°æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ­§ä¹‰ã€‚ä¾‹å¦‚:12345678910111213141516171819202122232425262728293031323334353637383940414243444546#include &lt;iostream&gt; class USBDevice&#123;private: long m_id; public: USBDevice(long id) : m_id(id) &#123; &#125; long getID() &#123; return m_id; &#125;&#125;; class NetworkDevice&#123;private: long m_id; public: NetworkDevice(long id) : m_id(id) &#123; &#125; long getID() &#123; return m_id; &#125;&#125;; class WirelessAdapter: public USBDevice, public NetworkDevice&#123;public: WirelessAdapter(long usbId, long networkId) : USBDevice(usbId), NetworkDevice(networkId) &#123; &#125;&#125;; int main()&#123; WirelessAdapter c54G(5442, 181742); std::cout &lt;&lt; c54G.getID(); // Which getID() do we call?â­ return 0;&#125;åœ¨ç¼–è¯‘c54G.getID()æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŸ¥çœ‹WirelessAdapteræ˜¯å¦åŒ…å«ä¸€ä¸ªåä¸ºgetID()çš„å‡½æ•°ã€‚å®ƒæ²¡æœ‰ã€‚ç„¶åç¼–è¯‘å™¨æŸ¥çœ‹çˆ¶ç±»ä¸­æ˜¯å¦æœ‰ä¸€ä¸ªåä¸ºgetID()çš„å‡½æ•°ã€‚çœ‹åˆ°é—®é¢˜äº†å—? é—®é¢˜æ˜¯ï¼Œc54Gå®é™…ä¸ŠåŒ…å«ä¸¤ä¸ªgetID()å‡½æ•°:ä¸€ä¸ªç»§æ‰¿è‡ªUSBDeviceï¼Œå¦ä¸€ä¸ªç»§æ‰¿è‡ªNetworkDeviceã€‚å› æ­¤ï¼Œè¿™ä¸ªå‡½æ•°è°ƒç”¨æ˜¯ä¸æ˜ç¡®çš„ï¼Œå¦‚æœå°è¯•ç¼–è¯‘å®ƒï¼Œæ‚¨å°†æ”¶åˆ°ä¸€ä¸ªç¼–è¯‘å™¨é”™è¯¯ã€‚è§£å†³åŠæ³•ä½†æ˜¯ï¼Œæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜: æ‚¨å¯ä»¥æ˜¾å¼åœ°æŒ‡å®šè¦è°ƒç”¨çš„ç‰ˆæœ¬1234567int main()&#123; WirelessAdapter c54G(5442, 181742); std::cout &lt;&lt; c54G.USBDevice::getID(); //â­ return 0;&#125;è™½ç„¶è¿™ä¸ªè§£å†³æ–¹æ³•éå¸¸ç®€å•ï¼Œä½†æ˜¯å½“æ‚¨çš„ç±»ç»§æ‰¿äº†ä»å…¶ä»–ç±»æœ¬èº«ç»§æ‰¿çš„4æˆ–6ä¸ªåŸºç±»æ—¶ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°äº‹æƒ…ä¼šå˜å¾—å¤šä¹ˆå¤æ‚ã€‚éšç€ç»§æ‰¿æ›´å¤šçš„ç±»ï¼Œå‘½åå†²çªçš„å¯èƒ½æ€§å‘ˆæŒ‡æ•°çº§å¢åŠ ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªå‘½åå†²çªéƒ½éœ€è¦æ˜¾å¼åœ°è§£å†³ã€‚","categories":[],"tags":[]},{"title":"C&C++/æ”¹å˜ç»§æ‰¿çš„æˆå‘˜çš„è®¿é—®çº§åˆ« åŠ éšè—ç»§æ‰¿è‡ªçˆ¶ç±»çš„æˆå‘˜","slug":"C&C++/æ”¹å˜ç»§æ‰¿çš„æˆå‘˜çš„è®¿é—®çº§åˆ« åŠ éšè—ç»§æ‰¿è‡ªçˆ¶ç±»çš„æˆå‘˜","date":"2020-05-13T13:59:29.348Z","updated":"2020-05-13T14:23:32.685Z","comments":true,"path":"archives/c4d17f90.html","link":"","permalink":"https://longlongqin.github.io/archives/c4d17f90.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/11-6b-hiding-inherited-functionality/æ›´æ”¹ ç»§æ‰¿æˆå‘˜çš„è®¿é—®çº§åˆ«C++ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨æ´¾ç”Ÿç±»ä¸­æ›´æ”¹ç»§æ‰¿æˆå‘˜çš„è®¿é—®è¯´æ˜ç¬¦ã€‚è¿™æ˜¯é€šè¿‡ä½¿ç”¨usingæ¥å£°æ˜ (é™å®šä½œç”¨åŸŸçš„)åŸºç±»æˆå‘˜ åœ¨æ´¾ç”Ÿç±»çš„æ–°è®¿é—®è¯´æ˜ç¬¦ä¸‹ æ›´æ”¹å…¶è®¿é—®æƒé™ã€‚12345678910111213141516#include &lt;iostream&gt; class Base&#123;private: int m_value; public: Base(int value) : m_value(value) &#123; &#125; protected: void printValue() &#123; std::cout &lt;&lt; m_value; &#125;&#125;;å› ä¸ºBase::printValue()å·²ç»è¢«å£°æ˜ä¸º protectedï¼Œæ‰€ä»¥å®ƒåªèƒ½è¢«Baseæˆ–å®ƒçš„æ´¾ç”Ÿç±»è°ƒç”¨ã€‚è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œå®ƒå°†printValue() åœ¨è¯¥æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®è¯´æ˜ç¬¦æ›´æ”¹ä¸ºpublic:123456789101112class Derived: public Base&#123;public: Derived(int value) : Base(value) &#123; &#125; // Base::printValue ä¹‹å‰è¢«ç»§æ‰¿ä¸ºå—ä¿æŠ¤çš„ï¼Œæ‰€ä»¥å…¬ä¼—æ²¡æœ‰æƒé™è®¿é—® // ä½†æˆ‘ä»¬é€šè¿‡ usingå£°æ˜ å°†å…¶æ”¹ä¸ºpubic using Base::printValue; // note: æ²¡æœ‰å°æ‹¬å·â­&#125;;è¿™æ„å‘³ç€è¿™ä¸ªä»£ç å°†å·¥ä½œ:12345678int main()&#123; Derived derived(7); // printValue is public in Derived, so this is okay derived.printValue(); // prints 7 return 0;&#125;æ³¨æ„é¦–å…ˆï¼Œæ‚¨åªèƒ½æ›´æ”¹æ´¾ç”Ÿç±»é€šå¸¸èƒ½å¤Ÿè®¿é—®çš„åŸºæœ¬æˆå‘˜çš„è®¿é—®è¯´æ˜ç¬¦ã€‚å› æ­¤ï¼Œæ°¸è¿œä¸èƒ½å°†åŸºæˆå‘˜çš„è®¿é—®è¯´æ˜ç¬¦ä»privateæ›´æ”¹ä¸ºprotectedæˆ–publicï¼Œå› ä¸ºæ´¾ç”Ÿç±»ä¸èƒ½è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚å…¶æ¬¡ï¼Œä»c++ 11å¼€å§‹ï¼Œusingå£°æ˜ æ˜¯æ”¹å˜è®¿é—®çº§åˆ«çš„é¦–é€‰æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨â€œè®¿é—®å£°æ˜â€æ¥æ›´æ”¹è®¿é—®çº§åˆ«ã€‚è¿™ä¸usingå£°æ˜æ–¹æ³•çš„å·¥ä½œæ–¹å¼ç›¸åŒï¼Œä½†æ˜¯çœç•¥äº†â€œusingâ€å…³é”®å­—ã€‚è¿™ç§é‡æ–°å®šä¹‰è®¿é—®çš„è®¿é—®å£°æ˜æ–¹å¼ç°åœ¨è¢«è®¤ä¸ºæ˜¯ä¸èµæˆçš„ï¼Œä½†æ˜¯æ‚¨å¯èƒ½ä¼šçœ‹åˆ°ä½¿ç”¨è¿™ç§æ¨¡å¼çš„æ—§ä»£ç ï¼Œå› æ­¤å€¼å¾—äº†è§£ã€‚å°†åŠŸèƒ½éšè—èµ·æ¥åœ¨c++ä¸­ï¼Œé™¤äº†ä¿®æ”¹æºä»£ç å¤–ï¼Œä¸å¯èƒ½ä»åŸºç±»ä¸­åˆ é™¤æˆ–é™åˆ¶åŠŸèƒ½ã€‚ä½†æ˜¯ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œå¯ä»¥éšè—åŸºç±»ä¸­å­˜åœ¨çš„å‡½æ•°ï¼Œè¿™æ ·å°±ä¸èƒ½é€šè¿‡æ´¾ç”Ÿç±»è®¿é—®å®ƒã€‚è¿™å¯ä»¥é€šè¿‡æ›´æ”¹ç›¸å…³çš„ è®¿é—®è¯´æ˜ç¬¦æ¥å®Œæˆã€‚123456789101112131415161718192021222324252627282930#include &lt;iostream&gt;class Base&#123;public: int m_value;&#125;; class Derived : public Base&#123;private: using Base::m_value; //â­å°†Baseç±»ä¸­çš„ (public)æˆå‘˜å˜é‡m_value çš„è®¿é—®å±æ€§ä¿®æ”¹ä¸ºprivate public: Derived(int value) // æˆ‘ä»¬ä¸èƒ½åˆå§‹åŒ–m_valueï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåŸºç±»çš„ æˆå‘˜(åŸºç±» å¿…é¡»åˆå§‹åŒ–å®ƒ) &#123; // ä½†æˆ‘ä»¬å¯ä»¥ç»™å®ƒèµ‹å€¼ m_value = value; &#125;&#125;; int main()&#123; Derived derived(7); // å› ä¸ºm_valueå·²ç»è¢«é‡æ–°å®šä¹‰ä¸ºprivateï¼Œæ‰€ä»¥ä¸‹é¢çš„ä»£ç ä¸èƒ½ç”¨ std::cout &lt;&lt; derived.m_value; //âœ– return 0;&#125;æ³¨æ„ï¼Œè¿™å…è®¸æˆ‘ä»¬è·å–è®¾è®¡ç³Ÿç³•çš„åŸºç±»ï¼Œå¹¶å°†å…¶æ•°æ®å°è£…åœ¨æˆ‘ä»¬çš„æ´¾ç”Ÿç±»ä¸­ã€‚æˆ–è€…ï¼Œä¸å…¶å…¬å¼€ç»§æ‰¿Baseçš„æˆå‘˜å¹¶é€šè¿‡è¦†ç›–å®ƒçš„è®¿é—®è¯´æ˜ç¬¦ä½¿m_valueç§æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥ç§æœ‰çš„ç»§æ‰¿Baseï¼Œè¿™å°†é¦–å…ˆå¯¼è‡´æ‰€æœ‰çš„Baseæˆå‘˜è¢«ç§æœ‰ç»§æ‰¿ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­ å°†æˆå‘˜å‡½æ•°æ ‡è®°ä¸ºdeleteï¼Œè¿™ç¡®ä¿äº†å®ƒä»¬ä¸èƒ½é€šè¿‡æ´¾ç”Ÿå¯¹è±¡è¢«è°ƒç”¨ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717223456789101112131415161718192021222324252627282930313233343536#include &lt;iostream&gt;class Base&#123;private: int m_value; public: Base(int value) : m_value(value) &#123; &#125; int getValue() &#123; return m_value; &#125;&#125;; class Derived : public Base&#123;public: Derived(int value) : Base(value) &#123; &#125; int getValue() = delete; //â­ mark this function as inaccessible&#125;; int main()&#123; Derived derived(7); // The following won't work because getValue() has been deleted! std::cout &lt;&lt; derived.getValue(); return 0;&#125;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†getValue()å‡½æ•°æ ‡è®°ä¸ºdeletedã€‚è¿™æ„å‘³ç€å½“æˆ‘ä»¬è¯•å›¾è°ƒç”¨å‡½æ•°çš„æ´¾ç”Ÿç‰ˆæœ¬æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå‘å‡ºè­¦å‘Šã€‚æ³¨æ„ï¼ŒgetValue()çš„åŸºæœ¬ç‰ˆæœ¬ä»ç„¶æ˜¯å¯è®¿é—®çš„ã€‚è¿™æ„å‘³ç€æ´¾ç”Ÿå¯¹è±¡ä»ç„¶å¯ä»¥è®¿é—®getValue()ï¼Œæ–¹æ³•æ˜¯å…ˆå°†æ´¾ç”Ÿå¯¹è±¡å‘ä¸Šè½¬æ¢ä¸ºåŸºå¯¹è±¡:123456789int main()&#123; Derived derived(7); // æˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡åŸºç±»è®¿é—® åœ¨æ´¾ç”Ÿç±»ä¸­åˆ é™¤çš„å‡½æ•° std::cout &lt;&lt; static_cast&lt;Base&gt;(derived).getValue(); //â­ return 0;&#125;","categories":[],"tags":[]},{"title":"C&C++/è°ƒç”¨ ç»§æ‰¿å‡½æ•°å’Œè¦†ç›–è¡Œä¸º","slug":"C&C++/è°ƒç”¨ ç»§æ‰¿å‡½æ•°å’Œè¦†ç›–è¡Œä¸º","date":"2020-05-13T08:26:42.293Z","updated":"2020-05-13T13:51:53.734Z","comments":true,"path":"archives/cedb49a3.html","link":"","permalink":"https://longlongqin.github.io/archives/cedb49a3.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/11-6a-calling-inherited-functions-and-overriding-behavior/é»˜è®¤æƒ…å†µä¸‹ï¼Œæ´¾ç”Ÿç±»ç»§æ‰¿åŸºç±»ä¸­å®šä¹‰çš„æ‰€æœ‰è¡Œä¸ºã€‚åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°ç ”ç©¶å¦‚ä½•é€‰æ‹©æˆå‘˜å‡½æ•°ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨å®ƒæ¥æ›´æ”¹æ´¾ç”Ÿç±»ä¸­çš„è¡Œä¸ºã€‚è°ƒç”¨åŸºç±»å‡½æ•°å½“ä½¿ç”¨æ´¾ç”Ÿç±»å¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨é¦–å…ˆæŸ¥çœ‹è¯¥æˆå‘˜æ˜¯å¦å­˜åœ¨äºæ´¾ç”Ÿç±»ä¸­ã€‚å¦‚æœæ²¡æœ‰ï¼Œå®ƒå°±å¼€å§‹éå†ç»§æ‰¿é“¾å¹¶æ£€æŸ¥æˆå‘˜æ˜¯å¦åœ¨ä»»ä½•çˆ¶ç±»ä¸­å®šä¹‰ã€‚å®ƒä½¿ç”¨æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªã€‚1234567891011121314151617181920212223242526272829303132333435class Base&#123;protected: int m_value; public: Base(int value) : m_value(value) &#123; &#125; void identify() &#123; std::cout &lt;&lt; \"I am a Base\\n\"; &#125;&#125;; class Derived: public Base&#123;public: Derived(int value) : Base(value) &#123; &#125;&#125;;int main()&#123; Base base(5); base.identify(); Derived derived(7); derived.identify(); return 0;&#125;/*ç»“æœ*/I am a BaseI am a Baseå½“derived.identify()è¢«è°ƒç”¨æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŸ¥çœ‹Derivedç±»ä¸­æ˜¯å¦å®šä¹‰äº†identify()å‡½æ•°ã€‚å®ƒæ²¡æœ‰ã€‚ç„¶åå®ƒå¼€å§‹æŸ¥æ‰¾ç»§æ‰¿çš„ç±»(åœ¨æœ¬ä¾‹ä¸­æ˜¯Base)ã€‚Baseå®šä¹‰äº†ä¸€ä¸ªidentify()å‡½æ•°ï¼Œæ‰€ä»¥å®ƒä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚æ¢å¥è¯è¯´ï¼Œä½¿ç”¨Base::identify()æ˜¯å› ä¸ºæ´¾ç”Ÿçš„Derived::identify()ä¸å­˜åœ¨ã€‚é‡å®šä¹‰è¡Œä¸º(é‡æ–°å®šä¹‰çˆ¶ç±»ä¸­çš„å‡½æ•°)ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ´¾ç”Ÿç±»ä¸­å®šä¹‰äº†Derived::identify()ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨å®ƒã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰è¿™ä¸ªå‡½æ•°ï¼Œæ¥è®©å‡½æ•°ä»¥ä¸åŒçš„æ–¹å¼å·¥ä½œ!è¦ä¿®æ”¹åŸºç±»ä¸­å®šä¹‰çš„å‡½æ•°åœ¨æ´¾ç”Ÿç±»ä¸­çš„å·¥ä½œæ–¹å¼ï¼Œåªéœ€é‡æ–°å®šä¹‰æ´¾ç”Ÿç±»ä¸­çš„å‡½æ•°ã€‚12345678910111213class Derived: public Base&#123;public: Derived(int value) : Base(value) &#123; &#125; int getValue() &#123; return m_value; &#125; // Here's our modified function void identify() &#123; std::cout &lt;&lt; \"I am a Derived\\n\"; &#125;&#125;;ä¸‹é¢æ˜¯ä¸ä¸Šé¢ç›¸åŒçš„ä¾‹å­ï¼Œä½¿ç”¨æ–°çš„Derived::Identify()å‡½æ•°:12345678910int main()&#123; Base base(5); base.identify(); Derived derived(7); derived.identify(); return 0;&#125;è¿è¡Œç»“æœï¼š12I am a BaseI am a Derivedæ³¨æ„æ³¨æ„ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰å‡½æ•°æ—¶ï¼Œæ´¾ç”Ÿå‡½æ•°ä¸ä¼šç»§æ‰¿åŸºç±»ä¸­åŒåå‡½æ•°çš„è®¿é—®è¯´æ˜ç¬¦ã€‚å®ƒä½¿ç”¨åœ¨æ´¾ç”Ÿç±»ä¸­å®šä¹‰çš„è®¿é—®è¯´æ˜ç¬¦ã€‚å› æ­¤ï¼Œåœ¨åŸºç±»ä¸­å®šä¹‰ä¸ºprivateçš„å‡½æ•°å¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰ä¸ºpublicï¼Œåä¹‹äº¦ç„¶!1234567891011121314151617181920212223242526class Base&#123;private: void print() &#123; std::cout &lt;&lt; \"Base\"; &#125;&#125;; class Derived : public Base&#123;public: void print() &#123; std::cout &lt;&lt; \"Derived \"; &#125; &#125;; int main()&#123; Derived derived; derived.print(); // calls derived::print(), which is public return 0;&#125;æ·»åŠ åŠŸèƒ½åˆ°ç°æœ‰çš„çˆ¶ç±»å‡½æ•°ä¸­æœ‰æ—¶æˆ‘ä»¬å¹¶ä¸æƒ³å®Œå…¨æ›¿æ¢åŸºç±»å‡½æ•°ï¼Œè€Œæ˜¯å¸Œæœ›å‘å®ƒæ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ³¨æ„æ´¾ç”Ÿçš„::identify()å®Œå…¨éšè—äº†Base::identify()! è¿™å¯èƒ½ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚å¯ä»¥è®©æˆ‘ä»¬çš„æ´¾ç”Ÿå‡½æ•°è°ƒç”¨åŒåå‡½æ•°çš„åŸºæœ¬ç‰ˆæœ¬(ä»¥ä¾¿é‡ç”¨ä»£ç )ï¼Œç„¶åå‘å®ƒæ·»åŠ é¢å¤–çš„åŠŸèƒ½ã€‚è¦è®©æ´¾ç”Ÿå‡½æ•°è°ƒç”¨åŒåçš„åŸºå‡½æ•°ï¼Œåªéœ€æ‰§è¡Œä¸€ä¸ªæ™®é€šçš„å‡½æ•°è°ƒç”¨ï¼Œä½†åœ¨å‡½æ•°å‰é¢åŠ ä¸Šä½œç”¨åŸŸé™å®šç¬¦(åŸºç±»çš„åç§°å’Œä¸¤ä¸ªå†’å·)ã€‚ä¸‹é¢çš„ç¤ºä¾‹é‡æ–°å®šä¹‰äº†Derived::identify()ï¼Œå› æ­¤å®ƒé¦–å…ˆè°ƒç”¨Base::identify()ï¼Œç„¶åæ‰§è¡Œå®ƒè‡ªå·±çš„é™„åŠ æ“ä½œã€‚12345678910111213141516class Derived: public Base&#123;public: Derived(int value) : Base(value) &#123; &#125; int GetValue() &#123; return m_value; &#125; void identify() &#123; Base::identify(); // call Base::identify() first std::cout &lt;&lt; \"I am a Derived\\n\"; // then identify ourselves &#125;&#125;;ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨èŒƒå›´è§£ææ“ä½œç¬¦(::)?å¦‚æœæˆ‘ä»¬åƒè¿™æ ·å®šä¹‰äº†Derived::identify():12345678910111213141516class Derived: public Base&#123;public: Derived(int value) : Base(value) &#123; &#125; int GetValue() &#123; return m_value; &#125; void identify() &#123; identify(); // Note: no scope resolution! cout &lt;&lt; \"I am a Derived\"; &#125;&#125;;æ²¡æœ‰èŒƒå›´è§£æé™å®šç¬¦çš„è°ƒç”¨å‡½æ•°identify()å°†é»˜è®¤ä¸ºå½“å‰ç±»ä¸­çš„identify()ï¼Œå®ƒå®é™…ä¸Šçœ‹èµ·æ¥æ˜¯è¿™ç§å½¢å¼ï¼š Derived::identify()ã€‚è¿™å°†å¯¼è‡´Derived::identify()è°ƒç”¨è‡ªèº«ï¼Œè¿™å°†å¯¼è‡´æ— é™å¾ªç¯!åœ¨æ´¾ç”Ÿç±»è°ƒç”¨åŸºç±»çš„å‹å…ƒå‡½æ•°å½“æˆ‘ä»¬è¯•å›¾åœ¨æ´¾ç”Ÿç±»è°ƒç”¨åŸºç±»çš„å‹å…ƒå‡½æ•°æ—¶ï¼Œæ¯”å¦‚æ“ä½œç¬¦&lt;&lt;ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€ç‚¹å°éº»çƒ¦ã€‚å› ä¸ºåŸºç±»çš„friendå‡½æ•°å®é™…ä¸Šä¸æ˜¯åŸºç±»çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä½¿ç”¨èŒƒå›´è§£æé™å®šç¬¦ä¸èµ·ä½œç”¨ã€‚ç›¸åï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ä½¿æˆ‘ä»¬çš„æ´¾ç”Ÿç±»æš‚æ—¶çœ‹èµ·æ¥åƒåŸºç±»ï¼Œè¿™æ ·å°±å¯ä»¥è°ƒç”¨å‡½æ•°çš„æ­£ç¡®ç‰ˆæœ¬ã€‚å¹¸è¿çš„æ˜¯ï¼Œä½¿ç”¨static_castå¾ˆå®¹æ˜“åšåˆ°è¿™ä¸€ç‚¹ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­:12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849class Base&#123;private: int m_value; public: Base(int value) : m_value(value) &#123; &#125; friend std::ostream&amp; operator&lt;&lt; (std::ostream &amp;out, const Base &amp;b) &#123; out &lt;&lt; \"In Base\\n\"; out &lt;&lt; b.m_value &lt;&lt; '\\n'; return out; &#125;&#125;; class Derived : public Base&#123;public: Derived(int value) : Base(value) &#123; &#125; friend std::ostream&amp; operator&lt;&lt; (std::ostream &amp;out, const Derived &amp;d) &#123; out &lt;&lt; \"In Derived\\n\"; // static_castæ´¾ç”Ÿåˆ°ä¸€ä¸ªåŸºå¯¹è±¡, so we call the right version of operator&lt;&lt; out &lt;&lt; static_cast&lt;Base&gt;(d); //â­ return out; &#125;&#125;; int main()&#123; Derived derived(7); std::cout &lt;&lt; derived; return 0;&#125;/*ç»“æœ*/In derived //å…ˆè¿è¡Œ â€œout &lt;&lt; \"In Derived\\n\";â€In base //ç„¶åè°ƒç”¨ åŸºç±»Baseä¸­çš„å‹å…ƒå‡½æ•°7å› ä¸ºDerivedç±» æ´¾ç”Ÿè‡ª Baseç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æ´¾ç”Ÿå¯¹è±¡è½¬æ¢ä¸ºåŸºï¼Œè¿™æ ·å°±å¯ä»¥è°ƒç”¨ä½¿ç”¨åŸºçš„æ“ä½œç¬¦&lt;&lt;çš„é€‚å½“ç‰ˆæœ¬ã€‚","categories":[],"tags":[]},{"title":"C&C++/ç»§æ‰¿ä¸­çš„è®¿é—®æ ‡è¯†ç¬¦","slug":"C&C++/ç»§æ‰¿ä¸­çš„è®¿é—®æ ‡è¯†ç¬¦","date":"2020-05-13T03:29:26.858Z","updated":"2020-05-13T08:22:21.265Z","comments":true,"path":"archives/664c52ef.html","link":"","permalink":"https://longlongqin.github.io/archives/664c52ef.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/115-inheritance-and-access-specifiers/privateã€publicã€protectedprivateï¼šç§æœ‰æˆå‘˜åªèƒ½ç”±åŒä¸€ç±»æˆ– friends çš„æˆå‘˜å‡½æ•°è®¿é—®ã€‚è¿™æ„å‘³ç€æ´¾ç”Ÿç±»ä¸èƒ½ç›´æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜!å½“ç±»ä¸­çš„æˆå‘˜æ²¡æœ‰æ˜¾å¼çš„ç»™å®š è®¿é—®è¯´æ˜ç¬¦ï¼ŒC++åˆ™é»˜è®¤å…¶ä¸ºï¼šprivatepublicï¼šä»»ä½•äººéƒ½å¯ä»¥è®¿é—®å…¬å…±æˆå‘˜protectedå—ä¿æŠ¤çš„è®¿é—®è¯´æ˜ç¬¦åœ¨å¤„ç†ç»§æ‰¿ç±»æ—¶ï¼Œäº‹æƒ…ä¼šå˜å¾—æœ‰ç‚¹å¤æ‚ã€‚c++æœ‰ä¸€ä¸ªæˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®ºçš„ç¬¬ä¸‰ä¸ªè®¿é—®è¯´æ˜ç¬¦ï¼šprotectedï¼Œå› ä¸ºå®ƒåªåœ¨ç»§æ‰¿ä¸Šä¸‹æ–‡ä¸­æœ‰ç”¨ã€‚å—ä¿æŠ¤çš„è®¿é—®è¯´æ˜ç¬¦å…è®¸æˆå‘˜æ‰€å±çš„ç±»ã€æœ‹å‹ç±»å’Œæ´¾ç”Ÿç±»è®¿é—®æˆå‘˜ã€‚ä½†æ˜¯ï¼Œå—ä¿æŠ¤æˆå‘˜ä¸èƒ½ä»ç±»å¤–éƒ¨è®¿é—®ã€‚12345678910111213141516171819202122232425262728class Base&#123;public: int m_public; // can be accessed by anybodyprotected: int m_protected; // can be accessed by Base members, friends, and derived classesprivate: int m_private; // can only be accessed by Base members and friends (but not derived classes)&#125;; class Derived: public Base&#123;public: Derived() &#123; m_public = 1; // allowed: can access public base members from derived class m_protected = 2; // allowed: can access protected base members from derived class m_private = 3; // not allowed: can not access private base members from derived class &#125;&#125;; int main()&#123; Base base; base.m_public = 1; // allowed: can access public members from outside class base.m_protected = 2; //â­ not allowed: can not access protected members from outside class base.m_private = 3; // not allowed: can not access private members from outside class&#125;åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å—ä¿æŠ¤çš„åŸºæœ¬æˆå‘˜m_protectedå¯ç”±æ´¾ç”Ÿç±»Derivedç›´æ¥è®¿é—®ï¼Œè€Œä¸æ˜¯ç”±å…¬å…±è®¿é—®ã€‚ä½•æ—¶ä½¿ç”¨å—ä¿æŠ¤çš„è®¿é—®è¯´æ˜ç¬¦?åŸºç±»ä¸­çš„protectedå±æ€§çš„æˆå‘˜ï¼Œæ´¾ç”Ÿç±»å¯ä»¥ç›´æ¥è®¿é—®è¯¥æˆå‘˜ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæ‚¨ä»¥åæ›´æ”¹äº†å…³äºprotectedå±æ€§çš„ä»»ä½•å†…å®¹(ç±»å‹ã€å€¼çš„å«ä¹‰ç­‰ç­‰)ï¼Œæ‚¨å¯èƒ½éœ€è¦åŒæ—¶æ›´æ”¹åŸºç±»å’Œæ‰€æœ‰æ´¾ç”Ÿç±»ã€‚å› æ­¤ï¼Œå½“æ‚¨(æˆ–æ‚¨çš„å›¢é˜Ÿ)æ˜¯ä»æ‚¨è‡ªå·±çš„ç±»æ´¾ç”Ÿå‡ºæ¥çš„ï¼Œå¹¶ä¸”æ´¾ç”Ÿç±»çš„æ•°é‡æ˜¯åˆç†çš„æ—¶ï¼Œä½¿ç”¨å—ä¿æŠ¤çš„è®¿é—®è¯´æ˜ç¬¦æ˜¯æœ€æœ‰ç”¨çš„ã€‚è¿™æ ·ï¼Œå¦‚æœæ‚¨å¯¹åŸºç±»çš„å®ç°è¿›è¡Œäº†æ›´æ”¹ï¼Œå¹¶ä¸”å› æ­¤éœ€è¦å¯¹æ´¾ç”Ÿç±»è¿›è¡Œæ›´æ–°ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è‡ªå·±è¿›è¡Œæ›´æ–°(å¹¶ä¸”æ›´æ–°ä¸ä¼šæ°¸è¿œè¿›è¡Œï¼Œå› ä¸ºæ´¾ç”Ÿç±»çš„æ•°é‡æ˜¯æœ‰é™çš„)ã€‚å°†æˆå‘˜è®¾ä¸ºç§æœ‰å¯ä»¥æä¾›æ›´å¥½çš„å°è£…ï¼Œå¹¶å°†æ´¾ç”Ÿç±»ä¸å¯¹åŸºç±»çš„æ›´æ”¹éš”ç¦»å¼€æ¥ã€‚ä½†æ˜¯ï¼Œæ„å»ºä¸€ä¸ªå…¬å…±æˆ–å—ä¿æŠ¤çš„æ¥å£æ¥æ”¯æŒå…¬å…± å’Œ/æˆ– æ´¾ç”Ÿç±»æ‰€éœ€çš„æ‰€æœ‰è®¿é—®æ–¹æ³•æˆ–åŠŸèƒ½ä¹Ÿæ˜¯æœ‰æˆæœ¬çš„ã€‚è¿™æ˜¯é¢å¤–çš„å·¥ä½œï¼Œå¯èƒ½ä¸å€¼å¾—ï¼Œé™¤éæ‚¨æœŸæœ›å…¶ä»–äººæ˜¯ä»æ‚¨çš„ç±»æ´¾ç”Ÿå‡ºæ¥çš„ï¼Œæˆ–è€…æ‚¨æœ‰å¤§é‡çš„æ´¾ç”Ÿç±»ï¼Œæ›´æ–°å®ƒä»¬çš„æˆæœ¬å°†éå¸¸æ˜‚è´µã€‚ä¸åŒç§ç±»çš„ç»§æ‰¿åŠå…¶å¯¹è®¿é—®çš„å½±å“é¦–å…ˆï¼Œç±»ä»å…¶ä»–ç±»ç»§æ‰¿æœ‰ä¸‰ç§ä¸åŒçš„æ–¹æ³•:publicã€protectedå’Œprivateã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œåªéœ€æŒ‡å®šåœ¨é€‰æ‹©è¦ç»§æ‰¿çš„ç±»æ—¶æƒ³è¦çš„è®¿é—®ç±»å‹:123456789101112131415161718// Inherit from Base publiclyclass Pub: public Base&#123;&#125;; // Inherit from Base protectedlyclass Pro: protected Base&#123;&#125;; // Inherit from Base privatelyclass Pri: private Base&#123;&#125;; class Def: Base // Defaults to private inheritance&#123;&#125;;å¦‚æœä¸é€‰æ‹©ç»§æ‰¿ç±»å‹ï¼Œc++é»˜è®¤ä¸ºç§æœ‰ç»§æ‰¿(å°±åƒå¦‚æœä¸æŒ‡å®šå…¶ä»–ç±»å‹ï¼Œæˆå‘˜é»˜è®¤ä¸ºç§æœ‰è®¿é—®)è¿™ç»™äº†æˆ‘ä»¬9ç§ç»„åˆ:3ç§æˆå‘˜è®¿é—®è¯´æ˜ç¬¦(å…¬å…±ã€ç§æœ‰å’Œå—ä¿æŠ¤)ï¼Œä»¥åŠ3ç§ç»§æ‰¿ç±»å‹(å…¬å…±ã€ç§æœ‰å’Œå—ä¿æŠ¤)ã€‚å®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢? ç®€è€Œè¨€ä¹‹ï¼Œå½“æˆå‘˜è¢«ç»§æ‰¿æ—¶ï¼Œç»§æ‰¿æˆå‘˜çš„è®¿é—®è¯´æ˜ç¬¦å¯èƒ½ä¼šæ ¹æ®ä½¿ç”¨çš„ç»§æ‰¿ç±»å‹è€Œæ”¹å˜(ä»…åœ¨æ´¾ç”Ÿç±»ä¸­)ã€‚æ¢å¥è¯è¯´ï¼ŒåŸºç±»ä¸­ä¸ºå…¬æœ‰æˆ–å—ä¿æŠ¤çš„æˆå‘˜å¯èƒ½ä¼šæ›´æ”¹æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®è¯´æ˜ç¬¦ã€‚å½“æˆ‘ä»¬é€æ­¥åˆ†æè¿™äº›ä¾‹å­æ—¶ï¼Œè¯·è®°ä½ä»¥ä¸‹è§„åˆ™:ä¸€ä¸ªç±»æ€»æ˜¯å¯ä»¥è®¿é—®å®ƒè‡ªå·±çš„(éç»§æ‰¿çš„)æˆå‘˜ã€‚å…¬å…±è®¿é—®ç±»çš„æˆå‘˜åŸºäºå®ƒæ­£åœ¨è®¿é—®çš„ç±»çš„è®¿é—®è¯´æ˜ç¬¦ã€‚ç±»æ ¹æ®ä»çˆ¶ç±»ç»§æ‰¿çš„è®¿é—®è¯´æ˜ç¬¦è®¿é—®ç»§æ‰¿çš„æˆå‘˜ã€‚è¿™å–å†³äºæ‰€ä½¿ç”¨çš„è®¿é—®è¯´æ˜ç¬¦å’Œç»§æ‰¿ç±»å‹ã€‚å…¬æœ‰ç»§æ‰¿å…¬æœ‰ç»§æ‰¿æ˜¯ç›®å‰æœ€å¸¸ç”¨çš„ç»§æ‰¿ç±»å‹ã€‚äº‹å®ä¸Šï¼Œæ‚¨å¾ˆå°‘ä¼šçœ‹åˆ°æˆ–ä½¿ç”¨å…¶ä»–ç±»å‹çš„ç»§æ‰¿ï¼Œæ‰€ä»¥æ‚¨çš„ä¸»è¦å…³æ³¨ç‚¹åº”è¯¥æ˜¯ç†è§£è¿™ä¸€éƒ¨åˆ†ã€‚å¹¸è¿çš„æ˜¯ï¼Œå…¬å…±ç»§æ‰¿ä¹Ÿæ˜¯æœ€å®¹æ˜“ç†è§£çš„ã€‚å½“æ‚¨å…¬å¼€ç»§æ‰¿åŸºç±»æ—¶ï¼Œç»§æ‰¿çš„å…¬å…±æˆå‘˜ä¿æŒä¸ºpublicï¼›ç»§æ‰¿çš„å—ä¿æŠ¤æˆå‘˜ä¿æŒä¸ºprotectedã€‚ï¼›ç»§æ‰¿çš„ç§æœ‰æˆå‘˜ä¿æŒä¸å¯è®¿é—®ï¼Œå› ä¸ºå®ƒä»¬åœ¨åŸºç±»ä¸­æ˜¯ç§æœ‰çš„ã€‚Access specifier in base classAccess specifier when inherited publiclyPublicPublicProtectedProtectedPrivateInaccessibleä¿æŠ¤ç»§æ‰¿å—ä¿æŠ¤ç»§æ‰¿æ˜¯æœ€ä¸å¸¸è§çš„ç»§æ‰¿æ–¹æ³•ã€‚å®ƒå‡ ä¹ä»æœªè¢«ä½¿ç”¨è¿‡ï¼Œé™¤éåœ¨éå¸¸ç‰¹æ®Šçš„æƒ…å†µä¸‹ã€‚æœ‰äº†å—ä¿æŠ¤çš„ç»§æ‰¿ï¼Œå…¬å…±æˆå‘˜å’Œå—ä¿æŠ¤çš„æˆå‘˜å°±å¾—åˆ°äº†ä¿æŠ¤ï¼›è€Œç§æœ‰æˆå‘˜åˆ™æ— æ³•è®¿é—®ã€‚å› ä¸ºè¿™ç§å½¢å¼çš„ç»§æ‰¿éå¸¸ç½•è§ï¼Œæˆ‘ä»¬å°±è·³è¿‡è¿™ä¸ªä¾‹å­ï¼Œç”¨ä¸€ä¸ªè¡¨æ ¼æ€»ç»“ä¸€ä¸‹:Access specifier in base classAccess specifier when inherited protectedlyPublicProtectedProtectedProtectedPrivateInaccessibleç§æœ‰ç»§æ‰¿ä½¿ç”¨ç§æœ‰ç»§æ‰¿ï¼ŒåŸºç±»çš„æ‰€æœ‰æˆå‘˜éƒ½ç»§æ‰¿ä¸ºç§æœ‰ã€‚è¿™æ„å‘³ç€ç§æœ‰æˆå‘˜ä¿æŒç§æœ‰ï¼›å—ä¿æŠ¤ å’Œ å…¬å…±æˆå‘˜å˜ ä¸ºç§æœ‰ã€‚æ³¨æ„ï¼Œè¿™å¹¶ä¸å½±å“æ´¾ç”Ÿç±»è®¿é—®ä»çˆ¶ç±»ç»§æ‰¿çš„æˆå‘˜çš„æ–¹å¼ã€‚å®ƒåªå½±å“è¯•å›¾é€šè¿‡æ´¾ç”Ÿç±»è®¿é—®è¿™äº›æˆå‘˜çš„ä»£ç ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041class Base&#123;public: int m_public;protected: int m_protected;private: int m_private;&#125;; class Pri: private Base // note: private inheritance&#123; // Private inheritance means: // Public inherited members become private (so m_public is treated as private) // Protected inherited members become private (so m_protected is treated as private) // Private inherited members stay inaccessible (so m_private is inaccessible)public: Pri() &#123; m_public = 1; // okay: m_public is now private in Pri m_protected = 2; // okay: m_protected is now private in Pri m_private = 3; // not okay: derived classes can't access private members in the base class &#125;&#125;; int main()&#123; // Outside access uses the access specifiers of the class being accessed. // In this case, the access specifiers of base. Base base; base.m_public = 1; // okay: m_public is public in Base base.m_protected = 2; // not okay: m_protected is protected in Base base.m_private = 3; // not okay: m_private is private in Base Pri pri; pri.m_public = 1; // not okay: m_public is now private in Pri pri.m_protected = 2; // not okay: m_protected is now private in Pri pri.m_private = 3; // not okay: m_private is inaccessible in Pri return 0;&#125;ä»¥è¡¨æ ¼å½¢å¼æ€»ç»“:Access specifier in base classAccess specifier when inherited privatelyPublicPrivateProtectedPrivatePrivateInaccessibleå½“æ´¾ç”Ÿç±»ä¸åŸºç±»æ²¡æœ‰æ˜æ˜¾å…³ç³»ï¼Œä½†åœ¨å†…éƒ¨ä½¿ç”¨åŸºç±»å®ç°æ—¶ï¼Œç§æœ‰ç»§æ‰¿å¯èƒ½éå¸¸æœ‰ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¸å¸Œæœ›åŸºç±»çš„å…¬å…±æ¥å£é€šè¿‡æ´¾ç”Ÿç±»çš„å¯¹è±¡å…¬å¼€(å¦‚æœæˆ‘ä»¬å…¬å¼€ç»§æ‰¿)ã€‚å°ç»“è®¿é—®è¯´æ˜ç¬¦ã€ç»§æ‰¿ç±»å‹ å’Œ æ´¾ç”Ÿç±» ç›¸äº’ä½œç”¨çš„æ–¹å¼ä¼šå¼•èµ·å¾ˆå¤šæ··æ·†ã€‚å°½å¯èƒ½å¤šåœ°å°è¯•å’Œæ¾„æ¸…äº‹æƒ…:é¦–å…ˆï¼Œç±»(å’Œfriend )æ€»æ˜¯å¯ä»¥è®¿é—®å®ƒè‡ªå·±çš„éç»§æ‰¿æˆå‘˜ã€‚è®¿é—®è¯´æ˜ç¬¦åªå½±å“å¤–éƒ¨äººå‘˜å’Œæ´¾ç”Ÿç±»æ˜¯å¦å¯ä»¥è®¿é—®è¿™äº›æˆå‘˜ã€‚å…¶æ¬¡ï¼Œå½“æ´¾ç”Ÿç±»ç»§æ‰¿æˆå‘˜æ—¶ï¼Œè¿™äº›æˆå‘˜å¯èƒ½ä¼šæ›´æ”¹æ´¾ç”Ÿç±»ä¸­çš„è®¿é—®è¯´æ˜ç¬¦ã€‚ä½†è¿™å¹¶ä¸å½±å“æ´¾ç”Ÿç±»è‡ªå·±çš„(éç»§æ‰¿çš„)æˆå‘˜(å®ƒä»¬æœ‰è‡ªå·±çš„è®¿é—®è¯´æ˜ç¬¦)ã€‚å®ƒåªå½±å“å¤–éƒ¨äººå‘˜å’Œæ´¾ç”Ÿè‡ªæ´¾ç”Ÿç±»çš„ç±»æ˜¯å¦å¯ä»¥è®¿é—®è¿™äº›ç»§æ‰¿çš„æˆå‘˜ã€‚æœ€åè¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åªå±•ç¤ºäº†ä½¿ç”¨æˆå‘˜å˜é‡çš„ä¾‹å­ï¼Œä½†æ˜¯è¿™äº›è®¿é—®è§„åˆ™å¯¹æ‰€æœ‰æˆå‘˜éƒ½é€‚ç”¨(ä¾‹å¦‚ï¼Œåœ¨ç±»ä¸­å£°æ˜çš„æˆå‘˜å‡½æ•°å’Œç±»å‹)ã€‚ä¸‹é¢æ˜¯æ‰€æœ‰è®¿é—®è¯´æ˜ç¬¦å’Œç»§æ‰¿ç±»å‹ç»„åˆçš„è¡¨:Access specifier in base classAccess specifier when inherited publiclyAccess specifier when inherited privatelyAccess specifier when inherited protectedlyPublicPublicPrivateProtectedProtectedProtectedPrivateProtectedPrivateInaccessibleInaccessibleInaccessible","categories":[],"tags":[]},{"title":"C&C++/æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°åŠåˆå§‹åŒ–","slug":"C&C++/æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°åŠåˆå§‹åŒ–","date":"2020-05-13T01:30:25.627Z","updated":"2020-05-13T02:52:40.641Z","comments":true,"path":"archives/f3aa0b39.html","link":"","permalink":"https://longlongqin.github.io/archives/f3aa0b39.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/114-constructors-and-initialization-of-derived-classes/æˆ‘ä»¬å°†æ·±å…¥äº†è§£æ„é€ å‡½æ•°åœ¨æ´¾ç”Ÿç±»åˆå§‹åŒ–ä¸­çš„ä½œç”¨ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨æˆ‘ä»¬åœ¨å‰ä¸€è¯¾ä¸­å¼€å‘çš„ç®€å•çš„åŸºç±»å’Œæ´¾ç”Ÿç±»:12345678910111213141516171819202122232425class Base&#123;public: int m_id; Base(int id=0) : m_id&#123; id &#125; &#123; &#125; int getId() const &#123; return m_id; &#125;&#125;; class Derived: public Base&#123;public: double m_cost; Derived(double cost=0.0) : m_cost&#123; cost &#125; &#123; &#125; double getCost() const &#123; return m_cost; &#125;&#125;;å¯¹äºéæ´¾ç”Ÿç±»ï¼Œæ„é€ å‡½æ•°åªéœ€è¦æ‹…å¿ƒè‡ªå·±çš„æˆå‘˜ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘Baseã€‚æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åˆ›å»ºä¸€ä¸ªåŸºå¯¹è±¡:123456int main()&#123; Base base&#123; 5 &#125;; // use Base(int) constructor return 0;&#125;ä¸‹é¢æ˜¯å®ä¾‹åŒ–baseæ—¶å®é™…å‘ç”Ÿçš„æƒ…å†µ:ä¸ºbase ç•™å‡ºå†…å­˜è°ƒç”¨é€‚å½“çš„baseçš„ æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨ åˆå§‹åŒ–å˜é‡æ„é€ å‡½æ•°çš„ä¸»ä½“æ‰§è¡Œæ§ä»¶è¿”å›ç»™è°ƒç”¨æ–¹å¯¹äºæ´¾ç”Ÿç±»ï¼Œäº‹æƒ…ç¨å¾®å¤æ‚ä¸€äº›:123456int main()&#123; Derived derived&#123; 1.3 &#125;; // use Derived(double) constructor return 0;&#125;ä¸‹é¢æ˜¯å®ä¾‹åŒ–æ´¾ç”Ÿç±»æ—¶å®é™…å‘ç”Ÿçš„æƒ…å†µ:ä¸ºderived ç•™å‡ºå†…å­˜ (è¶³å¤Ÿç”¨äºåŸºéƒ¨åˆ†å’Œæ´¾ç”Ÿéƒ¨åˆ†)è°ƒç”¨é€‚å½“çš„Derivedçš„ æ„é€ å‡½æ•°é¦–å…ˆä½¿ç”¨é€‚å½“çš„ åŸºæ„é€ å‡½æ•° æ„é€  åŸºå¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šåŸºæ„é€ å‡½æ•°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤æ„é€ å‡½æ•°ã€‚åˆå§‹åŒ–åˆ—è¡¨ åˆå§‹åŒ–å˜é‡æ„é€ å‡½æ•°çš„ä¸»ä½“æ‰§è¡Œæ§ä»¶è¿”å›ç»™è°ƒç”¨æ–¹è¿™ç§æƒ…å†µ ä¸ éç»§æ‰¿æƒ…å†µ ä¹‹é—´çš„å”¯ä¸€çœŸæ­£åŒºåˆ«æ˜¯ï¼Œåœ¨æ´¾ç”Ÿæ„é€ å‡½æ•°å¯ä»¥æ‰§è¡Œä»»ä½•å®è´¨æ€§æ“ä½œä¹‹å‰ï¼Œé¦–å…ˆè°ƒç”¨åŸºæ„é€ å‡½æ•°ã€‚åŸºæ„é€ å‡½æ•°è®¾ç½®å¯¹è±¡çš„åŸºéƒ¨åˆ†ï¼Œå°†æ§ä»¶è¿”å›ç»™æ´¾ç”Ÿæ„é€ å‡½æ•°ï¼Œå¹¶å…è®¸æ´¾ç”Ÿæ„é€ å‡½æ•°å®Œæˆå…¶å·¥ä½œã€‚åˆå§‹åŒ–åŸºç±»æˆå‘˜æˆ‘ä»¬çš„æ´¾ç”Ÿç±»å½“å‰çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼šå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ´¾ç”Ÿå¯¹è±¡æ—¶ï¼Œæ²¡æœ‰æ–¹æ³•åˆå§‹åŒ–m_idã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨åˆ›å»ºæ´¾ç”Ÿå¯¹è±¡æ—¶åŒæ—¶è®¾ç½®m_cost (æ¥è‡ªå¯¹è±¡çš„æ´¾ç”Ÿéƒ¨åˆ†)å’Œ m_id (æ¥è‡ªå¯¹è±¡çš„åŸºæœ¬éƒ¨åˆ†)ï¼Œè¯¥æ€ä¹ˆåŠ?é”™è¯¯çš„åˆå§‹åŒ–æ–°ç¨‹åºå‘˜ç»å¸¸å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜å¦‚ä¸‹:12345678910111213class Derived: public Base&#123;public: double m_cost; Derived(double cost=0.0, int id=0) // does not work : m_cost&#123; cost &#125;, m_id&#123; id &#125; &#123; &#125; double getCost() const &#123; return m_cost; &#125;&#125;;è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å°è¯•ï¼Œè€Œä¸”å‡ ä¹æ˜¯æ­£ç¡®çš„æƒ³æ³•ã€‚æˆ‘ä»¬ç¡®å®éœ€è¦å‘æ„é€ å‡½æ•°ä¸­æ·»åŠ å¦ä¸€ä¸ªå‚æ•°ï¼Œå¦åˆ™c++å°†æ— æ³•çŸ¥é“æˆ‘ä»¬æƒ³è¦åˆå§‹åŒ–m_idä¸ºä»€ä¹ˆå€¼ã€‚ä½†æ˜¯ï¼Œc++ä¸å…è®¸ç±»åœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–ç»§æ‰¿çš„æˆå‘˜å˜é‡ã€‚æ¢å¥è¯è¯´ï¼Œå˜é‡çš„å€¼åªèƒ½åœ¨è¯¥å˜é‡æ‰€åœ¨çš„é‚£ä¸ªç±»çš„ æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­è®¾ç½®ã€‚ä¸ºå•¥ä¼šæœ‰è¿™ä¸ªé™åˆ¶ï¼Ÿç­”æ¡ˆä¸constå’Œå¼•ç”¨å˜é‡æœ‰å…³ã€‚è€ƒè™‘ä¸€ä¸‹å¦‚æœm_idæ˜¯å¸¸é‡ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å› ä¸ºconstå˜é‡å¿…é¡»åœ¨åˆ›å»ºæ—¶ç”¨ä¸€ä¸ªå€¼åˆå§‹åŒ–ï¼Œæ‰€ä»¥åŸºç±»æ„é€ å‡½æ•°å¿…é¡»åœ¨åˆ›å»ºå˜é‡æ—¶è®¾ç½®å®ƒçš„å€¼ã€‚ä½†æ˜¯ï¼Œå½“åŸºç±»æ„é€ å‡½æ•°å®Œæˆæ—¶ï¼Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨å°±ä¼šæ‰§è¡Œã€‚ç„¶åï¼Œæ¯ä¸ªæ´¾ç”Ÿç±»éƒ½æœ‰æœºä¼šåˆå§‹åŒ–è¯¥å˜é‡ï¼Œå¯èƒ½ä¼šæ›´æ”¹å…¶å€¼!é€šè¿‡å°†å˜é‡çš„åˆå§‹åŒ–é™åˆ¶åœ¨è¿™äº›å˜é‡æ‰€å±çš„ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œc++ç¡®ä¿æ‰€æœ‰å˜é‡åªåˆå§‹åŒ–ä¸€æ¬¡ã€‚æœ€ç»ˆçš„ç»“æœæ˜¯ä¸Šé¢çš„ä¾‹å­ä¸èµ·ä½œç”¨ï¼Œå› ä¸ºm_idæ˜¯ä»Baseç»§æ‰¿çš„ï¼Œå¹¶ä¸”åªæœ‰éç»§æ‰¿çš„å˜é‡å¯ä»¥åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–ã€‚ä½†æ˜¯ï¼Œç»§æ‰¿çš„å˜é‡ä»ç„¶å¯ä»¥åœ¨æ„é€ å‡½æ•°ä½“ä¸­ä½¿ç”¨èµ‹å€¼æ¥æ›´æ”¹å®ƒä»¬çš„å€¼ã€‚å› æ­¤ï¼Œæ–°ç¨‹åºå‘˜ä¹Ÿç»å¸¸è¿™æ ·åš:12345678910111213class Derived: public Base&#123;public: double m_cost; Derived(double cost=0.0, int id=0) : m_cost&#123; cost &#125; &#123; m_id = id; //â­ &#125; double getCost() const &#123; return m_cost; &#125;&#125;;è™½ç„¶è¿™åœ¨è¿™ç§æƒ…å†µæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å¦‚æœm_idæ˜¯ä¸€ä¸ªconstæˆ–ä¸€ä¸ªå¼•ç”¨ï¼Œå®ƒå°±ä¸èƒ½å·¥ä½œ(å› ä¸ºconstå€¼å’Œå¼•ç”¨å¿…é¡»åœ¨æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­åˆå§‹åŒ–)ã€‚å®ƒçš„æ•ˆç‡ä¹Ÿå¾ˆä½ï¼Œå› ä¸ºm_idè¢«èµ‹å€¼ä¸¤æ¬¡: ä¸€æ¬¡åœ¨åŸºç±»æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­ï¼Œä¸€æ¬¡åœ¨æ´¾ç”Ÿç±»æ„é€ å‡½æ•°çš„ä¸»ä½“ä¸­ã€‚æœ€åï¼Œå¦‚æœåŸºç±»åœ¨æ„é€ è¿‡ç¨‹ä¸­éœ€è¦è®¿é—®è¿™ä¸ªå€¼ï¼Œè¯¥æ€ä¹ˆåŠ?å®ƒæ²¡æœ‰åŠæ³•è®¿é—®å®ƒï¼Œå› ä¸ºå®ƒåœ¨æ´¾ç”Ÿæ„é€ å‡½æ•°æ‰§è¡Œä¹‹å‰æ˜¯ä¸è®¾ç½®çš„(åŸºæœ¬ä¸Šæ˜¯æœ€åæ‰§è¡Œ)ã€‚æ­£ç¡®åˆå§‹åŒ–é‚£ä¹ˆï¼Œå½“åˆ›å»ºæ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•æ­£ç¡®åˆå§‹åŒ–m_idå‘¢?åœ¨åˆ°ç›®å‰ä¸ºæ­¢çš„æ‰€æœ‰ç¤ºä¾‹ä¸­ï¼Œå½“æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡æ—¶ï¼ŒåŸºç±»éƒ¨åˆ†å·²ç»ä½¿ç”¨é»˜è®¤çš„åŸºæ„é€ å‡½æ•°åˆ›å»ºã€‚ä¸ºä»€ä¹ˆå®ƒæ€»æ˜¯ä½¿ç”¨é»˜è®¤çš„åŸºæ„é€ å‡½æ•°? å› ä¸ºæˆ‘ä»¬ä»æ¥æ²¡æœ‰è®©å®ƒä½¿ç”¨å…¶ä»–çš„æ„é€ å‡½æ•°ã€‚å¹¸è¿çš„æ˜¯ï¼ŒC++å…è®¸æˆ‘ä»¬æ˜¾å¼åœ°é€‰æ‹©å°†è°ƒç”¨å“ªä¸ªåŸºç±»æ„é€ å‡½æ•°! è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œåªéœ€åœ¨æ´¾ç”Ÿç±»çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­æ·»åŠ å¯¹åŸºç±»æ„é€ å‡½æ•°çš„è°ƒç”¨:12345678910111213class Derived: public Base&#123;public: double m_cost; Derived(double cost=0.0, int id=0) : Base&#123; id &#125;, // â­Call Base(int) constructor with value id! m_cost&#123; cost &#125; &#123; &#125; double getCost() const &#123; return m_cost; &#125;&#125;;ç°åœ¨ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªä»£ç æ—¶:123456789101112int main()&#123; Derived derived&#123; 1.3, 5 &#125;; // use Derived(double, int) constructor std::cout &lt;&lt; \"Id: \" &lt;&lt; derived.getId() &lt;&lt; '\\n'; std::cout &lt;&lt; \"Cost: \" &lt;&lt; derived.getCost() &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/Id: 5Cost: 1.3åŸºç±»æ„é€ å‡½æ•°base (int) å°†ç”¨äºåˆå§‹åŒ–m_idä¸º 5ï¼Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°å°†ç”¨äºåˆå§‹åŒ–m_costä¸º1.3 !æ›´è¯¦ç»†çš„ç»†èŠ‚ï¼šåˆ†é…ç”¨äºæ´¾ç”Ÿï¼ˆderived ï¼‰çš„å†…å­˜ã€‚è°ƒç”¨Derived(double, int)æ„é€ å‡½æ•°ï¼Œå…¶ä¸­cost = 1.3, id = 5ç¼–è¯‘å™¨ä¼šæŸ¥çœ‹æˆ‘ä»¬æ˜¯å¦éœ€è¦ä¸€ä¸ªç‰¹å®šçš„åŸºç±»æ„é€ å‡½æ•°ã€‚æˆ‘ä»¬æœ‰! å› æ­¤å®ƒè°ƒç”¨id = 5çš„Base(int)ã€‚åŸºç±»æ„é€ å‡½æ•° åˆå§‹åŒ–åˆ—è¡¨ å°†m_idè®¾ç½®ä¸º5åŸºç±»æ„é€ å‡½æ•°bodyæ‰§è¡Œï¼Œå®ƒä»€ä¹ˆä¹Ÿä¸åšåŸºç±»æ„é€ å‡½æ•°è¿”å›æ´¾ç”Ÿç±»æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨å°†m_costè®¾ç½®ä¸º1.3æ´¾ç”Ÿç±»æ„é€ å‡½æ•°bodyæ‰§è¡Œï¼Œå®ƒä»€ä¹ˆä¹Ÿä¸åšæ´¾ç”Ÿç±»æ„é€ å‡½æ•°è¿”å›è¿™çœ‹èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œä½†å®é™…ä¸Šéå¸¸ç®€å•ã€‚æ‰€å‘ç”Ÿçš„ä¸€åˆ‡å°±æ˜¯æ´¾ç”Ÿæ„é€ å‡½æ•°è°ƒç”¨ç‰¹å®šçš„åŸºæ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å¯¹è±¡çš„åŸºéƒ¨åˆ†ã€‚å› ä¸ºm_idä½äºå¯¹è±¡çš„åŸºéƒ¨åˆ†ä¸­ï¼Œæ‰€ä»¥åŸºæ„é€ å‡½æ•°æ˜¯æƒŸä¸€å¯ä»¥åˆå§‹åŒ–è¯¥å€¼çš„æ„é€ å‡½æ•°ã€‚æ³¨æ„ï¼šæ³¨æ„ï¼Œåœ¨æ´¾ç”Ÿæ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨ä¸­è°ƒç”¨ åŸºæ„é€ å‡½æ•° çš„ä½ç½®å¹¶ä¸é‡è¦â€”â€”å› ä¸º åŸºæ„é€ å‡½æ•° æ€»æ˜¯å…ˆæ‰§è¡Œã€‚ç°åœ¨å¯ä»¥è®©æˆ‘ä»¬çš„æˆå‘˜ç§æœ‰(private)æ—¢ç„¶çŸ¥é“äº†å¦‚ä½•åˆå§‹åŒ–åŸºç±»æˆå‘˜ï¼Œå°±ä¸éœ€è¦ä¿æŒæˆå‘˜å˜é‡ä¸ºå…¬å…±ã€‚æˆ‘ä»¬å†æ¬¡å°†æˆå‘˜å˜é‡è®¾ä¸ºç§æœ‰ï¼Œè¿™æ˜¯åº”è¯¥çš„ã€‚ç®€å•å›é¡¾ä¸€ä¸‹ï¼Œä»»ä½•äººéƒ½å¯ä»¥è®¿é—®å…¬å…±æˆå‘˜ã€‚ç§æœ‰æˆå‘˜åªèƒ½ç”±åŒä¸€ç±»çš„æˆå‘˜å‡½æ•°è®¿é—®ã€‚æ³¨æ„ï¼Œè¿™æ„å‘³ç€æ´¾ç”Ÿç±»ä¸èƒ½ç›´æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ ! æ´¾ç”Ÿç±»å°†éœ€è¦ä½¿ç”¨è®¿é—®å‡½æ•°æ¥è®¿é—®åŸºç±»çš„ç§æœ‰æˆå‘˜ã€‚123456789101112131415161718192021222324252627282930313233343536373839#include &lt;iostream&gt; class Base&#123;private: // our member is now private int m_id; public: Base(int id=0) : m_id&#123; id &#125; &#123; &#125; int getId() const &#123; return m_id; &#125;&#125;; class Derived: public Base&#123;private: // our member is now private double m_cost; public: Derived(double cost=0.0, int id=0) : Base&#123; id &#125;, // Call Base(int) constructor with value id! m_cost&#123; cost &#125; &#123; &#125; double getCost() const &#123; return m_cost; &#125;&#125;; int main()&#123; Derived derived&#123; 1.3, 5 &#125;; // use Derived(double, int) constructor std::cout &lt;&lt; \"Id: \" &lt;&lt; derived.getId() &lt;&lt; '\\n'; //â­é€šè¿‡è®¿é—®å‡½æ•°è®¿é—®ç§æœ‰æˆå‘˜ std::cout &lt;&lt; \"Cost: \" &lt;&lt; derived.getCost() &lt;&lt; '\\n'; //â­é€šè¿‡è®¿é—®å‡½æ•°è®¿é—®ç§æœ‰æˆå‘˜ return 0;&#125;æ´¾ç”Ÿç±»è¢«é”€æ¯æ—¶è°ƒç”¨ææ„å‡½æ•°çš„é¡ºåºå½“ä¸€ä¸ªæ´¾ç”Ÿç±»è¢«é”€æ¯æ—¶ï¼Œæ¯ä¸ªææ„å‡½æ•°éƒ½ä»¥ç›¸åçš„æ„é€ é¡ºåºè¢«è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ´¾ç”Ÿç±»åœ¨è¢«åˆ›å»ºæ—¶ï¼Œæ„é€ å‡½æ•°çš„è°ƒç”¨é¡ºåºæ˜¯ï¼šå…ˆè°ƒç”¨ æœ€åŸºç±»çš„æ„é€ å‡½æ•°â€”-&gt; å­ç±»çš„æ„é€ å‡½æ•° â€”-&gt;å­ç±»çš„å­ç±»çš„æ„é€ å‡½æ•°â€”-&gt;â€¦.â€”â€“&gt;æœ€åè°ƒç”¨ æœ€å­ç±»çš„æ„é€ å‡½æ•°ã€‚åœ¨é”€æ¯æ´¾ç”Ÿç±»æ—¶ï¼Œææ„å‡½æ•°è°ƒç”¨çš„é¡ºåºï¼šé¦–å…ˆè°ƒç”¨ æœ€å­ç±»çš„ææ„å‡½æ•°â€”-&gt;â€¦.â€”â€”â€”&gt;æœ€åè°ƒç”¨ æœ€åŸºç±»çš„ææ„å‡½æ•°","categories":[],"tags":[]},{"title":"C&C++/æ´¾ç”Ÿç±»çš„æ„é€ é¡ºåº","slug":"C&C++/æ´¾ç”Ÿç±»çš„æ„é€ é¡ºåº","date":"2020-05-12T16:07:04.304Z","updated":"2020-05-13T01:27:18.535Z","comments":true,"path":"archives/64f81817.html","link":"","permalink":"https://longlongqin.github.io/archives/64f81817.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/113-order-of-construction-of-derived-classes/é¦–å…ˆï¼Œè®©æˆ‘ä»¬å¼•å…¥ä¸€äº›æ–°ç±»æ¥å¸®åŠ©æˆ‘ä»¬é˜æ˜ä¸€äº›é‡è¦çš„è§‚ç‚¹ï¼š12345678910111213141516171819202122232425class Base&#123;public: int m_id; Base(int id=0) : m_id(id) &#123; &#125; int getId() const &#123; return m_id; &#125;&#125;; class Derived: public Base&#123;public: double m_cost; Derived(double cost=0.0) : m_cost(cost) &#123; &#125; double getCost() const &#123; return m_cost; &#125; &#125;åœ¨æœ¬ä¾‹ä¸­ï¼ŒDerivedç±» æ˜¯ä» Baseç±» æ´¾ç”Ÿçš„ã€‚å› ä¸ºDerived ç»§æ‰¿äº†Baseçš„å‡½æ•°å’Œå˜é‡ï¼Œæ‰€ä»¥å¯ä»¥å‡è®¾ Baseçš„æˆå‘˜è¢«å¤åˆ¶åˆ°æ´¾ç”Ÿçš„ã€‚ç„¶è€Œï¼Œäº‹å®å¹¶éå¦‚æ­¤ã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥å°†æ´¾ç”Ÿç±»è€ƒè™‘ä¸ºä¸¤ä¸ªéƒ¨åˆ†çš„ç±»:ä¸€ä¸ªéƒ¨åˆ†Derivedï¼Œä¸€ä¸ªéƒ¨åˆ†Baseã€‚å½“æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªæ™®é€š(éæ´¾ç”Ÿ)ç±»æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ:12345678int main()&#123; Base base; return 0;&#125;//Baseæ˜¯ä¸€ä¸ªéæ´¾ç”Ÿç±»ï¼Œå› ä¸ºå®ƒä¸ä»ä»»ä½•å…¶ä»–ç±»ç»§æ‰¿ã€‚//c++ä¸ºBaseåˆ†é…å†…å­˜ï¼Œç„¶åè°ƒç”¨Baseçš„é»˜è®¤æ„é€ å‡½æ•°æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªæ´¾ç”Ÿç±»æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ:12345678int main()&#123; Derived derived; return 0;&#125;//å½“æˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªDerivedå®ä¾‹æ—¶ï¼Œé¦–å…ˆæ„é€ äº†Derivedçš„ åŸºéƒ¨åˆ†(ä½¿ç”¨åŸºé»˜è®¤æ„é€ å‡½æ•°)ã€‚ä¸€æ—¦åŸºæœ¬éƒ¨åˆ†å®Œæˆï¼Œæ´¾ç”Ÿéƒ¨åˆ† å°±è¢«æ„é€ (ä½¿ç”¨æ´¾ç”Ÿçš„é»˜è®¤æ„é€ å‡½æ•°)ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæ²¡æœ‰æ›´å¤šçš„æ´¾ç”Ÿç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬å®Œæˆäº†ã€‚æ´¾ç”Ÿç±»çš„æ„é€ é¡ºåºå¦‚ä¸Šæ‰€è¿°ï¼Œæ´¾ç”Ÿå®é™…ä¸ŠåŒ…æ‹¬ä¸¤éƒ¨åˆ†: åŸºç¡€éƒ¨åˆ† å’Œ æ´¾ç”Ÿéƒ¨åˆ†ã€‚å½“c++æ„é€ æ´¾ç”Ÿå¯¹è±¡æ—¶ï¼Œå®ƒæ˜¯åˆ†é˜¶æ®µè¿›è¡Œçš„ã€‚é¦–å…ˆï¼Œé¦–å…ˆæ„é€ æœ€åŸºæœ¬çš„ç±»(åœ¨ç»§æ‰¿æ ‘çš„é¡¶éƒ¨)ã€‚ç„¶åæŒ‰é¡ºåºæ„é€ æ¯ä¸ªå­ç±»ï¼Œç›´åˆ°æœ€åæ„é€  æœ€å­ç±»(åœ¨ç»§æ‰¿æ ‘çš„åº•éƒ¨)ã€‚ç”¨ä¸€ä¸ªç¨‹åºæ¥è¯´æ˜ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#include &lt;iostream&gt; class Base&#123;public: int m_id; Base(int id=0) : m_id(id) &#123; std::cout &lt;&lt; \"Base\\n\"; &#125; int getId() const &#123; return m_id; &#125;&#125;; class Derived: public Base&#123;public: double m_cost; Derived(double cost=0.0) : m_cost(cost) &#123; std::cout &lt;&lt; \"Derived\\n\"; &#125; double getCost() const &#123; return m_cost; &#125;&#125;; int main()&#123; std::cout &lt;&lt; \"Instantiating Base\\n\"; Base cBase; std::cout &lt;&lt; \"Instantiating Derived\\n\"; Derived cDerived; return 0;&#125;/*ç»“æœ*/Instantiating BaseBaseInstantiating DerivedBaseDerived//å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬æ„é€ æ´¾ç”Ÿå‡½æ•°æ—¶ï¼Œé¦–å…ˆæ„é€ æ´¾ç”Ÿå‡½æ•°çš„åŸºéƒ¨åˆ†ã€‚//è¿™æ˜¯æœ‰é“ç†çš„:ä»é€»è¾‘ä¸Šè®²ï¼Œæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œå­å…ƒç´ å°±ä¸èƒ½å­˜åœ¨ã€‚//è¿™ä¹Ÿæ˜¯ä¸€ç§å®‰å…¨çš„æ–¹æ³•:å­ç±»ç»å¸¸ä½¿ç”¨æ¥è‡ªçˆ¶ç±»çš„å˜é‡å’Œå‡½æ•°ï¼Œä½†æ˜¯çˆ¶ç±»å¯¹å­ç±»ä¸€æ— æ‰€çŸ¥ã€‚//å®ä¾‹åŒ–çˆ¶ç±»é¦–å…ˆç¡®ä¿åœ¨åˆ›å»ºæ´¾ç”Ÿç±»å¹¶å‡†å¤‡ä½¿ç”¨å®ƒä»¬æ—¶å·²ç»åˆå§‹åŒ–äº†è¿™äº›å˜é‡ã€‚","categories":[],"tags":[]},{"title":"C&C++/c++ä¸­çš„åŸºæœ¬ç»§æ‰¿","slug":"C&C++/c++ä¸­çš„åŸºæœ¬ç»§æ‰¿","date":"2020-05-12T15:48:27.429Z","updated":"2020-05-12T15:56:12.450Z","comments":true,"path":"archives/6a59a953.html","link":"","permalink":"https://longlongqin.github.io/archives/6a59a953.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/112-basic-inheritance-in-c/C++ä¸­çš„ç»§æ‰¿å‘ç”Ÿåœ¨ç±»ä¹‹é—´ã€‚åœ¨ç»§æ‰¿(is-a)å…³ç³»ä¸­ï¼Œè¢«ç»§æ‰¿çš„ç±»ç§°ä¸ºçˆ¶ç±»ã€åŸºç±»æˆ–è¶…ç±»ï¼Œç»§æ‰¿çš„ç±»ç§°ä¸ºå­ç±»ã€æ´¾ç”Ÿç±»ã€‚åœ¨ä¸Šé¢çš„å›¾ä¸­ï¼ŒFruitæ˜¯çˆ¶ç±»ï¼ŒAppleå’ŒBananaéƒ½æ˜¯å­ç±»ã€‚åœ¨è¿™ä¸ªå›¾ä¸­ï¼ŒTriangleæ—¢æ˜¯ä¸€ä¸ªå­ç±»(to Shape)ï¼Œåˆæ˜¯ä¸€çˆ¶ç±» (to Right Triangle)ã€‚","categories":[],"tags":[]},{"title":"C&C++/ç»§æ‰¿","slug":"C&C++/ç»§æ‰¿","date":"2020-05-12T14:59:08.180Z","updated":"2020-05-12T15:03:01.915Z","comments":true,"path":"archives/1adb63dd.html","link":"","permalink":"https://longlongqin.github.io/archives/1adb63dd.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/111-introduction-to-inheritance/ä¸é€šè¿‡ç»„åˆå’Œè¿æ¥å…¶ä»–å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡çš„å¯¹è±¡ç»„åˆä¸åŒï¼Œç»§æ‰¿æ¶‰åŠé€šè¿‡ç›´æ¥è·å–å…¶ä»–å¯¹è±¡çš„å±æ€§å’Œè¡Œä¸ºæ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œç„¶åæ‰©å±•æˆ–ä¸“é—¨åŒ–å®ƒä»¬ã€‚å°±åƒC++ç»§æ‰¿äº†Cè¯­è¨€çš„è®¸å¤šç‰¹æ€§ï¼ŒCè¯­è¨€æ˜¯c++çš„åŸºç¡€ï¼Œè€ŒCè¯­è¨€åˆç»§æ‰¿äº†å®ƒä¹‹å‰çš„ç¼–ç¨‹è¯­è¨€çš„è®¸å¤šç‰¹æ€§ã€‚","categories":[],"tags":[]},{"title":"C&C++/ä½¿ç”¨stdinitializer_liståˆå§‹åŒ–ç±»","slug":"C&C++/ä½¿ç”¨stdinitializer_liståˆå§‹åŒ–ç±»","date":"2020-05-12T13:24:33.494Z","updated":"2020-05-12T14:52:11.537Z","comments":true,"path":"archives/cf35c829.html","link":"","permalink":"https://longlongqin.github.io/archives/cf35c829.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/10-7-stdinitializer_list/å½“ç¼–è¯‘å™¨çœ‹åˆ°åˆå§‹åŒ–å™¨åˆ—è¡¨æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å°†å…¶è½¬æ¢æˆstd::initializer_listç±»å‹çš„å¯¹è±¡ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¥å—std::initializer_listå‚æ•°çš„æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–å™¨åˆ—è¡¨ä½œä¸ºè¾“å…¥æ¥åˆ›å»ºå¯¹è±¡ã€‚std::initializer_liståœ¨å¤´æ–‡ä»¶&lt;initializer_list&gt;å…³äºstd::initializer_listï¼Œæœ‰ä¸€äº›äº‹æƒ…éœ€è¦äº†è§£ä¸std::arrayæˆ–std::vectoréå¸¸ç±»ä¼¼ï¼Œæ‚¨å¿…é¡»å‘Šè¯‰std::initializer_liståˆ—è¡¨ä¸­çš„æ•°æ®ç±»å‹ï¼ˆåœ¨å°–æ‹¬å·ä¸­è¡¨ç¤º ç±»å‹ï¼‰ã€‚å¦‚ï¼šstd::initializer_list&lt;int&gt;æˆ–std::initializer_list&lt;std::string&gt;std::initializer_listæœ‰ä¸€ä¸ª(å‘½åé”™è¯¯)size()å‡½æ•°ï¼Œå®ƒè¿”å›åˆ—è¡¨ä¸­çš„å…ƒç´ æ•°é‡ã€‚å½“æˆ‘ä»¬éœ€è¦çŸ¥é“ä¼ å…¥çš„åˆ—è¡¨çš„é•¿åº¦æ—¶ï¼Œè¿™æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä½¿ç”¨std::initializer_liståˆ›å»ºä¸€ä¸ª æ„é€ å‡½æ•°è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ä¸€ä¸ªæ„é€ å‡½æ•°æ¥æ›´æ–°IntArrayç±»ï¼Œè¿™ä¸ªæ„é€ å‡½æ•°é‡‡ç”¨std::initializer_listã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758#include &lt;cassert&gt; // for assert()#include &lt;initializer_list&gt; // for std::initializer_list#include &lt;iostream&gt; class IntArray&#123;private: int m_length&#123;&#125;; int *m_data&#123;&#125;; public: IntArray() = default; IntArray(int length) : m_length&#123; length &#125;, m_data&#123; new int[length]&#123;&#125; &#125; &#123; &#125; IntArray(std::initializer_list&lt;int&gt; list) : //â­ å…è®¸é€šè¿‡ åˆ—è¡¨åˆå§‹åŒ– æ¥åˆå§‹åŒ–IntArray IntArray(static_cast&lt;int&gt;(list.size())) // ä½¿ç”¨å§”æ‰˜æ„é€ å‡½æ•°è®¾ç½®åˆå§‹æ•°ç»„ &#123; // ç°åœ¨ä»åˆ—è¡¨ä¸­åˆå§‹åŒ–æˆ‘ä»¬çš„æ•°ç»„ int count&#123; 0 &#125;; for (auto element : list) &#123; m_data[count] = element; ++count; &#125; &#125; ~IntArray() &#123; delete[] m_data; // æˆ‘ä»¬ä¸éœ€è¦åœ¨è¿™é‡Œè®¾ç½®m_dataä¸ºnullæˆ–m_lengthä¸º0ï¼Œå› ä¸ºå¯¹è±¡å°†åœ¨è¿™ä¸ªå‡½æ•°ä¹‹åç«‹å³é”€æ¯ &#125; IntArray(const IntArray&amp;) = delete; // é¿å…æµ…æ‹·è´ IntArray&amp; operator=(const IntArray&amp; list) = delete; // é¿å…æµ…æ‹·è´ int&amp; operator[](int index) &#123; assert(index &gt;= 0 &amp;&amp; index &lt; m_length); return m_data[index]; &#125; int getLength() const &#123; return m_length; &#125;&#125;; int main()&#123; IntArray array&#123; 5, 4, 3, 2, 1 &#125;; //â­ initializer list for (int count&#123; 0 &#125;; count &lt; array.getLength(); ++count) std::cout &lt;&lt; array[count] &lt;&lt; ' '; return 0;&#125;å·¥ä½œåŸç†ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°æ¢è®¨è¿™ä¸ªé—®é¢˜çš„å·¥ä½œåŸç†ï¼šè¿™æ˜¯æˆ‘ä»¬çš„IntArrayæ„é€ å‡½æ•°ï¼Œå®ƒæ¥å—std::initializer_list&lt;int&gt;ã€‚1234567891011IntArray(std::initializer_list&lt;int&gt; list): // allow IntArray to be initialized via list initialization IntArray(static_cast&lt;int&gt;(list.size())) // use delegating constructor to set up initial array&#123; // Now initialize our array from the list int count&#123; 0 &#125;; for (int element : list) &#123; m_data[count] = element; ++count; &#125;&#125;ç¬¬ä¸€è¡Œï¼šå¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨å°–æ‹¬å·æ¥è¡¨ç¤ºæˆ‘ä»¬åœ¨åˆ—è¡¨ä¸­æœŸæœ›çš„å…ƒç´ ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªIntArrayï¼Œæˆ‘ä»¬å¸Œæœ›åˆ—è¡¨ç”¨intæ¥å¡«å……ï¼Œæ³¨æ„æˆ‘ä»¬æ²¡æœ‰é€šè¿‡constå¼•ç”¨æ¥ä¼ é€’åˆ—è¡¨ã€‚å¾ˆåƒstd::string_viewï¼Œstd::initializer_listæ˜¯éå¸¸è½»é‡çº§çš„ï¼Œè€Œä¸”æ‹·è´å¾€å¾€æ¯”é—´æ¥æ‹·è´æ›´ä¾¿å®œã€‚ç¬¬äºŒè¡Œï¼šæˆ‘ä»¬é€šè¿‡å§”æ‰˜æ„é€ å‡½æ•°å°†IntArrayçš„å†…å­˜åˆ†é…å§”æ‰˜ç»™å¦ä¸€ä¸ªæ„é€ å‡½æ•°(ä»¥å‡å°‘å†—ä½™ä»£ç )ã€‚å¦ä¸€ä¸ªæ„é€ å‡½æ•°éœ€è¦çŸ¥é“æ•°ç»„çš„é•¿åº¦ï¼Œå› æ­¤æˆ‘ä»¬ä¼ é€’ç»™å®ƒlist.size()ï¼Œå®ƒåŒ…å«åˆ—è¡¨ä¸­çš„å…ƒç´ æ•°é‡ã€‚æ³¨æ„ï¼Œlist.size()è¿”å›ä¸€ä¸ªsize_t(å®ƒæ˜¯æ— ç¬¦å·çš„)ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¿™é‡Œè½¬æ¢ä¸ºä¸€ä¸ªæœ‰ç¬¦å·çš„intã€‚æˆ‘ä»¬ä½¿ç”¨ç›´æ¥åˆå§‹åŒ–ï¼Œè€Œä¸æ˜¯å¤§æ‹¬å·åˆå§‹åŒ–ï¼Œå› ä¸ºå¤§æ‹¬å·åˆå§‹åŒ–æ›´å–œæ¬¢åˆ—è¡¨æ„é€ å‡½æ•°ã€‚è™½ç„¶æ„é€ å‡½æ•°ä¼šå¾—åˆ°æ­£ç¡®çš„è§£æï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸æƒ³ä½¿ç”¨listæ„é€ å‡½æ•°ï¼Œä½¿ç”¨ç›´æ¥åˆå§‹åŒ–æ¥åˆå§‹åŒ–ç±»ä¼šæ›´å®‰å…¨ã€‚æ„é€ å‡½æ•°çš„ä¸»ä½“ï¼šç”¨äºå°†åˆ—è¡¨ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°æˆ‘ä»¬çš„IntArrayç±»ä¸­ã€‚ç”±äºä¸€äº›æ— æ³•è§£é‡Šçš„åŸå› ï¼Œstd::initializer_listä¸æä¾›é€šè¿‡ä¸‹æ ‡(operator[])è®¿é—®åˆ—è¡¨å…ƒç´ çš„åŠŸèƒ½ã€‚æ ‡å‡†å§”å‘˜ä¼šå·²å¤šæ¬¡æ³¨æ„åˆ°è¿™ä¸€é—æ¼ï¼Œä½†ä»æœªå¤„ç†è¿‡ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€äº›ç®€å•çš„æ–¹æ³•å¯ä»¥è§£å†³ç¼ºå°‘ä¸‹æ ‡çš„é—®é¢˜ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯åœ¨è¿™é‡Œä½¿ç”¨for-eachå¾ªç¯ã€‚for-eachå¾ªç¯éå†åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°†è¿™äº›å…ƒç´ å¤åˆ¶åˆ°å†…éƒ¨æ•°ç»„ä¸­ã€‚æ³¨æ„ï¼šåˆå§‹åŒ–å™¨åˆ—è¡¨æ€»æ˜¯ä¼˜å…ˆé€‰æ‹©åŒ¹é…çš„initializer_listæ„é€ å‡½æ•°ã€‚æ‰€ä»¥ï¼Œä¸‹é¢çš„ï¼š1IntArray array &#123; 5 &#125;;å°†åŒ¹é…IntArray(std::initializer_list)ï¼Œè€Œä¸æ˜¯IntArray(int)ã€‚å¦‚æœæƒ³åœ¨å®šä¹‰initializer_listæ„é€ å‡½æ•°ä¹‹ååŒ¹é…IntArray(int)ï¼Œåˆ™éœ€è¦ä½¿ç”¨ å¤åˆ¶åˆå§‹åŒ– æˆ– ç›´æ¥åˆå§‹åŒ–ã€‚ä½¿ç”¨std::initializer_listèµ‹å€¼ç±»æ‚¨è¿˜å¯ä»¥ä½¿ç”¨std::initializer_listæ¥ä¸ºç±»åˆ†é…æ–°å€¼ï¼Œæ–¹æ³•æ˜¯é‡è½½èµ‹å€¼æ“ä½œç¬¦ä»¥è·å–std::initializer_listå‚æ•°ã€‚è¿™ä¸ä¸Šé¢çš„å·¥ä½œåŸç†ç±»ä¼¼ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹é¢çš„æµ‹è¯•è§£å†³æ–¹æ¡ˆä¸­å±•ç¤ºä¸€ä¸ªå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ä¾‹å­ã€‚æ³¨æ„ï¼Œå¦‚æœæ‚¨å®ç°ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè¯¥æ„é€ å‡½æ•°é‡‡ç”¨std::initializer_listï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥ç¡®ä¿è‡³å°‘æ‰§è¡Œä»¥ä¸‹æ“ä½œä¹‹ä¸€:æä¾›é‡è½½çš„åˆ—è¡¨èµ‹å€¼æ“ä½œç¬¦æä¾›é€‚å½“çš„ æ·±æ‹·è´ å¤åˆ¶èµ‹å€¼æ“ä½œç¬¦12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091//å°æµ‹è¯•ï¼šä½¿ç”¨ä¸Šé¢çš„IntArrayç±»ï¼Œå®ç°ä¸€ä¸ªé‡è½½èµ‹å€¼è¿ç®—ç¬¦ï¼Œå®ƒæ¥å—åˆå§‹åŒ–å™¨åˆ—è¡¨ã€‚//çš„è§£å†³æ–¹æ¡ˆ#include &lt;cassert&gt; // for assert()#include &lt;initializer_list&gt; // for std::initializer_list#include &lt;iostream&gt; class IntArray&#123;private: int m_length &#123;&#125;; int *m_data &#123;&#125;; public: IntArray() = default; IntArray(int length) : m_length&#123; length &#125;, m_data&#123; new int[length]&#123;&#125; &#125; &#123; &#125; IntArray(std::initializer_list&lt;int&gt; list) : // allow IntArray to be initialized via list initialization IntArray(static_cast&lt;int&gt;(list.size())) // use delegating constructor to set up initial array &#123; // Now initialize our array from the list int count&#123; 0 &#125;; for (auto element : list) &#123; m_data[count] = element; ++count; &#125; &#125; ~IntArray() &#123; delete[] m_data; // we don't need to set m_data to null or m_length to 0 here, since the object will be destroyed immediately after this function anyway &#125; IntArray(const IntArray&amp;) = delete; // to avoid shallow copies IntArray&amp; operator=(const IntArray&amp; list) = delete; // to avoid shallow copies IntArray&amp; operator=(std::initializer_list&lt;int&gt; list) //â­ &#123; // If the new list is a different size, reallocate it int length&#123; static_cast&lt;int&gt;(list.size()) &#125;; if (length != m_length) &#123; delete[] m_data; m_length = length; m_data = new int[length]&#123;&#125;; &#125; // Now initialize our array from the list int count&#123; 0 &#125;; for (auto element : list) &#123; m_data[count] = element; ++count; &#125; return *this; &#125; int&amp; operator[](int index) &#123; assert(index &gt;= 0 &amp;&amp; index &lt; m_length); return m_data[index]; &#125; int getLength() const &#123; return m_length; &#125;&#125;; int main()&#123; IntArray array &#123; 5, 4, 3, 2, 1 &#125;; // initializer list for (int count&#123; 0 &#125;; count &lt; array.getLength(); ++count) std::cout &lt;&lt; array[count] &lt;&lt; ' '; std::cout &lt;&lt; '\\n'; array = &#123; 1, 3, 5, 7, 9, 11 &#125;; //â­ for (int count&#123; 0 &#125;; count &lt; array.getLength(); ++count) std::cout &lt;&lt; array[count] &lt;&lt; ' '; std::cout &lt;&lt; '\\n'; return 0;&#125;","categories":[],"tags":[]},{"title":"C&C++/å®¹å™¨ç±»","slug":"C&C++/å®¹å™¨ç±»","date":"2020-05-12T09:00:00.508Z","updated":"2020-05-12T13:21:33.674Z","comments":true,"path":"archives/2ef705db.html","link":"","permalink":"https://longlongqin.github.io/archives/2ef705db.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/106-container-classes/åœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯ä½¿ç”¨å®¹å™¨ã€‚ä½ çš„æ—©é¤éº¦ç‰‡è£…åœ¨ä¸€ä¸ªç›’å­é‡Œï¼Œä¹¦é‡Œçš„ä¹¦é¡µè£…åœ¨å°é¢å’Œå°çš®é‡Œï¼Œä½ å¯ä»¥æŠŠä»»ä½•æ•°é‡çš„ä¸œè¥¿è£…åœ¨è½¦åº“é‡Œçš„å®¹å™¨é‡Œã€‚å¦‚æœæ²¡æœ‰å®¹å™¨ï¼Œä½¿ç”¨è¿™äº›å¯¹è±¡å°±ä¼šéå¸¸ä¸æ–¹ä¾¿ã€‚ç±»ä¼¼åœ°ï¼Œå®¹å™¨ç±»(container class)æ˜¯è®¾è®¡æ¥å®¹çº³å’Œç»„ç»‡å¦ä¸€ç§ç±»å‹ (å¦ä¸€ç§ç±»æˆ–åŸºæœ¬ç±»å‹) çš„å¤šä¸ªå®ä¾‹çš„ç±»ã€‚æœ‰è®¸å¤šä¸åŒç§ç±»çš„å®¹å™¨ç±»ï¼Œæ¯ç§å®¹å™¨ç±»åœ¨å…¶ä½¿ç”¨ä¸­éƒ½æœ‰å„ç§ä¼˜ç‚¹ã€ç¼ºç‚¹å’Œé™åˆ¶ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨ç¼–ç¨‹ä¸­æœ€å¸¸ç”¨çš„å®¹å™¨æ˜¯æ•°ç»„ï¼Œæ‚¨å·²ç»çœ‹åˆ°äº†è®¸å¤šè¿™æ ·çš„ä¾‹å­ã€‚è™½ç„¶c++æœ‰å†…ç½®çš„æ•°ç»„åŠŸèƒ½ï¼Œä½†ç¨‹åºå‘˜é€šå¸¸ä¼šä½¿ç”¨æ•°ç»„å®¹å™¨ç±»(std::arrayæˆ–std::vector)ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†é¢å¤–çš„å¥½å¤„ã€‚ä¸å†…ç½®æ•°ç»„ä¸åŒï¼Œæ•°ç»„å®¹å™¨ç±»é€šå¸¸æä¾›åŠ¨æ€è°ƒæ•´å¤§å°(æ·»åŠ æˆ–åˆ é™¤å…ƒç´ æ—¶)ï¼Œåœ¨ä¼ é€’ç»™å‡½æ•°æ—¶è®°ä½å®ƒä»¬çš„å¤§å°ï¼Œå¹¶æ‰§è¡Œè¾¹ç•Œæ£€æŸ¥ã€‚è¿™ä¸ä»…ä½¿æ•°ç»„å®¹å™¨ç±»æ¯”æ™®é€šæ•°ç»„æ›´æ–¹ä¾¿ï¼Œè€Œä¸”æ›´å®‰å…¨ã€‚è‰¯å¥½çš„å®¹å™¨å°†åŒ…æ‹¬ä»¥ä¸‹åŠŸèƒ½å®¹å™¨ç±»é€šå¸¸å®ç°ä¸€ä¸ªç›¸å½“æ ‡å‡†åŒ–çš„æœ€å°åŠŸèƒ½é›†ã€‚å¤§å¤šæ•°å®šä¹‰è‰¯å¥½çš„å®¹å™¨å°†åŒ…æ‹¬ä»¥ä¸‹åŠŸèƒ½:åˆ›å»ºä¸€ä¸ªç©ºå®¹å™¨(é€šè¿‡æ„é€ å‡½æ•°)åœ¨å®¹å™¨ä¸­æ’å…¥ä¸€ä¸ªæ–°å¯¹è±¡ä»å®¹å™¨ä¸­åˆ é™¤å¯¹è±¡æŠ¥å‘Šå®¹å™¨ä¸­å½“å‰å¯¹è±¡çš„æ•°é‡æ¸…ç©ºå®¹å™¨ä¸­æ‰€æœ‰çš„å¯¹è±¡æä¾›å¯¹å­˜å‚¨å¯¹è±¡çš„è®¿é—®å¯¹å…ƒç´ æ’åº(å¯é€‰)æœ‰æ—¶å€™ï¼ŒæŸäº›å®¹å™¨ç±»ä¼šå¿½ç•¥æŸäº›åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„å®¹å™¨ç±»ç»å¸¸çœç•¥æ’å…¥å’Œåˆ é™¤å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬å¾ˆæ…¢ï¼Œè€Œä¸”ç±»è®¾è®¡å™¨ä¸å¸Œæœ›é¼“åŠ±ä½¿ç”¨å®ƒä»¬ã€‚å®¹å™¨ç±»å®ç°æˆå‘˜å…³ç³»ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯æ•°ç»„çš„æˆå‘˜(å±äº)ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„â€œmember-ofâ€ï¼Œè€Œä¸æ˜¯c++ç±»æˆå‘˜çš„æ„ä¹‰ã€‚å®¹å™¨çš„ç±»å‹å®¹å™¨ç±»é€šå¸¸æœ‰ä¸¤ç§ä¸åŒçš„ç§ç±»ï¼šValue containersï¼šå­˜å‚¨å®ƒä»¬æ‰€æŒæœ‰çš„å¯¹è±¡çš„å‰¯æœ¬çš„ compositionsï¼ˆè¿™æ ·å°±å¯ä»¥è´Ÿè´£åˆ›å»ºå’Œé”€æ¯è¿™äº›å‰¯æœ¬ï¼‰ã€‚Reference containersï¼šå­˜å‚¨æŒ‡å‘å…¶ä»–å¯¹è±¡çš„æŒ‡é’ˆæˆ–å¼•ç”¨çš„aggregations ï¼ˆå› æ­¤ä¸è´Ÿè´£è¿™äº›å¯¹è±¡çš„åˆ›å»ºæˆ–é”€æ¯ï¼‰ä¸åƒåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œå®¹å™¨å¯ä»¥ä¿å­˜ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚åœ¨c++ä¸­ï¼Œå®¹å™¨é€šå¸¸åªä¿å­˜ä¸€ç§ç±»å‹çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®ƒå°†åªä¿å­˜æ•´æ•°ã€‚ä¸å…¶ä»–ä¸€äº›è¯­è¨€ä¸åŒï¼Œè®¸å¤šc++å®¹å™¨ä¸å…è®¸ä»»æ„æ··åˆç±»å‹ã€‚å¦‚æœéœ€è¦å®¹å™¨æ¥ä¿å­˜æ•´æ•°å’ŒåŒç²¾åº¦æ•°ï¼Œé€šå¸¸éœ€è¦ç¼–å†™ä¸¤ä¸ªå•ç‹¬çš„å®¹å™¨(æˆ–è€…ä½¿ç”¨æ¨¡æ¿ï¼Œè¿™æ˜¯c++çš„ä¸€ä¸ªé«˜çº§ç‰¹æ€§)ã€‚å°½ç®¡å®¹å™¨çš„ä½¿ç”¨å—åˆ°é™åˆ¶ï¼Œä½†å®ƒä»¬éå¸¸æœ‰ç”¨ï¼Œå¹¶ä¸”ä½¿ç¼–ç¨‹æ›´å®¹æ˜“ã€æ›´å®‰å…¨æ•°ç»„å®¹å™¨ç±»åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä»å¤´å¼€å§‹ç¼–å†™ä¸€ä¸ªæ•´æ•°æ•°ç»„ç±»ï¼Œå®ƒå®ç°äº†å®¹å™¨åº”è¯¥å…·æœ‰çš„å¤§å¤šæ•°å¸¸è§åŠŸèƒ½ã€‚è¿™ä¸ªæ•°ç»„ç±»å°†æ˜¯ä¸€ä¸ªå€¼å®¹å™¨ï¼ˆvalue containerï¼‰ï¼Œå®ƒå°†ä¿å­˜å®ƒç»„ç»‡çš„å…ƒç´ çš„å‰¯æœ¬ã€‚é¡¾åæ€ä¹‰ï¼Œè¯¥å®¹å™¨å°†ä¿å­˜ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œç±»ä¼¼äºstd::vectorã€‚åˆ›å»ºè¿‡ç¨‹è¯¦æƒ…è¯·çœ‹ï¼šhttps://www.learncpp.com/cpp-tutorial/106-container-classes/ çš„â€œAn array container classâ€","categories":[],"tags":[]},{"title":"C&C++/ç±»çš„æ‹·è´åˆå§‹åŒ–","slug":"C&C++/ç±»çš„æ‹·è´åˆå§‹åŒ–","date":"2020-05-11T09:37:18.393Z","updated":"2020-05-11T10:00:29.477Z","comments":true,"path":"archives/5b8eb091.html","link":"","permalink":"https://longlongqin.github.io/archives/5b8eb091.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/9-12-copy-initialization/é¿å…ç›´æ¥ä½¿ç”¨æ‹·è´åˆå§‹åŒ–1234567891011121314151617181920212223242526272829303132#include &lt;cassert&gt;#include &lt;iostream&gt; class Fraction&#123;private: int m_numerator; int m_denominator; public: // Default constructor Fraction(int numerator=0, int denominator=1) : m_numerator(numerator), m_denominator(denominator) &#123; assert(denominator != 0); &#125; friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Fraction &amp;f1);&#125;; std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Fraction &amp;f1)&#123; out &lt;&lt; f1.m_numerator &lt;&lt; \"/\" &lt;&lt; f1.m_denominator; return out;&#125;int main()&#123; Fraction six = Fraction(6); std::cout &lt;&lt; six; return 0;&#125;è¿™ç§å½¢å¼çš„æ‹·è´åˆå§‹åŒ–çš„å·¥ä½œåŸç†æ˜¯å’Œä¸‹é¢çš„å½¢å¼çš„å·¥ä½œåŸç†ä¸€æ ·:1Fraction six(Fraction(6));åœ¨â€œæ‹·è´æ„é€ å‡½æ•°â€ä¸­ï¼Œäº†è§£åˆ°è¿™ä¼šåŒæ—¶è°ƒç”¨ Fraction(int, int) å’Œ Fractionæ‹·è´æ„é€ å‡½æ•° (å‡ºäºæ€§èƒ½åŸå› ï¼Œå¯èƒ½ä¼šçœç•¥)ã€‚ä½†æ˜¯ï¼Œç”±äºä¸èƒ½ä¿è¯çœç•¥(åœ¨c++ 17ä¹‹å‰ï¼Œè¿™ç§æƒ…å†µä¸‹çœç•¥æ˜¯å¿…é¡»çš„)ï¼Œæ‰€ä»¥æœ€å¥½é¿å…æ‹·è´ç±»çš„åˆå§‹åŒ–ï¼Œè€Œä½¿ç”¨ç»Ÿä¸€çš„åˆå§‹åŒ–ã€‚å…¶ä»–åœ°æ–¹ä½¿ç”¨æ‹·è´åˆå§‹åŒ–è¿˜æœ‰ä¸€äº›å…¶ä»–åœ°æ–¹ä½¿ç”¨äº†å¤åˆ¶åˆå§‹åŒ–ï¼Œä½†å…¶ä¸­ä¸¤ä¸ªå€¼å¾—æ˜ç¡®åœ°æåˆ°ã€‚å½“æŒ‰å€¼ä¼ é€’æˆ–è¿”å›ç±»æ—¶ï¼Œä½¿ç”¨æ‹·è´åˆå§‹åŒ–ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354#include &lt;cassert&gt;#include &lt;iostream&gt; class Fraction&#123;private: int m_numerator; int m_denominator; public: // Default constructor Fraction(int numerator=0, int denominator=1) : m_numerator(numerator), m_denominator(denominator) &#123; assert(denominator != 0); &#125; // Copy constructor Fraction(const Fraction &amp;copy) : m_numerator(copy.m_numerator), m_denominator(copy.m_denominator) &#123; // no need to check for a denominator of 0 here since copy must already be a valid Fraction std::cout &lt;&lt; \"Copy constructor called\\n\"; // just to prove it works &#125; friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Fraction &amp;f1); int getNumerator() &#123; return m_numerator; &#125; void setNumerator(int numerator) &#123; m_numerator = numerator; &#125;&#125;; std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Fraction &amp;f1)&#123; out &lt;&lt; f1.m_numerator &lt;&lt; \"/\" &lt;&lt; f1.m_denominator; return out;&#125; Fraction makeNegative(Fraction f) // ideally we should do this by const reference&#123; f.setNumerator(-f.getNumerator()); return f;&#125; int main()&#123; Fraction fiveThirds(5, 3); std::cout &lt;&lt; makeNegative(fiveThirds); return 0;&#125;/*è¿è¡Œç»“æœ*/Copy constructor calledCopy constructor called-5/3ç¬¬ä¸€ä¸ªå¤åˆ¶æ„é€ å‡½æ•°è°ƒç”¨ å‘ç”Ÿåœ¨ fiveThirdsä½œä¸ºå‚æ•°ä¼ é€’ç»™makeNegative()å‚æ•°fçš„æ—¶å€™ã€‚ç¬¬äºŒä¸ªè°ƒç”¨å‘ç”Ÿåœ¨makeNegative()çš„è¿”å›å€¼è¢«ä¼ é€’å›main()çš„æ—¶å€™ã€‚","categories":[],"tags":[]},{"title":"C&C++/é‡è½½â€œä¸‹æ ‡â€æ“ä½œç¬¦","slug":"C&C++/é‡è½½â€œä¸‹æ ‡â€æ“ä½œç¬¦","date":"2020-05-10T13:40:11.470Z","updated":"2020-05-10T15:19:11.736Z","comments":true,"path":"archives/1f338417.html","link":"","permalink":"https://longlongqin.github.io/archives/1f338417.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/98-overloading-the-subscript-operator/123456789101112class IntList&#123;private: int m_list[10]&#123;&#125;;&#125;; int main()&#123; IntList list&#123;&#125;; // how do we access elements from m_list? return 0;&#125;å› ä¸ºm_listæˆå‘˜å˜é‡æ˜¯ç§æœ‰çš„ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä»å˜é‡åˆ—è¡¨ä¸­è®¿é—®å®ƒã€‚è¿™æ„å‘³ç€æˆ‘ä»¬æ— æ³•ç›´æ¥è·å–æˆ–è®¾ç½®m_listæ•°ç»„ä¸­çš„å€¼ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è·å–æˆ–å°†å…ƒç´ æ”¾å…¥æˆ‘ä»¬çš„åˆ—è¡¨ä¸­å‘¢?ç­”ï¼šé‡è½½[]æ“ä½œç¬¦é‡è½½[]æ“ä½œç¬¦å¿…é¡»ä½¿ç”¨æˆå‘˜å‡½æ•°åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ›´å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯é‡è½½ä¸‹æ ‡æ“ä½œç¬¦([])ï¼Œä»¥å…è®¸è®¿é—®m_listçš„å…ƒç´ ã€‚ä¸‹æ ‡æ“ä½œç¬¦çš„é‡è½½å¿…é¡»ä½¿ç”¨æˆå‘˜å‡½æ•°ç‰ˆã€‚é‡è½½è¿ç®—ç¬¦[]å‡½æ•°æ€»æ˜¯æ¥å—ä¸€ä¸ªå‚æ•°: ç”¨æˆ·åœ¨ç¡¬æ‹¬å·ä¹‹é—´æ”¾ç½®çš„ä¸‹æ ‡ã€‚åœ¨IntListçš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›ç”¨æˆ·ä¼ å…¥ä¸€ä¸ªæ•´æ•°ç´¢å¼•ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•´æ•°å€¼ä½œä¸ºç»“æœã€‚12345678910111213class IntList&#123;private: int m_list[10]&#123;&#125;; public: int&amp; operator[](int index);&#125;;int&amp; IntList::operator[](int index)&#123; return m_list[index];&#125;ç°åœ¨ï¼Œæ¯å½“æˆ‘ä»¬åœ¨ç±»çš„å¯¹è±¡ä¸Šä½¿ç”¨ä¸‹æ ‡æ“ä½œç¬¦([])æ—¶ï¼Œç¼–è¯‘å™¨å°†ä»m_listæˆå‘˜å˜é‡è¿”å›ç›¸åº”çš„å…ƒç´ !è¿™å…è®¸æˆ‘ä»¬ç›´æ¥è·å–å’Œè®¾ç½®m_listçš„å€¼:12345IntList list&#123;&#125;; list[2] = 3; // set a value std::cout &lt;&lt; list[2] &lt;&lt; '\\n'; // get a value return 0;ä»è¯­æ³•å’Œç†è§£çš„è§’åº¦æ¥çœ‹ï¼Œè¿™éƒ½å¾ˆç®€å•ã€‚ å½“list[2]è®¡ç®—æ—¶ï¼Œç¼–è¯‘å™¨é¦–å…ˆæ£€æŸ¥æ˜¯å¦æœ‰é‡è½½çš„è¿ç®—ç¬¦[] å‡½æ•°ã€‚å¦‚æœæœ‰ï¼Œå®ƒå°†æ–¹æ‹¬å·(æœ¬ä¾‹ä¸­ä¸º2)ä¸­çš„å€¼ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚ä¸ºä»€ä¹ˆæ“ä½œç¬¦[]è¿”å›å¼•ç”¨è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹list[2] = 3æ˜¯å¦‚ä½•è®¡ç®—çš„ã€‚å› ä¸ºä¸‹æ ‡è¿ç®—ç¬¦å…·æœ‰æ¯”èµ‹å€¼è¿ç®—ç¬¦æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥list[2]é¦–å…ˆè®¡ç®—ã€‚list[2]è°ƒç”¨æ“ä½œç¬¦[]ï¼Œæˆ‘ä»¬å®šä¹‰å®ƒæ¥è¿”å›å¯¹list.m_list[2]çš„å¼•ç”¨ã€‚å› ä¸ºæ“ä½œç¬¦[]è¿”å›ä¸€ä¸ªå¼•ç”¨ï¼Œæ‰€ä»¥å®ƒè¿”å›å®é™…çš„list.m_list[2]æ•°ç»„å…ƒç´ ã€‚æˆ‘ä»¬çš„éƒ¨åˆ†æ±‚å€¼è¡¨è¾¾å¼å˜æˆ list.m_list[2] = 3ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ•´æ•°èµ‹å€¼ã€‚åœ¨1.3 â€“ Introduction to variablesä¸­ï¼Œæ‚¨äº†è§£åˆ°èµ‹å€¼è¯­å¥å·¦è¾¹çš„ä»»ä½•å€¼éƒ½å¿…é¡»æ˜¯l-value(å®ƒæ˜¯ä¸€ä¸ªå…·æœ‰å®é™…å†…å­˜åœ°å€çš„å˜é‡)ã€‚å› ä¸ºè¿ç®—ç¬¦[]çš„ç»“æœå¯ä»¥åœ¨èµ‹å€¼è¯­å¥çš„å·¦è¾¹ä½¿ç”¨ (ä¾‹å¦‚list[2] = 3)ï¼Œæ‰€ä»¥è¿ç®—ç¬¦[]çš„è¿”å›å€¼å¿…é¡»æ˜¯l-valueã€‚äº‹å®è¯æ˜ï¼Œå¼•ç”¨æ€»æ˜¯l-valueï¼Œå› ä¸ºæ‚¨åªèƒ½å¼•ç”¨å…·æœ‰å†…å­˜åœ°å€çš„å˜é‡ã€‚æ‰€ä»¥é€šè¿‡è¿”å›ä¸€ä¸ªå¼•ç”¨ï¼Œç¼–è¯‘å™¨å°±ä¼šç¡®ä¿¡æˆ‘ä»¬è¿”å›çš„æ˜¯ä¸€ä¸ªl-valueã€‚å½“æ“ä½œç¬¦[]æŒ‰å€¼ è€Œä¸æ˜¯æŒ‰å¼•ç”¨è¿”å›æ•´æ•°æ—¶è€ƒè™‘ä¸€ä¸‹å¦‚æœoperator[] æŒ‰å€¼ è€Œä¸æ˜¯ æŒ‰å¼•ç”¨è¿”å›æ•´æ•° ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿlist[2]å°†è°ƒç”¨æ“ä½œç¬¦[]ï¼Œå®ƒå°†è¿”å›list.m_list[2]çš„å€¼ã€‚ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœm_list[2]çš„å€¼ä¸º6ï¼Œæ“ä½œç¬¦[]å°†è¿”å›å€¼6ã€‚ï¼‰list[2] = 3å°†ä¼šè¢«æ‰§è¡Œä¸º6=3è¿™æ¯«æ— æ„ä¹‰! å¦‚æœä½ å°è¯•è¿™æ ·åšï¼Œc++ç¼–è¯‘å™¨ä¼šæŠ±æ€¨:1C:VCProjectsTest.cpp(386) : error C2106: &#39;&#x3D;&#39; : left operand must be l-valueå¤„ç†constå¯¹è±¡åœ¨ä¸Šé¢çš„IntListä¾‹å­ä¸­ï¼Œæ“ä½œç¬¦[]æ˜¯éconstçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒä½œä¸ºä¸€ä¸ªl-valueæ¥æ”¹å˜éconstå¯¹è±¡çš„çŠ¶æ€ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„IntListå¯¹è±¡æ˜¯constå‘¢?åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä¸èƒ½è°ƒç”¨è¿ç®—ç¬¦[]çš„éconstç‰ˆæœ¬ï¼Œå› ä¸ºè¿™å°†å…è®¸æˆ‘ä»¬æ½œåœ¨åœ°æ›´æ”¹constå¯¹è±¡çš„çŠ¶æ€ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†åˆ«å®šä¹‰è¿ç®—ç¬¦[]çš„éconstç‰ˆæœ¬å’Œconstç‰ˆæœ¬ã€‚éconstç‰ˆæœ¬å°†ä¸éconstå¯¹è±¡ä¸€èµ·ä½¿ç”¨ï¼Œè€Œconstç‰ˆæœ¬ä¸constå¯¹è±¡ä¸€èµ·ä½¿ç”¨ã€‚12345678910111213141516171819202122232425262728293031323334#include &lt;iostream&gt; class IntList&#123;private: int m_list[10]&#123; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 &#125;; // give this class some initial state for this example public: int&amp; operator[] (int index); const int&amp; operator[] (int index) const;&#125;; int&amp; IntList::operator[] (int index) // å¯¹äºéconstå¯¹è±¡: å¯ç”¨äºèµ‹å€¼&#123; return m_list[index];&#125; const int&amp; IntList::operator[] (int index) const // å¯¹äºconstå¯¹è±¡:åªèƒ½ç”¨äºè®¿é—®&#123; return m_list[index];&#125; int main()&#123; IntList list&#123;&#125;; list[2] = 3; // okay: calls non-const version of operator[] std::cout &lt;&lt; list[2] &lt;&lt; '\\n'; const IntList clist&#123;&#125;; clist[2] = 3; // compile error: calls const version of operator[], which returns a const reference. ä¸èƒ½ç”¨äºèµ‹å€¼ std::cout &lt;&lt; clist[2] &lt;&lt; '\\n'; return 0;&#125;æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆå’Œé‡è½½æ“ä½œç¬¦[]ä¸èƒ½æ··æ·†å¦‚æœè¯•å›¾åœ¨æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆä¸Šè°ƒç”¨operator[]ï¼Œ c++ä¼šå‡å®šæ‚¨æ­£åœ¨å°è¯•ä¸ºè¯¥ç±»å‹çš„å¯¹è±¡æ•°ç»„å»ºç«‹ç´¢å¼•ã€‚1234567891011121314151617181920212223242526#include &lt;cassert&gt; // for assert() class IntList&#123;private: int m_list[10]&#123;&#125;; public: int&amp; operator[] (int index);&#125;; int&amp; IntList::operator[] (int index)&#123; assert(index &gt;= 0 &amp;&amp; index &lt; 10); return m_list[index];&#125; int main()&#123; IntList *list&#123; new IntList&#123;&#125; &#125;; list [2] = 3; //é”™è¯¯:è¿™å°†å‡è®¾æˆ‘ä»¬æ­£åœ¨è®¿é—® IntListsæ•°ç»„ä¸­çš„ç´¢å¼•ä¸º2çš„å…ƒç´  delete list; return 0;&#125;å› ä¸ºæˆ‘ä»¬ä¸èƒ½å°†æ•´æ•°èµ‹ç»™IntListï¼Œæ‰€ä»¥è¿™å°†æ— æ³•ç¼–è¯‘ã€‚ç„¶è€Œï¼Œå¦‚æœåˆ†é…ä¸€ä¸ªæ•´æ•°æ˜¯æœ‰æ•ˆçš„ï¼Œè¿™å°†ç¼–è¯‘å¹¶è¿è¡Œï¼Œç»“æœæ˜¯æœªå®šä¹‰çš„ã€‚ç¡®ä¿æ‚¨æ²¡æœ‰è¯•å›¾åœ¨æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆä¸Šè°ƒç”¨é‡è½½æ“ä½œç¬¦[]ã€‚æ­£ç¡®çš„è¯­æ³•åº”è¯¥æ˜¯å…ˆå–æ¶ˆå¯¹æŒ‡é’ˆçš„å¼•ç”¨(ç¡®ä¿ä½¿ç”¨æ‹¬å·ï¼Œå› ä¸ºè¿ç®—ç¬¦[]çš„ä¼˜å…ˆçº§é«˜äºè¿ç®—ç¬¦)ï¼Œ*ç„¶åè°ƒç”¨è¿ç®—ç¬¦[]**:12345678int main()&#123; IntList *list&#123; new IntList&#123;&#125; &#125;; (*list)[2] = 3; // get our IntList object, then call overloaded operator[] delete list; return 0;&#125;å‡½æ•°å‚æ•°å¯ä»¥ä¸æ˜¯æ•´æ•°å¦‚ä¸Šæ‰€è¿°ï¼ŒC++å°†ç”¨æˆ·åœ¨ä¸­æ‹¬å·ä¹‹é—´é”®å…¥çš„å†…å®¹ä½œä¸ºå‚æ•°ä¼ é€’ç»™é‡è½½å‡½æ•°ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªæ•´æ•°å€¼ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸æ˜¯å¿…éœ€çš„â€”â€”äº‹å®ä¸Šï¼Œæ‚¨å¯ä»¥å®šä¹‰é‡è½½è¿ç®—ç¬¦[]å–ä¸€ä¸ªä»»æ„ç±»å‹çš„å€¼ã€‚æ‚¨å¯ä»¥å®šä¹‰é‡è½½çš„è¿ç®—ç¬¦[]æ¥æ¥å—doubleã€std::stringæˆ–å…¶ä»–ä»»ä½•æ‚¨å–œæ¬¢çš„å†…å®¹ã€‚ä¸€ä¸ªè’è°¬ä½†æ˜¯å¯ä»¥è¯´æ˜äº‹å®çš„ä¾‹å­ï¼š12345678910111213141516171819202122232425262728#include &lt;iostream&gt;#include &lt;string&gt; class Stupid&#123;private: public: void operator[] (const std::string&amp; index);&#125;; //é‡è½½è¿ç®—ç¬¦[]æ¥æ‰“å°ä¸€äº›ä¸œè¥¿æ˜¯æ²¡æœ‰æ„ä¹‰çš„//ä½†æ˜¯è¿™æ˜¯æ˜¾ç¤ºå‡½æ•°å‚æ•°å¯ä»¥æ˜¯éæ•´æ•°çš„æœ€ç®€å•çš„æ–¹æ³•void Stupid::operator[] (const std::string&amp; index)&#123; std::cout &lt;&lt; index;&#125; int main()&#123; Stupid stupid&#123;&#125;; stupid[\"Hello, world!\"]; return 0;&#125;/*ç»“æœ*/Hello, world!é‡è½½æ“ä½œç¬¦[]ä»¥è·å–std::stringå‚æ•°ï¼Œåœ¨ç¼–å†™æŸäº›ç±»å‹çš„ç±»æ—¶éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚é‚£äº›ä½¿ç”¨å•è¯ä½œä¸ºç´¢å¼•çš„ç±»ã€‚å°ç»“é€šå¸¸é‡è½½ä¸‹æ ‡è¿ç®—ç¬¦ï¼Œä»¥æä¾›å¯¹ç±»ä¸­åŒ…å«çš„æ•°ç»„(æˆ–å…¶ä»–ç±»ä¼¼ç»“æ„)ä¸­çš„å•ä¸ªå…ƒç´ çš„ç›´æ¥è®¿é—®ã€‚å› ä¸ºå­—ç¬¦ä¸²é€šå¸¸æ˜¯ä½œä¸ºå­—ç¬¦æ•°ç»„å®ç°çš„ï¼Œæ‰€ä»¥æ“ä½œç¬¦[]é€šå¸¸æ˜¯åœ¨å­—ç¬¦ä¸²ç±»ä¸­å®ç°çš„ï¼Œä»¥å…è®¸ç”¨æˆ·è®¿é—®å­—ç¬¦ä¸²çš„å•ä¸ªå­—ç¬¦ã€‚","categories":[],"tags":[]},{"title":"C&C++/æ“ä½œç¬¦é‡è½½","slug":"C&C++/æ“ä½œç¬¦é‡è½½","date":"2020-05-10T00:31:00.633Z","updated":"2020-05-10T00:40:55.733Z","comments":true,"path":"archives/a193c39a.html","link":"","permalink":"https://longlongqin.github.io/archives/a193c39a.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/91-introduction-to-operator-overloading/åœ¨ 7.6 â€“ Function overloadingä¸­ï¼Œæ‚¨å­¦ä¹ äº†å‡½æ•°é‡è½½ï¼Œå®ƒæä¾›äº†ä¸€ç§æœºåˆ¶æ¥åˆ›å»ºå’Œè§£æåŒåçš„å¤šä¸ªå‡½æ•°çš„å‡½æ•°è°ƒç”¨ï¼Œåªè¦æ¯ä¸ªå‡½æ•°æœ‰ä¸€ä¸ªæƒŸä¸€çš„å‡½æ•°åŸå‹ã€‚åœ¨c++ä¸­ï¼Œæ“ä½œç¬¦è¢«å®ç°åŸç†ä¸å‡½æ•°ç›¸ä¼¼ã€‚é€šè¿‡åœ¨æ“ä½œç¬¦å‡½æ•°ä¸Šä½¿ç”¨å‡½æ•°é‡è½½ï¼Œå¯ä»¥å®šä¹‰è‡ªå·±çš„æ“ä½œç¬¦ç‰ˆæœ¬ï¼Œè¿™äº›æ“ä½œç¬¦å¯ä»¥å¤„ç†ä¸åŒçš„æ•°æ®ç±»å‹(åŒ…æ‹¬æ‚¨ç¼–å†™çš„ç±»)ã€‚ä½¿ç”¨å‡½æ•°é‡è½½æ¥é‡è½½æ“ä½œç¬¦ç§°ä¸ºæ“ä½œç¬¦é‡è½½ã€‚å½“è®¡ç®—åŒ…å«è¿ç®—ç¬¦çš„è¡¨è¾¾å¼æ—¶ï¼Œç¼–è¯‘å™¨ä½¿ç”¨ä»¥ä¸‹è§„åˆ™å¦‚æœæ‰€æœ‰æ“ä½œæ•°éƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç¼–è¯‘å™¨å°†è°ƒç”¨ä¸€ä¸ªå†…ç½®ä¾‹ç¨‹(å¦‚æœå­˜åœ¨)ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œç¼–è¯‘å™¨å°†äº§ç”Ÿä¸€ä¸ªç¼–è¯‘å™¨é”™è¯¯ã€‚å¦‚æœæ‰€æœ‰æ“ä½œæ•°æ˜¯ç”¨æˆ·æ•°æ®ç±»å‹(ä¾‹å¦‚ï¼Œæ‚¨çš„ä¸€ä¸ªç±»æˆ–æšä¸¾ç±»å‹)ï¼Œç¼–è¯‘å™¨å°†æŸ¥çœ‹è¯¥ç±»å‹æ˜¯å¦å…·æœ‰å¯è°ƒç”¨çš„åŒ¹é…é‡è½½æ“ä½œç¬¦å‡½æ•°ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œå®ƒå°†å°è¯•å°†ä¸€ä¸ªæˆ–å¤šä¸ªç”¨æˆ·å®šä¹‰çš„ç±»å‹æ“ä½œæ•°è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œä»¥ä¾¿ä½¿ç”¨åŒ¹é…çš„å†…ç½®æ“ä½œç¬¦(é€šè¿‡é‡è½½çš„ç±»å‹è½¬æ¢ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬ç« åé¢ä»‹ç»)ã€‚å¦‚æœå¤±è´¥ï¼Œåˆ™ä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚æ“ä½œç¬¦é‡è½½çš„é™åˆ¶æ˜¯ä»€ä¹ˆ?é¦–å…ˆï¼ŒC++ä¸­å‡ ä¹æ‰€æœ‰ç°æœ‰çš„è¿ç®—ç¬¦éƒ½å¯èƒ½è¢«é‡è½½ã€‚ä¾‹å¤–æƒ…å†µæœ‰:æ¡ä»¶(? :)ã€sizeofã€scope(::)ã€æˆå‘˜é€‰æ‹©å™¨(.)ã€æˆå‘˜æŒ‡é’ˆé€‰æ‹©å™¨(.*)ã€typeidå’Œè½¬æ¢æ“ä½œç¬¦ã€‚å…¶æ¬¡ï¼Œæ‚¨åªèƒ½é‡è½½ç°æœ‰çš„æ“ä½œç¬¦ã€‚ä¸èƒ½åˆ›å»ºæ–°æ“ä½œç¬¦æˆ–é‡å‘½åç°æœ‰æ“ä½œç¬¦ã€‚ä¾‹å¦‚ï¼Œæ‚¨ä¸èƒ½åˆ›å»ºè¿ç®—ç¬¦**æ¥åšæŒ‡æ•°è¿ç®—ã€‚ç¬¬ä¸‰ï¼Œé‡è½½æ“ä½œç¬¦ä¸­çš„è‡³å°‘ä¸€ä¸ªæ“ä½œæ•°å¿…é¡»æ˜¯ç”¨æˆ·å®šä¹‰çš„ç±»å‹ã€‚è¿™æ„å‘³ç€ä¸èƒ½é‡è½½åŠ æ³•è¿ç®—ç¬¦æ¥å¤„ç†ä¸€ä¸ªæ•´æ•°å’Œä¸€ä¸ªåŒç²¾åº¦æ•°ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥é‡è½½plusæ“ä½œç¬¦æ¥å¤„ç†æ•´æ•°å’ŒMystringã€‚ç¬¬å››ï¼Œä¸å¯èƒ½æ›´æ”¹æ“ä½œç¬¦æ”¯æŒçš„æ“ä½œæ•°çš„æ•°é‡ã€‚æœ€åï¼Œæ‰€æœ‰æ“ä½œç¬¦éƒ½ä¿æŒå®ƒä»¬çš„é»˜è®¤ä¼˜å…ˆçº§å’Œç»“åˆæ€§(æ— è®ºå®ƒä»¬ç”¨äºä»€ä¹ˆç”¨é€”)ï¼Œå¹¶ä¸”è¿™æ˜¯ä¸å¯æ›´æ”¹çš„ã€‚","categories":[],"tags":[]},{"title":"C&C++/åŒ¿åå¯¹è±¡","slug":"C&C++/åŒ¿åå¯¹è±¡","date":"2020-05-09T10:29:03.251Z","updated":"2020-05-09T13:36:55.006Z","comments":true,"path":"archives/b2f816aa.html","link":"","permalink":"https://longlongqin.github.io/archives/b2f816aa.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/814-anonymous-objects/åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªä¸´æ—¶å˜é‡ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹æƒ…å†µ:1234567891011121314#include &lt;iostream&gt; int add(int x, int y)&#123; int sum = x + y; return sum;&#125; int main()&#123; std::cout &lt;&lt; add(5, 3); return 0;&#125;åœ¨å‡½æ•°add()ä¸­ï¼Œè¯·æ³¨æ„sumå˜é‡å®é™…ä¸Šä»…ç”¨ä½œä¸´æ—¶å ä½ç¬¦å˜é‡ã€‚å®ƒçš„ä½œç”¨ä¸å¤§â€”â€”ç›¸åï¼Œå®ƒçš„å”¯ä¸€åŠŸèƒ½æ˜¯å°†è¡¨è¾¾å¼çš„ç»“æœè½¬æ¢ä¸ºè¿”å›å€¼ã€‚åŒ¿åå‡½æ•°å®é™…ä¸Šï¼Œæœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•å¯ä»¥ä½¿ç”¨åŒ¿åå¯¹è±¡æ¥ç¼–å†™add()å‡½æ•°ã€‚åŒ¿åå¯¹è±¡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ²¡æœ‰åç§°çš„å€¼ã€‚å› ä¸ºå®ƒä»¬æ²¡æœ‰åç§°ï¼Œæ‰€ä»¥é™¤äº†å®ƒä»¬è¢«åˆ›å»ºçš„åœ°æ–¹ä¹‹å¤–ï¼Œæ²¡æœ‰å…¶ä»–æ–¹æ³•æ¥å¼•ç”¨å®ƒä»¬ã€‚å› æ­¤ï¼Œå®ƒä»¬å…·æœ‰â€œè¡¨è¾¾å¼èŒƒå›´â€ï¼Œè¿™æ„å‘³ç€å®ƒä»¬æ˜¯åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­åˆ›å»ºã€è®¡ç®—å’Œé”€æ¯çš„ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨åŒ¿åå¯¹è±¡é‡å†™çš„add()å‡½æ•°:12345678910111213#include &lt;iostream&gt; int add(int x, int y)&#123; return x + y; // an anonymous object is created to hold and return the result of x + y&#125; int main()&#123; std::cout &lt;&lt; add(5, 3); return 0;&#125;å½“è¡¨è¾¾å¼x + yæ±‚å€¼æ—¶ï¼Œç»“æœè¢«æ”¾åœ¨ä¸€ä¸ªåŒ¿åå¯¹è±¡ä¸­ã€‚ç„¶åï¼Œé€šè¿‡å€¼å°†åŒ¿åå¯¹è±¡çš„å‰¯æœ¬è¿”å›ç»™è°ƒç”¨è€…ï¼Œå¹¶é”€æ¯åŒ¿åå¯¹è±¡ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‡½æ•°ä¸­ä½¿ç”¨å®ƒï¼š123456789void printValue(int value)&#123; std::cout &lt;&lt; value;&#125;int main()&#123; printValue(5 + 3); //åŒ¿åå¯¹è±¡ return 0;&#125;åœ¨æœ¬ä¾‹ä¸­ï¼Œè®¡ç®—è¡¨è¾¾å¼5 + 3ä»¥ç”Ÿæˆç»“æœ8ï¼Œè¯¥ç»“æœæ”¾åœ¨åŒ¿åå¯¹è±¡ä¸­ã€‚ç„¶åå°†è¿™ä¸ªåŒ¿åå¯¹è±¡çš„å‰¯æœ¬ä¼ é€’ç»™printValue()å‡½æ•° (è¯¥å‡½æ•°æ‰“å°å€¼8)ï¼Œç„¶åé”€æ¯è¯¥å¯¹è±¡ã€‚åŒ¿åç±»å¯¹è±¡å°½ç®¡æˆ‘ä»¬å‰é¢çš„ä¾‹å­ä½¿ç”¨äº†å†…ç½®çš„æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ„é€ æˆ‘ä»¬è‡ªå·±çš„ç±»ç±»å‹çš„åŒ¿åå¯¹è±¡ã€‚è¿™æ˜¯é€šè¿‡åˆ›å»ºåƒæ™®é€šå¯¹è±¡ä¸€æ ·çš„å¯¹è±¡æ¥å®Œæˆçš„ï¼Œä½†æ˜¯çœç•¥äº†å˜é‡åã€‚12Cents cents(5); // normal variableCents(7); // anonymous objectåœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒCents(7)å°†åˆ›å»ºä¸€ä¸ªåŒ¿åCentså¯¹è±¡ï¼Œç”¨å€¼7åˆå§‹åŒ–å®ƒï¼Œç„¶åé”€æ¯å®ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™å¯¹æˆ‘ä»¬æ²¡æœ‰ä»€ä¹ˆå¥½å¤„ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå®ƒå¯ä»¥å¾ˆå¥½åœ°ä½¿ç”¨:12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152// main()å‡½æ•°å°†ä¼ é€’ä¸€ä¸ªCentså¯¹è±¡(åä¸ºcents)ç»™å‡½æ•°print()ã€‚#include &lt;iostream&gt; class Cents&#123;private: int m_cents; public: Cents(int cents) &#123; m_cents = cents; &#125; int getCents() const &#123; return m_cents; &#125;&#125;; void print(const Cents &amp;cents)&#123; std::cout &lt;&lt; cents.getCents() &lt;&lt; \" cents\";&#125; int main()&#123; Cents cents(6); print(cents); return 0;&#125;// æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨åŒ¿åå¯¹è±¡æ¥ç®€åŒ–è¿™ä¸ªç¨‹åº:#include &lt;iostream&gt; class Cents&#123;private: int m_cents; public: Cents(int cents) &#123; m_cents = cents; &#125; int getCents() const &#123; return m_cents; &#125;&#125;; void print(const Cents &amp;cents)&#123; std::cout &lt;&lt; cents.getCents() &lt;&lt; \" cents\";&#125; int main()&#123; print(Cents(6)); // â­Note: Now we're passing an anonymous Cents value return 0;&#125;ç»“æœï¼š16 centså°ç»“åœ¨c++ä¸­ï¼ŒåŒ¿åå¯¹è±¡ä¸»è¦ç”¨äºä¼ é€’æˆ–è¿”å›å€¼ï¼Œè€Œä¸éœ€è¦åˆ›å»ºå¤§é‡ä¸´æ—¶å˜é‡ã€‚åŠ¨æ€åˆ†é…çš„å†…å­˜ä¹Ÿæ˜¯åŒ¿åæ‰§è¡Œçš„ (è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒçš„åœ°å€å¿…é¡»åˆ†é…ç»™ä¸€ä¸ªæŒ‡é’ˆï¼Œå¦åˆ™æˆ‘ä»¬å°†æ— æ³•å¼•ç”¨å®ƒ)ã€‚åŒæ ·å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºåŒ¿åå¯¹è±¡å…·æœ‰è¡¨è¾¾å¼ä½œç”¨åŸŸï¼Œæ‰€ä»¥å®ƒä»¬åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚å¦‚æœéœ€è¦åœ¨å¤šä¸ªè¡¨è¾¾å¼ä¸­å¼•ç”¨ä¸€ä¸ªå€¼ï¼Œåº”è¯¥ä½¿ç”¨å‘½åå˜é‡ã€‚æ³¨æ„: ä¸€äº›ç¼–è¯‘å™¨ï¼Œä¾‹å¦‚Visual Studioï¼Œå°†å…è®¸æ‚¨è®¾ç½®å¯¹åŒ¿åå¯¹è±¡çš„éconstå¼•ç”¨ã€‚è¿™æ˜¯éæ ‡å‡†è¡Œä¸ºã€‚","categories":[],"tags":[]},{"title":"C&C++/å‹å…ƒå‡½æ•°ä¸ç±»","slug":"C&C++/å‹å…ƒå‡½æ•°ä¸ç±»","date":"2020-05-09T08:11:49.575Z","updated":"2020-05-09T10:26:14.700Z","comments":true,"path":"archives/e16eef53.html","link":"","permalink":"https://longlongqin.github.io/archives/e16eef53.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/813-friend-functions-and-classes/å‹å…ƒå‡½æ•°å‹å…ƒå‡½æ•°æ˜¯ä¸€ä¸ªå¯ä»¥è®¿é—®ç±»çš„ç§æœ‰æˆå‘˜çš„å‡½æ•°ï¼Œå°±åƒå®ƒæ˜¯è¯¥ç±»çš„æˆå‘˜ä¸€æ ·ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå‹å…ƒå‡½æ•°å°±åƒä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚å‹å…ƒå‡½æ•°å¯ä»¥æ˜¯ä¸€ä¸ªï¼šæ™®é€šå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°ã€‚å£°æ˜ä¸€ä¸ªå‹å…ƒå‡½æ•°ï¼šåªéœ€åœ¨å‡½æ•°åŸå‹å‰ä½¿ç”¨friendå…³é”®å­—å³å¯æˆä¸ºè¯¥ç±»çš„å¥½å‹ã€‚åœ¨ç±»çš„privateè¿˜æ˜¯ public å£°æ˜friendå‡½æ•°å¹¶ä¸é‡è¦ã€‚ä¸€ä¸ªä¾‹å­ï¼š123456789101112131415161718192021222324252627class Accumulator&#123;private: int m_value;public: Accumulator() &#123; m_value = 0; &#125; void add(int value) &#123; m_value += value; &#125; // ä½¿reset()å‡½æ•°æˆä¸ºè¯¥ç±»çš„friendâ­ [å£°æ˜] friend void reset(Accumulator &amp;accumulator);&#125;;//reset()ç°åœ¨æ˜¯Accumulatorç±»çš„ä¸€ä¸ªfriend â­ [å®šä¹‰]void reset(Accumulator &amp;accumulator)&#123; //å¯ä»¥è®¿é—®Accumulatorå¯¹è±¡çš„ç§æœ‰æ•°æ® accumulator.m_value = 0;&#125;int main()&#123; Accumulator acc; acc.add(5); reset(acc); return 0;&#125;å› ä¸ºreset()ä¸æ˜¯Accumulatorç±»çš„æˆå‘˜ï¼Œæ‰€ä»¥reset()é€šå¸¸ä¸èƒ½è®¿é—®Accumulatorçš„ç§æœ‰æˆå‘˜ã€‚ä½†æ˜¯ï¼Œå› ä¸ºAccumulatoræ˜ç¡®åœ°å£°æ˜äº†è¿™ä¸ªreset()å‡½æ•°æ˜¯ç±»çš„æœ‹å‹ï¼Œæ‰€ä»¥reset()å‡½æ•°è¢«èµ‹äºˆäº†å¯¹Accumulatorç§æœ‰æˆå‘˜çš„è®¿é—®æƒã€‚æ³¨æ„ï¼šæˆ‘ä»¬å¿…é¡»ä¼ é€’ä¸€ä¸ªAccumulatorå¯¹è±¡ç»™reset()ã€‚è¿™æ˜¯å› ä¸ºreset()ä¸æ˜¯ä¸€ä¸ªæˆå‘˜å‡½æ•°ã€‚å®ƒæ²¡æœ‰*thisæŒ‡é’ˆï¼Œä¹Ÿæ²¡æœ‰è¦ä½¿ç”¨çš„Accumulatorå¯¹è±¡ï¼Œé™¤éç»™å®šä¸€ä¸ªã€‚åŒä¸€ä¸ªå‡½æ•°å¯æˆä¸ºå¤šä¸ªç±»çš„å‹å…ƒå‡½æ•°ä¸€ä¸ªå‡½æ•°å¯ä»¥åŒæ—¶æ˜¯å¤šä¸ªç±»çš„æœ‹å‹ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸‹é¢çš„ä¾‹å­:123456789101112131415161718192021222324252627282930313233343536373839#include &lt;iostream&gt; class Humidity; //è¿™æ˜¯ä¸€ä¸ªç±»åŸå‹ï¼Œå®ƒå‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬å°†åœ¨å°†æ¥å®šä¹‰ä¸€ä¸ªåä¸ºHumidityçš„ç±»ã€‚ class Temperature&#123;private: int m_temp;public: Temperature(int temp=0) &#123; m_temp = temp; &#125; friend void printWeather(const Temperature &amp;temperature, const Humidity &amp;humidity); //â­&#125;; class Humidity&#123;private: int m_humidity;public: Humidity(int humidity=0) &#123; m_humidity = humidity; &#125; friend void printWeather(const Temperature &amp;temperature, const Humidity &amp;humidity); //â­&#125;; void printWeather(const Temperature &amp;temperature, const Humidity &amp;humidity) //â­&#123; std::cout &lt;&lt; \"The temperature is \" &lt;&lt; temperature.m_temp &lt;&lt; \" and the humidity is \" &lt;&lt; humidity.m_humidity &lt;&lt; '\\n';&#125; int main()&#123; Humidity hum(10); Temperature temp(12); printWeather(temp, hum); return 0;&#125;å‹å…ƒç±»ä¹Ÿå¯ä»¥ä½¿æ•´ä¸ªç±»æˆä¸ºå¦ä¸€ä¸ªç±»çš„friendã€‚è¿™ä½¿å¾—friendç±»çš„æ‰€æœ‰æˆå‘˜éƒ½å¯ä»¥è®¿é—®å¦ä¸€ä¸ªç±»çš„ç§æœ‰æˆå‘˜ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­:1234567891011121314151617181920212223242526272829303132333435363738394041424344#include &lt;iostream&gt; class Storage&#123;private: int m_nValue; double m_dValue;public: Storage(int nValue, double dValue) &#123; m_nValue = nValue; m_dValue = dValue; &#125; // è®© ç±»Display æˆä¸º ç±»Storage çš„friend â­ friend class Display; &#125;; class Display&#123;private: bool m_displayIntFirst; public: Display(bool displayIntFirst) &#123; m_displayIntFirst = displayIntFirst; &#125; void displayItem(const Storage &amp;storage) &#123; if (m_displayIntFirst) std::cout &lt;&lt; storage.m_nValue &lt;&lt; \" \" &lt;&lt; storage.m_dValue &lt;&lt; '\\n'; else // display double first std::cout &lt;&lt; storage.m_dValue &lt;&lt; \" \" &lt;&lt; storage.m_nValue &lt;&lt; '\\n'; &#125;&#125;; int main()&#123; Storage storage(5, 6.7); Display display(false); display.displayItem(storage); return 0;&#125;æ³¨æ„äº‹é¡¹ä¸Šé¢ä¾‹å­ä¸­ï¼Œè™½ç„¶ Displayç±» æ˜¯ Storageç±» çš„friendï¼Œä½†æ˜¯Displayæ²¡æœ‰ç›´æ¥è®¿é—®Storageå¯¹è±¡çš„*thisæŒ‡é’ˆã€‚è™½ç„¶ Displayç±» æ˜¯ Storageç±» çš„friendï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ Storageç±» ä¹Ÿæ˜¯æ˜¯ Displayç±» çš„friendã€‚ï¼ˆå¦‚æœæƒ³è®©è¿™ä¸¤ä¸ªç±»äº’ä¸ºfriendï¼Œä½ å¿…é¡»åœ¨å„è‡ªç±»ä¸­å£°æ˜å‡ºæ¥ã€‚ï¼‰å¦‚æœ ç±»A æ˜¯ ç±»B çš„friendï¼Œè€Œ ç±»Bæ˜¯ ç±»C çš„friendï¼Œé‚£å¹¶ä¸æ„å‘³ç€ ç±»Aæ˜¯ ç±»C çš„friendã€‚å‹å…ƒæˆå‘˜å‡½æ•°æ‚¨å¯ä»¥ä½¿å•ä¸ªæˆå‘˜å‡½æ•°æˆä¸ºfriendï¼Œè€Œä¸æ˜¯ä½¿æ•´ä¸ªç±»æˆä¸ºfriendã€‚é™¤äº†ä½¿ç”¨åŒ…å«className::å‰ç¼€çš„æˆå‘˜å‡½æ•°å(ä¾‹å¦‚Display::displayItem)ä¹‹å¤–ï¼Œè¿™ä¸å°†æ™®é€šå‡½æ•°ä½œä¸ºfriendç±»ä¼¼ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„ï¼šä¸ºäº†ä½¿æˆå‘˜å‡½æ•°æˆä¸ºfriendï¼Œç¼–è¯‘å™¨å¿…é¡»çœ‹åˆ°friendæˆå‘˜å‡½æ•°æ‰€åœ¨ç±»çš„å®Œæ•´å®šä¹‰(è€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªå‘å‰å£°æ˜)ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950#include &lt;iostream&gt; class Storage; // æå‰å£°æ˜ class Storage class Display&#123;private: bool m_displayIntFirst; public: Display(bool displayIntFirst) &#123; m_displayIntFirst = displayIntFirst; &#125; void displayItem(const Storage &amp;storage); // æ­¤å£°æ˜è¡Œéœ€è¦å‰é¢çš„ æå‰å£°æ˜&#125;; class Storage //ç±»Storage çš„å®Œæ•´å®šä¹‰&#123;private: int m_nValue; double m_dValue;public: Storage(int nValue, double dValue) &#123; m_nValue = nValue; m_dValue = dValue; &#125; //ä½¿Display::displayItemæˆå‘˜å‡½æ•°æˆä¸º //Storageç±» çš„friend(éœ€è¦æŸ¥çœ‹ç±»Displayçš„å®Œæ•´å£°æ˜ï¼Œå¦‚ä¸‹æ‰€ç¤º) friend void Display::displayItem(const Storage&amp; storage); //å£°æ˜&#125;; //ç°åœ¨æˆ‘ä»¬å¯ä»¥å®šä¹‰Display::displayItemï¼Œå®ƒéœ€è¦æŸ¥çœ‹ ç±»Storage çš„å®Œæ•´å®šä¹‰void Display::displayItem(const Storage &amp;storage) //å®šä¹‰&#123; if (m_displayIntFirst) std::cout &lt;&lt; storage.m_nValue &lt;&lt; \" \" &lt;&lt; storage.m_dValue &lt;&lt; '\\n'; else // display double first std::cout &lt;&lt; storage.m_dValue &lt;&lt; \" \" &lt;&lt; storage.m_nValue &lt;&lt; '\\n';&#125; int main()&#123; Storage storage(5, 6.7); Display display(false); display.displayItem(storage); return 0;&#125;ç°åœ¨ä¸€åˆ‡éƒ½ç¼–è¯‘æ­£ç¡®:1ã€æå‰å£°æ˜ ç±»Storage è¶³ä»¥æ»¡è¶³ Displayç±»ä¸­ Display::displayItem()çš„å£°æ˜ï¼›2ã€Displayç±» çš„å®Œæ•´çš„å®šä¹‰ æ»¡è¶³ Display::displayItem() ä½œä¸ºStorage çš„friendï¼›3ã€ç±»Storage çš„å®Œæ•´å®šä¹‰ æ»¡è¶³ æˆå‘˜å‡½æ•°Display::displayItem() çš„å®šä¹‰ã€‚å¦‚æœè¿™æœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œè¯·å‚é˜…ä¸Šé¢ç¨‹åºä¸­çš„æ³¨é‡Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šAç±» çš„æˆå‘˜å‡½æ•°fun è¦æˆä¸º Bç±» çš„å‹å…ƒå‡½æ•°ï¼šåˆ™ï¼š1ã€Aç±»çš„å®šä¹‰ å¿…é¡»å‡ºç°åœ¨ Bç±»çš„å®šä¹‰ä¹‹å‰ ä¹‹å‰ï¼›å°†ç‰¹å®šæˆå‘˜å‡½æ•°ä½œä¸ºæœ‹å‹éœ€è¦é¦–å…ˆçœ‹åˆ°æˆå‘˜å‡½æ•°æ‰€åœ¨çš„ç±»çš„å®Œæ•´å®šä¹‰2ã€æˆ‘ä»¬éœ€è¦å°† å‹å…ƒå‡½æ•°funçš„å£°æ˜ ä¸ å®šä¹‰ åˆ†å¼€è¿›è¡Œã€‚å°ç»“å‹å…ƒå‡½æ•° æˆ– å‹å…ƒç±» æ˜¯ä¸€ä¸ªå‡½æ•° æˆ– ç±»ï¼Œå®ƒä»¬å¯ä»¥è®¿é—®å¦ä¸€ä¸ªç±»çš„ç§æœ‰æˆå‘˜ï¼Œå°±åƒå®ƒæ˜¯è¿™ä¸ªç±»çš„æˆå‘˜ä¸€æ ·ã€‚è¯·æ³¨æ„ï¼Œå°†ç‰¹å®šæˆå‘˜å‡½æ•°ä½œä¸ºæœ‹å‹éœ€è¦é¦–å…ˆçœ‹åˆ°æˆå‘˜å‡½æ•°çš„ç±»çš„å®Œæ•´å®šä¹‰ã€‚","categories":[],"tags":[]},{"title":"C&C++/é™æ€æˆå‘˜å˜é‡","slug":"C&C++/é™æ€æˆå‘˜å˜é‡","date":"2020-05-09T03:11:47.442Z","updated":"2020-05-09T08:08:36.511Z","comments":true,"path":"archives/bab62969.html","link":"","permalink":"https://longlongqin.github.io/archives/bab62969.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/812-static-member-functions/å›é¡¾å…³é”®å­—staticåœ¨file scope and the static keywordä¸­ï¼Œæ‚¨äº†è§£åˆ°é™æ€å˜é‡ä¿ç•™å®ƒä»¬çš„å€¼ï¼Œå³ä½¿åœ¨å®ƒä»¬è¶…å‡ºä½œç”¨åŸŸä¹‹åä¹Ÿä¸ä¼šè¢«é”€æ¯ã€‚ä¾‹å¦‚:123456789101112131415161718192021#include &lt;iostream&gt; int generateID()&#123; static int s_id&#123; 0 &#125;; return ++s_id;&#125; int main()&#123; std::cout &lt;&lt; generateID() &lt;&lt; '\\n'; std::cout &lt;&lt; generateID() &lt;&lt; '\\n'; std::cout &lt;&lt; generateID() &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/123å½“åº”ç”¨äºå…¨å±€å˜é‡æ—¶ï¼Œstaticå…³é”®å­—è¿˜æœ‰å¦ä¸€ä¸ªå«ä¹‰â€”â€”å®ƒä¸ºå…¨å±€å˜é‡æä¾›äº†å†…éƒ¨é“¾æ¥ (è¿™é™åˆ¶äº†å®ƒä»¬åœ¨å®šä¹‰å®ƒä»¬çš„æ–‡ä»¶ä¹‹å¤–è¢«çœ‹åˆ°/ä½¿ç”¨)ã€‚å› ä¸ºé€šå¸¸ä¼šé¿å…å…¨å±€å˜é‡ï¼Œæ‰€ä»¥é™æ€å…³é”®å­—åœ¨è¿™ç§åŠŸèƒ½ä¸­ä¸ç»å¸¸ä½¿ç”¨ã€‚é™æ€æˆå‘˜å˜é‡c++åœ¨åº”ç”¨äºç±»æ—¶å¼•å…¥äº†staticå…³é”®å­—çš„å¦å¤–ä¸¤ç§ç”¨é€”:é™æ€æˆå‘˜å˜é‡å’Œé™æ€æˆå‘˜å‡½æ•°ã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™äº›ç”¨é€”ç›¸å½“ç®€å•ã€‚æœ¬èŠ‚è¯¾æˆ‘ä»¬å°†è®¨è®ºé™æ€æˆå‘˜å˜é‡ï¼Œä¸‹èŠ‚è¯¾æˆ‘ä»¬å°†è®¨è®ºé™æ€æˆå‘˜å‡½æ•°ã€‚å¯ä»¥ä½¿ç”¨staticå…³é”®å­—ä½¿ç±»çš„æˆå‘˜å˜é‡å˜ä¸ºé™æ€ã€‚ä¸æ™®é€šæˆå‘˜å˜é‡ä¸åŒï¼Œé™æ€æˆå‘˜å˜é‡ç”±ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«ã€‚å¦‚ï¼š1234567891011121314151617181920212223class Something&#123;public: static int s_value; //â­&#125;; int Something::s_value&#123; 1 &#125;; int main()&#123; Something first; Something second; first.s_value = 2; std::cout &lt;&lt; first.s_value &lt;&lt; '\\n'; std::cout &lt;&lt; second.s_value &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/22é™æ€æˆå‘˜ä¸ä¸ç±»å¯¹è±¡ç›¸å…³è”å°½ç®¡æ‚¨å¯ä»¥é€šè¿‡ç±»çš„å¯¹è±¡è®¿é—®é™æ€æˆå‘˜ (å¦‚ä¸Šé¢ä¾‹å­ä¸­first.s_valueå’Œsecond.s_valueï¼‰ã€‚ä½†æ˜¯ï¼Œå³ä½¿æ²¡æœ‰å®ä¾‹åŒ–ç±»çš„å¯¹è±¡ï¼Œé™æ€æˆå‘˜ä»ç„¶å­˜åœ¨! å°±åƒå…¨å±€å˜é‡ä¸€æ ·ï¼Œå®ƒä»¬åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºï¼Œåœ¨ç¨‹åºç»“æŸæ—¶é”€æ¯ã€‚å› æ­¤ï¼Œæœ€å¥½è®¤ä¸ºé™æ€æˆå‘˜å±äºç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯ç±»çš„å¯¹è±¡ã€‚å› ä¸ºs_valueç‹¬ç«‹äºä»»ä½•ç±»å¯¹è±¡è€Œå­˜åœ¨ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ç±»åå’ŒèŒƒå›´è§£ææ“ä½œç¬¦(åœ¨æœ¬ä¾‹ä¸­æ˜¯Something::s_value)ç›´æ¥è®¿é—®å®ƒ:1234567891011121314151617181920#include &lt;iostream&gt;#include &lt;string&gt;class Something&#123;public: static int s_value; //å£°æ˜é™æ€æˆå‘˜å˜é‡&#125;;int Something::s_value&#123; 1 &#125;; //å®šä¹‰é™æ€æˆå‘˜å˜é‡ (åœ¨ä¸‹é¢ä¼šè®¨è®º)int main()&#123; //æ³¨æ„: æˆ‘ä»¬æ²¡æœ‰å®ä¾‹åŒ–ä»»ä½•ç±»å‹çš„å¯¹è±¡ Something::s_value = 2; std::cout &lt;&lt; Something::s_value; return 0;&#125;åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œs_valueæ˜¯é€šè¿‡ç±»åå¼•ç”¨çš„ï¼Œè€Œä¸æ˜¯é€šè¿‡å¯¹è±¡å¼•ç”¨çš„ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬ç”šè‡³è¿˜æ²¡æœ‰å®ä¾‹åŒ–ç±»å‹ä¸ºSomethingçš„å¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶èƒ½å¤Ÿè®¿é—®å’Œä½¿ç”¨Something::s_valueã€‚è¿™æ˜¯è®¿é—®é™æ€æˆå‘˜çš„é¦–é€‰æ–¹æ³•ã€‚å®šä¹‰å’Œåˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªç±»ä¸­å£°æ˜ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡æ—¶ï¼Œæˆ‘ä»¬æ˜¯åœ¨å‘Šè¯‰ç¼–è¯‘å™¨ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡çš„å­˜åœ¨ï¼Œè€Œä¸æ˜¯å®é™…å®šä¹‰å®ƒ(å¾ˆåƒä¸€ä¸ªå‘å‰å£°æ˜)ã€‚å› ä¸ºé™æ€æˆå‘˜å˜é‡ä¸æ˜¯å•ä¸ªç±»å¯¹è±¡çš„ä¸€éƒ¨åˆ†(å®ƒä»¬ä¸å…¨å±€å˜é‡çš„å¤„ç†æ–¹å¼ç±»ä¼¼ï¼Œå¹¶åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆå§‹åŒ–)ï¼Œæ‰€ä»¥å¿…é¡»åœ¨å…¨å±€èŒƒå›´ï¼ˆç±»å¤–éƒ¨ï¼‰å†…æ˜¾å¼åœ°å®šä¹‰é™æ€æˆå‘˜ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ˜¯è¿™æ ·åšçš„:int Something::s_value{ 1 }; // defines the static member variableè¿™ä¸€è¡Œæœ‰ä¸¤ä¸ªç›®çš„:å®ƒå®ä¾‹åŒ–é™æ€æˆå‘˜å˜é‡(å°±åƒä¸€ä¸ªå…¨å±€å˜é‡)ï¼Œå¹¶é€‰æ‹©æ€§åœ°åˆå§‹åŒ–å®ƒã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬æä¾›åˆå§‹å€¼1ã€‚å¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼è®¾å®šé¡¹ï¼Œc++ä¼šå°†å€¼åˆå§‹åŒ–ä¸º0ã€‚æ³¨æ„ï¼Œè¿™ä¸ªé™æ€æˆå‘˜å®šä¹‰ä¸å—è®¿é—®æ§åˆ¶çš„çº¦æŸ: å³ä½¿åœ¨ç±»ä¸­å£°æ˜ä¸ºprivate(æˆ–protected)ï¼Œä¹Ÿå¯ä»¥å®šä¹‰å’Œåˆå§‹åŒ–å€¼ã€‚å¦‚æœç±»æ˜¯åœ¨.hæ–‡ä»¶ä¸­å®šä¹‰çš„ï¼Œé‚£ä¹ˆé™æ€æˆå‘˜å®šä¹‰é€šå¸¸æ”¾åœ¨ç±»çš„ç›¸å…³ä»£ç æ–‡ä»¶ä¸­(ä¾‹å¦‚Something.cpp)ã€‚å¦‚æœç±»æ˜¯åœ¨.cppæ–‡ä»¶ä¸­å®šä¹‰çš„ï¼Œé™æ€æˆå‘˜å®šä¹‰é€šå¸¸ç›´æ¥æ”¾åœ¨ç±»çš„ä¸‹é¢ã€‚ä¸è¦å°†é™æ€æˆå‘˜å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶ä¸­(å¾ˆåƒå…¨å±€å˜é‡ï¼Œå¦‚æœè¯¥å¤´æ–‡ä»¶è¢«åŒ…å«å¤šæ¬¡ï¼Œæ‚¨å°†å¾—åˆ°å¤šä¸ªå®šä¹‰ï¼Œè¿™å°†å¯¼è‡´ç¼–è¯‘é”™è¯¯)ã€‚é™æ€æˆå‘˜å˜é‡çš„å†…è”åˆå§‹åŒ–ä¸Šé¢æœ‰ä¸€äº›æ·å¾„ã€‚ä¸‹é¢æƒ…å†µï¼Œé™æ€æˆå‘˜å¯ä»¥ç›´æ¥åœ¨ ç±»å®šä¹‰ä¸­ è¢«åˆå§‹åŒ–ï¼šç¬¬ä¸€ï¼Œå½“é™æ€æˆå‘˜æ˜¯const æ•´å‹ (å°±åŒ…æ‹¬charå’Œbool) æˆ– const enumæ—¶ï¼š12345class Whatever&#123;public: static const int s_value &#123;4&#125;; //é™æ€const intå¯ä»¥ç›´æ¥å£°æ˜å’Œåˆå§‹åŒ–&#125;ç¬¬äºŒï¼Œé™æ€çš„constexpræˆå‘˜ å¯ä»¥åœ¨ç±»å®šä¹‰ä¸­åˆå§‹åŒ–:12345678#include &lt;array&gt;class Whatever&#123;public: static constexpr double s_value &#123;2.2&#125;; static constexpr std::array&lt;int, 3&gt; s_array&#123; 1, 2, 3 &#125;; &#125;é™æ€æˆå‘˜å‡½æ•°åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/812-static-member-functions/åœ¨ 8.11 â€“ Static member variablesä¸­ï¼Œæ‚¨äº†è§£åˆ°é™æ€æˆå‘˜å˜é‡æ˜¯å±äºç±»çš„æˆå‘˜å˜é‡ï¼Œè€Œä¸æ˜¯ç±»çš„å¯¹è±¡ã€‚å¦‚æœé™æ€æˆå‘˜å˜é‡æ˜¯å…¬å…±çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»åå’ŒèŒƒå›´è§£ææ“ä½œç¬¦ç›´æ¥è®¿é—®å®ƒä»¬ã€‚ä½†æ˜¯å¦‚æœé™æ€æˆå‘˜å˜é‡æ˜¯ç§æœ‰çš„å‘¢ï¼Ÿè€ƒè™‘ä¸‹é¢çš„ä¾‹å­:12345678910111213class Something&#123;private: static int s_value; &#125;; int Something::s_value&#123; 1 &#125;; //åˆå§‹åŒ–å™¨ï¼Œè¿™æ˜¯å¯ä»¥çš„ï¼Œå³ä½¿s_valueæ˜¯ç§æœ‰çš„ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå®šä¹‰ int main()&#123; // how do we access Something::s_value since it is private?&#125;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä»main()è®¿é—®Something::s_valueï¼Œå› ä¸ºå®ƒæ˜¯ç§æœ‰çš„ã€‚é€šå¸¸æˆ‘ä»¬é€šè¿‡å…¬å…±æˆå‘˜å‡½æ•°è®¿é—®ç§æœ‰æˆå‘˜ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ™®é€šçš„å…¬å…±æˆå‘˜å‡½æ•°æ¥è®¿é—®s_valueï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªç±»ç±»å‹çš„å¯¹è±¡æ¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°! æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è®©å‡½æ•°ä¿æŒé™æ€ã€‚ä¸é™æ€æˆå‘˜å˜é‡ä¸€æ ·ï¼Œé™æ€æˆå‘˜å‡½æ•°ä¸é™„åŠ åˆ°ä»»ä½•ç‰¹å®šå¯¹è±¡ã€‚ä¸‹é¢æ˜¯ä¸Šé¢é™æ€æˆå‘˜å‡½æ•°è®¿é—®å™¨çš„ä¾‹å­:1234567891011121314class Something&#123;private: static int s_value;public: static int getValue() &#123; return s_value; &#125; // é™æ€æˆå‘˜å‡½æ•°&#125;; int Something::s_value&#123; 1 &#125;; // initializer int main()&#123; std::cout &lt;&lt; Something::getValue() &lt;&lt; '\\n'; //â­&#125;å› ä¸ºé™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰é™„åŠ åˆ°ç‰¹å®šçš„å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ç±»åå’ŒèŒƒå›´è§£ææ“ä½œç¬¦(::)ç›´æ¥è°ƒç”¨å®ƒä»¬ã€‚ä¸é™æ€æˆå‘˜å˜é‡ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç±» ç±»å‹çš„å¯¹è±¡è°ƒç”¨å®ƒä»¬ï¼Œä½†ä¸å»ºè®®è¿™æ ·åšã€‚é™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰*thisæŒ‡é’ˆé™æ€æˆå‘˜å‡½æ•°æœ‰ä¸¤ä¸ªæœ‰è¶£çš„ç‰¹æ€§å€¼å¾—æ³¨æ„ã€‚é¦–å…ˆï¼Œå› ä¸ºé™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰é™„åŠ åˆ°å¯¹è±¡ä¸Šï¼Œæ‰€ä»¥å®ƒä»¬æ²¡æœ‰thisæŒ‡é’ˆ! â€”â€”thisæŒ‡é’ˆæ€»æ˜¯æŒ‡å‘æˆå‘˜å‡½æ•°æ­£åœ¨å¤„ç†çš„å¯¹è±¡ã€‚é™æ€æˆå‘˜å‡½æ•°ä¸å¤„ç†å¯¹è±¡ï¼Œå› æ­¤ä¸éœ€è¦æ­¤æŒ‡é’ˆã€‚å…¶æ¬¡ï¼Œé™æ€æˆå‘˜å‡½æ•°å¯ä»¥ç›´æ¥è®¿é—®å…¶ä»–é™æ€æˆå‘˜ (å˜é‡æˆ–å‡½æ•°)ï¼Œä½†ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜ã€‚â€”â€”è¿™æ˜¯å› ä¸ºéé™æ€æˆå‘˜å¿…é¡»å±äºä¸€ä¸ªç±»å¯¹è±¡ï¼Œè€Œé™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰å¯ä»¥ä½¿ç”¨çš„ç±»å¯¹è±¡!é™æ€æˆå‘˜å‡½æ•°ä¹Ÿå¯ä»¥åœ¨ç±»å£°æ˜ä¹‹å¤–å®šä¹‰é™æ€æˆå‘˜å‡½æ•°ä¹Ÿå¯ä»¥åœ¨ç±»å£°æ˜ä¹‹å¤–å®šä¹‰ã€‚è¿™ä¸æ™®é€šæˆå‘˜å‡½æ•°çš„å·¥ä½œæ–¹å¼ç›¸åŒã€‚123456789101112131415161718192021222324252627class IDGenerator&#123;private: static int s_nextID; // è¿™æ˜¯ä¸€ä¸ªé™æ€æˆå‘˜çš„å£°æ˜ public: static int getNextID(); // è¿™æ˜¯ä¸€ä¸ªé™æ€å‡½æ•°çš„å£°æ˜&#125;;// ä¸‹é¢æ˜¯ç±»å¤–éƒ¨çš„ é™æ€æˆå‘˜çš„å®šä¹‰ã€‚æ³¨æ„ï¼Œ**åœ¨è¿™é‡Œä¸éœ€è¦ä½¿ç”¨staticå…³é”®å­—**ã€‚int IDGenerator::s_nextID&#123; 1 &#125;;int IDGenerator::getNextID() &#123; return s_nextID++; &#125;int mian()&#123; for (int count&#123; 0 &#125;; count &lt; 5; ++count) std::cout &lt;&lt; \"The next ID is: \" &lt;&lt; IDGenerator::getNextID() &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/The next ID is: 1The next ID is: 2The next ID is: 3The next ID is: 4The next ID is: 5æ³¨æ„ï¼Œå› ä¸ºè¿™ä¸ªç±»ä¸­çš„æ‰€æœ‰æ•°æ®å’Œå‡½æ•°éƒ½æ˜¯é™æ€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦å®ä¾‹åŒ–è¿™ä¸ªç±»çš„å¯¹è±¡æ¥ä½¿ç”¨å®ƒçš„åŠŸèƒ½! è¯¥ç±»åˆ©ç”¨ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡æ¥ä¿å­˜ä¸‹ä¸€ä¸ªè¦åˆ†é…çš„IDçš„å€¼ï¼Œå¹¶æä¾›ä¸€ä¸ªé™æ€æˆå‘˜å‡½æ•°æ¥è¿”å›è¯¥IDå¹¶å¯¹å…¶è¿›è¡Œé€’å¢ã€‚c++ä¸æ”¯æŒé™æ€æ„é€ å‡½æ•°å¦‚æœæ‚¨å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–æ™®é€šæˆå‘˜å˜é‡ï¼Œé‚£ä¹ˆé€šè¿‡æ‰©å±•ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿé€šè¿‡é™æ€æ„é€ å‡½æ•°åˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡ï¼Œè¿™æ˜¯æœ‰æ„ä¹‰çš„ã€‚å°½ç®¡ä¸€äº›ç°ä»£è¯­è¨€ç¡®å®æ”¯æŒé™æ€æ„é€ å‡½æ•°ï¼Œä½†é—æ†¾çš„æ˜¯c++ä¸æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚å¦‚æœå¯ä»¥ç›´æ¥åˆå§‹åŒ–é™æ€å˜é‡ï¼Œåˆ™ä¸éœ€è¦æ„é€ å‡½æ•°: æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å®šä¹‰ç‚¹åˆå§‹åŒ–é™æ€æˆå‘˜å˜é‡(å³ä½¿å®ƒæ˜¯ç§æœ‰çš„)ã€‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„IDGeneratorç¤ºä¾‹ä¸­æ‰§è¡Œæ­¤æ“ä½œã€‚è¿™æ˜¯å¦ä¸€ä¸ªä¾‹å­:1234567class MyClass&#123;public: static std::vector&lt;char&gt; s_mychars;&#125;; std::vector&lt;char&gt; MyClass::s_mychars&#123; 'a', 'e', 'i', 'o', 'u' &#125;; // åœ¨å®šä¹‰ç‚¹åˆå§‹åŒ–é™æ€å˜é‡å¦‚æœåˆå§‹åŒ– é™æ€æˆå‘˜å˜é‡ éœ€è¦æ‰§è¡Œä»£ç (ä¾‹å¦‚ï¼Œå¾ªç¯)ï¼Œé‚£ä¹ˆæœ‰è®¸å¤šä¸åŒçš„ã€æœ‰äº›ç¬¨æ‹™çš„æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ä¸€ç§å¤„ç†æ‰€æœ‰å˜é‡çš„æ–¹æ³•ï¼Œä¸ç®¡æ˜¯å¦æ˜¯é™æ€çš„ï¼Œéƒ½æ˜¯ä½¿ç”¨ä¸€ä¸ªlambdaå¹¶ç«‹å³è°ƒç”¨å®ƒã€‚123456789101112131415161718class MyClass&#123;private: static std::vector&lt;char&gt; s_mychars;&#125;;std::vector&lt;char&gt; Myclass::s_mychars&#123; []&#123; // åœ¨lambdaå†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥å£°æ˜å¦ä¸€ä¸ªå‘é‡å¹¶ä½¿ç”¨å¾ªç¯ã€‚ std::vector&lt;char&gt; v&#123;&#125;; for (char ch&#123; 'a' &#125;; ch &lt;= 'z'; ++ch) &#123; v.push_back(ch); &#125; return v; &#125;() // é©¬ä¸Šè°ƒç”¨lambdaä½¿ç”¨é™æ€æˆå‘˜è¦å°å¿ƒä½¿ç”¨æ‰€æœ‰æˆå‘˜éƒ½æ˜¯é™æ€çš„ç±»æ—¶è¦å°å¿ƒã€‚å°½ç®¡è¿™ç§â€œçº¯é™æ€ç±»â€(ä¹Ÿç§°ä¸ºâ€œå•çŠ¶æ€â€)å¯èƒ½å¾ˆæœ‰ç”¨ï¼Œä½†å®ƒä»¬ä¹Ÿæœ‰ä¸€äº›æ½œåœ¨çš„ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œå› ä¸ºæ‰€æœ‰é™æ€æˆå‘˜åªå®ä¾‹åŒ–ä¸€æ¬¡ï¼Œæ‰€ä»¥ä¸å¯èƒ½æœ‰ä¸€ä¸ªçº¯é™æ€ç±»çš„å¤šä¸ªå‰¯æœ¬ (åœ¨ ä¸å…‹éš†ç±»å¹¶é‡å‘½åå®ƒçš„æƒ…å†µä¸‹)ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨éœ€è¦ä¸¤ä¸ªç‹¬ç«‹çš„IDGeneratorå¯¹è±¡ï¼Œè¿™å¯¹äºå•ä¸ªçº¯é™æ€ç±»æ¥è¯´æ˜¯ä¸å¯èƒ½çš„ã€‚ç¬¬äºŒï¼Œåœ¨å…³äºå…¨å±€å˜é‡çš„è¯¾ç¨‹ä¸­ï¼Œæ‚¨äº†è§£åˆ°å…¨å±€å˜é‡æ˜¯å±é™©çš„ï¼Œå› ä¸ºä»»ä½•ä¸€æ®µä»£ç éƒ½å¯èƒ½æ”¹å˜å…¨å±€å˜é‡çš„å€¼ï¼Œå¹¶æœ€ç»ˆç ´åå¦ä¸€æ®µçœ‹èµ·æ¥ä¸ç›¸å…³çš„ä»£ç ã€‚å¯¹äºçº¯é™æ€ç±»ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å› ä¸ºæ‰€æœ‰æˆå‘˜éƒ½å±äºç±»(è€Œä¸æ˜¯ç±»çš„å¯¹è±¡)ï¼Œè€Œä¸”ç±»å£°æ˜é€šå¸¸å…·æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥çº¯é™æ€ç±»æœ¬è´¨ä¸Šç›¸å½“äº åœ¨å…¨å±€å¯è®¿é—®çš„å‘½åç©ºé—´ä¸­å£°æ˜å‡½æ•°å’Œå…¨å±€å˜é‡ï¼Œå…·æœ‰å…¨å±€å˜é‡æ‰€å…·æœ‰çš„æ‰€æœ‰å¿…éœ€çš„ç¼ºç‚¹ã€‚","categories":[],"tags":[]},{"title":"C&C++/å¸¸é‡ç±»å¯¹è±¡åŠæˆå‘˜å‡½æ•°","slug":"C&C++/å¸¸é‡ç±»å¯¹è±¡åŠæˆå‘˜å‡½æ•°","date":"2020-05-08T16:22:50.511Z","updated":"2020-05-09T03:10:03.003Z","comments":true,"path":"archives/156886df.html","link":"","permalink":"https://longlongqin.github.io/archives/156886df.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/810-const-class-objects-and-member-functions/åœ¨ 4.13 â€“ Const, constexpr, and symbolic constantsä¸­ï¼Œæ‚¨å­¦ä¹ äº†åŸºæœ¬æ•°æ®ç±»å‹(int, double, charï¼Œç­‰ç­‰)å¯ä»¥é€šè¿‡constå…³é”®å­—å˜ä¸ºé™æ€ï¼Œå¹¶ä¸”æ‰€æœ‰Constå˜é‡å¿…é¡»åœ¨åˆ›å»ºæ—¶åˆå§‹åŒ–ã€‚åœ¨conståŸºæœ¬æ•°æ®ç±»å‹çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡å¤åˆ¶ã€ç›´æ¥æˆ–ç»Ÿä¸€åˆå§‹åŒ–æ¥è¿›è¡Œåˆå§‹åŒ–:123const int value1 = 5; // copy initializationconst int value2(7); // direct initializationconst int value3 &#123; 9 &#125;; // uniform initialization (C++11)å¸¸é‡ç±»ç±»ä¼¼åœ°ï¼Œå®ä¾‹åŒ–çš„ç±»å¯¹è±¡ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨constå…³é”®å­— æ¥ç”Ÿæˆconstã€‚åˆå§‹åŒ–æ˜¯é€šè¿‡ç±»æ„é€ å‡½æ•°å®Œæˆçš„:123const Date date1; // initialize using default constructorconst Date date2(2020, 10, 16); // initialize using parameterized constructorconst Date date3 &#123; 2020, 10, 16 &#125;; // initialize using parameterized constructor (C++11)ä¸€æ—¦é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–äº†constç±»å¯¹è±¡ï¼Œä»»ä½•ä¿®æ”¹å¯¹è±¡æˆå‘˜å˜é‡çš„å°è¯•éƒ½æ˜¯ä¸å…è®¸çš„ï¼Œå› ä¸ºè¿™ä¼šè¿åå¯¹è±¡çš„constå±æ€§ã€‚â€œä¿®æ”¹â€æ—¢åŒ…æ‹¬ç›´æ¥æ›´æ”¹æˆå‘˜å˜é‡(å¦‚æœå®ƒä»¬æ˜¯å…¬å…±çš„)ï¼Œä¹ŸåŒ…æ‹¬è°ƒç”¨è®¾ç½®æˆå‘˜å˜é‡å€¼çš„æˆå‘˜å‡½æ•°ã€‚å¦‚ï¼š1234567891011121314151617181920class Something&#123;public: int m_value; Something(): m_value(0) &#123; &#125; void setValue(int value) &#123; m_value = value; &#125; int getValue() &#123; return m_value ; &#125;&#125;; int main()&#123; const Something something; // calls default constructor something.m_value = 5; //âœ– compiler error: violates const something.setValue(5); //âœ– compiler error: violates const return 0;&#125;å¸¸é‡æˆå‘˜å‡½æ•°constç±»å¯¹è±¡åªèƒ½æ˜¾å¼åœ°è°ƒç”¨constæˆå‘˜å‡½æ•°è¯·çœ‹ä¸‹é¢çš„è¯­å¥ï¼š1std::cout &lt;&lt; something.getValue();ä¹Ÿè®¸ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œè¿™ä¹Ÿä¼šå¯¼è‡´ä¸€ä¸ªç¼–è¯‘é”™è¯¯ï¼Œå³ä½¿getValue()ä¸åšä»»ä½•æ”¹å˜æˆå‘˜å˜é‡çš„äº‹æƒ…!ç»“æœæ˜¯ï¼Œconstç±»å¯¹è±¡åªèƒ½æ˜¾å¼åœ°è°ƒç”¨constæˆå‘˜å‡½æ•°ï¼Œè€ŒgetValue()æ²¡æœ‰è¢«æ ‡è®°ä¸ºconstæˆå‘˜å‡½æ•°ã€‚ä¹¦å†™æ ¼å¼constæˆå‘˜å‡½æ•°æ˜¯ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œå®ƒä¿è¯ä¸ä¼šï¼š ä¿®æ”¹å¯¹è±¡æˆ– è°ƒç”¨ä»»ä½•éconstæˆå‘˜å‡½æ•°(å› ä¸ºå®ƒä»¬å¯èƒ½ä¿®æ”¹å¯¹è±¡)ã€‚å¸¸é‡æˆå‘˜å‡½æ•° åœ¨ç±»å®šä¹‰ä¹‹ä¸­ å®šä¹‰è¦ä½¿getValue()æˆä¸ºconstæˆå‘˜å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€å°†constå…³é”®å­—æ·»åŠ åˆ°å‡½æ•°åŸå‹ä¸­ï¼Œåœ¨å‚æ•°åˆ—è¡¨ä¹‹åï¼Œä½†åœ¨å‡½æ•°ä½“ä¹‹å‰:12345678910111213class Something&#123;public: int m_value; Something(): m_value(0) &#123; &#125; void resetValue() &#123; m_value = 0; &#125; void setValue(int value) &#123; m_value = value; &#125; int getValue() const &#123;return m_value;&#125; //â­æ³¨æ„:constå…³é”®å­—æ·»åŠ åœ¨å‚æ•°åˆ—è¡¨ä¹‹åï¼Œä½†æ˜¯åœ¨å‡½æ•°ä½“ä¹‹å‰&#125;;å¸¸é‡æˆå‘˜å‡½æ•° åœ¨ç±»å®šä¹‰ä¹‹å¤– å®šä¹‰å¯¹äºå®šä¹‰åœ¨ç±»å®šä¹‰ä¹‹å¤–çš„æˆå‘˜å‡½æ•°ï¼Œå¿…é¡»åœ¨ ç±»å®šä¹‰ä¸­çš„å‡½æ•°åŸå‹ å’Œ å‡½æ•°å®šä¹‰ä¸Š ä½¿ç”¨constå…³é”®å­—:1234567891011121314151617class Something&#123;public: int m_value; Something(): m_value(0) &#123; &#125; void resetValue() &#123; m_value = 0; &#125; void setValue(int value) &#123; m_value = value; &#125; int getValue() const; //â­ æ³¨æ„è¿™é‡Œæ·»åŠ äº†constå…³é”®å­—&#125;; int Something::getValue() const // â­è¿™é‡Œä¹Ÿæ·»åŠ å…³é”®å­—const&#123; return m_value;&#125;æ­¤å¤–ï¼Œä»»ä½•è¯•å›¾æ›´æ”¹æˆå‘˜å˜é‡æˆ–è°ƒç”¨éconstæˆå‘˜å‡½æ•° çš„ constæˆå‘˜å‡½æ•° éƒ½ä¼šå¯¼è‡´ç¼–è¯‘å™¨é”™è¯¯ã€‚ä¾‹å¦‚:1234567class Something&#123;public: int m_value ; void resetValue() const &#123; m_value = 0; &#125; // ç¼–è¯‘é”™è¯¯, constæˆå‘˜å‡½æ•°ä¸èƒ½ä¿®æ”¹æˆå‘˜å˜é‡&#125;;æ„é€ å‡½æ•°ä¸èƒ½æ˜¯constæ³¨æ„ï¼Œæ„é€ å‡½æ•°ä¸èƒ½æ ‡è®°ä¸ºconstã€‚è¿™æ˜¯å› ä¸ºæ„é€ å‡½æ•°éœ€è¦èƒ½å¤Ÿåˆå§‹åŒ–å®ƒä»¬çš„æˆå‘˜å˜é‡ï¼Œè€Œconstæ„é€ å‡½æ•°åˆ™ä¸èƒ½è¿™æ ·åšã€‚å› æ­¤ï¼Œä¸å…è®¸constæ„é€ å‡½æ•°ã€‚å¸¸é‡å¼•ç”¨å°½ç®¡å®ä¾‹åŒ–constç±»å¯¹è±¡æ˜¯åˆ›å»ºconstå¯¹è±¡çš„ä¸€ç§æ–¹æ³•ï¼Œä½†æ›´å¸¸è§çš„æ–¹æ³•æ˜¯é€šè¿‡constå¼•ç”¨å°†ä¸€ä¸ªå¯¹è±¡ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ã€‚åœ¨å…³äº passing arguments by referenceä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†é€šè¿‡constå¼•ç”¨è€Œä¸æ˜¯é€šè¿‡å€¼ä¼ é€’ç±»å‚æ•°çš„ä¼˜ç‚¹ã€‚æ€»è€Œè¨€ä¹‹ï¼Œé€šè¿‡å€¼ä¼ é€’ç±»å‚æ•°ä¼šå¯¼è‡´ç”Ÿæˆç±»çš„å‰¯æœ¬(è¿™æ¯”è¾ƒæ…¢)â€”â€”å¤§å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬ä¸éœ€è¦å‰¯æœ¬ï¼Œå¯¹åŸå§‹å‚æ•°çš„å¼•ç”¨å¯ä»¥å¾ˆå¥½åœ°å·¥ä½œï¼Œè€Œä¸”æ›´æœ‰æ€§èƒ½ï¼Œå› ä¸ºå®ƒé¿å…äº†ä¸å¿…è¦çš„å‰¯æœ¬ã€‚æˆ‘ä»¬é€šå¸¸ä½¿ç”¨å¼•ç”¨constï¼Œä»¥ç¡®ä¿å‡½æ•°ä¸ä¼šåœ¨ä¸ç»æ„é—´æ›´æ”¹å‚æ•°ï¼Œå¹¶å…è®¸å‡½æ•°å¤„ç†r-value(ä¾‹å¦‚æ–‡å­—)ï¼Œè¿™äº›r-valueå¯ä»¥ä½œä¸ºconstå¼•ç”¨ä¼ é€’ï¼Œä½†ä¸èƒ½ä½œä¸ºéconstå¼•ç”¨ã€‚ä¸èƒ½åœ¨constå¯¹è±¡ä¸Šè°ƒç”¨éconstæˆå‘˜å‡½æ•°æ‚¨èƒ½æ‰¾å‡ºä»¥ä¸‹ä»£ç çš„é”™è¯¯å—?12345678910111213141516171819202122232425262728293031323334353637#include &lt;iostream&gt; class Date&#123;private: int m_year; int m_month; int m_day; public: Date(int year, int month, int day) &#123; setDate(year, month, day); &#125; void setDate(int year, int month, int day) &#123; m_year = year; m_month = month; m_day = day; &#125; int getYear() &#123; return m_year; &#125; int getMonth() &#123; return m_month; &#125; int getDay() &#123; return m_day; &#125;&#125;; void printDate(const Date &amp;date)&#123; std::cout &lt;&lt; date.getYear() &lt;&lt; \"/\" &lt;&lt; date.getMonth() &lt;&lt; \"/\" &lt;&lt; date.getDay() &lt;&lt; '\\n';&#125;int main()&#123; Date date(2016, 10, 16); printDate(date);&#125;ç­”æ¡ˆæ˜¯ï¼Œåœ¨printDateå‡½æ•°å†…éƒ¨ï¼Œdateè¢«è§†ä¸ºä¸€ä¸ªconstå¯¹è±¡ã€‚ä½¿ç”¨è¿™ä¸ªå¸¸é‡ dateï¼Œæˆ‘ä»¬è°ƒç”¨å‡½æ•°getYear()ã€getMonth()å’ŒgetDay()ï¼Œå®ƒä»¬éƒ½æ˜¯éconstçš„ã€‚å› ä¸ºæˆ‘ä»¬ä¸èƒ½åœ¨constå¯¹è±¡ä¸Šè°ƒç”¨éconstæˆå‘˜å‡½æ•°ï¼Œè¿™å°†å¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚è§£å†³æ–¹æ³•ï¼šä½¿getYear()ã€getMonth()å’ŒgetDay()è¿™äº›å‡½æ•°æˆä¸º const:1234567891011121314151617181920212223242526class Date&#123;private: int m_year; int m_month; int m_day; public: Date(int year, int month, int day) &#123; setDate(year, month, day); &#125; // setDate() cannot be const, modifies member variables void setDate(int year, int month, int day) &#123; m_year = year; m_month = month; m_day = day; &#125; // The following getters can all be made constâ­ int getYear() const &#123; return m_year; &#125; int getMonth() const &#123; return m_month; &#125; int getDay() const &#123; return m_day; &#125;&#125;;é‡è½½constå’Œéconstå‡½æ•°æœ€åï¼Œè™½ç„¶ä¸ç»å¸¸è¿™æ ·åšï¼Œä½†æœ‰å¯èƒ½é‡è½½ä¸€ä¸ªå‡½æ•°ï¼Œä½¿å…¶å…·æœ‰åŒä¸€ä¸ªå‡½æ•°çš„constå’Œéconstç‰ˆæœ¬:12345678910111213141516#include &lt;iostream&gt;class Something&#123;private: std::string m_value; public: Something(const std::string &amp;value=\"\") &#123; m_value= value; &#125; // â­ç”¨äºconstå¯¹è±¡çš„getValue() const std::string&amp; getValue() const &#123;return m_value;&#125; //â­â­â­ // â­ç”¨äºéconstå¯¹è±¡çš„getValue() std::string&amp; getValue() &#123;return m_value;&#125;&#125;;const std::string&amp; getValue() const {return m_value;}æœ€å·¦è¾¹çš„constæ˜¯å‡½æ•°è¿”å›ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œè¡¨ç¤ºè¿”å›äº†ä¸€ä¸ªconstå¼•ç”¨ã€‚æœ€å³è¾¹çš„constè¡¨ç¤ºæˆå‘˜å‡½æ•°è‡ªèº«æ˜¯constã€‚è¿™æ„å‘³ç€å®ƒä¸ä¼šæ”¹å˜å¯¹è±¡çš„çŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥è¢«constç±»çš„å¯¹è±¡è°ƒç”¨ã€‚å‡½æ•°çš„constç‰ˆæœ¬å°†åœ¨ä»»ä½•constå¯¹è±¡ä¸Šè°ƒç”¨ï¼Œè€Œéconstç‰ˆæœ¬å°†åœ¨ä»»ä½•éconstå¯¹è±¡ä¸Šè°ƒç”¨:12345678int main()&#123; Something something; something.getValue() = \"Hi\"; // calls non-const getValue(); const Something something2; something2.getValue(); // calls const getValue(); &#125;ä½¿ç”¨constå’Œéconstç‰ˆæœ¬çš„å‡½æ•°é‡è½½é€šå¸¸æ˜¯åœ¨è¿”å›å€¼éœ€è¦åœ¨ç¨³å®šæ€§ä¸Šæœ‰æ‰€ä¸åŒæ—¶å®Œæˆçš„ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼šgetValue()çš„éconstç‰ˆæœ¬å°†åªä¸éconstå¯¹è±¡ä¸€èµ·å·¥ä½œï¼Œä½†æ˜¯æ›´åŠ çµæ´»ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å†™m_value(é€šè¿‡åˆ†é…å­—ç¬¦ä¸²â€œHiâ€æ¥å®Œæˆ)ã€‚getValue()çš„constç‰ˆæœ¬æ—¢å¯ä»¥ä½¿ç”¨constå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨éconstå¯¹è±¡ï¼Œä½†æ˜¯è¿”å›ä¸€ä¸ªconstå¼•ç”¨ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬ä¸èƒ½ä¿®æ”¹constå¯¹è±¡çš„æ•°æ®ã€‚","categories":[],"tags":[]},{"title":"C&C++/ç±»çš„ä»£ç ä¸å¤´æ–‡ä»¶","slug":"C&C++/ç±»çš„ä»£ç ä¸å¤´æ–‡ä»¶","date":"2020-05-08T15:43:56.376Z","updated":"2020-05-08T16:21:30.766Z","comments":true,"path":"archives/8605edc6.html","link":"","permalink":"https://longlongqin.github.io/archives/8605edc6.html","excerpt":"","text":"åœ¨ç±»å®šä¹‰ä¹‹å¤–å®šä¹‰æˆå‘˜å‡½æ•°éšç€ç±»å˜å¾—è¶Šæ¥è¶Šé•¿ã€è¶Šæ¥è¶Šå¤æ‚ï¼Œåœ¨ç±»ä¸­åŒ…å«æ‰€æœ‰æˆå‘˜å‡½æ•°å®šä¹‰ä¼šä½¿ç±»æ›´éš¾ç®¡ç†å’Œä½¿ç”¨ã€‚ä½¿ç”¨ä¸€ä¸ªå·²ç»ç¼–å†™å¥½çš„ç±»åªéœ€è¦äº†è§£å®ƒçš„å…¬å…±æ¥å£(å…¬å…±æˆå‘˜å‡½æ•°)ï¼Œè€Œä¸éœ€è¦äº†è§£ç±»çš„åº•å±‚å·¥ä½œæ–¹å¼ã€‚æˆå‘˜å‡½æ•°å®ç°çš„ç»†èŠ‚åªæ˜¯ä¸€ä¸ªéšœç¢ã€‚å¹¸è¿çš„æ˜¯ï¼Œc++æä¾›äº†ä¸€ç§å°†ç±»çš„â€œå£°æ˜â€éƒ¨åˆ†ä¸â€œå®ç°â€éƒ¨åˆ†åˆ†ç¦»çš„æ–¹æ³•ã€‚è¿™æ˜¯é€šè¿‡åœ¨ç±»å®šä¹‰ä¹‹å¤–å®šä¹‰ç±»æˆå‘˜å‡½æ•°æ¥å®ç°çš„ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œåªéœ€å®šä¹‰ç±»çš„æˆå‘˜å‡½æ•°ï¼Œå°±åƒå®ƒä»¬æ˜¯æ™®é€šå‡½æ•°ä¸€æ ·ï¼Œä½†æ˜¯è¦ä½¿ç”¨èŒƒå›´è§£ææ“ä½œç¬¦(::)å°†ç±»åä½œä¸ºå‡½æ•°çš„å‰ç¼€(ä¸åç§°ç©ºé—´ç›¸åŒ)ã€‚ä¸€ä¸ªä¾‹å­ï¼šè¯·æ³¨æ„ï¼Œè¿™äº›å‡½æ•°çš„åŸå‹ä»ç„¶å­˜åœ¨äºç±»å®šä¹‰ä¸­ï¼Œä½†æ˜¯å®é™…çš„å®ç°å·²ç»ç§»åˆ°äº†ç±»å®šä¹‰ä¹‹å¤–123456789101112131415161718192021222324252627282930class Date&#123;private: int m_year; int m_month; int m_day; public: Date(int year, int month, int day); void SetDate(int year, int month, int day); int getYear() &#123; return m_year; &#125; int getMonth() &#123; return m_month; &#125; int getDay() &#123; return m_day; &#125;&#125;; // Date constructorDate::Date(int year, int month, int day)&#123; SetDate(year, month, day);&#125; // Date member functionvoid Date::SetDate(int year, int month, int day)&#123; m_month = month; m_day = day; m_year = year;&#125;å°†ç±»å®šä¹‰æ”¾åœ¨å¤´æ–‡ä»¶ä¸­åœ¨æœ‰å…³å¤´æ–‡ä»¶çš„è¯¾ç¨‹ä¸­ (header files) ï¼Œæ‚¨äº†è§£åˆ°å¯ä»¥å°†å‡½æ•°å£°æ˜æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿åœ¨å¤šä¸ªæ–‡ä»¶ç”šè‡³å¤šä¸ªé¡¹ç›®ä¸­ä½¿ç”¨è¿™äº›å‡½æ•°ã€‚ç±»å®šä¹‰ä¹Ÿå¯ä»¥æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿äºåœ¨å¤šä¸ªæ–‡ä»¶æˆ–å¤šä¸ªé¡¹ç›®ä¸­é‡ç”¨ã€‚ä¼ ç»Ÿä¸Šï¼Œç±»å®šä¹‰æ”¾åœ¨ä¸ç±»åŒåçš„å¤´æ–‡ä»¶ä¸­ï¼Œç±»å¤–éƒ¨å®šä¹‰çš„æˆå‘˜å‡½æ•°æ”¾åœ¨ä¸ç±»åŒåçš„.cppæ–‡ä»¶ä¸­ã€‚å¦‚ï¼šDate.h:123456789101112131415161718192021#ifndef DATE_H#define DATE_H class Date&#123;private: int m_year; int m_month; int m_day; public: Date(int year, int month, int day); void SetDate(int year, int month, int day); int getYear() &#123; return m_year; &#125; int getMonth() &#123; return m_month; &#125; int getDay() &#123; return m_day; &#125;&#125;; #endifDate.cpp:123456789101112131415#include \"Date.h\" // Date constructorDate::Date(int year, int month, int day)&#123; SetDate(year, month, day);&#125; // Date member functionvoid Date::SetDate(int year, int month, int day)&#123; m_month = month; m_day = day; m_year = year;&#125;ç°åœ¨ï¼Œä»»ä½•å…¶ä»–æƒ³è¦ä½¿ç”¨Dateç±»çš„å¤´æ–‡ä»¶æˆ–ä»£ç æ–‡ä»¶éƒ½å¯ä»¥ç®€å•åœ°#include &quot;Date.h&quot;ã€‚æ³¨æ„ï¼Œdata .cppè¿˜éœ€è¦ç¼–è¯‘åˆ°ä»»ä½•ä½¿ç”¨Date.hçš„é¡¹ç›®ä¸­ï¼Œä»¥ä¾¿é“¾æ¥å™¨çŸ¥é“å¦‚ä½•å®ç°Dateã€‚åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰ç±»æ˜¯å¦è¿åäº†one-definitionè§„åˆ™?è¿™æ˜¯ä¸åº”è¯¥çš„ã€‚å¦‚æœæ‚¨çš„å¤´æ–‡ä»¶å…·æœ‰é€‚å½“çš„å¤´ä¿æŠ¤ï¼Œåˆ™ä¸åº”è¯¥åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­å¤šæ¬¡åŒ…å«ç±»å®šä¹‰ã€‚ç±»å‹(åŒ…æ‹¬ç±»)ä¸å—one-definitionè§„åˆ™çš„çº¦æŸï¼Œè¯¥è§„åˆ™è§„å®šæ¯ä¸ªç¨‹åºåªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ã€‚å› æ­¤ï¼Œåœ¨å¤šä¸ªä»£ç æ–‡ä»¶ä¸­åŒ…å«ç±»å®šä¹‰å¹¶æ²¡æœ‰é—®é¢˜(å¦‚æœæœ‰çš„è¯ï¼Œç±»ä¹Ÿæ²¡æœ‰å¤šå¤§ç”¨å¤„)ã€‚åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰æˆå‘˜å‡½æ•°æ˜¯å¦è¿åäº†one-definitionè§„åˆ™?è§†æƒ…å†µè€Œå®šã€‚åœ¨ç±»å®šä¹‰ä¸­ å®šä¹‰çš„æˆå‘˜å‡½æ•°è¢«è®¤ä¸ºæ˜¯éšå¼å†…è”çš„ã€‚å†…è”å‡½æ•°ä¸å—one-definitionè§„åˆ™ä¸­æ¯ä¸ªç¨‹åºçš„ä¸€ä¸ªå®šä¹‰çš„çº¦æŸã€‚è¿™æ„å‘³ç€åœ¨ç±»å®šä¹‰æœ¬èº«å†…éƒ¨å®šä¹‰æ™®é€šçš„æˆå‘˜å‡½æ•°(ä¾‹å¦‚è®¿é—®å‡½æ•°)æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚åœ¨ç±»å®šä¹‰ä¹‹å¤–å®šä¹‰çš„æˆå‘˜å‡½æ•°è¢«è§†ä¸ºæ™®é€šå‡½æ•°ï¼Œå¹¶ä¸”å—ä¸€ä¸ªå®šä¹‰è§„åˆ™ä¸­æ¯ä¸ªç¨‹åºéƒ¨åˆ†çš„ä¸€ä¸ªå®šä¹‰çš„çº¦æŸã€‚å› æ­¤ï¼Œè¿™äº›å‡½æ•°åº”è¯¥åœ¨ä»£ç æ–‡ä»¶(.cpp)ä¸­å®šä¹‰ï¼Œè€Œä¸æ˜¯åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯æ¨¡æ¿å‡½æ•°ï¼Œæˆ‘ä»¬å°†åœ¨ä»¥åçš„ç« èŠ‚ä¸­è®¨è®ºã€‚åº”è¯¥åœ¨å¤´æ–‡ä»¶å’Œcppæ–‡ä»¶ä¸­å®šä¹‰ä»€ä¹ˆï¼Œåœ¨ç±»å®šä¹‰çš„å†…éƒ¨ å’Œ å¤–éƒ¨ å®šä¹‰ä»€ä¹ˆ?æ‚¨å¯èƒ½ä¼šè¯•å›¾å°†æ‰€æœ‰æˆå‘˜å‡½æ•°å®šä¹‰æ”¾å…¥ç±»å†…çš„å¤´æ–‡ä»¶ä¸­ã€‚è™½ç„¶è¿™å°†ç¼–è¯‘ï¼Œä½†è¿™æ ·åšæœ‰å‡ ä¸ªç¼ºç‚¹ï¼šé¦–å…ˆï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œè¿™ä¼šä½¿ç±»å®šä¹‰å˜å¾—æ··ä¹±ã€‚ç±»ä¸­å®šä¹‰çš„å‡½æ•°æ˜¯éšå¼å†…è”çš„ã€‚å¯¹äºä»è®¸å¤šåœ°æ–¹è°ƒç”¨çš„å¤§å‹å‡½æ•°ï¼Œè¿™ä¼šä½¿ä»£ç è†¨èƒ€ã€‚ç¬¬ä¸‰ï¼Œå¦‚æœæ‚¨æ›´æ”¹äº†å¤´æ–‡ä»¶çš„ä»£ç ï¼Œé‚£ä¹ˆæ‚¨éœ€è¦é‡æ–°ç¼–è¯‘åŒ…å«è¯¥å¤´æ–‡ä»¶çš„æ¯ä¸ªæ–‡ä»¶ã€‚è¿™å¯èƒ½ä¼šäº§ç”Ÿè¿é”ååº”ï¼Œä¸€ä¸ªå¾®å°çš„æ›´æ”¹å°±ä¼šå¯¼è‡´æ•´ä¸ªç¨‹åºéœ€è¦é‡æ–°ç¼–è¯‘(è¿™å¯èƒ½å¾ˆæ…¢)ã€‚(ä½†æ˜¯ï¼Œä½ æ›´æ”¹.cppæ–‡ä»¶ï¼Œç¼–è¯‘å™¨åªä¼šé‡æ–°ç¼–è¯‘æ”¹åŠ¨è¿‡çš„ .cppæ–‡ä»¶)å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®å¦‚ä¸‹:å¯¹äº ä»…åœ¨ä¸€ä¸ªé€šå¸¸ä¸é‡ç”¨çš„æ–‡ä»¶ ä¸­ä½¿ç”¨çš„ç±»ï¼Œç›´æ¥åœ¨ä½¿ç”¨å®ƒä»¬çš„å•ä¸ª.cppæ–‡ä»¶ä¸­å®šä¹‰å®ƒä»¬ã€‚å¯¹äºåœ¨å¤šä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨çš„ç±»ï¼Œæˆ–è€…ç”¨äºä¸€èˆ¬é‡ç”¨çš„ç±»ï¼Œè¯·åœ¨ä¸ç±»åŒåçš„.hæ–‡ä»¶ä¸­å®šä¹‰å®ƒä»¬ã€‚æ™®é€šæˆå‘˜å‡½æ•°(æ™®é€šæ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°ã€è®¿é—®å‡½æ•°ç­‰)å¯ä»¥åœ¨ç±»ä¸­å®šä¹‰ã€‚éæ™®é€šæˆå‘˜å‡½æ•°åº”è¯¥åœ¨ä¸ç±»åŒåçš„.cppæ–‡ä»¶ä¸­å®šä¹‰ã€‚æˆå‘˜å‡½æ•°çš„é»˜è®¤å‚æ•°åº”è¯¥åœ¨ç±»å®šä¹‰ä¸­å£°æ˜(å¤´æ–‡ä»¶ä¸­)æˆå‘˜å‡½æ•°çš„é»˜è®¤å‚æ•°åº”è¯¥åœ¨ç±»å®šä¹‰ä¸­å£°æ˜(åœ¨å¤´æ–‡ä»¶ä¸­)ï¼Œåœ¨é‚£é‡Œä»»ä½•äººéƒ½å¯ä»¥çœ‹åˆ°#includes è¿™ä¸ªå¤´æ–‡ä»¶ã€‚åº“åˆ†ç¦»ç±»å®šä¹‰å’Œç±»å®ç°å¯¹äºå¯ç”¨äºæ‰©å±•ç¨‹åºçš„åº“éå¸¸å¸¸è§ã€‚åœ¨æ‚¨çš„æ•´ä¸ªç¨‹åºä¸­ï¼Œä½ å·²ç»#included è®¸å¤šæ ‡å‡†çš„åº“ï¼Œå¦‚iostream, string, vector, arrayç­‰ç­‰ã€‚æ‚¨çš„ç¨‹åºéœ€è¦å¤´æ–‡ä»¶çš„å£°æ˜ï¼Œä»¥ä¾¿ç¼–è¯‘å™¨éªŒè¯æ‚¨æ­£åœ¨ç¼–å†™çš„ç¨‹åºåœ¨è¯­æ³•ä¸Šæ˜¯æ­£ç¡®çš„ã€‚æ³¨æ„ï¼Œæ‚¨ä¸éœ€è¦æ·»åŠ  iostream.cpp, string.cpp, vector.cpp, or array.cpp åˆ°ä½ çš„ç¨‹åºä¸­ã€‚ä½†æ˜¯ï¼Œå±äºc++æ ‡å‡†åº“çš„ç±»çš„å®ç°åŒ…å«åœ¨ä¸€ä¸ªé¢„ç¼–è¯‘æ–‡ä»¶ä¸­ï¼Œè¯¥æ–‡ä»¶åœ¨é“¾æ¥é˜¶æ®µè¢«é“¾æ¥è¿›æ¥ã€‚ä½ æ°¸è¿œçœ‹ä¸åˆ°ä»£ç ã€‚é™¤äº†ä¸€äº›å¼€æºè½¯ä»¶(åŒæ—¶æä¾›.hå’Œ.cppæ–‡ä»¶)ä¹‹å¤–ï¼Œå¤§å¤šæ•°ç¬¬ä¸‰æ–¹åº“åªæä¾›å¤´æ–‡ä»¶å’Œé¢„ç¼–è¯‘çš„åº“æ–‡ä»¶ã€‚è¿™æœ‰å‡ ä¸ªåŸå› ï¼šé“¾æ¥é¢„ç¼–è¯‘çš„åº“æ¯”æ¯æ¬¡éœ€è¦æ—¶é‡æ–°ç¼–è¯‘è¦å¿«ï¼›é¢„ç¼–è¯‘åº“çš„å•ä¸ªå‰¯æœ¬å¯ä»¥è¢«è®¸å¤šåº”ç”¨ç¨‹åºå…±äº«ï¼Œè€Œç¼–è¯‘åçš„ä»£ç è¢«ç¼–è¯‘åˆ°ä½¿ç”¨å®ƒçš„æ¯ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸­(å¢å¤§æ–‡ä»¶å¤§å°)ã€‚çŸ¥è¯†äº§æƒåŸå› (æ‚¨ä¸å¸Œæœ›åˆ«äººçªƒå–æ‚¨çš„ä»£ç )ã€‚å°†æ‚¨è‡ªå·±çš„æ–‡ä»¶åˆ†éš”ä¸ºå£°æ˜(å¤´æ–‡ä»¶)å’Œå®ç°(ä»£ç æ–‡ä»¶)ä¸ä»…æ˜¯ä¸€ç§è‰¯å¥½çš„å½¢å¼ï¼Œè€Œä¸”è¿˜ä½¿åˆ›å»ºæ‚¨è‡ªå·±çš„è‡ªå®šä¹‰åº“æ›´åŠ å®¹æ˜“ã€‚åˆ›å»ºè‡ªå·±çš„åº“è¶…å‡ºäº†æœ¬æ•™ç¨‹çš„èŒƒå›´ï¼Œä½†æ˜¯å°†å£°æ˜å’Œå®ç°åˆ†ç¦»æ˜¯è¿™æ ·åšçš„å…ˆå†³æ¡ä»¶ã€‚","categories":[],"tags":[]},{"title":"C&C++/éšè—çš„â€œthisâ€æŒ‡é’ˆ","slug":"C&C++/éšè—çš„â€œthisâ€æŒ‡é’ˆ","date":"2020-05-08T14:11:56.836Z","updated":"2020-05-08T15:41:29.853Z","comments":true,"path":"archives/7d6924a1.html","link":"","permalink":"https://longlongqin.github.io/archives/7d6924a1.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/8-8-the-hidden-this-pointer/æ–°çš„é¢å‘å¯¹è±¡ç¨‹åºå‘˜ç»å¸¸é—®çš„ä¸€ä¸ªå…³äºç±»çš„é—®é¢˜æ˜¯ï¼Œâ€œå½“ä¸€ä¸ªæˆå‘˜å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œc++å¦‚ä½•è·Ÿè¸ªå®ƒè¢«è°ƒç”¨çš„å¯¹è±¡?â€ç­”æ¡ˆæ˜¯ï¼šC++ä½¿ç”¨äº†ä¸€ä¸ªåä¸ºâ€œthisâ€çš„éšè—æŒ‡é’ˆ! è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°çœ‹çœ‹â€œthisâ€ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç±»ï¼Œå®ƒä¿å­˜ä¸€ä¸ªæ•´æ•°å¹¶æä¾›ä¸€ä¸ªæ„é€ å‡½æ•°å’Œè®¿é—®å‡½æ•°ã€‚æ³¨æ„ï¼Œä¸éœ€è¦ææ„å‡½æ•°ï¼Œå› ä¸ºc++å¯ä»¥ä¸ºæˆ‘ä»¬æ¸…ç†æ•´æ•°æˆå‘˜å˜é‡ã€‚1234567891011121314class Simple&#123;private: int m_id; public: Simple(int id) &#123; setID(id); &#125; void setID(int id) &#123; m_id = id; &#125; int getID() &#123; return m_id; &#125;&#125;;ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨è¿™ä¸ªç±»çš„ç¤ºä¾‹ç¨‹åº:1234567891011int main()&#123; Simple simple(1); simple.setID(2); std::cout &lt;&lt; simple.getID() &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/2å½“æˆ‘ä»¬è°ƒç”¨simple.setID(2);æ—¶ï¼Œc++çŸ¥é“setID()å‡½æ•°åº”è¯¥å¯¹simpleå¯¹è±¡è¿›è¡Œæ“ä½œï¼Œm_idå®é™…ä¸ŠæŒ‡çš„æ˜¯simple.m_idã€‚è®©æˆ‘ä»¬ç ”ç©¶ä¸€ä¸‹è¿™èƒŒåçš„æœºåˆ¶ã€‚éšè—çš„*thisæŒ‡é’ˆçœ‹çœ‹ä¸Šé¢ä¾‹å­ä¸­çš„ä»£ç è¡Œ:1simple.setID(2);å°½ç®¡å¯¹setID()å‡½æ•°çš„è°ƒç”¨çœ‹èµ·æ¥åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä½†å®é™…ä¸Šå®ƒæœ‰ä¸¤ä¸ª! åœ¨ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨å°†è½¬æ¢simple.setID(2);ä¸ºï¼š1setID(&amp;simple, 2); //æ³¨æ„ï¼Œsimpleå·²ç»ä»ä¸€ä¸ªå¯¹è±¡å‰ç¼€ æ›´æ”¹ä¸ºä¸€ä¸ªå‡½æ•°å‚æ•°!æ³¨æ„ï¼Œè¿™ç°åœ¨åªæ˜¯ä¸€ä¸ªæ ‡å‡†çš„å‡½æ•°è°ƒç”¨ï¼Œè€Œ simpleå¯¹è±¡ (ä»¥å‰æ˜¯ä¸€ä¸ªå¯¹è±¡å‰ç¼€) ç°åœ¨é€šè¿‡ åœ°å€ä¼ é€’ ä½œä¸ºå‡½æ•°çš„å‚æ•°ã€‚ä½†è¿™åªæ˜¯ç­”æ¡ˆçš„ä¸€åŠã€‚ç”±äºå‡½æ•°è°ƒç”¨ç°åœ¨æ·»åŠ äº†ä¸€ä¸ªæ–°çš„çš„å‚æ•°ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹æˆå‘˜å‡½æ•°å®šä¹‰ï¼Œä»¥æ¥å—(å¹¶ä½¿ç”¨)è¿™ä¸ªå‚æ•°ä½œä¸ºå‚æ•°ã€‚å› æ­¤ï¼Œæœ‰ä»¥ä¸‹æˆå‘˜å‡½æ•°:1234void setID(int id) &#123; m_id = id; &#125;//è¢«è½¬æ¢ä¸ºï¼šâ­void setID(Simple* const this, int id) &#123;this-&gt;m_id = id;&#125;å½“ç¼–è¯‘å™¨ç¼–è¯‘ä¸€ä¸ªæ™®é€šæˆå‘˜å‡½æ•°æ—¶ï¼Œå®ƒä¼šéšå¼åœ°å‘å‡½æ•°æ·»åŠ ä¸€ä¸ªåä¸ºâ€œthisâ€çš„æ–°å‚æ•°ã€‚thisæŒ‡é’ˆæ˜¯ä¸€ä¸ªéšè—çš„constæŒ‡é’ˆï¼Œå®ƒä¿å­˜æˆå‘˜å‡½æ•°æ‰€è°ƒç”¨çš„å¯¹è±¡çš„åœ°å€ã€‚è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚è¦å¤„ç†ã€‚åœ¨æˆå‘˜å‡½æ•°å†…éƒ¨ï¼Œè¿˜éœ€è¦æ›´æ–°ä»»ä½•ç±»æˆå‘˜(å‡½æ•°å’Œå˜é‡)ï¼Œä»¥ä¾¿å®ƒä»¬å¼•ç”¨è°ƒç”¨æˆå‘˜å‡½æ•°çš„å¯¹è±¡ã€‚è¿™å¾ˆå®¹æ˜“åšåˆ°ï¼Œåªè¦åœ¨æ¯ä¸€ä¸ªå‰é¢åŠ ä¸Šâ€œthis -&gt;â€å°±å¯ä»¥äº†ã€‚å› æ­¤ï¼Œåœ¨setID()å‡½æ•°ä½“ä¸­ï¼Œm_id(å®ƒæ˜¯ä¸€ä¸ªç±»æˆå‘˜å˜é‡)è¢«è½¬æ¢ä¸ºthis-&gt;m_idã€‚å› æ­¤ï¼Œå½“â€œthisâ€æŒ‡å‘simpleçš„åœ°å€æ—¶ï¼Œ this-&gt;m_idå°†è§£æä¸ºsimple. m_idã€‚ç»¼ä¸Šæ‰€è¿°ï¼šå½“æˆ‘ä»¬è°ƒç”¨simple.setID(2)ï¼Œç¼–è¯‘å™¨å®é™…ä¸Šè°ƒç”¨ setID(&amp;simple, 2)åœ¨setID()ä¸­ï¼Œâ€œthisâ€æŒ‡é’ˆä¿å­˜äº† å¯¹è±¡simple çš„åœ°å€ã€‚setID()ä¸­çš„ä»»ä½•æˆå‘˜å˜é‡éƒ½ä»¥â€œthis-&gt;â€ä½œä¸ºå‰ç¼€ã€‚æ‰€ä»¥å½“æˆ‘ä»¬è¯´m_id = idæ—¶ï¼Œç¼–è¯‘å™¨å®é™…ä¸Šæ˜¯åœ¨æ‰§è¡Œthis-&gt;m_id = idï¼Œåœ¨æœ¬ä¾‹ä¸­å°† simple.m_id è½¬æ¢ä¸º idã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œæ‰€æœ‰è¿™äº›éƒ½æ˜¯è‡ªåŠ¨å‘ç”Ÿçš„ï¼Œä¸ç®¡ä½ æ˜¯å¦è®°å¾—å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æ‚¨éœ€è¦è®°ä½çš„æ˜¯ï¼Œæ‰€æœ‰æ™®é€šæˆå‘˜å‡½æ•°éƒ½æœ‰ä¸€ä¸ªâ€œthisâ€æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å‡½æ•°æ‰€è°ƒç”¨çš„å¯¹è±¡ã€‚â€œthisâ€æ€»æ˜¯æŒ‡å‘è¢«æ“ä½œçš„å¯¹è±¡æ–°ç¨‹åºå‘˜æœ‰æ—¶ä¼šå¯¹å­˜åœ¨å¤šå°‘â€œthisâ€æŒ‡é’ˆæ„Ÿåˆ°å›°æƒ‘ã€‚æ¯ä¸ªæˆå‘˜å‡½æ•°éƒ½æœ‰ä¸€ä¸ªâ€œthisâ€æŒ‡é’ˆå‚æ•°ï¼Œè¯¥å‚æ•°è¢«è®¾ç½®ä¸ºæ­£åœ¨æ“ä½œçš„å¯¹è±¡çš„åœ°å€ã€‚è¯·çœ‹:123456789int main()&#123; Simple A(1); // this = &amp;A åœ¨ Simple æ„é€ å‡½æ•°çš„å†…éƒ¨ Simple B(2); // this = &amp;B åœ¨ Simple æ„é€ å‡½æ•°çš„å†…éƒ¨ A.setID(3); // this = &amp;A åœ¨æˆå‘˜å‡½æ•° setID çš„å†…éƒ¨ B.setID(4); // this = &amp;B åœ¨æˆå‘˜å‡½æ•° setID çš„å†…éƒ¨ return 0; &#125;æ³¨æ„ï¼Œâ€œthisâ€æŒ‡é’ˆäº¤æ›¿ä¿å­˜å¯¹è±¡Aæˆ–Bçš„åœ°å€ï¼Œè¿™å–å†³äºæˆ‘ä»¬æ˜¯å¦åœ¨å¯¹è±¡Aæˆ–Bä¸Šè°ƒç”¨äº†æˆå‘˜å‡½æ•°ã€‚â€œthisâ€æ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå®ƒå­˜æ”¾äºæ ˆä¸­å› ä¸ºâ€œthisâ€åªæ˜¯ä¸€ä¸ªå‡½æ•°å‚æ•°ï¼Œå®ƒä¸ä¼šå‘æ‚¨çš„ç±»æ·»åŠ ä»»ä½•å†…å­˜ä½¿ç”¨ (åªä¼šæ·»åŠ åˆ°æˆå‘˜å‡½æ•°è°ƒç”¨ï¼Œå› æ­¤è¯¥å‚æ•°åœ¨å‡½æ•°æ‰§è¡Œæ—¶åœ¨æ ˆä¸Šè¿è¡Œ)ã€‚æ˜¾å¼åœ°å¼•ç”¨â€œthisâ€å¤§å¤šæ•°æ—¶å€™ï¼Œæ‚¨ä¸éœ€è¦æ˜¾å¼åœ°å¼•ç”¨â€œthisâ€æŒ‡é’ˆã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹è¿™æ ·åšæ˜¯æœ‰ç”¨çš„:é¦–å…ˆï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°(æˆ–æˆå‘˜å‡½æ•°)ï¼Œå®ƒæœ‰ä¸€ä¸ªä¸æˆå‘˜å˜é‡åŒåçš„å‚æ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨â€œthisâ€æ¥æ¶ˆé™¤å®ƒä»¬çš„æ­§ä¹‰:12345678910class Something&#123;private: int data;public: Something(int data) &#123; this-&gt;data = data; // this-&gt;dataæ˜¯æˆå‘˜å˜é‡ï¼Œdataæ˜¯æœ¬åœ°å‚æ•° &#125; &#125;;è¯·æ³¨æ„ï¼Œæˆ‘ä»¬çš„æ„é€ å‡½æ•°æ¥å—åŒåçš„å‚æ•°ä½œä¸ºæˆå‘˜å˜é‡ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œâ€œdataâ€æŒ‡çš„æ˜¯å‚æ•°ï¼Œâ€œthis-&gt;dataâ€æŒ‡çš„æ˜¯æˆå‘˜å˜é‡ã€‚è™½ç„¶è¿™æ˜¯å¯æ¥å—çš„ç¼–ç å®è·µï¼Œä½†æˆ‘ä»¬å‘ç°åœ¨æ‰€æœ‰æˆå‘˜å˜é‡åä¸Šä½¿ç”¨â€œm_â€å‰ç¼€æä¾›äº†æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒå®Œå…¨é˜²æ­¢äº†é‡å¤çš„åç§°!æœ‰äº›å¼€å‘äººå‘˜å–œæ¬¢æ˜¾å¼åœ°å°†è¿™ä¸ª-&gt;æ·»åŠ åˆ°æ‰€æœ‰ç±»æˆå‘˜ä¸­ã€‚æˆ‘ä»¬å»ºè®®æ‚¨é¿å…è¿™æ ·åšï¼Œå› ä¸ºè¿™æ ·åšä¼šé™ä½ä»£ç çš„å¯è¯»æ€§ï¼Œå¹¶ä¸”æ²¡æœ‰ä»€ä¹ˆå¥½å¤„ã€‚ä½¿ç”¨m_å‰ç¼€æ˜¯åŒºåˆ†æˆå‘˜å˜é‡å’Œéæˆå‘˜(æœ¬åœ°)å˜é‡çš„ä¸€ç§æ›´å…·å¯è¯»æ€§çš„æ–¹æ³•ã€‚é“¾æ¥æˆå‘˜å‡½æ•°å…¶æ¬¡ï¼Œæœ‰æ—¶è®©ç±»æˆå‘˜å‡½æ•°è¿”å›å®ƒæ­£åœ¨å¤„ç†çš„å¯¹è±¡ä½œä¸ºè¿”å›å€¼æ˜¯æœ‰ç”¨çš„ã€‚è¿™æ ·åšçš„ä¸»è¦åŸå› æ˜¯å…è®¸å°†ä¸€ç³»åˆ—æˆå‘˜å‡½æ•°â€œé“¾æ¥â€åœ¨ä¸€èµ·ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨å¤šä¸ªæˆå‘˜å‡½æ•°!å…¶å®ä½ å·²ç»è¿™æ ·åšäº†å¾ˆé•¿æ—¶é—´äº†ã€‚è€ƒè™‘ä¸‹é¢è¿™ä¸ªå¸¸è§çš„ç¤ºä¾‹ï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ‚¨ä½¿ç”¨std::coutè¾“å‡ºäº†å¤šäºä¸€ä½çš„æ–‡æœ¬:1234std::cout &lt;&lt; \"Hello, \" &lt;&lt; userName;//ä¸Šé¢çš„ä»£ç ï¼Œstd::coutæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œæ“ä½œç¬¦&lt;&lt;æ˜¯æ“ä½œè¯¥å¯¹è±¡çš„æˆå‘˜å‡½æ•°ã€‚ç¼–è¯‘å™¨åƒè¿™æ ·è®¡ç®—ä¸Šé¢çš„ä»£ç ç‰‡æ®µ:(std::cout &lt;&lt; \"Hello, \") &lt;&lt; userName;é¦–å…ˆï¼Œæ“ä½œç¬¦&lt;&lt; ä½¿ç”¨std::coutå’Œå­—ç¬¦ä¸²æ–‡å­—â€œHelloï¼Œâ€å°†â€œHelloâ€æ‰“å°åˆ°æ§åˆ¶å°ã€‚ä½†æ˜¯ï¼Œç”±äºè¿™æ˜¯è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œæ“ä½œç¬¦&lt;&lt;ä¹Ÿéœ€è¦è¿”å›ä¸€ä¸ªå€¼(æˆ–void)ã€‚å¦‚æœæ“ä½œç¬¦&lt;&lt;è¿”å›voidï¼Œæ‚¨å°†å¾—åˆ°ä»¥ä¸‹ç»“æœ:123456(void) &lt;&lt; userName;//è¿™æ˜¾ç„¶æ²¡æœ‰ä»»ä½•æ„ä¹‰(å¹¶ä¸”ç¼–è¯‘å™¨ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯)ã€‚//ç›¸åï¼Œæ“ä½œç¬¦&lt;&lt;è¿”å› *thisï¼Œåœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­æ˜¯std::coutå¯¹è±¡ã€‚//è¿™æ ·ï¼Œåœ¨ç¬¬ä¸€ä¸ªè¿ç®—ç¬¦&lt;&lt;è¢«æ±‚å€¼åï¼Œæˆ‘ä»¬å¾—åˆ°:(std::cout) &lt;&lt; userName;è¿™æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‡å®šå¯¹è±¡ä¸€æ¬¡(åœ¨æœ¬ä¾‹ä¸­æ˜¯std::cout)ï¼Œæ¯ä¸ªå‡½æ•°è°ƒç”¨éƒ½ä¼šå°†å…¶ä¼ é€’ç»™ä¸‹ä¸€ä¸ªè¦ä½¿ç”¨çš„å‡½æ•°ï¼Œä»è€Œå…è®¸æˆ‘ä»¬å°†å¤šä¸ªå‘½ä»¤é“¾æ¥åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°è¿™ç§è¡Œä¸ºï¼š1234567891011121314class Calc&#123;private: int m_value; public: Calc() &#123;m_value = 0;&#125; void add(int value) &#123; m_value += value; &#125; void sub(int value) &#123; m_value -= value; &#125; void mult(int value) &#123; m_value *= value; &#125; int getValue() &#123; return m_value; &#125;&#125;;å¦‚æœä½ æƒ³åŠ 5ï¼Œå‡3ï¼Œå†ä¹˜ä»¥4ï¼Œä½ å¿…é¡»è¿™æ ·åš:1234567891011#include &lt;iostream&gt;int main()&#123; Calc calc; calc.add(5); // returns void calc.sub(3); // returns void calc.mult(4); // returns void std::cout &lt;&lt; calc.getValue() &lt;&lt; '\\n'; return 0;&#125;ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è®©æ¯ä¸ªå‡½æ•°è¿”å›*thisï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›è°ƒç”¨é“¾æ¥åœ¨ä¸€èµ·ã€‚ä»¥ä¸‹æ˜¯æ–°ç‰ˆæœ¬çš„Calcä¸â€œé“¾â€åŠŸèƒ½:1234567891011121314class Calc&#123;private: int m_value; public: Calc() &#123; m_value = 0; &#125; Calc&amp; add(int value) &#123;m_value += value; return *this;&#125; Calc&amp; sub(int vaule) &#123;m_value -= value; return *this;&#125; Calc&amp; mult(int value) &#123; m_value *= value; return *this; &#125; int gerValue() &#123;return m_value;&#125;&#125;;æ³¨æ„ï¼Œadd()ã€sub()å’Œmult()ç°åœ¨è¿”å›*thisã€‚å› æ­¤ï¼Œè¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿåšåˆ°ä»¥ä¸‹å‡ ç‚¹:123456789#include &lt;iostream&gt;int main()&#123; Calc calc; calc.add(5).sub(3).mult(4); //â­ std::cout &lt;&lt; calc.getValue() &lt;&lt; '\\n'; return 0;&#125;æˆ‘ä»¬å·²ç»æœ‰æ•ˆåœ°å°†ä¸‰è¡Œå‹ç¼©æˆä¸€ä¸ªè¡¨è¾¾å¼! è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚é¦–å…ˆï¼Œcalc.add(5)è¢«è°ƒç”¨ã€‚å®ƒç»™m_value.add ()å¢åŠ 5ï¼Œç„¶åè¿”å›*thisï¼Œå®ƒåªæ˜¯calcçš„ä¸€ä¸ªå¼•ç”¨ã€‚å› æ­¤ï¼Œcalcå°†æ˜¯åç»­è®¡ç®—ä¸­ä½¿ç”¨çš„å¯¹è±¡ã€‚ç„¶åï¼Œcalc.sub(3)è¢«æ‰§è¡Œã€‚ä»m_valueä¸­å‡å»3ï¼Œå†æ¬¡è¿”å›calcã€‚æœ€åï¼Œæ‰§è¡Œcalc.mult(4)å°†m_valueä¹˜ä»¥4ï¼Œç„¶åè¿”å›calcã€‚ï¼ˆå®ƒæ²¡æœ‰è¿›ä¸€æ­¥ä½¿ç”¨ï¼Œå› æ­¤è¢«å¿½ç•¥ã€‚ï¼‰ç”±äºæ¯ä¸ªå‡½æ•°åœ¨æ‰§è¡Œæ—¶éƒ½ä¼šä¿®æ”¹calcï¼Œæ‰€ä»¥calcçš„m_valueç°åœ¨åŒ…å«å€¼((((0 + 5)- 3)* 4)ï¼Œå³8ã€‚å°ç»“â€œthisâ€æŒ‡é’ˆæ˜¯éšå¼æ·»åŠ åˆ°ä»»ä½•éé™æ€æˆå‘˜å‡½æ•°çš„éšè—å‚æ•°ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨ä¸éœ€è¦ç›´æ¥è®¿é—®å®ƒã€‚ä½†æ˜¯å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥è®¿é—®å®ƒã€‚å€¼å¾—æ³¨æ„çš„æ˜¯â€œthisâ€æ˜¯ä¸€ä¸ªconstæŒ‡é’ˆâ€”â€”å³ï¼Œæ‚¨å¯ä»¥æ›´æ”¹å®ƒæ‰€æŒ‡å‘çš„åº•å±‚å¯¹è±¡çš„å€¼ï¼Œä½†æ˜¯æ‚¨ä¸èƒ½è®©å®ƒæŒ‡å‘å…¶ä»–å¯¹è±¡!","categories":[],"tags":[]},{"title":"C&C++/ææ„å‡½æ•°","slug":"C&C++/ææ„å‡½æ•°","date":"2020-05-08T13:11:26.018Z","updated":"2020-05-08T14:10:54.157Z","comments":true,"path":"archives/db2095e5.html","link":"","permalink":"https://longlongqin.github.io/archives/db2095e5.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/8-7-destructors/ææ„å‡½æ•°(Destructors)æ˜¯å¦ä¸€ç§ç‰¹æ®Šçš„ç±»æˆå‘˜å‡½æ•°ï¼Œå®ƒåœ¨ç±»çš„å¯¹è±¡è¢«é”€æ¯æ—¶æ‰§è¡Œã€‚æ„é€ å‡½æ•°çš„è®¾è®¡ç›®çš„æ˜¯åˆå§‹åŒ–ç±»ï¼›è€Œææ„å‡½æ•°çš„è®¾è®¡ç›®çš„æ˜¯å¸®åŠ©æ¸…ç†ç±»ã€‚å½“ä¸€ä¸ªå¯¹è±¡é€šå¸¸è¶…å‡ºä½œç”¨åŸŸï¼Œæˆ–è€…ä½¿ç”¨deleteå…³é”®å­—æ˜¾å¼åˆ é™¤åŠ¨æ€åˆ†é…çš„å¯¹è±¡æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ç±»ææ„å‡½æ•°(å¦‚æœå­˜åœ¨çš„è¯)ï¼Œä»¥ä¾¿åœ¨ä»å†…å­˜ä¸­åˆ é™¤å¯¹è±¡ä¹‹å‰è¿›è¡Œä»»ä½•å¿…è¦çš„æ¸…ç†ã€‚å¯¹äºç®€å•çš„ç±» (é‚£äº›åªåˆå§‹åŒ–æ™®é€šæˆå‘˜å˜é‡å€¼çš„ç±»)ï¼Œä¸éœ€è¦ææ„å‡½æ•°ï¼Œå› ä¸ºc++ä¼šè‡ªåŠ¨ä¸ºæ‚¨æ¸…ç†å†…å­˜ã€‚ç„¶è€Œ,å¦‚æœä½ çš„ç±»å¯¹è±¡æŒæœ‰ä»»ä½•èµ„æº (å¦‚åŠ¨æ€å†…å­˜,æˆ–å¤„ç†çš„æ–‡ä»¶æˆ–æ•°æ®åº“) ,æˆ–è€…å¦‚æœä½ éœ€è¦åšä»»ä½•ç»´æŠ¤å¯¹è±¡è¢«æ‘§æ¯ä¹‹å‰, ææ„å‡½æ•°æ˜¯å®Œç¾çš„åœ°æ–¹ï¼Œå› ä¸ºå®ƒé€šå¸¸æ˜¯å‘ç”Ÿåœ¨å¯¹è±¡è¢«é”€æ¯ä¹‹å‰çš„æœ€åä¸€ä»¶äº‹ã€‚ææ„å‡½æ•°çš„å‘½åå’Œæ„é€ å‡½æ•°ä¸€æ ·ï¼Œææ„å‡½æ•°ä¹Ÿæœ‰ç‰¹å®šçš„å‘½åè§„åˆ™ï¼šææ„å‡½æ•°å¿…é¡»å…·æœ‰ä¸ç±»ç›¸åŒçš„åç§°ï¼Œå‰é¢æœ‰ä¸€ä¸ªæ³¢æµªå·(~)ã€‚ææ„å‡½æ•°ä¸èƒ½æ¥å—å‚æ•°ã€‚ææ„å‡½æ•°æ²¡æœ‰è¿”å›ç±»å‹ã€‚æ³¨æ„ï¼Œè§„åˆ™2æ„å‘³ç€æ¯ä¸ªç±»åªèƒ½å­˜åœ¨ä¸€ä¸ªææ„å‡½æ•°ï¼Œå› ä¸ºæ²¡æœ‰é‡è½½ææ„å‡½æ•°çš„æ–¹æ³•ï¼ˆå› ä¸ºå®ƒä»¬ä¸èƒ½æ ¹æ®å‚æ•°å½¼æ­¤åŒºåˆ†ã€‚ï¼‰é€šå¸¸ï¼Œæ‚¨ä¸åº”è¯¥æ˜¾å¼åœ°è°ƒç”¨ææ„å‡½æ•°(å› ä¸ºå½“å¯¹è±¡è¢«é”€æ¯æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨å®ƒ)ï¼Œå› ä¸ºå¾ˆå°‘æœ‰éœ€è¦å¤šæ¬¡æ¸…ç†å¯¹è±¡çš„æƒ…å†µã€‚ç„¶è€Œï¼Œææ„å‡½æ•°å¯ä»¥å®‰å…¨åœ°è°ƒç”¨å…¶ä»–æˆå‘˜å‡½æ•°ï¼Œå› ä¸ºå¯¹è±¡ç›´åˆ°ææ„å‡½æ•°æ‰§è¡Œåæ‰ä¼šè¢«é”€æ¯ã€‚æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657#include &lt;iostream&gt;#include &lt;cassert&gt;#include &lt;cstddef&gt;class IntArray&#123;public: IntArray(int length) //æ„é€ å‡½æ•° &#123; assert(length &gt; 0); m_array = new int[static_cast&lt;std::size_t&gt;(length)]&#123;&#125;; m_length = length; &#125; ~IntArray() //ææ„å‡½æ•° &#123; //åŠ¨æ€åˆ é™¤æˆ‘ä»¬ä¹‹å‰åˆ†é…çš„æ•°ç»„ delete[] m_array; &#125; void setValue(int index, int value) &#123; m_array[index] = value; &#125; int getValue(int index) &#123; return m_array[index]; &#125; int getlength() &#123; return m_length; &#125;protected:private: int* m_array; int m_length;&#125;;int main()&#123; IntArray arr&#123; 10 &#125;; for (int count&#123; 0 &#125;; count &lt; arr.getlength(); count++) &#123; arr.setValue(count, count + 1); &#125; std::cout &lt;&lt; \"The value of element 5 is: \" &lt;&lt; arr.getValue(5) &lt;&lt; '\\n'; std::cin.clear(); std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); std::cin.get(); return 0;&#125; //ç±»aråœ¨è¿™é‡Œè¢«é”€æ¯ï¼Œæ‰€ä»¥ï¼Œææ„å‡½æ•°~IntArray() åœ¨è¿™é‡Œè¢«è°ƒç”¨åœ¨ç¬¬ä¸€è¡Œï¼Œæˆ‘ä»¬å®ä¾‹åŒ–ä¸€ä¸ªåä¸ºarçš„æ–°IntArrayç±»å¯¹è±¡ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªé•¿åº¦ä¸º10çš„å€¼ã€‚å®ƒè°ƒç”¨æ„é€ å‡½æ•°ï¼Œæ„é€ å‡½æ•°åŠ¨æ€åœ°ä¸ºæ•°ç»„æˆå‘˜åˆ†é…å†…å­˜ã€‚æˆ‘ä»¬å¿…é¡»åœ¨è¿™é‡Œä½¿ç”¨åŠ¨æ€åˆ†é…ï¼Œå› ä¸ºåœ¨ç¼–è¯‘æ—¶æˆ‘ä»¬ä¸çŸ¥é“æ•°ç»„çš„é•¿åº¦æ˜¯å¤šå°‘(è°ƒç”¨è€…å†³å®š)ã€‚åœ¨main()çš„æœ«å°¾ï¼Œarè¶…å‡ºäº†èŒƒå›´ã€‚è¿™å°†å¯¼è‡´è°ƒç”¨~IntArray()ææ„å‡½æ•°ï¼Œå®ƒå°†åˆ é™¤æˆ‘ä»¬åœ¨æ„é€ å‡½æ•°ä¸­åˆ†é…çš„æ•°ç»„!è¿›ä¸€æ­¥çœ‹æ„é€ ã€ææ„ å‡½æ•°è¢«è°ƒç”¨çš„æ—¶é—´å¦‚å‰æ‰€è¿°ï¼Œåœ¨åˆ›å»ºå¯¹è±¡æ—¶è°ƒç”¨æ„é€ å‡½æ•°ï¼Œåœ¨é”€æ¯å¯¹è±¡æ—¶è°ƒç”¨ææ„å‡½æ•°ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä½¿ç”¨std::coutè¯­å¥æ¥è¯´æ˜è¿™ä¸€ç‚¹:12345678910111213141516171819202122232425262728293031323334353637class Simple&#123;private: int m_nID; public: Simple(int nID) : m_nID&#123; nID &#125; &#123; std::cout &lt;&lt; \"Constructing Simple \" &lt;&lt; nID &lt;&lt; '\\n'; &#125; ~Simple() &#123; std::cout &lt;&lt; \"Destructing Simple\" &lt;&lt; m_nID &lt;&lt; '\\n'; &#125; int getID() &#123; return m_nID; &#125;&#125;;int main()&#123; // åœ¨æ ˆä¸Šåˆ†é…ä¸€ä¸ªSimple Simple simple&#123; 1 &#125;; std::cout &lt;&lt; simple.getID() &lt;&lt; '\\n'; // åŠ¨æ€åˆ†é…ä¸€ä¸ªSimple Simple *pSimple&#123; new Simple&#123; 2 &#125; &#125;; std::cout &lt;&lt; pSimple-&gt;getID() &lt;&lt; '\\n'; // æˆ‘ä»¬åŠ¨æ€åœ°åˆ†é…äº†pSimpleï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»åˆ é™¤å®ƒã€‚ //â­ã€ä¸æ¨èã€‘è¯·çœ‹ä¸‹é¢çš„RAIIä¸­çš„è®²è§£:\"è§„åˆ™: å¦‚æœæ‚¨çš„ç±»åŠ¨æ€åˆ†é…å†…å­˜ï¼Œè¯·ä½¿ç”¨RAIIèŒƒå‹ï¼Œä¸è¦åŠ¨æ€åˆ†é…ç±»çš„å¯¹è±¡ \" delete pSimple; //åœ¨è¿™é‡Œè°ƒç”¨äº†ææ„å‡½æ•° return 0;&#125; // simple goes out of scope here å†æ¬¡è°ƒç”¨ææ„å‡½æ•°è¿™ä¸ªç¨‹åºäº§ç”Ÿä»¥ä¸‹ç»“æœ:123456Constructing Simple 11Constructing Simple 22Destructing Simple 2Destructing Simple 1æ³¨æ„ï¼Œâ€œSimple 1â€åœ¨â€œSimple 2â€ä¹‹åè¢«é”€æ¯ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å‡½æ•°ç»“æŸä¹‹å‰åˆ é™¤äº†pSimpleï¼Œè€ŒSimpleç›´åˆ°main()ç»“æŸæ‰è¢«é”€æ¯ã€‚å…¨å±€å˜é‡åœ¨main()ä¹‹å‰æ„é€ ï¼Œåœ¨main()ä¹‹åé”€æ¯ã€‚RAII*RAII(èµ„æºè·å–å³åˆå§‹åŒ–) *æ˜¯ä¸€ç§ç¼–ç¨‹æŠ€æœ¯ï¼Œé€šè¿‡è‡ªåŠ¨æŒç»­æ—¶é—´(ä¾‹å¦‚ï¼ŒéåŠ¨æ€åˆ†é…çš„å¯¹è±¡)å°†èµ„æºä½¿ç”¨ç»‘å®šåˆ°å¯¹è±¡çš„ç”Ÿå­˜æœŸã€‚åœ¨c++ä¸­ï¼ŒRAIIæ˜¯é€šè¿‡å…·æœ‰ æ„é€ å‡½æ•° å’Œ ææ„å‡½æ•° çš„ç±»å®ç°çš„ã€‚èµ„æº (å¦‚å†…å­˜ã€æ–‡ä»¶æˆ–æ•°æ®åº“å¥æŸ„ç­‰) é€šå¸¸æ˜¯åœ¨å¯¹è±¡çš„æ„é€ å‡½æ•°ä¸­è·å¾—çš„(ä¸è¿‡å¦‚æœæœ‰æ„ä¹‰çš„è¯ï¼Œä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå¯¹è±¡ä¹‹åè·å¾—)ã€‚ç„¶åï¼Œå¯ä»¥åœ¨å¯¹è±¡å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶ä½¿ç”¨è¯¥èµ„æºã€‚å½“å¯¹è±¡è¢«é”€æ¯æ—¶ï¼Œèµ„æºåœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾ã€‚RAIIçš„ä¸»è¦ä¼˜ç‚¹æ˜¯å®ƒæœ‰åŠ©äºé˜²æ­¢èµ„æºæ³„æ¼(ä¾‹å¦‚å†…å­˜æœªé‡Šæ”¾)ï¼Œå› ä¸ºæ‰€æœ‰èµ„æºæŒæœ‰å¯¹è±¡éƒ½è¢«è‡ªåŠ¨æ¸…é™¤ã€‚æœ¬è¯¾é¡¶éƒ¨çš„IntArrayç±»æ˜¯ä¸€ä¸ªå®ç°RAIIçš„ç±»çš„ä¾‹å­â€”â€”åœ¨æ„é€ å‡½æ•°ä¸­å®ç°åˆ†é…ï¼Œåœ¨ææ„å‡½æ•°ä¸­å®ç°é‡Šæ”¾ã€‚std::stringå’Œstd::vectoræ˜¯æ ‡å‡†åº“ä¸­éµå¾ªRAIIçš„ç±»çš„ç¤ºä¾‹â€”â€”åŠ¨æ€å†…å­˜åœ¨åˆå§‹åŒ–æ—¶è·å¾—ï¼Œåœ¨é”€æ¯æ—¶è‡ªåŠ¨æ¸…é™¤ã€‚è§„åˆ™:å¦‚æœæ‚¨çš„ç±»åŠ¨æ€åˆ†é…å†…å­˜ï¼Œè¯·ä½¿ç”¨RAIIèŒƒå‹ï¼Œä¸è¦åŠ¨æ€åˆ†é…ç±»çš„å¯¹è±¡å°ç»“ï¼šæ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œå½“æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œæ‚¨çš„ç±»å¯ä»¥åœ¨å®ƒä»¬è‡ªå·±ä¹‹ååˆå§‹åŒ–å’Œæ¸…ç†ï¼Œè€Œç¨‹åºå‘˜ä¸éœ€è¦åšä»»ä½•ç‰¹æ®Šçš„å·¥ä½œ! è¿™å‡å°‘äº†å‡ºé”™çš„å¯èƒ½æ€§ï¼Œå¹¶ä½¿ç±»æ›´æ˜“äºä½¿ç”¨ã€‚","categories":[],"tags":[]},{"title":"C&C++/å‡½æ•°åŠŸèƒ½é‡å --å§”æ‰˜å‡½æ•°","slug":"C&C++/å‡½æ•°åŠŸèƒ½é‡å --å§”æ‰˜å‡½æ•°","date":"2020-05-08T10:35:55.356Z","updated":"2020-05-08T13:10:53.144Z","comments":true,"path":"archives/8dd10d3c.html","link":"","permalink":"https://longlongqin.github.io/archives/8dd10d3c.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/8-6-overlapping-and-delegating-constructors/Overlappingå«æœ‰é‡å åŠŸèƒ½çš„æ„é€ å‡½æ•°å½“å®ä¾‹åŒ–ä¸€ä¸ªæ–°å¯¹è±¡æ—¶ï¼Œå¯¹è±¡çš„æ„é€ å‡½æ•°è¢«C++ç¼–è¯‘å™¨éšå¼åœ°è°ƒç”¨ã€‚æ‹¥æœ‰å¤šä¸ªå…·æœ‰é‡å åŠŸèƒ½çš„æ„é€ å‡½æ•°çš„ç±»å¹¶ä¸å°‘è§ã€‚è€ƒè™‘ä»¥ä¸‹ç±»åˆ«:12345678910111213141516//è¯¥ç±»æœ‰ä¸¤ä¸ªæ„é€ å‡½æ•°:ä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•°å’Œä¸€ä¸ªæ¥å—æ•´æ•°çš„æ„é€ å‡½æ•°ã€‚å› ä¸ºæ„é€ å‡½æ•°çš„â€œæ‰§è¡Œä»£ç â€éƒ¨åˆ†æ˜¯ä¸¤ä¸ªæ„é€ å‡½æ•°éƒ½éœ€è¦çš„ï¼Œæ‰€ä»¥ä»£ç åœ¨æ¯ä¸ªæ„é€ å‡½æ•°ä¸­é‡å¤ã€‚class Foo&#123;public: Foo() &#123; // code to do A &#125; Foo(int value) &#123; // code to do A // code to do B &#125;&#125;;æ­£å¦‚æ‚¨(å¸Œæœ›)å·²ç»äº†è§£åˆ°çš„ï¼Œå°½å¯èƒ½é¿å…å‡ºç°é‡å¤çš„ä»£ç ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æ¥çœ‹çœ‹è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€äº›æ–¹æ³•ã€‚è§£å†³é‡å åŠŸèƒ½éƒ¨åˆ†æ˜¾è€Œæ˜“è§çš„è§£å†³æ–¹æ¡ˆåœ¨c++ 11ä¹‹å‰æ˜¯è¡Œä¸é€šçš„æœ€æ˜æ˜¾çš„è§£å†³æ–¹æ¡ˆæ˜¯è®©Foo(int)æ„é€ å‡½æ•°è°ƒç”¨Foo()æ„é€ å‡½æ•°æ¥æ‰§è¡ŒAéƒ¨åˆ†ã€‚1234567891011121314class Foo&#123;public: Foo() &#123; // code to do A &#125; Foo(int value) &#123; Foo(); // ä½¿ç”¨ä¸Šé¢çš„æ„é€ å‡½æ•°æ‰§è¡ŒA(ä¸èµ·ä½œç”¨) // code to do B &#125;&#125;;æˆ–è€…æ˜¯è¿™æ ·ï¼š12345678910111213class Foo&#123;public: Foo() &#123; // code to do A &#125; Foo(int value): Foo() // use the above constructor to do A (åœ¨C++11ä¹‹å‰ï¼Œæ˜¯è¡Œä¸é€šçš„) &#123; // code to do B &#125;&#125;;ç„¶è€Œï¼Œå¯¹äºé¢„c++ 11ç¼–è¯‘å™¨ï¼Œå¦‚æœæ‚¨è¯•å›¾è®©ä¸€ä¸ªæ„é€ å‡½æ•°è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒé€šå¸¸ä¼šç¼–è¯‘ï¼Œä½†å®ƒä¸ä¼šåƒæ‚¨æ‰€æœŸæœ›çš„é‚£æ ·å·¥ä½œï¼Œå¹¶ä¸”æ‚¨å¯èƒ½ä¼šèŠ±è´¹å¾ˆé•¿æ—¶é—´è¯•å›¾æ‰¾å‡ºåŸå› ï¼Œå³ä½¿ä½¿ç”¨è°ƒè¯•å™¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¯èƒ½çš„ä¸€ç§è§£é‡Šï¼šåœ¨C++ 11ä¹‹å‰ï¼Œä»å¦ä¸€ä¸ªæ„é€ å‡½æ•°æ˜¾å¼åœ°è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å‡½æ•° å°†åˆ›å»ºä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œä½¿ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–ä¸´æ—¶å¯¹è±¡ï¼Œç„¶åä¸¢å¼ƒå®ƒï¼Œä¿æŒåŸå§‹å¯¹è±¡ä¸å˜ã€‚ä½¿ç”¨å•ç‹¬çš„å‡½æ•°C++ å…è®¸æ„é€ å‡½æ•°è°ƒç”¨ç±»ä¸­çš„ éæ„é€ å‡½æ•°ã€‚ä½†è¦æ³¨æ„ï¼Œéæ„é€ å‡½æ•°ä½¿ç”¨çš„ä»»ä½•æˆå‘˜éƒ½å·²ç»åˆå§‹åŒ–äº†ã€‚å°½ç®¡æ‚¨å¯èƒ½ä¼šè¯•å›¾å°†ä»£ç ä»ç¬¬ä¸€ä¸ªæ„é€ å‡½æ•°å¤åˆ¶åˆ°ç¬¬äºŒä¸ªæ„é€ å‡½æ•°ï¼Œä½†æ˜¯æœ‰é‡å¤çš„ä»£ç ä¼šä½¿æ‚¨çš„ç±»æ›´éš¾äºç†è§£ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿæ›´éº»çƒ¦ã€‚æ­¤é—®é¢˜çš„æœ€ä½³è§£å†³æ–¹æ¡ˆæ˜¯åˆ›å»ºä¸€ä¸ªéæ„é€ å‡½æ•°æ¥æ‰§è¡Œå…¬å…±åˆå§‹åŒ–ï¼Œå¹¶è®©ä¸¤ä¸ªæ„é€ å‡½æ•°éƒ½è°ƒç”¨è¯¥å‡½æ•°ã€‚1234567891011121314151617181920class Foo&#123;private: void DoA() &#123; // code to do A &#125; public: Foo() &#123; DoA(); &#125; Foo(int nValue) &#123; DoA(); // code to do B &#125; &#125;;é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä»£ç é‡å¤ç‡è¢«ä¿æŒåˆ°æœ€å°ã€‚å°†åˆå§‹åŒ–éƒ¨åˆ†ä»£ç åˆ†ç¦»å‡ºæ¥æ‚¨å¯èƒ½ä¼šå‘ç°è‡ªå·±å¤„äºè¿™æ ·ä¸€ç§æƒ…å†µ:æ‚¨æƒ³è¦ç¼–å†™ä¸€ä¸ªæˆå‘˜å‡½æ•°æ¥é‡æ–°åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œä½¿å…¶è¿”å›é»˜è®¤å€¼ã€‚ç”±äºæ‚¨å¯èƒ½å·²ç»æœ‰ä¸€ä¸ªè¿™æ ·çš„æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æ‚¨å¯èƒ½ä¼šå°è¯•ä»æ‚¨çš„æˆå‘˜å‡½æ•°ä¸­è°ƒç”¨æ„é€ å‡½æ•°ã€‚ç„¶è€Œï¼Œè¯•å›¾ç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°é€šå¸¸ä¼šå¯¼è‡´æ„å¤–è¡Œä¸ºã€‚è®¸å¤šå¼€å‘äººå‘˜åªæ˜¯ç®€å•åœ°ä»åˆå§‹åŒ–å‡½æ•°çš„æ„é€ å‡½æ•°ä¸­å¤åˆ¶ä»£ç ï¼Œè¿™å¯ä»¥å·¥ä½œï¼Œä½†æ˜¯ä¼šå¯¼è‡´é‡å¤çš„ä»£ç ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†ä»£ç ä»æ„é€ å‡½æ•°ç§»åˆ°æ–°å‡½æ•°ä¸­ï¼Œå¹¶è®©æ„é€ å‡½æ•°è°ƒç”¨è¯¥å‡½æ•°æ¥å®Œæˆåˆå§‹åŒ–æ•°æ®çš„å·¥ä½œ:12345678910111213141516171819class Foo&#123;public: Foo() &#123; Init(); &#125; Foo(int value) &#123; Init(); // do something with value &#125; void Init() &#123; // code to init Foo &#125;&#125;;åŒ…å«ä¸€ä¸ªInit()å‡½æ•°æ˜¯ç›¸å½“å¸¸è§çš„ï¼Œè¯¥å‡½æ•°å°†æˆå‘˜å˜é‡åˆå§‹åŒ–ä¸ºå…¶é»˜è®¤å€¼ï¼Œç„¶åè®©æ¯ä¸ªæ„é€ å‡½æ•°åœ¨æ‰§è¡Œç‰¹å®šäºå‚æ•°çš„ä»»åŠ¡ä¹‹å‰è°ƒç”¨Init()å‡½æ•°ã€‚è¿™å°†æœ€å°åŒ–ä»£ç é‡å¤ï¼Œå¹¶å…è®¸æ‚¨åœ¨ä»»ä½•åœ°æ–¹æ˜¾å¼åœ°è°ƒç”¨Init()ã€‚ä¸€ä¸ªå°è­¦å‘Š:åœ¨ä½¿ç”¨Init()å‡½æ•°å’Œ åŠ¨æ€åˆ†é…å†…å­˜æ—¶è¦å°å¿ƒã€‚å› ä¸ºInit()å‡½æ•°å¯ä»¥ç”±ä»»ä½•äººåœ¨ä»»ä½•æ—¶å€™è°ƒç”¨ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨Init()æ—¶ï¼ŒåŠ¨æ€åˆ†é…çš„å†…å­˜å¯èƒ½å·²ç»åˆ†é…ï¼Œä¹Ÿå¯èƒ½è¿˜æ²¡æœ‰åˆ†é…ã€‚è¦æ³¨æ„é€‚å½“åœ°å¤„ç†è¿™ç§æƒ…å†µâ€”â€”è¿™å¯èƒ½æœ‰ç‚¹ä»¤äººå›°æƒ‘ï¼Œå› ä¸ºéç©ºæŒ‡é’ˆå¯ä»¥æ˜¯åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼Œä¹Ÿå¯ä»¥æ˜¯æœªåˆå§‹åŒ–çš„æŒ‡é’ˆ!åœ¨c++ 11ä¸­å§”æ‰˜æ„é€ å‡½æ•°ä»c++ 11å¼€å§‹ï¼Œå…è®¸æ„é€ å‡½æ•°è°ƒç”¨å…¶ä»–æ„é€ å‡½æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºå§”æ‰˜æ„é€ å‡½æ•°(æˆ–æ„é€ å‡½æ•°é“¾)ã€‚è¦è®©ä¸€ä¸ªæ„é€ å‡½æ•°è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œåªéœ€è°ƒç”¨æˆå‘˜åˆå§‹åŒ–å™¨åˆ—è¡¨ä¸­çš„æ„é€ å‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç›´æ¥è°ƒç”¨å¦ä¸€ä¸ªæ„é€ å‡½æ•°æ˜¯å¯ä»¥æ¥å—çš„ã€‚åº”ç”¨åˆ°æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­:1234567891011121314class Foo&#123;private: public: Foo() &#123; //code to do A &#125; Foo(int value) : Foo() //ä½¿ç”¨ é»˜è®¤æ„é€ å‡½æ•°Foo() æ¥æ‰§è¡ŒA &#123; //code to do B &#125;&#125;;æ­£å¦‚æ‚¨æ‰€æœŸæœ›çš„é‚£æ ·ã€‚ç¡®ä¿ä»æˆå‘˜åˆå§‹åŒ–å™¨åˆ—è¡¨è°ƒç”¨æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯åœ¨æ„é€ å‡½æ•°çš„ä¸»ä½“ä¸­è°ƒç”¨ã€‚ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä½¿ç”¨å§”æ‰˜æ„é€ å‡½æ•°æ¥å‡å°‘å†—ä½™ä»£ç çš„ä¾‹å­:12345678910111213141516171819#include &lt;iostream&gt;#include &lt;string&gt;class Employee&#123;private: int m_id; std::string m_name; public: Employee(int id=0; const std::string &amp;name=\"\") : m_id(id), m_name(name) &#123; std::cout &lt;&lt; \"Employee \" &lt;&lt; m_name &lt;&lt; \" created.\\n\"; &#125; // ä½¿ç”¨å§”æ‰˜æ„é€ å‡½æ•°æ¥æœ€å°åŒ–å†—ä½™ä»£ç  Employee(const std::string &amp;name) : Employee(0, name) &#123;&#125;&#125;;è¿™ä¸ªç±»æœ‰ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œå…¶ä¸­ä¸€ä¸ªå§”æ‰˜ç»™Employee(int, const std::string &amp;)ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå†—ä½™ä»£ç çš„æ•°é‡è¢«æœ€å°åŒ–(æˆ‘ä»¬åªéœ€è¦ç¼–å†™ä¸€ä¸ªæ„é€ å‡½æ•°ä½“ï¼Œè€Œä¸æ˜¯ä¸¤ä¸ª)ã€‚é™„åŠ è¯´æ˜å…³äºå§”æ‰˜æ„é€ å‡½æ•°çš„ä¸€äº›é™„åŠ è¯´æ˜ã€‚é¦–å…ˆï¼Œå§”æ‰˜ç»™å¦ä¸€ä¸ªæ„é€ å‡½æ•°çš„æ„é€ å‡½æ•°æœ¬èº«ä¸å…è®¸æ‰§è¡Œä»»ä½•æˆå‘˜åˆå§‹åŒ–ã€‚æ‰€ä»¥ä½ çš„æ„é€ å‡½æ•°å¯ä»¥å§”æ‰˜æˆ–åˆå§‹åŒ–ï¼Œä½†ä¸èƒ½åŒæ—¶å§”æ‰˜å’Œåˆå§‹åŒ–ã€‚å…¶æ¬¡ï¼Œä¸€ä¸ªæ„é€ å‡½æ•°å¯ä»¥å§”æ‰˜ç»™å¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œåè€…å†å§”æ‰˜ç»™ç¬¬ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚è¿™å½¢æˆäº†ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œå¹¶å°†å¯¼è‡´æ‚¨çš„ç¨‹åºè¿è¡Œå †æ ˆç©ºé—´å’Œå´©æºƒã€‚å¯ä»¥é€šè¿‡ç¡®ä¿æ‰€æœ‰æ„é€ å‡½æ•°éƒ½è§£æä¸ºéå§”æ‰˜çš„æ„é€ å‡½æ•°æ¥é¿å…è¿™ç§æƒ…å†µã€‚","categories":[],"tags":[]},{"title":"C&C++/éé™æ€æˆå‘˜åˆå§‹åŒ–","slug":"C&C++/éé™æ€æˆå‘˜åˆå§‹åŒ–","date":"2020-05-08T09:52:04.083Z","updated":"2020-05-08T10:10:33.316Z","comments":true,"path":"archives/4635f066.html","link":"","permalink":"https://longlongqin.github.io/archives/4635f066.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-programming/8-5b-non-static-member-initialization/å½“ç¼–å†™ä¸€ä¸ªå…·æœ‰å¤šä¸ªæ„é€ å‡½æ•°çš„ç±»(å¤§å¤šæ•°æ„é€ å‡½æ•°)æ—¶ï¼Œå¿…é¡»ä¸ºæ¯ä¸ªæ„é€ å‡½æ•°ä¸­çš„æ‰€æœ‰æˆå‘˜æŒ‡å®šé»˜è®¤å€¼ï¼Œè¿™ä¼šå¯¼è‡´ä»£ç å†—ä½™ã€‚å¦‚æœæ›´æ–°æˆå‘˜çš„é»˜è®¤å€¼ï¼Œåˆ™éœ€è¦ä¿®æ”¹æ¯ä¸ªæ„é€ å‡½æ•°ã€‚ä»c++ 11å¼€å§‹ï¼Œå¯ä»¥ç›´æ¥ç»™æ™®é€šçš„ç±»æˆå‘˜å˜é‡(é‚£äº›ä¸ä½¿ç”¨staticå…³é”®å­—çš„å˜é‡)ä¸€ä¸ªé»˜è®¤çš„åˆå§‹å€¼:æ³¨æ„ï¼Œä½¿ç”¨éé™æ€æˆå‘˜åˆå§‹åŒ– æ¥ åˆå§‹åŒ–æˆå‘˜ éœ€è¦ä½¿ç”¨ç­‰å·æˆ–å¤§æ‹¬å·(ç»Ÿä¸€)åˆå§‹åŒ–å™¨ï¼Œä½†æ˜¯ç›´æ¥åˆå§‹åŒ–è¡¨ï¼ˆå³ï¼Œä½¿ç”¨å°æ‹¬å·ï¼‰å•åœ¨è¿™é‡Œä¸èµ·ä½œç”¨ã€‚12345678910111213141516171819202122232425262728#include &lt;iostream&gt;class Rectangle&#123;private: //ç»™è¿™äº›æ™®é€šçš„ç±»æˆå‘˜å˜é‡(é‚£äº›ä¸ä½¿ç”¨staticå…³é”®å­—çš„å˜é‡)ä¸€ä¸ªé»˜è®¤çš„åˆå§‹å€¼: //æ³¨æ„ï¼šä½ å¯ä»¥ç”¨ï¼šâ€œ=â€ æˆ– â€œå¤§æ‹¬å·(ç»Ÿä¸€åˆå§‹åŒ–)â€ // ä½†æ˜¯ï¼Œ\"ç›´æ¥åˆå§‹åŒ–(å³ï¼Œä½¿ç”¨å°æ‹¬å·)\" åœ¨è¿™é‡Œæ˜¯ä¸èƒ½ç”¨çš„ã€‚â­ double m_length&#123; 1.0 &#125;; // m_length has a default value of 1.0 double m_width&#123; 1.0 &#125;; // m_width has a default value of 1.0 public: void print() &#123; std::cout &lt;&lt; \"length: \" &lt;&lt; m_length &lt;&lt; \", width: \" &lt;&lt; m_width &lt;&lt; '\\n'; &#125;&#125;; int main()&#123; Rectangle x&#123;&#125;; // x.m_length = 1.0, x.m_width = 1.0 x.print(); return 0;&#125;/*ç»“æœ*/length: 1.0, width: 1.0éé™æ€æˆå‘˜åˆå§‹åŒ– (ä¹Ÿç§°ä¸ºç±»å†…æˆå‘˜åˆå§‹åŒ–) ä¸ºæ‚¨çš„æˆå‘˜å˜é‡æä¾›é»˜è®¤å€¼ï¼Œå¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰ä¸ºæˆå‘˜æœ¬èº«æä¾›åˆå§‹åŒ–å€¼(é€šè¿‡æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨)ï¼Œåˆ™æ„é€ å‡½æ•°å°†ä½¿ç”¨è¿™äº›å€¼ã€‚æ„é€ å‡½æ•°ä»ç„¶å†³å®šå¯ä»¥åˆ›å»ºä»€ä¹ˆç±»å‹çš„å¯¹è±¡12345678910111213141516171819202122232425262728#include &lt;iostream&gt;class Rectangle&#123;private: double m_length&#123; 1.0 &#125;; double m_width&#123; 1.0 &#125;; public: //æ³¨æ„:æœ¬ä¾‹ä¸­æ²¡æœ‰æä¾›é»˜è®¤æ„é€ å‡½æ•° Rectangle(double length, double width) : m_length&#123; length &#125;, m_width&#123; width &#125; &#123; // m_length and m_width ç”±æ„é€ å‡½æ•°åˆå§‹åŒ–(ä¸ä½¿ç”¨é»˜è®¤å€¼) &#125; void print() &#123; std::cout &lt;&lt; \"length: \" &lt;&lt; m_length &lt;&lt; \", width: \" &lt;&lt; m_width &lt;&lt; '\\n'; &#125; &#125;;int main()&#123; Rectangle x&#123;&#125;; //âœ–ï¼Œå°†ä¸ä¼šè¢«ç¼–è¯‘ã€‚å› ä¸ºä¸å­˜åœ¨é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨è¿™ç§å½¢å¼ã€‚ï¼ˆå³ä½¿æˆå‘˜æœ‰é»˜è®¤çš„åˆå§‹åŒ–å€¼ï¼Œä½†æ˜¯å®ƒä¸æ˜¯é»˜è®¤çš„æ„é€ å‡½æ•°æä¾›çš„ï¼‰ return 0;&#125;å°½ç®¡æˆ‘ä»¬ä¸ºæ‰€æœ‰æˆå‘˜æä¾›äº†é»˜è®¤å€¼ï¼Œä½†æ˜¯æ²¡æœ‰æä¾›é»˜è®¤æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•åˆ›å»ºæ²¡æœ‰å‚æ•°çš„Rectangleå¯¹è±¡ã€‚æ„é€ å‡½æ•°çš„åˆå§‹åŒ–å™¨åˆ—è¡¨ ä¼˜å…ˆäº é»˜è®¤åˆå§‹å€¼å¦‚æœæä¾›äº†é»˜è®¤åˆå§‹å€¼ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº† æ„é€ å‡½æ•°é€šè¿‡æˆå‘˜åˆå§‹åŒ–å™¨åˆ—è¡¨åˆå§‹åŒ–æˆå‘˜ï¼Œåˆ™æˆå‘˜åˆå§‹åŒ–å™¨åˆ—è¡¨ä¼˜å…ˆã€‚ä¸‹é¢çš„ä¾‹å­è¯´æ˜äº†è¿™ä¸€ç‚¹:12345678910111213141516171819202122232425262728293031323334353637383940414243#include &lt;iostream&gt;class Rectangle&#123;private: double m_length&#123; 1.0 &#125;; double m_width&#123; 1.0 &#125;; public: Rectangle(double length, double width) : m_length&#123; length &#125;, m_width&#123; width &#125; &#123; //m_length and m_width ç”±æ„é€ å‡½æ•°åˆå§‹åŒ–(ä¸ä½¿ç”¨é»˜è®¤å€¼) &#125; Rectangle(double length) : m_length&#123; length &#125; &#123; // m_length ç”±æ„é€ å‡½æ•°åˆå§‹åŒ–. // m_width's ä½¿ç”¨é»˜è®¤çš„å€¼(1.0) &#125; void print() &#123; std::cout &lt;&lt; \"length: \" &lt;&lt; m_length &lt;&lt; \", width: \" &lt;&lt; m_width &lt;&lt; '\\n'; &#125; &#125;;int main()&#123; Rectangle x&#123; 2.0, 3.0 &#125;; x.print(); Rectangle y&#123; 4.0 &#125;; y.print(); return 0;&#125;/*ç»“æœ*/length: 2.0, width: 3.0length: 4.0, width: 1.0","categories":[],"tags":[]},{"title":"C&C++/æ„é€ å‡½æ•°","slug":"C&C++/æ„é€ å‡½æ•°","date":"2020-05-07T16:08:55.739Z","updated":"2020-05-08T09:06:13.023Z","comments":true,"path":"archives/781f4530.html","link":"","permalink":"https://longlongqin.github.io/archives/781f4530.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/85-constructors/å½“ä¸€ä¸ªç±»ï¼ˆæˆ–ç»“æ„ä½“ï¼‰çš„æ‰€æœ‰æˆå‘˜éƒ½æ˜¯publicæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼šåˆå§‹åŒ–åˆ—è¡¨ï¼ˆinitialization list ï¼‰æˆ–è€…ï¼Œç»Ÿä¸€åˆå§‹åŒ–ï¼ˆuniform initializationï¼‰æ¥åˆå§‹åŒ–è¿™ä¸ªç±»ï¼ˆæˆ–ç»“æ„ä½“ï¼‰1234567891011121314class Foo&#123;public: int m_x; int m_y;&#125;; int main()&#123; Foo foo1 = &#123; 4, 5 &#125;; // initialization list Foo foo2 &#123; 6, 7 &#125;; // uniform initialization return 0;&#125;ä½†æ˜¯ï¼Œä¸€æ—¦æˆ‘ä»¬å°†ä»»ä½•æˆå‘˜å˜é‡è®¾ä¸ºç§æœ‰ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å†ä»¥è¿™ç§æ–¹å¼åˆå§‹åŒ–ç±»äº†ã€‚è¿™æ˜¯æœ‰æ„ä¹‰çš„:å¦‚æœä½ ä¸èƒ½ç›´æ¥è®¿é—®ä¸€ä¸ªå˜é‡(å› ä¸ºå®ƒæ˜¯ç§æœ‰çš„)ï¼Œè®²é“ç†ä½ æ˜¯ä¸èƒ½å¤Ÿç›´æ¥åˆå§‹åŒ–å®ƒã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç”¨ç§æœ‰æˆå‘˜å˜é‡åˆå§‹åŒ–ä¸€ä¸ªç±»å‘¢? ç­”æ¡ˆæ˜¯é€šè¿‡æ„é€ å‡½æ•°ã€‚æ„é€ å‡½æ•°(Constructor)æ„é€ å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„ ç±»æˆå‘˜å‡½æ•°ï¼Œåœ¨å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨ã€‚æ„é€ å‡½æ•°é€šå¸¸ç”¨äºåˆå§‹åŒ–ç±»çš„æˆå‘˜å˜é‡ï¼Œä½¿å…¶å…·æœ‰é€‚å½“çš„é»˜è®¤å€¼æˆ–ç”¨æˆ·æä¾›çš„å€¼ï¼Œæˆ–æ‰§è¡Œä½¿ç”¨ç±»æ‰€éœ€çš„ä»»ä½•è®¾ç½®æ­¥éª¤(ä¾‹å¦‚æ‰“å¼€æ–‡ä»¶æˆ–æ•°æ®åº“)ã€‚ä¸æ™®é€šæˆå‘˜å‡½æ•°ä¸åŒï¼Œæ„é€ å‡½æ•°æœ‰ç‰¹å®šçš„å‘½åè§„åˆ™ï¼šæ„é€ å‡½æ•°å¿…é¡»å…·æœ‰ä¸ç±»ç›¸åŒçš„åå­—(ä½¿ç”¨ç›¸åŒçš„å¤§å°å†™)æ„é€ å‡½æ•°æ²¡æœ‰è¿”å›ç±»å‹(ç”šè‡³ä¸æ˜¯void)é»˜è®¤çš„æ„é€ å‡½æ•°ä¸æ¥å—å‚æ•°çš„æ„é€ å‡½æ•° (æˆ–æ‰€æœ‰å‚æ•°éƒ½æœ‰é»˜è®¤å€¼çš„æ„é€ å‡½æ•°) ç§°ä¸ºé»˜è®¤æ„é€ å‡½æ•°ã€‚å¦‚æœæ²¡æœ‰æä¾› ç”¨æˆ·æä¾›çš„åˆå§‹åŒ–å€¼ï¼Œåˆ™è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°ã€‚ä¸€ä¸ªä¾‹å­ï¼š123456789101112131415161718192021222324252627282930#include &lt;iostream&gt;class Fraction&#123;private: int m_numerator; int m_denominator; public: Fraction() // default constructor &#123; m_numerator = 0; m_denominator = 1; &#125; int getNumerator() &#123;return m_numerator;&#125; int getDenominator() &#123;return m_denominator;&#125; double getValue &#123;return static_cast&lt;double&gt;(m_numerator) / m_denominator; &#125;&#125;;int main()&#123; Fraction frac; //ç”±äºæ²¡æœ‰å®å‚ï¼Œæ‰€ä»¥ä¼šé»˜è®¤è°ƒç”¨Fraction() std::cout &lt;&lt; frac.getNumerator() &lt;&lt; \"/\" &lt;&lt; frac.getDenominator() &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/0/1ä¸Šé¢ä¾‹å­ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨å®ä¾‹åŒ–ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„Fractionç±»å‹çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨ä¸ºè¯¥å¯¹è±¡åˆ†é…å†…å­˜ä¹‹åï¼Œå°†ç«‹å³è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°ï¼Œå¹¶åˆå§‹åŒ–æˆ‘ä»¬çš„å¯¹è±¡ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬çš„numeratorå’Œdenominatoræ˜¯ç”¨é»˜è®¤æ„é€ å‡½æ•°ä¸­è®¾ç½®çš„å€¼åˆå§‹åŒ–çš„! å¦‚æœæ²¡æœ‰é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œnumeratorå’Œdenominatorå°±ä¼šæœ‰åƒåœ¾å€¼ï¼Œç›´åˆ°æˆ‘ä»¬æ˜¾å¼åœ°ä¸ºå®ƒä»¬åˆ†é…åˆç†çš„å€¼ï¼Œæˆ–è€…é€šè¿‡å…¶ä»–æ–¹æ³•åˆå§‹åŒ–å®ƒä»¬(è®°ä½: é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šåˆå§‹åŒ–åŸºæœ¬å˜é‡)ã€‚æ¥æ”¶å‚æ•°çš„æ„é€ å‡½æ•°è™½ç„¶é»˜è®¤æ„é€ å‡½æ•°å¯¹äºç¡®ä¿ç”¨åˆç†çš„é»˜è®¤å€¼åˆå§‹åŒ–ç±»éå¸¸æœ‰ç”¨ã€‚ä½†é€šå¸¸æˆ‘ä»¬å¸Œæœ›ç±»çš„å®ä¾‹å…·æœ‰æˆ‘ä»¬æä¾›çš„ç‰¹å®šå€¼ã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿˜å¯ä»¥ç”¨å‚æ•°å£°æ˜æ„é€ å‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°çš„ä¾‹å­ï¼Œå®ƒä½¿ç”¨ä¸¤ä¸ªæ•´æ•°å‚æ•°æ¥åˆå§‹åŒ–åˆ†å­å’Œåˆ†æ¯:1234567891011121314151617181920212223242526272829#include &lt;iostream&gt;#include &lt;cassert&gt;class Fraction&#123;private: int m_numerator; int m_denominator;public: Fraction() // default constructor &#123; m_numerator = 0; m_denominator = 1; &#125; //å¸¦æœ‰ä¸¤ä¸ªå½¢å‚çš„æ„é€ å‡½æ•°ï¼Œå…¶ä¸­ä¸€ä¸ªå½¢å‚æœ‰é»˜è®¤çš„å€¼â­ Fraction(int numerator, int denominator = 1) &#123; assert(denominator != 0); m_numerator = numerator; m_denominator = denominator; &#125; int getNumerator() &#123; return m_numerator; &#125; int getDenominator() &#123; return m_denominator; &#125; double getValue() &#123; return static_cast&lt;double&gt;(m_numerator) / m_denominator; &#125;&#125;;æ³¨æ„ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ªæ„é€ å‡½æ•°:ä¸€ä¸ªæ˜¯é»˜è®¤æƒ…å†µä¸‹è°ƒç”¨çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œå¦ä¸€ä¸ªæ˜¯æ¥å—ä¸¤ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ã€‚ç”±äºå‡½æ•°é‡è½½ï¼Œè¿™ä¸¤ä¸ªæ„é€ å‡½æ•°å¯ä»¥åœ¨åŒä¸€ä¸ªç±»ä¸­å’Œå¹³å…±å¤„ã€‚å®é™…ä¸Šï¼Œåªè¦æ¯ä¸ªæ„é€ å‡½æ•°éƒ½æœ‰å”¯ä¸€çš„ç­¾å (å‚æ•°çš„æ•°é‡å’Œç±»å‹)ï¼Œ å°±å¯ä»¥å®šä¹‰ä»»æ„æ•°é‡çš„æ„é€ å‡½æ•°ã€‚å¦‚ä½•ä½¿ç”¨å¸¦æœ‰å‚æ•°çš„æ„é€ å‡½æ•°æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ æ‹¬å· æˆ– ç›´æ¥åˆå§‹åŒ–:12Fraction fiveThirds&#123; 5, 3 &#125;; // ä½¿ç”¨å¤§æ‹¬å· initialization, calls Fraction(int, int)ã€æ¨èâ­ã€‘Fraction threeQuarters(3, 4); // ç›´æ¥åˆå§‹åŒ–, also calls Fraction(int, int)æ³¨æ„ï¼Œæˆ‘ä»¬ç»™äº†æ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¸€ä¸ªé»˜è®¤å€¼ï¼Œæ‰€ä»¥ä¸‹é¢çš„æ“ä½œä¹Ÿæ˜¯åˆæ³•çš„:1Fraction six&#123; 6 &#125;; // calls Fraction(int, int) constructor, ç¬¬äºŒä¸ªå‚æ•°ä½¿ç”¨é»˜è®¤å€¼åœ¨ç±»ä¸­ä½¿ç”¨â€œ=â€æ¥å¤åˆ¶åˆå§‹åŒ–ï¼ˆC++11ä¹‹å‰ï¼‰æœ¬èŠ‚åªåœ¨æ‚¨ä½¿ç”¨æ¯”c++ 11æ›´è€çš„æ ‡å‡†æ—¶æ‰æœ‰æ„ä¹‰ã€‚ä¸åŸºæœ¬å˜é‡éå¸¸ç›¸ä¼¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¤åˆ¶åˆå§‹åŒ–æ¥åˆå§‹åŒ–ç±»:12Fraction six = Fraction&#123; 6 &#125;; // Copy initialize a Fraction, will call Fraction(6, 1)Fraction seven = 7; //å¤åˆ¶åˆå§‹åŒ–ä¸€ä¸ªFractionã€‚ç¼–è¯‘å™¨å°†å°è¯•æ‰¾åˆ°ä¸€ç§æ–¹æ³•å°†7è½¬æ¢æˆFractionï¼Œè¿™å°†è°ƒç”¨åˆ†æ•°(7,1)æ„é€ å‡½æ•°ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨é¿å…å¯¹ç±»è¿›è¡Œè¿™ç§å½¢å¼çš„åˆå§‹åŒ–ï¼Œå› ä¸ºå®ƒçš„æ•ˆç‡å¯èƒ½æ¯”è¾ƒä½ã€‚è™½ç„¶ç›´æ¥åˆå§‹åŒ–ã€ç»Ÿä¸€åˆå§‹åŒ–å’Œå¤åˆ¶åˆå§‹åŒ–ä¸åŸºæœ¬ç±»å‹çš„å·¥ä½œæ–¹å¼ç›¸åŒï¼Œä½†æ˜¯å¤åˆ¶åˆå§‹åŒ–ä¸ç±»çš„å·¥ä½œæ–¹å¼ä¸åŒ(å°½ç®¡æœ€ç»ˆç»“æœé€šå¸¸ç›¸åŒ)ã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„ç« èŠ‚ä¸­æ›´è¯¦ç»†åœ°æ¢è®¨è¿™äº›å·®å¼‚å‡å°‘æ„é€ å‡½æ•°çš„ä¸ªæ•°åœ¨ä¸Šé¢çš„Fractionç±»çš„ åŒæ„é€ å‡½æ•° å£°æ˜ä¸­ï¼Œé»˜è®¤æ„é€ å‡½æ•°å®é™…ä¸Šæœ‰äº›å¤šä½™ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªç±»ç®€åŒ–å¦‚ä¸‹:12345678910111213141516171819202122#include &lt;cassert&gt; class Fraction&#123;private: int m_numerator; int m_denominator; public: // Default constructor Fraction(int numerator=0, int denominator=1) //â­ &#123; assert(denominator != 0); m_numerator = numerator; m_denominator = denominator; &#125; int getNumerator() &#123; return m_numerator; &#125; int getDenominator() &#123; return m_denominator; &#125; double getValue() &#123; return static_cast&lt;double&gt;(m_numerator) / m_denominator; &#125;&#125;;å°½ç®¡è¿™ä¸ªæ„é€ å‡½æ•°ä»ç„¶æ˜¯ä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯ç°åœ¨å®ƒå·²ç»è¢«å®šä¹‰ä¸ºå¯ä»¥æ¥å— ä¸€ä¸ª æˆ– ä¸¤ä¸ª ç”¨æˆ·æä¾›çš„å€¼ã€‚1234Fraction zero; // will call Fraction(0, 1)Fraction zero&#123;&#125;; // will call Fraction(0, 1)Fraction six&#123; 6 &#125;; // will call Fraction(6, 1)Fraction fiveThirds&#123; 5, 3 &#125;; // will call Fraction(5, 3)éšå¼ç”Ÿæˆçš„é»˜è®¤æ„é€ å‡½æ•°å¦‚æœä½ çš„ç±»æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œc++ä¼šè‡ªåŠ¨ä¸ºä½ ç”Ÿæˆä¸€ä¸ªpublicçš„é»˜è®¤æ„é€ å‡½æ•°ã€‚è¿™æœ‰æ—¶è¢«ç§°ä¸ºéšå¼æ„é€ å‡½æ•°(æˆ–éšå¼ç”Ÿæˆçš„æ„é€ å‡½æ•°)ã€‚123456789class Date&#123;private: int m_year; int m_month; int m_day; //ç”¨æˆ·æ²¡æœ‰æä¾›æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å°†ä¼šç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„æ„é€ å‡½æ•°ï¼ˆå³ï¼Œä¸å¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼‰&#125;è¿™ä¸ªç‰¹æ®Šçš„éšå¼æ„é€ å‡½æ•°å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„Dateå¯¹è±¡ï¼Œä½†æ˜¯ä¸åˆå§‹åŒ–ä»»ä½•æˆå‘˜(å› ä¸ºæ‰€æœ‰çš„æˆå‘˜éƒ½æ˜¯åŸºæœ¬ç±»å‹ï¼Œå®ƒä»¬åœ¨åˆ›å»ºæ—¶ä¸ä¼šåˆå§‹åŒ–)ã€‚å¦‚æœDateæœ‰è‡ªå·±æ˜¯ç±»ç±»å‹çš„æˆå‘˜ï¼Œä¾‹å¦‚std::stringï¼Œé‚£ä¹ˆè¿™äº›æˆå‘˜çš„æ„é€ å‡½æ•°å°†è¢«è‡ªåŠ¨è°ƒç”¨ã€‚çœ‹ä¸€ä¸ªä¾‹å­ï¼šï¼ˆä¸ºäº†ç¡®ä¿æˆå‘˜å˜é‡å¾—åˆ°åˆå§‹åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®ƒä»¬çš„å£°æ˜ä¸­åˆå§‹åŒ–å®ƒä»¬ã€‚ï¼‰1234567class Date&#123;private: int m_year&#123; 1900 &#125;; int m_month&#123; 1 &#125;; int m_day&#123; 1 &#125;;&#125;;è™½ç„¶ä½ çœ‹ä¸åˆ°éšå¼ç”Ÿæˆçš„æ„é€ å‡½æ•°ï¼Œä½†ä½ å¯ä»¥è¯æ˜å®ƒçš„å­˜åœ¨:12345678910111213141516class Date&#123;private: int m_year&#123; 1900 &#125;; int m_month&#123; 1 &#125;; int m_day&#123; 1 &#125;; // No constructor provided, so C++ creates a public default constructor for us&#125;; int main()&#123; Date date&#123;&#125;; // calls implicit constructorâ­ return 0;&#125;å½“ç±»ä¸­æœ‰ä»»ä½•æ˜¾å¼æ„é€ å‡½æ•°ï¼Œåˆ™ä¸ä¼šæä¾›éšå¼æ„é€ å‡½æ•°å¦‚æœæ‚¨çš„ç±»æœ‰ä»»ä½•å…¶ä»–æ„é€ å‡½æ•°ï¼Œåˆ™ä¸ä¼šæä¾›éšå¼ç”Ÿæˆçš„æ„é€ å‡½æ•°ã€‚ä¾‹å¦‚:12345678910111213141516171819202122232425class Date&#123; private: int m_year&#123; 1900 &#125;; int m_month&#123; 1 &#125;; int m_day&#123; 1 &#125;; public: Date(int year, int month, int day) // normal non-default constructor &#123; m_year = year; m_month = month; m_day = day; &#125; //ç”±äºä¸Šé¢å·²ç»æœ‰äº†ä¸€ä¸ªæ˜¾å¼çš„æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å°±ä¸ä¼šå†æä¾›éšå¼çš„æ„é€ å‡½æ•°äº†&#125;int main()&#123; Date date&#123;&#125;; //é”™è¯¯:ä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡ï¼Œå› ä¸ºé»˜è®¤æ„é€ å‡½æ•°ä¸å­˜åœ¨ï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šå†ç”Ÿæˆé»˜è®¤æ„é€ å‡½æ•°ï¼ˆå› ä¸ºæœ‰æ˜¾å¼çš„æ„é€ å‡½æ•°ï¼‰ Date today&#123; 2020, 1, 19 &#125;; // today is initialized to Jan 19th, 2020 return 0;&#125;æ˜¾å¼çš„æ·»åŠ é»˜è®¤æ„é€ å‡½æ•°è¦å…è®¸æ„é€ ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„Dateï¼Œå¯ä»¥ï¼šå‘æ„é€ å‡½æ•°æ·»åŠ é»˜è®¤å‚æ•°ï¼Œæ·»åŠ ä¸€ä¸ªç©ºçš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œæˆ–è€…æ˜¾å¼åœ°æ·»åŠ ä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•°ã€‚ã€æ¨èâ­ã€‘1234567891011121314151617181920212223242526class Date&#123;private: int m_year&#123; 1900 &#125;; int m_month&#123; 1 &#125;; int m_day&#123; 1 &#125;; public: //å‘Šè¯‰ç¼–è¯‘å™¨åˆ›å»ºä¸€ä¸ªé»˜è®¤æ„é€ å‡½æ•°ï¼Œå³ä½¿è¿˜æœ‰ç”¨æˆ·æä¾›å…¶ä»–çš„æ„é€ å‡½æ•°ã€‚ Date() = default; //æ³¨æ„è¿™ä¸ªdefaultâ­ Date(int year, int month, int day) // normal non-default constructor &#123; m_year = year; m_month = month; m_day = day; &#125; &#125;int main()&#123; Date date&#123;&#125;; // date is initialized to Jan 1st, 1900 Date today&#123; 2020, 10, 14 &#125;; // today is initialized to Oct 14th, 2020 return 0;&#125;ä½¿ç”¨= defaultä¸æ·»åŠ ä¸€ä¸ªç©ºä¸»ä½“çš„é»˜è®¤æ„é€ å‡½æ•°å‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯= defaultå…è®¸æˆ‘ä»¬å®‰å…¨åœ°åˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œå³ä½¿å®ƒä»¬æ²¡æœ‰åˆå§‹åŒ–å™¨:1234567891011121314151617181920212223242526272829303132333435363738394041#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;cassert&gt;class Date&#123;public: Date() = default; //æ˜¾ç¤ºçš„é»˜è®¤æ„é€ å‡½æ•°private: // note: æˆå‘˜å£°æ˜ä¸­æ²¡æœ‰åˆå§‹åŒ– int m_year; int m_month; int m_day;&#125;;class Date2&#123;public: //ç”¨æˆ·æä¾›çš„ç©ºçš„æ„é€ å‡½æ•° Date2();private: // note: æˆå‘˜å£°æ˜ä¸­æ²¡æœ‰åˆå§‹åŒ– int m_year; int m_month; int m_day;&#125;;int main()&#123; Date today&#123;&#125;; //å°†ä¼šæ˜¯ï¼š0, 0, 0 â­ Date2 tommorrow&#123;&#125;; //tommorrow çš„æˆå‘˜æ²¡æœ‰åˆå§‹åŒ–â­ std::cin.clear(); std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); std::cin.get(); return 0;&#125;ç±»åŒ…å«ç±»ä¸€ä¸ªç±»å¯ä»¥åŒ…å«å…¶ä»–ç±»ä½œä¸ºæˆå‘˜å˜é‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨æ„é€ å¤–éƒ¨ç±»æ—¶ï¼Œæˆå‘˜å˜é‡å°†è°ƒç”¨å®ƒä»¬çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚è¿™å‘ç”Ÿåœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰ã€‚1234567891011121314151617181920212223242526#include &lt;iostream&gt; class A&#123;public: A() &#123; std::cout &lt;&lt; \"A\\n\"; &#125;&#125;; class B&#123;private: A m_a; // B contains A as a member variable public: B() &#123; std::cout &lt;&lt; \"B\\n\"; &#125;&#125;; int main()&#123; B b; return 0;&#125;/*ç»“æœ*/ABåœ¨æ„é€ å˜é‡bæ—¶ï¼Œè°ƒç”¨b()æ„é€ å‡½æ•°ã€‚åœ¨æ‰§è¡Œæ„é€ å‡½æ•°ä½“ä¹‹å‰ï¼Œm_aè¢«åˆå§‹åŒ– (å®ƒéœ€è¦è°ƒç”¨class Açš„æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–)ï¼Œè¿™ä¸ªæ‰“å°â€œAâ€ã€‚ç„¶åï¼Œè¿”å›åˆ°Bæ„é€ å‡½æ•°ï¼Œå¹¶æ‰§è¡ŒBæ„é€ å‡½æ•°çš„ä¸»ä½“ã€‚å½“ä½ è€ƒè™‘å®ƒæ—¶ï¼Œè¿™æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºB()æ„é€ å‡½æ•°å¯èƒ½æƒ³è¦ä½¿ç”¨å˜é‡m_aâ€”â€”æ‰€ä»¥m_aæœ€å¥½å…ˆåˆå§‹åŒ–!ç±»ç±»å‹(class-type)çš„æˆå‘˜ä¼šè¢«åˆå§‹åŒ–ä¸å‰ä¸€èŠ‚ä¸­æœ€åä¸€ä¸ªç¤ºä¾‹çš„ä¸åŒä¹‹å¤„åœ¨äºm_aæ˜¯ä¸€ä¸ªç±»ç±»å‹ã€‚å³ä½¿æˆ‘ä»¬æ²¡æœ‰æ˜¾å¼åœ°åˆå§‹åŒ–ç±»ç±»å‹æˆå‘˜ï¼Œå®ƒä»¬ä¹Ÿä¼šè¢«åˆå§‹åŒ–ã€‚æ„é€ å‡½æ•°é‡ç‚¹è®¸å¤šæ–°ç¨‹åºå‘˜å¯¹æ„é€ å‡½æ•°æ˜¯å¦åˆ›å»ºå¯¹è±¡æ„Ÿåˆ°å›°æƒ‘ã€‚å®ƒä»¬ä¸æ˜¯â€”â€”ç¼–è¯‘å™¨åœ¨æ„é€ å‡½æ•°è°ƒç”¨ä¹‹å‰ä¸ºå¯¹è±¡è®¾ç½®å†…å­˜åˆ†é…ã€‚æ„é€ å‡½æ•°å®é™…ä¸Šæœ‰ä¸¤ä¸ªç”¨é€”ã€‚é¦–å…ˆï¼Œæ„é€ å‡½æ•°å†³å®šè°å¯ä»¥åˆ›å»ºå¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åœ¨æ‰¾åˆ°åŒ¹é…çš„æ„é€ å‡½æ•°æ—¶æ‰èƒ½åˆ›å»ºç±»çš„å¯¹è±¡ã€‚å…¶æ¬¡ï¼Œæ„é€ å‡½æ•°å¯ä»¥ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡ã€‚æ„é€ å‡½æ•°æ˜¯å¦è¿›è¡Œåˆå§‹åŒ–å–å†³äºç¨‹åºå‘˜ã€‚ä»è¯­æ³•ä¸Šæ¥è¯´ï¼Œæ„é€ å‡½æ•°å®Œå…¨ä¸è¿›è¡Œåˆå§‹åŒ–æ˜¯æœ‰æ•ˆçš„(æ„é€ å‡½æ•°çš„ä½œç”¨ä»ç„¶æ˜¯å…è®¸åˆ›å»ºå¯¹è±¡ï¼Œå¦‚ä¸Šæ‰€è¿°)ã€‚æœ€åï¼Œæ„é€ å‡½æ•°åªåœ¨åˆ›å»ºå¯¹è±¡æ—¶ç”¨äºåˆå§‹åŒ–ã€‚æ‚¨ä¸åº”è¯¥å°è¯•è°ƒç”¨æ„é€ å‡½æ•°æ¥é‡æ–°åˆå§‹åŒ–ç°æœ‰å¯¹è±¡ã€‚è™½ç„¶å®ƒå¯ä»¥ç¼–è¯‘ï¼Œä½†ç»“æœä¸æ˜¯æ‚¨æƒ³è¦çš„(ç›¸åï¼Œç¼–è¯‘å™¨å°†åˆ›å»ºä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œç„¶åä¸¢å¼ƒå®ƒ)ã€‚â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“æ„é€ å‡½æ•°çš„æˆå‘˜åˆå§‹åŒ–å™¨åˆ—è¡¨åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/8-5a-constructor-member-initializer-lists/c++æä¾›äº†ä¸€ç§é€šè¿‡æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨(é€šå¸¸ç§°ä¸ºâ€œæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨â€)æ¥åˆå§‹åŒ–ç±»æˆå‘˜å˜é‡çš„æ–¹æ³• (è€Œä¸æ˜¯åœ¨å®ƒä»¬åˆ›å»ºä¹‹åç»™å®ƒä»¬èµ‹å€¼)ã€‚ä¸è¦å°†å®ƒä»¬ä¸æˆ‘ä»¬å¯ä»¥ç”¨æ¥ä¸ºæ•°ç»„èµ‹å€¼çš„ç±»ä¼¼å‘½åçš„åˆå§‹åŒ–å™¨åˆ—è¡¨æ··æ·†ã€‚åœ¨ 1.4 â€“ Variable assignment and initializationä¸­ï¼Œæ‚¨äº†è§£äº†å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼åˆå§‹åŒ–å˜é‡:å¤åˆ¶ï¼›ç›´æ¥ï¼›å’Œç»Ÿä¸€åˆå§‹åŒ–ã€‚123int value = 1; //æ‹·è´åˆå§‹åŒ–double value2 (2.2); //ç›´æ¥åƒçŸ³åŒ–char value3 &#123;'c'&#125;; //ç»Ÿä¸€åˆå§‹åŒ–åœ¨ç±»ä¸­ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ å‡ ä¹ä¸ç›´æ¥åˆå§‹åŒ–æˆ–ç»Ÿä¸€åˆå§‹åŒ–ç›¸åŒã€‚å¦‚ï¼š12345678910111213141516171819202122232425262728293031323334353637//1.æˆ‘ä»¬ä¹‹å‰æ˜¯è¿™æ ·å†™çš„ï¼šclass Something&#123;private: int m_value1; double m_value2; char m_value3;public: Something() &#123; // è¿™äº›éƒ½æ˜¯èµ‹å€¼ï¼Œä¸æ˜¯åˆå§‹åŒ– m_value1 = 1; m_value2 = 2.2; m_value3 = 'c'; &#125;&#125;;/************************************************************///2.ç°åœ¨æ¥æ”¹è¿›ï¼ˆä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ï¼‰ï¼š#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;cassert&gt;class Something&#123;private: int m_value1; double m_value2; char m_value3;public: Something() : m_value1&#123; 1 &#125;, m_value2&#123; 2 &#125;, m_value3&#123; 'c' &#125;//â­ &#123; // è¿™é‡Œå°±ä¸å†éœ€è¦èµ‹å€¼äº† &#125;&#125;;æˆå‘˜åˆå§‹åŒ–å™¨åˆ—è¡¨è¢«æ’å…¥åˆ°æ„é€ å‡½æ•°å‚æ•°ä¹‹åã€‚å®ƒä»¥å†’å·(:)å¼€å¤´ï¼Œç„¶ååˆ—å‡ºè¦åˆå§‹åŒ–çš„æ¯ä¸ªå˜é‡ä»¥åŠè¯¥å˜é‡çš„å€¼ï¼Œä¸­é—´ç”¨é€—å·åˆ†éš”ï¼Œæœ€åæ²¡æœ‰åˆ†å·ã€‚â­æ³¨æ„ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦åœ¨æ„é€ å‡½æ•°ä½“ä¸­æ‰§è¡Œèµ‹å€¼ï¼Œå› ä¸ºåˆå§‹åŒ–å™¨åˆ—è¡¨å°†æ›¿æ¢è¯¥åŠŸèƒ½ã€‚è¿˜è¦æ³¨æ„ï¼Œåˆå§‹åŒ–å™¨åˆ—è¡¨ä¸æ˜¯ä»¥åˆ†å·ç»“æŸçš„ã€‚å½“ç”¨æˆ·ä¼ å…¥åˆå§‹å€¼æ—¶å½“ç„¶ï¼Œå½“æˆ‘ä»¬å…è®¸è°ƒç”¨è€…ä¼ å…¥åˆå§‹å€¼æ—¶ï¼Œæ„é€ å‡½æ•°æ›´æœ‰ç”¨:1234567891011121314151617181920212223242526272829303132#include &lt;iostream&gt;class Something&#123;private: int m_value1; double m_value2; char m_value3; public: Something(int value1, double value2, char value3='c') : m_value1&#123; value1 &#125;, m_value2&#123; value2 &#125;, m_value3&#123; value3 &#125; //â­ directly initialize our member variables &#123; // No need for assignment here &#125; void print() &#123; std::cout &lt;&lt; \"Something(\" &lt;&lt; m_value1 &lt;&lt; \", \" &lt;&lt; m_value2 &lt;&lt; \", \" &lt;&lt; m_value3 &lt;&lt; \")\\n\"; &#125; &#125;;int main()&#123; Something something&#123; 1, 2.2 &#125;; // value1 = 1, value2=2.2, value3 gets default value 'c' something.print(); return 0;&#125;/*ç»“æœ*/Something(1, 2.2, c)æ³¨æ„ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é»˜è®¤å‚æ•°æ¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼ï¼Œä»¥é˜²ç”¨æˆ·æ²¡æœ‰ä¼ å…¥ä¸€ä¸ªå€¼ã€‚åˆå§‹åŒ–constå˜é‡é¢æ˜¯ä¸€ä¸ªæ‹¥æœ‰constæˆå‘˜å˜é‡çš„ç±»çš„ä¾‹å­:123456789class something&#123;private: const int m_value;public: something() : m_value&#123;5&#125; //âœ”ã€‚ç›´æ¥åˆå§‹åŒ–æˆ‘ä»¬çš„constæˆå‘˜å˜é‡ &#123; &#125;&#125;;è¿™æ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥åˆå§‹åŒ–constå˜é‡ (ä½†ä¸èƒ½èµ‹å€¼ç»™å®ƒä»¬!)ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–å™¨åˆ—è¡¨åˆå§‹åŒ–æ•°ç»„æˆå‘˜ä¸€ä¸ªæœ‰æ•°ç»„æˆå‘˜çš„ç±»:123456class Something&#123;private: const int m_array[5]; &#125;;åœ¨C++ 11ä¹‹å‰ï¼Œä½ åªèƒ½é€šè¿‡ä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä½¿ä¸€ä¸ªæ•°ç»„æˆå‘˜ å½’é›¶:12345678910class something&#123;private: const int m_array[5]; public: something() : m_array&#123;&#125; &#123; &#125;&#125;;ä»C++11å¼€å§‹ï¼Œä½ å¯ä»¥å®Œå…¨åˆå§‹åŒ–ä¸€ä¸ªæˆå‘˜æ•°ç»„ ä½¿ç”¨ç»Ÿä¸€åˆå§‹åŒ–:12345678910class something&#123;private: const int m_array[5]; public: something() : m_array&#123;1, 2, 3, 4, 5&#125; //ä½¿ç”¨ç»Ÿä¸€åˆå§‹åŒ–æ¥åˆå§‹åŒ–æˆ‘ä»¬çš„æˆå‘˜æ•°ç»„ &#123; &#125;&#125;;åˆå§‹åŒ–åœ¨å…¶ä»–ç±»ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡12345678910111213141516171819202122232425262728293031#include &lt;iostream&gt;class A&#123;public: A(int x) &#123; std::cout &lt;&lt;\"A \"&lt;&lt;x&lt;&lt;'\\n'; &#125;&#125;;class B&#123;private: A m_a;public: B(int y) : m_a &#123;y-1&#125; //è°ƒç”¨ A(int)æ„é€ å‡½æ•° åˆå§‹åŒ–æˆå‘˜m_a &#123; std::cout &lt;&lt; \"B \" &lt;&lt; y &lt;&lt; '\\n'; &#125;&#125;;int main()&#123; B b&#123;5&#125;; return 0;&#125;/*ç»“æœ*/A 4B 5æ„é€ å˜é‡bæ—¶ï¼Œä½¿ç”¨å€¼5è°ƒç”¨ b(int)æ„é€ å‡½æ•°ã€‚åœ¨è¯¥æ„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰ï¼Œm_aå…ˆè¢«åˆå§‹åŒ– ç”¨å€¼4è°ƒç”¨A(int)æ„é€ å‡½æ•°ï¼Œå³æ‰“å°â€œA 4â€ã€‚ï¼šç„¶åï¼Œå°†ç»“æœè¿”å›åˆ°Bæ„é€ å‡½æ•°ï¼Œå¹¶æ‰§è¡ŒBæ„é€ å‡½æ•°çš„ä¸»ä½“ï¼Œæ‰“å°â€œB 5â€ã€‚æ ¼å¼åŒ–åˆå§‹åŒ–å™¨åˆ—è¡¨åœ¨å¦‚ä½•æ ¼å¼åŒ–åˆå§‹åŒ–å™¨åˆ—è¡¨æ–¹é¢ï¼Œc++æä¾›äº†å¾ˆå¤§çš„çµæ´»æ€§ï¼Œè¿™å®é™…ä¸Šå–å†³äºæ‚¨æƒ³å¦‚ä½•ç»§ç»­ã€‚ä½†è¿™é‡Œæœ‰ä¸€äº›å»ºè®®:å¦‚æœåˆå§‹åŒ–å™¨åˆ—è¡¨å’Œå‡½æ•°ååœ¨åŒä¸€è¡Œï¼Œé‚£ä¹ˆæŠŠæ‰€æœ‰ä¸œè¥¿éƒ½æ”¾åœ¨ä¸€è¡Œå°±å¯ä»¥äº†:123456789101112class something&#123;private: int m_value1; double m_value2; char m_value3; public: something() : m_value1&#123; 1 &#125;, m_value2&#123; 2.2 &#125;, m_value3&#123; 'c' &#125; // everything on one line &#123; &#125;&#125;;å¦‚æœåˆå§‹åŒ–å™¨åˆ—è¡¨ä¸å‡½æ•°åä¸åœ¨åŒä¸€è¡Œï¼Œé‚£ä¹ˆåœ¨ä¸‹ä¸€è¡Œåº”è¯¥æ˜¯ç¼©è¿›çš„:12345678910111213class something&#123;private: int m_value1; double m_value2; char m_value3; public: something(int value1, double value2, char value3='c') //è¿™ä¸€è¡Œä¸Šå·²ç»æœ‰å¾ˆå¤šä¸œè¥¿äº† : m_value1&#123; value1 &#125;, m_value2&#123; value2 &#125;, m_value3&#123; value3 &#125; //æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‰©ä¸‹çš„å†…å®¹ç¼©è¿›åˆ°ä¸‹ä¸€è¡Œ &#123; &#125;&#125;;å¦‚æœæ‰€æœ‰çš„åˆå§‹å€¼è®¾å®šé¡¹éƒ½ä¸åœ¨ä¸€è¡Œä¸­(æˆ–è€…åˆå§‹å€¼è®¾å®šé¡¹ä¸æ˜¯æ™®é€šçš„)ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŠŠå®ƒä»¬éš”å¼€ï¼Œæ¯è¡Œä¸€ä¸ª:1234567891011121314151617class Something&#123;private: int m_value1; double m_value2; char m_value3; float m_value4; public: something(int value1, double value2, char value3='c', float value4=34.6f) //è¿™ä¸€è¡Œä¸Šå·²ç»æœ‰å¾ˆå¤šä¸œè¥¿äº† : m_value1&#123; value1 &#125;, //ä¸€è¡Œä¸€ä¸ªï¼Œæ¯è¡Œæœ«å°¾æœ‰ä¸€ä¸ªé€—å· m_value2&#123; value2 &#125;, m_value3&#123; value3 &#125;, m_value4&#123; value4 &#125; &#123; &#125;&#125;;åˆå§‹åŒ–å™¨åˆ—è¡¨é¡ºåºå¯èƒ½ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œåˆå§‹åŒ–å™¨åˆ—è¡¨ä¸­çš„å˜é‡ æ²¡æœ‰ æŒ‰ç…§åˆå§‹åŒ–ç¨‹åºåˆ—è¡¨ä¸­æŒ‡å®šçš„é¡ºåºåˆå§‹åŒ–ã€‚ç›¸åï¼Œå®ƒä»¬æ˜¯æŒ‰ç…§åœ¨ç±»ä¸­å£°æ˜å®ƒä»¬çš„é¡ºåºåˆå§‹åŒ–çš„ã€‚ä¸ºå–å¾—æœ€ä½³æ•ˆæœï¼Œåº”éµå¾ªä»¥ä¸‹å»ºè®®:ä¸è¦ä»¥è¿™æ ·çš„æ–¹å¼åˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œå³å®ƒä»¬ä¾èµ–äºé¦–å…ˆåˆå§‹åŒ–çš„å…¶ä»–æˆå‘˜å˜é‡ (æ¢å¥è¯è¯´ï¼Œç¡®ä¿æ‚¨çš„æˆå‘˜å˜é‡å°†æ­£ç¡®åˆå§‹åŒ–ï¼Œå³ä½¿åˆå§‹åŒ–é¡ºåºä¸åŒ)ã€‚åœ¨åˆå§‹åŒ–å™¨åˆ—è¡¨ä¸­ä»¥ä¸åœ¨ç±»ä¸­å£°æ˜å˜é‡ç›¸åŒçš„é¡ºåºåˆå§‹åŒ–å˜é‡ã€‚åªè¦éµå¾ªå‰é¢çš„å»ºè®®ï¼Œè¿™å¹¶ä¸æ˜¯ä¸¥æ ¼è¦æ±‚çš„ï¼Œä½†æ˜¯å¦‚æœæ‚¨ä¸è¿™æ ·åšï¼Œå¹¶ä¸”æ‰“å¼€äº†æ‰€æœ‰è­¦å‘Šï¼ˆè‡ªå·±å¯¹è­¦å‘Šçº§åˆ«çš„è®¾ç½®ï¼‰ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å¯èƒ½ä¼šç»™æ‚¨ä¸€ä¸ªè­¦å‘Šã€‚å°ç»“æˆå‘˜åˆå§‹åŒ–å™¨åˆ—è¡¨å…è®¸æˆ‘ä»¬åˆå§‹åŒ–æˆå‘˜ï¼Œè€Œä¸æ˜¯ç»™å®ƒä»¬èµ‹å€¼ã€‚è¿™æ˜¯åˆå§‹åŒ–é‚£äº›åœ¨åˆå§‹åŒ–æ—¶éœ€è¦å€¼çš„æˆå‘˜ (å¦‚constæˆ–å¼•ç”¨æˆå‘˜) çš„å”¯ä¸€æ–¹æ³•ï¼Œè€Œä¸”å®ƒæ¯”åœ¨æ„é€ å‡½æ•°ä½“ä¸­èµ‹å€¼æ›´æœ‰æ€§èƒ½ã€‚æˆå‘˜åˆå§‹åŒ–å™¨åˆ—è¡¨æ—¢é€‚ç”¨äºåŸºæœ¬ç±»å‹ï¼Œä¹Ÿé€‚ç”¨äºæœ¬èº«å°±æ˜¯ç±»çš„æˆå‘˜ã€‚","categories":[],"tags":[]},{"title":"C&C++/è®¿é—®å‡½æ•°åŠå°è£…","slug":"C&C++/è®¿é—®å‡½æ•°åŠå°è£…","date":"2020-05-07T14:58:56.597Z","updated":"2020-05-07T16:04:41.038Z","comments":true,"path":"archives/1459e5c7.html","link":"","permalink":"https://longlongqin.github.io/archives/1459e5c7.html","excerpt":"","text":"ä¸ºä»€ä¹ˆè¦å°†æˆå‘˜å˜é‡è®¾ä¸ºç§æœ‰?åœ¨å‰ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬æåˆ°ç±»æˆå‘˜å˜é‡é€šå¸¸æ˜¯ç§æœ‰çš„ã€‚å­¦ä¹ é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å¼€å‘äººå‘˜é€šå¸¸å¾ˆéš¾ç†è§£ä¸ºä»€ä¹ˆè¦è¿™æ ·åšã€‚ä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬ä»ä¸€ä¸ªç±»æ¯”å¼€å§‹ã€‚åœ¨ç°ä»£ç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¸å¤šç”µå­è®¾å¤‡ã€‚ä½ çš„ç”µè§†æœ‰ä¸€ä¸ªé¥æ§å™¨ï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥å¼€/å…³ç”µè§†ã€‚ä½ å¼€è½¦(æˆ–è¸æ¿è½¦)å»ä¸Šç­ã€‚ä½ ç”¨æ™ºèƒ½æ‰‹æœºæ‹ç…§ã€‚è¿™ä¸‰æ ·ä¸œè¥¿éƒ½ä½¿ç”¨ä¸€ä¸ªå¸¸è§çš„æ¨¡å¼: å®ƒä»¬æä¾›äº†ä¸€ä¸ªç®€å•çš„ç•Œé¢ä¾›æ‚¨ä½¿ç”¨(æŒ‰é’®ã€æ–¹å‘ç›˜ç­‰)æ¥æ‰§è¡Œæ“ä½œã€‚ç„¶è€Œï¼Œè¿™äº›è®¾å¤‡å®é™…ä¸Šæ˜¯å¦‚ä½•æ“ä½œçš„å¯¹ä½ æ¥è¯´æ˜¯éšè—çš„ã€‚å½“ä½ æŒ‰ä¸‹é¥æ§å™¨ä¸Šçš„æŒ‰é’®æ—¶ï¼Œä½ ä¸éœ€è¦çŸ¥é“å®ƒåœ¨åšä»€ä¹ˆæ¥å’Œä½ çš„ç”µè§†äº¤æµã€‚å½“ä½ è¸©ä¸‹æ±½è½¦çš„æ²¹é—¨è¸æ¿æ—¶ï¼Œä½ ä¸éœ€è¦çŸ¥é“å†…ç‡ƒæœºæ˜¯å¦‚ä½•ä½¿è½¦è½®è½¬åŠ¨çš„ã€‚å½“ä½ æ‹ç…§æ—¶ï¼Œä½ ä¸éœ€è¦çŸ¥é“ä¼ æ„Ÿå™¨å¦‚ä½•å°†å…‰çº¿æ”¶é›†åˆ°åƒç´ åŒ–çš„å›¾åƒä¸­ã€‚è¿™ç§æ¥å£å’Œå®ç°çš„åˆ†ç¦»éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸äº†è§£å¯¹è±¡å¦‚ä½•å·¥ä½œçš„æƒ…å†µä¸‹ä½¿ç”¨å¯¹è±¡ã€‚è¿™æå¤§åœ°é™ä½äº†ä½¿ç”¨è¿™äº›å¯¹è±¡çš„å¤æ‚æ€§ï¼Œå¹¶å¢åŠ äº†æˆ‘ä»¬èƒ½å¤Ÿä¸ä¹‹äº¤äº’çš„å¯¹è±¡çš„æ•°é‡ã€‚å‡ºäºç±»ä¼¼çš„åŸå› ï¼Œå®ç° å’Œ æ¥å£çš„åˆ†ç¦» åœ¨ç¼–ç¨‹ä¸­ä¹Ÿå¾ˆæœ‰ç”¨ã€‚å°è£…åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œå°è£…(ä¹Ÿç§°ä¸ºä¿¡æ¯éšè—)æ˜¯è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼šå®ƒå°†å¯¹è±¡å®ç°çš„ç»†èŠ‚éšè—èµ·æ¥ï¼Œä¸è®©å¯¹è±¡çš„ç”¨æˆ·çœ‹åˆ°ã€‚ç›¸åï¼Œå¯¹è±¡çš„ç”¨æˆ·é€šè¿‡å…¬å…±æ¥å£è®¿é—®å¯¹è±¡ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨å¯¹è±¡ï¼Œè€Œä¸å¿…äº†è§£å®ƒæ˜¯å¦‚ä½•å®ç°çš„ã€‚åœ¨c++ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è®¿é—®è¯´æ˜ç¬¦æ¥å®ç°å°è£…ã€‚é€šå¸¸ï¼Œç±»çš„æ‰€æœ‰æˆå‘˜å˜é‡éƒ½æ˜¯ç§æœ‰çš„(éšè—å®ç°ç»†èŠ‚)ï¼Œè€Œå¤§å¤šæ•°æˆå‘˜å‡½æ•°æ˜¯å…¬å…±çš„(ä¸ºç”¨æˆ·å…¬å¼€æ¥å£)ã€‚è™½ç„¶è¦æ±‚ç±»çš„ç”¨æˆ·ä½¿ç”¨å…¬å…±æ¥å£ä¼¼ä¹æ¯”ç›´æ¥æä¾›å¯¹æˆå‘˜å˜é‡çš„å…¬å…±è®¿é—®æ›´éº»çƒ¦ï¼Œä½†è¿™æ ·åšå®é™…ä¸Šæä¾›äº†å¤§é‡æœ‰ç”¨çš„å¥½å¤„ï¼Œæœ‰åŠ©äºé¼“åŠ±ç±»çš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚æ³¨æ„:â€œå°è£…â€ä¸€è¯æœ‰æ—¶ä¹Ÿç”¨æ¥æŒ‡å°†æ•°æ®å’Œå¤„ç†è¯¥æ•°æ®çš„å‡½æ•°æ‰“åŒ…åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬æ›´å€¾å‘äºç§°ä¹‹ä¸ºé¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚å°è£…çš„å¥½å¤„å°è£…ç±»æ›´å®¹æ˜“ä½¿ç”¨ï¼Œå¹¶é™ä½äº†ç¨‹åºçš„å¤æ‚æ€§å°è£…ç±»æœ‰åŠ©äºä¿æŠ¤æ‚¨çš„æ•°æ®å’Œé˜²æ­¢è¯¯ç”¨å°è£…ç±»æ›´å®¹æ˜“è°ƒè¯•","categories":[],"tags":[]},{"title":"C&C++/åŒ¿åå‡½æ•°","slug":"C&C++/åŒ¿åå‡½æ•°","date":"2020-05-07T01:35:03.052Z","updated":"2020-05-07T14:26:40.173Z","comments":true,"path":"archives/5ded0966.html","link":"","permalink":"https://longlongqin.github.io/archives/5ded0966.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/introduction-to-lambdas-anonymous-functions/åŒ¿åå‡½æ•°ï¼šlambdasï¼ˆanonymous functionsï¼‰è€ƒè™‘ä¸€ä¸‹æˆ‘ä»¬åœ¨ä¹‹å‰è¯¾ç¨‹ä¸­ä»‹ç»çš„è¿™æ®µä»£ç :123456789101112131415161718192021222324252627282930313233#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;string_view&gt;static bool containsNut(std::string_view str) // static æ˜¯æŒ‡åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­çš„å†…éƒ¨é“¾æ¥&#123; // std::string_view::find returns std::string_view::npos if it doesn't find // the substring. Otherwise it returns the index where the substring occurs // in str. return (str.find(\"nut\") != std::string_view::npos);&#125; int main()&#123; std::array&lt;std::string_view, 4&gt; arr&#123; \"apple\", \"banana\", \"walnut\", \"lemon\" &#125;; // std::find_if takes a pointer to a function auto found&#123; std::find_if(arr.begin(), arr.end(), containsNut) &#125;; if (found == arr.end()) &#123; std::cout &lt;&lt; \"No nuts\\n\"; &#125; else &#123; std::cout &lt;&lt; \"Found \" &lt;&lt; *found &lt;&lt; '\\n'; &#125; return 0;&#125;/*ç»“æœ*/Found walnutå…¶å®è¿™ä¸ªå¯ä»¥è¢«æ”¹è¿›ï¼šè¿™é‡Œé—®é¢˜çš„æ ¹æºæ˜¯std::find_ifè¦æ±‚æˆ‘ä»¬ç»™å®ƒä¼ é€’ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚å‡½æ•°ä¸èƒ½åµŒå¥—å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å®šä¹‰ä¸€ä¸ªåªä¼šä½¿ç”¨ä¸€æ¬¡çš„å‡½æ•°ï¼Œå®ƒå¿…é¡»æœ‰ä¸€ä¸ªåç§°ï¼Œå¹¶ä¸”å¿…é¡»æ”¾åœ¨å…¨å±€èŒƒå›´å†…(å› ä¸ºå‡½æ•°ä¸èƒ½åµŒå¥—!)è¿™ä¸ªå‡½æ•°ä¹Ÿå¾ˆçŸ­ï¼Œä»ä¸€è¡Œä»£ç å°±æ¯”ä»åç§°å’Œæ³¨é‡Šæ›´å®¹æ˜“çœ‹å‡ºå®ƒçš„åŠŸèƒ½ã€‚ä½¿ç”¨åŒ¿åå‡½æ•°åŒ¿åå‡½æ•°è¡¨è¾¾å¼ (ä¹Ÿç§°ä¸ºlambda æˆ– closure ) å…è®¸æˆ‘ä»¬åœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­å®šä¹‰åŒ¿åå‡½æ•°ã€‚ åµŒå¥—å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬é¿å…å‘½åç©ºé—´å‘½åæ±¡æŸ“ï¼Œå¹¶å°½å¯èƒ½åœ¨ä½¿ç”¨å®ƒçš„åœ°æ–¹å®šä¹‰å‡½æ•°(æä¾›é¢å¤–çš„ä¸Šä¸‹æ–‡)ã€‚lambdasçš„è¯­æ³•æ˜¯c++ä¸­æ¯”è¾ƒå¥‡æ€ªçš„ä¸œè¥¿ä¹‹ä¸€ï¼Œéœ€è¦ä¸€ç‚¹æ—¶é—´æ¥é€‚åº”ã€‚Lambdasçš„å½¢å¼æ˜¯:12345678[ captureClause ] ( parameters ) -&gt; returnType&#123; statements;&#125;//å¦‚æœä¸éœ€è¦\"captureClause\"å¥å’Œ\"parameters\"ï¼Œåˆ™å®ƒä»¬éƒ½å¯ä»¥ä¸ºç©ºã€‚//\"return type\"æ˜¯å¯é€‰çš„ã€‚å¦‚æœçœç•¥å®ƒï¼Œå°†ä½¿ç”¨auto(å³ï¼Œä½¿ç”¨ç±»å‹æ¨æ–­æ¥ç¡®å®šè¿”å›ç±»å‹)ã€‚//è™½ç„¶æˆ‘ä»¬å‰é¢å·²ç»æ³¨æ„åˆ°ï¼Œåº”è¯¥é¿å…å¯¹å‡½æ•°è¿”å›ç±»å‹è¿›è¡Œç±»å‹æ¨æ–­ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œä½¿ç”¨è¿™ç§ç±»å‹æ¨æ–­æ˜¯å¯ä»¥çš„(å› ä¸ºè¿™äº›å‡½æ•°é€šå¸¸éƒ½æ˜¯éå¸¸çç¢çš„)ã€‚è¿˜è¦æ³¨æ„ï¼Œlambdasæ²¡æœ‰åç§°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦æä¾›åç§°ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªæ™®é€šçš„lambdaå®šä¹‰æ˜¯è¿™æ ·çš„:12345678#include &lt;iostream&gt; int main()&#123; []() &#123;&#125;; // defines a lambda with no captures, no parameters, and no return type return 0;&#125;é‡æ–°å†™ä¸Šé¢çš„é‚£æ®µä»£ç ï¼ˆä½¿ç”¨åŒ¿åå‡½æ•°ï¼‰ï¼š123456789101112131415161718192021222324252627#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;string_view&gt;int main()&#123; std::array&lt;std::string_view, 4&gt; arr&#123; \"apple\", \"banana\", \"walnut\", \"lemon\" &#125;; // Define the function right where we use it. auto found&#123; std::find_if(arr.begin(), arr.end(), [](std::string_view str) // here's our lambda, no capture clauseâ­ &#123; return (str.find(\"nut\") != std::string_view::npos); &#125;) &#125;; if (found == arr.end()) &#123; std::cout &lt;&lt; \"No nuts\\n\"; &#125; else &#123; std::cout &lt;&lt; \"Found \" &lt;&lt; *found &lt;&lt; '\\n'; &#125; return 0; &#125;è¿™å°±åƒå‡½æ•°æŒ‡é’ˆçš„æƒ…å†µï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªç›¸åŒçš„ç»“æœ:1Found walnutæ³¨æ„ï¼šæ³¨æ„æˆ‘ä»¬çš„ åŒ¿åå‡½æ•° ä¸æˆ‘ä»¬çš„ containsNutå‡½æ•° æ˜¯å¤šä¹ˆçš„ç›¸ä¼¼ï¼šå®ƒä»¬éƒ½å…·æœ‰ç›¸åŒçš„å‚æ•°å’Œå‡½æ•°ä½“ã€‚lambdaæ²¡æœ‰captureClauseï¼ˆæ•è·å­å¥ï¼‰(æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€è¯¾ä¸­è§£é‡Šæ•è·å­å¥æ˜¯ä»€ä¹ˆ)ï¼Œå› ä¸ºå®ƒä¸éœ€è¦æ•è·å­å¥ã€‚æˆ‘ä»¬åœ¨lambdaä¸­çœç•¥äº†æœ«å°¾çš„è¿”å›ç±»å‹(ä¸ºäº†ç®€æ´)ï¼Œä½†æ˜¯å› ä¸ºæ˜¯æ“ä½œç¬¦ != è¿”å›ä¸€ä¸ªboolï¼Œæˆ‘ä»¬çš„lambdaä¹Ÿå°†è¿”å›ä¸€ä¸ªboolã€‚åŒ¿åå‡½æ•°çš„ç±»å‹åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨éœ€è¦çš„åœ°æ–¹å®šä¹‰äº†ä¸€ä¸ªlambdaã€‚è¿™ç§å¯¹lambdaçš„ä½¿ç”¨æœ‰æ—¶è¢«ç§°ä¸ºå‡½æ•°æ–‡å­—ï¼ˆfunction literalï¼‰ã€‚ä½†æ˜¯ä¸Šé¢çš„ä¾‹å­ä¸­çš„åŒ¿åå‡½æ•°çš„å¯è¯»æ€§å¾ˆå·®ã€‚å°±åƒæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªæ–‡å­—å€¼(æˆ–å‡½æ•°æŒ‡é’ˆ)åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ä»¥ä¾›ä»¥åä½¿ç”¨ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªlambdaå®šä¹‰åˆå§‹åŒ–ä¸€ä¸ªlambdaå˜é‡ï¼Œç„¶åå†ä½¿ç”¨å®ƒã€‚æ¯”å¦‚ï¼šï¼ˆåœ¨ä¸‹é¢çš„ä»£ç æ®µä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨std::all_ofæ¥æ£€æŸ¥æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦ä¸ºå¶æ•°:ï¼‰12//æˆ‘ä»¬å¿…é¡»è¯»lambdaæ¥ç†è§£å‘ç”Ÿäº†ä»€ä¹ˆã€‚(Bad)return std::all_of (array.begin(), array.end(), [] (int i) &#123;return ((i%2) == 0);&#125;);æˆ‘ä»¬å¯ä»¥æ”¹å–„å¯è¯»æ€§çš„è¿™ä¸ªå¦‚ä¸‹:[æ¨èâ­]12345678910//ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥å°†lambdaå­˜å‚¨åœ¨æŒ‡å®šçš„å˜é‡ä¸­ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™å‡½æ•°ã€‚auto isEven&#123; [] (int i) &#123; return ((i%2) == 0); &#125;&#125;;return std::ll_of(array.begin(), array.end(), isEven);//æ³¨æ„æœ€åä¸€è¡Œè¯»èµ·æ¥æœ‰å¤šå¥½:â€œè¿”å›æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦ä¸ºå¶æ•°â€åŒ¿åå‡½æ•°çš„ç±»å‹åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä½†æ˜¯ä¸Šé¢çš„åŒ¿åå‡½æ•°isEvenåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç­”ï¼šäº‹å®è¯æ˜ï¼Œlambdasæ²¡æœ‰ä¸€ä¸ªæˆ‘ä»¬å¯ä»¥æ˜ç¡®ä½¿ç”¨çš„ç±»å‹ã€‚å½“æˆ‘ä»¬å†™ä¸€ä¸ªlambdaæ—¶ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ç±»å‹ï¼Œä½†æ˜¯ä¸æš´éœ²ç»™æˆ‘ä»¬ã€‚è™½ç„¶æˆ‘ä»¬ä¸çŸ¥é“lambdaçš„ç±»å‹ï¼Œä½†æ˜¯æœ‰å‡ ç§æ–¹æ³•å¯ä»¥å­˜å‚¨ç”¨äºpost-definitionï¼ˆåå®šä¹‰ï¼Ÿï¼Ÿï¼Ÿï¼‰çš„lambdaã€‚å¦‚æœlambdaæœ‰ä¸€ä¸ªç©ºçš„æ•è·å­å¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢ä¸‰ç§æ–¹å¼ï¼š12345678910111213141516171819202122232425262728293031323334353637#include &lt;functional&gt;int main()&#123; //â­1ï¼šä¸€ä¸ªå¸¸è§„çš„å‡½æ•°æŒ‡é’ˆã€‚åªå¯¹ ç©ºæ•è·å¥å­(capture clause) æœ‰æ•ˆã€‚ double (*addNumbers1) (doubel, double) &#123; [] (double a, double b) &#123; return (a+b); &#125; &#125;; addNumbers1(1,2); //â­2ï¼š Using std::functionã€‚ä¹Ÿå¯é€‚ç”¨äºåŒ¿åå‡½æ•°çš„capture clauseéç©ºçš„æƒ…å†µ(ä¸‹ä¸€è¯¾ä¼šè®²)ã€‚ std::function addNumbers2 //æ³¨æ„ï¼šåœ¨C++17ä¹‹å‰ï¼Œåº”è¯¥è¿™æ ·å†™ï¼šstd::function&lt;double(double, double)&gt; &#123; [] (double a, double b) &#123; return (a+b); &#125; &#125;; addNumbers2(3, 4); //â­3ï¼šä½¿ç”¨autoã€‚å­˜å‚¨lambdaçš„å®é™…ç±»å‹ã€‚ auto addNumbers3 &#123; [] (double a, double b) &#123; return (a+b); &#125; &#125;; addNumbers3(5,6); return 0;&#125;ä½¿ç”¨lambdaå®é™…ç±»å‹çš„æƒŸä¸€æ–¹æ³•æ˜¯ä½¿ç”¨autoã€‚autoè¿˜å…·æœ‰ä¸std::function ç›¸æ¯”æ²¡æœ‰å¼€é”€çš„ä¼˜ç‚¹ã€‚é€‚ç”¨std::functionè€Œä¸é€‚ç”¨autoçš„æƒ…å†µä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½æ€»æ˜¯ä½¿ç”¨autoã€‚åœ¨å®é™…çš„lambdaæœªçŸ¥çš„æƒ…å†µä¸‹(ä¾‹å¦‚ï¼Œå› ä¸ºæˆ‘ä»¬å°†lambdaä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨è€…å†³å®šå°†ä¼ é€’ä»€ä¹ˆlambda)ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨autoã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåº”è¯¥ä½¿ç”¨std::functionã€‚123456789101112131415161718192021#include &lt;functional&gt;#incldue &lt;iostream&gt;//æˆ‘ä»¬ä¸çŸ¥é“fnä¼šæ˜¯ä»€ä¹ˆã€‚std::functionä¸å¸¸è§„å‡½æ•°å’Œlambdasä¸€èµ·å·¥ä½œã€‚void repeat(int repetitions, const std::function&lt;void(int)&gt;&amp; fn)&#123; for (int i&#123; 0 &#125;; i &lt; repetitions; ++i ) fn(i);&#125;int main()&#123; repeat(3, [] (int i) &#123;std::cout&lt;&lt;i&lt;&lt;'\\n';&#125; ); return 0;&#125;/*ç»“æœ*/012åŒ¿åå‡½æ•°å…¶å®ä¸æ˜¯çœŸæ­£çš„å‡½æ•°å®é™…ä¸Šï¼Œlambdasä¸æ˜¯å‡½æ•°(è¿™ä¹Ÿæ˜¯å®ƒä»¬ä¸ºä»€ä¹ˆåœ¨â€œå‡½æ•°ä¸èƒ½åµŒå¥—â€çš„è§„å®šä¸‹ï¼Œå¯ä»¥ä½¿ç”¨çš„åŸå› )ã€‚å®ƒä»¬æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç‰©ä½“ï¼Œå«åšå‡½å­(functor)ã€‚å‡½å­æ˜¯åŒ…å«é‡è½½è¿ç®—ç¬¦() çš„å¯¹è±¡ï¼Œä½¿å…¶å¯ä»¥åƒå‡½æ•°ä¸€æ ·è°ƒç”¨ã€‚æ³›å‹çš„åŒ¿åå‡½æ•°ï¼ˆgeneric lambdasï¼‰åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œlambdaå‚æ•°çš„å·¥ä½œåŸç†ä¸å¸¸è§„å‡½æ•°å‚æ•°ç›¸åŒã€‚ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ä¾‹å¤–æ˜¯ï¼Œå› ä¸ºc++ 14å…è®¸æˆ‘ä»¬ä½¿ç”¨autoä½œä¸ºå‚æ•°ï¼ˆæ³¨æ„:åœ¨c++ 20ä¸­ï¼Œå¸¸è§„å‡½æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨autoä½œä¸ºå‚æ•°ï¼‰ã€‚å½“ä¸€ä¸ªlambdaæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªautoå‚æ•°æ—¶ï¼Œç¼–è¯‘å™¨å°†ä»å¯¹lambdaçš„è°ƒç”¨ä¸­æ¨æ–­å‡ºéœ€è¦å“ªäº›å‚æ•°ç±»å‹ã€‚å› ä¸ºå…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªautoå‚æ•°çš„lambdaså¯ä»¥å¤„ç†å„ç§ç±»å‹çš„æ•°æ®ï¼Œæ‰€ä»¥å®ƒä»¬è¢«ç§°ä¸ºgeneric lambdasã€‚çœ‹ä¸€ä¸ªä¾‹å­ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;algorithm&gt;#include &lt;iostream&gt;#include &lt;array&gt;#include &lt;string_view&gt;int main(int argc, char* argv[])&#123; std::array months&#123; //C++17ä¹‹å‰ï¼Œä½¿ç”¨ï¼šstd::array&lt;const char*, 12&gt; \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\" &#125;; //æœç´¢ä»¥ç›¸åŒå­—æ¯å¼€å¤´çš„è¿ç»­ä¸¤ä¸ªæœˆã€‚ auto samelatter&#123; std::adjacent_find(months.begin(), months.end(), [](const auto&amp; a, const auto&amp; b) &#123;return (a[0] == b[0]); &#125; ) &#125;; //ç¡®ä¿æ‰¾åˆ°ä¸¤ä¸ªæœˆçš„æ—¶é—´ã€‚ if (samelatter != months.end()) &#123; //std::nextè¿”å›sameLetterä¹‹åçš„ä¸‹ä¸€ä¸ªè¿­ä»£å™¨ std::cout &lt;&lt;*samelatter &lt;&lt; \" and \" &lt;&lt;*std::next(samelatter) &lt;&lt; \" start with the same letter\\n\"; &#125; return 0;&#125;/*ç»“æœ*/June and July start with the same letteråœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨autoç±»å‹çš„å‚æ•°é€šè¿‡ constå¼•ç”¨ æ¥æ•è·å­—ç¬¦ä¸²ã€‚å› ä¸ºæ‰€æœ‰çš„å­—ç¬¦ä¸²ç±»å‹éƒ½å…è®¸é€šè¿‡ æ“ä½œç¬¦[] è®¿é—®å®ƒä»¬å„è‡ªçš„å­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒç”¨æˆ·æ˜¯å¦ä¼ å…¥äº†std::stringã€cé£æ ¼çš„å­—ç¬¦ä¸²æˆ–å…¶ä»–å†…å®¹ã€‚è¿™å…è®¸æˆ‘ä»¬å†™ä¸€ä¸ªå¯ä»¥æ¥å—ä»»ä½•è¿™äº›çš„lambdaï¼Œæ„å‘³ç€å¦‚æœæˆ‘ä»¬åœ¨å‡ ä¸ªæœˆåæ”¹å˜ç±»å‹ï¼Œæˆ‘ä»¬å°±ä¸å¿…é‡å†™lambdaäº†ã€‚ç„¶è€Œï¼Œæœ‰äº›æƒ…å†µautoï¼Œä¸æ˜¯æœ€å¥½çš„é€‰æ‹©ï¼š1234567891011121314151617181920212223242526272829303132333435#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;string_view&gt; int main()&#123; std::array months&#123; // pre-C++17 use std::array&lt;const char*, 12&gt; \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\" &#125;; // Count how many months consist of 5 letters auto fiveLetterMonths&#123; std::count_if(months.begin(), months.end(), [](std::string_view str) &#123; //â­ return (str.length() == 5); &#125;) &#125;; std::cout &lt;&lt; \"There are \" &lt;&lt; fiveLetterMonths &lt;&lt; \" months with 5 letters\\n\"; return 0;&#125;/*ç»“æœ*/There are 2 months with 5 lettersåœ¨æœ¬ä¾‹ä¸­ï¼Œä½¿ç”¨autoå°†ä¼šæ¨æ–­å‡ºconst charçš„ç±»å‹ã€‚*cé£æ ¼çš„å­—ç¬¦ä¸²ä¸å®¹æ˜“ä½¿ç”¨(é™¤äº†ä½¿ç”¨è¿ç®—ç¬¦[])**ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å€¾å‘äºæ˜¾å¼åœ°å°†å‚æ•°å®šä¹‰ä¸ºstd::string_viewï¼Œè¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ›´è½»æ¾åœ°å¤„ç†åº•å±‚æ•°æ®(ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¯¢é—®stringè§†å›¾çš„é•¿åº¦ï¼Œå³ä½¿ç”¨æˆ·ä¼ å…¥çš„æ˜¯cé£æ ¼çš„æ•°ç»„)ã€‚æ³›å‹lambdaå’Œé™æ€å˜é‡éœ€è¦æ³¨æ„çš„ä¸€ä»¶äº‹æ˜¯ï¼Œä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åŒ¿åå‡½æ•°å°†ä¼š(è¢«)autoè§£æä¸ºä¸åŒçš„ç±»å‹ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ä¸€ä¸ªæ³›å‹lambdaå¦‚ä½•å˜æˆä¸¤ä¸ªä¸åŒçš„lambda:12345678910111213141516171819202122232425262728293031323334#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;string_view&gt;int main()&#123; //æ‰“å°ä¸€ä¸ªå€¼å¹¶è®¡ç®— @printè¢«è°ƒç”¨çš„æ¬¡æ•°ã€‚ auto print &#123; [] (auto value) &#123; static int callcount &#123;0&#125;; std::cout &lt;&lt; callcount++&lt;&lt; \": \" &lt;&lt; value &lt;&lt; '\\n'; &#125; &#125;; print(\"hello\"); // 0: hello print(\"world\"); // 1: world print(1); // 0: 1 print(2); // 1: 2 print (\"ding dong\"); // 2: ding dong return 0;&#125;/*ç»“æœ*/0: hello1: world0: 11: 22: ding dongåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªlambdaï¼Œç„¶åä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„å‚æ•° (ä¸€ä¸ªå­—ç¬¦ä¸²æ–‡å­—å‚æ•° å’Œ ä¸€ä¸ªæ•´æ•°å‚æ•°)æ¥è°ƒç”¨å®ƒã€‚è¿™å°†ç”Ÿæˆlambdaçš„ä¸¤ä¸ªä¸åŒç‰ˆæœ¬ (ä¸€ä¸ªå¸¦æœ‰å­—ç¬¦ä¸²æ–‡å­—å‚æ•°ï¼Œå¦ä¸€ä¸ªå¸¦æœ‰æ•´æ•°å‚æ•°)ã€‚å¤§å¤šæ•°æ—¶å€™ï¼Œè¿™æ˜¯æ— å…³ç´§è¦çš„ã€‚ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼Œå¦‚æœæ³›å‹lambdaä½¿ç”¨é™æ€æŒç»­æ—¶é—´å˜é‡ï¼Œé‚£ä¹ˆè¿™äº›å˜é‡ä¸ä¼šåœ¨ç”Ÿæˆçš„lambdaä¹‹é—´å…±äº«ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ï¼Œå…¶ä¸­æ¯ä¸ªç±»å‹(å­—ç¬¦ä¸²å’Œæ•´æ•°)éƒ½æœ‰è‡ªå·±çš„æƒŸä¸€è®¡æ•°!è™½ç„¶æˆ‘ä»¬åªå†™äº†ä¸€æ¬¡lambdaï¼Œä½†æ˜¯ç”Ÿæˆäº†ä¸¤ä¸ªlambdaï¼Œæ¯ä¸ªlambdaéƒ½æœ‰è‡ªå·±çš„callCountç‰ˆæœ¬ã€‚ä¸ºäº†åœ¨ä¸¤ä¸ªç”Ÿæˆçš„lambdaä¹‹é—´å…±äº«ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨lambdaä¹‹å¤–å®šä¹‰ä¸€ä¸ªå˜é‡ã€‚ç°åœ¨ï¼Œè¿™æ„å‘³ç€å³ä½¿åœ¨å‡½æ•°å¤–éƒ¨ä¹Ÿè¦å®šä¹‰å˜é‡ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè¿™æ„å‘³ç€æ·»åŠ ä¸€ä¸ªå…¨å±€å˜é‡ã€‚åœ¨ä¸‹ä¸€è¯¾ä¸­è®¨è®ºlambdaæ•è·ä¹‹åï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿé¿å…å…¨å±€å˜é‡ã€‚è¿”å›ç±»å‹æ¨å¯¼å’Œè·Ÿè¸ªè¿”å›ç±»å‹å¦‚æœä½¿ç”¨è¿”å›ç±»å‹æ¨æ–­ï¼Œåˆ™lambdaçš„è¿”å›ç±»å‹æ˜¯ä»lambdaå†…éƒ¨çš„returnè¯­å¥ä¸­æ¨å¯¼å‡ºæ¥çš„ã€‚å¦‚æœä½¿ç”¨è¿”å›ç±»å‹æ¨æ–­ï¼Œlambdaä¸­çš„æ‰€æœ‰è¿”å›è¯­å¥å¿…é¡»è¿”å›ç›¸åŒçš„ç±»å‹(å¦åˆ™ç¼–è¯‘å™¨å°†ä¸çŸ¥é“é€‰æ‹©å“ªä¸€ä¸ª)ã€‚12345678910111213141516#include &lt;iostream&gt; int main()&#123; auto divide&#123; [](int x, int y, bool bInteger) &#123; // æ³¨æ„:æ²¡æœ‰æŒ‡å®šçš„è¿”å›ç±»å‹ if (bInteger) return x / y; else return static_cast&lt;double&gt;(x) / y; // é”™è¯¯:è¿”å›ç±»å‹ä¸ä»¥å‰çš„è¿”å›ç±»å‹ä¸åŒ¹é… &#125; &#125;; std::cout &lt;&lt; divide(3, 2, true) &lt;&lt; '\\n'; std::cout &lt;&lt; divide(3, 2, false) &lt;&lt; '\\n'; return 0;&#125;è¿™å°†äº§ç”Ÿä¸€ä¸ªç¼–è¯‘é”™è¯¯ï¼šå› ä¸ºç¬¬ä¸€ä¸ªè¿”å›è¯­å¥(int)çš„è¿”å›ç±»å‹ ä¸ ç¬¬äºŒä¸ªè¿”å›è¯­å¥(double)çš„è¿”å›ç±»å‹ä¸åŒ¹é…ã€‚å¦‚ä½•è§£å†³å‘¢ï¼Ÿåœ¨æˆ‘ä»¬è¿”å›ä¸åŒç±»å‹çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªé€‰é¡¹:æ˜¾å¼å¼ºåˆ¶è½¬æ¢ä»¥ä½¿æ‰€æœ‰è¿”å›ç±»å‹åŒ¹é…ï¼›æ˜¾å¼åœ°ä¸ºlambdaæŒ‡å®šè¿”å›ç±»å‹ï¼Œå¹¶è®©ç¼–è¯‘å™¨è¿›è¡Œéšå¼è½¬æ¢ã€‚ã€æ¨èâ­ã€‘12345678910111213141516171819#include &lt;iostream&gt;int main()&#123; //æ³¨æ„ï¼šæ˜¾å¼æŒ‡å®šæ­¤å€¼å°†è¿”å›ä¸€ä¸ªdouble auto divide &#123; [] (int x, int y, bool bInteger) -&gt;double //â­ &#123; if (bInteger) return x/y; // å°†åšä¸€ä¸ªéšå¼è½¬æ¢ä¸ºdouble else return static_cast&lt;double&gt;(x) / y; &#125; &#125;; std::cout &lt;&lt; divide(3, 2, true) &lt;&lt; '\\n'; std::cout &lt;&lt; divide(3, 2, false) &lt;&lt; '\\n'; return 0;&#125;å°±åƒä¸Šé¢ä¸€æ ·ï¼Œå¦‚æœæ‚¨å†³å®šæ›´æ”¹è¿”å›ç±»å‹ï¼Œæ‚¨(é€šå¸¸)åªéœ€è¦æ›´æ”¹lambdaçš„è¿”å›ç±»å‹ï¼Œè€Œä¸éœ€è¦è§¦åŠlambdaä¸»ä½“ã€‚â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”Lambda capturesåŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/lambda-captures/Capture clauses and capture by valueç°åœ¨ï¼Œè®©æˆ‘ä»¬ä¿®æ”¹nutç¤ºä¾‹ï¼Œè®©ç”¨æˆ·é€‰æ‹©è¦æœç´¢çš„å­å­—ç¬¦ä¸²ã€‚è¿™å¹¶ä¸åƒä½ æƒ³è±¡çš„é‚£ä¹ˆç›´è§‚ã€‚1234567891011121314151617181920212223242526272829303132#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;string_view&gt;#include &lt;string&gt; int main()&#123; std::array&lt;std::string_view, 4&gt; arr&#123; \"apple\", \"banana\", \"walnut\", \"lemon\" &#125;; // è¯¢é—®ç”¨æˆ·è¦æœç´¢ä»€ä¹ˆã€‚ std::cout &lt;&lt; \"search for: \"; std::string search&#123;&#125;; std::cin &gt;&gt; search; auto found&#123; std::find_if(arr.begin(), arr.end(), [](std::string_view str) &#123; // æœç´¢@searchè€Œä¸æ˜¯â€œnutâ€ã€‚ return (str.find(search) != std::string_view::npos); // é”™è¯¯:search åœ¨æ­¤èŒƒå›´å†…ä¸å¯è®¿é—® &#125;) &#125;; if (found == arr.end()) &#123; std::cout &lt;&lt; \"Not found\\n\"; &#125; else &#123; std::cout &lt;&lt; \"Found \" &lt;&lt; *found &lt;&lt; '\\n'; &#125; return 0;&#125;è¿™æ®µä»£ç æ— æ³•ç¼–è¯‘ã€‚ä¸åµŒå¥—å—ä¸åŒçš„æ˜¯ï¼Œå¤–å±‚å—ä¸­å®šä¹‰çš„ä»»ä½•æ ‡è¯†ç¬¦éƒ½å¯ä»¥åœ¨åµŒå¥—å—çš„èŒƒå›´å†…è®¿é—®ï¼Œè€Œlambdasåªèƒ½è®¿é—®ç‰¹å®šç±»å‹çš„æ ‡è¯†ç¬¦:å…¨å±€æ ‡è¯†ç¬¦ã€ç¼–è¯‘æ—¶å·²çŸ¥çš„å®ä½“å…·æœ‰é™æ€å­˜å‚¨æŒç»­æ—¶é—´çš„å®ä½“ã€‚searchä¸æ»¡è¶³è¿™äº›è¦æ±‚ï¼Œæ‰€ä»¥lambdaçœ‹ä¸åˆ°å®ƒã€‚è¿™å°±æ˜¯capture clauseçš„ä½œç”¨ã€‚capture clausecapture clause(æ•è·å­å¥) ç”¨äº(é—´æ¥åœ°)ä¸ºlambdaæä¾›å¯¹å‘¨å›´èŒƒå›´ä¸­å¯ç”¨å˜é‡ï¼ˆè¿™äº›å˜é‡æ˜¯å®ƒé€šå¸¸æ— æ³•è®¿é—®çš„ï¼‰çš„è®¿é—®ï¼Œæˆ‘ä»¬æ‰€éœ€è¦åšçš„å°±æ˜¯åœ¨lambdaä¸­åˆ—å‡ºæˆ‘ä»¬æƒ³è¦è®¿é—®çš„å®ä½“ï¼Œä½œä¸ºæ•è·å­å¥çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æƒ³ç»™æˆ‘ä»¬çš„lambdaè®¿é—®å˜é‡searchçš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒæ·»åŠ åˆ°æ•è·å­å¥:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859608910111213141516171819202122232425262728293031#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;string_view&gt;#include &lt;string&gt; int main()&#123; std::array&lt;std::string_view, 4&gt; arr&#123; \"apple\", \"banana\", \"walnut\", \"lemon\" &#125;; std::cout &lt;&lt; \"search for: \"; std::string search&#123;&#125;; std::cin &gt;&gt; search; // Capture @search vvvvvvâ­ auto found&#123; std::find_if(arr.begin(), arr.end(), [search](std::string_view str) &#123; return (str.find(search) != std::string_view::npos); &#125;) &#125;; if (found == arr.end()) &#123; std::cout &lt;&lt; \"Not found\\n\"; &#125; else &#123; std::cout &lt;&lt; \"Found \" &lt;&lt; *found &lt;&lt; '\\n'; &#125; return 0;&#125;/*ç»“æœ*/search for: nanaFound bananaé‚£ä¹ˆæ•æ‰åˆ°åº•æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢?è™½ç„¶ä¸Šé¢ä¾‹å­ä¸­çš„lambdaçœ‹èµ·æ¥åƒæ˜¯ç›´æ¥è®¿é—®mainçš„æœç´¢å˜é‡çš„å€¼ï¼Œä½†å®é™…æƒ…å†µå¹¶éå¦‚æ­¤ã€‚Lambdasçš„å¤–è§‚å’ŒåŠŸèƒ½å¯èƒ½ä¸åµŒå¥—å—ç±»ä¼¼ï¼Œä½†å®ƒä»¬çš„å·¥ä½œæ–¹å¼ç•¥æœ‰ä¸åŒ(è¿™ä¸€ç‚¹å¾ˆé‡è¦)ã€‚å½“æ‰§è¡Œlambdaå®šä¹‰æ—¶ï¼Œå¯¹äºlambdaæ•è·çš„æ¯ä¸ªå˜é‡ï¼Œåœ¨lambdaä¸­åˆ›å»ºè¯¥å˜é‡çš„å…‹éš†(å…·æœ‰ç›¸åŒçš„åç§°)ã€‚æ­¤æ—¶ï¼Œè¿™äº›å…‹éš†çš„å˜é‡æ˜¯ä»åŒåçš„å¤–éƒ¨ä½œç”¨åŸŸå˜é‡åˆå§‹åŒ–çš„ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå½“åˆ›å»ºlambdaå¯¹è±¡æ—¶ï¼Œlambdaè·å¾—å®ƒè‡ªå·±çš„å…‹éš†å˜é‡searchã€‚è¿™ä¸ªå…‹éš†çš„searchä¸mainçš„searchæœ‰ç›¸åŒçš„å€¼ï¼Œæ‰€ä»¥å®ƒçš„è¡Œä¸ºå°±åƒæˆ‘ä»¬è®¿é—®mainçš„searchï¼Œä½†æˆ‘ä»¬æ²¡æœ‰ã€‚è™½ç„¶è¿™äº›å…‹éš†çš„å˜é‡å…·æœ‰ç›¸åŒçš„åç§°ï¼Œä½†å®ƒä»¬ä¸ä¸€å®šå…·æœ‰ä¸åŸå§‹å˜é‡ç›¸åŒçš„ç±»å‹ã€‚æ³¨æ„è™½ç„¶lambdasçœ‹èµ·æ¥åƒå‡½æ•°ï¼Œä½†å®ƒä»¬å®é™…ä¸Šæ˜¯å¯ä»¥åƒå‡½æ•°ä¸€æ ·è°ƒç”¨çš„å¯¹è±¡(è¿™äº›è¢«ç§°ä¸ºfunctorâ€”â€”æˆ‘ä»¬å°†åœ¨ä»¥åçš„è¯¾ç¨‹ä¸­è®¨è®ºå¦‚ä½•ä»å¤´åˆ›å»ºè‡ªå·±çš„functor)ã€‚å½“ç¼–è¯‘å™¨é‡åˆ°ä¸€ä¸ªlambdaå®šä¹‰æ—¶ï¼Œå®ƒä¼šä¸ºè¯¥lambdaåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰å¯¹è±¡å®šä¹‰ã€‚æ¯ä¸ªæ•è·çš„å˜é‡éƒ½æˆä¸ºè¯¥å¯¹è±¡çš„æ•°æ®æˆå‘˜ã€‚åœ¨è¿è¡Œæ—¶ï¼Œå½“é‡åˆ°lambdaå®šä¹‰æ—¶ï¼Œå°†å®ä¾‹åŒ–lambdaå¯¹è±¡ï¼Œå¹¶åœ¨æ­¤æ—¶åˆå§‹åŒ–lambdaçš„æˆå‘˜ã€‚æ•è·é»˜è®¤çš„constå€¼é»˜è®¤æƒ…å†µä¸‹ï¼Œå˜é‡ç”±constå€¼æ•è·ã€‚è¿™æ„å‘³ç€åœ¨åˆ›å»ºlambdaæ—¶ï¼Œlambdaæ•è·å¤–éƒ¨ä½œç”¨åŸŸå˜é‡çš„å¸¸é‡å‰¯æœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸å…è®¸lambdaä¿®æ”¹å®ƒä»¬ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ•è·å˜é‡ammoå¹¶å°è¯•é€’å‡å®ƒã€‚1234567891011121314151617181920212223#include &lt;iostream&gt;int main()&#123; int ammo&#123;10&#125;; //å®šä¹‰ä¸€ä¸ªlambdaå¹¶å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªåä¸ºâ€œshootâ€çš„å˜é‡ä¸­ã€‚ auto shoot&#123; [ammo]() &#123; //âœ–ï¼Œç¼´è·çš„ammoä¸ºconst copyã€‚ --ammo; std::cout &lt;&lt; \"Pew! \" &lt;&lt; ammo &lt;&lt; \" shot(s) left.\\n\"; &#125; &#125;; //è°ƒç”¨lambda shoot(); std::cout &lt;&lt; ammo &lt;&lt; \" shot(s) left\\n\"; return 0;&#125;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå½“æˆ‘ä»¬æ•è·ammoæ—¶ï¼Œåœ¨lambdaä¸­åˆ›å»ºäº†ä¸€ä¸ªå…·æœ‰ç›¸åŒåç§°å’Œå€¼çš„æ–°constå˜é‡ã€‚æˆ‘ä»¬ä¸èƒ½ä¿®æ”¹å®ƒï¼Œå› ä¸ºå®ƒæ˜¯constï¼Œè¿™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚æ•è·å¯å˜(mutable)çš„å€¼ä¸ºäº†å…è®¸å¯¹å€¼æ•è·çš„å˜é‡è¿›è¡Œä¿®æ”¹ï¼Œæˆ‘ä»¬å¯ä»¥å°†lambdaæ ‡è®°ä¸ºmutableã€‚å…³é”®å­—mutableä¼šé™¤å» ä»å€¼æ•è·çš„æ‰€æœ‰å˜é‡ çš„consté™å®šã€‚123456789101112131415161718192021222324252627#include &lt;iostream&gt; int main()&#123; int ammo&#123; 10 &#125;; auto shoot&#123; //åœ¨å‚æ•°åˆ—è¡¨ä¹‹åæ·»åŠ äº†mutableã€‚ [ammo]() mutable &#123; //æˆ‘ä»¬ç°åœ¨å¯ä»¥ä¿®æ”¹ammoäº† --ammo; std::cout &lt;&lt; \"Pew! \" &lt;&lt; ammo &lt;&lt; \" shot(s) left.\\n\"; &#125; &#125;; shoot(); shoot(); std::cout &lt;&lt; ammo &lt;&lt; \" shot(s) left\\n\"; return 0;&#125;/*ç»“æœ*/Pew! 9 shot(s) left.Pew! 8 shot(s) left.10 shot(s) left //çœŸæ­£çš„ammoçš„å€¼æ˜¯æ²¡æœ‰å˜çš„ã€‚è™½ç„¶ç°åœ¨å¯ä»¥ç¼–è¯‘ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰é€»è¾‘ä¸Šé¢çš„é”™è¯¯ï¼Œä»€ä¹ˆé”™è¯¯å‘¢ï¼Ÿå°±æ˜¯ï¼šå½“æˆ‘ä»¬å‘¢è°ƒç”¨åŒ¿åå‡½æ•°(shoot())ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°æ•è·ä¸€ä¸ªammoçš„å‰¯æœ¬ã€‚å½“åŒ¿åå‡½æ•°å¯¹ammoè¿›è¡Œé€’å‡ï¼ˆç”±10åˆ°9åˆ°8ï¼‰ï¼Œå®ƒé€’å‡çš„æ˜¯ammoçš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„ammoï¼ˆå¦‚ä½•ä¿®æ”¹æœ¬çœŸçš„ammoå‘¢ï¼Ÿå°±æ˜¯åˆ©ç”¨â€œå¼•ç”¨â€æ¥æ•è·ï¼‰æ³¨æ„ï¼šammoçš„å€¼åœ¨å¯¹lambdaçš„è°ƒç”¨ä¸­ä¿æŒä¸å˜!é€šè¿‡â€œå¼•ç”¨â€ æ•è·å°±åƒå‡½æ•°å¯ä»¥æ”¹å˜é€šè¿‡å¼•ç”¨ä¼ é€’çš„å‚æ•°çš„å€¼ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å¼•ç”¨æ•è·å˜é‡æ¥å…è®¸lambdaæ”¹å˜å‚æ•°çš„å€¼ã€‚(æ‰€ä»¥ï¼Œä½¿ç”¨å¼•ç”¨æ•è·ï¼Œå°†ä¸å†éœ€è¦mutable)ä¸ºäº†é€šè¿‡å¼•ç”¨æ•è·å˜é‡ï¼Œæˆ‘ä»¬åœ¨æ•è·çš„å˜é‡åä¹‹å‰åŠ ä¸Šä¸€ä¸ª&amp;ç¬¦å·ã€‚ä¸è¢«å€¼æ•è·çš„å˜é‡ä¸åŒï¼Œè¢«å¼•ç”¨æ•è·çš„å˜é‡æ˜¯éconstçš„ï¼Œé™¤éå®ƒä»¬æ•è·çš„å˜é‡æ˜¯constã€‚å½“æ‚¨é€šå¸¸å¸Œæœ›é€šè¿‡å¼•ç”¨å°†å‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶(ä¾‹å¦‚ï¼Œå¯¹äºéåŸºæœ¬ç±»å‹)ï¼Œåº”è¯¥é¦–é€‰é€šè¿‡å¼•ç”¨æ•è·è€Œä¸æ˜¯é€šè¿‡å€¼æ•è·ã€‚è¿™æ˜¯ä¸Šé¢çš„ä»£ç ï¼Œä¿®æ”¹ä¸ºé€šè¿‡å¼•ç”¨æ¥æ•è·ammo:123456789101112131415161718192021222324#include &lt;iostream&gt;int main()&#123; int ammo(10); auto shoot&#123; ////æˆ‘ä»¬ä¸å†éœ€è¦mutable [&amp;ammo]() &#123; // &amp;ammoæ˜¯æŒ‡é€šè¿‡å¼•ç”¨æ¥æ•è·ammo //è¿™é‡Œæ”¹å˜ammoä¼šå½±å“ main's ä¸­çš„ammo --ammo; std::cout &lt;&lt; \"Pew! \" &lt;&lt; ammo &lt;&lt; \" shot(s) left.\\n\"; &#125; &#125;; shoot(); std::cout &lt;&lt; ammo &lt;&lt; \" shot(s) left\\n\"; return 0;&#125;/*ç»“æœ*/Pew! 9 shot(s) left.9 shot(s) leftæ•è·å¤šä¸ªå˜é‡å¯ä»¥é€šè¿‡ç”¨é€—å·åˆ†éš”å¤šä¸ªå˜é‡æ¥æ•è·å®ƒä»¬ã€‚è¿™å¯ä»¥åŒ…æ‹¬ç”±å€¼æˆ–å¼•ç”¨æ•è·çš„å˜é‡ç»„åˆ:123456int health&#123; 33 &#125;;int armor&#123; 100 &#125;;std::vector&lt;CEnemy&gt; enemies&#123;&#125;;//é€šè¿‡å€¼ æ•è· healthã€armorï¼›é€šè¿‡å¼•ç”¨æ•è·enemies[health, armor, &amp;enemies]()&#123;&#125;;é»˜è®¤æ•è·æ˜¾å¼åœ°åˆ—å‡ºæƒ³è¦æ•è·çš„å˜é‡å¯èƒ½ä¼šå¾ˆéº»çƒ¦ã€‚å¦‚æœæ‚¨ä¿®æ”¹æ‚¨çš„lambdaï¼Œæ‚¨å¯èƒ½ä¼šå¿˜è®°æ·»åŠ æˆ–åˆ é™¤æ•è·çš„å˜é‡ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç¼–è¯‘å™¨çš„å¸®åŠ©æ¥è‡ªåŠ¨ç”Ÿæˆéœ€è¦æ•è·çš„å˜é‡åˆ—è¡¨ã€‚é»˜è®¤æ•è·(ä¹Ÿç§°capture-default) æ•è·lambdaä¸­æåˆ°çš„æ‰€æœ‰å˜é‡ã€‚å¦‚æœä½¿ç”¨é»˜è®¤æ•è·ï¼Œåˆ™ä¸æ•è·lambdaä¸­æœªæåˆ°çš„å˜é‡ã€‚è‹¥è¦æŒ‰å€¼æ•è·æ‰€æœ‰ä½¿ç”¨çš„å˜é‡ï¼Œè¯·ä½¿ç”¨=çš„æ•è·å€¼ã€‚è‹¥è¦é€šè¿‡å¼•ç”¨æ•è·æ‰€æœ‰ä½¿ç”¨çš„å˜é‡ï¼Œè¯·ä½¿ç”¨&amp;çš„æ•è·å€¼ã€‚çœ‹ä¸€ä¸ªä¾‹å­ï¼š1234567891011121314151617181920212223242526272829#include &lt;array&gt;#include &lt;iostream&gt; int main()&#123; std::array areas&#123; 100, 25, 121, 40, 56 &#125;; int width&#123;&#125;; int height&#123;&#125;; std::cout &lt;&lt; \"Enter width and height: \"; std::cin &gt;&gt; width &gt;&gt; height; auto found&#123; std::find_if(areas.begin(), areas.end(), [=](int knownArea) &#123; // will default capture width and height by value return (width * height == knownArea); // because they're mentioned here &#125;) &#125;; if (found == areas.end()) &#123; std::cout &lt;&lt; \"I don't know this area :(\\n\"; &#125; else &#123; std::cout &lt;&lt; \"Area found :)\\n\"; &#125; return 0;&#125;é»˜è®¤æ•è·å¯ä»¥ä¸æ™®é€šæ•è·æ··åˆä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å€¼æ•è·ä¸€äº›å˜é‡ï¼Œé€šè¿‡å¼•ç”¨æ•è·å¦ä¸€äº›å˜é‡ï¼Œä½†æ˜¯æ¯ä¸ªå˜é‡åªèƒ½æ•è·ä¸€æ¬¡ã€‚12345678910111213141516171819202122232425int health&#123; 33 &#125;;int armor&#123; 100 &#125;;std::vector&lt;CEnemy&gt; enemies&#123;&#125;;//æ ¹æ®å€¼ æ•è·healthå’Œarmorï¼Œæ ¹æ®å¼•ç”¨æ•è·enemiesã€‚[health, armor, &amp;enemies]()&#123;&#125;;//é€šè¿‡å¼•ç”¨æ¥æ•è·enemieï¼Œé€šè¿‡å€¼æ¥æ•è·å…¶ä»–çš„ä¸€åˆ‡ã€‚[=, &amp;enemies]()&#123;&#125;;//é€šè¿‡å¼•ç”¨æ¥æ•è·å…¶ä»–çš„ä¸€åˆ‡ï¼Œé€šè¿‡å€¼æ¥æ•è·armorã€‚[&amp;, armor]()&#123;&#125;;/*ä¸‹é¢æ˜¯ä¸€äº›éæ³•çš„*///1.æˆ‘ä»¬å·²ç»è¯´è¿‡ï¼Œæˆ‘ä»¬æƒ³é€šè¿‡å¼•ç”¨æ¥æ•è·æ‰€æœ‰ä¿¡æ¯ã€‚âœ–[&amp;, &amp;armor]()&#123;&#125;;//2.æˆ‘ä»¬å·²ç»è¯´è¿‡ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡å€¼æ¥æ•è·ä¸€åˆ‡ã€‚âœ–[=, armor]()&#123;&#125;;//3.armorå‡ºç°ä¸¤æ¬¡ã€‚âœ–[armor, &amp;health, &amp;armor]() &#123;&#125;;//4.é»˜è®¤æ•è·å¿…é¡»æ˜¯æ•è·ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚âœ–[armor, &amp;]()&#123;&#125;; -----åº”è¯¥æ˜¯--ã€‹[ &amp;, armor]()&#123;&#125;;åœ¨lambda-captureä¸­å®šä¹‰æ–°å˜é‡æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡è½»å¾®çš„ä¿®æ”¹æ¥æ•è·ä¸€ä¸ªå˜é‡ï¼Œæˆ–è€…å£°æ˜ä¸€ä¸ªåªåœ¨lambdaä½œç”¨åŸŸå†…å¯è§çš„æ–°å˜é‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨lambda-captureä¸­å®šä¹‰ä¸€ä¸ªå˜é‡è€Œä¸æŒ‡å®šå®ƒçš„ç±»å‹æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚123456789101112131415161718192021222324252627282930313233#include &lt;array&gt;#include &lt;iostream&gt; int main()&#123; std::array areas&#123; 100, 25, 121, 40, 56 &#125;; int width&#123;&#125;; int height&#123;&#125;; std::cout &lt;&lt; \"Enter width and height: \"; std::cin &gt;&gt; width &gt;&gt; height; // æˆ‘ä»¬å­˜å‚¨areasï¼Œä½†ç”¨æˆ·è¾“å…¥å®½åº¦å’Œé«˜åº¦ã€‚ // æˆ‘ä»¬éœ€è¦å…ˆè®¡ç®—å‡ºé¢ç§¯ï¼Œç„¶åæ‰èƒ½æœç´¢å®ƒã€‚ auto found&#123; std::find_if(areas.begin(), areas.end(), // å£°æ˜ä¸€ä¸ªä»…å¯¹lambdaå¯è§çš„æ–°å˜é‡(userarea) // userareaçš„ç±»å‹è¢«è‡ªåŠ¨æ¨æ–­ä¸ºint [userArea&#123; width * height &#125;](int knownArea) &#123; return (userArea == knownArea); &#125;) &#125;; if (found == areas.end()) &#123; std::cout &lt;&lt; \"I don't know this area :(\\n\"; &#125; else &#123; std::cout &lt;&lt; \"Area found :)\\n\"; &#125; return 0;&#125;å½“å®šä¹‰äº†lambdaæ—¶ï¼ŒuserAreaåªè®¡ç®—ä¸€æ¬¡ã€‚è®¡ç®—çš„åŒºåŸŸå­˜å‚¨åœ¨lambdaå¯¹è±¡ä¸­ï¼Œå¯¹äºæ¯ä¸ªè°ƒç”¨éƒ½æ˜¯ç›¸åŒçš„ã€‚å¦‚æœlambdaæ˜¯å¯å˜çš„ï¼Œå¹¶ä¸”ä¿®æ”¹äº†åœ¨æ•è·ä¸­å®šä¹‰çš„å˜é‡ï¼Œåˆ™åŸå§‹å€¼å°†è¢«è¦†ç›–ã€‚ç©ºæ‚¬çš„æ•è·å˜é‡å˜é‡åœ¨å®šä¹‰lambdaçš„åœ°æ–¹è¢«æ•è·ã€‚å¦‚æœè¢«å¼•ç”¨æ•è·çš„å˜é‡åœ¨lambdaä¹‹å‰è¢«é”€æ¯ï¼Œlambdaå°†ä¿ç•™ä¸€ä¸ªæ‚¬ç©ºå¼•ç”¨ã€‚å¦‚ï¼š1234567891011121314151617181920212223#include &lt;iostream&gt;#include &lt;string&gt;//è¿”å›ä¸€ä¸ªlambdaauto makeWalrus(const std::string&amp; name)&#123; // é€šè¿‡å¼•ç”¨æ•è·nameå¹¶è¿”å›lambdaã€‚ return [&amp;]()&#123; std::cout&lt;&lt; \"I am a walrus, my name is \"&lt;&lt;name &lt;&lt;'\\n'; //æœªå®šä¹‰è¡Œä¸º &#125;;&#125;int main()&#123; // åˆ›å»ºä¸€ä¸ªæ–°çš„walrusï¼Œå®ƒçš„åå­—å«åšRoofus. // sayNameæ˜¯makeWalrusè¿”å›çš„lambdaã€‚ auto sayName &#123;makeWalrus(\"Roofus\")&#125;; // è°ƒç”¨makeWalrusè¿”å›çš„ lambdaå‡½æ•°ã€‚ sayName(); return 0;&#125;å¯¹makeWalrusçš„è°ƒç”¨å°†ä»å­—ç¬¦ä¸²æ–‡æœ¬â€œRoofusâ€åˆ›å»ºä¸€ä¸ªä¸´æ—¶std::stringã€‚åœ¨makeWalrus ä¸­çš„lambda é€šè¿‡å¼•ç”¨æ•è·äº†è¿™ä¸ªä¸´æ—¶å­—ç¬¦ä¸²ã€‚å½“è¿”å›makeWalrusæ—¶ï¼Œä¸´æ—¶å­—ç¬¦ä¸²è¢«é”€æ¯ï¼Œä½†æ˜¯lambdaä¾ç„¶åœ¨å¼•ç”¨å®ƒã€‚ç„¶åå½“æˆ‘ä»¬è°ƒç”¨sayNameï¼Œå°±ä¼šè®¿é—®åˆ°è¿™ä¸ªç©ºæ‚¬çš„å¼•ç”¨ï¼Œäºæ˜¯å°±é€ æˆäº†æœªå®šä¹‰è¡Œä¸ºã€‚æ³¨æ„ï¼Œå¦‚æœæŒ‰å€¼å°†nameä¼ é€’ç»™makeWalrusï¼Œä¹Ÿä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚warning:é€šè¿‡å¼•ç”¨æ•è·å˜é‡æ—¶è¦æ ¼å¤–å°å¿ƒï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨é»˜è®¤çš„å¼•ç”¨æ•è·æ—¶ã€‚æ•è·çš„å˜é‡å¿…é¡»æ¯”lambdaå­˜åœ¨çš„æ—¶é—´é•¿ã€‚æœªå®Œå¾…ç»­~~ï¼šUnintended copies of mutable lambdasç›®å‰ï¼Œæœ¬èŠ‚å‰©ä¸‹éƒ¨åˆ†å…ˆä¸çœ‹ã€‚2020-05-07 22:26:38","categories":[],"tags":[]},{"title":"C&C++/çœç•¥å·(ä»¥åŠä¸ºå•¥é¿å…ä½¿ç”¨ä»–)","slug":"C&C++/çœç•¥å·(ä»¥åŠä¸ºå•¥é¿å…ä½¿ç”¨ä»–)","date":"2020-05-06T15:24:41.575Z","updated":"2020-05-06T15:50:36.833Z","comments":true,"path":"archives/5844b406.html","link":"","permalink":"https://longlongqin.github.io/archives/5844b406.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/714-ellipsis-and-why-to-avoid-them/åœ¨æˆ‘ä»¬ç›®å‰çœ‹åˆ°çš„æ‰€æœ‰å‡½æ•°ä¸­ï¼Œå¿…é¡»æå‰çŸ¥é“å‡½æ•°å°†ä½¿ç”¨çš„å‚æ•°çš„æ•°é‡(å³ä½¿å®ƒä»¬æœ‰é»˜è®¤å€¼)ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå‘å‡½æ•°ä¼ é€’ å¯å˜æ•°é‡çš„å‚æ•° æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚c++æä¾›äº†ä¸€ç§ç‰¹æ®Šçš„è¯´æ˜ç¬¦ï¼Œç§°ä¸º ellipsis(çœç•¥å·) (åˆå â€œâ€¦â€ )ï¼Œå®ƒå…è®¸æˆ‘ä»¬ç²¾ç¡®åœ°æ‰§è¡Œæ­¤æ“ä½œã€‚ä½¿ç”¨çœç•¥å·çš„å‡½æ•°é‡‡ç”¨ä»¥ä¸‹å½¢å¼:1return_type function_name(argument_list, ...)argument_listï¼šæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå¸¸è§„å‡½æ•°å‚æ•°ã€‚(æ³¨æ„ï¼Œä½¿ç”¨çœç•¥å·çš„å‡½æ•°å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªéçœç•¥å·å‚æ•°ã€‚) ä¼ é€’ç»™å‡½æ•°çš„ä»»ä½•å‚æ•°éƒ½å¿…é¡»é¦–å…ˆåŒ¹é…çœç•¥å·ï¼šï¼ˆæ˜¯ç”±ä¸‰ä¸ªç‚¹ç»„æˆï¼‰ã€‚å¿…é¡»æ€»æ˜¯å‡½æ•°ä¸­çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚ä½†æ˜¯ä»æ¦‚å¿µä¸Šæ¥è¯´ï¼ŒæŠŠçœç•¥å·çœ‹ä½œä¸€ä¸ªæ•°ç»„æ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œè¿™ä¸ªæ•°ç»„åŒ…å«çš„å‚æ•°è¶…å‡ºargument_listä¸­çš„å‚æ•°ã€‚ä¸€ä¸ªä¾‹å­ï¼šå‡è®¾æˆ‘ä»¬è¦å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ä¸€å †æ•´æ•°çš„å¹³å‡å€¼ã€‚æˆ‘ä»¬ä¼šè¿™æ ·åš:123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;iostream&gt;#include &lt;cstdarg&gt; // needed to use ellipsis// çœç•¥å·å¿…é¡»æ˜¯æœ€åä¸€ä¸ªå‚æ•°// countæ˜¯æˆ‘ä»¬ä¼ é€’äº†å¤šå°‘é¢å¤–çš„å‚æ•°double findAverage(int count, ...)&#123; double sum = 0; //æˆ‘ä»¬é€šè¿‡va_listâ­è®¿é—®çœç•¥å·ï¼Œå› æ­¤æˆ‘ä»¬å£°æ˜ä¸€ä¸ª va_list list; //æˆ‘ä»¬ä½¿ç”¨va_startâ­åˆå§‹åŒ–va_listã€‚ //ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦åˆå§‹åŒ–çš„åˆ—è¡¨ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æœ€åä¸€ä¸ªéçœç•¥å·å‚æ•° va_start(list, count); // å¾ªç¯éå†æ‰€æœ‰çœç•¥å·å‚æ•° for (int arg = 0; arg &lt; count; ++arg) &#123; //æˆ‘ä»¬ä½¿ç”¨va_argâ­ä»æˆ‘ä»¬çš„çœç•¥å·ä¸­è·å–å‚æ•° // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨çš„va_list // ç¬¬äºŒä¸ªå‚æ•°æ˜¯ å‚æ•°çš„ç±»å‹ sum += va_arg(list, int); //å®Œæˆåæ¸…é™¤va_list â­ va_end(list); return sum / count; &#125;&#125;int main()&#123; std::cout &lt;&lt; findAverage(5, 1, 2, 3, 4, 5) &lt;&lt; '\\n'; std::cout &lt;&lt; findAverage(6, 1, 2, 3, 4, 5, 6) &lt;&lt; '\\n'; &#125;/*ç»“æœ*/33.5","categories":[],"tags":[]},{"title":"C&C++/å‘½ä»¤è¡Œå‚æ•°","slug":"C&C++/å‘½ä»¤è¡Œå‚æ•°","date":"2020-05-06T13:49:28.995Z","updated":"2020-05-06T15:22:04.075Z","comments":true,"path":"archives/dcba50cd.html","link":"","permalink":"https://longlongqin.github.io/archives/dcba50cd.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/714-ellipsis-and-why-to-avoid-them/åœ¨ 0.4 â€“ introduction to developmentï¼Œä¸­æˆ‘ä»¬å­¦ä¹ äº†ï¼šå½“æˆ‘ä»¬ç¼–è¯‘å’Œé“¾æ¥æˆ‘ä»¬çš„ç¨‹åºæ—¶ï¼šç¼–è¯‘å™¨ä¼šäº§ç”Ÿä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼›å½“ç¨‹åºè¿è¡Œæ—¶ï¼Œæ‰§è¡Œä»main()å‡½æ•°çš„é¡¶éƒ¨å¼€å§‹ã€‚æˆªæ­¢åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬éƒ½æ˜¯è¿™æ ·å£°æ˜ä¸€ä¸ªmain()å‡½æ•°çš„ï¼š1int main()æ³¨æ„ï¼Œmain()çš„è¿™ä¸ªç‰ˆæœ¬ä¸æ¥å—ä»»ä½•å‚æ•°ã€‚ç„¶è€Œï¼Œè®¸å¤šç¨‹åºéœ€è¦æŸç§ç±»å‹çš„è¾“å…¥æ‰èƒ½ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ‚¨æ­£åœ¨ç¼–å†™ä¸€ä¸ªåä¸ºThumbnailçš„ç¨‹åºï¼Œå®ƒè¯»å–ä¸€ä¸ªå›¾åƒæ–‡ä»¶ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªç¼©ç•¥å›¾(å›¾åƒçš„è¾ƒå°ç‰ˆæœ¬)ã€‚Thumbnailå¦‚ä½•çŸ¥é“è¦è¯»å–å’Œå¤„ç†çš„å›¾åƒ? ç”¨æˆ·å¿…é¡»æœ‰æŸç§æ–¹å¼å‘Šè¯‰ç¨‹åºæ‰“å¼€å“ªä¸ªæ–‡ä»¶ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•:1234567891011121314//Program: Thumbnail#include &lt;iostream&gt;#include &lt;string&gt;int main()&#123; std::cout &lt;&lt; \"Please enter an image filename to create a thumbnail for: \"; std::string filename &#123;&#125;; std::cin&gt;&gt;filename; //open image file //create thumbnail //output thumbnail&#125;ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªæ½œåœ¨çš„é—®é¢˜ã€‚æ¯æ¬¡ç¨‹åºè¿è¡Œæ—¶ï¼Œç¨‹åºéƒ½ä¼šç­‰å¾…ç”¨æˆ·è¾“å…¥ã€‚å¦‚æœæ‚¨ä»å‘½ä»¤è¡Œæ‰‹åŠ¨è¿è¡Œæ­¤ç¨‹åºä¸€æ¬¡ï¼Œè¿™å¯èƒ½ä¸æ˜¯é—®é¢˜ã€‚ä½†åœ¨å…¶ä»–æƒ…å†µä¸‹å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæ¯”å¦‚å¸Œæœ›åœ¨è®¸å¤šæ–‡ä»¶ä¸Šè¿è¡Œè¿™ä¸ªç¨‹åºï¼Œæˆ–è€…è®©å¦ä¸€ä¸ªç¨‹åºè¿è¡Œè¿™ä¸ªç¨‹åºã€‚è®©æˆ‘ä»¬è¿›ä¸€æ­¥ç ”ç©¶è¿™äº›æƒ…å†µã€‚è€ƒè™‘è¿™æ ·ä¸€ç§æƒ…å†µï¼Œæ‚¨å¸Œæœ›ä¸ºç»™å®šç›®å½•ä¸­çš„æ‰€æœ‰å›¾åƒæ–‡ä»¶åˆ›å»ºç¼©ç•¥å›¾ã€‚ä½ ä¼šæ€ä¹ˆåšå‘¢?åªè¦ç›®å½•ä¸­æœ‰å›¾åƒï¼Œæ‚¨å°±å¯ä»¥å¤šæ¬¡è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œæ‰‹å·¥è¾“å…¥æ¯ä¸ªæ–‡ä»¶åã€‚ç„¶è€Œï¼Œå¦‚æœæœ‰æ•°ç™¾ä¸ªå›¾åƒï¼Œè¿™å¯èƒ½éœ€è¦ä¸€æ•´å¤©!è¿™é‡Œçš„ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œå¾ªç¯éå†ç›®å½•ä¸­çš„æ¯ä¸ªæ–‡ä»¶åï¼Œä¸ºæ¯ä¸ªæ–‡ä»¶è°ƒç”¨ä¸€æ¬¡Thumbnailã€‚ç°åœ¨è€ƒè™‘è¿™æ ·ä¸€ç§æƒ…å†µï¼Œæ‚¨æ­£åœ¨è¿è¡Œä¸€ä¸ªç½‘ç«™ï¼Œæ‚¨å¸Œæœ›è®©æ‚¨çš„ç½‘ç«™åœ¨ç”¨æˆ·æ¯æ¬¡å‘æ‚¨çš„ç½‘ç«™ä¸Šä¼ å›¾åƒæ—¶åˆ›å»ºä¸€ä¸ªç¼©ç•¥å›¾ã€‚è¿™ä¸ªç¨‹åºä¸æ¥å—æ¥è‡ªwebçš„è¾“å…¥ï¼Œé‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸Šä¼ è€…å¦‚ä½•è¾“å…¥æ–‡ä»¶åå‘¢? è¿™é‡Œçš„ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯è®©æ‚¨çš„webæœåŠ¡å™¨åœ¨ä¸Šä¼ åè‡ªåŠ¨è°ƒç”¨Thumbnailã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç¡®å®éœ€è¦ä¸€ç§æ–¹æ³•ï¼Œè®©å¤–éƒ¨ç¨‹åºåœ¨å¯åŠ¨Thumbnailæ—¶å°†æ–‡ä»¶åä½œä¸ºè¾“å…¥ä¼ é€’ç»™æˆ‘ä»¬çš„Thumbnailç¨‹åºï¼Œè€Œä¸æ˜¯è®©Thumbnailç­‰å¾…ç”¨æˆ·åœ¨å¯åŠ¨åè¾“å…¥æ–‡ä»¶åã€‚Command line argumentså‘½ä»¤è¡Œå‚æ•°æ˜¯å¯é€‰çš„å­—ç¬¦ä¸²å‚æ•°ï¼Œåœ¨ç¨‹åºå¯åŠ¨æ—¶ç”±æ“ä½œç³»ç»Ÿä¼ é€’ç»™ç¨‹åºã€‚ç„¶åç¨‹åºå¯ä»¥ä½¿ç”¨å®ƒä»¬ä½œä¸ºè¾“å…¥(æˆ–å¿½ç•¥å®ƒä»¬)ã€‚ä¸å‡½æ•°å‚æ•°ä¸ºå‡½æ•°æä¾›å‘å¦ä¸€ä¸ªå‡½æ•°æä¾›è¾“å…¥çš„æ–¹æ³•éå¸¸ç›¸ä¼¼ï¼Œå‘½ä»¤è¡Œå‚æ•°ä¸ºç”¨æˆ·æˆ–ç¨‹åº æä¾›å‘ç¨‹åºæä¾›è¾“å…¥çš„æ–¹æ³•ã€‚ä¼ é€’å‘½ä»¤è¡Œå‚æ•°å¯æ‰§è¡Œç¨‹åºå¯ä»¥é€šè¿‡æŒ‰åç§°è°ƒç”¨å‘½ä»¤è¡Œæ¥è¿è¡Œã€‚ä¾‹å¦‚ï¼Œè¦åœ¨Windowsæœºå™¨ä¸Šè¿è¡Œä½äºC:é©±åŠ¨å™¨æ ¹ç›®å½•ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶â€œWordCountâ€ï¼Œæ‚¨å¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤:1C:\\&gt;WordCountä¸ºäº†å°†å‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™WordCountï¼Œæˆ‘ä»¬åªéœ€åœ¨ å¯æ‰§è¡Œæ–‡ä»¶åç§° åé¢åˆ—å‡ºå‘½ä»¤è¡Œå‚æ•°:1C:\\&gt;WordCount Myfile.txtç°åœ¨ï¼Œå½“WordCountæ‰§è¡Œæ—¶ï¼ŒMyfile.txtå°†ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°æä¾›ã€‚å½“ç„¶ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥æœ‰å¤šä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼Œç”¨ç©ºæ ¼åˆ†éš”:1C:\\&gt;WordCount Myfile.txt Myotherfile.txtIDEä¸­è¾“å…¥å‘½ä»¤è¡Œå‚æ•°çš„æ–¹æ³•åœ¨microsoftvisual Studioä¸­ï¼šåœ¨â€œè§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨â€ä¸­å³é”®å•å‡»é¡¹ç›®ï¼Œç„¶åé€‰æ‹©â€œå±æ€§â€ã€‚æ‰“å¼€â€œé…ç½®å±æ€§â€æ ‘ç›®å½•ï¼Œé€‰æ‹©â€œè°ƒè¯•â€ã€‚åœ¨å³ä¾§çª—æ ¼ä¸­ï¼Œæœ‰ä¸€è¡Œç§°ä¸ºâ€œå‘½ä»¤å‚æ•°â€ã€‚æ‚¨å¯ä»¥åœ¨é‚£é‡Œè¾“å…¥å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œæµ‹è¯•ï¼Œå½“æ‚¨è¿è¡Œå®ƒæ—¶ï¼Œå®ƒä»¬å°†è‡ªåŠ¨ä¼ é€’ç»™æ‚¨çš„ç¨‹åºã€‚ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æ—¢ç„¶æ‚¨å·²ç»çŸ¥é“äº†å¦‚ä½•ä¸ºç¨‹åºæä¾›å‘½ä»¤è¡Œå‚æ•°ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å°±æ˜¯ä»æˆ‘ä»¬çš„c++ç¨‹åºä¸­è®¿é—®å®ƒä»¬ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸ä»¥å‰ä¸åŒçš„main()å½¢å¼ã€‚è¿™ç§æ–°å½¢å¼çš„main()æœ‰ä¸¤ä¸ªå‚æ•°(æŒ‰ç…§æƒ¯ä¾‹å‘½åä¸ºargcå’Œargv):1234int main(int argc, char *argv[]) //ã€æ¨èã€‘int main(int argc, char** argv) //ä¸Šé¢çš„å…¶å®æ˜¯ç­‰ä»·çš„ï¼Œä½†æ˜¯æˆ‘ä»¬æ¨èç¬¬ä¸€ç§ï¼Œå› ä¸ºå®ƒä¾¿äºç†è§£argcï¼šæ˜¯ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼ŒåŒ…å«ä¼ é€’ç»™ç¨‹åºçš„å‚æ•°æ•°çš„æ•°ç›®ã€‚argcå°†è‡³å°‘ä¸º1ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå‚æ•°å§‹ç»ˆæ˜¯ç¨‹åºæœ¬èº«çš„åç§°ã€‚å…¶ä¸­ï¼šargc = argument countargvï¼šæ˜¯å®é™…çš„å‚æ•°å€¼å­˜å‚¨çš„åœ°æ–¹ã€‚argvå®é™…ä¸Šåªæ˜¯ä¸€ä¸ªcé£æ ¼å­—ç¬¦ä¸²æ•°ç»„ã€‚è¿™ä¸ªæ•°ç»„çš„é•¿åº¦æ˜¯argcã€‚å…¶ä¸­ï¼šargv = argument valuesï¼Œå°½ç®¡å®ƒçš„ä¸“æœ‰åç§°æ˜¯â€argument vectorsâ€çœ‹ä¸€ä¸ªä¾‹å­ï¼š12345678910111213// Program: test#include &lt;iostream&gt; int main(int argc, char *argv[])&#123; std::cout &lt;&lt; \"There are \" &lt;&lt; argc &lt;&lt; \" arguments:\\n\"; // Loop through each argument and print its number and value for (int count&#123; 0 &#125;; count &lt; argc; ++count) std::cout &lt;&lt; count &lt;&lt; \" \" &lt;&lt; argv[count] &lt;&lt; '\\n'; return 0;&#125;è¿è¡Œï¼šæˆ‘ä»¬ä¼¼ä¹æ²¡æœ‰ç»™è¿™ä¸ªç¨‹åºæ·»åŠ å‘½ä»¤è¡Œå‚æ•°ï¼Œé‚£æˆ‘ä»¬å°±æŒ‰ç…§æ·»åŠ æ–¹æ³•æ·»åŠ ä¸€ä¸‹å§ï¼šï¼ˆæ·»åŠ äº†3ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼‰ç°åœ¨å†æ¥è¿è¡Œä¸€ä¸‹ï¼šå‚æ•°0æ˜¯å½“å‰æ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„è·¯å¾„å’Œåç§°ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå‚æ•°1å’Œ2å’Œ3æ˜¯æˆ‘ä»¬ä¼ å…¥çš„3ä¸ªå‘½ä»¤è¡Œå‚æ•°ã€‚å¤„ç†æ•°å€¼ç±»å‹çš„å‘½ä»¤è¡Œå‚æ•°å‘½ä»¤è¡Œå‚æ•°æ€»æ˜¯ä½œä¸ºå­—ç¬¦ä¸²ä¼ é€’ï¼Œå³ä½¿æä¾›çš„å€¼æœ¬è´¨ä¸Šæ˜¯æ•°å€¼å‹çš„ã€‚è‹¥è¦å°†å‘½ä»¤è¡Œå‚æ•°ç”¨ä½œæ•°å­—ï¼Œå¿…é¡»å°†å…¶ä»å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒC++ä½¿è¿™ä¸€ç‚¹æ¯”å®ƒåº”è¯¥åšåˆ°çš„æ›´åŠ å›°éš¾ã€‚123456789101112131415161718192021222324252627282930313233#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;sstream&gt; // for std::stringstream#include &lt;cstdlib&gt; // for std::exit() int main(int argc, char *argv[])&#123; if (argc &lt;= 1) &#123; // åœ¨æŸäº›æ“ä½œç³»ç»Ÿä¸Šï¼Œargv[0]å¯èƒ½ä»¥ç©ºå­—ç¬¦ä¸²ç»“æŸï¼Œè€Œä¸æ˜¯ç¨‹åºçš„åç§°ã€‚ // æˆ‘ä»¬å°†æ ¹æ®argv[0]æ˜¯å¦ä¸ºç©ºæ¥è°ƒèŠ‚æˆ‘ä»¬çš„å“åº”ã€‚ if (argv[0]) std::cout &lt;&lt; \"Usage: \" &lt;&lt; argv[0] &lt;&lt; \" &lt;number&gt;\" &lt;&lt; '\\n'; else std::cout &lt;&lt; \"Usage: &lt;program name&gt; &lt;number&gt;\" &lt;&lt; '\\n'; std::exit(1); &#125; //è®¾ç½®ä¸€ä¸ªåä¸ºconvertçš„stringstreamå˜é‡ï¼Œä½¿ç”¨argv[1]çš„è¾“å…¥è¿›è¡Œåˆå§‹åŒ– std::stringstream convert&#123; argv[1] &#125;; //â­ int myint&#123;&#125;; if (!(convert &gt;&gt; myint)) // æ‰§è¡Œè½¬æ¢(è¿™é‡Œçš„â€˜&gt;&gt;â€™æ˜¯æå–æ“ä½œç¬¦â­) myint = 0; // å¦‚æœè½¬æ¢å¤±è´¥ï¼Œå°†myintè®¾ç½®ä¸ºé»˜è®¤å€¼ std::cout &lt;&lt; \"Got integer: \" &lt;&lt; myint &lt;&lt; '\\n'; return 0;&#125;/*å‡è®¾æˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼š567, é‚£ä¹ˆç»“æœä¸ºï¼š*/Got integer: 567â­æ³¨æ„ï¼šåœ¨ä¸Šé¢çš„std::stringstreamå®ƒçš„å·¥ä½œåŸç†å’Œstd::cinéå¸¸ç›¸ä¼¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨argv[1]çš„å€¼åˆå§‹åŒ–å®ƒï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ“ä½œç¬¦&gt;&gt;æ¥æå–æ•´å‹å˜é‡çš„å€¼(ä¸std::cinç›¸åŒ)ã€‚æ“ä½œç³»ç»Ÿé¦–å…ˆè§£æå‘½ä»¤è¡Œå‚æ•°å½“æ‚¨åœ¨å‘½ä»¤è¡Œè¾“å…¥ä¸€äº›å†…å®¹(æˆ–ä»IDEè¿è¡Œç¨‹åº)æ—¶ï¼Œæ“ä½œç³»ç»Ÿè´Ÿè´£é€‚å½“ åœ°è½¬æ¢å’Œè·¯ ç”±è¯¥è¯·æ±‚ã€‚è¿™ä¸ä»…æ¶‰åŠè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿˜æ¶‰åŠè§£æä»»ä½•å‚æ•°ï¼Œä»¥ç¡®å®šåº”è¯¥å¦‚ä½•å¤„ç†å’Œä¼ é€’ç»™åº”ç”¨ç¨‹åºã€‚é€šå¸¸ï¼Œæ“ä½œç³»ç»Ÿå¯¹ åŒå¼•å· å’Œ åæ–œæ  ç­‰ç‰¹æ®Šå­—ç¬¦ çš„å¤„ç†æœ‰ç‰¹æ®Šçš„è§„åˆ™ã€‚ä¾‹å¦‚ï¼š12&#x2F;&#x2F;åŒ…å«ä¸‹é¢çš„å‘½ä»¤è¡Œå‚æ•°MyArgs Hello world!å¦‚æœæ‰“å°å‘½ä»¤è¡Œå‚æ•°ï¼Œåˆ™ä¸ºï¼š(åŸæ–‡ä¸­çš„è·¯å¾„)1234There are 3 arguments:0 C:\\MyArgs1 Hello2 world!é€šå¸¸ï¼ŒåŒå¼•å·ä¸­çš„å­—ç¬¦ä¸²è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ•´ä½“:1MyArgs &quot;Hello world!&quot;prints:123There are 2 arguments:0 C:\\MyArgs1 Hello world!å¦‚æœä½ æƒ³åŒ…å«ä¸€ä¸ªæ–‡å­—åŒå¼•å·ï¼Œä½ å¿…é¡»åæ–œæ åŒå¼•å·:1MyArgs \\&quot;Hello world!\\&quot;prints:1234There are 3 arguments:0 C:\\MyArgs1 &quot;Hello2 world!&quot;å°ç»“ï¼šå‘½ä»¤è¡Œå‚æ•°ä¸ºç”¨æˆ·æˆ–å…¶ä»–ç¨‹åºåœ¨å¯åŠ¨æ—¶å‘ç¨‹åºä¼ é€’è¾“å…¥æ•°æ®æä¾›äº†ä¸€ç§å¾ˆå¥½çš„æ–¹å¼ã€‚è€ƒè™‘å°†ç¨‹åºåœ¨å¯åŠ¨æ—¶éœ€è¦çš„ä»»ä½•è¾“å…¥æ•°æ®ç”¨äºæ“ä½œå‘½ä»¤è¡Œå‚æ•°ã€‚å¦‚æœæ²¡æœ‰ä¼ é€’å‘½ä»¤è¡Œï¼Œæ‚¨æ€»æ˜¯å¯ä»¥æ£€æµ‹åˆ°è¿™ä¸€ç‚¹å¹¶è¯·æ±‚ç”¨æˆ·è¾“å…¥ã€‚è¿™æ ·ï¼Œä½ çš„ç¨‹åºå¯ä»¥ä»¥ä»»ä½•ä¸€ç§æ–¹å¼è¿è¡Œã€‚","categories":[],"tags":[]},{"title":"C&C++/å¤„ç†å‡è®¾æ€§é”™è¯¯","slug":"C&C++/å¤„ç†å‡è®¾æ€§é”™è¯¯","date":"2020-05-05T13:16:15.895Z","updated":"2020-05-05T13:34:48.345Z","comments":true,"path":"archives/ff8fbe02.html","link":"","permalink":"https://longlongqin.github.io/archives/ff8fbe02.html","excerpt":"","text":"åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/712-handling-errors-assert-cerr-exit-and-exceptions/æ—¢ç„¶æ‚¨å·²ç»çŸ¥é“äº†å‡è®¾é”™è¯¯é€šå¸¸å‘ç”Ÿåœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹åœ¨å®ƒä»¬å‘ç”Ÿæ—¶å¤„ç†å®ƒä»¬çš„ä¸åŒæ–¹æ³•ã€‚æ²¡æœ‰å¤„ç†é”™è¯¯çš„æœ€ä½³æ–¹æ³•â€”â€”è¿™å®é™…ä¸Šå–å†³äºé—®é¢˜çš„æ€§è´¨ä»¥åŠé—®é¢˜æ˜¯å¦å¯ä»¥ä¿®å¤ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…¸å‹çš„æ–¹æ³•:æ‚„æ‚„åœ°è·³è¿‡ä»£ç ï¼Œè¿™å–å†³äºå‡è®¾æ˜¯æœ‰æ•ˆçš„:123456void printString(const char *cstring)&#123; // Only print if cstring is non-null if (cstring) std::cout &lt;&lt; cstring;&#125;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœcstringä¸ºnullï¼Œåˆ™ä¸æ‰“å°ä»»ä½•å†…å®¹ã€‚æˆ‘ä»¬è·³è¿‡äº†ä¾èµ–äºcstringéç©ºçš„ä»£ç ã€‚å¦‚æœè¢«è·³è¿‡çš„è¯­å¥ä¸æ˜¯å…³é”®è¯­å¥ï¼Œå¹¶ä¸”ä¸å½±å“ç¨‹åºé€»è¾‘ï¼Œé‚£ä¹ˆè¿™å¯èƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚è¿™æ ·åšçš„ä¸»è¦æŒ‘æˆ˜æ˜¯è°ƒç”¨è€…æˆ–ç”¨æˆ·æ— æ³•è¯†åˆ«å‡ºé”™çš„åœ°æ–¹ã€‚å¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯ä»£ç ç»™è°ƒç”¨è€…ï¼Œè®©è°ƒç”¨è€…å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚1234567891011#include &lt;array&gt; // assume the array only holds positive valuesint getArrayValue(const std::array&lt;int, 10&gt; &amp;array, int index)&#123; // use if statement to detect violated assumption if (index &lt; 0 || index &gt;= static_cast&lt;int&gt;(array.size())) return -1; // return error code to caller return array[index];&#125;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœè°ƒç”¨è€…ä¼ å…¥ä¸€ä¸ªæ— æ•ˆçš„ç´¢å¼•ï¼Œå‡½æ•°å°†è¿”å›-1 (è¿”å›ä¸€ä¸ªæšä¸¾å€¼ä¼šæ›´å¥½)ã€‚å¦‚æœæˆ‘ä»¬æƒ³ç«‹å³ç»ˆæ­¢ç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨å¤´æ–‡ä»¶&lt;cstdlib&gt;ä¸­çš„exitå‡½æ•°å‘æ“ä½œç³»ç»Ÿè¿”å›é”™è¯¯ä»£ç :1234567891011#include &lt;cstdlib&gt; // for std::exit()#include &lt;array&gt; int getArrayValue(const std::array&lt;int, 10&gt; &amp;array, int index)&#123; // use if statement to detect violated assumption if (index &lt; 0 || index &gt;= static_cast&lt;int&gt;(array.size())) std::exit(2); // terminate program and return error number 2 to OS return array[index];&#125;å¦‚æœè°ƒç”¨è€…ä¼ å…¥ä¸€ä¸ªæ— æ•ˆçš„ç´¢å¼•ï¼Œè¿™ä¸ªç¨‹åºå°†ç«‹å³ç»ˆæ­¢(æ²¡æœ‰é”™è¯¯æ¶ˆæ¯)ï¼Œå¹¶å°†é”™è¯¯ä»£ç 2ä¼ é€’ç»™æ“ä½œç³»ç»Ÿã€‚å¦‚æœç”¨æˆ·è¾“å…¥äº†æ— æ•ˆçš„è¾“å…¥ï¼Œè¯·ç”¨æˆ·å†æ¬¡è¾“å…¥è¯¥è¾“å…¥ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041#include &lt;iostream&gt;#include &lt;limits&gt;#include &lt;string&gt;int main()&#123; std::string hello&#123; \"hello, world!\" &#125;; int index; do //ä¸»è¦æ˜¯è¿™ä¸ªdo &#123;&#125;while()å¾ªç¯ &#123; std::cout &lt;&lt; \"enter an index: \"; std::cin &gt;&gt; index; //å¤„ç†ç”¨æˆ·è¾“å…¥éæ•´æ•°çš„æƒ…å†µ if (std::cin.fail()) &#123; std::cin.clear(); // é‡ç½®ä»»ä½•é”™è¯¯æ ‡å¿— std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); //å¿½ç•¥è¾“å…¥ç¼“å†²åŒºä¸­çš„ä»»ä½•å­—ç¬¦ index = -1; // ç¡®ä¿indexæœ‰ä¸€ä¸ªæ— æ•ˆçš„å€¼ï¼Œè¿™æ ·å¾ªç¯å°±ä¸ä¼šç»ˆæ­¢ continue; //è¿™ä¸ªcontinueçœ‹èµ·æ¥æ— å…³ç´§è¦ï¼Œä½†æ˜¯å®ƒæ˜ç¡®åœ°è¡¨ç¤ºäº†ç»ˆæ­¢è¿™ä¸ªå¾ªç¯è¿­ä»£çš„æ„å›¾â€¦â€¦ //â€¦â€¦ä»¥é˜²æˆ‘ä»¬åé¢æ·»åŠ æ›´å¤šä¸œè¥¿ std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); &#125; &#125; while (index &lt; 0 || index &gt;= static_cast&lt;int&gt;(hello.size())); //å¤„ç†ç”¨æˆ·è¾“å…¥çš„æ•´æ•°è¶…å‡ºèŒƒå›´çš„æƒ…å†µ std::cout &lt;&lt; \"Letter #\" &lt;&lt; index &lt;&lt; \" is \" &lt;&lt; hello[index] &lt;&lt; '\\n'; /***********************************************/ std::cin.clear(); std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); std::cin.get(); return 0;&#125;cerræ˜¯å¦ä¸€ç§ä¸“é—¨ç”¨äºæ‰“å°é”™è¯¯æ¶ˆæ¯çš„æœºåˆ¶ã€‚cerræ˜¯ä¸€ä¸ªè¾“å‡ºæµ(å°±åƒcout)ï¼Œå®ƒåœ¨ä¸­å®šä¹‰ã€‚é€šå¸¸ï¼Œcerråœ¨å±å¹•ä¸Šå†™é”™è¯¯æ¶ˆæ¯(å°±åƒcoutä¸€æ ·)ï¼Œä½†æ˜¯å®ƒä¹Ÿå¯ä»¥å•ç‹¬é‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚12345678void printString(const char *cstring)&#123; // Only print if cstring is non-null if (cstring) std::cout &lt;&lt; cstring; else std::cerr &lt;&lt; \"function printString() received a null parameter\";&#125;åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è·³è¿‡äº†é”™è¯¯è¡Œï¼Œè¿˜è®°å½•äº†ä¸€ä¸ªé”™è¯¯ï¼Œä»¥ä¾¿ç”¨æˆ·ç¨åå¯ä»¥ç¡®å®šä¸ºä»€ä¹ˆç¨‹åºæ²¡æœ‰æŒ‰é¢„æœŸæ‰§è¡Œã€‚å¦‚æœåœ¨æŸç§å›¾å½¢ç¯å¢ƒä¸­å·¥ä½œ(ä¾‹å¦‚MFC, SDL, QT, etcâ€¦)ã€‚é€šå¸¸æ˜¯å¼¹å‡ºä¸€ä¸ªå¸¦æœ‰é”™è¯¯ä»£ç çš„æ¶ˆæ¯æ¡†ï¼Œç„¶åç»ˆæ­¢ç¨‹åºã€‚","categories":[],"tags":[]},{"title":"C&C++/å‡½æ•°é‡è½½","slug":"C&C++/å‡½æ•°é‡è½½","date":"2020-05-03T09:53:36.709Z","updated":"2020-05-03T10:11:58.593Z","comments":true,"path":"archives/6c7b6feb.html","link":"","permalink":"https://longlongqin.github.io/archives/6c7b6feb.html","excerpt":"","text":"å‡½æ•°é‡è½½æ˜¯C++çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒå…è®¸æˆ‘ä»¬åˆ›å»ºå…·æœ‰ç›¸åŒåç§°çš„å¤šä¸ªå‡½æ•°ï¼Œå®ƒä»¬çš„å½¢å‚éœ€è¦æ˜¯ä¸åŒçš„ã€‚å…·ä½“å†…å®¹è¯·æŸ¥çœ‹åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/76-function-overloading/","categories":[],"tags":[]},{"title":"C&C++/å†…è”å‡½æ•°","slug":"C&C++/å†…è”å‡½æ•°","date":"2020-05-03T09:12:59.630Z","updated":"2020-05-03T09:44:41.512Z","comments":true,"path":"archives/738b4cec.html","link":"","permalink":"https://longlongqin.github.io/archives/738b4cec.html","excerpt":"","text":"å‡½æ•°çš„ä¸€ä¸ªä¸»è¦ç¼ºç‚¹æ˜¯æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œéƒ½ä¼šå‡ºç°ä¸€å®šæ•°é‡çš„æ€§èƒ½å¼€é”€ã€‚è¿™æ˜¯å› ä¸ºCPUå¿…é¡»å­˜å‚¨å®ƒæ­£åœ¨æ‰§è¡Œçš„å½“å‰æŒ‡ä»¤çš„åœ°å€(è¿™æ ·å®ƒå°±çŸ¥é“ä»¥åè¦è¿”å›åˆ°å“ªé‡Œ)ä»¥åŠå…¶ä»–å¯„å­˜å™¨ï¼Œæ‰€æœ‰çš„å‡½æ•°å‚æ•°éƒ½å¿…é¡»åˆ›å»ºå¹¶èµ‹å€¼ï¼Œç¨‹åºå¿…é¡»è½¬ç§»åˆ°ä¸€ä¸ªæ–°çš„ä½ç½®ã€‚å°±åœ°ç¼–å†™çš„ä»£ç è¦å¿«å¾—å¤šã€‚å¯¹äºå¤§å‹å’Œ/æˆ–æ‰§è¡Œå¤æ‚ä»»åŠ¡çš„å‡½æ•°ï¼Œä¸å‡½æ•°è¿è¡Œæ‰€éœ€çš„æ—¶é—´ç›¸æ¯”ï¼Œå‡½æ•°è°ƒç”¨çš„å¼€é”€é€šå¸¸æ˜¯å¾®ä¸è¶³é“çš„ã€‚ç„¶è€Œï¼Œå¯¹äºå°çš„ã€å¸¸ç”¨çš„å‡½æ•°ï¼Œæ‰§è¡Œå‡½æ•°è°ƒç”¨æ‰€éœ€çš„æ—¶é—´é€šå¸¸æ¯”å®é™…æ‰§è¡Œå‡½æ•°ä»£ç æ‰€éœ€çš„æ—¶é—´å¤šå¾—å¤šã€‚è¿™å¯èƒ½å¯¼è‡´ä¸¥é‡çš„æ€§èƒ½æŸå¤±ã€‚c++æä¾›äº†ä¸€ç§å°†å‡½æ•°çš„ä¼˜ç‚¹ä¸å°±åœ°ç¼–å†™ä»£ç çš„é€Ÿåº¦ç›¸ç»“åˆçš„æ–¹æ³•: å†…è”å‡½æ•°ã€‚inlineå…³é”®å­—ç”¨äºè¯·æ±‚ç¼–è¯‘å™¨å°†å‡½æ•°è§†ä¸ºå†…è”å‡½æ•°ã€‚å½“ç¼–è¯‘å™¨ç¼–è¯‘æ‚¨çš„ä»£ç æ—¶ï¼Œæ‰€æœ‰å†…è”å‡½æ•°éƒ½åœ¨é€‚å½“çš„ä½ç½®å±•å¼€â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°è°ƒç”¨è¢«æ›¿æ¢ä¸ºå‡½æ•°æœ¬èº«å†…å®¹çš„å‰¯æœ¬ï¼Œä»è€Œæ¶ˆé™¤äº†å‡½æ•°è°ƒç”¨çš„å¼€é”€!ç¼ºç‚¹æ˜¯ï¼Œå› ä¸ºå†…è”å‡½æ•°åœ¨æ¯ä¸ªå‡½æ•°è°ƒç”¨æ—¶éƒ½è¢«å°±åœ°å±•å¼€ï¼Œè¿™ä¼šä½¿ç¼–è¯‘åçš„ä»£ç å˜å¾—æ›´å¤§ï¼Œç‰¹åˆ«æ˜¯å½“å†…è”å‡½æ•°å¾ˆé•¿æˆ–è€…æœ‰å¾ˆå¤šå¯¹å†…è”å‡½æ•°çš„è°ƒç”¨æ—¶ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š1234567891011int min(int x, int y)&#123; return x &gt; y ? y : x;&#125; int main()&#123; std::cout &lt;&lt; min(5, 6) &lt;&lt; '\\n'; std::cout &lt;&lt; min(3, 2) &lt;&lt; '\\n'; return 0;&#125;è¿™ä¸ªç¨‹åºè°ƒç”¨å‡½æ•°min()ä¸¤æ¬¡ï¼Œå¯¼è‡´å‡½æ•°è°ƒç”¨å¼€é”€å¤šäº†ä¸¤æ¬¡ã€‚å› ä¸ºmin()æ˜¯ä¸€ä¸ªå¾ˆçŸ­çš„å‡½æ•°ï¼Œå®ƒæ˜¯å†…è”çš„æœ€ä½³é€‰æ‹©:1234inline int min(int x, int y)&#123; return x&gt;y ? y : x;&#125;ç°åœ¨ï¼Œå½“ç¨‹åºç¼–è¯‘main()æ—¶ï¼Œå®ƒå°†åˆ›å»ºæœºå™¨ç ï¼Œå°±å¥½åƒmain()æ˜¯è¿™æ ·å†™çš„:123456int main()&#123; std::cout &lt;&lt; (5 &gt; 6 ? 6 : 5) &lt;&lt; '\\n'; std::cout &lt;&lt; (3 &gt; 2 ? 2 : 3) &lt;&lt; '\\n'; return 0;&#125;è¿™å°†æ‰§è¡Œå¾—å¿«ä¸€äº›ï¼Œä»£ä»·æ˜¯ç¼–è¯‘åçš„ä»£ç ç¨å¾®å¤§ä¸€äº›ã€‚ç”±äºå­˜åœ¨ä»£ç è†¨èƒ€çš„å¯èƒ½æ€§ï¼Œå†…è”å‡½æ•°æœ€é€‚åˆçŸ­å‡½æ•°(ä¾‹å¦‚ï¼Œä¸è¶…è¿‡å‡ è¡Œ)ï¼Œè¿™äº›çŸ­å‡½æ•°é€šå¸¸åœ¨å¾ªç¯å†…éƒ¨è°ƒç”¨ï¼Œå¹¶ä¸”ä¸è¿›è¡Œåˆ†æ”¯ã€‚è¿˜è¦æ³¨æ„ï¼Œinlineå…³é”®å­—åªæ˜¯ä¸€ä¸ªå»ºè®®â€”â€”å¦‚æœæ‚¨è¯•å›¾å†…è”ä¸€ä¸ªå†—é•¿çš„å‡½æ•°ï¼Œç¼–è¯‘å™¨å¾ˆå¯èƒ½ä¼šå¿½ç•¥æ‚¨å¯¹å†…è”å‡½æ•°çš„è¯·æ±‚ã€‚ç°ä»£ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è®¾ä¸ºå†…è”å‡½æ•°æœ€åï¼Œç°ä»£ç¼–è¯‘å™¨ç°åœ¨éå¸¸æ“…é•¿è‡ªåŠ¨å†…è”å‡½æ•°â€”â€”åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ¯”äººç±»åšå¾—æ›´å¥½ã€‚å³ä½¿æ²¡æœ‰å°†å‡½æ•°æ ‡è®°ä¸ºå†…è”å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šå°†å®ƒè®¤ä¸ºä¼šå¯¼è‡´æ€§èƒ½æé«˜çš„å†…è”å‡½æ•°æ ‡è®°ä¸ºå†…è”å‡½æ•°ã€‚å› æ­¤ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¹¶ä¸éœ€è¦ç‰¹åˆ«ä½¿ç”¨inlineå…³é”®å­—ã€‚è®©ç¼–è¯‘å™¨ä¸ºæ‚¨å¤„ç†å†…è”å‡½æ•°ã€‚æ‰€ä»¥ï¼Œä¸éœ€è¦æ‰‹åŠ¨å»è®¾ç½®ï¼Œç¼–è¯‘å™¨ä¼šæ™ºèƒ½çš„è‡ªåŠ¨å¸®æˆ‘ä»¬å°†é€‚å½“çš„å‡½æ•°è®¾ç½®ä¸ºå†…è”å‡½æ•°ã€‚","categories":[],"tags":[]},{"title":"C&C++/æŒ‰å€¼ä¼ é€’","slug":"C&C++/æŒ‰å€¼ä¼ é€’","date":"2020-05-02T23:52:02.648Z","updated":"2020-05-03T00:15:45.857Z","comments":true,"path":"archives/6b668399.html","link":"","permalink":"https://longlongqin.github.io/archives/6b668399.html","excerpt":"","text":"å‡½æ•°è°ƒç”¨åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/introduction-to-functions/https://www.learncpp.com/cpp-tutorial/introduction-to-function-parameters-and-arguments/å½“ä½ è¯»ä¸€æœ¬ä¹¦çš„æ—¶å€™ï¼Œçªç„¶æœ‰äººç»™ä½ æ‰“ç”µè¯ã€‚ç„¶åä½ å°±ç”¨â€œä¹¦ç­¾â€å¤¹åœ¨å½“å‰é˜…è¯»ä½ç½®ï¼Œå»æ¥ç”µè¯ã€‚ç­‰ä½ ç”µè¯æ¥å®Œï¼Œå†å›åˆ°ä½ æ”¾ä¹¦ç­¾çš„é‚£ä¸ªåœ°æ–¹ç»§ç»­è¯»ä¹¦ã€‚å‡½æ•°è°ƒç”¨(function call)æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚å®ƒå‘Šè¯‰CPUä¸­æ–­å½“å‰å‡½æ•°å¹¶åœ¨è¿™é‡Œâ€œæ”¾ä¸€ä¸ªä¹¦ç­¾â€ï¼Œç„¶åæ‰§è¡Œå¦ä¸€ä¸ªå‡½æ•°(å°±æ˜¯å‡½æ•°è°ƒç”¨ä¸­æåŠçš„é‚£ä¸ªå‡½æ•°)ã€‚å½“è°ƒç”¨ç»“æŸåï¼ŒCPUå°±è¿”å›åˆ°â€œä¹¦ç­¾â€çš„ä½ç½®ï¼Œç„¶åå†ç»§ç»­æ‰§è¡Œã€‚callerï¼šå‘èµ·å‡½æ•°è°ƒç”¨çš„å‡½æ•°å«åšcallerï¼›callee(called function)ï¼šè¢«è°ƒç”¨çš„å‡½æ•°å«åšcallee(called function)ã€‚int main()çš„è¿”å›å€¼ï¼šåœ¨int main()å‡½æ•°æœ€åï¼Œä¼šæœ‰è¿”å›å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯è¿”å›åˆ°æ“ä½œç³»ç»Ÿçš„ï¼Œä¸ºäº†è®©æ“ä½œç³»ç»ŸçŸ¥é“è¿™ä¸ªç¨‹åºæ‰§è¡ŒæˆåŠŸä¸å¦ã€‚mainå‡½æ•°çš„è¿”å›å€¼ï¼Œæœ‰ä¸€ä¸ªç‰¹å®šåå­—å«åšï¼šstatus code ï¼ˆçŠ¶æ€ç ï¼‰ä¸€èˆ¬ return 0; è¡¨ç¤ºç¨‹åºæ‰§è¡ŒæˆåŠŸã€‚è¿”å›éé›¶å€¼ï¼Œè¡¨ç¤ºç¨‹åºæ‰§è¡Œé”™è¯¯ã€‚C++è§„å®šï¼Œmainå‡½æ•°å¿…é¡»æ˜¯intå‹C++æ ‡å‡†ä¸­è§„å®šçš„ï¼šmainå‡½æ•°çš„è¿”å›å€¼åº”è¯¥å®šä¹‰ä¸ºintç±»å‹ã€‚å¯¹äºâ€void main(void);â€è¿™ç§é”™è¯¯å½¢å¼ï¼Œè™½ç„¶åœ¨ä¸€äº›ç¼–è¯‘å™¨ä¸­å¯ä»¥é€šè¿‡ç¼–è¯‘(å¦‚vc6)ï¼Œä½†å¹¶éæ‰€æœ‰çš„ç¼–è¯‘å™¨éƒ½æ”¯æŒã€‚main()å‡½æ•°çš„åŸå‹æ˜¯ï¼š1int main(int argc, char **argv, char **env)å®å‚çš„å€¼ä¸ä¼šè¢«å‡½æ•°æ”¹åŠ¨åŸæ–‡ï¼šhttps://www.learncpp.com/cpp-tutorial/72-passing-arguments-by-value/é»˜è®¤æƒ…å†µä¸‹ï¼Œæ— æŒ‡é’ˆçš„å®å‚æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚å½“å®å‚æ˜¯â€œæŒ‰å€¼ä¼ é€’â€æ—¶ï¼Œå®å‚çš„å€¼ä¼šè¢«å¤åˆ¶åˆ°å‡½æ•°çš„å½¢å‚ä¸­ã€‚æ‰€ä»¥ï¼ŒåŸæ¥çš„å®å‚çš„å€¼æ˜¯ä¸ä¼šè¢«å‡½æ•°æ”¹åŠ¨çš„ã€‚å‡½æ•°å‚æ•°æ±‚å€¼çš„é¡ºåºåœ¨C++ä¸­ï¼Œæ²¡æœ‰è§„å®šå®å‚åŒ¹é…çš„é¡ºåºï¼ˆé¡ºåºï¼šä»å·¦â†’å³ï¼Œè¿˜æ˜¯ä»å³â†’å·¦ï¼‰ï¼Œå› ä¸ºåŒ¹é…é¡ºåºä¸é‡è¦ã€‚1someFunction(a(), b()); // a() or b() may be called firstæ˜¯ä»å³â†’å·¦ï¼Œè¿˜æ˜¯ä»å³â†’å·¦ï¼šå–å†³äºa()å’Œb()çš„åŠŸèƒ½ã€‚å¦‚æœä½ æƒ³è¦è§„å®šè°å…ˆçš„è¯ï¼Œä½ å¯ä»¥æ˜¾ç¤ºçš„è§„å®šåŒ¹é…é¡ºåºï¼Œå¦‚ï¼š1234int avar&#123; a() &#125;; // a() will always be called firstint bvar&#123; b() &#125;; // b() will always be called second someFunction(avar, bvar); // it doesn't matter whether avar or bvar are copied first because they are just valuesæŒ‰å€¼ä¼ é€’çš„ä¼˜åŠ£ä¼˜åŠ¿ï¼šé€šè¿‡å€¼ä¼ é€’çš„å‚æ•°å¯ä»¥æ˜¯å˜é‡(ä¾‹å¦‚x)ã€æ–‡å­—(ä¾‹å¦‚6)ã€è¡¨è¾¾å¼(ä¾‹å¦‚x+1)ã€ç»“æ„å’Œç±»ä»¥åŠæšä¸¾æ•°ã€‚æ¢å¥è¯è¯´ï¼Œå‡ ä¹ä»»ä½•äº‹æƒ…ã€‚è¢«è°ƒç”¨çš„å‡½æ•°ä¸ä¼šæ”¹å˜å®å‚ï¼Œè¿™å¯ä»¥é˜²æ­¢å‰¯ä½œç”¨ã€‚çŸ­å¤„å¤åˆ¶structå’Œclassä¼šå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½æŸå¤±ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šæ¬¡è°ƒç”¨å‡½æ•°çš„æƒ…å†µä¸‹ã€‚æŒ‰å€¼ä¼ é€’çš„ä½¿ç”¨æ—¶æœºä½¿ç”¨æ—¶æœºï¼šå½“ä¼ é€’åŸºæœ¬æ•°æ®ç±»å‹å’Œæšä¸¾æ•°æ—¶ï¼Œä¸”å‡½æ•°ä¸éœ€è¦ä¿®æ”¹å®å‚ã€‚ä¸é€‚ç”¨æƒ…å†µï¼šåœ¨ä¼ é€’structæˆ–ç±»æ—¶(åŒ…æ‹¬std::arrayã€std::vectorå’Œstd::string)ã€‚","categories":[],"tags":[]},{"title":"test your code","slug":"C&C++/æ ‡å‡†åº“algorithm","date":"2020-05-02T10:17:47.397Z","updated":"2020-05-02T16:41:52.317Z","comments":true,"path":"archives/5937092e.html","link":"","permalink":"https://longlongqin.github.io/archives/5937092e.html","excerpt":"LearnCpp chapterLhttps://www.learncpp.com","text":"LearnCpp chapterLhttps://www.learncpp.comæ ‡å‡†åº“ algorithmsçš„ä»‹ç»ç”±äºæœç´¢ã€è®¡æ•°å’Œæ’åºæ˜¯å¦‚æ­¤å¸¸è§çš„æ“ä½œï¼Œc++æ ‡å‡†åº“æä¾›äº†ä¸€ç»„å‡½æ•°ï¼Œåªéœ€å‡ è¡Œä»£ç å°±å¯ä»¥å®Œæˆè¿™äº›ä»»åŠ¡ã€‚æ­¤å¤–ï¼Œè¿™äº›æ ‡å‡†åº“å‡½æ•°ç»è¿‡äº†é¢„å…ˆæµ‹è¯•ï¼Œå®ƒä»¬æ˜¯é«˜æ•ˆçš„ï¼Œå¯ä»¥å¤„ç†å„ç§ä¸åŒçš„å®¹å™¨ç±»å‹ï¼Œå¹¶ä¸”è®¸å¤šè¿˜æ”¯æŒå¹¶è¡ŒåŒ–(å°†å¤šä¸ªCPUçº¿ç¨‹ç”¨äºåŒä¸€ä»»åŠ¡ä»¥æ›´å¿«åœ°å®Œæˆå®ƒçš„èƒ½åŠ›)ã€‚ç®—æ³•åº“ä¸­æä¾›çš„åŠŸèƒ½å¤§è‡´å¯åˆ†ä¸ºä¸‰ç±»:æ£€æŸ¥å™¨â€”â€”ç”¨äºæŸ¥çœ‹(ä½†ä¸ä¿®æ”¹)å®¹å™¨ä¸­çš„æ•°æ®ã€‚ä¾‹å¦‚æœç´¢å’Œè®¡æ•°ã€‚ä¿®æ”¹åºåˆ—â€”â€”ç”¨äºä¿®æ”¹å®¹å™¨ä¸­çš„æ•°æ®çš„é¡ºåºã€‚ä¾‹å¦‚æ’åºå’Œå˜æ¢ã€‚è¾…åŠ©å™¨â€”â€”ç”¨äºæ ¹æ®æ•°æ®æˆå‘˜çš„å€¼ç”Ÿæˆç»“æœã€‚ç¤ºä¾‹åŒ…æ‹¬å°†å€¼ç›¸ä¹˜çš„å¯¹è±¡ï¼Œæˆ–è€…ç¡®å®šå…ƒç´ å¯¹çš„æ’åºé¡ºåºçš„å¯¹è±¡ã€‚æ›´å¤šå…³äº algorithms ã€‚æ³¨ï¼šåœ¨åº“â€œalgorithmâ€ä¸­æ‰€æœ‰å‡½æ•°éƒ½ä½¿ç”¨äº†è¿­ä»£å™¨ã€‚ä½¿ç”¨std::fineæŒ‰å€¼æŸ¥æ‰¾å…ƒç´ std::find ç”¨äºæ‰¾å‡º ç»™å®šå€¼ åœ¨å®¹å™¨ä¸­ç¬¬ä¸€æ¬¡çš„å‡ºç°ã€‚å®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼šåºåˆ—ä¸­èµ·å§‹å…ƒç´ çš„è¿­ä»£å™¨ï¼›åºåˆ—ä¸­ç»“æŸå…ƒç´ çš„è¿­ä»£å™¨ï¼›è¦æœç´¢çš„å€¼å®ƒçš„è¿”å›å€¼ï¼šå¦‚æœæ‰¾åˆ°äº†ä¸è¦æœç´¢å€¼ç›¸åŒ¹é…çš„è¿­ä»£å™¨ï¼Œå°±è¿”å›æŒ‡å‘è¿™ä¸ªå…ƒç´ çš„è¿­ä»£å™¨ï¼›å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±è¿”å›å®¹å™¨çš„æœ«ç«¯çš„è¿­ä»£å™¨ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt; int main()&#123; std::array arr&#123; 13, 90, 99, 5, 40, 80 &#125;; std::cout &lt;&lt; \"Enter a value to search for and replace with: \"; int search&#123;&#125;; int replace&#123;&#125;; std::cin &gt;&gt; search &gt;&gt; replace; // Input validation omitted // std::find returns an iterator pointing to the found element (or the end of the container) // we'll store it in a variable, using type inference to deduce the type of // the iterator (since we don't care) auto found&#123; std::find(arr.begin(), arr.end(), search) &#125;; // Algorithms that don't find what they were looking for return the end iterator. // We can access it by using the end() member function. if (found == arr.end()) &#123; std::cout &lt;&lt; \"Could not find \" &lt;&lt; search &lt;&lt; '\\n'; &#125; else &#123; // Override the found element. *found = replace; &#125; for (int i : arr) &#123; std::cout &lt;&lt; i &lt;&lt; ' '; &#125; std::cout &lt;&lt; '\\n'; return 0;&#125;Sample run when the element is found12Enter a value to search for and replace with: 5 23413 90 99 234 40 80Sample run when the element isnâ€™t found123Enter a value to search for and replace with: 0 234Could not find 013 90 99 5 40 80ä½¿ç”¨std::find_ifæŸ¥æ‰¾ä¸æŸä¸ªæ¡ä»¶åŒ¹é…çš„å…ƒç´ æœ‰æ—¶ï¼Œæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹å®¹å™¨ä¸­æ˜¯å¦æœ‰åŒ¹é…æŸäº›æ¡ä»¶çš„å€¼(ä¾‹å¦‚ï¼ŒåŒ…å«ç‰¹å®šå­å­—ç¬¦ä¸²çš„å­—ç¬¦ä¸²)ï¼Œè€Œä¸æ˜¯ç¡®åˆ‡çš„å€¼ã€‚std::find_ifå‡½æ•°çš„å·¥ä½œæ–¹å¼ä¸std::findç±»ä¼¼ï¼Œä½†å®ƒä¸ä¼ é€’è¦æœç´¢çš„å€¼ï¼Œè€Œæ˜¯ä¼ å…¥ä¸€ä¸ªå¯è°ƒç”¨çš„å¯¹è±¡ï¼ˆå¦‚ï¼šå‡½æ•°çš„æŒ‡é’ˆï¼‰æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°åŒ¹é…é¡¹ã€‚std::find_ifå°†ä¸ºæ¯ä¸ªå…ƒç´ è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…çš„å…ƒç´ ï¼Œåˆ™è¿”å›è¯¥å…ƒç´ å¯¹åº”çš„è¿­ä»£å™¨ï¼›å½“æ²¡æœ‰åŒ¹é…æˆåŠŸæ—¶ï¼Œè¿”å›å®¹å™¨çš„æœ€åä¸€ä¸ªè¿­ä»£å™¨ï¼›ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨std::find_ifæ¥æ£€æŸ¥æ˜¯å¦æœ‰åŒ…å«å­å­—ç¬¦ä¸²â€œnutâ€çš„å…ƒç´ :1234567891011121314151617181920212223242526272829303132333435#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;string_view&gt; // Our function will return true if the element matchesbool containsNut(std::string_view str)&#123; // std::string_view::find returns std::string_view::npos if it doesn't find // the substring. Otherwise it returns the index where the substring occurs // in str. return (str.find(\"nut\") != std::string_view::npos);&#125; int main()&#123; std::array&lt;std::string_view, 4&gt; arr&#123; \"apple\", \"banana\", \"walnut\", \"lemon\" &#125;; // Scan our array to see if any elements contain the \"nut\" substring auto found&#123; std::find_if(arr.begin(), arr.end(), containsNut) &#125;; if (found == arr.end()) &#123; std::cout &lt;&lt; \"No nuts\\n\"; &#125; else &#123; std::cout &lt;&lt; \"Found \" &lt;&lt; *found &lt;&lt; '\\n'; &#125; return 0;&#125;/*ç»“æœ*/Found walnut //walnutè¿™ä¸ªå­—ç¬¦ä¸²åŒ…å«å­ä¸²â€œnutâ€ä½¿ç”¨std::countå’Œstd::count_ifæ¥è®¡ç®—å‡ºç°çš„æ¬¡æ•°std::coutæœç´¢â€ä¸€ä¸ªå…ƒç´ â€çš„æ‰€æœ‰å‡ºç°æƒ…å†µã€‚std::count_ifæœç´¢â€ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ â€çš„æ‰€æœ‰å‡ºç°æƒ…å†µã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†è®¡ç®—æœ‰å¤šå°‘å…ƒç´ åŒ…å«å­å­—ç¬¦ä¸²â€œnutâ€:1234567891011121314151617181920212223#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;string_view&gt; bool containsNut(std::string_view str)&#123; return (str.find(\"nut\") != std::string_view::npos);&#125; int main()&#123; std::array&lt;std::string_view, 5&gt; arr&#123; \"apple\", \"banana\", \"walnut\", \"lemon\", \"peanut\" &#125;; auto nuts&#123; std::count_if(arr.begin(), arr.end(), containsNut) &#125;; std::cout &lt;&lt; \"Counted \" &lt;&lt; nuts &lt;&lt; \" nut(s)\\n\"; return 0;&#125;/*ç»“æœ*/Counted 2 nut(s)ä½¿ç”¨std::sortæ¥å®šåˆ¶æ’åºæˆ‘ä»¬ä»¥å‰ä½¿ç”¨std::sortæŒ‰å‡åºå¯¹æ•°ç»„æ’åºï¼Œä½†æ˜¯std::sortå¯ä»¥åšå¾—æ›´å¤šã€‚std::sortå¯ä»¥è®©æˆ‘ä»¬ï¼šå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå®ƒçš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå…è®¸æˆ‘ä»¬æŒ‰ç…§è‡ªå·±çš„å–œå¥½è¿›è¡Œæ’åºã€‚è¯¥å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°è¿›è¡Œæ¯”è¾ƒï¼šå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°çš„é¡ºåºåº”è¯¥æ’åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¹‹å‰ï¼Œåˆ™è¿”å›trueã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œstd::sortæŒ‰å‡åºæ’åˆ—å…ƒç´ ã€‚è®©æˆ‘ä»¬ä½¿ç”¨std::sortæ¥ä½¿ç”¨ä¸€ä¸ªåä¸ºâ€greaterâ€çš„è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°å¯¹æ•°ç»„è¿›è¡Œå€’åºæ’åº:1234567891011121314151617181920212223242526272829#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt; bool greater(int a, int b)&#123; // Order @a before @b if @a is greater than @b. return (a &gt; b);&#125; int main()&#123; std::array arr&#123; 13, 90, 99, 5, 40, 80 &#125;; // Pass greater to std::sort std::sort(arr.begin(), arr.end(), greater); for (int i : arr) &#123; std::cout &lt;&lt; i &lt;&lt; ' '; &#125; std::cout &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/99 90 80 40 13 5å°æŠ€å·§ï¼šå› ä¸ºæŒ‰é™åºæ’åºæ˜¯å¾ˆå¸¸è§çš„ï¼Œæ‰€ä»¥c++ä¹Ÿä¸ºå®ƒæä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹(åä¸ºstd::greaterï¼Œåœ¨å¤´æ–‡ä»¶&lt;functional&gt;ä¸­)ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼š1234567891011//æˆ‘ä»¬å‘¢å¯ä»¥å°†ä¸‹é¢è¯­å¥ï¼šstd::sort(arr.begin(), arr.end(), greater); // call our custom greater function//æ›¿æ¢ä¸ºï¼šstd::sort(arr.begin(), arr.end(), std::greater&#123;&#125;); // use the standard library greater comparison // Before C++17, we had to specify the element type when we create std::greaterstd::sort(arr.begin(), arr.end(), std::greater&lt;int&gt;&#123;&#125;); // use the standard library greater comparison/*æ³¨æ„*/std::greater&#123;&#125;çš„å¤§&#123;&#125;éœ€è¦èŠ±æ‹¬å·ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„å‡½æ•°ã€‚å®ƒæ˜¯ä¸€ä¸ªç±»å‹ï¼Œä¸ºäº†ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦å®ä¾‹åŒ–è¯¥ç±»å‹çš„å¯¹è±¡ã€‚èŠ±æ‹¬å·å®ä¾‹åŒ–è¯¥ç±»å‹çš„åŒ¿åå¯¹è±¡(ç„¶åå°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™std::sort)ã€‚ä½¿ç”¨std::for_eachå¯¹å®¹å™¨çš„æ‰€æœ‰å…ƒç´ æ‰§è¡Œç‰¹å®šæ“ä½œstd::for_eachæ¥å—ä¸€ä¸ªåˆ—è¡¨ä½œä¸ºè¾“å…¥ï¼Œå¹¶å¯¹æ¯ä¸ªå…ƒç´ åº”ç”¨ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°ã€‚å½“æˆ‘ä»¬å¸Œæœ›å¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œç›¸åŒçš„æ“ä½œæ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬ä½¿ç”¨std::for_eachæ¥åŠ å€æ•°ç»„ä¸­çš„æ‰€æœ‰æ•°å­—:123456789101112131415161718192021222324252627#include &lt;algorithm&gt;#include &lt;array&gt;#include &lt;iostream&gt; void doubleNumber(int &amp;i)&#123; i *= 2;&#125; int main()&#123; std::array arr&#123; 1, 2, 3, 4 &#125;; std::for_each(arr.begin(), arr.end(), doubleNumber); for (int i : arr) &#123; std::cout &lt;&lt; i &lt;&lt; ' '; &#125; std::cout &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/2 4 6 8","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"è¿­ä»£","slug":"C&C++/è¿­ä»£","date":"2020-05-02T09:12:57.000Z","updated":"2020-05-02T10:04:46.109Z","comments":true,"path":"archives/80469b0c.html","link":"","permalink":"https://longlongqin.github.io/archives/80469b0c.html","excerpt":"LearnCpp chapterLhttps://www.learncpp.com","text":"LearnCpp chapterLhttps://www.learncpp.coméå†æ•°ç»„çš„é›†ä¸­æ–¹æ³•åœ¨ç¼–ç¨‹ä¸­ï¼Œéå†æ•°æ®æ•°ç»„(æˆ–å…¶ä»–ç»“æ„)æ˜¯ä¸€ä»¶å¾ˆå¸¸è§çš„äº‹æƒ…ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»ä»‹ç»äº†è®¸å¤šä¸åŒçš„å®ç°æ–¹æ³•:ä½¿ç”¨å¾ªç¯å’Œç´¢å¼•(forå¾ªç¯å’Œwhileå¾ªç¯)ï¼Œä½¿ç”¨æŒ‡é’ˆå’ŒæŒ‡é’ˆç®—æ³•ï¼Œä»¥åŠåŸºäºèŒƒå›´çš„forå¾ªç¯12345678910111213141516171819202122232425262728293031323334353637383940414243444546#include &lt;array&gt;#include &lt;iostream&gt; int main()&#123; //åœ¨æ”¯æŒC++17æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ï¼š //std::array data&#123; 0, 1, 2, 3, 4, 5, 6 &#125;;//ç±»å‹è‡ªåŠ¨æ¨æ–­ä¸ºstd::array&lt;int, 7&gt; std::array&lt;int,7&gt; data&#123;0, 1, 2, 3, 4, 5, 6 &#125;; std::size_t length length&#123;std::size(data)&#125;; //åŒæ ·éœ€è¦åœ¨C++17ä¸­æ‰å¯ä»¥ä½¿ç”¨ // whileå¾ªç¯æ˜¾å¼ç´¢å¼• std::size_t index&#123;0&#125;; while (index != length) &#123; std::cout &lt;&lt; data[index] &lt;&lt; ' '; ++index; &#125; std::cout &lt;&lt; '\\n'; // forå¾ªç¯æ˜¾å¼ç´¢å¼• for (index = 0; index &lt; length; ++index) &#123; std::cout &lt;&lt; data[index] &lt;&lt; ' '; &#125; std::cout &lt;&lt;'\\n'; //å¸¦æœ‰æŒ‡é’ˆçš„forå¾ªç¯(æ³¨æ„:pträ¸èƒ½æ˜¯constï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å¯¹å®ƒé€’å¢) /*ä½¿ç”¨æŒ‡é’ˆå’ŒæŒ‡é’ˆè¿ç®—è¿›è¡Œå¾ªç¯æ˜¯å†—é•¿çš„ï¼Œè€Œä¸”å¯èƒ½ä¼šä½¿ä¸äº†è§£æŒ‡é’ˆè¿ç®—è§„åˆ™çš„è¯»è€…æ„Ÿåˆ°å›°æƒ‘ã€‚ æŒ‡é’ˆè¿ç®—ä¹Ÿåªæœ‰åœ¨å…ƒç´ åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­çš„æƒ…å†µä¸‹æ‰æœ‰æ•ˆ(è¿™å¯¹äºæ•°ç»„æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯å¯¹äºå…¶ä»–ç±»å‹ çš„å®¹å™¨ï¼Œä¾‹å¦‚listã€treeå’Œmapï¼Œåˆ™ä¸æ˜¯æ­£ç¡®çš„)ã€‚*/ for(auto ptr &#123;&amp;data[0]&#125;; ptr!=(&amp;data[0]+length); ++ptr) &#123; std::cout &lt;&lt;*ptr&lt;&lt;'\\n'; &#125; std::cout &lt;&lt;'\\n'; //åŸºäºèŒƒå›´çš„forå¾ªç¯ for(int i; data) &#123; std::cout &lt;&lt;i&lt;&lt;'\\n'; &#125; std::cout &lt;&lt;'\\n'; return 0; &#125;å¦‚æœæˆ‘ä»¬åªä½¿ç”¨ç´¢å¼•æ¥è®¿é—®å…ƒç´ ï¼Œé‚£ä¹ˆä½¿ç”¨ç´¢å¼•è¿›è¡Œå¾ªç¯æ¯”éœ€è¦çš„ç±»å‹æ›´å¤šã€‚å®ƒä¹Ÿåªæœ‰åœ¨å®¹å™¨(ä¾‹å¦‚array)æä¾›å¯¹å…ƒç´ çš„ç›´æ¥è®¿é—®æ—¶æ‰æœ‰æ•ˆ(æ•°ç»„å¯ä»¥è¿™æ ·åšï¼Œä½†æ˜¯å…¶ä»–ç±»å‹çš„å®¹å™¨ï¼Œå¦‚liståˆ™ä¸è¡Œ)ã€‚åŸºäºèŒƒå›´çš„forå¾ªç¯æ›´æœ‰è¶£ä¸€äº›ï¼Œå› ä¸ºéå†å®¹å™¨çš„æœºåˆ¶æ˜¯éšè—çš„â€”â€”ä½†æ˜¯ï¼Œå®ƒä»¬ä»ç„¶é€‚ç”¨äºå„ç§ä¸åŒçš„ç»“æ„(æ•°ç»„ã€åˆ—è¡¨ã€æ ‘ã€æ˜ å°„ç­‰ç­‰)ã€‚å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„?ä»–ä»¬ä½¿ç”¨è¿­ä»£å™¨ã€‚è¿­ä»£å™¨(iterator)è¿­ä»£å™¨æ˜¯ä¸€ä¸ªè®¾è®¡ç”¨æ¥éå†å®¹å™¨çš„å¯¹è±¡(ä¾‹å¦‚æ•°ç»„ä¸­çš„å€¼ã€å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦)ï¼Œæä¾›å¯¹æ¯ä¸ªå…ƒç´ çš„è®¿é—®ã€‚å®¹å™¨å¯ä»¥æä¾›ä¸åŒç§ç±»çš„è¿­ä»£å™¨ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ•°ç»„å®¹å™¨å¯èƒ½æä¾›ï¼šä¸€ä¸ªæŒ‰æ­£å‘é¡ºåºéå†æ•°ç»„çš„æ­£å‘è¿­ä»£å™¨ï¼Œä»¥åŠä¸€ä¸ªæŒ‰åå‘é¡ºåºéå†æ•°ç»„çš„åå‘è¿­ä»£å™¨ã€‚å› ä¸ºc++è¿­ä»£å™¨é€šå¸¸ä½¿ç”¨ç›¸åŒçš„æ¥å£è¿›è¡Œéå† (æ“ä½œç¬¦++ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ) å’Œè®¿é—® (æ“ä½œç¬¦*è®¿é—®å½“å‰å…ƒç´ )ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€è‡´çš„æ–¹æ³•è¿­ä»£å„ç§ä¸åŒçš„å®¹å™¨ç±»å‹ã€‚æŒ‡é’ˆä½œä¸ºè¿­ä»£å™¨æœ€ç®€å•çš„è¿­ä»£å™¨æ˜¯æŒ‡é’ˆï¼Œå®ƒ(ä½¿ç”¨æŒ‡é’ˆè¿ç®—)å¯¹å†…å­˜ä¸­é¡ºåºå­˜å‚¨çš„æ•°æ®èµ·ä½œç”¨ã€‚è®©æˆ‘ä»¬é‡æ–°è®¿é—®ä¸€ä¸ªç®€å•çš„æ•°ç»„éå†ä½¿ç”¨æŒ‡é’ˆå’ŒæŒ‡é’ˆè¿ç®—:1234567891011121314151617181920212223#include &lt;array&gt;#include &lt;iostream&gt;int main()&#123; std::array data &#123; 0, 1, 2, 3, 4, 5, 6 &#125;; auto begin&#123;&amp;data[0]&#125;; //æ³¨æ„ï¼Œå®ƒæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ ä¹‹å¤–çš„ä¸€ä¸ªç‚¹ auto end &#123;begin + std::size(data)&#125;; //å¸¦æœ‰æŒ‡é’ˆçš„forå¾ªç¯ for(auto ptr&#123;begin&#125;; ptr != end; ++ptr) &#123; std::cout &lt;&lt; *ptr &lt;&lt; ' '; // è§£å¼•ç”¨ to get value of current element &#125; return 0ï¼›&#125;/*ç»“æœ*/0 1 2 3 4 5 6æ³¨æ„ï¼šä½ å¯èƒ½ä¼šè¿™æ ·åšï¼šint* end {&amp;array[std::size(array)]};ä½†æ˜¯è€…ä¼šé€ æˆæœªå®šä¹‰è¡Œä¸ºï¼Œå› ä¸ºarray[std::size(array)]ä¼šè®¿é—®æ•°ç»„æœ€åçš„ä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚(å› ä¸º std::size(array)è®¡ç®—æ•°ç»„å¤§å°ï¼Œä½†æ˜¯è¦è®°å¾—æ•°ç»„ä¸‹æ ‡æ˜¯ä»0å¼€å§‹çš„å‘€ã€‚)æ ‡å‡†åº“ä¸­çš„è¿­ä»£å™¨è¿­ä»£æ˜¯å¦‚æ­¤å¸¸è§çš„æ“ä½œï¼Œä»¥è‡³äºæ‰€æœ‰æ ‡å‡†åº“å®¹å™¨éƒ½æä¾›äº†å¯¹è¿­ä»£çš„ç›´æ¥æ”¯æŒã€‚å®ƒä¸éœ€è¦è®¡ç®—æˆ‘ä»¬è‡ªå·±çš„å¼€å§‹ç‚¹å’Œç»“æŸç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°begin()å’Œend()ç®€å•åœ°å‘å®¹å™¨è¯·æ±‚å¼€å§‹ç‚¹å’Œç»“æŸç‚¹:æ³¨æ„ï¼šå‡½æ•°``begin()å’Œend()`å¾—åˆ°çš„æ˜¯ å¼€å§‹ å’Œ ç»“æŸçš„ä½ç½®ï¼ˆå³ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼‰123456789101112131415161718192021#include &lt;array&gt;#include &lt;iostream&gt;int main()&#123; std::array&lt;int , 3&gt; a&#123; 1, 2, 3 &#125;; //å‘æˆ‘ä»¬çš„æ•°ç»„è¯·æ±‚å¼€å§‹å’Œç»“æŸç‚¹(é€šè¿‡begin()å’Œend()æˆå‘˜å‡½æ•°)ã€‚ auto bengin&#123;array.begin()&#125;; auto end &#123;array.end()&#125;; for (auto p&#123;begin&#125;; p!=end; ++p) &#123; std::cout &lt;&lt; *p &lt;&lt; ' '; // è§£å¼•ç”¨ to get value of current element. &#125; return 0;&#125;/*ç»“æœ*/1 2 3å¤´æ–‡ä»¶&lt;iterator&gt;ä¸­çš„std::beginã€ std::end1234567891011121314151617181920#include &lt;array&gt;#include &lt;iostream&gt;#include &lt;iterator&gt; // For std::begin and std::endâ­ int main()&#123; std::array array&#123; 1, 2, 3 &#125;; // Use std::begin and std::end to get the begin and end points. auto begin&#123; std::begin(array) &#125;; //â­ auto end&#123; std::end(array) &#125;; //â­ for (auto p&#123; begin &#125;; p != end; ++p) // ++ to move to next element &#123; std::cout &lt;&lt; *p &lt;&lt; ' '; // dereference to get value of current element &#125; std::cout &lt;&lt; '\\n'; return 0;&#125;åŸºäºèŒƒå›´çš„forå¾ªç¯çš„begin()ã€end()æ‰€æœ‰å…·æœ‰begin()å’Œend()æˆå‘˜å‡½æ•°çš„ç±»å‹ï¼Œæˆ–è€…å¯ä»¥ä¸std::beginå’Œstd::endä¸€èµ·ä½¿ç”¨çš„ç±»å‹ï¼Œéƒ½å¯ä»¥åœ¨åŸºäºèŒƒå›´çš„forå¾ªç¯ä¸­ä½¿ç”¨ã€‚12345678910111213141516#include &lt;array&gt;#include &lt;iostream&gt; int main()&#123; std::array&lt;int,3&gt; array&#123; 1, 2, 3 &#125;; // This does exactly the same as the loop we used before. for (int i : array) &#123; std::cout &lt;&lt; i &lt;&lt; ' '; &#125; std::cout &lt;&lt; '\\n'; return 0;&#125;â­åœ¨åå°ï¼ŒåŸºäºèŒƒå›´çš„forå¾ªç¯è°ƒç”¨è¦éå†çš„ç±»å‹çš„begin()å’Œend()ã€‚std::arrayä¸ºä»€ä¹ˆå¯ä»¥åœ¨åŸºäºèŒƒå›´çš„forå¾ªç¯ä¸­ä½¿ç”¨ï¼Ÿç­”ï¼šå› ä¸ºstd::arrayä¸­å«æœ‰begin()å’Œend()æˆå‘˜å‡½æ•°ï¼Œæ‰€ä»¥ä»–å¯ä»¥åœ¨åŸºäºèŒƒå›´çš„forå¾ªç¯ä¸­ä½¿ç”¨ã€‚cé£æ ¼çš„å›ºå®šæ•°ç»„å¯ä»¥ä¸std::beginå’Œstd::endå‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åŸºäºèŒƒå›´çš„forå¾ªç¯éå†å®ƒä»¬ã€‚åŠ¨æ€æ•°ç»„ä¸å¯ä»¥åœ¨åŸºäºèŒƒå›´çš„forå¾ªç¯ä¸­ä½¿ç”¨ï¼Ÿç­”ï¼šæ˜¯çš„ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰std::endå‡½æ•°(å› ä¸ºç±»å‹ä¿¡æ¯ä¸åŒ…å«æ•°ç»„çš„é•¿åº¦)ã€‚è¿­ä»£å™¨å¤±æ•ˆ(ç©ºæ‚¬è¿­ä»£å™¨)å°±åƒæŒ‡é’ˆå’Œå¼•ç”¨ä¸€æ ·ï¼Œå¦‚æœ è¿­ä»£çš„å…ƒç´ æ›´æ”¹äº†åœ°å€ æˆ– è¢«é”€æ¯ æ—¶è¿­ä»£å™¨ä¼šè¢«â€œæ‚¬ç©ºâ€ã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬è¯´è¿­ä»£å™¨å·²ç»å¤±æ•ˆã€‚è®¿é—®æ— æ•ˆçš„è¿­ä»£å™¨ä¼šäº§ç”Ÿæœªå®šä¹‰çš„è¡Œä¸ºã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"std::vector","slug":"C&C++/stdï¼šï¼švector","date":"2020-05-02T02:48:38.000Z","updated":"2020-05-02T08:06:51.674Z","comments":true,"path":"archives/40d82c05.html","link":"","permalink":"https://longlongqin.github.io/archives/40d82c05.html","excerpt":"LearnCpp chapterPhttps://www.learncpp.com","text":"LearnCpp chapterPhttps://www.learncpp.comä»‹ç»std::vectoråœ¨c++ 03ä¸­å¼•å…¥çš„std::vectoræä¾›äº†å¤„ç†è‡ªèº«å†…å­˜ç®¡ç†çš„åŠ¨æ€æ•°ç»„åŠŸèƒ½ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åˆ›å»ºåœ¨è¿è¡Œæ—¶è®¾ç½®é•¿åº¦çš„æ•°ç»„ï¼Œè€Œä¸å¿…ä½¿ç”¨newå’Œdeleteæ˜¾å¼åœ°åˆ†é…å’Œé‡Šæ”¾å†…å­˜ã€‚å®ƒåœ¨å¤´æ–‡ä»¶ &lt;vector&gt;ä¸­å£°æ˜åŠåˆå§‹åŒ–std::vector123456789#include &lt;vector&gt;//ä¸éœ€è¦åœ¨åˆå§‹åŒ–æ—¶æŒ‡å®šé•¿åº¦std::vector&lt;int&gt; array;std::vector&lt;int&gt; array2 = &#123;9, 7, 5, 3, 1 &#125;; //ä½¿ç”¨åˆå§‹åŒ–å™¨åˆ—è¡¨åˆå§‹åŒ–æ•°ç»„std::vector&lt;int&gt; array3 = &#123;9, 7, 5, 3, 1 &#125;; //ä½¿ç”¨ç»Ÿä¸€çš„åˆå§‹åŒ–æ¥åˆå§‹åŒ–æ•°ç»„(c++ 11å¼€å§‹)//ä»C++17å¼€å§‹ï¼Œç±»å‹ä¹Ÿå¯ä»¥çœç•¥std::vector array4 &#123;9, 7, 5, 3, 1 &#125;; //æ¨å¯¼å‡ºstd::vector&lt; int &gt;ğŸ–ï¼šæ‚¨ä¸éœ€è¦åœ¨ç¼–è¯‘æ—¶åŒ…å«æ•°ç»„é•¿åº¦ã€‚è¿™æ˜¯å› ä¸ºstd::vectorå°†æ ¹æ®è¯·æ±‚ä¸ºå…¶å†…å®¹åŠ¨æ€åˆ†é…å†…å­˜ã€‚è®¿é—®æ•°ç»„å…ƒç´ å°±åƒstd::arrayä¸€æ ·ï¼Œä½ å¯ä»¥ä½¿ç”¨ æ“ä½œç¬¦[](æ²¡æœ‰è¾¹ç•Œæ£€æµ‹) æˆ–è€… å‡½æ•°at()(ä¸è¾¹ç•Œæ£€æµ‹åŠŸèƒ½) æ¥è®¿é—®æ•°ç»„å…ƒç´ ï¼š12array[6] = 2; // no bounds checkingarray.at(7) = 3; // does bounds checkingC++11ä¸­ä¸ºstd::vectorèµ‹å€¼ä»c++ 11å¼€å§‹ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–å™¨åˆ—è¡¨ä¸ºstd::vectorèµ‹å€¼:12array = &#123; 0, 1, 2, 3, 4 &#125;; // okay, array length is now 5array = &#123; 9, 8, 7 &#125;; // okay, array length is now 3åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œvectorå°†è‡ªè°ƒæ•´å¤§å°ä»¥åŒ¹é…æä¾›çš„å…ƒç´ æ•°é‡ã€‚è‡ªæˆ‘æ¸…ç†å¯ä»¥é˜²æ­¢å†…å­˜æ³„æ¼å½“vector è¶…å‡ºå®ƒæ‰€åœ¨çš„èŒƒå›´æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨é‡Šæ”¾å®ƒæ‰€æ§åˆ¶çš„å†…å­˜ã€‚è¿™ä¸ä»…æ–¹ä¾¿(ä¸ç”¨æ‰‹åŠ¨æ¸…æ¥šé™¤)ï¼Œè€Œä¸”è¿˜å¯ä»¥é˜²æ­¢å†…å­˜æ³„æ¼ã€‚123456789101112//çœ‹ä¸€ä¸ªä¾‹å­void do(bool earlyExit)&#123; int *array &#123;new int[5] &#123; 9, 7, 5, 3, 1 &#125; &#125;; if(earlyExit) return; //å…¶ä»–ä»£ç  delete[] array; //never called&#125;//å¦‚æœearlyExitè¢«è®¾ç½®ä¸ºtrueï¼Œé‚£ä¹ˆå°±ä¸ä¼šæ‰§è¡Œdeleteè¯­å¥ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å†…å­˜ä¸ä¼šè¢«é‡Šæ”¾ï¼Œå°±ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ä½†æ˜¯ï¼Œå¦‚æœæ•°ç»„æ˜¯std::vectorï¼Œåˆ™ä¸ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå› ä¸ºä¸€æ—¦æ•°ç»„è¶…å‡ºä½œç”¨åŸŸï¼Œå†…å­˜å°±ä¼šè¢«é‡Šæ”¾(ä¸ç®¡å‡½æ•°æ˜¯å¦æå‰é€€å‡º)ã€‚è¿™ä½¿å¾—std::vectoræ¯”æ‚¨è‡ªå·±åˆ†é…å†…å­˜è¦å®‰å…¨å¾—å¤šã€‚vectorè®°å¾—å®ƒçš„é•¿åº¦ä¸åƒå†…ç½®çš„åŠ¨æ€æ•°ç»„ï¼Œå®ƒä»¬ä¸çŸ¥é“å®ƒä»¬æ‰€æŒ‡å‘çš„æ•°ç»„çš„é•¿åº¦ï¼Œstd::vectorè·Ÿè¸ªå®ƒçš„é•¿åº¦ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡size()å‡½æ•°æ±‚å‡ºvectorçš„é•¿åº¦:123456789101112131415#include &lt;iostream&gt;#include &lt;vector&gt; void printLength(const std::vector&lt;int&gt;&amp; array)&#123; std::cout &lt;&lt; \"The length is: \" &lt;&lt; array.size() &lt;&lt; '\\n';&#125; int main()&#123; std::vector array &#123; 9, 7, 5, 3, 1 &#125;; printLength(array); return 0;&#125;æ³¨æ„ï¼šä¸std::arrayä¸€æ ·ï¼Œsize()è¿”å›åµŒå¥—ç±»å‹size_typeçš„å€¼(ä¸Šé¢ä¾‹å­ä¸­çš„å®Œæ•´ç±»å‹æ˜¯std::vector::size_type)ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ã€‚è°ƒæ•´vectoræ•°ç»„è°ƒæ•´å†…ç½®åŠ¨æ€åˆ†é…æ•°ç»„çš„é•¿åº¦éå¸¸å¤æ‚ã€‚è°ƒæ•´std::vectorçš„å¤§å°éå¸¸ç®€å•ï¼Œåªéœ€è¦è°ƒç”¨resize()å‡½æ•°ä¸€æ ·ç®€å•:æ³¨æ„ï¼šå½“æˆ‘ä»¬è°ƒæ•´å‘é‡çš„å¤§å°æ—¶ï¼Œç°æœ‰çš„å…ƒç´ å€¼å°†è¢«ä¿ç•™!æ–°å…ƒç´ åˆå§‹åŒ–ä¸ºç±»å‹çš„é»˜è®¤å€¼(å¯¹äºæ•´æ•°ä¸º0)ã€‚12345678910111213141516171819202122#include &lt;iostream&gt;#include &lt;vector&gt; int main()&#123; std::vector array &#123;0,1,2&#125;; array.resize(5); //å°†å…¶é•¿åº¦è®¾ç½®ä¸º5â­ std::cout &lt;&lt; \"The length is: \" &lt;&lt; array.size() &lt;&lt; '\\n'; for (int i : array) std::cout &lt;&lt; i &lt;&lt; ' '; std::cout &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/The length is: 50 1 2 0 0è°ƒæ•´vectorçš„é•¿åº¦çš„ä»£ä»·å¾ˆé«˜ï¼Œæ‰€ä»¥å°½å¯èƒ½çš„å°‘è°ƒæ•´ä»–ä»¬çš„é•¿åº¦ã€‚boolç±»å‹çš„å‹ç¼©ç±»å‹ä¸ºboolçš„std::vectoræœ‰ä¸€ä¸ªç‰¹æ®Šçš„å®ç°ï¼Œå®ƒå°†æŠŠ8ä¸ªå¸ƒå°”å€¼å‹ç¼©æˆä¸€ä¸ªå­—èŠ‚! è¿™æ˜¯åœ¨å¹•åå‘ç”Ÿçš„ï¼Œä¸ä¼šæ”¹å˜æ‚¨ä½¿ç”¨std::vectorçš„æ–¹å¼ã€‚12345678910111213141516171819#include &lt;vector&gt;#include &lt;iostream&gt; int main()&#123; std::vector&lt;bool&gt; array &#123; true, false, false, true, true &#125;; std::cout &lt;&lt; \"The length is: \" &lt;&lt; array.size() &lt;&lt; '\\n'; for (int i : array) std::cout &lt;&lt; i &lt;&lt; ' '; std::cout &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/The length is: 51 0 0 1 1å¦‚ä½•ç†è§£â€œ8å¸ƒå°”å€¼ä¸ºä¸€ä¸ªå­—èŠ‚â€è¿™å¥è¯ã€‚æ•°ç»„çš„æœ€å¤§é•¿åº¦æ˜¯255è¿˜æ˜¯æˆ‘ç†è§£é”™äº†?ç­”ï¼šå¦‚æœæ²¡æœ‰ä¸“é—¨åŒ–ï¼Œå‘é‡çš„æ¯ä¸ªå…ƒç´ å°†å ç”¨â€™ sizeof(bool) â€˜å­—èŠ‚ã€‚è¿™æµªè´¹äº†å¾ˆå¤šç©ºé—´ï¼Œå› ä¸ºboolä¸æ˜¯å‡å°±æ˜¯çœŸï¼Œæ‰€ä»¥boolåªèƒ½å®¹çº³ä¸€ä¸ªä½ã€‚1ä¸ªå­—èŠ‚æ˜¯8ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨1ä¸ªå­—èŠ‚ä¸­å­˜å‚¨8ä¸ªå†…å­˜ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å­˜å‚¨8å€äºå…ƒç´ æ•°é‡çš„å…ƒç´ ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨æ›´å¤šçš„å†…å­˜ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼šstd::vectorçš„æ•°ç»„å­˜å‚¨boolç±»å‹çš„å€¼æ—¶ï¼Œæ¯ä¸€ä¸ªå€¼åªå ä¸€ä¸ªbitã€‚ï¼‰è€Œè¿™å®ç°çš„æœºåˆ¶æ˜¯åœ¨ç”±std::vectorçš„è®¾è®¡è€…å®ç°çš„ï¼Œæˆ‘ä»¬ä¸ç”¨ç®¡","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"std::array","slug":"C&C++/stdï¼šï¼šarray","date":"2020-05-01T15:21:32.052Z","updated":"2020-05-02T02:42:16.602Z","comments":true,"path":"archives/c9c6ad08.html","link":"","permalink":"https://longlongqin.github.io/archives/c9c6ad08.html","excerpt":"LearnCpp chapterPhttps://www.learncpp.com","text":"LearnCpp chapterPhttps://www.learncpp.comåœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œå·²ç»æåˆ°äº†ï¼šâ€œå›ºå®šé•¿åº¦æ•°ç»„â€ï¼šå½“ä¼ å…¥å‡½æ•°å‚æ•°æ—¶å®ƒä¼šé€€åŒ–ä¸ºæŒ‡é’ˆï¼Œå¤±å»æ•°ç»„é•¿åº¦ä¿¡æ¯ï¼Œï¼›â€œåŠ¨æ€æ•°ç»„â€ï¼šåŠ¨æ€æ•°ç»„çš„é‡Šæ”¾é—®é¢˜ï¼›ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œc++æ ‡å‡†åº“åŒ…å«äº†ç®€åŒ–æ•°ç»„ç®¡ç†çš„åŠŸèƒ½:std::arrayå’Œstd::vectorã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬å°†å­¦ä¹ std::arrayï¼Œä¸‹èŠ‚è¯¾æˆ‘ä»¬å°†å­¦ä¹ std::vectorã€‚ä»‹ç»std::arrayåœ¨c++ 11ä¸­å¼•å…¥çš„std::arrayæä¾›äº†åœ¨ä¼ é€’ç»™å‡½æ•°æ—¶ä¸ä¼šé€€åŒ–çš„å›ºå®šæ•°ç»„åŠŸèƒ½ã€‚std::arrayæ˜¯åœ¨å‘½åç©ºé—´stdä¸­çš„å¤´æ–‡ä»¶&lt;array&gt;ä¸­å®šä¹‰çš„ã€‚å£°æ˜ä¸€ä¸ªstd::arrayå˜é‡123#include &lt;array&gt;std::array&lt;int , 3&gt; myarray; //å£°æ˜ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œå®ƒçš„é•¿åº¦ä¸º3å°±åƒæ™®é€šçš„å›ºå®šé•¿åº¦æ•°ç»„ä¸€æ ·ï¼Œstd::arrayå®šä¹‰çš„æ•°ç»„çš„é•¿åº¦ä¹Ÿå¿…é¡»æ˜¯â€œç¼–è¯‘æ—¶å¸¸é‡â€std::arrayçš„åˆå§‹åŒ–å¯ä»¥ä½¿ç”¨â€œåˆå§‹åŒ–å™¨åˆ—è¡¨â€ æˆ–è€… â€œç»Ÿä¸€åˆå§‹åŒ–â€åˆå§‹åŒ–å™¨åˆ—è¡¨1std::array&lt;int,5&gt; myarray = &#123;9, 7, 5, 3, 1&#125;;ç»Ÿä¸€åˆå§‹åŒ–1std::array&lt;int,5&gt; myarray &#123;9, 7, 5, 3, 1&#125;;æ³¨æ„ï¼šåˆå§‹åŒ–æ—¶ä¸èƒ½çœç•¥æ•°ç»„é•¿åº¦ä¸åƒå†…ç½®çš„å›ºå®šæ•°ç»„ï¼Œstd::arrayåˆå§‹åŒ–æ•°ç»„æ—¶ï¼Œä¸èƒ½çœç•¥æ•°ç»„é•¿åº¦ï¼š12std::array&lt;int,&gt; myarray&#123;9, 7, 5, 3, 1&#125;; //âœ–ï¼Œéœ€è¦æ˜¾å¼çš„è¾“å…¥æ•°ç»„é•¿åº¦std::array&lt;int&gt; myarray&#123;9, 7, 5, 3, 1&#125;; //âœ–ï¼Œéœ€è¦æ˜¾å¼çš„è¾“å…¥æ•°ç»„é•¿åº¦åœ¨C++17ä¸­ï¼Œæ˜¯å¯ä»¥çš„ä½†æ˜¯ï¼Œç”±äºc++ 17ï¼Œå…è®¸çœç•¥ç±»å‹å’Œå¤§å°ã€‚åªæœ‰åœ¨æ•°ç»„æ˜¾å¼åˆå§‹åŒ–çš„æƒ…å†µä¸‹ï¼Œæ‰å¯ä»¥åŒæ—¶å¿½ç•¥å®ƒä»¬ï¼Œä½†ä¸èƒ½å¿½ç•¥å…¶ä¸­ä¸€ä¸ªã€‚12std::array myarray &#123;9, 7, 5, 3, 1&#125;; //The type is deduced to std::array&lt;int, 5&gt;std::array myArray &#123; 9.7, 7.31 &#125;; // The type is deduced to std::array&lt;double, 2&gt;å¯¹std::arrayæ•°ç»„èµ‹å€¼å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–å™¨åˆ—è¡¨å‘æ•°ç»„èµ‹å€¼ï¼š1234std::array&lt;int,5&gt; myarray;myarray = &#123; 0, 1, 2, 3, 4 &#125;; // okaymyarray = &#123; 9, 8, 7 &#125;; // okay, elements 3 and 4 are set to zero!myarray = &#123; 0, 1, 2, 3, 4, 5 &#125;; // âœ–, too many elements in initializer list!è¾¹ç•Œæ£€æŸ¥(ä½¿ç”¨at()å‡½æ•°)ä¸å†…ç½®çš„å›ºå®šæ•°ç»„ä¸€æ ·ï¼Œä¸‹æ ‡æ“ä½œç¬¦ä¸æ‰§è¡Œä»»ä½•è¾¹ç•Œæ£€æŸ¥ã€‚å¦‚æœæä¾›äº†æ— æ•ˆçš„ç´¢å¼•ï¼Œå¯èƒ½ä¼šå‘ç”Ÿä¸å¥½çš„äº‹æƒ…ã€‚ä½†æ˜¯ï¼Œstd::arrayæä¾›äº†ç¬¬äºŒç§è®¿é—®æ•°ç»„å…ƒç´ çš„æ–¹æ³•ï¼šä½¿ç”¨å‡½æ•°at()ã€‚å®ƒå¸¦æœ‰æ£€æµ‹è¾¹ç•Œçš„åŠŸèƒ½ã€‚ç¬¬ä¸€ç§ å°±æ˜¯æ™®é€šçš„æ•°ç»„è®¿é—®å½¢å¼123std::array myArray &#123; 9, 7, 5, 3, 1 &#125;;myArray.at(1) = 6; // array element 1 valid, sets array element 1 to value 6myArray.at(9) = 10; // array element 9 is invalid, will throw an erroråœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè°ƒç”¨array.at(1)æ£€æŸ¥ä»¥ç¡®ä¿æ•°ç»„å…ƒç´ 1æ˜¯æœ‰æ•ˆçš„ï¼Œå› ä¸ºå®ƒæ˜¯æœ‰æ•ˆçš„ï¼Œæ‰€ä»¥å®ƒè¿”å›å¯¹æ•°ç»„å…ƒç´ 1çš„å¼•ç”¨ã€‚ç„¶åæˆ‘ä»¬ç»™å®ƒèµ‹å€¼6ã€‚ä½†æ˜¯ï¼Œå¯¹array.at(9)çš„è°ƒç”¨å¤±è´¥ï¼Œå› ä¸ºæ•°ç»„å…ƒç´ 9è¶…å‡ºäº†æ•°ç»„çš„ç•Œé™ã€‚at()å‡½æ•°ä¸æ˜¯è¿”å›ä¸€ä¸ªå¼•ç”¨ï¼Œè€Œæ˜¯æŠ›å‡ºä¸€ä¸ªé”™è¯¯æ¥ç»ˆæ­¢ç¨‹åº(æ³¨æ„:å®ƒå®é™…ä¸ŠæŠ›å‡ºäº†ä¸€ä¸ªstd::out_of_rangeç±»å‹çš„å¼‚å¸¸â€”â€”æˆ‘ä»¬åœ¨ç¬¬15ç« è®¨è®ºäº†å¼‚å¸¸)ã€‚å› ä¸ºå®ƒæ‰§è¡Œè¾¹ç•Œæ£€æŸ¥ï¼Œæ‰€ä»¥at()æ¯”æ“ä½œç¬¦[]æ…¢(ä½†æ›´å®‰å…¨)ã€‚std::arrayçš„æ•°ç»„ä¼šè‡ªåŠ¨æ¸…ç†å½“std::arrayæ•°ç»„è¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œå®ƒä¼šè‡ªå·±æ¸…ç†ï¼Œæ‰€ä»¥ä¸éœ€è¦åšä»»ä½•æ‰‹åŠ¨æ¸…ç†ã€‚æ•°ç»„å¤§å°ï¼ˆä½¿ç”¨å‡½æ•°size()ï¼‰size()å‡½æ•°å¯ä»¥ç”¨æ¥æ£€ç´¢std::æ•°ç»„çš„é•¿åº¦:12345std::array myArray &#123; 9.0, 7.2, 5.4, 3.6, 1.8 &#125;;std::cout &lt;&lt; \"length: \" &lt;&lt; myArray.size() &lt;&lt; '\\n';/*ç»“æœ*/length: 5å‡½æ•°size()åœ¨å‡½æ•°è°ƒç”¨ä¸­ä¹Ÿèƒ½å·¥ä½œå› ä¸ºstd::arrayåœ¨ä¼ é€’ç»™å‡½æ•°æ—¶ä¸ä¼šè¡°å‡ä¸ºæŒ‡é’ˆï¼Œæ‰€ä»¥size()å‡½æ•°å³ä½¿åœ¨å‡½æ•°ä¸­è°ƒç”¨ä¹Ÿå¯ä»¥å·¥ä½œ:12345678910111213141516171819#include &lt;array&gt;#include &lt;iostream&gt; void printLength(const std::array&lt;double, 5&gt; &amp;myArray)&#123; std::cout &lt;&lt; \"length: \" &lt;&lt; myArray.size() &lt;&lt; '\\n';&#125; int main()&#123; std::array myArray &#123; 9.0, 7.2, 5.4, 3.6, 1.8 &#125;; printLength(myArray); return 0;&#125;/*ç»“æœ*/length: 5å‡½æ•°ä¼ é€’æ—¶ä½¿ç”¨å¼•ç”¨ä¼ é€’è¿˜è¦æ³¨æ„ï¼Œæˆ‘ä»¬é€šè¿‡â€œå¼•ç”¨â€æˆ–â€œconst å¼•ç”¨â€ å°†std::array æ•°ç»„ä¼ å…¥å‡½æ•°å‚æ•°ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢ç¼–è¯‘å™¨åœ¨å°†std::æ•°ç»„ä¼ é€’ç»™å‡½æ•°æ—¶(å‡ºäºæ€§èƒ½åŸå› )å¤åˆ¶std::arrayã€‚std::arrayçš„æ’åºï¼ˆç”¨std::sortï¼‰æ‚¨å¯ä»¥ä½¿ç”¨std::sort(åœ¨å¤´æ–‡ä»¶&lt;algorithm&gt;ä¸­)å¯¹std::arrayè¿›è¡Œæ’åºï¼š12345678910111213141516171819#include &lt;algorithm&gt; //for std::sort#include &lt;array&gt;#include &lt;iostream&gt;int main()&#123; std::array myArray &#123; 7, 3, 1, 9, 5 &#125;; std::sort(myArray.begin(), myArray.end()); //ç”±å°åˆ°è¾¾æ’åº //std::sort(myArray.rbegin(), myArray.rend()); // ç”±å¤§åˆ°å°æ’åº for(int number : myArray) &#123; std::cout &lt;&lt;number&lt;&lt;' '; &#125; return 0;&#125;/*ç»“æœ*/1 3 5 7 9æ‰‹åŠ¨ç´¢å¼•æ•°ç»„(é€šè¿‡size_type)çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼Œå®ƒé”™å“ªé‡Œäº†ï¼Ÿ123456789101112131415#include &lt;iostream&gt;#include &lt;array&gt; int main()&#123; std::array&lt;int, 5&gt; myArray =&#123; 7, 3, 1, 9, 5 &#125;; // Iterate through the array and print the value of the elements for (int i&#123; 0 &#125;; i &lt; myArray.size(); ++i) std::cout &lt;&lt; myArray[i] &lt;&lt; ' '; std::cout &lt;&lt; '\\n'; return 0;&#125;ç­”æ¡ˆï¼šç”±äºâ€œæœ‰ç¬¦å·â€ ä¸ â€œæ— ç¬¦å·â€ çš„å†²çªã€‚â€œsiez()å‡½æ•°â€ å’Œ â€œæ•°ç»„çš„ç´¢å¼•å‚æ•°(åœ¨æ“ä½œç¬¦[]ä¸­)â€ çš„ç±»å‹å«åšï¼šsize_typesize_typeï¼šç”±c++æ ‡å‡†å®šä¹‰ä¸ºæ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚æˆ‘ä»¬çš„å¾ªç¯è®¡æ•°å™¨/ç´¢å¼•(å˜é‡i)æ˜¯ä¸€ä¸ªæœ‰ç¬¦å·æ•´æ•°ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢ä»£ç ä¸­çš„ï¼ši &lt; myArray.size() ä¸ myArray[i] éƒ½å‡ºç°äº†ç±»å‹ä¸åŒ¹é…é—®é¢˜ã€‚siez_typeæ˜¯å±€éƒ¨ç±»å‹éå¸¸æœ‰è¶£çš„æ˜¯ï¼Œsize_typeä¸æ˜¯ä¸€ä¸ªå…¨å±€ç±»å‹(åƒintæˆ–std::size_t)ã€‚ç›¸åï¼Œå®ƒæ˜¯åœ¨std::arrayçš„å®šä¹‰ ä¸­å®šä¹‰çš„(c++å…è®¸åµŒå¥—ç±»å‹)ã€‚è¿™æ„å‘³ç€ï¼Œå½“æˆ‘ä»¬æƒ³è¦ä½¿ç”¨size_typeæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨å®ƒå‰é¢åŠ ä¸Šå®Œæ•´çš„æ•°ç»„ç±»å‹(åœ¨è¿™æ–¹é¢ï¼Œå¯ä»¥å°†std::arrayçœ‹ä½œä¸€ä¸ªåç§°ç©ºé—´)ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå…¨å‰ç¼€çš„â€œsize_typeâ€ç±»å‹æ˜¯std::array::size_type!æ‰€ä»¥ï¼Œä¸Šé¢ä»£ç çš„æ­£ç¡®å†™æ³•ä¸ºï¼š1234567891011121314151617#include &lt;array&gt;#include &lt;iostream&gt;int main()&#123; std::array&lt;int, 5&gt; myArray =&#123; 7, 3, 1, 9, 5 &#125;; //std::array&lt;int,5&gt;::size_type æ˜¯å‡½æ•°size()çš„è¿”å›ç±»å‹ //å› ä¸ºstd::array::size_typeæ˜¯std::size_tçš„åˆ«åï¼ˆç”±ä¸Šæ–‡å¯çŸ¥ï¼‰ï¼Œ //æ‰€ä»¥ï¼Œå¯ä»¥ä½¿ç”¨std::size_tæ¥æ›¿æ¢std::array::size_typeï¼ˆæˆ‘è¿™é‡Œå°±ä¸æ›¿æ¢äº†ï¼‰ for(std::array&lt;int, 5&gt;::size_type i&#123; 0 &#125;; i &lt; myArray.size(); ++i) std::cout &lt;&lt; myArray[i] &lt;&lt; ' '; std::cout &lt;&lt; '\\n'; return 0;&#125;é¿å…æ‰‹åŠ¨ç´¢å¼•æ•°ç»„æ›´å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯é¦–å…ˆé¿å…å¯¹std::arrayè¿›è¡Œæ‰‹åŠ¨ç´¢å¼•ã€‚ç›¸åï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œä½¿ç”¨åŸºäºèŒƒå›´çš„forå¾ªç¯(æˆ–è¿­ä»£å™¨)ã€‚ç»“æ„ä½“æ•°ç»„å½“ç„¶std::arrayå¹¶ä¸å±€ä»…ä»…é™äºæ•°å­—ä½œä¸ºå…ƒç´ çš„ã€‚å¯ä»¥åœ¨å¸¸è§„æ•°ç»„ä¸­ä½¿ç”¨çš„æ‰€æœ‰ç±»å‹éƒ½å¯ä»¥åœ¨std::arrayä¸­ä½¿ç”¨ã€‚1234567891011121314151617181920212223242526272829303132#include &lt;array&gt;#include &lt;iostream&gt; struct House&#123; int number&#123;&#125;; int stories&#123;&#125;; int roomsPerStory&#123;&#125;;&#125;; int main()&#123; std::array&lt;House, 3&gt; houses&#123;&#125;; //â­ houses[0] = &#123; 13, 4, 30 &#125;; houses[1] = &#123; 14, 3, 10 &#125;; houses[2] = &#123; 15, 3, 40 &#125;; for (const auto&amp; house : houses) &#123; std::cout &lt;&lt; \"House number \" &lt;&lt; house.number &lt;&lt; \" has \" &lt;&lt; (house.stories * house.roomsPerStory) &lt;&lt; \" rooms\\n\"; &#125; return 0;&#125;/*ç»“æœ*/House number 13 has 120 roomsHouse number 14 has 30 roomsHouse number 15 has 120 roomsé”™è¯¯çš„åˆå§‹åŒ–123456// Doesn't work.std::array&lt;House, 3&gt; houses&#123; &#123; 13, 4, 30 &#125;, &#123; 14, 3, 10 &#125;, &#123; 15, 3, 40 &#125;&#125;æ­£ç¡®çš„åˆå§‹åŒ–æ³¨ï¼šâ­ç»“æ„ä½“æ•°ç»„çš„åˆå§‹åŒ–è¿˜æ˜¯ä¸å¤ªæ˜ç™½ï¼Œç­‰åé¢å†ç»§ç»­å®Œå–„â­â€”â€“2020-05-02 10:39:3212345678910111213141516171819202122232425262728293031#include &lt;iostream&gt; struct House&#123; int number&#123;&#125;; int stories&#123;&#125;; int roomsPerStory&#123;&#125;;&#125;; struct Array&#123; House value[3]&#123;&#125;;&#125;; int main()&#123; // With braces, this works.â­ï¼ˆæ­£ç¡®çš„åˆå§‹åŒ–ï¼‰ Array houses&#123; &#123; &#123; 13, 4, 30 &#125;, &#123; 14, 3, 10 &#125;, &#123; 15, 3, 40 &#125; &#125; &#125;; for (const auto&amp; house : houses.value) &#123; std::cout &lt;&lt; \"House number \" &lt;&lt; house.number &lt;&lt; \" has \" &lt;&lt; (house.stories * house.roomsPerStory) &lt;&lt; \" rooms\\n\"; &#125; return 0;&#125;å°ç»“std::arrayæ˜¯å†…ç½®å›ºå®šæ•°ç»„çš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£å“ã€‚å®ƒæ˜¯æœ‰æ•ˆçš„ï¼Œå› ä¸ºå®ƒä¸æ¯”å†…ç½®çš„å›ºå®šæ•°ç»„ä½¿ç”¨æ›´å¤šçš„å†…å­˜ã€‚å”¯ä¸€çš„ç¼ºç‚¹std::arrayåœ¨å†…ç½®çš„å›ºå®šæ•°ç»„æ˜¯ä¸€ä¸ªç•¥å¾®å°´å°¬çš„è¯­æ³•,ä½ å¿…é¡»æ˜¾å¼åœ°æŒ‡å®šæ•°ç»„é•¿åº¦(ç¼–è¯‘å™¨ä¸ä¼šä¸ºä½ è®¡ç®—å®ƒçš„åˆå§‹åŒ–,é™¤éä½ è¿˜çœç•¥äº†ç±»å‹)ï¼Œæ‰€ä»¥ï¼Œä¸€èˆ¬å»ºè®®ä½¿ç”¨std::arrayæ¥æ›¿ä»£å†…ç½®ç±»å‹çš„å›ºå®šé•¿åº¦æ•°ç»„ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆä¸åŠ¨æ€å¤šç»´æ•°ç»„","slug":"C&C++/æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆä¸åŠ¨æ€å¤šç»´æ•°ç»„","date":"2020-05-01T09:43:02.209Z","updated":"2020-05-01T15:19:42.805Z","comments":true,"path":"archives/5937092e.html","link":"","permalink":"https://longlongqin.github.io/archives/5937092e.html","excerpt":"LearnCpp chapterPhttps://www.learncpp.com","text":"LearnCpp chapterPhttps://www.learncpp.comæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆè¡¨ç¤ºä¿å­˜å¦ä¸€ä¸ªæŒ‡é’ˆåœ°å€çš„æŒ‡é’ˆã€‚ä¸€ä¸ªæ™®é€šçš„æŒ‡é’ˆï¼š1int *ptr; //æŒ‡å‘æ•´æ•°çš„æŒ‡é’ˆï¼Œä¸€ä¸ªæ˜Ÿå·æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¼š1int **ptr; //ä¸€ä¸ªæŒ‡å‘æ•´å‹çš„æŒ‡é’ˆï¼Œä¸¤ä¸ªæ˜Ÿå·â€œæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆâ€çš„è§£å¼•ç”¨æŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆçš„å·¥ä½œæ–¹å¼ä¸æ™®é€šæŒ‡é’ˆä¸€æ ·â€”å¯ä»¥å¯¹å®ƒè§£å¼•ç”¨ä»¥æ£€è®¿é—®å®ƒæŒ‡å‘çš„å€¼ã€‚ç”±äºæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆçš„å€¼æ˜¯å¦ä¸€ä¸ªæŒ‡é’ˆçš„åœ°å€ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡è§£å¼•ç”¨å è®¿é—®çš„å€¼ æ˜¯ä¸€ä¸ªåœ°å€ï¼›ä½ è¿˜å¯ä»¥å†ä¸€æ¬¡çš„ è§£å¼•ç”¨ï¼Œç¬¬äºŒæ¬¡çš„è§£å¼•ç”¨ä¹‹å è®¿é—®çš„å°±æ˜¯ä¸€ä¸ªå€¼ï¼ˆä¸å†æ˜¯åœ°å€äº†ï¼‰ã€‚123456789101112int value = 5;int *ptr = &amp;value;std::cout &lt;&lt; *ptr; //è§£å¼•ç”¨æŒ‡å‘intç±»å‹çš„æŒ‡é’ˆptrï¼Œæ¥è®¿é—®è¯¥intå€¼int **ptrptr = &amp;ptr;std::cout &lt;&lt; **ptrptr; //ç¬¬ä¸€ä¸ªè§£å¼•ç”¨è·å–æŒ‡å‘intçš„æŒ‡é’ˆï¼Œç¬¬äºŒä¸ªè§£å¼•ç”¨è·å–intå€¼/*ç»“æœ*/55ä¸å¯ä»¥å°†â€œæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆâ€ç›´æ¥æŒ‡å‘å€¼1234int value = 5;int **ptrptr = &amp;&amp;value; //âœ–ï¼Œå› ä¸ºå–åœ°å€ç¬¦(&amp;)éœ€è¦çš„æ˜¯ å·¦å€¼(l-value)ï¼Œä½†æ˜¯ &amp;value æ˜¯ä¸€ä¸ª å³å€¼(r-value)â€œæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆâ€å¯ä»¥è¢«è®¾ç½®ä¸ºnull1int **ptrptr = nullptr; ////åœ¨c++ 11ä¹‹å‰ä½¿ç”¨0æŒ‡é’ˆæ•°ç»„æŒ‡é’ˆçš„æŒ‡é’ˆæœ‰å‡ ä¸ªç”¨é€”ã€‚æœ€å¸¸è§çš„ç”¨æ³•æ˜¯åŠ¨æ€åˆ†é…æŒ‡é’ˆæ•°ç»„:1int* array = new int*[10]; //åˆ†é…ä¸€ä¸ªæœ‰10ä¸ªintå‹æŒ‡é’ˆæ•°ç»„è¿™å°±åƒä¸€ä¸ªæ ‡å‡†çš„åŠ¨æ€åˆ†é…æ•°ç»„ï¼Œé™¤äº†æ•°ç»„å…ƒç´ çš„ç±»å‹æ˜¯â€œæŒ‡å‘æ•´å‹çš„æŒ‡é’ˆâ€ï¼Œè€Œä¸æ˜¯ æ•´æ•°ã€‚äºŒç»´åŠ¨æ€æ•°ç»„çš„åˆ†é…æŒ‡é’ˆåˆ°æŒ‡é’ˆçš„å¦ä¸€ä¸ªå¸¸è§ç”¨æ³•æ˜¯ç”¨äºï¼šåŠ¨æ€åˆ†é…å¤šç»´æ•°ç»„å›ºå®šé•¿åº¦çš„äºŒç»´æ•°ç»„çš„å£°æ˜ï¼š1int array[10][5];äºŒç»´åŠ¨æ€æ•°ç»„çš„åˆ†é…æœ‰ç‚¹å¤æ‚ã€‚ä½ ç¬¬ä¸€æ—¶é—´å¯èƒ½ä¼šæƒ³åˆ°è¿™æ ·å†™ï¼š1int **array = new int[10][5]; //âœ–ã€‚æ­£ç¡®æ–¹å¼ï¼šè¿™é‡Œæœ‰ä¸¤ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆã€‚1ã€æœ€å³è¾¹çš„æ•°ç»„ç»´åº¦æ˜¯ç¼–è¯‘æ—¶å¸¸é‡å½“æœ€å³è¾¹çš„æ•°ç»„ç»´åº¦æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå¯ä»¥è¿™æ ·åš:æœ€å³è¾¹çš„æ•°ç»„ç»´åº¦æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼šæ¯”å¦‚ï¼ša[ ] [5]ï¼Œå®ƒæ•°ç»„ä¸­æœ€å³è¾¹çš„ç»´åº¦æ˜¯ç¡®å®šçš„ï¼ˆ5ï¼‰12int (*array)[5] = new int [10][5];//å°æ‹¬å·ä¸èƒ½å°‘ï¼Œå› ä¸ºä¼˜å…ˆçº§çš„å…³ç³»å‘€åœ¨C++11åŠä¹‹åï¼Œæ›´æ¨èä½¿ç”¨autoç±»å‹ï¼š1auto array = new int[10][5];2ã€æœ€å³è¾¹çš„æ•°ç»„çš„ç»´åº¦ä¸æ˜¯ç¼–è¯‘æ—¶å¸¸é‡æ—¶å½“æœ€å³è¾¹çš„æ•°ç»„çš„ç»´åº¦ä¸æ˜¯ç¼–è¯‘æ—¶å¸¸é‡æ—¶ï¼Œå°±æ¯”è¾ƒå¤æ‚äº†ï¼Œæˆ‘ä»¬éœ€è¦ï¼šé¦–å…ˆï¼Œæˆ‘ä»¬åˆ†é…ä¸€ä¸ªæŒ‡é’ˆæ•°ç»„ï¼›ç„¶åï¼Œæˆ‘ä»¬éå†æŒ‡é’ˆæ•°ç»„å¹¶ä¸ºæ¯ä¸ªæ•°ç»„å…ƒç´ åˆ†é…ä¸€ä¸ªåŠ¨æ€æ•°ç»„ã€‚æˆ‘ä»¬çš„åŠ¨æ€äºŒç»´æ•°ç»„æ˜¯ä¸€ä¸ªåŠ¨æ€ä¸€ç»´æ•°ç»„çš„åŠ¨æ€ä¸€ç»´æ•°ç»„ã€‚12345int **array = new int*[10]; //åˆ†é…ä¸€ä¸ªåŒ…å«10ä¸ªæ•´å‹æŒ‡é’ˆçš„æ•°ç»„â€”â€”è¿™äº›æ˜¯æˆ‘ä»¬çš„è¡Œ for(int i=0; i&lt;10; ++i) &#123; array[i] = new int[5]; //è¿™æ˜¯æˆ‘ä»¬çš„åˆ— &#125;æ³¨æ„ï¼Œå› ä¸ºæ¯ä¸ªæ•°ç»„åˆ—æ˜¯ç‹¬ç«‹åŠ¨æ€åˆ†é…çš„ï¼Œæ‰€ä»¥æ¯ä¸€è¡Œçš„åˆ—æ•°å¯ä»¥ä¸ä¸€æ ·å‘€ï¼š12345int **array = new int*[10];for(int i=0; i&lt;10; ++i)&#123; array[i] = new int[i+1]; //è¿™æ˜¯æˆ‘ä»¬çš„åˆ—ï¼ˆâ­è¿™é‡Œçš„æ¯ä¸€è¡Œçš„åˆ—æ•°éƒ½ä¸ä¸€æ ·ï¼‰&#125;é‡Šæ”¾åŠ¨æ€äºŒç»´æ•°ç»„ä½¿ç”¨è¿™ç§æ–¹æ³•é‡Šæ”¾ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„äºŒç»´æ•°ç»„ä¹Ÿéœ€è¦ä¸€ä¸ªå¾ªç¯:123for(int i=0; i&lt;10; ++i) delete[] array[i];delete[] array; //è¿™éœ€è¦æ”¾åœ¨æœ€åæ³¨æ„ï¼Œæˆ‘ä»¬åˆ é™¤æ•°ç»„çš„é¡ºåºä¸åˆ›å»ºå®ƒçš„é¡ºåºç›¸å(é¦–å…ˆæ˜¯å…ƒç´ ï¼Œç„¶åæ˜¯æ•°ç»„æœ¬èº«)ã€‚å¦‚æœæˆ‘ä»¬å…ˆåˆ é™¤æ•°ç»„ï¼Œå†å»åˆ é™¤æ•°ç»„å…ƒç´ æ—¶ï¼Œä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚å› ä¸ºæˆ‘ä»¬åœ¨åˆ é™¤æ•°ç»„å…ƒç´ æ—¶å¿…é¡»è®¿é—®æ•°ç»„ï¼Œæ‰çŸ¥é“æ¯ä¸ªæ•°ç»„å…ƒç´ ã€‚ä½†æ˜¯æ­¤æ—¶ï¼Œæˆ‘ä»¬æ—©å·²ç»åˆ é™¤äº†æ•°ç»„ï¼Œå°±ä¼šå‘ç”Ÿæœªå®šä¹‰è¡Œä¸ºã€‚å°ç»“æˆ‘ä»¬å»ºè®®é¿å…ä½¿ç”¨æŒ‡é’ˆåˆ°æŒ‡é’ˆï¼Œé™¤éæ²¡æœ‰å…¶ä»–å¯ç”¨çš„é€‰é¡¹ï¼Œå› ä¸ºå®ƒä»¬ä½¿ç”¨èµ·æ¥å¾ˆå¤æ‚ï¼Œè€Œä¸”æœ‰æ½œåœ¨çš„å±é™©ã€‚ä½¿ç”¨æ™®é€šæŒ‡é’ˆæ¥è§£å¼•ç”¨ç©ºæŒ‡é’ˆæˆ–æ‚¬ç©ºæŒ‡é’ˆæ˜¯éå¸¸å®¹æ˜“çš„â€”ä½¿ç”¨æŒ‡é’ˆæ¥è§£å¼•ç”¨æŒ‡é’ˆæ˜¯éå¸¸å®¹æ˜“çš„ï¼Œå› ä¸ºæ‚¨å¿…é¡»æ‰§è¡Œä¸¤æ¬¡è§£å¼•ç”¨æ‰èƒ½è·å¾—åº•å±‚çš„å€¼!","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"void æŒ‡é’ˆ","slug":"C&C++/VoidæŒ‡é’ˆ(æ³›å‹æŒ‡é’ˆ)","date":"2020-05-01T08:44:31.757Z","updated":"2020-05-01T09:43:59.129Z","comments":true,"path":"archives/f482f5a8.html","link":"","permalink":"https://longlongqin.github.io/archives/f482f5a8.html","excerpt":"LearnCpp chapterPhttps://www.learncpp.com","text":"LearnCpp chapterPhttps://www.learncpp.comvoidæŒ‡é’ˆçš„å£°æ˜voidæŒ‡é’ˆï¼Œä¹Ÿç§°ä¸ºâ€œæ³›å‹æŒ‡é’ˆâ€ã€‚æ˜¯æŒ‡é’ˆçš„ä¸€ç§ç‰¹æ®Šç±»å‹ï¼Œå®ƒå¯ä»¥æŒ‡å‘ä»»ä½•æ•°æ®ç±»å‹çš„å¯¹è±¡!voidæŒ‡é’ˆåƒæ™®é€šæŒ‡é’ˆä¸€æ ·å£°æ˜ï¼Œä½¿ç”¨voidå…³é”®å­—ä½œä¸ºæŒ‡é’ˆçš„ç±»å‹:1void *ptr;voidæŒ‡é’ˆå¯ä»¥æŒ‡å‘ä»»ä½•æ•°æ®ç±»å‹çš„å¯¹è±¡:123456789101112131415int nValue;float fValue;struct something&#123; int n; float f;&#125;something sValue;void *ptr;ptr = &amp;nValue; //âœ”ptr = &amp;fValue; //âœ”ptr = &amp;sValue; //âœ”voidæŒ‡é’ˆä¸èƒ½è¢« è§£å¼•ç”¨ä½†æ˜¯ï¼Œå› ä¸ºvoidæŒ‡é’ˆä¸çŸ¥é“å®ƒæ‰€æŒ‡å‘çš„å¯¹è±¡çš„ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥è§£å¼•ç”¨ï¼ç›¸åï¼ŒvoidæŒ‡é’ˆå¿…é¡»å…ˆæ˜¾å¼åœ°è½¬æ¢ä¸ºå¦ä¸€ç§æŒ‡é’ˆç±»å‹ï¼Œç„¶åæ‰èƒ½è§£å¼•ç”¨ã€‚123456789int value &#123;1&#125;;void *voidPtr &#123;&amp;value&#125;;//â­âœ–ï¼ŒvoidæŒ‡é’ˆ ä¸èƒ½ è§£å¼•ç”¨std::cout &lt;&lt; *voidPtr &lt;&lt; '\\n'; //â­âœ”ï¼Œæˆ‘ä»¬å¯ä»¥å°†voidæŒ‡é’ˆ ç±»å‹è½¬æ¢ä¸º å…¶ä»–æŒ‡é’ˆç±»å‹(è¿™é‡Œæ˜¯ intå‹æŒ‡é’ˆ)ï¼Œint *intPtr &#123;static_cast&lt;int*&gt;(voidPtr)&#125;;std::cout &lt;&lt; *intPtr; ////ç„¶åå°±å¯ä»¥ è§£å¼•ç”¨ äº†ä¸€ä¸ªæ˜æ˜¾çš„é—®é¢˜å½“voidæŒ‡é’ˆä¸çŸ¥é“æŒ‡å‘ä»€ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•è½¬æ¢ç±»å‹ï¼Œè¿™å–å†³äºç¨‹åºçŒ¿çš„è®¾å®šï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344#include &lt;iostream&gt;enum class Type&#123; INT, FLOAT, CSTRING&#125;;void printValue(void *ptr, Type type)&#123; switch(type) &#123; //è½¬æ¢ä¸ºæ•´å‹æŒ‡é’ˆ å¹¶ è§£å¼•ç”¨ case Type::INT: std::cout &lt;&lt;* static_cast&lt;int*&gt;(ptr)&lt;&lt;'\\n'; break; //è½¬æ¢ä¸ºfloatæŒ‡é’ˆ å¹¶ è§£å¼•ç”¨ case Type::FLOAT: std::cout &lt;&lt;* static_cast&lt;float*&gt;(ptr)&lt;&lt;'\\n'; break; //è½¬æ¢ä¸ºcharæŒ‡é’ˆ ä½† æ²¡æœ‰è§£å¼•ç”¨â­ case Type::CSTRING: std::cout &lt;&lt; static_cast&lt;char*&gt;(ptr)&lt;&lt;'\\n'; //std::coutçŸ¥é“å°†char*ä½œä¸ºcé£æ ¼çš„å­—ç¬¦ä¸² //å¦‚æœæˆ‘ä»¬è¦è§£å¼•ç”¨çš„è¯ï¼Œé‚£å°±åªä¼šæ‰“å°ptræ‰€æŒ‡å‘çš„å•ä¸ªå­—ç¬¦ break; &#125;&#125;int main()&#123; int nValue&#123; 5 &#125;; float fValue&#123; 7.5f &#125;; char szValue[]&#123; \"Mollie\" &#125;; printValue(&amp;nValue, Type::INT); printValue(&amp;fValue, Type::FLOAT); printValue(&amp;szValue, Type::CSTRING); return 0;&#125;ç»“æœï¼šå¦‚æœï¼Œæˆ‘ä»¬å°†ç¬¬26è¡Œæ”¹ä¸ºï¼šstd::cout &lt;&lt;* static_cast&lt;char*&gt;(ptr)&lt;&lt;&#39;\\n&#39;;ï¼ˆå³ï¼Œè®©å®ƒ è§£å¼•ç”¨ï¼‰ã€‚ç»“æœï¼šå¯ä»¥çœ‹åˆ°ï¼šå¦‚æœæˆ‘ä»¬è¦è§£å¼•ç”¨çš„è¯ï¼Œé‚£å°±åªä¼šæ‰“å°ptræ‰€æŒ‡å‘çš„å•ä¸ªå­—ç¬¦voidæŒ‡é’ˆå¯ä»¥æŒ‡å‘ç©ºå€¼(nullptr)1void *ptr&#123;nullptr&#125;;voidæŒ‡é’ˆä¸èƒ½åšæŒ‡é’ˆè¿ç®—å› ä¸ºæŒ‡é’ˆè¿ç®—éœ€è¦çŸ¥é“ æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡çš„å¤§å°ï¼Œä½†æ˜¯voidæŒ‡é’ˆå°±ä¸çŸ¥é“å®ƒæŒ‡å‘çš„æ˜¯ä»€ä¹ˆã€‚æ‰€ä»¥voidæŒ‡é’ˆä¸èƒ½åšæŒ‡é’ˆè¿ç®—ï¼ˆå¦‚ï¼š++ï¼Œâ€“ï¼‰ä¸å­˜åœ¨voidå¼•ç”¨å› ä¸ºä¸€ä¸ªâ€œvoid referenceâ€çš„ç±»å‹æ˜¯â€œvoid &amp;â€,ä½†æ˜¯å®ƒä¸çŸ¥é“å®ƒå¼•ç”¨çš„å€¼çš„ç±»å‹ã€‚å°ç»“1.é™¤éå¿…è¦ï¼Œå¦åˆ™é¿å…ä½¿ç”¨voidæŒ‡é’ˆé€šå¸¸ï¼Œé™¤éç»å¯¹å¿…è¦ï¼Œå¦åˆ™é¿å…ä½¿ç”¨voidæŒ‡é’ˆæ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºå®ƒä»¬æœ‰æ•ˆåœ°å…è®¸æ‚¨é¿å…ç±»å‹æ£€æŸ¥ã€‚è¿™å…è®¸æ‚¨åœ¨ä¸ç»æ„é—´åšä¸€äº›æ¯«æ— æ„ä¹‰çš„äº‹æƒ…ï¼Œè€Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šæŠ±æ€¨ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å†…å®¹æ˜¯æœ‰æ•ˆçš„:123//æ‰¿æ¥ä¸Šé¢é‚£æ®µå‡½æ•°int nValue&#123; 5 &#125;;printValue(&amp;nValue, Type::CSTRING);å®ƒçš„ç»“æœæ˜¯æœªçŸ¥çš„ï¼Œåœ¨æˆ‘çš„ç”µè„‘ä¸Šï¼Œç»“æœä¸ºï¼š2.voidæŒ‡é’ˆä¸nullæŒ‡é’ˆçš„åŒºåˆ«voidæŒ‡é’ˆï¼šæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒå¯ä»¥æŒ‡å‘ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼Œä½†ä¸çŸ¥é“å®ƒæŒ‡å‘ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ã€‚ç©ºæŒ‡é’ˆå¿…é¡»è¢«æ˜¾å¼åœ°è½¬æ¢æˆå¦ä¸€ç§ç¡®åˆ‡çš„ç±»å‹çš„æŒ‡é’ˆæ‰èƒ½ è§£å¼•ç”¨ã€‚nullæŒ‡é’ˆï¼šç©ºæŒ‡é’ˆæ˜¯ä¸æŒ‡å‘åœ°å€çš„æŒ‡é’ˆã€‚voidæŒ‡é’ˆå¯ä»¥æ˜¯ä¸€ä¸ªnullæŒ‡é’ˆ","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"é€šè¿‡æŒ‡é’ˆæˆ–å¼•ç”¨è®¿é—®ç»“æ„ä½“æˆå‘˜","slug":"C&C++/é€šè¿‡æŒ‡é’ˆæˆ–å¼•ç”¨è®¿é—®æˆå‘˜å˜é‡(å‡½æ•°)","date":"2020-05-01T03:09:36.861Z","updated":"2020-05-01T09:43:59.135Z","comments":true,"path":"archives/7e63bcda.html","link":"","permalink":"https://longlongqin.github.io/archives/7e63bcda.html","excerpt":"LearnCpp chapterPhttps://www.learncpp.com","text":"LearnCpp chapterPhttps://www.learncpp.comä¼—æ‰€å‘¨çŸ¥ï¼Œé€šå¸¸æœ‰ä¸€ä¸ªæŒ‡å‘ç»“æ„(æˆ–ç±»)çš„æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚å¦‚å‰æ‰€è¿°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æˆå‘˜é€‰æ‹©æ“ä½œç¬¦(.)æ¥é€‰æ‹©ç»“æ„ä½“çš„æˆå‘˜:12345678struct Person&#123; int age; double weight;&#125;;Person person; // define a person//person.age = 5;è¿™ä¸ªè¯­æ³•ä¹Ÿé€‚ç”¨äº å¼•ç”¨ï¼š12345678910struct Person&#123; int age; double weight;&#125;;Person person; // define a person//ä½¿ç”¨å¯¹ç»“æ„ä½“çš„å¼•ç”¨æ¥é€‰æ‹©æˆå‘˜Person &amp;ref = person;ref.age = 5;ä½†æ˜¯ï¼Œå¯¹äºæŒ‡é’ˆï¼Œæ‚¨éœ€è¦å…ˆè§£å¼•ç”¨æŒ‡é’ˆçš„:12345678910struct Person&#123; int age; double weight;&#125;;Person person; // define a person//ä½¿ç”¨æŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆè¿›è¡Œæˆå‘˜é€‰æ‹©Person *ptr = &amp;person;(*ptr).age = 5; //åŠ å°æ‹¬å·æ˜¯å¿…è¦çš„çš„ï¼Œå› ä¸ºä¼˜å…ˆçº§çš„å…³ç³»c++æä¾›äº†ç¬¬äºŒä¸ªæˆå‘˜é€‰æ‹©æ“ä½œç¬¦(-&gt;)ï¼Œç”¨äºä»æŒ‡é’ˆè¿›è¡Œæˆå‘˜é€‰æ‹©ã€‚ä»¥ä¸‹ä¸¤è¡Œæ˜¯ç›¸ç­‰çš„:12(*ptr).age = 5;ptr-&gt;age = 5; //å½“ä½¿ç”¨æŒ‡é’ˆæ¥è®¿é—®å…¶æˆå‘˜æ—¶ï¼Œæ¨èè¿™ç§è¯­æ³•","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"å¼•ç”¨ä¸const","slug":"C&C++/å¼•ç”¨ä¸const","date":"2020-04-30T16:01:26.000Z","updated":"2020-05-01T09:43:59.135Z","comments":true,"path":"archives/960f81eb.html","link":"","permalink":"https://longlongqin.github.io/archives/960f81eb.html","excerpt":"LearnCpp chapterPhttps://www.learncpp.com","text":"LearnCpp chapterPhttps://www.learncpp.comå¼•ç”¨constå€¼å°±åƒå¯ä»¥å£°æ˜æŒ‡å‘constå€¼çš„æŒ‡é’ˆä¸€æ ·ï¼Œä¹Ÿå¯ä»¥å£°æ˜å¯¹constå€¼çš„å¼•ç”¨ã€‚è¿™æ˜¯é€šè¿‡ä½¿ç”¨constå…³é”®å­—å£°æ˜å¼•ç”¨æ¥å®ç°çš„ã€‚12const int value = 5;const int &amp;ref = value; //refæ˜¯å¯¹constå€¼çš„å¼•ç”¨å¯¹constå€¼çš„å¼•ç”¨é€šå¸¸è¢«ç®€ç§°ä¸ºconstå¼•ç”¨ï¼Œå°½ç®¡è¿™ç¡®å®å¯¼è‡´äº†ä¸€äº›ä¸æŒ‡é’ˆä¸ä¸€è‡´çš„å‘½åæ³•ã€‚åˆå§‹åŒ–å¯¹constå€¼çš„å¼•ç”¨å¯¹éconstå€¼çš„å¼•ç”¨ï¼Œåªèƒ½ç”¨éconst l-value åˆå§‹åŒ–ï¼›â­è€Œå¯¹constå€¼çš„å¼•ç”¨ï¼Œå¯ä»¥ç”¨ â€œéconst l-valueâ€ã€â€œconstl-valueâ€ã€â€œr-valueâ€æ¥åˆå§‹åŒ–ã€‚1234567int x = 5;const int &amp;ref1 = x; //âœ”ï¼Œxæ˜¯ä¸€ä¸ª éconst l-valueconst int y =7;const int &amp;ref2 =y; //âœ”ï¼Œyæ˜¯ä¸€ä¸ªconst l-valueconst int &amp;ref3 = 19; //âœ”ï¼Œ19æ˜¯ä¸€ä¸ª r-valueå¯¹constå€¼çš„å¼•ç”¨å¯ä»¥å¼•ç”¨éconstå˜é‡å°±åƒæŒ‡å‘ constå€¼ çš„æŒ‡é’ˆä¸€æ ·ï¼Œå¯¹constå€¼çš„å¼•ç”¨å¯ä»¥å¼•ç”¨éconstå˜é‡ã€‚å…¶å®å°±æ˜¯è¯´ï¼šä¸ç®¡ä½ è¿™ä¸ªå€¼åŸæ¥æ˜¯constå€¼ï¼Œè¿˜æ˜¯ éconstå€¼ã€‚åªç”¨çœ‹æˆ‘è¿™ä¸ªâ€œå¼•ç”¨â€ï¼ˆæˆ–è€… â€œæŒ‡é’ˆâ€ï¼‰æ˜¯ä¸æ˜¯ å¯¹constå€¼çš„å¼•ç”¨ï¼ˆæˆ–è€…ï¼šæ˜¯ä¸æ˜¯æŒ‡å‘constå€¼ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆä¸ç®¡ä½ åŸæ¥çš„å€¼æ˜¯ä¸æ˜¯constå€¼ï¼Œåœ¨æˆ‘å¼•ç”¨ï¼ˆæŒ‡é’ˆæŒ‡å‘ï¼‰ä¹‹åï¼Œæˆ‘éƒ½æŠŠå®ƒçœ‹æˆæ˜¯constå€¼ã€‚å…³äºå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¼•ç”¨æ˜¯å¦å¼•ç”¨çš„æ˜¯constå€¼ï¼Œçš„æ–¹æ³•ç±»ä¼¼äºæŒ‡é’ˆä¸­çš„æ–¹æ³•ï¼šå°±æ˜¯çœ‹é‚£ä¸ªè¡¨ç¤ºå¼•ç”¨çš„ç¬¦å·â€œ&amp;â€çš„å·¦è¾¹ï¼Œå¦‚æœå·¦è¾¹å¸¦æœ‰å…³é”®å­—constï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯å¼•ç”¨çš„constå€¼ã€‚å¯¹r-valueçš„å¼•ç”¨å»¶é•¿äº†å¼•ç”¨å€¼çš„ç”Ÿå­˜æœŸé€šå¸¸r-valueå…·æœ‰è¡¨è¾¾å¼ä½œç”¨åŸŸï¼Œè¿™æ„å‘³ç€åœ¨åˆ›å»ºå®ƒä»¬çš„è¡¨è¾¾å¼ç»“æŸæ—¶é”€æ¯è¿™äº›å€¼ã€‚1std::cout &lt;&lt;2+3; //2+3 çš„ç»“æœæ˜¯ r-value 5ï¼Œå®ƒä¼šåœ¨è¯¥æ¡è¯­å¥ç»“æŸæ—¶ï¼Œè¢«é”€æ¯ä½†æ˜¯ï¼Œå½“ä½¿ç”¨r-value åˆå§‹åŒ–å¯¹constå€¼çš„å¼•ç”¨æ—¶ï¼Œr-valueçš„ç”Ÿå­˜æœŸå°†è¢«å»¶é•¿ä¸º å¼•ç”¨çš„ç”Ÿå­˜æœŸã€‚12345678910int dothing()&#123; const int &amp;ref = 2+3; //é€šå¸¸ï¼Œ2+3çš„ç»“æœå…·æœ‰è¡¨è¾¾å¼ä½œç”¨åŸŸï¼Œå¹¶åœ¨è¯­å¥ç»“æŸæ—¶é”€æ¯. //ä½†æ˜¯å› ä¸º 2+3çš„ç»“æœç°åœ¨å·²ç»è¢«ç»‘å®šåˆ°ä¸€ä¸ª å¯¹constå€¼çš„å¼•ç”¨ ä¸Šé¢äº†ï¼Œ //æ‰€è¿™ä¸ªr-valueçš„ç”Ÿå‘½å‘¨æœŸè¢«å»¶é•¿äº† std::cout &lt;&lt; ref; //æˆ‘ä»¬åœ¨è¿™è¿˜å¯ä»¥ç”¨å®ƒ &#125; //å½“constå¼•ç”¨ç»ˆæ­¢æ—¶ï¼Œr-valueçš„ç”Ÿå­˜æœŸè¢«å»¶é•¿åˆ°è¿™é‡Œconstå€¼çš„å¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°ç”¨ä½œå‡½æ•°å‚æ•°çš„å¼•ç”¨ä¹Ÿå¯ä»¥æ˜¯å¸¸é‡ã€‚è¿™å…è®¸æˆ‘ä»¬åœ¨ä¸å¤åˆ¶å®å‚çš„æƒ…å†µä¸‹è®¿é—®å‚æ•°ï¼ŒåŒæ—¶ä¿è¯å‡½æ•°ä¸ä¼šæ”¹å˜è¢«å¼•ç”¨çš„å€¼ã€‚12345// refæ˜¯ä¼ å…¥å‚æ•°çš„constå¼•ç”¨ï¼Œè€Œä¸æ˜¯å‰¯æœ¬void changN(const int &amp;ref)&#123; ref = 6; //âœ–ï¼Œå› ä¸ºrefæ˜¯ const&#125;constå€¼çš„å¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°å¾ˆæœ‰ç”¨ã€‚å› ä¸ºconstå€¼çš„å¼•ç”¨ï¼Œå¯ä»¥æ˜¯ï¼šnon-const l-valueconst l-valuea literalè¡¨è¾¾å¼çš„ç»“æœæ‰€ä»¥ï¼Œä¸Šé¢è¿™å››ç§å¯ä»¥é€šè¿‡ constå€¼çš„å¼•ç”¨ è¢«ä¼ å…¥å‡½æ•°å‚æ•°ã€‚123456789101112131415161718192021#include &lt;iostream&gt;void printIt(const int &amp;x)&#123; std::cout &lt;&lt; x;&#125;int main()&#123; int a =1; printIt(a); //éconst l-value const int b = 2; printIt(b); //const l-value printIt(3); //å­—é¢å¸¸é‡ r-value printIt(2+b); //è¡¨è¾¾å¼ r-value return 0;&#125;å°ç»“1ã€ä¸ºäº†é¿å…ä¸å¿…è¦çš„ã€ä»£ä»·æ˜‚è´µçš„å¤åˆ¶ï¼Œé€šå¸¸åº”è¯¥é€šè¿‡(const)å¼•ç”¨ä¼ é€’éæŒ‡é’ˆé åŸºæœ¬æ•°æ®ç±»å‹(intã€doubleç­‰)çš„å˜é‡ã€‚ï¼ˆå¦‚structsç­‰ï¼Œå¯é€šè¿‡ å¼•ç”¨ ä¼ å…¥å‡½æ•°ï¼‰2ã€åŸºæœ¬æ•°æ®ç±»å‹åº”è¯¥é€šè¿‡å€¼ä¼ é€’ï¼Œå½“å‡½æ•°éœ€è¦æ›´æ”¹å®ƒä»¬æ—¶ï¼Œæ‰ä½¿ç”¨ å¼•ç”¨ ä¼ å…¥å‡½æ•°ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"å¼•ç”¨å˜é‡","slug":"C&C++/å¼•ç”¨å˜é‡","date":"2020-04-30T12:20:43.000Z","updated":"2020-05-01T09:43:59.132Z","comments":true,"path":"archives/fa14c975.html","link":"","permalink":"https://longlongqin.github.io/archives/fa14c975.html","excerpt":"LearnCpp chapterPhttps://www.learncpp.com","text":"LearnCpp chapterPhttps://www.learncpp.comç›®å‰ä¸ºæ­¢æˆ‘ä»¬å·²ç»è®²è¿‡ä¸¤ç§åŸºæœ¬å˜é‡ç±»å‹ï¼šæ™®é€šå˜é‡ï¼Œç›´æ¥ä¿å­˜å€¼ã€‚æŒ‡é’ˆï¼Œå®ƒæŒæœ‰å¦ä¸€ä¸ªå€¼çš„åœ°å€(æˆ–null)ï¼Œå¯ä»¥è§£å¼•ç”¨ä»¥è·å–å®ƒä»¬æŒ‡å‘çš„åœ°å€çš„å€¼ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°±æ¥è®²ä¸€ä¸‹C++ä¸­çš„ç¬¬ä¸‰ç§åŸºæœ¬ç±»å‹ï¼šå¼•ç”¨(Reference)å¼•ç”¨çš„æ¦‚å¿µreferenceï¼ˆå¼•ç”¨ï¼‰æ˜¯C++å˜é‡çš„ä¸€ä¸ªç±»å‹ï¼Œå®ƒå……å½“å¦ä¸€ä¸ªå¯¹è±¡æˆ–å€¼çš„åˆ«åã€‚C++æ”¯æŒä¸‰ç§ç§å¼•ç”¨å¼•ç”¨ éconstå€¼ï¼ˆé€šå¸¸ç®€ç§°â€œreferenceâ€ï¼Œæˆ– non-const referenceï¼‰å¼•ç”¨ constå€¼ï¼ˆé€šå¸¸å«åšï¼šconst referenceï¼‰C++11å¢æ·»äº† r-value referenceå¼•ç”¨éconstå€¼å¼•ç”¨(å¯¹éconstå€¼çš„å¼•ç”¨) æ˜¯é€šè¿‡å¼•ç”¨ â€œç±»å‹â€ å’Œâ€å˜é‡åâ€ä¹‹é—´çš„&amp;æ¥å£°æ˜çš„:123456int value &#123;5&#125;; //æ™®é€šå˜é‡//ä¸‹é¢å†™æ³•éƒ½æ˜¯ä¸€æ ·çš„çš„æ•ˆæœint &amp; ref&#123;value&#125;; //å¼•ç”¨å˜é‡å€¼int&amp; ref&#123;value&#125;;int &amp;ref&#123;value&#125;;å¼•ç”¨ä½œä¸ºåˆ«åå¼•ç”¨çš„ä½œç”¨é€šå¸¸ä¸å®ƒä»¬æ‰€å¼•ç”¨çš„å€¼ç›¸åŒã€‚åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šï¼Œå¼•ç”¨å……å½“è¢«å¼•ç”¨å¯¹è±¡çš„åˆ«åã€‚ä¾‹å¦‚:1234int x&#123;5&#125;;int &amp;y&#123;x&#125;; //yæ˜¯xçš„å¼•ç”¨int &amp;z&#123;y&#125;; //zä¹Ÿæ˜¯xçš„å¼•ç”¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µã€‚è®¾ç½®æˆ–è·å–xã€yæˆ–zçš„å€¼å°†åšç›¸åŒçš„äº‹æƒ…(é‚£å°±æ˜¯è®¾ç½®æˆ–è·å–xçš„å€¼)ã€‚çœ‹ä¸€çœ‹å¼•ç”¨çš„å®é™…åº”ç”¨ï¼š1234567891011121314151617181920212223242526#include &lt;iostream&gt;int main()&#123; int value &#123;5&#125;; //æ™®é€šçš„intå‹å˜é‡ int &amp;ref&#123;value&#125;; //å¼•ç”¨å˜é‡value value = 6; //å˜é‡value çš„å€¼ç°åœ¨æ˜¯6 ref = 7; //å˜é‡value çš„å€¼ç°åœ¨æ˜¯7 std::cout &lt;&lt;value&lt;&lt;'\\n'; //ç»“æœä¸º7 ++ref; std::cout &lt;&lt;value&lt;&lt;'\\n'; //ç»“æœä¸º8 //çœ‹ä¸€çœ‹ï¼švalue å’Œ refçš„åœ°å€ std::cout &lt;&lt; &amp;value; std::cout &lt;&lt; &amp;ref; return 0;&#125;/*ç»“æœ*/78006FFD30006FFD30åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œrefå’Œvalueè¢«è§†ä¸ºæ˜¯ç›¸åŒçš„ã€‚(å¯ä»¥çœ‹åˆ°refå’Œvalueçš„åœ°å€éƒ½æ˜¯ä¸€æ ·çš„)ã€‚l-values and r-valuesl-values and r-valuesï¼šå·¦å€¼ ä¸ å³å€¼å·¦å€¼åœ¨C++ä¸­ï¼Œå˜é‡æ˜¯l-valueï¼ˆå·¦å€¼ï¼‰çš„ä¸€ç§ç±»å‹ï¼›å·¦å€¼æ˜¯ä¸€ä¸ªæœ‰åœ°å€çš„å€¼(åœ¨å†…å­˜ä¸­)ã€‚å› ä¸ºæ‰€æœ‰çš„å˜é‡éƒ½æœ‰åœ°å€ï¼Œæ‰€ä»¥æ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å·¦å€¼ã€‚ä¹‹æ‰€ä»¥ç§°ä¸ºl-valueï¼Œæ˜¯å› ä¸ºl-valueæ˜¯èµ‹å€¼è¯­å¥å·¦è¾¹æƒŸä¸€çš„å€¼ã€‚å½“æˆ‘ä»¬èµ‹å€¼æ—¶ï¼Œèµ‹å€¼æ“ä½œç¬¦çš„å·¦è¾¹å¿…é¡»æ˜¯I-valueã€‚æ‰€ä»¥ï¼Œåƒè¿™ç§å¥å­ï¼š 5 = 6;å°†ä¼šé€ æˆç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º5ä¸æ˜¯I-valueã€‚å­—é¢å€¼5æ˜¯æ²¡æœ‰åœ°å€çš„ï¼ˆå³ï¼Œå®ƒä¸åœ¨å†…å­˜ä¸­ï¼‰ã€‚å½“ä¸€ä¸ªI-valueè¢«èµ‹å€¼æ—¶ï¼Œè¯¥å†…å­˜åœ°å€çš„å½“å‰å€¼å°†è¢«è¦†ç›–ã€‚å³å€¼ä¸l-valueç›¸åçš„æ˜¯r-valueã€‚r-valueæ˜¯ä¸€ä¸ªél-valueçš„è¡¨è¾¾å¼ã€‚r-valueçš„ä¾‹å­æœ‰å­—é¢å€¼(æ¯”å¦‚5ï¼Œç»“æœæ˜¯5)å’Œél-valueçš„è¡¨è¾¾å¼(æ¯”å¦‚ 2 + x)ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š12345678int y; //å°†yå®šä¹‰ä¸ºä¸€ä¸ªæ•´å‹å˜é‡y=4; //4 çš„ç»“æœæ˜¯4ï¼Œç„¶åèµ‹å€¼ç»™yy=2+5; //2+5 çš„ç»“æœæ˜¯7ï¼Œç„¶åèµ‹å€¼ç»™yint x; //å°†xå®šä¹‰ä¸ºä¸€ä¸ªæ•´å‹å˜é‡x=y; //yçš„å€¼æ˜¯7(ä¹‹å‰çš„å€¼)ï¼Œç„¶åèµ‹å€¼ç»™xã€‚x=x; //xçš„ç»“æœæ˜¯7ï¼Œç„¶åèµ‹å€¼ç»™x(æ²¡ç”¨!)x=x+1; //x + 1 çš„ç»“æœç­‰äº8ï¼Œç„¶åèµ‹å€¼ç»™xã€‚åˆ†æï¼šx=x+1x=x+1;è¿™ä¸ªè¯­å¥çœ‹èµ·æ¥å¾ˆè¿·ç³Šã€‚èµ‹å€¼æ“ä½œç¬¦â€œ=â€ å·¦è¾¹çš„â€œxâ€æ˜¯ä¸€ä¸ªI-valueï¼ˆæœ‰åœ°å€çš„å˜é‡ï¼‰ï¼›èµ‹å€¼æ“ä½œç¬¦â€œ=â€ å³è¾¹çš„â€œxâ€æ˜¯ä¸€ä¸ªr-valueï¼Œå®ƒå°†è¢«è®¡ç®—å¹¶ç”Ÿæˆä¸€ä¸ªå€¼ï¼ˆè¿™é‡Œç”Ÿæˆçš„å€¼ä¸º7ï¼‰ã€‚å½“c++å¯¹ä¸Šè¿°è¯­å¥æ±‚å€¼æ—¶ï¼Œå®ƒçš„è®¡ç®—ç»“æœä¸º:1x = 7 + 1; //è¿™æ ·å°±æ¯”è¾ƒæ¸…æ™°äº†å…¶å®ï¼Œå¯ä»¥åˆ†æä¸ºï¼šåœ¨èµ‹å€¼æ“ä½œç¬¦â€œ=â€çš„å·¦ä¾§ï¼Œå¿…é¡»æœ‰è¡¨ç¤ºå†…å­˜åœ°å€çš„å†…å®¹(ä¾‹å¦‚å˜é‡)ã€‚èµ‹å€¼æ“ä½œç¬¦â€œ=â€çš„å³ä¾§ çš„æ‰€æœ‰å†…å®¹éƒ½å°†è¢«è®¡ç®—ä»¥ç”Ÿæˆä¸€ä¸ªå€¼ã€‚å¼•ç”¨å¿…é¡»è¢«åˆå§‹åŒ–åˆ›å»ºå¼•ç”¨æ—¶å¿…é¡»åˆå§‹åŒ–:12345int value &#123;5&#125;;int &amp;a &#123;value&#125;; //æœ‰æ•ˆçš„å¼•ç”¨ï¼Œåˆå§‹åŒ–ä¸ºå˜é‡valueint &amp;b; //æ— æ•ˆï¼Œå› ä¸ºæ²¡æœ‰è¢«åˆå§‹åŒ–ä¸åƒæŒ‡é’ˆå¯ä»¥æŒæœ‰ç©ºå€¼ï¼Œæ²¡æœ‰ç©ºå¼•ç”¨è¿™æ ·çš„ä¸œè¥¿ã€‚å¼•ç”¨ éconstå€¼ åªèƒ½è¢«åˆå§‹åŒ–ä¸ºéconst çš„å·¦å€¼å¯¹éconstå€¼çš„å¼•ç”¨åªèƒ½ç”¨éconst l-value åˆå§‹åŒ–ã€‚ä¸èƒ½ä½¿ç”¨const l-valueæˆ–r-valueåˆå§‹åŒ–å®ƒä»¬ã€‚123456789int x&#123;1&#125;;int &amp;a&#123;x&#125;; //âœ”ï¼Œå› ä¸ºxæ˜¯ä¸€ä¸ªéå¸¸é‡çš„å·¦å€¼int &amp;b&#123;x+1&#125;; //âœ–ï¼Œå› ä¸º\"x+1\"æ˜¯ä¸€ä¸ªå³å€¼ï¼ˆå®ƒæ²¡æœ‰åœ°å€çš„ï¼‰â­int &amp;d&#123;6&#125;; //âœ–ï¼Œå› ä¸º6æ˜¯ä¸€ä¸ªå³å€¼â­const int y&#123;2&#125;;int &amp;c&#123;y&#125;; //âœ–ï¼Œå› ä¸ºyæ˜¯ä¸€ä¸ª å¸¸é‡å·¦å€¼ï¼ˆ**const l-value**ï¼‰â­å¼•ç”¨ä¸èƒ½è¢«é‡æ–°åˆ†é…åˆå§‹åŒ–åï¼Œä¸èƒ½å°†å¼•ç”¨æ›´æ”¹ä¸ºå¼•ç”¨å¦ä¸€ä¸ªå˜é‡ã€‚è€ƒè™‘ä»¥ä¸‹ç‰‡æ®µ:123456int value1&#123;5&#125;;int value2&#123;7&#125;;int &amp;a&#123;value1&#125;; //âœ”ï¼Œrefç°åœ¨æ˜¯value1çš„åˆ«åref = vlaue2; //æ³¨æ„â­ï¼šè¿™é‡Œvalue2å…¶å®æ˜¯ä¸€ä¸ªå³å€¼ã€‚æ‰§è¡Œè¿™ä¸ªè¯­å¥ï¼šå°±æ˜¯å°†value2çš„å€¼èµ‹ç»™value1ã€‚. è€Œä¸æ˜¯å°†å¼•ç”¨é‡æ–°åˆ†é…ç§°ä¸ºå˜é‡value2çš„åˆ«åå‘€~~~ä¸ºäº†è¯´æ˜ä¸Šé¢çš„é‚£ä¸ªè¯­å¥ï¼š12345678910111213141516#include &lt;iostream&gt; //std::sortint main()&#123; int x&#123; 1 &#125;; int y&#123; 6 &#125;; std::cout &lt;&lt; \"xåŸæ¥çš„å€¼æ˜¯ï¼š\" &lt;&lt; x &lt;&lt; '\\n'; int &amp;a&#123; x &#125;; a = y; std::cout &lt;&lt; \"å¼•ç”¨açš„å€¼æ˜¯ï¼š\" &lt;&lt; a&lt;&lt;'\\n'; std::cout &lt;&lt; \"xç°åœ¨çš„å€¼ä¸ºï¼š\" &lt;&lt; x &lt;&lt; '\\n'; std::cout &lt;&lt; \"å› ä¸ºå¼•ç”¨â€˜aâ€™æ˜¯xçš„åˆ«åï¼Œaçš„å€¼æ”¹å˜ï¼Œæ‰€ä»¥xçš„å€¼ä¹Ÿä¼šè¢«æ”¹å˜\"; return 0;&#125;ç»“æœï¼šå¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°åœ¨6.8 â€“ Pointers and arrays ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•å°†æŒ‡é’ˆå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œä½¿å‡½æ•°å¯ä»¥å–æ¶ˆå¯¹æŒ‡é’ˆçš„å¼•ç”¨ï¼Œä»è€Œç›´æ¥ä¿®æ”¹å‚æ•°çš„å€¼ã€‚å¼•ç”¨åœ¨è¿™æ–¹é¢çš„å·¥ä½œç±»ä¼¼ã€‚ç”±äºâ€œå¼•ç”¨â€å‚æ•°ä½œä¸ºå‚æ•°çš„åˆ«åï¼Œä½¿ç”¨â€œå¼•ç”¨â€å‚æ•°çš„å‡½æ•°å¯ä»¥ä¿®æ”¹ä¼ å…¥çš„å‚æ•°:12345678910111213141516171819202122#include &lt;iostream&gt;//refæ˜¯ä¼ å…¥å‚æ•°çš„ å¼•ç”¨ï¼Œè€Œä¸æ˜¯å‰¯æœ¬void changeN (int &amp;ref)&#123; ref = 6;&#125;int main()&#123; int n&#123;5&#125;; std::cout &lt;&lt; n &lt;&lt; '\\n'; changeN(n); //æ³¨æ„ï¼Œè¿™ä¸ªå‚æ•°ä¸éœ€è¦ä½œä¸ºå¼•ç”¨ std::cout &lt;&lt; n &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/56 â­è¿™é‡Œnçš„å€¼å˜äº†å‘€å½“å®å‚nè¢«ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œå‡½æ•°å‚æ•°refè¢«è®¾ç½®ä¸ºå‚æ•°nçš„å¼•ç”¨ã€‚ä½¿ç”¨å¼•ç”¨å°†cé£æ ¼çš„æ•°ç»„ä¼ é€’ç»™å‡½æ•°cé£æ ¼æ•°ç»„æœ€æ¼äººçš„é—®é¢˜ä¹‹ä¸€æ˜¯ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“æ±‚å€¼æ—¶ï¼Œå®ƒä»¬ä¼šé€€åŒ–ä¸ºæŒ‡é’ˆã€‚ä½†æ˜¯ï¼Œå¦‚æœé€šè¿‡å¼•ç”¨ä¼ é€’cæ ·å¼çš„æ•°ç»„ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿè¿™ç§é€€åŒ–ã€‚è¯·æ³¨æ„ï¼Œä¸ºäº†ä½¿å…¶å·¥ä½œï¼Œæ‚¨éœ€è¦æ˜¾å¼åœ°åœ¨å‚æ•°ä¸­å®šä¹‰æ•°ç»„å¤§å°ã€‚123456789101112131415161718192021222324#include &lt;iostream&gt;#include &lt;iterator&gt;//æ³¨æ„:æ‚¨éœ€è¦åœ¨å‡½æ•°å£°æ˜ä¸­æŒ‡å®šæ•°ç»„å¤§å°void printElements(int (&amp;arr)[4] )&#123; //å¦‚æœä¸æ”¯æŒC++17æ—¶ï¼Œè¯·æ”¹ä¸‹é¢çš„è¯­å¥ï¼ˆhttps://www.yuque.com/longlongqin/pw9qpx/dhwiyd#31df8e7eï¼‰ int length &#123;static_cast&lt;int&gt;(std::size(arr))&#125;; //æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼Œå› ä¸ºæ•°ç»„ä¸ä¼šé€€åŒ–ä¸ºæŒ‡é’ˆ//æ•°ç»„é€€åŒ–ä¸ºæŒ‡é’ˆå¯å‚è€ƒï¼ˆhttps://www.yuque.com/longlongqin/pw9qpx/pmqm1f#Oaepiï¼‰ for(int i&#123;0&#125;; i&lt;length; ++i) &#123; std::cout &lt;&lt;arr[i]&lt;&lt;'\\n'; &#125;&#125;int main()&#123; int arr[]&#123; 99, 20, 14, 80 &#125;; printElements(arr); return 0;&#125;å¼•ç”¨å’ŒæŒ‡é’ˆå¼•ç”¨å’ŒæŒ‡é’ˆä¹‹é—´æœ‰ä¸€ç§æœ‰è¶£çš„å…³ç³»â€”â€”å¼•ç”¨å°±åƒä¸€ä¸ªæŒ‡é’ˆï¼Œåœ¨è¢«è®¿é—®æ—¶è¢«éšå¼åœ°è§£å¼•ç”¨(å¼•ç”¨é€šå¸¸ç”±ç¼–è¯‘å™¨ä½¿ç”¨æŒ‡é’ˆåœ¨å†…éƒ¨å®ç°)ã€‚ä»è€Œå¾—å‡ºä»¥ä¸‹ç»“è®º:12345678int value &#123;1&#125;;int *const ptr &#123;&amp;value&#125;;int &amp;ref &#123;value&#125;;//å¯ä»¥çœ‹åˆ°ï¼šä¸‹é¢ä¸¤ä¸ªè¯­å¥æ˜¯ç›¸åŒçš„ï¼š*ptr = 5;ref = 5;ç”±äºå¿…é¡»å°†å¼•ç”¨åˆå§‹åŒ–ä¸ºæœ‰æ•ˆçš„å¯¹è±¡(ä¸èƒ½ä¸ºç©º)ï¼Œå¹¶ä¸”ä¸€æ—¦è®¾ç½®å°±ä¸èƒ½æ›´æ”¹ï¼Œå› æ­¤ä½¿ç”¨å¼•ç”¨é€šå¸¸æ¯”ä½¿ç”¨æŒ‡é’ˆå®‰å…¨å¾—å¤š(å› ä¸ºæ²¡æœ‰å–æ¶ˆå¼•ç”¨ç©ºæŒ‡é’ˆçš„é£é™©)ã€‚å¦‚æœç»™å®šçš„ä»»åŠ¡å¯ä»¥é€šè¿‡å¼•ç”¨æˆ–æŒ‡é’ˆæ¥è§£å†³ï¼Œé‚£ä¹ˆé€šå¸¸åº”è¯¥é¦–é€‰å¼•ç”¨ã€‚æŒ‡é’ˆåº”è¯¥åªåœ¨å¼•ç”¨ä¸è¶³çš„æƒ…å†µä¸‹ä½¿ç”¨(æ¯”å¦‚åŠ¨æ€åˆ†é…å†…å­˜)ã€‚å°ç»“å¼•ç”¨å…è®¸æˆ‘ä»¬ä¸ºå…¶ä»–å¯¹è±¡æˆ–å€¼å®šä¹‰åˆ«åã€‚å¯¹éconstå€¼çš„å¼•ç”¨åªèƒ½ç”¨éconst l-valueåˆå§‹åŒ–ã€‚å¼•ç”¨åˆå§‹åŒ–åä¸èƒ½é‡æ–°åˆ†é…ï¼ˆä¹Ÿå°±æ˜¯å®ƒåˆå§‹åŒ–ä¹‹åï¼Œå°±ä¸€ç›´æ˜¯é‚£ä¸ªå˜é‡çš„åˆ«åï¼‰ã€‚å½“æˆ‘ä»¬æƒ³è¦ä¿®æ”¹å‚æ•°çš„å€¼æ—¶ï¼Œæˆ–è€…å½“æˆ‘ä»¬æƒ³è¦é¿å…å¯¹å‚æ•°è¿›è¡Œæ˜‚è´µçš„å¤åˆ¶æ—¶ï¼Œå¼•ç”¨é€šå¸¸è¢«ç”¨ä½œå‡½æ•°å‚æ•°ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"æŒ‡é’ˆä¸const","slug":"C&C++/æŒ‡é’ˆä¸const","date":"2020-04-30T07:29:16.000Z","updated":"2020-05-01T09:43:59.137Z","comments":true,"path":"archives/d0ade39e.html","link":"","permalink":"https://longlongqin.github.io/archives/d0ade39e.html","excerpt":"LearnCpp chapterPhttps://www.learncpp.com","text":"LearnCpp chapterPhttps://www.learncpp.comå‰è¨€æ³¨ï¼šæ­¤æ–‡ä¸­çš„ç±»å‹ä»¥intä¸ºä¾‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ¢æˆå…¶ä»–ç±»å‹ï¼Œå¦‚ï¼šdoubleâ€¦..éconstæŒ‡é’ˆ1ã€int *ptr123const int value = 5;int *ptr = &amp;value; //ç±»å‹è½¬æ¢é”™è¯¯ã€‚âœ–//ä¸èƒ½å°†â€œconst intâ€ç±»å‹ï¼ˆ&amp;valueï¼‰è½¬æ¢ä¸ºâ€œint *â€ï¼ˆptrï¼‰è¿™å¾ˆå®¹æ˜“ç†è§£ï¼Œå‡è®¾ä¸Šé¢ç‰‡æ®µå¯ä»¥ç¼–è¯‘æˆåŠŸã€‚é‚£ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥è§£å¼•ç”¨è¿™ä¸ªéconstçš„æŒ‡é’ˆæ¥æ”¹å˜è¿™ä¸ªå€¼ã€‚è¿™å°†ä¼šä¸constå˜é‡æœ¬è´¨å†²çªï¼ˆconstçš„å˜é‡çš„å€¼æ˜¯ä¸å¯ä»¥æ›´æ”¹çš„ï¼‰ã€‚2ã€const int *ptrè‹¥è¦å£°æ˜æŒ‡å‘constå€¼çš„æŒ‡é’ˆï¼Œè¯·åœ¨æ•°æ®ç±»å‹ä¹‹å‰ä½¿ç”¨constå…³é”®å­—:123const int value = 5; //ä¸€ä¸ªintç±»å‹çš„å˜é‡valueï¼ˆå€¼ä¸º5ï¼‰ï¼Œvalueæ˜¯\"const int\"const int *ptr = &amp;value; //âœ”ï¼Œptræ˜¯ä¸€ä¸ªéconstçš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªâ€œconst intâ€*ptr = 6; //ä¸å…è®¸ï¼Œæˆ‘ä»¬ä¸èƒ½æ”¹å˜ä¸€ä¸ªå¸¸é‡å€¼åœ¨è¿™é‡Œï¼Œä¸å…è®¸é€šè¿‡è§£å¼•ç”¨æŒ‡é’ˆ æ¥æ”¹å˜valueçš„å€¼ã€‚ptræ˜¯ä¸€ä¸ªéconstçš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘ä¸€ä¸ªâ€œconst intâ€ å°±è¯´æ˜äº†ï¼ŒæŒ‡é’ˆæŒ‡å‘çš„æ˜¯å¸¸é‡å€¼ï¼Œä¸èƒ½æ”¹å˜çš„å¥¥æŒ‡å‘const int çš„æŒ‡é’ˆï¼Œä¹Ÿå¯ä»¥æŒ‡å‘éå¸¸é‡å˜é‡12int value = 5; //value ä¸æ˜¯å¸¸é‡const int *ptr = &amp;value; //è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„æˆ‘ä»¬å¯ä»¥è¿™æ ·æƒ³ï¼šä¸€ä¸ªæŒ‡å‘constå˜é‡çš„æŒ‡é’ˆåœ¨é€šè¿‡è¯¥æŒ‡é’ˆè®¿é—®è¯¥å˜é‡æ—¶å°†è¯¥å˜é‡è§†ä¸ºå¸¸é‡ï¼Œè€Œä¸ç®¡å˜é‡æœ€åˆæ˜¯å¦å®šä¹‰ä¸ºconst(å³ï¼Œä¸å˜é‡æœ€åˆæ˜¯å¦ä¸ºconstæ— å…³)ã€‚å› ä¸ºæŒ‡å‘constå€¼çš„æŒ‡é’ˆä¸æ˜¯constæœ¬èº«(å®ƒåªæ˜¯æŒ‡å‘ä¸€ä¸ªconstå€¼)ï¼Œæ‰€ä»¥å¯ä»¥å°†æŒ‡é’ˆé‡å®šå‘åˆ°æŒ‡å‘å…¶ä»–å€¼:12345int value1 = 5;const int *ptr = &amp;value1; // ptr points to a const int int value2 = 6;ptr = &amp;value2; // âœ”, ptr now points at some other const intå½“æŒ‡å‘const int çš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘éconstå˜é‡æ—¶ï¼šä¸å¯ä»¥é€šè¿‡ è§£å¼•ç”¨è¯¥æŒ‡é’ˆ æ¥æ”¹å˜è¯¥éå¸¸é‡å˜é‡çš„å€¼ï¼›ä½†å¯ä»¥é€šè¿‡ ç›´æ¥å¯¹é€šè¿‡ å˜é‡çš„æ ‡è¯†ç¬¦ æ¥æ”¹å˜è¯¥éå¸¸é‡å˜é‡çš„å€¼ã€‚12345678910//å¯ä»¥int value = 5;const int *ptr = &amp;value;value = 6; //âœ”ã€‚å› ä¸ºå½“é€šè¿‡éconstæ ‡è¯†ç¬¦ï¼ˆvalueæ˜¯éconstçš„æ ‡è¯†ç¬¦ï¼‰è®¿é—®æ—¶ï¼Œ//è¯¥å€¼æ˜¯éconstçš„ï¼ˆæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡å˜é‡çš„æ ‡è¯†ç¬¦æ¥æ”¹å˜å…¶å€¼ï¼‰//ä¸å¯ä»¥int value = 5;const int *ptr = &amp;value; // ptr points to a \"const int\"*ptr = 6; // âœ–ã€‚å› ä¸ºæŒ‡é’ˆptrå°†å…¶å€¼è§†ä¸ºå¸¸é‡ï¼Œå› æ­¤é€šè¿‡ptræ›´æ”¹å€¼æ˜¯ä¸åˆæ³•çš„constæŒ‡é’ˆconstæŒ‡é’ˆæ˜¯æŒ‡åˆå§‹åŒ–åå…¶å€¼ï¼ˆå³ï¼Œå®ƒæŒ‡å‘çš„åœ°å€ï¼‰ä¸èƒ½æ”¹å˜çš„æŒ‡é’ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒconstæŒ‡é’ˆï¼šåªä¸è¿‡æ˜¯è¯¥æŒ‡é’ˆçš„å€¼ï¼ˆå®ƒçš„å€¼å°±æ˜¯ä¸€ä¸ªåœ°å€ï¼‰ä¸èƒ½è¢«æ”¹å˜ã€‚ï¼ˆå³ï¼Œå®ƒåªèƒ½æŒ‡å‘åˆå§‹åŒ–æ—¶ç»™å®šçš„å˜é‡ï¼‰ä½†æ˜¯ï¼Œå®ƒæŒ‡å‘å˜é‡çš„å€¼æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ã€‚å£°æ˜constæŒ‡é’ˆè¦å£°æ˜ä¸€ä¸ªconstæŒ‡é’ˆï¼Œè¯·åœ¨â€æ˜Ÿå·â€å’Œâ€æŒ‡é’ˆåç§°â€ä¹‹é—´ä½¿ç”¨constå…³é”®å­—:12int value = 5;int * const ptr = &amp;value;ä¸æ™®é€šçš„constå˜é‡ä¸€æ ·ï¼ŒconstæŒ‡é’ˆå¿…é¡»åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ä¸ºä¸€ä¸ªå€¼è¿™æ„å‘³ç€constæŒ‡é’ˆæ€»æ˜¯æŒ‡å‘ç›¸åŒçš„åœ°å€ã€‚åœ¨ä¸Šè¿°æƒ…å†µä¸‹ï¼Œptrå°†å§‹ç»ˆæŒ‡å‘valueçš„åœ°å€(ç›´åˆ°ptr goes out of scopeå¹¶è¢«é”€æ¯)ã€‚123456int a =5;int b =2;int * const ptr = &amp;a; //âœ”ï¼Œè¿™ä¸ªconstæŒ‡é’ˆè¢«åˆå§‹åŒ–ä¸ºå˜é‡açš„åœ°å€ï¼›ptr = &amp;b; //âœ–ï¼Œå› ä¸ºæŒ‡é’ˆptræ˜¯constã€‚æ‰€ä»¥å®ƒä¸€æ—¦è¢«åˆå§‹åŒ–ä¹‹åï¼Œè¯¥æŒ‡é’ˆçš„å€¼ï¼ˆå®ƒæŒ‡å‘çš„åœ°å€ï¼‰å°±ä¸èƒ½è¢«æ”¹å˜ã€‚ä½†æ˜¯ï¼Œç”±äºæ‰€æŒ‡å‘çš„å€¼ä»ç„¶æ˜¯éconstçš„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è§£å¼•ç”¨ constæŒ‡é’ˆçš„æ¥æ›´æ”¹æ‰€æŒ‡å‘çš„å€¼:123int value = 5;int *const ptr = &amp;value; // ptr will always point to value*ptr = 6; // âœ”ï¼Œå› ä¸ºptræŒ‡å‘çš„æ˜¯ä¸€ä¸ªéconstçš„intå‹å˜é‡æŒ‡å‘Constå€¼çš„constæŒ‡é’ˆæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå·®åˆ†æˆä¸¤éƒ¨åˆ†ï¼šé¦–å…ˆæ˜¯ä¸€ä¸ª constæŒ‡é’ˆï¼ˆå‡å¦‚æ˜¯intç±»å‹ï¼Œå˜é‡æ ‡è¯†ç¬¦ä¸ºaï¼‰ï¼šint * const a;(å°†è¿™ä¸€éƒ¨åˆ†çœ‹æˆå¤§å†™å­—æ¯A)ç„¶åæ˜¯ä¸€ä¸ªconstçš„å€¼ï¼šconst A â€”â€“&gt;const int * const a;ä¹Ÿå°±æ˜¯åœ¨ï¼šç±»å‹ï¼ˆtypeï¼‰ä¹‹å‰ å’Œ å˜é‡åä¹‹å‰ ä½¿ç”¨å…³é”®å­—const æ¥å£°æ˜ä¸€ä¸ªæŒ‡å‘Constå€¼çš„constæŒ‡é’ˆï¼š12int value = 5;const int * const ptr = &amp;value;æ³¨æ„ï¼šæŒ‡å‘constå€¼çš„constæŒ‡é’ˆä¸èƒ½è®¾ç½®ä¸ºæŒ‡å‘å¦ä¸€ä¸ªåœ°å€ï¼Œå®ƒæ‰€æŒ‡å‘çš„å€¼ä¹Ÿä¸èƒ½é€šè¿‡æŒ‡é’ˆè¿›è¡Œæ›´æ”¹ã€‚å°ç»“ã€Šè¯·è®°ä½ï¼šconstç±»å‹çš„å˜é‡ï¼ˆä¸ç®¡æ˜¯æŒ‡é’ˆè¿˜æ˜¯æ­£å¸¸å˜é‡ï¼‰çš„å£°æ˜ä¸åˆå§‹åŒ–æ˜¯åœ¨ä¸€èµ·å®Œæˆçš„ã€‚ã€‹æ€»è€Œè¨€ä¹‹ï¼Œä½ åªéœ€è¦è®°ä½4æ¡è§„åˆ™ï¼Œå®ƒä»¬éƒ½å¾ˆç¬¦åˆé€»è¾‘:ä¸€ä¸ªéconstæŒ‡é’ˆå¯ä»¥è¢«é‡å®šå‘åˆ°å…¶ä»–åœ°å€ã€‚12345int value1 =5;int *ptr1 = &amp;value1; //æ˜¯ éconstæŒ‡é’ˆã€‚ï¼ˆå®ƒæŒ‡å‘çš„æ˜¯éconstå˜é‡çš„åœ°å€ï¼‰int value2 =6;const int *ptr2 = &amp;value2;//ä¹Ÿæ˜¯ éconstæŒ‡é’ˆã€‚ï¼ˆä¸è¿‡å®ƒæŒ‡å‘çš„æ˜¯ constå˜é‡çš„åœ°å€ï¼‰ä¸€ä¸ªconstæŒ‡é’ˆåœ¨åˆå§‹åŒ–ä¹‹åï¼Œå®ƒæŒ‡å‘çš„åœ°å€å°±ä¸èƒ½è¢«æ”¹å˜äº†ã€‚12int value = 5;int * const ptr =&amp;value; //æ˜¯ constæŒ‡é’ˆã€‚ï¼ˆå®ƒæŒ‡å‘çš„æ˜¯éconstå˜é‡çš„åœ°å€ï¼‰æŒ‡å‘éconstå€¼çš„æŒ‡é’ˆå¯ä»¥æ›´æ”¹å®ƒæ‰€æŒ‡å‘çš„å€¼ã€‚ä½†æ˜¯è¿™äº›æŒ‡é’ˆä¸èƒ½æŒ‡å‘ä¸€ä¸ªå¸¸é‡(const)å€¼ã€‚æŒ‡å‘constå€¼çš„constæŒ‡é’ˆå°†è¯¥å€¼è§†ä¸ºconst(å³ä½¿å®ƒä¸æ˜¯)ï¼Œå› æ­¤ä¸èƒ½æ›´æ”¹å®ƒæ‰€æŒ‡å‘çš„å€¼ã€‚12345678//1ï¸âƒ£æŒ‡å‘constå€¼çš„æŒ‡é’ˆå°†è¯¥å€¼è§†ä¸ºconst(è¯¥å€¼ä¸æ˜¯const)int value1 = 5;const int * const ptr1 = &amp;value; //ptræ˜¯ä¸€ä¸ªæŒ‡å‘constå€¼çš„constæŒ‡é’ˆï¼Œ//æ‰€ä»¥ï¼Œå®ƒæŒ‡å‘çš„è¿™ä¸ªvalue1çš„å€¼æ˜¯ä¸èƒ½è¢«æ”¹å˜çš„ã€‚//2ï¸âƒ£æŒ‡å‘constå€¼çš„æŒ‡é’ˆå°†è¯¥å€¼è§†ä¸ºconst(è¯¥å€¼æ˜¯const)const int value2 = 6;const int * const ptr2 = &amp;value2; //åŒæ ·æŒ‡é’ˆptr2æŒ‡å‘çš„value2çš„å€¼ä¹Ÿä¸èƒ½è¢«æ”¹å˜ä¿æŒå£°æ˜è¯­æ³•çš„æ­£ç¡®æ€§æ˜¯å¾ˆæœ‰æŒ‘æˆ˜æ€§çš„ã€‚åªè¦è®°ä½æŒ‡é’ˆæŒ‡å‘çš„å€¼çš„ç±»å‹æ€»æ˜¯åœ¨æœ€å·¦è¾¹:1234int value = 5;const int *ptr1 = &amp;value; //ptr1æŒ‡å‘â€œconst intâ€,è¿™æ˜¯ä¸€ä¸ªæŒ‡å‘constå€¼çš„æŒ‡é’ˆã€‚int * const ptr2 = &amp;value; //ptr2æŒ‡å‘â€œintâ€,è¿™æ˜¯ä¸€ä¸ªæŒ‡å‘éconstå€¼çš„constæŒ‡é’ˆã€‚const int * const ptr3 = &amp;value; //ptr3æŒ‡å‘â€œconst intâ€ ,è¿™æ˜¯ä¸€ä¸ªæŒ‡å‘constå€¼çš„constæŒ‡é’ˆå›¾ç¤ºï¼šçªç„¶æƒ³åˆ°ï¼š1ã€è‹¥è¦å£°æ˜æŒ‡å‘constå€¼çš„æŒ‡é’ˆï¼Œè¯·åœ¨æ•°æ®ç±»å‹ä¹‹å‰ä½¿ç”¨constå…³é”®å­—ã€‚ï¼ˆå¦‚ä¸‹å›¾çš„â‘ ã€â‘¢ï¼‰2ã€ä¸‹é¢çš„â‘ ã€â‘¡ã€â‘¢éƒ½å¯ä»¥æŒ‡å‘ â€œéconst å€¼â€ï¼›3ã€æ˜¯å¦å¯ä»¥é€šè¿‡æŒ‡é’ˆçš„è§£å¼•ç”¨æ¥æ”¹å˜æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼ã€‚éœ€è¦çœ‹è¯¥æŒ‡é’ˆæŒ‡å‘çš„å€¼ æ˜¯â€œconst intâ€ è¿˜æ˜¯ â€œintâ€ï¼Ÿå¦‚æœæ˜¯â€œconst intâ€ï¼Œé‚£å°±ä¸èƒ½ è§£å¼•ç”¨æŒ‡é’ˆ å»æ”¹å˜å®ƒæ‰€æŒ‡å‘çš„å€¼ã€‚å¦‚æœæ˜¯â€œintâ€ï¼Œé‚£å°±å¯ä»¥ã€‚4ã€ä¸€ä¸ªæŒ‡å‘constå˜é‡çš„æŒ‡é’ˆåœ¨é€šè¿‡è¯¥æŒ‡é’ˆè®¿é—®è¯¥å˜é‡æ—¶å°†è¯¥å˜é‡è§†ä¸ºå¸¸é‡(const)ï¼Œè€Œä¸ç®¡å˜é‡æœ€åˆæ˜¯å¦å®šä¹‰ä¸ºconst (å³ï¼Œä¸å˜é‡æœ€åˆæ˜¯å¦ä¸ºconstæ— å…³)ã€‚5ã€å½“æŒ‡å‘â€œconst intâ€ çš„æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘éconstå˜é‡æ—¶ï¼šä¸å¯ä»¥é€šè¿‡ è§£å¼•ç”¨è¯¥æŒ‡é’ˆ æ¥æ”¹å˜è¯¥éå¸¸é‡å˜é‡çš„å€¼ï¼›ä½†å¯ä»¥é€šè¿‡ ç›´æ¥å¯¹é€šè¿‡ å˜é‡çš„æ ‡è¯†ç¬¦ æ¥æ”¹å˜è¯¥éå¸¸é‡å˜é‡çš„å€¼ã€‚å†æ¬¡æé†’ï¼šæœ¬æ–‡åªæ˜¯ä»¥â€œintâ€ç±»å‹æ¥ä½œä¸ºè¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥æ¢æˆå…¶ä»–ç±»å‹ï¼Œå¦‚ï¼šdoubleç­‰ç­‰ç”¨ä¸€ä¸ªç¨‹åºæ¥è¯´æ˜ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445#include &lt;iostream&gt; int main()&#123; /************éconstçš„å˜é‡***************/ int value1 = 1; int value2 = 2; int value3 = 3; int value4 = 4; //åˆå§‹åŒ– int *ptr1 = &amp;value1; const int *ptr2 = &amp;value2; int * const ptr3 = &amp;value3; const int *const ptr4 = &amp;value4; //é€šè¿‡æŒ‡é’ˆçš„è§£å¼•ç”¨ï¼Œæ”¹å˜å˜é‡çš„å€¼ *ptr1 = 10; *ptr2 = 20; //âœ–ï¼Œå› ä¸ºptr2æ˜¯éconstæŒ‡é’ˆï¼ˆå®ƒæŒ‡å‘â€œconst intâ€ï¼Œå³ï¼Œå®ƒæŒ‡å‘çš„å€¼ä¸å¯ä»¥é€šè¿‡è§£å¼•ç”¨æŒ‡é’ˆè¢«æ”¹å˜ï¼‰ *ptr3 = 30; *ptr4 = 40; //âœ–ï¼Œå› ä¸ºptr4å®ƒæŒ‡å‘â€œconst intâ€ï¼ˆæ˜¯constæŒ‡é’ˆï¼‰ï¼Œä½†æ˜¯valueæ˜¯â€œintâ€.ç±»å‹ä¸åŒ¹é… /************constçš„å˜é‡***************/ const int value5 = 5; const int value6 = 6; const int value7 = 7; const int value8 = 8; int *ptr5 = &amp;value5; //âœ–ï¼ŒéconstæŒ‡é’ˆï¼ˆå®ƒæŒ‡å‘â€œintâ€ï¼‰ï¼Œæ‰€ä»¥ä¸èƒ½æŒ‡å‘â€œconst intâ€çš„å€¼value5 const int *ptr6 = &amp;value6; int * const ptr7 = &amp;value7; //âœ–ï¼ŒconstæŒ‡é’ˆï¼ˆå®ƒæŒ‡å‘â€œintâ€ï¼‰,ä½†æ˜¯value7 æ˜¯â€œconst intâ€ã€‚æ‰€ä»¥ä¸åŒ¹é… const int *const ptr8 = &amp;value8; //é˜²æ­¢åœ¨visual studio è½¯ä»¶ä¸­é—ªé€€ std::cin.clear(); std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); std::cin.get(); return 0;&#125;","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"æŒ‡é’ˆä¸æ•°ç»„","slug":"C&C++/æŒ‡é’ˆä¸æ•°ç»„(P)","date":"2020-04-29T00:42:27.000Z","updated":"2020-05-01T09:43:59.134Z","comments":true,"path":"archives/13ba6384.html","link":"","permalink":"https://longlongqin.github.io/archives/13ba6384.html","excerpt":"LearnCpp chapterLhttps://www.learncpp.com","text":"LearnCpp chapterLhttps://www.learncpp.comè¯¯åŒºè¯¯åŒºï¼šåœ¨c++ä¸­ï¼Œä¸€ä¸ªå¸¸è§çš„è°¬è¯¯æ˜¯è®¤ä¸ºæ•°ç»„å’ŒæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆæ˜¯ç›¸åŒçš„ã€‚çœŸå®æƒ…å†µæ˜¯ï¼šåœ¨ä¸‹é¢ä¾‹å­ä¸­ï¼Œæ•°ç»„çš„ç±»å‹ä¸ºï¼šint[5]ï¼›æ•°ç»„çš„â€œå€¼â€å°±æ˜¯æ•°ç»„çš„å…ƒç´ ã€‚æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆçš„ç±»å‹ä¸ºï¼šint*ï¼›å®ƒçš„å€¼æ˜¯æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ã€‚12345678910111213141516171819#include &lt;iostream&gt; int main()&#123; int array[5]&#123; 9, 7, 5, 3, 1 &#125;; // print address of the array's first element std::cout &lt;&lt; \"Element 0 has address: \" &lt;&lt; &amp;array[0] &lt;&lt; '\\n'; // print the value of the pointer the array decays to std::cout &lt;&lt; \"The array decays to a pointer holding address: \" &lt;&lt; array &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/Element 0 has address: 0042FD5CThe array decays to a pointer holding address: 0042FD5Carray decays to a pointerï¼šæ•°ç»„åœ¨æŸäº›æƒ…å†µä¸‹å°†é€€åŒ–ä¸ºæŒ‡é’ˆæ³¨æ„ï¼šæ•°ç»„é€€åŒ–ä¸ºæŒ‡é’ˆæ—¶ï¼Œå®ƒæ˜¯æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚è§£å¼•ç”¨æ•°ç»„1234567int array[5]&#123; 9, 7, 5, 3, 1 &#125;; // dereferencing an array returns the first element (element 0)std::cout &lt;&lt; *array; // will print 9! char name[]&#123; \"Jason\" &#125;; // C-style string (also an array)std::cout &lt;&lt; *name &lt;&lt; '\\n'; // will print 'J'â­æ³¨æ„ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯çœŸæ­£çš„è§£å¼•ç”¨æ•°ç»„æœ¬èº«ã€‚çœŸå®æƒ…å†µæ˜¯ï¼šæ•°ç»„(ç±»å‹ä¸ºint[5])è¢«éšå¼è½¬æ¢ä¸ºæŒ‡é’ˆ(ç±»å‹ä¸ºint *)ï¼Œæˆ‘ä»¬å…¶å®æ˜¯è§£å¼•ç”¨è¿™ä¸ªæŒ‡é’ˆæ¥è·å¾—æŒ‡é’ˆæ‰€åœ¨çš„å†…å­˜åœ°å€çš„å€¼(æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼)ã€‚æŒ‡å®šä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ•°ç»„123456789101112#include &lt;iostream&gt; int main()&#123; int array[5]&#123; 9, 7, 5, 3, 1 &#125;; std::cout &lt;&lt; *array &lt;&lt; '\\n'; // will print 9 int *ptr&#123; array &#125;; std::cout &lt;&lt; *ptr &lt;&lt; '\\n'; // will print 9 return 0;&#125;æ•°ç»„é€€åŒ–ä¸ºä¸€ä¸ªæŒ‡é’ˆ(ç±»å‹ä¸ºint*)ï¼Œæˆ‘ä»¬çš„æŒ‡é’ˆ(ç±»å‹ä¹Ÿæ˜¯int*)ä¹Ÿæœ‰ç›¸åŒçš„ç±»å‹ã€‚æŒ‡é’ˆä¸å®šé•¿æ•°ç»„çš„åŒºåˆ«ä½¿ç”¨sizeof()çš„åŒºåˆ«å½“åœ¨å›ºå®šæ•°ç»„ä¸Šä½¿ç”¨æ—¶ï¼Œsizeofè¿”å›æ•´ä¸ªæ•°ç»„çš„å¤§å°(æ•°ç»„é•¿åº¦*å…ƒç´ å¤§å°)ã€‚åœ¨æŒ‡é’ˆä¸Šä½¿ç”¨æ—¶ï¼Œsizeofè¿”å›å†…å­˜åœ°å€çš„å¤§å°(ä»¥å­—èŠ‚ä¸ºå•ä½)ã€‚ä¸‹é¢çš„ç¨‹åºè¯´æ˜äº†è¿™ä¸€ç‚¹:1234567891011121314151617#Include &lt;iostream&gt;int main()&#123; int array[5] &#123; 9, 7, 5, 3, 1&#125;; std::cout &lt;&lt;sizeof(array) &lt;&lt;'\\n'; //ï¼šæ‰“å°sizeof(int) *æ•°ç»„å¤§å° int *ptr &#123;array&#125;; std::cout &lt;&lt;sizeof(ptr)&lt;&lt;'\\n'; // å°†æ‰“å°æŒ‡é’ˆçš„å¤§å° return 0;&#125;/*ç»“æœ*/204ä½¿ç”¨å–åœ°å€æ“ä½œç¬¦(&amp;)çš„åŒºåˆ«è·å–æŒ‡é’ˆçš„åœ°å€ä¼šå¾—åˆ°æŒ‡é’ˆå˜é‡çš„å†…å­˜åœ°å€ã€‚è·å–æ•°ç»„åœ°å€å°†è¿”å›ä¸€ä¸ªæŒ‡å‘æ•´ä¸ªæ•°ç»„çš„æŒ‡é’ˆã€‚è¿™ä¸ªæŒ‡é’ˆä¹ŸæŒ‡å‘æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯ç±»å‹ä¿¡æ¯ä¸åŒ(åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ˜¯int(*)[5])ã€‚ä½ ä¸å¤ªå¯èƒ½éœ€è¦ç”¨åˆ°è¿™ä¸ªã€‚â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“æŒ‡é’ˆçš„è¿ç®—ä¸æ•°ç»„çš„ç´¢å¼•æŒ‡é’ˆçš„+ã€-1234567891011121314151617181920#include &lt;iostream&gt; int main()&#123; int value&#123; 7 &#125;; int *ptr&#123; &amp;value &#125;; std::cout &lt;&lt; ptr &lt;&lt; '\\n'; std::cout &lt;&lt; ptr+1 &lt;&lt; '\\n'; std::cout &lt;&lt; ptr+2 &lt;&lt; '\\n'; std::cout &lt;&lt; ptr+3 &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/0012FF7C0012FF800012FF840012FF88æ³¨æ„ï¼šæ³¨æ„ï¼Œptr + 1å¹¶ä¸è¿”å›pträ¹‹åçš„å†…å­˜åœ°å€ï¼Œè€Œæ˜¯ptræ‰€æŒ‡å‘ç±»å‹çš„ä¸‹ä¸€ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€ã€‚å¦‚æœptræŒ‡å‘ä¸€ä¸ªæ•´æ•°(å‡è®¾ä¸º4ä¸ªå­—èŠ‚)ï¼Œptr + 3è¡¨ç¤ºpträ¹‹åæœ‰3ä¸ªæ•´æ•°(12ä¸ªå­—èŠ‚)ã€‚å¦‚æœptræŒ‡å‘ä¸€ä¸ª1å­—èŠ‚çš„å­—ç¬¦ï¼Œptr + 3è¡¨ç¤ºpträ¹‹åæœ‰3ä¸ªå­—ç¬¦(3å­—èŠ‚)ã€‚åœ¨è®¡ç®—æŒ‡é’ˆç®—æœ¯è¡¨è¾¾å¼çš„ç»“æœæ—¶ï¼Œç¼–è¯‘å™¨æ€»æ˜¯å°†æ•´æ•°æ“ä½œæ•°ä¹˜ä»¥æ‰€æŒ‡å‘å¯¹è±¡çš„å¤§å°ã€‚è¿™å«åšç¼©æ”¾ã€‚å°±åƒä¸Šé¢çš„ä¾‹å­ä¸€æ ·ã€‚æ¯ä¸ªåœ°å€ç›¸å·®4 (7C + 4 = 80 in hexadecimal)ã€‚è¿™æ˜¯å› ä¸ºåœ¨ä½œè€…çš„æœºå™¨ä¸Šä¸€ä¸ªæ•´æ•°æ˜¯4å­—èŠ‚ã€‚æ•°ç»„åœ¨å†…å­˜ä¸­æŒ‰é¡ºåºæ’åˆ—é€šè¿‡å–åœ°å€ç¬¦(&amp;)æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯æŒ‰é¡ºåºæ’åˆ—çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…ƒç´ 0ã€1ã€2ã€â€¦æŒ‰é¡ºåºéƒ½æ˜¯ç›¸é‚»çš„ã€‚1234567891011121314151617181920#include &lt;iostram&gt;int main()&#123; int array[] &#123;9, 7, 5, 3, 1&#125;; std::cout &lt;&lt; \"Element 0 is at address: \" &lt;&lt; &amp;array[0] &lt;&lt; '\\n'; std::cout &lt;&lt; \"Element 1 is at address: \" &lt;&lt; &amp;array[1] &lt;&lt; '\\n'; std::cout &lt;&lt; \"Element 2 is at address: \" &lt;&lt; &amp;array[2] &lt;&lt; '\\n'; std::cout &lt;&lt; \"Element 3 is at address: \" &lt;&lt; &amp;array[3] &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/Element 0 is at address: 0041FE9CElement 1 is at address: 0041FEA0Element 2 is at address: 0041FEA4Element 3 is at address: 0041FEA8//æ³¨æ„ï¼Œæ¯ä¸ªå†…å­˜åœ°å€ä¹‹é—´ç›¸éš”4ä¸ªå­—èŠ‚ï¼Œè¿™æ˜¯ä½œè€…æœºå™¨ä¸Šçš„æ•´æ•°å¤§å°ã€‚æ•°ç»„çš„+æ•°ç»„çš„+å’ŒæŒ‡é’ˆçš„è¿ç®—ç›¸ä¼¼ï¼šå‘æ•°ç»„æ·»åŠ 1åº”è¯¥æŒ‡å‘æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ (å…ƒç´ 1)ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š1234567891011121314#include &lt;iostream&gt; int main()&#123; int array []&#123; 9, 7, 5, 3, 1 &#125;; std::cout &lt;&lt; &amp;array[1] &lt;&lt; '\\n'; // print memory address of array element 1 std::cout &lt;&lt; array+1 &lt;&lt; '\\n'; // print memory address of array pointer + 1 std::cout &lt;&lt; array[1] &lt;&lt; '\\n'; // prints 7 std::cout &lt;&lt; *(array+1) &lt;&lt; '\\n'; // prints 7 (note the å°æ‹¬å· required here) return 0;&#125;ä¸Šé¢ä¾‹å­è¯æ˜ï¼šä¸­æ‹¬å·æ“ä½œç¬¦([ ]) ï¼Œå°±æ˜¯å…ˆå°†å…¶è½¬åŒ–ä¸ºæŒ‡é’ˆçš„åŠ æ³•ï¼Œç„¶åå¯¹æŒ‡é’ˆè§£å¼•ç”¨(å°±æ˜¯è®¿é—®å…¶æŒ‡å‘å†…å­˜çš„å€¼)ã€‚å¦‚ï¼š array[n] å°±ç­‰åŒäº *(array+n)ä½¿ç”¨æŒ‡é’ˆéå†æ•°ç»„æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æŒ‡é’ˆå’ŒæŒ‡é’ˆè¿ç®—æ¥éå†æ•°ç»„ã€‚ï¼ˆè™½ç„¶è¿™ä¸ªä¸å¸¸ç”¨ï¼Œä½†æ˜¯è¿™é‡Œåªæ˜¯å‘Šè¯‰ä½ å¯ä»¥è¿™æ ·ç”¨ï¼‰ä½¿ç”¨ä¸‹æ ‡é€šå¸¸æ›´å®¹æ˜“é˜…è¯»å’Œæ›´å°‘çš„é”™è¯¯å€¾å‘","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"æŒ‡é’ˆ","slug":"C&C++/æŒ‡é’ˆ(P)","date":"2020-04-28T10:27:34.000Z","updated":"2020-05-01T09:43:59.133Z","comments":true,"path":"archives/73608288.html","link":"","permalink":"https://longlongqin.github.io/archives/73608288.html","excerpt":"LearnCpp chapterPhttps://www.learncpp.com","text":"LearnCpp chapterPhttps://www.learncpp.comä»‹ç»æŒ‡é’ˆåœ¨1.3 â€“ a first look at variablesä¸­ï¼Œæˆ‘ä»¬è®²åˆ°ï¼šå˜é‡ï¼šæ˜¯ä¿å­˜å€¼çš„ä¸€æ®µå†…å­˜çš„åç§°ã€‚å½“æˆ‘ä»¬çš„ç¨‹åºå®ä¾‹åŒ–ä¸€ä¸ªå˜é‡æ—¶ï¼Œä¸€ä¸ªç©ºé—²å†…å­˜åœ°å€è¢«è‡ªåŠ¨åˆ†é…ç»™è¿™ä¸ªå˜é‡ã€‚æˆ‘ä»¬èµ‹ç»™è¯¥å˜é‡çš„ä»»ä½•å€¼éƒ½å­˜å‚¨åœ¨è¿™ä¸ªå†…å­˜åœ°å€ä¸­ã€‚1234567int x;/*********************************************************//*å½“CPUæ‰§è¡Œè¿™æ¡è¯­å¥æ—¶ï¼Œä¼šä»RAMä¸­ç•™å‡ºä¸€å—å†…å­˜ã€‚ä¸ºäº†ä¾¿äºä¸¾ä¾‹ï¼Œå‡è®¾å˜é‡xè¢«åˆ†é…äº†å†…å­˜ä½ç½®140ã€‚å½“ç¨‹åºåœ¨è¡¨è¾¾å¼æˆ–è¯­å¥ä¸­çœ‹åˆ°å˜é‡xæ—¶ï¼Œå®ƒçŸ¥é“åº”è¯¥åœ¨å†…å­˜ä½ç½®140ä¸­æŸ¥æ‰¾è¯¥å€¼ã€‚*/å˜é‡çš„å¥½å¤„æ˜¯æˆ‘ä»¬ä¸éœ€è¦æ‹…å¿ƒåˆ†é…äº†ä»€ä¹ˆç‰¹å®šçš„å†…å­˜åœ°å€ã€‚æˆ‘ä»¬åªæ˜¯æ ¹æ®ç»™å®šçš„æ ‡è¯†ç¬¦å¼•ç”¨å˜é‡ï¼Œç¼–è¯‘å™¨å°†è¿™ä¸ªåç§°è½¬æ¢ä¸ºé€‚å½“åˆ†é…çš„å†…å­˜åœ°å€ã€‚å–åœ°å€æ“ä½œç¬¦(&amp;)å–åœ°å€æ“ä½œç¬¦(&amp;)ï¼šå…è®¸æˆ‘ä»¬æŸ¥çœ‹åˆ†é…ç»™å˜é‡çš„å†…å­˜åœ°å€ã€‚12345678910111213#include &lt;iostream&gt; int main()&#123; int x = 5; std::cout &lt;&lt; x &lt;&lt; '\\n'; // print the value of variable x std::cout &lt;&lt; &amp;x &lt;&lt; '\\n'; // print the memory address of variable x return 0;&#125;/*ç»“æœ*/50027FEA0è§£å¼•ç”¨æ“ä½œç¬¦(*)Dereferencing pointersè§£å¼•ç”¨æ“ä½œç¬¦(*)ï¼šå…è®¸æˆ‘ä»¬è®¿é—®ç‰¹å®šåœ°å€çš„å€¼ã€‚12345678910111213141516#include &lt;iostream&gt; int main()&#123; int x = 5; std::cout &lt;&lt; x &lt;&lt; '\\n'; // print the value of variable x std::cout &lt;&lt; &amp;x &lt;&lt; '\\n'; // print the memory address of variable x std::cout &lt;&lt; *(&amp;x) &lt;&lt; '\\n'; /// print the value at the memory address of variable x (parenthesis not required, but make it easier to read) return 0;&#125;/*ç»“æœ*/50027FEA05æŒ‡é’ˆæŒ‡é’ˆæ˜¯ä¸€ä¸ªå˜é‡ï¼Œå®ƒå°†ä¸€ä¸ªå†…å­˜åœ°å€ä½œä¸ºå…¶å€¼ã€‚å£°æ˜ä¸€ä¸ªæŒ‡é’ˆæŒ‡é’ˆå˜é‡çš„å£°æ˜ä¸æ™®é€šå˜é‡ä¸€æ ·ï¼Œåªæ˜¯æ•°æ®ç±»å‹å’Œå˜é‡åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå·(*)ã€‚æ³¨æ„ï¼Œè¿™ä¸ªæ˜Ÿå·ä¸æ˜¯é—´æ¥å¯»å€æ“ä½œç¬¦ã€‚å®ƒæ˜¯æŒ‡é’ˆå£°æ˜è¯­æ³•çš„ä¸€éƒ¨åˆ†ã€‚123456789101112//1ï¸âƒ£æ˜Ÿå·* ç´§è·Ÿåœ¨å˜é‡åä¹‹å‰int *iPtr; // a pointer to an integer valuedouble *dPtr; // a pointer to a double value //2ï¸âƒ£ æ˜Ÿå·* ç´§è·Ÿåœ¨ç±»å‹ä¹‹åint* iPtr2; // also valid syntax (acceptable, but not favored)//3ï¸âƒ£æ˜Ÿå·* åœ¨ç±»å‹ä¸å˜é‡åä¹‹é—´int * iPtr3; // also valid syntax (but don't do this) //æ³¨æ„ï¼Œå®šä¹‰æŒ‡é’ˆæ—¶ï¼Œæ¯ä¸ªæŒ‡é’ˆå˜é‡å‰é¢éƒ½éœ€è¦æœ‰*int *iPtr4, *iPtr5; // declare two pointers to integer variableså› æ­¤ï¼Œåœ¨å£°æ˜å˜é‡æ—¶ï¼Œæˆ‘ä»¬å»ºè®®åœ¨å˜é‡åæ—è¾¹åŠ ä¸Šæ˜Ÿå·ï¼ˆå³ï¼Œæ¨è1ï¸âƒ£ï¼‰ã€‚å½“ä»ä¸€ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªæŒ‡é’ˆæ—¶ï¼Œåœ¨è¿”å›ç±»å‹æ—è¾¹åŠ ä¸Šæ˜Ÿå·ä¼šæ›´æ¸…æ¥š:12int* doSomething();//è¿™è¡¨æ˜å‡½æ•°è¿”å›çš„æ˜¯int*ç±»å‹çš„å€¼ï¼Œè€Œä¸æ˜¯intç±»å‹çš„å€¼ã€‚å£°æ˜æ—¶ä¸åˆå§‹åŒ–å°±åƒæ™®é€šçš„å˜é‡ä¸€æ ·ï¼ŒæŒ‡é’ˆåœ¨å£°æ˜æ—¶æ˜¯ä¸åˆå§‹åŒ–çš„ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨å€¼åˆå§‹åŒ–ï¼Œå®ƒä»¬å°†åŒ…å«åƒåœ¾ã€‚ä¸ºæŒ‡é’ˆèµ‹å€¼ç”±äºæŒ‡é’ˆåªåŒ…å«åœ°å€ï¼Œå½“æˆ‘ä»¬ä¸ºæŒ‡é’ˆèµ‹å€¼æ—¶ï¼Œè¯¥å€¼å¿…é¡»æ˜¯åœ°å€ã€‚ä½¿ç”¨æŒ‡é’ˆæœ€å¸¸è§çš„æ–¹æ³•ä¹‹ä¸€æ˜¯è®©æŒ‡é’ˆä¿å­˜å¦ä¸€ä¸ªå˜é‡çš„åœ°å€ã€‚12int v = 5;int *ptr = &amp;v; // initialize ptr with address of variable vä¸Šé¢ä»£ç ç‰‡æ®µï¼Œå°±åƒä¸‹é¢çš„å›¾æ‰€æ˜¾ç¤ºçš„ä¸€æ ·ï¼šæŒ‡é’ˆçš„åå­—å°±æ˜¯ä»è¿™é‡Œæ¥çš„â€”â€”pträ¿å­˜å˜é‡å€¼çš„åœ°å€ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯´ptrâ€œæŒ‡å‘â€vã€‚æŒ‡é’ˆçš„ç±»å‹å¿…é¡»ä¸è¢«æŒ‡å‘çš„å˜é‡çš„ç±»å‹ç›¸åŒ¹é…:1234567int iValue = 5;double dValue = 7.0; int *iPtr = &amp;iValue; // okdouble *dPtr = &amp;dValue; // okiPtr = &amp;dValue; // wrong -- int pointer cannot point to the address of a double variabledPtr = &amp;iValue; // wrong -- double pointer cannot point to the address of an int variablec++ä¹Ÿä¸å…è®¸ç›´æ¥åˆ†é…æ–‡å­—å†…å­˜åœ°å€ç»™æŒ‡é’ˆ:1234int *ptr = 5; //è¿™æ˜¯å› ä¸ºæŒ‡é’ˆåªèƒ½ä¿å­˜åœ°å€ï¼Œè€Œæ•´æ•°literal 5æ²¡æœ‰å†…å­˜åœ°å€ã€‚//å¦‚æœæ‚¨å°è¯•è¿™æ ·åšï¼Œç¼–è¯‘å™¨å°†å‘Šè¯‰æ‚¨å®ƒä¸èƒ½å°†æ•´æ•°è½¬æ¢ä¸ºæ•´æ•°æŒ‡é’ˆã€‚double *dPtr = 0x0012FF7C; //ä¸å¯ä»¥ï¼Œç¼–è¯‘å™¨å°†ä¼šè§†ä¸ºèµ‹å€¼æ•´æ•°æ–‡å­—å–åœ°å€æ“ä½œç¬¦(&amp;)è¿”å›æŒ‡é’ˆå€¼å¾—æ³¨æ„çš„æ˜¯å–åœ°å€æ“ä½œç¬¦(&amp;)å¹¶æ²¡æœ‰å°†å…¶æ“ä½œæ•°çš„åœ°å€ä½œä¸ºæ–‡å­—è¿”å›ã€‚ç›¸åï¼Œå®ƒè¿”å›ä¸€ä¸ªåŒ…å«æ“ä½œæ•°åœ°å€çš„æŒ‡é’ˆï¼Œè¯¥æ“ä½œæ•°çš„ç±»å‹æ˜¯ä»å‚æ•°ä¸­æ´¾ç”Ÿå‡ºæ¥çš„(ä¾‹å¦‚ï¼Œè·å–ä¸€ä¸ªintç±»å‹çš„åœ°å€å°†è¿”å›å®ƒçš„åœ°å€åˆ°ä¸€ä¸ªintå‹çš„æŒ‡é’ˆä¸­)ã€‚12345678910111213#include &lt;iostream&gt;#include &lt;typeinfo&gt; int main()&#123; int x(4); std::cout &lt;&lt; typeid(&amp;x).name(); return 0;&#125;/* ç»“æœï¼ˆåœ¨vs2013ä¸­ï¼‰*/int *æŒ‡é’ˆçš„å£°æ˜ä¸è§£å¼•ç”¨æŒ‡é’ˆè§£å¼•ç”¨æŒ‡é’ˆï¼šDereferencing pointers12345678910int *p; //å£°æ˜ä¸€ä¸ªæ•´å‹æŒ‡é’ˆp= &amp;a; //pæŒ‡å‘äº†açš„åœ°å€ ï¼ˆ&amp;å–åœ°å€ï¼‰//ä¸Šé¢ä¸¤å¥=ä¸‹é¢è¿™ä¸€å¥ï¼šint *p= &amp;a; //å®šä¹‰ä¸€ä¸ªæ•´å‹æŒ‡é’ˆ p å¹¶ä¸”pæŒ‡å‘äº†açš„åœ°å€ ï¼ˆ&amp;å–åœ°å€ï¼‰*p=10; //è§£å¼•ç”¨ï¼Œ å³ ç»™aèµ‹å€¼10ï¼›p=&amp;b; // pæŒ‡å‘äº† bçš„åœ°å€*p=200; //è§£å¼•ç”¨ï¼Œ å³ ç»™bèµ‹å€¼200ï¼›è§£å¼•ç”¨ä¸­çš„ â€œ*â€çš„ä½œç”¨æ˜¯å¼•ç”¨æŒ‡é’ˆæŒ‡å‘çš„å˜é‡å€¼ï¼Œå¼•ç”¨å…¶å®å°±æ˜¯å¼•ç”¨è¯¥å˜é‡çš„åœ°å€ï¼Œâ€è§£â€å°±æ˜¯æŠŠè¯¥åœ°å€å¯¹åº”çš„ä¸œè¥¿è§£å¼€ï¼Œè§£å‡ºæ¥ï¼Œå°±åƒæ‰“å¼€ä¸€ä¸ªåŒ…è£¹ä¸€æ ·ï¼Œé‚£å°±æ˜¯è¯¥å˜é‡çš„å€¼äº†ï¼Œæ‰€ä»¥ç§°ä¸ºâ€è§£å¼•ç”¨â€ã€‚12345678910111213int value = 5;std::cout &lt;&lt; &amp;value; // prints address of valuestd::cout &lt;&lt; value; // prints contents of value int *ptr = &amp;value; // ptr points to valuestd::cout &lt;&lt; ptr; // prints address held in ptr, which is &amp;valuestd::cout &lt;&lt; *ptr; // dereference ptr (get the value that ptr is pointing to)/*ç»“æœ*/0012FF7C50012FF7C5è¿™å°±æ˜¯æŒ‡é’ˆå¿…é¡»æœ‰ç±»å‹çš„åŸå› ã€‚å¦‚æœæ²¡æœ‰ç±»å‹ï¼ŒæŒ‡é’ˆå°±ä¸çŸ¥é“åœ¨è§£å¼•ç”¨æ—¶å¦‚ä½•è§£é‡Šå®ƒæ‰€æŒ‡å‘çš„å†…å®¹ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæŒ‡é’ˆçš„ç±»å‹å’Œèµ‹å€¼ç»™å®ƒçš„å˜é‡åœ°å€å¿…é¡»åŒ¹é…çš„åŸå› ã€‚å¦‚æœä»–ä»¬ä¸è¿™æ ·åšï¼Œå½“æŒ‡é’ˆè¢«è§£å¼•ç”¨æ—¶ï¼Œå®ƒä¼šå°†bitsè¯¯è¯»ä¸ºå¦ä¸€ç§ç±»å‹ã€‚æŒ‡é’ˆçš„å¤§å°æŒ‡é’ˆçš„å¤§å°å–å†³äºå¯æ‰§è¡Œæ–‡ä»¶çš„ç¼–è¯‘ä½“ç³»ç»“æ„â€”â€”32ä½å¯æ‰§è¡Œæ–‡ä»¶ä½¿ç”¨32ä½å†…å­˜åœ°å€â€”â€”å› æ­¤ï¼Œ32ä½æœºå™¨ä¸Šçš„æŒ‡é’ˆæ˜¯32ä½(4å­—èŠ‚)ã€‚å¯¹äº64ä½çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒæŒ‡é’ˆåº”è¯¥æ˜¯64ä½(8å­—èŠ‚)ã€‚è¯·æ³¨æ„ï¼Œè¿™æ˜¯å›ºå®šçš„ï¼Œä¸æŒ‡é’ˆçš„ç±»å‹æ— å…³ã€‚1234567891011char *chPtr; // chars are 1 byteint *iPtr; // ints are usually 4 bytesstruct Something&#123; int nX, nY, nZ;&#125;;Something *somethingPtr; // Something is probably 12 bytes std::cout &lt;&lt; sizeof(chPtr) &lt;&lt; '\\n'; // prints 4std::cout &lt;&lt; sizeof(iPtr) &lt;&lt; '\\n'; // prints 4std::cout &lt;&lt; sizeof(somethingPtr) &lt;&lt; '\\n'; // prints 4å¯ä»¥çœ‹åˆ°ï¼ŒæŒ‡é’ˆçš„å¤§å°æ€»æ˜¯ç›¸åŒçš„ã€‚è¿™æ˜¯å› ä¸ºæŒ‡é’ˆåªæ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œè€Œè®¿é—®ç»™å®šæœºå™¨ä¸Šçš„å†…å­˜åœ°å€æ‰€éœ€çš„æ¯”ç‰¹æ•°æ€»æ˜¯æ’å®šçš„ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"æ•°ç»„ã€å­—ç¬¦ä¸²ã€æŒ‡é’ˆå’Œå¼•ç”¨","slug":"C&C++/æ•°ç»„ï¼ˆPï¼‰","date":"2020-04-28T10:26:38.000Z","updated":"2020-05-01T09:43:59.136Z","comments":true,"path":"archives/122ff534.html","link":"","permalink":"https://longlongqin.github.io/archives/122ff534.html","excerpt":"LearnCpp chapterPhttps://www.learncpp.com","text":"LearnCpp chapterPhttps://www.learncpp.comP6.1 å®šé•¿æ•°ç»„ï¼ˆâ… ï¼‰æ•°ç»„é•¿åº¦ï¼šåœ¨æ•°ç»„å˜é‡å£°æ˜ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ–¹æ‹¬å·( [ ] )å‘Šè¯‰ç¼–è¯‘å™¨è¿™æ˜¯ä¸€ä¸ªæ•°ç»„å˜é‡(è€Œä¸æ˜¯æ™®é€šçš„å˜é‡)ï¼Œä»¥åŠè¦åˆ†é…å¤šå°‘å˜é‡(ç§°ä¸ºæ•°ç»„é•¿åº¦)ã€‚å›ºå®šé•¿åº¦çš„æ•°ç»„ï¼šå›ºå®šæ•°ç»„(ä¹Ÿç§°ä¸ºå›ºå®šé•¿åº¦æ•°ç»„æˆ–å›ºå®šå¤§å°æ•°ç»„)æ˜¯åœ¨ç¼–è¯‘æ—¶é•¿åº¦å·²çŸ¥çš„æ•°ç»„ã€‚å½“testScoreè¢«å®ä¾‹åŒ–æ—¶ï¼Œç¼–è¯‘å™¨å°†åˆ†é…30ä¸ªæ•´æ•°ã€‚1int testScore[30]; // allocate 30 integer variables in a fixed arrayæ•°ç»„å…ƒç´ å’Œä¸‹æ ‡æ•°ç»„ä¸­çš„æ¯ä¸ªå˜é‡éƒ½ç§°ä¸ºå…ƒç´ ã€‚å…ƒç´ æ²¡æœ‰è‡ªå·±å•ç‹¬çš„åç§°ã€‚ä¸ºäº†è®¿é—®æ•°ç»„çš„å„ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•°ç»„åã€ä¸‹æ ‡æ“ä½œç¬¦([])å’Œä¸€ä¸ªç§°ä¸ºä¸‹æ ‡(æˆ–ç´¢å¼•)çš„å‚æ•°ï¼Œå®ƒå‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬éœ€è¦å“ªä¸ªå…ƒç´ ã€‚é‡è¦æç¤º:ä¸æˆ‘ä»¬é€šå¸¸ä»1å¼€å§‹è®¡æ•°çš„æ—¥å¸¸ç”Ÿæ´»ä¸åŒï¼Œ*åœ¨c++ä¸­ï¼Œæ•°ç»„æ€»æ˜¯ä»0å¼€å§‹è®¡æ•°!***ç”±ç»“æ„ä½“æ„æˆçš„æ•°ç»„123456struct Rectangle&#123; int length; int width;&#125;;Rectangle rects[5]; // declare an array of 5 Rectangleè¦è®¿é—®æ•°ç»„å…ƒç´ çš„structæˆå‘˜ï¼Œé¦–å…ˆé€‰æ‹©ä½ æƒ³è¦çš„æ•°ç»„å…ƒç´ ï¼Œç„¶åä½¿ç”¨æˆå‘˜é€‰æ‹©æ“ä½œç¬¦( . )æ¥é€‰æ‹©ä½ æƒ³è¦çš„structæˆå‘˜ï¼šrects[0].length = 24;æ•°ç»„ä¸‹æ ‡ï¼ˆè¯¦ç»†ï¼‰åœ¨c++ä¸­ï¼Œæ•°ç»„ä¸‹æ ‡å¿…é¡»å§‹ç»ˆæ˜¯æ•´æ•°ç±»å‹ã€‚è¿™åŒ…æ‹¬charã€shortã€intã€longã€long longç­‰ç­‰ï¼Œå¥‡æ€ªçš„æ˜¯ï¼Œbool(å…¶ä¸­falseçš„ç´¢å¼•ä¸º0,trueçš„ç´¢å¼•ä¸º1). æ•°ç»„ä¸‹æ ‡å¯ä»¥æ˜¯ä¸€ä¸ªæ–‡å­—å€¼ã€ä¸€ä¸ªå˜é‡(å¸¸é‡æˆ–éå¸¸é‡)ï¼Œæˆ–è€…ä¸€ä¸ªè®¡ç®—ç»“æœä¸ºæ•´æ•°ç±»å‹çš„è¡¨è¾¾å¼ã€‚123456789101112131415161718int array[5]; // declare an array of length 5// using a literal (constant) index:array[1] = 7; // ok // using an enum (constant) indexenum Animals&#123; ANIMAL_CAT = 2&#125;;array[ANIMAL_CAT] = 4; // ok // using a variable (non-constant) index:short index = 3;array[index] = 7; // ok // using an expression that evaluates to an integer index:array[1+2] = 7; // okå®šé•¿æ•°ç»„çš„å£°æ˜åœ¨å£°æ˜å›ºå®šæ•°ç»„æ—¶ï¼Œæ•°ç»„çš„é•¿åº¦(æ–¹æ‹¬å·ä¹‹é—´)å¿…é¡»æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼ˆcompile-timeï¼‰ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç¼–è¯‘æ—¶å¿…é¡»çŸ¥é“å›ºå®šæ•°ç»„çš„é•¿åº¦ã€‚è¿™é‡Œæœ‰ä¸€äº›ä¸åŒçš„æ–¹æ³•æ¥å£°æ˜å›ºå®šæ•°ç»„:1234567891011121314151617// using a literal constantint array[5]; // Ok // using a macro symbolic constant#define ARRAY_LENGTH 5int array[ARRAY_LENGTH]; // Syntactically okay, but don't do this // using a symbolic constantconst int arrayLength = 5;int array[arrayLength]; // Ok // using an enumeratorenum ArrayElements&#123; MAX_ARRAY_LENGTH = 5&#125;;int array[MAX_ARRAY_LENGTH]; // Okæ³¨æ„ï¼Œéå¸¸é‡å˜é‡æˆ–è¿è¡Œæ—¶å¸¸é‡ï¼ˆruntime constantsï¼‰ä¸èƒ½ä½¿ç”¨:123456789//using a non-const variableint length;std::cin&gt;&gt;length;int array[length]; //ä¸è¡Œï¼Œlength ä¸æ˜¯ç¼–è¯‘æ—¶å¸¸é‡!// using a runtime const variableint temp = 5;const int length =temp; //lengthçš„å€¼ç›´åˆ°è¿è¡Œæ—¶æ‰çŸ¥é“ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶å¸¸é‡ï¼Œè€Œä¸æ˜¯ç¼–è¯‘æ—¶å¸¸é‡!int array[length]; //ä¸å¯ä»¥æ³¨æ„ï¼Œåœ¨æœ€åä¸¤ç§æƒ…å†µä¸‹ï¼Œåº”è¯¥ä¼šäº§ç”Ÿä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºé•¿åº¦ä¸æ˜¯ç¼–è¯‘æ—¶å¸¸æ•°ã€‚ä¸€äº›ç¼–è¯‘å™¨å¯èƒ½å…è®¸è¿™äº›ç±»å‹çš„æ•°ç»„(ä¸ºäº†C99çš„å…¼å®¹æ€§)ï¼Œä½†æ˜¯æ ¹æ®c++æ ‡å‡†ï¼Œå®ƒä»¬æ˜¯æ— æ•ˆçš„ï¼Œä¸åº”è¯¥åœ¨c++ç¨‹åºä¸­ä½¿ç”¨ã€‚å…³äºåŠ¨æ€æ•°ç»„çš„è¯´æ˜å› ä¸ºå›ºå®šæ•°ç»„åœ¨ç¼–è¯‘æ—¶åˆ†é…äº†å†…å­˜ï¼Œè¿™å°±å¼•å…¥äº†ä¸¤ä¸ªé™åˆ¶:å›ºå®šæ•°ç»„çš„é•¿åº¦ä¸èƒ½åŸºäºç”¨æˆ·è¾“å…¥æˆ–è¿è¡Œæ—¶è®¡ç®—çš„å…¶ä»–å€¼ã€‚å›ºå®šæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½æ”¹å˜ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™äº›é™åˆ¶æ˜¯æœ‰é—®é¢˜çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œc++æ”¯æŒç¬¬äºŒç§ç±»å‹çš„æ•°ç»„ï¼Œç§°ä¸ºåŠ¨æ€æ•°ç»„ã€‚åŠ¨æ€æ•°ç»„çš„é•¿åº¦å¯ä»¥åœ¨è¿è¡Œæ—¶è®¾ç½®ï¼Œä¹Ÿå¯ä»¥æ›´æ”¹å…¶é•¿åº¦ã€‚ä½†æ˜¯ï¼ŒåŠ¨æ€æ•°ç»„çš„å®ä¾‹åŒ–è¦å¤æ‚ä¸€äº›ï¼Œå› æ­¤æˆ‘ä»¬å°†åœ¨æœ¬ç« çš„åé¢éƒ¨åˆ†ä»‹ç»å®ƒä»¬ã€‚å°ç»“å›ºå®šæ•°ç»„æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥åˆ†é…å’Œä½¿ç”¨ç›¸åŒç±»å‹çš„å¤šä¸ªå˜é‡ï¼Œåªè¦åœ¨ç¼–è¯‘æ—¶çŸ¥é“æ•°ç»„çš„é•¿åº¦å³å¯ã€‚P6.2 å®šé•¿æ•°ç»„ï¼ˆâ…¡ï¼‰c++é€šè¿‡ä½¿ç”¨åˆå§‹åŒ–å™¨åˆ—è¡¨æä¾›äº†ä¸€ç§æ›´æ–¹ä¾¿çš„æ–¹æ³•æ¥åˆå§‹åŒ–æ•´ä¸ªæ•°ç»„ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¯ç­‰ä»·çš„ï¼š12345678int prime[5] = &#123; 2, 3, 5, 7, 11 &#125;; // use initializer list to initialize the fixed arrayã€æ¨èã€‘ int prime[5]; // hold the first 5 prime numbersã€ä¸æ¨èã€‘ prime[0] = 2; prime[1] = 3; prime[2] = 5; prime[3] = 7; prime[4] = 11;é›¶å€¼åˆå§‹åŒ–å½“åˆ—è¡¨ä¸­çš„åˆå§‹åŒ–å™¨æ¯”æ•°ç»„æ‰€èƒ½å®¹çº³çš„å°‘ï¼Œé‚£ä¹ˆï¼Œå…¶ä½™çš„å…ƒç´ ä¼šè¢«åˆå§‹åŒ–ä¸º0ã€‚ï¼ˆæˆ–è€…å°†0è½¬æ¢ä¸ºéæ•´æ•°åŸºæœ¬ç±»å‹çš„ä»»ä½•å€¼â€”â€”ä¾‹å¦‚0.0è½¬æ¢ä¸ºdoubleï¼‰123456789101112131415161718192021#include &lt;iostream&gt; int main()&#123; int array[5] = &#123; 7, 4, 5 &#125;; // only initialize first 3 elements std::cout &lt;&lt; array[0] &lt;&lt; '\\n'; std::cout &lt;&lt; array[1] &lt;&lt; '\\n'; std::cout &lt;&lt; array[2] &lt;&lt; '\\n'; std::cout &lt;&lt; array[3] &lt;&lt; '\\n'; std::cout &lt;&lt; array[4] &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/7450012345// Initialize all elements to 0int array[5] = &#123; &#125;; // Initialize all elements to 0.0double array[5] = &#123; &#125;;ä»c++ 11å¼€å§‹ï¼Œåº”è¯¥ä½¿ç”¨ç»Ÿä¸€çš„åˆå§‹åŒ–è¯­æ³•:12int prime[5] &#123; 2, 3, 5, 7, 11 &#125;; //ä½¿ç”¨ç»Ÿä¸€åˆå§‹åŒ–æ¥åˆå§‹åŒ–å›ºå®šæ•°ç»„,//æ³¨æ„è¿™ä¸ªè¯­æ³•ä¸­æ²¡æœ‰ç­‰å·çœç•¥é•¿åº¦å¦‚æœä½¿ç”¨åˆå§‹åŒ–å™¨åˆ—è¡¨åˆå§‹åŒ–ä¸€ä¸ªå›ºå®šçš„å…ƒç´ æ•°ç»„ï¼Œç¼–è¯‘å™¨å¯ä»¥ä¸ºæ‚¨è®¡ç®—å‡ºæ•°ç»„çš„é•¿åº¦ï¼Œæ‚¨å¯ä»¥çœç•¥æ˜¾å¼å£°æ˜æ•°ç»„çš„é•¿åº¦ã€‚12int array[5] = &#123; 0, 1, 2, 3, 4 &#125;; // æ˜¾å¼çš„ define length of the arrayint array[] = &#123; 0, 1, 2, 3, 4 &#125;; // let initializer list set length of the arrayæ•°ç»„å’Œæšä¸¾1234567891011121314enum StudentsNames&#123; qin, //0 zhi, //1 Long,//2 student_num, //3&#125;;int main()&#123; int testScores[student_num]; //allocate 3 integers testScores[qin] = 76; return 0;&#125;æ•°ç»„å’Œæšä¸¾ç±»æšä¸¾ç±»ä¸ä¼šéšå¼çš„å°†æšä¸¾å™¨è½¬æ¢ä¸ºæ•´æ•°ï¼Œæ‰€ä»¥å¦‚æœä½ å°è¯•ä»¥ä¸‹:12345678910111213141516enum class StudentNames&#123; KENNY, // 0 KYLE, // 1 STAN, // 2 BUTTERS, // 3 CARTMAN, // 4 WENDY, // 5 MAX_STUDENTS // 6&#125;;int main()&#123; int testScores[StudentNames::MAX_STUDENTS]; // allocate 6 integers testScores[StudentNames::STAN] = 76;&#125;ä½ ä¼šå¾—åˆ°ä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚è§£å†³ï¼šè¿™å¯ä»¥é€šè¿‡ä½¿ç”¨static_castå°†æšä¸¾æ•°è½¬æ¢ä¸ºæ•´æ•°æ¥è§£å†³:1234567int main()&#123; int testScores[static_cast&lt;int&gt;(StudentNames::MAX_STUDENTS)]; // allocate 6 integers testScores[static_cast&lt;int&gt;(StudentNames::STAN)] = 76; return 0;&#125;æ”¹è¿›ï¼šåœ¨å‘½åç©ºé—´ä¸­ä½¿ç”¨æ ‡å‡†çš„enumå¯èƒ½æ›´å¥½:123456789101112131415161718192021nmaespace studentName&#123; enum studentnames &#123; KENNY, // 0 KYLE, // 1 STAN, // 2 BUTTERS, // 3 CARTMAN, // 4 WENDY, // 5 MAX_STUDENTS // 6 &#125;;&#125;int main()&#123; int testScores[studentName::MAX_STUDENTS]; testScores[StudentNames::STAN] = 76; return 0;&#125;å°†æ•°ç»„ä¼ é€’ç»™å‡½æ•°ä¼ é€’æ•°ç»„ç»™å‡½æ•° VS ä¼ é€’æ™®é€šçš„å˜é‡ç»™å‡½æ•° çš„åŒºåˆ«ï¼šä¼ é€’æ•°ç»„ç»™å‡½æ•°ï¼šå½“é€šè¿‡å€¼ä¼ é€’ä¸€ä¸ªæ™®é€šå˜é‡æ—¶ï¼Œc++å°†å‚æ•°çš„å€¼å¤åˆ¶åˆ°å‡½æ•°å‚æ•°ä¸­ã€‚å› ä¸ºå‚æ•°æ˜¯å‰¯æœ¬ï¼Œæ‰€ä»¥æ›´æ”¹å‚æ•°çš„å€¼å¹¶ä¸ä¼šæ›´æ”¹åŸå§‹å‚æ•°çš„å€¼ã€‚ä¼ é€’æ•°ç»„ç»™å‡½æ•°ï¼šå½“ä¸€ä¸ªæ•°ç»„è¢«ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œc++ä¸ä¼šå¤åˆ¶ä¸€ä¸ªæ•°ç»„ã€‚è€Œæ˜¯ä¼ é€’å®é™…çš„æ•°ç»„ã€‚è¿™æ ·åšçš„å‰¯ä½œç”¨æ˜¯å…è®¸å‡½æ•°ç›´æ¥æ”¹å˜æ•°ç»„å…ƒç´ çš„å€¼!1234567891011121314151617181920212223242526272829303132333435363738#include &lt;iostream&gt; //ä¼ é€’æ™®é€šå‚æ•°void passValue(int value) // value is a copy of the argument&#123; value = 99; // so changing it here won't change the value of the argument&#125; //ä¼ é€’æ•°ç»„void passArray(int prime[5]) // prime is the actual array&#123; prime[0] = 11; // so changing it here will change the original argument! prime[1] = 7; prime[2] = 5; prime[3] = 3; prime[4] = 2;&#125; int main()&#123; int value = 1; std::cout &lt;&lt; \"before passValue: \" &lt;&lt; value &lt;&lt; \"\\n\"; passValue(value); std::cout &lt;&lt; \"after passValue: \" &lt;&lt; value &lt;&lt; \"\\n\"; int prime[5] = &#123; 2, 3, 5, 7, 11 &#125;; std::cout &lt;&lt; \"before passArray: \" &lt;&lt; prime[0] &lt;&lt; \" \" &lt;&lt; prime[1] &lt;&lt; \" \" &lt;&lt; prime[2] &lt;&lt; \" \" &lt;&lt; prime[3] &lt;&lt; \" \" &lt;&lt; prime[4] &lt;&lt; \"\\n\"; passArray(prime); std::cout &lt;&lt; \"after passArray: \" &lt;&lt; prime[0] &lt;&lt; \" \" &lt;&lt; prime[1] &lt;&lt; \" \" &lt;&lt; prime[2] &lt;&lt; \" \" &lt;&lt; prime[3] &lt;&lt; \" \" &lt;&lt; prime[4] &lt;&lt; \"\\n\"; return 0;&#125;/*ç»“æœ*/before passValue: 1after passValue: 1 ï¼ˆæ™®é€šå˜é‡ä¸ä¼šè¢«ä¿®æ”¹ï¼‰before passArray: 2 3 5 7 11after passArray: 11 7 5 3 2 ï¼ˆæ•°ç»„ä¼šè¢«ä¿®æ”¹ï¼‰æ³¨æ„ï¼šå¦‚æœä½ æƒ³ç¡®ä¿ä¸€ä¸ªå‡½æ•°ä¸ä¿®æ”¹æ•°ç»„å…ƒç´ ä¼ é€’ç»™å®ƒï¼Œä½ å¯ä»¥å¯¹æ•°ç»„ä½¿ç”¨const:12345678910// even though prime is the actual array, within this function it should be treated as a constantvoid passArray(const int prime[5])&#123; // so each of these lines will cause a ç¼–è¯‘é”™è¯¯! prime[0] = 11; prime[1] = 7; prime[2] = 5; prime[3] = 3; prime[4] = 2;&#125;sizeofå’Œæ•°ç»„å¯ä»¥å¯¹æ•°ç»„ä½¿ç”¨sizeofæ“ä½œç¬¦ï¼Œå®ƒå°†è¿”å›æ•°ç»„çš„æ€»å¤§å°ï¼ˆæ•°ç»„é•¿åº¦ä¹˜ä»¥å…ƒç´ å¤§å°ï¼‰æ³¨æ„ï¼Œç”±äºc++å°†æ•°ç»„ä¼ é€’ç»™å‡½æ•°çš„æ–¹å¼ï¼Œå¯¹äºå·²ä¼ é€’ç»™å‡½æ•°çš„æ•°ç»„ï¼Œè¿™å°†æ— æ³•æ­£å¸¸å·¥ä½œ!123456789101112131415161718void printSize(int array[])&#123; std::cout &lt;&lt; sizeof(array) &lt;&lt; '\\n'; // prints the size of a pointer, not the size of the array!(å°†æ•°ç»„ä¼ é€’ç»™å‡½æ•°ï¼Œå®ƒæ˜¾ç¤ºçš„å¤§å°åªæ˜¯æ•°ç»„çš„æŒ‡é’ˆï¼ˆæˆ‘çš„vs2013ä¸­ï¼ŒæŒ‡é’ˆå¤§å°ä¸º4byteï¼‰)&#125; int main()&#123; int array[] = &#123; 1, 1, 2, 3, 5, 8, 13, 21 &#125;; std::cout &lt;&lt; sizeof(array) &lt;&lt; '\\n'; // will print the size of the arrayï¼ˆæ²¡æœ‰ä¼ é€’ç»™å‡½æ•°ï¼Œæ‰€ä»¥ä¼šæ­£å¸¸æ˜¾ç¤ºæ•°ç»„çš„å¤§å°ï¼‰ printSize(array); return 0;&#125;/*ç»“æœ*///åœ¨æˆ‘çš„vs2013ä¸­ï¼Œintæ˜¯4byteï¼ŒintæŒ‡é’ˆæ˜¯4byte324æŒ‡é’ˆå¤§å°ä¸ç±»å‹æ— å…³æ•°ç»„å¤§å°â‰ æ•°ç»„é•¿åº¦ï¼›æ•°ç»„å¤§å° = æ•°ç»„é•¿åº¦*å…ƒç´ å¤§å°åœ¨c++ 17ä¹‹å‰ç¡®å®šä¸€ä¸ªå›ºå®šæ•°ç»„çš„é•¿åº¦æˆ‘ä»¬å¯ä»¥é€šè¿‡ æ•´ä¸ªæ•°ç»„çš„å¤§å° é™¤ä»¥ æ•°ç»„å…ƒç´ çš„å¤§å° æ¥ç¡®å®šä¸€ä¸ªå›ºå®šæ•°ç»„çš„é•¿åº¦:12345678910111213#include &lt;iostream&gt; //for std::coutint main()&#123; int array[] = &#123; 1, 1, 2, 3, 5, 8, 13, 21 &#125;; std::cout &lt;&lt;\"The array has: \" &lt;&lt; sizeof(array) / sizeof(array[0]) &lt;&lt; \" elements\\n\"; //sizeof(array[0])æ˜¯å…ƒç´ çš„å¤§å° return 0;&#125;/*ç»“æœ*/The array has 8 elementsåœ¨c++ 17/ c++ 20ä¸­ç¡®å®šä¸€ä¸ªå›ºå®šæ•°ç»„çš„é•¿åº¦åœ¨c++ 17ä¸­ï¼Œæ›´å¥½çš„é€‰æ‹©æ˜¯ä½¿ç”¨std::size()å‡½æ•°ï¼Œå®ƒæ˜¯åœ¨å¤´æ–‡ä»¶&lt;iterator&gt;ä¸­ã€‚å¦‚æœæ‚¨è¯•å›¾åœ¨ä¼ é€’ç»™å‡½æ•°çš„å›ºå®šæ•°ç»„ä¸Šä½¿ç”¨å®ƒï¼Œåˆ™ä¼šå¯¼è‡´ç¼–è¯‘å™¨é”™è¯¯!æ³¨æ„ï¼Œstd::sizeè¿”å›ä¸€ä¸ªæ— ç¬¦å·å€¼ã€‚12345678910111213#include &lt;iostream&gt; // for std::cout#include &lt;iterator&gt; // for std::size int main()&#123; int array[] = &#123; 1, 1, 2, 3, 5, 8, 13, 21 &#125;; std::cout &lt;&lt; \"The array has: \" &lt;&lt; std::size(array) &lt;&lt; \" elements\\n\"; return 0;&#125;/*ç»“æœ*/The array has 8 elementsåœ¨c++ 20ä¸­ï¼Œstd::ssizeç”šè‡³æ›´å¯å–ï¼Œå› ä¸ºå®ƒè¿”å›ä¸€ä¸ªå¸¦ç¬¦å·çš„å€¼ã€‚å°ç»“ï¼šå¦‚æœä½ çš„ç¼–è¯‘å™¨æ˜¯c++ 17/ c++ 20çš„èƒ½åŠ›ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨std::size (c++ 17)æˆ–è€…std::ssize(c++ 20)æ¥è¿›è¡Œæ•°ç»„é•¿åº¦çš„ç¡®å®šã€‚P6.4 ä½¿ç”¨é€‰æ‹©æ’åºå¯¹æ•°ç»„æ’åºæ•°ç»„å…ƒç´ äº¤æ¢åœ¨C++æ ‡å‡†åº“ä¸­ï¼Œæä¾›äº†å…ƒç´ å€¼çš„äº¤æ¢å‡½æ•°ï¼šstd::swap()åœ¨å¤´æ–‡ä»¶algorithmä¸­ï¼ˆå¦‚æœæ˜¯C++11ï¼Œåˆ™åœ¨å¤´æ–‡ä»¶utilityä¸­ï¼‰123456789101112131415#include &lt;algorithm&gt; // for std::swap, use &lt;utility&gt; instead if C++11#include &lt;iostream&gt; int main()&#123; int x&#123; 2 &#125;; int y&#123; 4 &#125;; std::cout &lt;&lt; \"Before swap: x = \" &lt;&lt; x &lt;&lt; \", y = \" &lt;&lt; y &lt;&lt; '\\n'; std::swap(x, y); // swap the values of x and y std::cout &lt;&lt; \"After swap: x = \" &lt;&lt; x &lt;&lt; \", y = \" &lt;&lt; y &lt;&lt; '\\n';&#125;/*ç»“æœ*/Before swap: x = 2, y = 4After swap: x = 4, y = 2åœ¨c++ä¸­çš„é€‰æ‹©æ’åº1234567891011121314151617181920212223242526272829303132333435363738#include &lt;algorithm&gt; // for std::swap, use &lt;utility&gt; instead if C++11#include &lt;iostream&gt; int main()&#123; constexpr int length&#123; 5 &#125;; int array[length]&#123; 30, 50, 20, 10, 40 &#125;; // Step through each element of the array // (except the last one, which will already be sorted by the time we get there) for (int startIndex&#123; 0 &#125;; startIndex &lt; length - 1; ++startIndex) &#123; // smallestIndex is the index of the smallest element weâ€™ve encountered this iteration // Start by assuming the smallest element is the first element of this iteration int smallestIndex&#123; startIndex &#125;; // Then look for a smaller element in the rest of the array for (int currentIndex&#123; startIndex + 1 &#125;; currentIndex &lt; length; ++currentIndex) &#123; // If we've found an element that is smaller than our previously found smallest if (array[currentIndex] &lt; array[smallestIndex]) // then keep track of it smallestIndex = currentIndex; &#125; // smallestIndex is now the smallest element in the remaining array // swap our start element with our smallest element (this sorts it into the correct place) std::swap(array[startIndex], array[smallestIndex]); &#125; // Now that the whole array is sorted, print our sorted array as proof it works for (int index&#123; 0 &#125;; index &lt; length; ++index) std::cout &lt;&lt; array[index] &lt;&lt; ' '; std::cout &lt;&lt; '\\n'; return 0;&#125;std::sort(C++ä¸­è‡ªå¸¦æ’åºå‡½æ•°)é»˜è®¤æƒ…å†µä¸‹ï¼Œstd::sortæŒ‰å‡åºæ’åºï¼Œä½¿ç”¨æ“ä½œç¬¦&lt;æ¥æ¯”è¾ƒå…ƒç´ å¯¹ï¼Œå¹¶åœ¨å¿…è¦æ—¶äº¤æ¢å®ƒä»¬(å¾ˆåƒä¸Šé¢çš„é€‰æ‹©æ’åºç¤ºä¾‹)ã€‚1234567891011121314151617#include &lt;algorithm&gt; // for std::sort#include &lt;iostream&gt;#include &lt;iterator&gt; // for std::size int main()&#123; int array[]&#123; 30, 50, 20, 10, 40 &#125;; std::sort(std::begin(array), std::end(array)); for (int i&#123; 0 &#125;; i &lt; static_cast&lt;int&gt;(std::size(array)); ++i) std::cout &lt;&lt; array[i] &lt;&lt; ' '; std::cout &lt;&lt; '\\n'; return 0;&#125;P6.5 å¤šç»´æ•°ç»„æ•°ç»„çš„å…ƒç´ å¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬æ•°ç»„ã€‚æ•°ç»„çš„æ•°ç»„ç§°ä¸ºå¤šç»´æ•°ç»„ã€‚äºŒç»´æ•°ç»„1int array[3][5]; // a 3-element array of 5-element arraysåœ¨äºŒç»´æ•°ç»„ä¸­ï¼Œå¯ä»¥æ–¹ä¾¿åœ°å°†ç¬¬ä¸€ä¸ª(å·¦)ä¸‹æ ‡è§†ä¸ºè¡Œï¼Œç¬¬äºŒä¸ª(å³)ä¸‹æ ‡è§†ä¸ºåˆ—ã€‚è¿™å«åšè¡Œ-ä¸»åºã€‚åœ¨æ¦‚å¿µä¸Šï¼Œä¸Šè¿°äºŒç»´æ•°ç»„çš„å¸ƒå±€å¦‚ä¸‹:123[0][0] [0][1] [0][2] [0][3] [0][4] &#x2F;&#x2F; row 0[1][0] [1][1] [1][2] [1][3] [1][4] &#x2F;&#x2F; row 1[2][0] [2][1] [2][2] [2][3] [2][4] &#x2F;&#x2F; row 2äºŒç»´æ•°ç»„åˆå§‹åŒ–è¦åˆå§‹åŒ–ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨åµŒå¥—å¤§æ‹¬å·ï¼Œæ¯ç»„æ•°å­—ä»£è¡¨ä¸€è¡Œ:123456int array[3][5]&#123; &#123; 1, 2, 3, 4, 5 &#125;, // row 0 &#123; 6, 7, 8, 9, 10 &#125;, // row 1 &#123; 11, 12, 13, 14, 15 &#125; // row 2&#125;;å½“ç„¶ä½ ä¹Ÿå¯ä»¥çœç•¥å·¦(è¡Œ)ä¸‹æ ‡ã€‚æ³¨æ„ï¼Œå¦‚æœæƒ³çœç•¥ä¸‹æ ‡ï¼Œä½ åªèƒ½çœç•¥å·¦(è¡Œ)ä¸‹æ ‡ï¼Œè€Œå³(åˆ—)ä¸‹æ ‡ä¸å…è®¸çœç•¥ã€‚12345678910111213int array[][5] //åªèƒ½çœç•¥å·¦(è¡Œ)ä¸‹æ ‡ âœ”&#123; &#123; 1, 2, 3, 4, 5 &#125;, &#123; 6, 7, 8, 9, 10 &#125;, &#123; 11, 12, 13, 14, 15 &#125;&#125;;int array[][] //ä¸èƒ½çœç•¥å³(åˆ—)ä¸‹æ ‡ âœ–&#123; &#123; 1, 2, 3, 4, 5 &#125;, &#123; 6, 7, 8, 9, 10 &#125;, &#123; 11, 12, 13, 14, 15 &#125;&#125;;å¤šç»´æ•°ç»„ï¼ˆå¤§äº2ç»´ï¼‰å¤šç»´æ•°ç»„å¯ä»¥å¤§äºäºŒç»´ã€‚è¿™æ˜¯ä¸€ä¸ªä¸‰ç»´æ•°ç»„çš„å£°æ˜:1int array[1][2][3];ä½¿ç”¨åˆå§‹åŒ–å™¨åˆ—è¡¨å¾ˆéš¾ä»¥ä»»ä½•ç›´è§‚çš„æ–¹å¼åˆå§‹åŒ–ä¸‰ç»´æ•°ç»„ï¼Œå› æ­¤é€šå¸¸æœ€å¥½å°†æ•°ç»„åˆå§‹åŒ–ä¸º0ï¼Œå¹¶ä½¿ç”¨åµŒå¥—å¾ªç¯æ˜¾å¼åœ°åˆ†é…å€¼ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"Cé£æ ¼å­—ç¬¦ä¸²","slug":"C&C++/å­—ç¬¦ä¸²(P)","date":"2020-04-28T07:04:46.000Z","updated":"2020-05-01T09:43:59.131Z","comments":true,"path":"archives/21aba888.html","link":"","permalink":"https://longlongqin.github.io/archives/21aba888.html","excerpt":"LearnCpp chapterLhttps://www.learncpp.com","text":"LearnCpp chapterLhttps://www.learncpp.comCé£æ ¼å­—ç¬¦ä¸²åœ¨4.4b â€“ An introduction to std::stringçš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬å°†å­—ç¬¦ä¸²å®šä¹‰ä¸ºè¿ç»­å­—ç¬¦çš„é›†åˆï¼Œæ¯”å¦‚â€œHello, world!â€å­—ç¬¦ä¸²æ˜¯æˆ‘ä»¬åœ¨c++ä¸­å¤„ç†æ–‡æœ¬çš„ä¸»è¦æ–¹å¼ï¼Œè€Œstd::stringä½¿åœ¨c++ä¸­å¤„ç†å­—ç¬¦ä¸²å˜å¾—å¾ˆå®¹æ˜“ã€‚ç°ä»£c++æ”¯æŒä¸¤ç§ä¸åŒç±»å‹çš„å­—ç¬¦ä¸²:std::string(ä½œä¸ºæ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†)å’ŒCé£æ ¼çš„å­—ç¬¦ä¸²(ä»Cè¯­è¨€ç»§æ‰¿è€Œæ¥)ã€‚åŸæ¥std::stringæ˜¯ä½¿ç”¨cé£æ ¼çš„å­—ç¬¦ä¸²å®ç°çš„ã€‚åœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥äº†è§£cé£æ ¼çš„å­—ç¬¦ä¸²ã€‚cé£æ ¼çš„å­—ç¬¦ä¸²åªæ˜¯ä¸€ä¸ªä½¿ç”¨ç©ºç»ˆæ­¢ç¬¦(null terminator)çš„å­—ç¬¦æ•°ç»„ã€‚ç©ºç»ˆæ­¢ç¬¦æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦(&#39; \\0 &#39;ï¼Œ asciiç ä¸º 0)Cé£æ ¼å­—ç¬¦ä¸²ï¼Œåªéœ€å£°æ˜ä¸€ä¸ªcharæ•°ç»„ï¼Œå¹¶åˆå§‹åŒ–å®ƒçš„å­—ç¬¦ä¸²æ–‡å­—:123char myString[]&#123; \"string\" &#125;;//è™½ç„¶â€œstringâ€åªæœ‰6ä¸ªå­—æ¯ï¼Œä½†c++ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åœ¨å­—ç¬¦ä¸²çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªç©ºç»ˆæ­¢ç¬¦//(æˆ‘ä»¬è‡ªå·±ä¸éœ€è¦åŒ…å«å®ƒ)ã€‚å› æ­¤ï¼ŒmyStringå®é™…ä¸Šæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º7çš„æ•°ç»„!ä¸‹é¢æˆ‘ä»¬æ¥è¯æ˜å®ƒçš„å®é™…é•¿åº¦ï¼š12345678910111213141516171819202122#include &lt;iostream&gt;#include &lt;iterator&gt; // for std::size(å¦‚æœä¸æ”¯æŒC++17ï¼Œå°±ä¸ç”¨åŠ è¯¥å¤´æ–‡ä»¶) int main()&#123; char myString[]&#123; \"string\" &#125;; const int length&#123; static_cast&lt;int&gt;(std::size(myString)) &#125;;// å¦‚æœä½ çš„ç¼–è¯‘å™¨ä¸æ”¯æŒC++17ï¼Œè¯·ä½¿ç”¨ä¸‹é¢è¯­å¥æ¥æ›¿æ¢// const int length&#123; sizeof(myString) / sizeof(myString[0]) &#125;; std::cout &lt;&lt; myString&lt;&lt; \" has \" &lt;&lt; length &lt;&lt; \" characters.\\n\"; for (int index&#123; 0 &#125;; index &lt; length; ++index) std::cout &lt;&lt; static_cast&lt;int&gt;(myString[index]) &lt;&lt; \" \"; std::cout &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/string has 7 characters.115 116 114 105 110 103 0è¯¥0æ˜¯å·²é™„åŠ åˆ°å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºç»ˆæ­¢ç¬¦çš„ASCIIä»£ç ã€‚éœ€è¦æ³¨æ„çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼ŒCé£æ ¼çš„å­—ç¬¦ä¸²éµå¾ªä¸æ•°ç»„ç›¸åŒçš„æ‰€æœ‰è§„åˆ™ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨åˆ›å»ºæ—¶åˆå§‹åŒ–å­—ç¬¦ä¸²ï¼Œä½†ä¸èƒ½åœ¨æ­¤ä¹‹åä½¿ç”¨èµ‹å€¼æ“ä½œç¬¦ä¸ºå…¶èµ‹å€¼!12char myString[]&#123; \"string\" &#125;; // okmyString = \"rope\"; // not ok!ä½†æ˜¯ä½ å¯ä»¥æ”¹å˜å®ƒå­—ç¬¦ä¸²æ•°ç»„ä¸­çš„å•ä¸ªå­—ç¬¦ï¼š12char myString[]&#123; \"string\" &#125;; myString[0] = 'q'; //è¿™æ ·æ˜¯å¯ä»¥çš„è¦†ç›–å­—ç¬¦ä¸²çš„ç©ºç»ˆæ­¢ç¬¦åœ¨æ‰“å°cé£æ ¼çš„å­—ç¬¦ä¸²æ—¶ï¼Œstd::coutå°†æ‰“å°å­—ç¬¦ï¼Œç›´åˆ°é‡åˆ°ç©ºç»ˆæ­¢ç¬¦ä¸ºæ­¢ã€‚å¦‚æœæ‚¨æ„å¤–åœ°è¦†ç›–äº†ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„nullç»“æŸç¬¦(ä¾‹å¦‚ï¼Œé€šè¿‡å‘myString[6]åˆ†é…ä¸€äº›å†…å®¹)ï¼Œæ‚¨ä¸ä»…ä¼šè·å¾—å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å­—ç¬¦ï¼Œè€Œä¸”std::coutå°†ç»§ç»­æ‰“å°ç›¸é‚»å†…å­˜æ’æ§½ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œç›´åˆ°å®ƒåˆšå¥½ç¢°åˆ°ä¸€ä¸ª0!12345678910#include &lt;iostream&gt; int main()&#123; char name[20]&#123; \"Alex\" &#125;; // only use 5 characters (4 letters + null terminator) std::cout &lt;&lt; \"My name is: \" &lt;&lt; name &lt;&lt; '\\n'; return 0;&#125;//åœ¨æœ¬ä¾‹ä¸­ï¼Œå°†æ‰“å°å­—ç¬¦ä¸²â€œAlexâ€ï¼Œstd::coutå°†åœ¨nullç»“æŸç¬¦å¤„åœæ­¢ã€‚æ•°ç»„ä¸­çš„å…¶ä½™å­—ç¬¦å°†è¢«å¿½ç•¥ã€‚C-styleä¸std::cinå½“æˆ‘ä»¬ä¸çŸ¥é“ä¸€ä¸ªå­—ç¬¦ä¸²å°†ä¼šæœ‰å¤šé•¿ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å£°æ˜ä¸€ä¸ªå¤§äºæˆ‘ä»¬éœ€è¦çš„æ•°ç»„:1234567891011#include &lt;iostream&gt; int main()&#123; char name[255]; // declare array large enough to hold 255 characters std::cout &lt;&lt; \"Enter your name: \"; std::cin &gt;&gt; name; std::cout &lt;&lt; \"You entered: \" &lt;&lt; name &lt;&lt; '\\n'; return 0;&#125;ä½†æ˜¯è¿™ç§è¾“å…¥å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œä¸å¥½ã€‚å› ä¸ºï¼Œæˆ‘ä»¬ä¸èƒ½é˜»æ­¢ç”¨æˆ·è¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå³ä½¿å®ƒè¾“å…¥è¶…è¿‡255ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½é˜»æ­¢ç”¨æˆ·ã€‚æ¯”å¦‚ï¼šæˆ‘æ•…æ„è¾“å…¥è¶…è¿‡3ä¸ªå­—ç¬¦ï¼Œç»“æœä¼šæ˜¯æ€æ ·çš„å‘¢ï¼Ÿç»“æœå°±æ˜¯å³ä½¿è¶…è¿‡äº†åŸæœ¬å­—ç¬¦ä¸²æ•°ç»„çš„é•¿åº¦ï¼Œè¿˜æ˜¯ä¼šå…¨éƒ¨æ‰“å°å‡ºæ¥ï¼šæ”¹è¿›ï¼šstd::cin.getlineæ¨èä½¿ç”¨ï¼šstd::cin.getline( å­—ç¬¦ä¸²æ•°ç»„åå­—, å­—ç¬¦ä¸²æ•°ç»„é•¿åº¦)123456789101112#include &lt;iostream&gt;#include &lt;iterator&gt;int main()&#123; char name[255]; std::cout&lt;&lt;\"enter your name:\"; std::cin.getline(name, std::size(name)); //è¿™é‡Œè¿˜æ˜¯éœ€è¦æ”¯æŒC++17æ‰èƒ½è¿™æ ·ç”¨çš„ std::cout &lt;&lt; \"You entered: \" &lt;&lt; name &lt;&lt; '\\n'; return 0;&#125;è¿™ä¸ªå¯¹cingetline()çš„è°ƒç”¨å°†æŠŠæœ€å¤š254ä¸ªå­—ç¬¦è¯»å…¥name(ä¸º ç©ºç»“æŸç¬¦ ç•™å‡ºç©ºé—´!) ä»»ä½•å¤šä½™çš„å­—ç¬¦éƒ½å°†è¢«ä¸¢å¼ƒã€‚è¿™æ ·ï¼Œæˆ‘ä»¬ä¿è¯ä¸ä¼šæº¢å‡ºæ•°ç»„!æ“çºµcé£æ ¼çš„å­—ç¬¦ä¸²(#include &lt;cstring&gt;)åœ¨cstringå¤´æ–‡ä»¶ä¸­ï¼Œc++æä¾›äº†è®¸å¤šå‡½æ•°æ¥æ“ä½œCé£æ ¼çš„å­—ç¬¦ä¸²ï¼šstrcpy()strcpy()å…è®¸å°†ä¸€ä¸ªå­—ç¬¦ä¸²å¤åˆ¶åˆ°å¦ä¸€ä¸ªå­—ç¬¦ä¸²ï¼šstd::strcpy(dest, source)æ³¨æ„ï¼Œå¦‚æœç›®çš„å­—ç¬¦ä¸²desté•¿åº¦å°äºå°†è¦å¤åˆ¶çš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä¼šå‘ç”Ÿæº¢å‡ºã€‚è®¸å¤šç¨‹åºå‘˜å»ºè®®ä½¿ç”¨strncpy()ï¼Œå®ƒå…è®¸æ‚¨æŒ‡å®šç¼“å†²åŒºçš„å¤§å°ï¼Œå¹¶ç¡®ä¿ä¸ä¼šå‘ç”Ÿæº¢å‡ºã€‚ä¸å¹¸çš„æ˜¯ï¼Œstrncpy()ä¸èƒ½ç¡®ä¿å­—ç¬¦ä¸²ä»¥nullç»“å°¾ï¼Œè¿™ä»ç„¶ä¸ºæ•°ç»„æº¢å‡ºç•™ä¸‹äº†å¤§é‡ç©ºé—´ã€‚strcpy_s() ã€æ”¹è¿›ã€‘åœ¨C++ä¸­ï¼Œä½¿ç”¨strcp_s()æ›´å®‰å…¨ã€‚å®ƒæ·»åŠ äº†ä¸€ä¸ªå‚æ•°æ¥ç¡®å®šç›®æ ‡å­—ç¬¦ä¸²çš„å¤§å°ã€‚strcpy_s(dest, number, source);ä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç¼–è¯‘å™¨éƒ½æ”¯æŒè¿™ä¸ªå‡½æ•°ï¼Œè¦ä½¿ç”¨å®ƒï¼Œæ‚¨å¿…é¡»ä½¿ç”¨æ•´æ•°å€¼1å®šä¹‰__STDC_WANT_LIB_EXT1__ã€‚å³ï¼š#define __STDC_WANT_LIB_EXT1__ 11234567891011#define __STDC_WANT_LIB_EXT1__ 1#include &lt;cstring&gt; // for strcpy_sint main()&#123; char source[]&#123; \"Copy this!\" &#125;; char dest[5]; // note that the length of dest is only 5 chars! strcpy_s(dest, 5, source); // A runtime error will occur in debug mode std::cout &lt;&lt; dest &lt;&lt; '\\n'; return 0;&#125;strlcpy() ã€å†æ”¹è¿›ã€‘å› ä¸ºstrcpy_s()ä¸æ˜¯æ‰€æœ‰ç¼–è¯‘å™¨éƒ½æ”¯æŒã€‚æ‰€ä»¥ï¼Œstrlcpy() æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚å› ä¸ºå®ƒæ˜¯éæ ‡å‡†çš„ï¼Œæ‰€ä»¥æ²¡æœ‰åŒ…å«åœ¨è®¸å¤šç¼–è¯‘å™¨ä¸­ã€‚å®ƒä¹Ÿæœ‰è‡ªå·±çš„ä¸€å¥—é—®é¢˜ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœæ‚¨éœ€è¦å¤åˆ¶cé£æ ¼çš„å­—ç¬¦ä¸²ï¼Œè¿™é‡Œæ²¡æœ‰æ™®éæ¨èçš„è§£å†³æ–¹æ¡ˆã€‚strlen()ï¼šè¿”å›å­—ç¬¦ä¸²é•¿åº¦æ­¤å‡½æ•°è¿”å›cæ ·å¼å­—ç¬¦ä¸²çš„é•¿åº¦(ä¸åŒ…å«ç©ºç»ˆæ­¢ç¬¦)ï¼šï¼ˆä¸æ˜¯è¿”å›è¯¥å­—ç¬¦ä¸²æ•°ç»„å…¨éƒ¨çš„é•¿åº¦ï¼Œè€Œæ˜¯åªè¿”å›å·²å­˜å…¥å­—ç¬¦çš„é•¿åº¦ï¼‰123456789101112131415161718#include &lt;iostream&gt;#include &lt;cstring&gt;#include &lt;iterator&gt;int main()&#123; char name[20] &#123;\"Alex\"&#125;; //// only use 5 characters (4 letters + null terminator) std::cout &lt;&lt; \"My name is: \" &lt;&lt; name &lt;&lt; '\\n'; std::cout &lt;&lt; name &lt;&lt; \" has \" &lt;&lt; std::strlen(name) &lt;&lt; \" letters.\\n\"; std::cout &lt;&lt; name &lt;&lt; \" has \" &lt;&lt; std::size(name) &lt;&lt; \" characters in the array.\\n\"; // use sizeof(name) / sizeof(name[0]) if not C++17 capable return 0;&#125;/*ç»“æœ*/My name is: AlexAlex has 4 letters. (ä¸åŒ…å«ç»ˆæ­¢ç¬¦)Alex has 20 characters in the array.æ³¨æ„ï¼šstrlen()ã€std::size()çš„åŒºåˆ«ï¼šstrlen()æ‰“å°nullç»“æŸç¬¦ä¹‹å‰çš„å­—ç¬¦æ•°ï¼Œsize() C++17 . sizeof(name) / sizeof(name[0]) ä¸æ”¯æŒC++17çš„å†™æ³•è¿”å›æ•´ä¸ªæ•°ç»„çš„å¤§å°ï¼Œä¸ç®¡é‡Œé¢æ˜¯ä»€ä¹ˆã€‚å…¶ä»–å‡½æ•°ï¼šstrcat()â€”â€”å°†ä¸€ä¸ªå­—ç¬¦ä¸²è¿½åŠ åˆ°å¦ä¸€ä¸ªå­—ç¬¦ä¸²(å±é™©)strncat()â€”â€”å°†ä¸€ä¸ªå­—ç¬¦ä¸²è¿½åŠ åˆ°å¦ä¸€ä¸ªå­—ç¬¦ä¸²(ä½¿ç”¨ç¼“å†²åŒºæ£€æŸ¥é•¿åº¦)strcmp()â€”â€”æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²(å¦‚æœç›¸ç­‰åˆ™è¿”å›0)strncmp()â€”â€”æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²åˆ°ç‰¹å®šæ•°ç›®çš„å­—ç¬¦(å¦‚æœç›¸ç­‰ï¼Œåˆ™è¿”å›0)Donâ€™t use C-style stringsäº†è§£cé£æ ¼çš„å­—ç¬¦ä¸²å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒä»¬åœ¨å¾ˆå¤šä»£ç ä¸­éƒ½æœ‰ä½¿ç”¨ã€‚ç„¶è€Œï¼Œç°åœ¨æˆ‘ä»¬å·²ç»è§£é‡Šäº†å®ƒä»¬çš„å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬å°†å»ºè®®æ‚¨å°½å¯èƒ½åœ°é¿å…ä½¿ç”¨å®ƒä»¬! é™¤éæ‚¨æœ‰ç‰¹å®šçš„ã€ä»¤äººä¿¡æœçš„ç†ç”±æ¥ä½¿ç”¨cæ ·å¼çš„å­—ç¬¦ä¸²ï¼Œå¦åˆ™åº”è¯¥ä½¿ç”¨std::string(åœ¨å¤´æ–‡ä»¶ &lt;string&gt; ä¸­å®šä¹‰)ã€‚std::stringæ›´å®¹æ˜“ï¼Œæ›´å®‰å…¨ï¼Œæ›´çµæ´»ã€‚åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œæ‚¨ç¡®å®éœ€è¦ä½¿ç”¨å›ºå®šçš„ç¼“å†²åŒºå¤§å°å’Œcé£æ ¼çš„å­—ç¬¦ä¸²(ä¾‹å¦‚ï¼Œå¯¹äºå†…å­˜æœ‰é™çš„è®¾å¤‡)ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨ç»è¿‡è‰¯å¥½æµ‹è¯•çš„ç¬¬ä¸‰æ–¹å­—ç¬¦ä¸²åº“ï¼Œå³std::string_viewï¼Œè¿™å°†åœ¨ä¸‹ä¸€è¯¾ä¸­ä»‹ç»ã€‚ç”¨std::string_viewæ›¿ä»£C-style å­—ç¬¦ä¸²std::string_viewä¹‹å‰ï¼Œè®²çš„Cé£æ ¼å­—ç¬¦ä¸²ï¼ˆåŸæ–‡é“¾æ¥ï¼‰ï¼Œä»¥åŠä½¿ç”¨å®ƒä»¬çš„å±é™©ã€‚cé£æ ¼çš„å­—ç¬¦ä¸²é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯å®ƒä»¬ä¸åƒstd::stringé‚£æ ·å®¹æ˜“ä½¿ç”¨å’Œå®‰å…¨ã€‚ä½†æ˜¯std::string(æˆ‘ä»¬åœ¨ S.4.4b â€“ An introduction to std::stringï¼ˆä¹Ÿå°±æ˜¯æœ¬æ–‡å¼€å¤´çš„ä»‹ç»std::stringï¼‰çš„ä»‹ç»ä¸­å·²ç»ä»‹ç»è¿‡äº†)ä¹Ÿæœ‰å®ƒè‡ªå·±çš„ç¼ºç‚¹ï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ°constå­—ç¬¦ä¸²æ—¶ã€‚std::stringä¼šä¿®æ”¹constçš„å­—ç¬¦ä¸²çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š12345678910111213141516#include &lt;iostream&gt;#include &lt;string&gt; int main()&#123; char text[]&#123; \"hello\" &#125;; std::string str&#123; text &#125;; std::string more&#123; str &#125;; std::cout &lt;&lt; text &lt;&lt; ' ' &lt;&lt; str &lt;&lt; ' ' &lt;&lt; more &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/hello hello helloåœ¨å†…éƒ¨ï¼Œmainå°†å­—ç¬¦ä¸²â€œhelloâ€å¤åˆ¶3æ¬¡ï¼Œç»“æœå¾—åˆ°4ä¸ªå‰¯æœ¬ã€‚é¦–å…ˆæ˜¯å­—ç¬¦ä¸²æ–‡å­—â€œhelloâ€ï¼Œå®ƒåœ¨ç¼–è¯‘æ—¶å·²çŸ¥ï¼Œå¹¶å­˜å‚¨åœ¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚å½“æˆ‘ä»¬åˆ›å»ºchar[]æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå‰¯æœ¬ã€‚æ¥ä¸‹æ¥çš„ä¸¤ä¸ªstd::stringå¯¹è±¡åˆ†åˆ«åˆ›å»ºè¯¥å­—ç¬¦ä¸²çš„ä¸€ä¸ªå‰¯æœ¬ã€‚å› ä¸ºstd::stringè¢«è®¾è®¡ä¸ºå¯ä¿®æ”¹çš„ï¼Œæ‰€ä»¥æ¯ä¸ªstd::stringå¿…é¡»åŒ…å«å…¶è‡ªèº«çš„å­—ç¬¦ä¸²å‰¯æœ¬ï¼Œä»¥ä¾¿å¯ä»¥ä¿®æ”¹ç»™å®šçš„std::stringè€Œä¸å½±å“ä»»ä½•å…¶ä»–std::stringå¯¹è±¡ã€‚æ‰€ä»¥ï¼Œå³ä½¿ï¼Œæ˜¯ const std::stringï¼Œä¹Ÿæ˜¯ä¼šè¢«ä¿®æ”¹çš„ã€‚std::string_viewæƒ³è±¡ä¸€ä¸‹ä½ æˆ¿å­é‡Œçš„ä¸€æ‰‡çª—æˆ·ï¼Œçœ‹ç€åœåœ¨è¡—ä¸Šçš„ä¸€è¾†è½¦ã€‚ä½ å¯ä»¥é€è¿‡çª—æˆ·çœ‹åˆ°é‚£è¾†è½¦ï¼Œä½†ä½ ä¸èƒ½è§¦æ‘¸æˆ–ç§»åŠ¨é‚£è¾†è½¦ã€‚ä½ çš„çª—å£åªæ˜¯æä¾›äº†ä¸€ä¸ªæ±½è½¦çš„è§†å›¾ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„å¯¹è±¡ã€‚c++ 17å¼•å…¥äº†å¦ä¸€ç§ä½¿ç”¨å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œstd::string_viewï¼Œå®ƒä½äºå¤´æ–‡ä»¶&lt;string_view&gt;ä¸­ã€‚ä¸std::stringä¸åŒçš„æ˜¯ï¼Œstd::string_viewä¿å­˜äº†è‡ªå·±çš„å­—ç¬¦ä¸²å‰¯æœ¬ï¼Œå®ƒæä¾›äº†åœ¨å…¶ä»–åœ°æ–¹å®šä¹‰çš„å­—ç¬¦ä¸²çš„è§†å›¾ã€‚ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­ï¼š12345678910111213141516#include &lt;iostream&gt;#include &lt;string_view&gt;int main()&#123; std::string_view text&#123;\"hello\"&#125;; // view the text \"hello\", which is stored in the binary std::string_view str&#123; text &#125;; // view of the same \"hello\" std::string_view more&#123; str &#125;; // view of the same \"hello\" std::cout &lt;&lt; text &lt;&lt; ' ' &lt;&lt; str &lt;&lt; ' ' &lt;&lt; more &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/hello hello helloè¿™ä¸¤ä¸ªä¾‹å­ç»“æœç›¸åŒã€‚ä½†æ˜¯æ­¤ä¾‹å­ä¸å†åˆ›å»ºå­—ç¬¦ä¸²â€œhelloâ€çš„å‰¯æœ¬ã€‚å½“æˆ‘ä»¬å¤åˆ¶std::string_viewæ—¶ï¼Œæ–°çš„std::string_viewè§‚å¯Ÿåˆ°çš„å­—ç¬¦ä¸²ä¸å¤åˆ¶è‡ªstd::string_viewçš„å­—ç¬¦ä¸²ç›¸åŒã€‚ä¼˜ç‚¹string_viewä¸ä»…é€Ÿåº¦å¿«ï¼Œè€Œä¸”æœ‰è®¸å¤šæˆ‘ä»¬ä»std::stringä¸­äº†è§£åˆ°çš„å‡½æ•°ã€‚string_viewæ²¡æœ‰åˆ›å»ºå­—ç¬¦ä¸²çš„å‰¯æœ¬å› ä¸ºstd::string_viewå¹¶ä¸åˆ›å»ºå­—ç¬¦ä¸²çš„å‰¯æœ¬ï¼Œå¦‚æœæˆ‘ä»¬æ›´æ”¹æ‰€æŸ¥çœ‹çš„å­—ç¬¦ä¸²ï¼Œåˆ™æ›´æ”¹å°†åæ˜ åœ¨std::string_viewä¸­ã€‚1234567891011121314151617#include &lt;iostream&gt;#include &lt;string_view&gt; int main()&#123; char arr[]&#123; \"Gold\" &#125;; std::string_view str&#123; arr &#125;; std::cout &lt;&lt; str &lt;&lt; '\\n'; // Gold // Change 'd' to 'f' in arr arr[3] = 'f'; std::cout &lt;&lt; str &lt;&lt; '\\n'; // Golf return 0;&#125;æˆ‘ä»¬ä¿®æ”¹äº†arrï¼Œä½†æ˜¯strä¼¼ä¹ä¹Ÿåœ¨æ”¹å˜ã€‚è¿™æ˜¯å› ä¸ºï¼šè¿™æ˜¯å› ä¸ºarrå’Œstrå…±äº«å®ƒä»¬çš„å­—ç¬¦ä¸²ã€‚é€‚ç”¨æƒ…å†µå°½é‡ä½¿ç”¨std::string_view æ¥æ›¿ä»£Cé£æ ¼å­—ç¬¦ä¸²ã€‚å¯¹äºåªè¯»å­—ç¬¦ä¸²ï¼Œæœ€å¥½ä½¿ç”¨std::string_viewè€Œä¸æ˜¯std::stringï¼Œé™¤éæ‚¨å·²ç»ä½¿ç”¨äº†std::stringã€‚std::string_viewçš„ä¿®æ”¹å‡½æ•°å›åˆ°æˆ‘ä»¬çš„çª—æˆ·ç±»æ¯”ï¼Œè€ƒè™‘ä¸€ä¸ªæœ‰çª—å¸˜çš„çª—æˆ·ã€‚æˆ‘ä»¬å¯ä»¥å…³é—­å·¦è¾¹æˆ–å³è¾¹çš„çª—å¸˜æ¥å‡å°‘æˆ‘ä»¬èƒ½çœ‹åˆ°çš„ä¸œè¥¿ã€‚æˆ‘ä»¬ä¸æ”¹å˜å¤–é¢çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬åªæ˜¯å‡å°‘å¯è§çš„é¢ç§¯ã€‚ç±»ä¼¼åœ°ï¼Œstd::string_viewåŒ…å«ä¸€äº›å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å…è®¸æˆ‘ä»¬æ“ä½œå­—ç¬¦ä¸²çš„è§†å›¾ã€‚è¿™å…è®¸æˆ‘ä»¬åœ¨ä¸ä¿®æ”¹æ‰€æŸ¥çœ‹çš„å­—ç¬¦ä¸²çš„æƒ…å†µä¸‹æ›´æ”¹è§†å›¾ã€‚è¿™å‡½æ•°å°±æ˜¯ï¼šremove_prefixï¼šä»è§†å›¾å·¦ä¾§åˆ é™¤å­—ç¬¦remove_suffixï¼šä»è§†å›¾å³ä¾§åˆ é™¤å­—ç¬¦ã€‚123456789101112131415161718192021222324#include &lt;cstring&gt; //for std::strlen#include &lt;iostream&gt;#include &lt;string_view&gt;int main()&#123; std::string_view str&#123;\"peach\"&#125;; std::cout&lt;&lt;str&lt;&lt;'\\n'; // Ignore the first characters. str.remove_prefix(1); std::cout&lt;&lt;str&lt;&lt;'\\n'; // Ignore the last 2 characters. str.remove_suffix(2); std::cout&lt;&lt;str&lt;&lt;'\\n'; return 0;&#125;/*ç»“æœ*/Peacheacheaä¸çœŸæ­£çš„çª—å¸˜ä¸åŒï¼Œstd::string_viewä¸èƒ½æ‰“å¼€å¤‡ä»½ã€‚ä¸€æ—¦ä½ æ”¹å˜äº†å¯è§åŒºåŸŸï¼Œä½ å°±å›ä¸å»äº†(æœ‰äº›æŠ€å·§æˆ‘ä»¬ä¸ä¼šå»åš)ã€‚std::string_viewä¸éç©ºç»ˆæ­¢çš„å­—ç¬¦ä¸²ä¸C-styleå­—ç¬¦ä¸²å’Œstd::string ä¸åŒï¼Œstd::string_viewçš„å­—ç¬¦ä¸²æ˜¯ä¸ä½¿ç”¨ç©ºç»ˆæ­¢ç¬¦æ¥æ ‡è®°å­—ç¬¦ä¸²çš„ç»“æŸã€‚ç›¸åï¼Œå®ƒçŸ¥é“å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ï¼Œå› ä¸ºå®ƒè·Ÿè¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚1234567891011121314151617181920#include &lt;iostream&gt;#include &lt;iterator&gt; // For std::size#include &lt;string_view&gt; int main()&#123; // No null-terminator. char vowels[]&#123; 'a', 'e', 'i', 'o', 'u' &#125;; // vowels isn't null-terminated. We need to pass the length manually. // Because vowels is an array, we can use std::size to get its length. std::string_view str&#123; vowels, std::size(vowels) &#125;; std::cout &lt;&lt; str &lt;&lt; '\\n'; // This is safe. std::cout knows how to print std::string_views. return 0;&#125;/*ç»“æœ*/aeiouæ‰€æœ‰åˆ¶çš„é—®é¢˜ä½œä¸ºä¸€ä¸ªè§†å›¾ï¼Œstd::string_viewçš„ç”Ÿå­˜æœŸç‹¬ç«‹äºå®ƒæ‰€æŸ¥çœ‹çš„å­—ç¬¦ä¸²çš„ç”Ÿå­˜æœŸã€‚å¦‚æœæ‰€æŸ¥çœ‹çš„å­—ç¬¦ä¸²è¶…å‡ºå…¶ç”Ÿå‘½å‘¨æœŸèŒƒå›´ï¼Œé‚£ä¹ˆstd::string_viewæ²¡æœ‰ä»€ä¹ˆè¦è§‚å¯Ÿçš„ï¼Œè®¿é—®å®ƒä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚123456789101112131415161718192021222324252627282930313233343536#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;string_view&gt;std::string_view askForName()&#123; std::cout&lt;&lt;\"what's your name?\\n\"; //ä½¿ç”¨std::stringï¼Œå› ä¸ºstd::cinéœ€è¦ä¿®æ”¹å®ƒã€‚ std::string str&#123;&#125;; std::cin &gt;&gt; str; // æˆ‘ä»¬å°†åˆ‡æ¢åˆ°std::string_viewï¼Œä»…ç”¨äºæ¼”ç¤ºç›®çš„ã€‚ // å¦‚æœä½ å·²ç»æœ‰ä¸€ä¸ªstd::stringï¼Œæ²¡æœ‰ç†ç”±åˆ‡æ¢åˆ°std:: string_viewã€‚ std::string_view view&#123;str&#125;; std::cout &lt;&lt; \"Hello \" &lt;&lt; view &lt;&lt; '\\n'; return view; &#125; // stræ¶ˆå¤±äº†ï¼Œstråˆ›å»ºçš„å­—ç¬¦ä¸²ä¹Ÿæ¶ˆå¤±äº†ã€‚int main()&#123; std::string_view view&#123; askForName() &#125;; // view is observing a string that already died. std::cout &lt;&lt; \"Your name is \" &lt;&lt; view &lt;&lt; '\\n'; // Undefined behavior return 0; &#125;/*ç»“æœ*/What's your name?nascardriverHello nascardriverYour name is ï¿½P@ï¿½P@ ï¼ˆå› ä¸ºè¿™é‡Œè®¿é—®çš„æ—¶å€™ï¼Œviewå·²ç»â€œæ­»äº†â€ï¼‰å°†std::string_viewè½¬æ¢ä¸ºstd::stringstring_viewä¸ä¼šéšå¼åœ°è½¬æ¢ä¸ºstd::stringï¼Œä½†æ˜¯å¯ä»¥æ˜¾å¼åœ°è½¬æ¢ä¸º:1234567891011121314151617181920212223242526272829#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;string_view&gt; void print(std::string s)&#123; std::cout &lt;&lt; s &lt;&lt; '\\n';&#125; int main()&#123; std::string_view sv&#123; \"balloon\" &#125;; sv.remove_suffix(3); // print(sv); // compile error: won't implicitly convert std::string str&#123; sv &#125;; // explicit conversion print(str); // okay print(static_cast&lt;std::string&gt;(sv)); // okay return 0;&#125;/*ç»“æœ*/ballballå°†std::string_viewè½¬æ¢ä¸ºcé£æ ¼çš„å­—ç¬¦ä¸²ä¸€äº›æ—§çš„å‡½æ•°(å¦‚æ—§çš„strlenå‡½æ•°)ä»ç„¶æœŸæœ›cé£æ ¼çš„å­—ç¬¦ä¸²ã€‚è¦å°†std::string_viewè½¬æ¢ä¸ºcé£æ ¼çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥é¦–å…ˆå°†å…¶è½¬æ¢ä¸ºstd::string:12345678910111213141516171819202122232425#include &lt;cstring&gt;#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;string_view&gt; int main()&#123; std::string_view sv&#123; \"balloon\" &#125;; sv.remove_suffix(3); // Create a std::string from the std::string_view std::string str&#123; sv &#125;; // Get the null-terminated C-style string. auto szNullTerminated&#123; str.c_str() &#125;; // Pass the null-terminated string to the function that we want to use. std::cout &lt;&lt; str &lt;&lt; \" has \" &lt;&lt; std::strlen(szNullTerminated) &lt;&lt; \" letter(s)\\n\"; return 0;&#125;/*ç»“æœ*/ball has 4 letter(s)ä½†æ˜¯ï¼Œæ¯æ¬¡æˆ‘ä»¬å¸Œæœ›å°†std::string_viewä½œä¸ºcé£æ ¼çš„å­—ç¬¦ä¸²ä¼ é€’æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªstd::stringæ˜¯éå¸¸æ¶ˆè€—èµ„æºçš„ï¼Œå› æ­¤åº”è¯¥å°½å¯èƒ½é¿å…è¿™ç§æƒ…å†µã€‚data()å‡½æ•°å¯ä»¥ä½¿ç”¨data()å‡½æ•°è®¿é—®std::string_viewæ‰€æŸ¥çœ‹çš„å­—ç¬¦ä¸²ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªcé£æ ¼çš„å­—ç¬¦ä¸²ã€‚è¿™æä¾›äº†å¯¹æ­£åœ¨æŸ¥çœ‹çš„å­—ç¬¦ä¸²(ä½œä¸ºcå­—ç¬¦ä¸²)çš„å¿«é€Ÿè®¿é—®ã€‚ä½†æ˜¯å®ƒä¹Ÿåº”è¯¥åªåœ¨std::string_viewçš„è§†å›¾æ²¡æœ‰è¢«ä¿®æ”¹(ä¾‹å¦‚é€šè¿‡remove_prefixæˆ–remove_suffix)å¹¶ä¸”è¢«æŸ¥çœ‹çš„å­—ç¬¦ä¸²ä»¥nullç»“å°¾çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œstd::strlenä¸çŸ¥é“std::string_viewæ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¼ é€’å®ƒstr.data():12345678910111213141516171819202122#include &lt;cstring&gt; // For std::strlen#include &lt;iostream&gt;#include &lt;string_view&gt; int main()&#123; std::string_view str&#123; \"balloon\" &#125;; std::cout &lt;&lt; str &lt;&lt; '\\n'; // We use std::strlen because it's simple, this could be any other function // that needs a null-terminated string. // It's okay to use data() because we haven't modified the view, and the // string is null-terminated. std::cout &lt;&lt; std::strlen(str.data()) &lt;&lt; '\\n'; return 0;&#125;/*ç»“æœ*/balloon7å½“ä¿®æ”¹äº†std::string_viewä¹‹åï¼Œdata()å¹¶ä¸æ€»æ˜¯åšæˆ‘ä»¬å¸Œæœ›å®ƒåšçš„äº‹æƒ…ã€‚ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†åœ¨ä¿®æ”¹è§†å›¾åè®¿é—®data()æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆ:ã€æ‰€ä»¥ï¼Œæ­¤æ—¶ä¸å»ºè®®ä½¿ç”¨data()å‡½æ•°ã€‘123456789101112131415161718192021#include &lt;cstring&gt;#include &lt;iostream&gt;#include &lt;string_view&gt; int main()&#123; std::string_view str&#123; \"balloon\" &#125;; // Remove the \"b\" str.remove_prefix(1); // remove the \"oon\" str.remove_suffix(3); // Remember that the above doesn't modify the string, it only changes // the region that str is observing. std::cout &lt;&lt; str &lt;&lt; \" has \" &lt;&lt; std::strlen(str.data()) &lt;&lt; \" letter(s)\\n\"; std::cout &lt;&lt; \"str.data() is \" &lt;&lt; str.data() &lt;&lt; '\\n'; std::cout &lt;&lt; \"str is \" &lt;&lt; str &lt;&lt; '\\n'; return 0;&#125;å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œè¿™æ˜¯è¯•å›¾è®¿é—®å·²ä¿®æ”¹çš„std::string_viewçš„æ•°æ®()çš„ç»“æœã€‚åœ¨è®¿é—®data()æ—¶ï¼Œæœ‰å…³å­—ç¬¦ä¸²çš„é•¿åº¦ä¿¡æ¯å°†ä¸¢å¤±ã€‚std::strlenå’Œstd::coutä¸æ–­åœ°ä»åº•å±‚å­—ç¬¦ä¸²ä¸­è¯»å–å­—ç¬¦ï¼Œç›´åˆ°å®ƒä»¬æ‰¾åˆ°ç©ºç»ˆæ­¢ç¬¦ï¼Œä¹Ÿå°±æ˜¯â€œballoonâ€çš„ç»“å°¾ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"std::cinï¼ˆè¾“å…¥ï¼‰","slug":"C&C++/cin(è¾“å…¥)","date":"2020-04-26T08:36:52.000Z","updated":"2020-05-01T09:43:59.131Z","comments":true,"path":"archives/a4b39f57.html","link":"","permalink":"https://longlongqin.github.io/archives/a4b39f57.html","excerpt":"std::cinï¼ˆè¾“å…¥ï¼‰https://www.learncpp.com","text":"std::cinï¼ˆè¾“å…¥ï¼‰https://www.learncpp.comæˆ‘ä»¬å¯ä»¥ä½¿ç”¨std::cinæ¥è¾“å…¥æ–‡æœ¬ï¼›å› ä¸ºæ–‡æœ¬è¾“å…¥æ˜¯è‡ªç”±æ ¼å¼çš„(ç”¨æˆ·å¯ä»¥è¾“å…¥ä»»ä½•å†…å®¹)ï¼Œæ‰€ä»¥ç”¨æˆ·å¾ˆå®¹æ˜“è¾“å…¥ä¸éœ€è¦çš„å†…å®¹ã€‚åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œæ‚¨åº”è¯¥å§‹ç»ˆè€ƒè™‘ç”¨æˆ·å°†å¦‚ä½•(æ— æ„ä¸­æˆ–ä»¥å…¶ä»–æ–¹å¼)æ»¥ç”¨æ‚¨çš„ç¨‹åºã€‚ä¸€ä¸ªç¼–å†™è‰¯å¥½çš„ç¨‹åºå¯ä»¥é¢„æµ‹ç”¨æˆ·å°†å¦‚ä½•æ»¥ç”¨å®ƒï¼Œå¹¶ä¼˜é›…åœ°å¤„ç†è¿™äº›æƒ…å†µï¼Œæˆ–è€…åœ¨ä¸€å¼€å§‹å°±é˜²æ­¢å®ƒä»¬å‘ç”Ÿ(å¦‚æœå¯èƒ½çš„è¯)ã€‚ä¸€ä¸ªèƒ½å¾ˆå¥½åœ°å¤„ç†é”™è¯¯æƒ…å†µçš„ç¨‹åºæ˜¯robust(å¥å£®çš„)ã€‚åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä¸“é—¨ç ”ç©¶ç”¨æˆ·é€šè¿‡std::cinè¾“å…¥æ— æ•ˆæ–‡æœ¬çš„æ–¹æ³•ï¼Œå¹¶å‘æ‚¨å±•ç¤ºå¤„ç†è¿™äº›æƒ…å†µçš„ä¸€äº›ä¸åŒæ–¹æ³•ã€‚std::cin, buffers, and extractionä¸ºäº†è®¨è®ºstd::cinå’Œæ“ä½œç¬¦&gt;&gt;æ˜¯å¦‚ä½•å¤±è´¥çš„ï¼Œé¦–å…ˆéœ€è¦äº†è§£ä¸€ä¸‹å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å½“æˆ‘ä»¬ä½¿ç”¨æ“ä½œç¬¦&gt;&gt;æ¥è·å–ç”¨æˆ·çš„è¾“å…¥ï¼Œç„¶åå°†è¯¥è¾“å…¥æ”¾è¿›ä¸€ä¸ªå˜é‡ä¸­ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšï¼šextraction(æå–)ã€‚æ­¤æ—¶æ“ä½œç¬¦&gt;&gt;ä¹Ÿå°±å«åš æå–æ“ä½œç¬¦ã€‚bufferå½“ç”¨æˆ·å“åº”æå–æ“ä½œè¾“å…¥æ•°æ®æ—¶ï¼Œè¯¥æ•°æ®è¢«æ”¾ç½®åœ¨std::cinä¸­çš„bufferï¼ˆç¼“å†²åŒº)ä¸­ã€‚ä¸€ä¸ªbuffer(ä¹Ÿç§°ï¼šdata buffer)ï¼šå°±æ˜¯åœ¨æ•°æ®ä»ä¸€ä¸ªåœ°æ–¹ç§»åŠ¨åˆ°å¦ä¸€ä¸ªåœ°æ–¹æ—¶ç”¨æ¥ä¸´æ—¶å­˜å‚¨æ•°æ®çš„ä¸€å—å†…å­˜ã€‚æ‰€ä»¥ï¼Œåœ¨è¿™é‡Œçš„ç¼“å†²åŒºå°±ç”¨æ¥ å½“ç”¨æˆ·è¾“å…¥çš„å†…å®¹è¿˜æ²¡æœ‰è¢«æå–åˆ°å˜é‡ä¸­æ—¶ ä¿å­˜å®ƒã€‚å½“ä½ ä½¿ç”¨æå–æ“ä½œç¬¦æ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹è¿‡ç¨‹ï¼šå¦‚æœåœ¨è¾“å…¥ç¼“å†²åŒºä¸­å·²ç»æœ‰æ•°æ®ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°æ®æ˜¯å‡†å¤‡è¢«æå–çš„ï¼›å¦‚æœè¾“å…¥ç¼“å†²åŒºä¸­æ²¡æœ‰æ•°æ®ï¼Œé‚£ä¹ˆè¦æ±‚ç”¨æˆ·è¾“å…¥æ•°æ®ä»¥è¿›è¡Œæå–(å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯è¿™æ ·)ã€‚å½“ç”¨æˆ·å›è½¦æ—¶ï¼Œä¸€ä¸ªâ€™ \\n â€˜å­—ç¬¦å°†è¢«æ”¾å…¥è¾“å…¥ç¼“å†²åŒºã€‚æ“ä½œç¬¦&gt;&gt; ä¼šä»è¾“å…¥ç¼“å†²åŒºæå–å°½å¯èƒ½å¤šçš„æ•°æ®åˆ°å˜é‡ä¸­(ä¼šå¿½ç•¥çš„ç©ºç™½å­—ç¬¦ï¼Œå¦‚ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦æˆ–â€™ \\n â€˜ã€‚)ä¸èƒ½æå–ç¼“å†²åŒºä¸­ç•™ç»™ä¸‹ä¸€æ¬¡æå–çš„æ•°æ®ã€‚æå–æ•°æ®æˆåŠŸåªè¦åœ¨è¾“å…¥ç¼“å†²åŒºä¸­æå–åˆ°ä¸€ä¸ªå­—ç¬¦å°±ç®—æˆåŠŸã€‚é‚£äº›å‰©ä¸‹çš„ä¸ç¬¦åˆæœ¬æ¬¡æå–çš„æ•°æ®ä¼šç•™ç€ä¸‹ä¸€æ¬¡æå–ã€‚12345int x;std::cin &gt;&gt; x;//æ¯”å¦‚ç”¨æˆ·è¾“å…¥ï¼š5a ç»™å˜é‡x;//å°†æå–5ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºæ•´æ•°ï¼Œèµ‹å€¼ç»™å˜é‡xï¼Œâ€œa\\nâ€å°†ç•™åœ¨è¾“å…¥æµä¸­è¿›è¡Œä¸‹ä¸€æ¬¡æå–ã€‚æå–æ•°æ®å¤±è´¥å¦‚æœè¾“å…¥æ•°æ®ä¸è¦æå–çš„å˜é‡çš„ç±»å‹ä¸åŒ¹é…ï¼Œåˆ™æå–å¤±è´¥ã€‚ä¾‹å¦‚:1234int x;std::cin &gt;&gt; x;//å¦‚æœç”¨æˆ·è¾“å…¥â€œbâ€ï¼Œæå–å°†å¤±è´¥ï¼Œå› ä¸ºâ€œbâ€ä¸èƒ½æå–ä¸ºæ•´æ•°å˜é‡ã€‚è¾“å…¥éªŒè¯æ£€æŸ¥ç”¨æˆ·è¾“å…¥æ˜¯å¦ç¬¦åˆç¨‹åºæœŸæœ›çš„è¿‡ç¨‹ç§°ä¸ºinput validation(è¾“å…¥éªŒè¯)ã€‚è¿›è¡Œè¾“å…¥éªŒè¯æœ‰ä¸‰ç§åŸºæœ¬æ–¹æ³•:å†…è”(ä½œä¸ºç”¨æˆ·ç±»å‹)é¦–å…ˆé˜²æ­¢ç”¨æˆ·è¾“å…¥æ— æ•ˆçš„è¾“å…¥ã€‚è¾“å…¥å(åœ¨ç”¨æˆ·è¾“å…¥ä¹‹å)è®©ç”¨æˆ·åœ¨å­—ç¬¦ä¸²ä¸­è¾“å…¥ä»–ä»¬æƒ³è¦çš„ä»»ä½•å†…å®¹ï¼Œç„¶åéªŒè¯è¯¥å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœæ­£ç¡®ï¼Œåˆ™å°†è¯¥å­—ç¬¦ä¸²è½¬æ¢ä¸ºæœ€ç»ˆçš„å˜é‡ç±»å‹ã€‚è®©ç”¨æˆ·è¾“å…¥ä»–ä»¬æƒ³è¦çš„ä»»ä½•ä¸œè¥¿ï¼Œè®©std::cinå’Œæ“ä½œç¬¦&gt;&gt;å°è¯•æå–å®ƒï¼Œå¹¶å¤„ç†é”™è¯¯æƒ…å†µã€‚ä¸€äº›å›¾å½¢ç”¨æˆ·ç•Œé¢å’Œé«˜çº§æ–‡æœ¬ç•Œé¢å°†å…è®¸æ‚¨åœ¨ç”¨æˆ·è¾“å…¥æ—¶éªŒè¯è¾“å…¥(é€ä¸ªå­—ç¬¦)ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç¨‹åºå‘˜æä¾›ä¸€ä¸ªéªŒè¯å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ç”¨æˆ·ç›®å‰è¾“å…¥çš„è¾“å…¥ï¼Œå¦‚æœè¾“å…¥æœ‰æ•ˆåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚æ¯å½“ç”¨æˆ·æŒ‰ä¸‹ä¸€ä¸ªé”®æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚å¦‚æœéªŒè¯å‡½æ•°è¿”å›trueï¼Œåˆ™æ¥å—ç”¨æˆ·åˆšåˆšæŒ‰ä¸‹çš„é”®ã€‚å¦‚æœéªŒè¯å‡½æ•°è¿”å›falseï¼Œåˆ™ä¸¢å¼ƒç”¨æˆ·åˆšåˆšè¾“å…¥çš„å­—ç¬¦(å¹¶ä¸”ä¸æ˜¾ç¤ºåœ¨å±å¹•ä¸Š)ã€‚ä¸å¹¸çš„æ˜¯ï¼Œstd::cinä¸æ”¯æŒè¿™ç§ç±»å‹çš„éªŒè¯ã€‚ç”±äºå­—ç¬¦ä¸²å¯¹å¯ä»¥è¾“å…¥ä»€ä¹ˆå­—ç¬¦æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œæ‰€ä»¥æå–ä¸€å®šä¼šæˆåŠŸ(ä½†æ˜¯è¯·è®°ä½ï¼Œstd::cinåœ¨ç¬¬ä¸€ä¸ªéå‰å¯¼ç©ºæ ¼å­—ç¬¦å¤„åœæ­¢æå–)ã€‚ä¸€æ—¦è¾“å…¥äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç¨‹åºå°±å¯ä»¥è§£æè¯¥å­—ç¬¦ä¸²ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦æœ‰æ•ˆã€‚ç„¶è€Œï¼Œè§£æå­—ç¬¦ä¸²å¹¶å°†å­—ç¬¦ä¸²è¾“å…¥è½¬æ¢ä¸ºå…¶ä»–ç±»å‹(ä¾‹å¦‚æ•°å­—)å¯èƒ½ä¼šå¾ˆå›°éš¾ï¼Œæ‰€ä»¥è¿™åªåœ¨æå°‘æ•°æƒ…å†µä¸‹æ‰ä¼šå®Œæˆã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®©std::cinå’Œæå–æ“ä½œç¬¦&gt;&gt;æ¥åšè¿™ä¸ªå·¥ä½œã€‚åœ¨è¿™ç§æ–¹æ³•ä¸‹ï¼Œæˆ‘ä»¬è®©ç”¨æˆ·è¾“å…¥ä»–ä»¬æƒ³è¦çš„ä»»ä½•ä¸œè¥¿ï¼Œè®©std::cinå’Œæ“ä½œç¬¦&gt;&gt;å°è¯•æå–å®ƒï¼Œå¦‚æœå®ƒå¤±è´¥äº†ï¼Œå°±ç¼–å†™ç¨‹åºå¤„ç†å®ƒä»¬ã€‚ä¸€ä¸ªä¾‹å­ï¼š12345678910111213141516171819202122232425262728293031323334353637383940#include &lt;iostream&gt; double getDouble()&#123; std::cout &lt;&lt; \"Enter a double value: \"; double x; std::cin &gt;&gt; x; return x;&#125; char getOperator()&#123; std::cout &lt;&lt; \"Enter one of the following: +, -, *, or /: \"; char op; std::cin &gt;&gt; op; return op;&#125; void printResult(double x, char op, double y)&#123; if (op == '+') std::cout &lt;&lt; x &lt;&lt; \" + \" &lt;&lt; y &lt;&lt; \" is \" &lt;&lt; x + y &lt;&lt; '\\n'; else if (op == '-') std::cout &lt;&lt; x &lt;&lt; \" - \" &lt;&lt; y &lt;&lt; \" is \" &lt;&lt; x - y &lt;&lt; '\\n'; else if (op == '*') std::cout &lt;&lt; x &lt;&lt; \" * \" &lt;&lt; y &lt;&lt; \" is \" &lt;&lt; x * y &lt;&lt; '\\n'; else if (op == '/') std::cout &lt;&lt; x &lt;&lt; \" / \" &lt;&lt; y &lt;&lt; \" is \" &lt;&lt; x / y &lt;&lt; '\\n';&#125; int main()&#123; double x = getDouble(); char op = getOperator(); double y = getDouble(); printResult(x, op, y); return 0;&#125;ç”¨æˆ·æ­£å¸¸è¾“å…¥ï¼š1234Enter a double value: 5Enter one of the following: +, -, *, or &#x2F;: *Enter a double value: 75 * 7 is 35ç”¨æˆ·è¾“å…¥æ— æ•ˆæ–‡æœ¬1. è¾“å…¥æå–æˆåŠŸï¼Œä½†è¾“å…¥å¯¹ç¨‹åºæ²¡æœ‰æ„ä¹‰(ä¾‹å¦‚ï¼Œè¾“å…¥â€œkâ€ä½œä¸ºä½ çš„æ•°å­¦è¿ç®—ç¬¦)ã€‚123Enter a double value: 5Enter one of the following: +, -, *, or &#x2F;: kEnter a double value: 7è§£å†³åŠæ³•ï¼šå¢åŠ åˆ¤æ–­ç”¨æˆ·è¾“å…¥æ˜¯å¦ç¬¦åˆé¢„æœŸå€¼çš„ä»£ç ï¼Œå½“ä¸ç¬¦åˆæ—¶ï¼Œé‡æ–°è¾“å…¥ï¼š123456789101112131415char getOperator()&#123; while (true) // Loop until user enters a valid input &#123; std::cout &lt;&lt; \"Enter one of the following: +, -, *, or /: \"; char op; std::cin &gt;&gt; op; // Check whether the user entered meaningful input if (op == '+' || op == '-' || op == '*' || op == '/') return op; // return it to the caller else // otherwise tell the user what went wrong std::cout &lt;&lt; \"Oops, that input is invalid. Please try again.\\n\"; &#125; // and try again&#125;2. æå–æˆåŠŸï¼Œä½†æ˜¯æœ‰é¢å¤–çš„è¾“å…¥å¦‚ï¼šEnter a double value: 5*7è¿è¡Œç»“æœæ˜¯ï¼š(ç¨‹åºæ‰“å°æ­£ç¡®çš„ç­”æ¡ˆï¼Œä½†æ ¼å¼å´ä¸€å›¢ç³Ÿã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ)å½“ç”¨æˆ·è¾“å…¥â€œ5*7â€ä½œä¸ºè¾“å…¥æ—¶ï¼Œè¯¥è¾“å…¥å°†è¿›å…¥ç¼“å†²åŒºã€‚ç„¶åæ“ä½œç¬¦&gt;&gt;å°†5æå–åˆ°å˜é‡xä¸­ï¼Œåœ¨ç¼“å†²åŒºä¸­ç•™ä¸‹â€œ*7\\nâ€ã€‚æ¥ä¸‹æ¥ï¼Œç¨‹åºè¾“å‡ºâ€œEnter one of the following: +, -, *, or /:â€ã€‚ä½†æ˜¯ï¼Œå½“è°ƒç”¨æå–æ“ä½œç¬¦æ—¶ï¼Œå®ƒä¼šçœ‹åˆ°â€œ*7\\nâ€åœ¨ç¼“å†²åŒºä¸­ç­‰å¾…æå–ï¼Œå› æ­¤å®ƒä½¿ç”¨è¯¥æ“ä½œç¬¦è€Œä¸æ˜¯è¯¢é—®ç”¨æˆ·æ›´å¤šçš„è¾“å…¥ã€‚å› æ­¤ï¼Œå®ƒæå–â€œ*â€å­—ç¬¦ï¼Œåœ¨ç¼“å†²åŒºä¸­ç•™ä¸‹â€œ7\\nâ€ã€‚åœ¨è¦æ±‚ç”¨æˆ·è¾“å…¥å¦ä¸€ä¸ªåŒç²¾åº¦å€¼ä¹‹åï¼Œç¼“å†²åŒºä¸­çš„â€œ7â€è¢«æå–å‡ºæ¥ï¼Œè€Œä¸éœ€è¦è¯¢é—®ç”¨æˆ·ã€‚ç”±äºç”¨æˆ·ä»æœªæœ‰æœºä¼šè¾“å…¥å…¶ä»–æ•°æ®å¹¶æŒ‰ä¸‹å›è½¦é”®(å¯¼è‡´æ¢è¡Œ)ï¼Œæ‰€ä»¥è¾“å‡ºæç¤ºå°†ä¸€èµ·è¿è¡Œåœ¨åŒä¸€è¡Œä¸Šï¼Œå³ä½¿è¾“å‡ºæ˜¯æ­£ç¡®çš„ã€‚12Enter a double value: 5*7Enter one of the following: +, -, *, or &#x2F;: Enter a double value: 5 * 7 is 35è§£å†³åŠæ³•ï¼šä½¿ç”¨std::cin.ignore(32767, &#39;\\n&#39;);å…³äºcin.jgnore(32767 , &#39;\\n&#39;);çš„è¯¦ç»†è§£é‡Šï¼šhttps://www.yuque.com/longlongqin/pw9qpx/uap4n0#km6jq12345678double getDouble()&#123; std::cout &lt;&lt; \"Enter a double value: \"; double x; std::cin &gt;&gt; x; std::cin.ignore(32767, '\\n'); // clear (up to 32767) characters out of the buffer until a '\\n' character is removed return x;&#125;3. æå–å¤±è´¥å¦‚ï¼šEnter a double value: aè¿è¡Œç»“æœï¼šå½“ç”¨æˆ·è¾“å…¥â€œaâ€æ—¶ï¼Œè¯¥å­—ç¬¦è¢«æ”¾ç½®åœ¨ç¼“å†²åŒºä¸­ã€‚ç„¶åï¼Œæ“ä½œç¬¦&gt;&gt;å°è¯•å°†â€™ a â€˜æå–åˆ°å˜é‡xä¸­ï¼Œè¯¥å˜é‡çš„ç±»å‹ä¸ºdoubleã€‚ç”±äºâ€™ a â€˜ä¸èƒ½è¢«è½¬æ¢æˆdoubleï¼Œæ‰€ä»¥æ“ä½œç¬¦&gt;&gt;ä¸èƒ½è¿›è¡Œæå–ã€‚æ­¤æ—¶ä¼šå‘ç”Ÿä¸¤ä»¶äº‹:â€™ a â€˜ç•™åœ¨ç¼“å†²åŒºä¸­ï¼Œstd::cinè¿›å…¥â€œfailure mode(æ•…éšœæ¨¡å¼)â€ã€‚ä¸€æ—¦è¿›å…¥â€œæ•…éšœæ¨¡å¼â€ï¼Œæœªæ¥çš„è¾“å…¥æå–è¯·æ±‚å°†ä»¥é™æ‚„æ‚„çš„å¤±è´¥ã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„è®¡ç®—å™¨ç¨‹åºä¸­ï¼Œè¾“å‡ºæç¤ºä»ç„¶æ‰“å°ï¼Œä½†æ˜¯ä»»ä½•è¿›ä¸€æ­¥æå–çš„è¯·æ±‚éƒ½ä¼šè¢«å¿½ç•¥ã€‚ç¨‹åºç®€å•åœ°è¿è¡Œåˆ°æœ€åï¼Œç„¶åç»ˆæ­¢(ä¸æ‰“å°ç»“æœï¼Œå› ä¸ºæˆ‘ä»¬ä»æ¥æ²¡æœ‰è¯»è¿‡æœ‰æ•ˆçš„æ•°å­¦è¿ç®—)ã€‚12Enter a double value: aEnter one of the following: +, -, *, or &#x2F;: Enter a double value:è§£å†³æ–¹æ³•ï¼š123456if (std::cin.fail()) // has a previous extraction failed? â­&#123; // yep, so let's handle the failure std::cin.clear(); // put us back in 'normal' operation mode â­ std::cin.ignore(32767,'\\n'); // and remove the bad input&#125;ç°åœ¨å°†è¿™ä¸‰ç§é”™è¯¯çš„è§£å†³åŠæ³•ç»“åˆèµ·æ¥ï¼š123456789101112131415161718192021double getDouble()&#123; while (true) // Loop until user enters a valid input &#123; std::cout &lt;&lt; \"Enter a double value: \"; double x; std::cin &gt;&gt; x; if (std::cin.fail()) // has a previous extraction failed? â­3 &#123; // yep, so let's handle the failure std::cin.clear(); // put us back in 'normal' operation mode â­3 std::cin.ignore(32767,'\\n'); // and remove the bad input â­2 &#125; else // else our extraction succeeded &#123; std::cin.ignore(32767, '\\n'); // clear (up to 32767) characters out of the buffer until a '\\n' character is removed â­2 return x; // so return the value we extracted &#125; &#125;&#125;æ³¨ï¼šåœ¨C++11ä¹‹å‰ï¼Œå¦‚æœè¿™ä¸ªå˜é‡å·²ç»è¢«åˆå§‹åŒ–è¿‡ï¼Œé‚£ä¹ˆå¤±è´¥çš„æå–ä¸ä¼šä¿®æ”¹è¢«æå–åˆ°çš„å˜é‡çš„åˆå§‹å€¼ã€‚åœ¨C++11åŠä¹‹åï¼Œç”±è¾“å…¥æ— æ•ˆè€Œå¯¼è‡´æå–å¤±è´¥å°†å¯¼è‡´å˜é‡åˆå§‹åŒ–ä¸ºé›¶ã€‚(0åˆå§‹åŒ–æ„å‘³ç€å˜é‡è¢«è®¾ç½®ä¸º0, 0.0ï¼Œâ€ â€œï¼Œæˆ–è€…0è½¬æ¢ä¸ºè¯¥ç±»å‹çš„ä»»ä½•å€¼ã€‚)4. æå–æˆåŠŸï¼Œä½†æ˜¯æå–çš„å€¼æº¢å‡º1234567891011121314151617181920#include &lt;cstdint&gt;#include &lt;iostream&gt; int main()&#123; std::int16_t x &#123; 0 &#125;; // x is 16 bits, holds from -32768 to 32767 std::cout &lt;&lt; \"Enter a number between -32768 and 32767: \"; std::cin &gt;&gt; x; std::int16_t y &#123; 0 &#125;; // y is 16 bits, holds from -32768 to 32767 std::cout &lt;&lt; \"Enter another number between -32768 and 32767: \"; std::cin &gt;&gt; y; std::cout &lt;&lt; \"The sum is: \" &lt;&lt; x + y &lt;&lt; '\\n'; return 0;&#125;/*å¦‚æœè¾“å…¥çš„æ•°è¿‡å¤§ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿï¼ˆæ¯”å¦‚è¾“å…¥40000ï¼‰*/Enter a number between -32768 and 32767: 40000Enter another number between -32768 and 32767: The sum is: 32767åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œstd::cinä¼šç«‹å³è¿›å…¥â€œæ•…éšœæ¨¡å¼â€ï¼Œä½†ä¹Ÿä¼šå°†æœ€æ¥è¿‘çš„èŒƒå›´å†…å€¼èµ‹ç»™å˜é‡ã€‚å› æ­¤ï¼Œxçš„èµ‹å€¼ä¸º32767ã€‚è·³è¿‡å…¶ä»–è¾“å…¥ï¼Œè®©yçš„åˆå§‹å€¼ä¸º0ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸æå–å¤±è´¥ç›¸åŒçš„æ–¹æ³•æ¥å¤„ç†è¿™ç§é”™è¯¯ã€‚æ³¨åœ¨c++ 11ä¹‹å‰ï¼Œå¤±è´¥çš„æå–ä¸ä¼šä¿®æ”¹è¢«æå–åˆ°çš„å˜é‡ã€‚è¿™æ„å‘³ç€å¦‚æœä¸€ä¸ªå˜é‡æ²¡æœ‰åˆå§‹åŒ–ï¼Œé‚£ä¹ˆåœ¨å¤±è´¥çš„æå–æƒ…å†µä¸‹ï¼Œå®ƒå°†ä¿æŒæœªåˆå§‹åŒ–çŠ¶æ€ã€‚(æ¯”å¦‚yï¼Œè¿™é‡Œå®ƒä¼šä¿æŒåˆå§‹å€¼0)ä»c++ 11å¼€å§‹ï¼Œè¶…è¿‡èŒƒå›´(out-of-range)æ—¶å¤±è´¥çš„æå–å°†å¯¼è‡´å˜é‡è¢«è®¾ç½®ä¸ºæœ€æ¥è¿‘çš„èŒƒå›´å†…å€¼ã€‚åœ¨æˆ‘çš„vs2013ä¸­ï¼Œæµ‹è¯•ä¸Šé¢çš„ä»£ç ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ï¼šè¿™è¯´æ˜æˆ‘çš„â€œæ•…éšœæ¨¡å¼â€ä¸‹ï¼Œå˜é‡å°†ä¼šè¢«åˆå§‹åŒ–ä¸º0ä¿®æ”¹åçš„ä¾‹å­ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273#include &lt;iostream&gt; double getDouble()&#123; while (true) // Loop until user enters a valid input &#123; std::cout &lt;&lt; \"Enter a double value: \"; double x; std::cin &gt;&gt; x; // Check for failed extraction if (std::cin.fail()) // has a previous extraction failed? &#123; // yep, so let's handle the failure std::cin.clear(); // put us back in 'normal' operation mode std::cin.ignore(32767,'\\n'); // and remove the bad input std::cout &lt;&lt; \"Oops, that input is invalid. Please try again.\\n\"; &#125; else &#123; std::cin.ignore(32767,'\\n'); // remove any extraneous input // the user can't enter a meaningless double value, so we don't need to worry about validating that return x; &#125; &#125;&#125; char getOperator()&#123; while (true) // Loop until user enters a valid input &#123; std::cout &lt;&lt; \"Enter one of the following: +, -, *, or /: \"; char op; std::cin &gt;&gt; op; // Chars can accept any single input character, so no need to check for an invalid extraction here std::cin.ignore(32767,'\\n'); // remove any extraneous input // Check whether the user entered meaningful input if (op == '+' || op == '-' || op == '*' || op == '/') return op; // return it to the caller else // otherwise tell the user what went wrong std::cout &lt;&lt; \"Oops, that input is invalid. Please try again.\\n\"; &#125; // and try again&#125; void printResult(double x, char op, double y)&#123; if (op == '+') std::cout &lt;&lt; x &lt;&lt; \" + \" &lt;&lt; y &lt;&lt; \" is \" &lt;&lt; x + y &lt;&lt; '\\n'; else if (op == '-') std::cout &lt;&lt; x &lt;&lt; \" - \" &lt;&lt; y &lt;&lt; \" is \" &lt;&lt; x - y &lt;&lt; '\\n'; else if (op == '*') std::cout &lt;&lt; x &lt;&lt; \" * \" &lt;&lt; y &lt;&lt; \" is \" &lt;&lt; x * y &lt;&lt; '\\n'; else if (op == '/') std::cout &lt;&lt; x &lt;&lt; \" / \" &lt;&lt; y &lt;&lt; \" is \" &lt;&lt; x / y &lt;&lt; '\\n'; else // Being robust means handling unexpected parameters as well, even though getOperator() guarantees op is valid in this particular program std::cout &lt;&lt; \"Something went wrong: printResult() got an invalid operator.\"; &#125; int main()&#123; double x = getDouble(); char op = getOperator(); double y = getDouble(); printResult(x, op, y); return 0;&#125;æ€»ç»“åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œè¦è€ƒè™‘ç”¨æˆ·å¦‚ä½•è¯¯ç”¨ç¨‹åºï¼Œç‰¹åˆ«æ˜¯åœ¨æ–‡æœ¬è¾“å…¥æ–¹é¢ã€‚å¯¹äºæ–‡æœ¬è¾“å…¥çš„æ¯ä¸ªç‚¹ï¼Œè¯·è€ƒè™‘:æå–æ˜¯å¦å¤±è´¥ï¼Ÿç”¨æˆ·æ˜¯å¦ä¼šè¾“å…¥æ¯”é¢„æœŸæ›´å¤šçš„æ–‡æœ¬ï¼Ÿç”¨æˆ·æ˜¯å¦ä¼šè¾“å…¥æ²¡æœ‰æ„ä¹‰çš„æ–‡æœ¬ï¼Ÿç”¨æˆ·æ˜¯å¦ä¼šè¾“å‡ºæº¢å‡ºçš„å€¼ï¼Ÿæ‚¨å¯ä»¥ä½¿ç”¨ifè¯­å¥å’Œå¸ƒå°”é€»è¾‘æ¥æµ‹è¯•è¾“å…¥æ˜¯å¦æ˜¯é¢„æœŸçš„å’Œæœ‰æ„ä¹‰çš„ã€‚ä¿®å¤æå–å¤±è´¥&amp;æº¢å‡º123456if (std::cin.fail()) // has a previous extraction failed or overflowed?&#123; // yep, so let's handle the failure std::cin.clear(); // put us back in 'normal' operation mode std::cin.ignore(32767,'\\n'); // and remove the bad input&#125;æ¸…é™¤é¢å¤–çš„è¾“å…¥1std::cin.ignore(32767,'\\n'); // and remove the bad inputæœ€åï¼Œå¦‚æœåŸå§‹è¾“å…¥æ— æ•ˆï¼Œä½¿ç”¨å¾ªç¯è¦æ±‚ç”¨æˆ·é‡æ–°è¾“å…¥è¾“å…¥ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"C&C++/------","slug":"C&C++/------","date":"2020-04-26T08:36:13.397Z","updated":"2020-05-26T15:19:14.956Z","comments":true,"path":"archives/3f9a28c4.html","link":"","permalink":"https://longlongqin.github.io/archives/3f9a28c4.html","excerpt":"","text":"åŸæ–‡ï¼š","categories":[],"tags":[]},{"title":"LearnCpp chapter8","slug":"C&C++/LearnCpp-chapter8","date":"2020-04-19T08:54:17.000Z","updated":"2020-05-07T14:45:15.421Z","comments":true,"path":"archives/c812a74c.html","link":"","permalink":"https://longlongqin.github.io/archives/c812a74c.html","excerpt":"LearnCpp-chapter8https://www.learncpp.comæœªå®Œå¾…ç»­~~","text":"LearnCpp-chapter8https://www.learncpp.comæœªå®Œå¾…ç»­~~8.1 ä»‹ç»é¢å‘å¯¹è±¡ç¼–ç¨‹Object-oriented programming (OOP)åœ¨ 1.3 â€“ Introduction to variablesä¸­ï¼Œæˆ‘ä»¬åœ¨c++ä¸­å°†ä¸€ä¸ªå¯¹è±¡å®šä¹‰ä¸ºâ€œä¸€æ®µå¯ç”¨æ¥å­˜å‚¨å€¼çš„å†…å­˜â€ã€‚å…·æœ‰åç§°çš„å¯¹è±¡ç§°ä¸ºå˜é‡ã€‚åœ¨ä¼ ç»Ÿç¼–ç¨‹ä¸­(æˆ‘ä»¬åœ¨æ­¤ä¹‹å‰ä¸€ç›´åœ¨åšçš„å·¥ä½œ)ï¼Œç¨‹åºåŸºæœ¬ä¸Šæ˜¯è®¡ç®—æœºçš„æŒ‡ä»¤åˆ—è¡¨ï¼Œè¿™äº›æŒ‡ä»¤å®šä¹‰æ•°æ®(é€šè¿‡å¯¹è±¡)ï¼Œç„¶åå¤„ç†æ•°æ®(é€šè¿‡è¯­å¥å’Œå‡½æ•°)ã€‚æ•°æ®å’Œå¤„ç†è¯¥æ•°æ®çš„å‡½æ•°æ˜¯ç‹¬ç«‹çš„å®ä½“ï¼Œå®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ä»¥äº§ç”Ÿæ‰€éœ€çš„ç»“æœã€‚ç”±äºè¿™ç§åˆ†ç¦»ï¼Œä¼ ç»Ÿçš„ç¼–ç¨‹é€šå¸¸ä¸èƒ½æä¾›å¯¹ç°å®çš„éå¸¸ç›´è§‚çš„è¡¨ç¤ºã€‚ç”±ç¨‹åºå‘˜ä»¥é€‚å½“çš„æ–¹å¼ç®¡ç†å’Œè¿æ¥ å±æ€§(å˜é‡)å’Œè¡Œä¸º(å‡½æ•°)ï¼Œè¿™å°±è‡´ä½¿ä»£ç å˜æˆè¿™æ ·ï¼š1driveTo(you, work);ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Ÿå’Œè®¸å¤šäº‹ç‰©ä¸€æ ·ï¼Œå®ƒå¯èƒ½æœ€å®¹æ˜“é€šè¿‡ç±»æ¯”æ¥ç†è§£ã€‚çœ‹çœ‹ä½ çš„å‘¨å›´â€“ä½ çœ‹åˆ°çš„æ¯ä¸€ä¸ªåœ°æ–¹éƒ½æ˜¯objectï¼šä¹¦ç±ã€å»ºç­‘ç‰©ã€é£Ÿç‰©ï¼Œç”šè‡³ä½ è‡ªå·±ã€‚objectæœ‰ä¸¤ä¸ªä¸»è¦çš„éƒ¨åˆ†ï¼šï¼ˆpropertiesï¼‰ç›¸å…³å±æ€§çš„åˆ—è¡¨ï¼ˆe.g. weight, color, size, solidity, shape, etcâ€¦ï¼‰ï¼ˆbehaviorï¼‰è¿™äº›å±æ€§èƒ½è¡¨ç°å‡ºçš„ä¸€äº›è¡Œä¸ºï¼ˆe.g. being opened, making something else hot, etcâ€¦ï¼‰è¿™äº›å±æ€§å’Œè¡Œä¸ºæ˜¯ä¸å¯åˆ†å‰²çš„ã€‚Object-oriented programming (OOP) ä¸ºæˆ‘ä»¬æä¾›äº†åˆ›å»ºå¯¹è±¡çš„èƒ½åŠ›ï¼Œè¿™äº›å¯¹è±¡å°†å±æ€§å’Œè¡Œä¸ºç»‘å®šåˆ°ä¸€ä¸ªè‡ªåŒ…å«çš„ã€å¯é‡ç”¨çš„åŒ…ä¸­ã€‚è¿™å¯¼è‡´ä»£ç çœ‹èµ·æ¥æ›´åƒè¿™æ ·:1you.driveto(work);è¿™ä¸ä»…è¯»èµ·æ¥æ›´æ¸…æ™°ï¼Œè¿˜ä½¿ä¸»è¯­(æ‚¨)å’Œè¢«è°ƒç”¨çš„è¡Œä¸º(åœ¨æŸå¤„é©¾é©¶)æ›´æ¸…æ™°ã€‚ä¸æ˜¯ä¸“æ³¨äºç¼–å†™å‡½æ•°ï¼Œè€Œæ˜¯ä¸“æ³¨äºå®šä¹‰å…·æœ‰å®šä¹‰è‰¯å¥½çš„è¡Œä¸ºé›†çš„å¯¹è±¡ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªèŒƒä¾‹è¢«ç§°ä¸ºâ€œé¢å‘å¯¹è±¡â€ã€‚ä¼˜ç‚¹è¿™å…è®¸ä»¥æ›´æ¨¡å—åŒ–çš„æ–¹å¼ç¼–å†™ç¨‹åºï¼Œè¿™ä½¿å®ƒä»¬æ›´å®¹æ˜“ç¼–å†™å’Œç†è§£ï¼Œè¿˜æä¾›äº†æ›´é«˜ç¨‹åº¦çš„ä»£ç å¯é‡ç”¨æ€§ã€‚è¿™äº›å¯¹è±¡è¿˜æä¾›äº†ä¸€ç§ é€šè¿‡å…è®¸æˆ‘ä»¬å®šä¹‰å¦‚ä½•ä¸å¯¹è±¡äº¤äº’ä»¥åŠå¦‚ä½•ä¸å…¶ä»–å¯¹è±¡äº¤äº’ï¼Œæ¥æ›´ç›´è§‚çš„æ–¹å¼æ¥å¤„ç†æ•°æ®ã€‚è¯·æ³¨æ„ï¼ŒOOPå¹¶æ²¡æœ‰å–ä»£ä¼ ç»Ÿçš„ç¼–ç¨‹æ–¹æ³•ã€‚ç›¸åï¼Œå®ƒåœ¨ç¼–ç¨‹å·¥å…·å¸¦ä¸­ä¸ºæ‚¨æä¾›äº†é¢å¤–çš„å·¥å…·ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶ç®¡ç†å¤æ‚æ€§ã€‚objectè¯·æ³¨æ„ï¼Œæœ¯è¯­â€œobjectâ€è¢«ç¨å¾®é‡è½½äº†ä¸€äº›ï¼Œè¿™å¯¼è‡´äº†ä¸€äº›æ··æ·†ã€‚åœ¨ä¼ ç»Ÿç¼–ç¨‹ä¸­ï¼Œå¯¹è±¡æ˜¯ç”¨æ¥å­˜å‚¨å€¼çš„ä¸€å—å†…å­˜ã€‚åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œâ€œå¯¹è±¡â€æ„å‘³ç€å®ƒåŒ…å« ä¼ ç»Ÿç¼–ç¨‹æ„ä¹‰ä¸Šçš„å¯¹è±¡ï¼Œåˆæ˜¯å±æ€§å’Œè¡Œä¸ºçš„ç»„åˆã€‚ä»ç°åœ¨å¼€å§‹ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨â€œå¯¹è±¡â€è¿™ä¸ªæœ¯è¯­æ—¶ï¼Œæˆ‘ä»¬å°†åœ¨é¢å‘å¯¹è±¡çš„æ„ä¹‰ä¸Šå¼•ç”¨â€œå¯¹è±¡â€ã€‚8.2 ç±»&amp;ç±»æˆå‘˜è™½ç„¶C++æä¾›ä¸€äº›åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼ˆe.g. char, int, long, float, double, etcâ€¦ï¼‰ï¼Œå®ƒä»¬å¯ä»¥è§£å†³ä¸€äº›ç®€å•çš„é—®é¢˜ã€‚ä½†æ˜¯åœ¨è§£å†³å¤æ‚é—®é¢˜çš„æ—¶å€™è¿™äº›åŸºæœ¬æ•°æ®ç±»å‹å°±ä¸å¤Ÿç”¨äº†ã€‚C++ä¹Ÿæä¾›ï¼šå…è®¸ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼Œå¦‚ä¹‹å‰å­¦çš„ï¼š enumerated typesã€structsåœ¨C++ï¼Œä¸­classä¸ structæœ¬è´¨ä¸Šç›¸åŒã€‚å¦‚ä¸‹é¢çš„ä¸¤ä¸ªæ˜¯ç­‰ä»·çš„ï¼š1234567891011121314struct DateStruct&#123; int year; int month; int day;&#125;; class DateClass&#123;public: int m_year; int m_month; int m_day;&#125;;æ³¨æ„ï¼ŒæƒŸä¸€æ˜¾è‘—çš„åŒºåˆ«æ˜¯public:å…³é”®å­—åœ¨ç±»ä¸­ç±»(å’Œç»“æ„ä½“)å®šä¹‰å°±åƒä¸€ä¸ªè“å›¾â€”â€”å®ƒä»¬æè¿°ç»“æœå¯¹è±¡çš„æ ·å­ï¼Œä½†æ˜¯å®ƒä»¬å®é™…ä¸Šå¹¶ä¸åˆ›å»ºå¯¹è±¡ã€‚è¦å®é™…åˆ›å»ºç±»çš„å¯¹è±¡ï¼Œå¿…é¡»å®šä¹‰è¯¥ç±»ç±»å‹çš„å˜é‡:1DateClass today &#123; 2020, 10, 14 &#125;; // declare a variable of class DateClassæˆå‘˜å‡½æ•°é™¤äº†ä¿å­˜æ•°æ®ï¼Œç±»(å’Œç»“æ„)è¿˜å¯ä»¥åŒ…å«å‡½æ•°! åœ¨ç±»å†…éƒ¨å®šä¹‰çš„å‡½æ•°ç§°ä¸ºæˆå‘˜å‡½æ•° (æœ‰æ—¶ä¹Ÿç§°ä¸ºæ–¹æ³•)ã€‚æˆå‘˜å‡½æ•°&amp;éæˆå‘˜å‡½æ•°egï¼š12345678910111213141516//éæˆå‘˜å‡½æ•°ï¼šå‡½æ•°ä¸èƒ½è°ƒç”¨å®šä¹‰åœ¨å®ƒä¸‹é¢çš„å‡½æ•°(æ²¡æœ‰å‰å‘å£°æ˜):void x()&#123; // You can't call y() from here unless the compiler has already seen a forward declaration for y()&#125;void y()&#123; &#125;//æˆå‘˜å‡½æ•°ï¼šæˆå‘˜å‡½æ•°æ²¡æœ‰è¿™ä¸ªé™åˆ¶class foo&#123;public: void x() &#123;y()&#125; ;// okay to call y() here, even though y() isn't defined until later in this class void y() &#123;&#125;;&#125;æˆå‘˜ç±»å‹é™¤äº†æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°å¤–ï¼Œç±»è¿˜å¯ä»¥å…·æœ‰æˆå‘˜ç±»å‹æˆ–åµŒå¥—ç±»å‹(åŒ…æ‹¬ç±»å‹åˆ«å)ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªè®¡ç®—å™¨ï¼Œå¦‚æœéœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿåœ°æ›´æ”¹å®ƒæ‰€ä½¿ç”¨çš„æ•°å­—ç±»å‹ã€‚1234567891011121314151617181920212223242526#include &lt;iostream&gt;#include &lt;vertor&gt;class Calculator&#123;public: using number_t = int; //è¿™æ˜¯ä¸€ä¸ªåµŒå¥—ç±»å‹çš„åˆ«å std::vector&lt;number_t&gt; m_result&#123;&#125;; number_t add (number_t a, number_t b) &#123; //autoçš„åŸç†å°±æ˜¯æ ¹æ®åé¢çš„å€¼ï¼Œæ¥è‡ªå·±æ¨æµ‹å‰é¢çš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚ auto result &#123;a+b&#125;; m_result.push_back (result); return result; &#125;&#125;;int main()&#123; Calculator calculator &#123;&#125;; std::cout &lt;&lt; calculator.add(3, 4) &lt;&lt; '\\n'; //7 return 0;&#125;åœ¨è¿™æ ·çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œç±»åå®é™…ä¸Šå……å½“åµŒå¥—ç±»å‹çš„ï¼Œå‘½åç©ºé—´ã€‚åœ¨ç±»å†…éƒ¨ï¼Œæˆ‘ä»¬åªéœ€è¦å¼•ç”¨number_tã€‚åœ¨ç±»ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Calculator::number_tè®¿é—®ç±»å‹ã€‚å…³äºC++ä¸­çš„structçš„è¯´æ˜åœ¨Cè¯­è¨€ä¸­ï¼Œç»“æ„ä½“åªèƒ½ä¿å­˜æ•°æ®ï¼Œæ²¡æœ‰æˆå‘˜å‡½æ•°ã€‚ä½†æ˜¯å’‹C++ä¸­ï¼Œä¸¤è€…éƒ½å¯ä»¥æœ‰ã€‚ç»è¿‡è€ƒè™‘ï¼Œä»–å†³å®šä»–ä»¬åº”è¯¥æœ‰ä¸€ä¸ªç»Ÿä¸€çš„è§„åˆ™é›†ã€‚å› æ­¤ï¼Œè™½ç„¶æˆ‘ä»¬ä½¿ç”¨classå…³é”®å­—ç¼–å†™äº†ä¸Šè¿°ç¨‹åºï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨structå…³é”®å­—ã€‚æ‰€ä»¥ï¼Œå»ºè®®ï¼šå¯¹åªåŒ…å«æ•°æ®çš„ç»“æ„ä½¿ç”¨structå…³é”®å­—ã€‚å¯¹åŒæ—¶å…·æœ‰æ•°æ®å’Œå‡½æ•°çš„å¯¹è±¡ä½¿ç”¨classå…³é”®å­—ã€‚8.3 è®¿é—®è¯´æ˜ç¬¦ piblicVS privatepublicï¼šclasså’Œstructçš„public member å¯ä»¥åœ¨ å®ƒä»¬çš„å¤–éƒ¨è®¿é—®ï¼›ç”±å…³é”®å­—structæ„æˆçš„æ•°æ®ç±»å‹ï¼Œé»˜è®¤æ˜¯publicã€‚privateï¼šåªèƒ½è¢«ç±»çš„å…¶ä»–æˆå‘˜è®¿é—®ï¼›ç”±classæ„æˆçš„æ•°æ®ç±»å‹ï¼Œé»˜è®¤æ˜¯privateã€‚é€šå¸¸ï¼Œæˆå‘˜å˜é‡é€šå¸¸æ˜¯privateçš„ï¼Œè€Œæˆå‘˜å‡½æ•°é€šå¸¸æ˜¯publicçš„ã€‚egï¼š123456789101112131415161718192021222324252627282930313233struct DateStruct // members are public by default&#123; int month; // public by default, can be accessed by anyone int day; // public by default, can be accessed by anyone int year; // public by default, can be accessed by anyone&#125;;int main()&#123; DateStruct date; date.month = 10; date.day = 14; date.year= 2020; return 0;&#125;------------------------------------class DateClass // members are private by default&#123; int m_month; // private by default, can only be accessed by other members int m_day; // private by default, can only be accessed by other members int m_year; // private by default, can only be accessed by other members&#125;; int main()&#123; DateClass date; date.m_month = 10; // error date.m_day = 14; // error date.m_year = 2020; // error return 0;&#125;ç±»çš„public memberé€šå¸¸è¢«çœ‹ä½œ public interfaceï¼ˆå…¬å…±æ¥å£ï¼‰ï¼šå› ä¸ºåªæœ‰public mebmberæ‰å¯ä»¥åœ¨ç±»å¤–éƒ¨è¢«è®¿é—®ï¼Œä½†æ˜¯public memberå¯ä»¥ç›´æ¥è®¿é—®ç±»ä¸­çš„privateå’Œprotectedçš„æˆå‘˜ã€‚æ‰€ä»¥åˆ©ç”¨public member å¯ä»¥é—´æ¥è®¿é—®ç±»çš„privateå’Œprotectedçš„æˆå‘˜ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"LearnCpp chapterL","slug":"C&C++/LearnCpp-chapterL","date":"2020-04-18T02:13:00.000Z","updated":"2020-04-23T08:14:32.228Z","comments":true,"path":"archives/9f7a1269.html","link":"","permalink":"https://longlongqin.github.io/archives/9f7a1269.html","excerpt":"LearnCpp-chapterLhttps://www.learncpp.comæœªå®Œå¾…ç»­~~","text":"LearnCpp-chapterLhttps://www.learncpp.comæœªå®Œå¾…ç»­~~L5.1 æ§åˆ¶æµå½“ç¨‹åºè¿è¡Œæ—¶ï¼ŒCPUå¼€å§‹ä»mian()å‡½æ•°æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œå®ƒé‡Œé¢çš„è¯­å¥ï¼Œæœ€åç»“æŸäºmain()å‡½æ•°ç»“å°¾ã€‚CPUæ‰§è¡Œè¯­å¥çš„é¡ºåºå«åšï¼šç¨‹åºæ‰§è¡Œè·¯å¾„(execution path)ã€‚åœæ­¢(halt)ä½†ç¨‹åºè¿è¡Œå¹¶ä¸æ€»æ˜¯å°†main()å‡½æ•°ä¸­çš„è¯­å¥å…¨éƒ¨æ‰§è¡Œã€‚å®ƒå¯ä»¥è¢«åœæ­¢ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¤´æ–‡ä»¶cstdlibä¸­çš„std::exit()å‡½æ•°ï¼Œæ¥ç»ˆæ­¢ç¨‹åºã€‚exitå‡½æ•°æ¥å—ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œè¯¥å‚æ•°ä½œä¸ºstd::exitä»£ç è¿”å›ç»™æ“ä½œç³»ç»Ÿï¼Œè¿™ä¸main()çš„è¿”å›å€¼éå¸¸ç›¸ä¼¼ã€‚eg:12345678910111213141516171819#include &lt;cstdlib&gt; //for std::exit()#include &lt;iostream&gt;void cleanup()&#123; //code here to do any kind of cleanup required&#125;int main()&#123; std::cout&lt;&lt; 1 &lt;&lt; '\\n'; cleanup(); std::exit(0); //ç¨‹åºåœ¨æ­¤ç»“æŸï¼Œå¹¶ä¸”å‘æ“ä½œç³»ç»Ÿè¿”å›0 //æ‰€ä»¥ä¸‹é¢çš„è¯­å¥å°†ä¸ä¼šæ‰§è¡Œ std::cout&lt;&lt;2&lt;&lt;'\\n'; return 0;&#125;æ³¨æ„ï¼Œstd::exit()æ— è®ºä»å“ªä¸ªå‡½æ•°è°ƒç”¨(ç”šè‡³æ˜¯mainä»¥å¤–çš„å‡½æ•°)éƒ½å¯ä»¥å·¥ä½œã€‚è¿˜è¦æ³¨æ„ï¼Œstd::exit()ä½¿ç”¨æœ€å°‘çš„æ¸…ç†ç«‹å³ç»ˆæ­¢ç¨‹åºã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨std::exit()ä¹‹å‰ï¼Œæ‚¨åº”è¯¥è€ƒè™‘æ˜¯å¦éœ€è¦è¿›è¡Œä»»ä½•æ‰‹åŠ¨æ¸…ç†(ä¾‹å¦‚å°†ç”¨æˆ·çš„æ¸¸æˆä¿å­˜åˆ°ç£ç›˜)ã€‚é€šå¸¸ï¼Œstd::exit()ç”¨äºåœ¨å‘ç”Ÿç¾éš¾æ€§çš„ã€ä¸å¯æ¢å¤çš„é”™è¯¯æ—¶ç«‹å³ç»ˆæ­¢ç¨‹åºã€‚L5.1 ifè¯­å¥æœ€åŸºæœ¬çš„æ¡ä»¶åˆ†æ”¯å°±æ˜¯ if è¯­å¥ã€‚éšå¼çš„å—æˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œéšå¼çš„å—ä¸­çš„ä¸€äº›é™·é˜±ï¼Œé™·é˜±1ï¼š1234567891011121314#include &lt;iostream&gt; int main()&#123; if (true) int x = 5; else int x = 6; std::cout &lt;&lt; x; return 0;&#125;//å› ä¸ºä¸Šé¢çš„xæ˜¯åœ¨ä¸€ä¸ªå—ä¸­è¢«å®šä¹‰çš„(è¿™ä¸ªå—æ²¡æœ‰æ˜¾å¼çš„å†™å‡ºæ¥ï¼Œä½†å®ƒç¡®å®æ˜¯ä¸€ä¸ªå—)ä¸Šé¢è¿™ä¸ªç¨‹åºä¼šå‡ºé”™ï¼ŒåŸå› ï¼šï¼ˆè¿™å°†æ— æ³•ç¼–è¯‘ï¼Œç¼–è¯‘å™¨å°†ç”Ÿæˆæ ‡è¯†ç¬¦xæœªå®šä¹‰çš„é”™è¯¯ï¼‰123456789101112131415161718//ä¸Šé¢çš„ç¨‹åºå’Œè¿™ä¸ªç¨‹åºç›¸ç­‰ã€‚è¿™ä¸ªç¨‹åºå°†å—æ˜¾å¼çš„è¡¨ç¤ºå‡ºæ¥äº†#include &lt;iostream&gt; int main()&#123; if (true) &#123; int x = 5; &#125; // x destroyed here else &#123; int x = 6; &#125; // x destroyed here std::cout &lt;&lt; x; // x isn't defined here return 0;&#125;é™·é˜±2ï¼šç¨‹åº1ï¼š123456789101112131415161718#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Enter a number: \"; int x; std::cin &gt;&gt; x; if (x &gt;= 10) &#123; if (x &lt;= 20) std::cout &lt;&lt; x &lt;&lt; \"is between 10 and 20\\n\"; &#125; else // attached to outer if statement std::cout &lt;&lt; x &lt;&lt; \"is less than 10\\n\"; return 0;&#125;ç¨‹åº2ï¼šï¼ˆå»æ‰å¤§æ‹¬å·ï¼‰123456789101112131415161718#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Enter a number: \"; int x; std::cin &gt;&gt; x; if (x &gt;= 10) //åˆ é™¤å¤§æ‹¬å· if (x &lt;= 20) std::cout &lt;&lt; x &lt;&lt; \"is between 10 and 20\\n\"; else // attached to outer if statement std::cout &lt;&lt; x &lt;&lt; \"is less than 10\\n\"; return 0;&#125;ç¨‹åº1å’Œ2æ˜¯å¦ä¸€æ ·å‘¢ï¼Ÿç­”ï¼šä¸ä¸€æ ·ã€‚ç¨‹åº1ä¸­çš„æœ€åçš„elseè¯­å¥æ˜¯ä¸ç¬¬ä¸€ä¸ªifè¯­å¥åŒ¹é…ï¼›ç¨‹åº2ä¸­çš„æœ€åçš„elseè¯­å¥æ˜¯ä¸å®ƒæœ€è¿‘çš„ifè¯­å¥åŒ¹é…ã€‚ifä¸­çš„åˆå§‹åŒ–è¯­å¥å¦‚æœéœ€è¦åœ¨Ifè¯­å¥ä¸­ä½¿ç”¨å˜é‡ï¼Œè€Œä¸æ˜¯åœ¨Ifè¯­å¥ä¹‹å¤–ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨æ¡ä»¶ä¹‹å‰ä½¿ç”¨initè¯­å¥(åœ¨C++17ä¸­æ·»åŠ çš„ï¼‰ã€‚1234567891011121314151617181920212223242526#include &lt;iostream&gt;#include &lt;string&gt;int main()&#123; std::string firstname&#123;&#125;; std::string lastname&#123;&#125;; std::cout &lt;&lt; \"First name: \"; std::cin &gt;&gt; firstName; std::cout &lt;&lt; \"Last name: \"; std::cin &gt;&gt; lastName; if(std::string fullname &#123;firsstname + ' ' + lastname&#125;; fullname.length()&gt;20) &#123; std::cout &lt;&lt; '\"'&lt;&lt;fullname &lt;&lt;'\\\" is to long \\n'; &#125; else &#123; std::cout &lt;&lt;\"your name is: \" &lt;&lt;fullname; &#125; return 0; &#125;å˜é‡fullnameåœ¨æ•´ä¸ªifè¯­å¥ä¸­æ˜¯å¯ä»¥è®¿é—®çš„ã€‚L5.2 switchè¯­å¥C++ ä¸­ switch è¯­å¥çš„è¯­æ³•ï¼š123456789101112switch(expression)&#123; case constant-expression : statement(s); break; // å¯é€‰çš„ case constant-expression : statement(s); break; // å¯é€‰çš„ // æ‚¨å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„ case è¯­å¥ default : // å¯é€‰çš„ statement(s);&#125;switch è¯­å¥å¿…é¡»éµå¾ªä¸‹é¢çš„è§„åˆ™ï¼šswitch è¯­å¥ä¸­çš„ expression å¿…é¡»æ˜¯ä¸€ä¸ªintegral type(æ•´æ•°ç±»å‹)æˆ–æµ®ç‚¹ç±»å‹ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ª class ç±»å‹ï¼Œå…¶ä¸­ class æœ‰ä¸€ä¸ªå•ä¸€çš„è½¬æ¢å‡½æ•°å°†å…¶è½¬æ¢ä¸ºæ•´å‹æˆ–æšä¸¾ç±»å‹ã€‚æ•´æ•°ç±»å‹æœ‰ï¼šchar, short, int, long, long long, or enumæ³¨æ„ï¼Œåœ¨C/C++ä¸­ï¼Œcharæ˜¯å±äºæ•´æ•°ç±»å‹çš„ã€‚åœ¨ä¸€ä¸ª switch ä¸­å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„ case è¯­å¥ã€‚æ¯ä¸ª case åè·Ÿä¸€ä¸ªè¦æ¯”è¾ƒçš„å€¼å’Œä¸€ä¸ªå†’å·ã€‚case çš„ constant-expression å¿…é¡»ä¸ switch ä¸­çš„å˜é‡å…·æœ‰ç›¸åŒçš„æ•°æ®ç±»å‹ï¼Œä¸”å¿…é¡»æ˜¯ä¸€ä¸ªå¸¸é‡æˆ–å­—é¢é‡ã€‚å½“è¢«æµ‹è¯•çš„å˜é‡ç­‰äº case ä¸­çš„å¸¸é‡æ—¶ï¼Œcase åè·Ÿçš„è¯­å¥å°†è¢«æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ° break è¯­å¥ä¸ºæ­¢ã€‚å½“é‡åˆ° break è¯­å¥æ—¶ï¼Œswitch ç»ˆæ­¢ï¼Œæ§åˆ¶æµå°†è·³è½¬åˆ° switch è¯­å¥åçš„ä¸‹ä¸€è¡Œã€‚ä¸æ˜¯æ¯ä¸€ä¸ª case éƒ½éœ€è¦åŒ…å« breakã€‚å¦‚æœ case è¯­å¥ä¸åŒ…å« breakï¼Œæ§åˆ¶æµå°†ä¼š ç»§ç»­ åç»­çš„ caseï¼Œç›´åˆ°é‡åˆ° break ä¸ºæ­¢ã€‚ä¸€ä¸ª switch è¯­å¥å¯ä»¥æœ‰ä¸€ä¸ªå¯é€‰çš„ default caseï¼Œå‡ºç°åœ¨ switch çš„ç»“å°¾ã€‚default case å¯ç”¨äºåœ¨ä¸Šé¢æ‰€æœ‰ case éƒ½ä¸ä¸ºçœŸæ—¶æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚default case ä¸­çš„ break è¯­å¥ä¸æ˜¯å¿…éœ€çš„ã€‚breakåœ¨caseè¯­å¥ä¸­æœ‰ã€æ—  break çš„æ•ˆæœåœ¨ switch è¯­å¥ä¸­ï¼Œæ¯ä¸ª case è¯­å¥çš„ç»“å°¾ä¸è¦å¿˜è®°æ·»åŠ  break è¯­å¥ï¼Œå¦åˆ™å°†å¯¼è‡´å¤šä¸ªåˆ†æ”¯é‡å ã€‚å½“ç„¶ï¼Œé™¤éæœ‰æ„ä½¿å¤šä¸ªåˆ†æ”¯é‡å ï¼Œè¿™æ ·å¯ä»¥å…å» break è¯­å¥ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®é™…ç¤ºä¾‹ã€‚1234567891011121314151617181920212223242526272829303132333435363738394041424344//æœ‰breakswitch (2)&#123; case 1: // Does not match std::cout &lt;&lt; 1 &lt;&lt; '\\n'; // skipped break; case 2: // Match! std::cout &lt;&lt; 2 &lt;&lt; '\\n'; // Execution begins here break; case 3: std::cout &lt;&lt; 3 &lt;&lt; '\\n'; // This is also executed break; case 4: std::cout &lt;&lt; 4 &lt;&lt; '\\n'; // This is also executed break; default: std::cout &lt;&lt; 5 &lt;&lt; '\\n'; // This is also executed break;&#125;/**ç»“æœ******/2 //æ— breakswitch (2)&#123; case 1: // Does not match std::cout &lt;&lt; 1 &lt;&lt; '\\n'; // skipped case 2: // Match! std::cout &lt;&lt; 2 &lt;&lt; '\\n'; // Execution begins here case 3: std::cout &lt;&lt; 3 &lt;&lt; '\\n'; // This is also executed case 4: std::cout &lt;&lt; 4 &lt;&lt; '\\n'; // This is also executed default: std::cout &lt;&lt; 5 &lt;&lt; '\\n'; // This is also executed&#125;/******ç»“æœ***********/2345caseè¯­å¥ä¸­å˜é‡çš„å£°æ˜&amp;å®šä¹‰ä½ å¯ä»¥åœ¨switchè¯­å¥ä¸­å£°æ˜å˜é‡(ä½†ä¸èƒ½å¤Ÿåˆå§‹åŒ–)ã€‚åœ¨caseä¹‹å‰æˆ–ä¹‹åå‡å¯ï¼š12345678910111213141516171819202122switch (1)&#123; int a; // okay, declaration is allowed before the case labels int b = 5; // illegal, initialization is not allowed before the case labels case 1: int y; // okay, declaration is allowed within a case y = 4; // okay, è¿™ä¸ªæ˜¯èµ‹å€¼(ä¸æ˜¯åˆå§‹åŒ–) break; case 2: y = 5; // okay, y was declared above, so we can use it here too break; case 3: int z = 4; // illegal, ä¸èƒ½å†è¿™é‡Œé¢å¯¹å˜é‡åˆå§‹åŒ– break; default: std::cout &lt;&lt; \"default case\" &lt;&lt; std::endl; break;&#125;å› ä¸ºåœ¨switchè¯­å¥ä¸­ï¼Œä¸å­˜åœ¨éšå¼çš„å—ã€‚æ‰€ä»¥ï¼Œåœ¨switchè¯­å¥å†…ï¼Œæ‰€æœ‰è¯­å¥çš„èŒƒå›´éƒ½ä¸€æ ·(å­˜åœ¨äºswitchçš„å†…éƒ¨)ã€‚æ‰€ä»¥ï¼Œåœ¨case 1ï¼šå£°æ˜çš„å˜é‡yï¼Œå¯ä»¥åœ¨case 2ï¼šä¸­è¢«è®¿é—®ä½†æ˜¯ï¼Œä¸å…è®¸ç›´æ¥åœ¨caseæ ‡ç­¾ä¸‹é¢åˆå§‹åŒ–å˜é‡ï¼Œè¿™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚è¿™æ˜¯å› ä¸ºåˆå§‹åŒ–å˜é‡éœ€è¦æ‰§è¡Œï¼ˆå£°æ˜è¯­å¥ä¸ä¼šæ‰§è¡Œï¼‰ï¼Œè€ŒåŒ…å«åˆå§‹åŒ–çš„caseè¯­å¥å¯èƒ½ä¸ä¼šæ‰§è¡Œ!ä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨caseå—ä¸­ï¼Œåˆå§‹åŒ–å˜é‡ï¼š123456789101112switch (1)&#123; case 1: &#123; // note addition of block here int x = 4; // okay, variables can be initialized inside a block inside a case std::cout &lt;&lt; x; break; &#125; default: std::cout &lt;&lt; \"default case\" &lt;&lt; std::endl; break;&#125;L5.4 goto è¯­å¥gotoè¯­å¥æ˜¯ä¸€ä¸ªæ§åˆ¶æµè¯­å¥ï¼Œå®ƒä½¿CPUè·³åˆ°ä»£ç ä¸­çš„å¦ä¸€ä¸ªä½ç½®ã€‚è¿™ä¸ªä½ç½®æ˜¯é€šè¿‡ä½¿ç”¨statement labelï¼ˆè¯­å¥æ ‡ç­¾ï¼‰æ¥æ ‡è¯†çš„ã€‚eg:12345678910111213141516#include &lt;iostream&gt;#include &lt;cmath&gt; // for sqrt() function int main()&#123; double x;tryAgain: // this is a statement label std::cout &lt;&lt; \"Enter a non-negative number\"; std::cin &gt;&gt; x; if (x &lt; 0.0) goto tryAgain; // this is the goto statement std::cout &lt;&lt; \"The sqrt of \" &lt;&lt; x &lt;&lt; \" is \" &lt;&lt; sqrt(x) &lt;&lt; std::endl; return 0;&#125;å¦‚æœç”¨æˆ·è¾“å…¥çš„æ•°æ˜¯è´Ÿæ•°ï¼Œé‚£å®ƒä¼šä¸€ç›´gotoåˆ°è¿™ä¸ªè¯­å¥æ ‡ç­¾ï¼Œç›´åˆ°ä½ è¾“å…¥ä¸€ä¸ªåˆæ ¼çš„éè´Ÿæ•°ã€‚é™·é˜±ï¼š12345678int main()&#123; goto skip; // invalid forward jump int x = 5;skip: x += 3; // what would this even evaluate to? return 0;&#125;æˆ‘ä»¬ä¸èƒ½è¿™æ ·ä½¿ç”¨ è¯­å¥æ ‡ç­¾ã€‚å› ä¸ºæˆ‘ä»¬è·³è½¬åˆ°æ ‡ç­¾è¯­å¥skipä¸­æ—¶ï¼Œç¨‹åºè¿˜æ²¡æ‰§è¡Œåˆ°int x = 5;è¿™ä¸ªè¯­å¥ã€‚æ‰€ä»¥ï¼Œä¼šæŠ¥é”™ï¼šå¦‚ä½•æ”¹æ­£ï¼šæˆ‘ä»¬å¯ä»¥è®©int x=5;è¿™ä¸ªè¯­å¥æ”¾åœ¨ goto skip;è¯­å¥ä¹‹å‰ï¼Œå°±å¯ä»¥äº†ã€‚ä¸å»ºè®®ä½¿ç”¨gotoè¯­å¥gotoçš„ä¸»è¦é—®é¢˜æ˜¯ï¼Œå®ƒå…è®¸ç¨‹åºå‘˜ä»»æ„åœ°åœ¨æ‰§è¡Œç‚¹ä¸Šè·³è½¬ã€‚å› æ­¤å¾ˆéš¾ç†è§£è¿™ç§ä»£ç çš„é€»è¾‘ã€‚L5.7 forè¯­å¥123//å½¢å¼for (init-statement; condition-expression; end-expression) statementå¤šé‡å£°æ˜æœ‰æ—¶forå¾ªç¯éœ€è¦å¤šä¸ªå˜é‡ã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œç¨‹åºå‘˜å¯ä»¥ä½¿ç”¨é€—å·æ“ä½œç¬¦æ¥åˆ†é…(åœ¨init-statementä¸­)æˆ–æ›´æ”¹(åœ¨end-statementä¸­)å¤šä¸ªå˜é‡çš„å€¼:12345678910 int iii&#123;&#125;; int jjj&#123;&#125;; for (iii = 0, jjj = 9; iii &lt; 10; ++iii, --jjj) std::cout &lt;&lt; iii &lt;&lt; ' ' &lt;&lt; jjj &lt;&lt; '\\n';//æ›´å¸¸ç”¨çš„å†™æ³•æ˜¯ï¼šfor(int iii&#123;0&#125;, jjj&#123;9&#125;; iii&lt;10; ++iii, --jjj)&#123; std::cout &lt;&lt;iii &lt;&lt;' ' &lt;&lt;jjj &lt;&lt; '\\n';&#125;L5.8 break å’Œ continuebreakä¸returnbreakè¯­å¥æ˜¯ç»ˆæ­¢switchè¯­å¥ æˆ–è€… å…¶ä»–å¾ªç¯è¯­å¥ï¼Œç„¶åç»§ç»­æ‰§è¡Œè¯¥è¯­å¥ä¸‹é¢çš„è¯­å¥ã€‚returnè¯­å¥ç»ˆæ­¢å¾ªç¯æ‰€åœ¨çš„æ•´ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨è°ƒç”¨å‡½æ•°çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œã€‚è¯·çœ‹ä¸‹é¢ä¾‹å­ï¼š12345678910111213141516171819202122232425262728293031#include &lt;iostream&gt; int breakOrReturn()&#123; while (true) // infinite loop &#123; std::cout &lt;&lt; \"Enter 'b' to break or 'r' to return: \"; char ch; std::cin &gt;&gt; ch; if (ch == 'b') break; // execution will continue at the first statement beyond the loop if (ch == 'r') return 1; // return will cause the function to immediately return to the caller (in this case, main()) &#125; // breaking the loop causes execution to resume here std::cout &lt;&lt; \"We broke out of the loop\\n\"; return 0;&#125; int main()&#123; int returnValue&#123; breakOrReturn() &#125;; std::cout &lt;&lt; \"Function breakOrReturn returned \" &lt;&lt; returnValue &lt;&lt; '\\n'; return 0;&#125;continuecontinueè¯­å¥æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•æ¥è·³è½¬åˆ°å½“å‰è¿­ä»£ï¼ˆå½“å‰è¿™ä¸€å±‚å¾ªç¯ï¼‰çš„å¾ªç¯ä½“çš„æœ«å°¾ã€‚å½“æˆ‘ä»¬æƒ³è¦æå‰ç»ˆæ­¢å½“å‰çš„è¿­ä»£æ—¶ï¼Œè¿™æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚123456789101112for (int count&#123; 0 &#125;; count &lt; 20; ++count)&#123; // if the number is divisible by 4, skip this iteration if ((count % 4) == 0) continue; // jump to end of loop body // If the number is not divisible by 4, keep going std::cout &lt;&lt; count &lt;&lt; std::endl;------------------------------------------------------ // The continue statement jumps to here------------------------------------------------------&#125;","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"LearnCpp chapterP","slug":"C&C++/LearnCpp-chapterS","date":"2020-04-14T08:48:27.000Z","updated":"2020-04-28T06:53:21.411Z","comments":true,"path":"archives/67343d3.html","link":"","permalink":"https://longlongqin.github.io/archives/67343d3.html","excerpt":"LearnCpp chapterPhttps://www.learncpp.com","text":"LearnCpp chapterPhttps://www.learncpp.comS.4.4b ä»‹ç»std::stringå­—ç¬¦ä¸²åœ¨ç¨‹åºä¸­å¾ˆå¸¸è§ï¼Œå¤§éƒ¨åˆ†ç°ä»£ç¼–ç¨‹è¯­è¨€éƒ½åŒ…æ‹¬ä¸€ä¸ªå†…ç½®çš„å­—ç¬¦ä¸²æ•°æ®ç±»å‹ã€‚C++åŒ…æ‹¬ä¸€ä¸ªï¼Œä¸æ˜¯ä½œä¸ºæ ¸å¿ƒè¯­è¨€çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ä½œä¸ºæ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ã€‚std::stringå¦‚æœæƒ³åœ¨C++ä¸­ä½¿ç”¨stringç±»å‹ã€‚éœ€è¦åŠ å…¥å¤´æ–‡ä»¶#include &lt;string&gt;æ¥å£°æ˜std::stringã€‚åªè¦æœ‰è¿™ä¸ªå¤´æ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç¨‹åºä¸­ä½¿ç”¨stringç±»å‹ã€‚12#include &lt;string&gt;std::string myName;å°±åƒå…¶ä»–ç±»å‹ä¸€æ ·ï¼Œä½ å¯ä»¥ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„å˜é‡è¿›è¡Œåˆå§‹åŒ– æˆ–è€… å¤åˆ¶ï¼š12std::string myName&#123; \"Alex\" &#125;; // initialize myName with string literal \"Alex\"myName = \"John\"; // assign variable myName the string literal \"John\"å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ä¿å­˜æ•°å­—ï¼š1std::string myID&#123; \"45\" &#125;; // \"45\" is not the same as integer 45!å­—ç¬¦ä¸²æ ¼å¼çš„ æ•°å­—ï¼Œå…¶å®æ˜¯æ–‡æœ¬å½¢å¼ï¼Œè€Œä¸æ˜¯ æ•°å­—å½¢å¼ã€‚è¾“å…¥è¾“å‡ºå­—ç¬¦ä¸²12345678910111213#include &lt;string&gt;#include &lt;iostream&gt; int main()&#123; std::string myName&#123; \"Alex\" &#125;; std::cout &lt;&lt; \"My name is: \" &lt;&lt; myName &lt;&lt; '\\n'; return 0;&#125;/************æ‰“å°***********/My name is: Alexä½†æ˜¯ï¼Œä½¿ç”¨std::cinæ¥è¾“å…¥å­—ç¬¦ä¸²ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå¼‚å¸¸ï¼š1234567891011121314151617#include &lt;string&gt;#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Enter your full name: \"; std::string name; std::cin &gt;&gt; name; // this won't work as expected since std::cin breaks on whitespace std::cout &lt;&lt; \"Enter your age: \"; std::string age; std::cin &gt;&gt; age; std::cout &lt;&lt; \"Your name is \" &lt;&lt; name &lt;&lt; \" and your age is \" &lt;&lt; age &lt;&lt; '\\n'; return 0;&#125;ç»“æœï¼šå¯ä»¥çœ‹åˆ°ï¼Œå¤§ é­”å¤´ä¸­é—´æœ‰ç©ºæ ¼ã€‚ç„¶åå°±ä¼šè¢«è‡ªåŠ¨æˆªæ–­ï¼Œå‰ä¸€éƒ¨åˆ†èµ‹å€¼ç»™å˜é‡nameï¼›ç¬¬äºŒåŠæ®µèµ‹å€¼ç»™ageã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šé‚£æ˜¯ä¸å¯¹çš„!å‘ç”Ÿäº†ä»€ä¹ˆäº‹?ç»“æœè¡¨æ˜ï¼Œå½“ä½¿ç”¨æ“ä½œç¬¦&gt;&gt;ä»cinæå–å­—ç¬¦ä¸²æ—¶ï¼Œæ“ä½œç¬¦&gt;&gt;åªè¿”å›å®ƒé‡åˆ°çš„ç¬¬ä¸€ä¸ªç©ºæ ¼ä¹‹å‰çš„å­—ç¬¦ã€‚å…¶ä»–å­—ç¬¦ç•™åœ¨cinä¸­ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡æå–ã€‚ç”¨std::getline()è¾“å…¥æ–‡æœ¬è¦å°†æ•´è¡Œè¾“å…¥è¯»å…¥å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬æœ€å¥½éœ€è¦ä½¿ç”¨std::getline()å‡½æ•°ã€‚std::getline()å«æœ‰ä¸¤ä¸ªå½¢å‚ï¼šç¬¬ä¸€ä¸ªæ˜¯std::cinï¼›ç¬¬äºŒä¸ªæ˜¯æˆ‘ä»¬è¾“å…¥çš„å­—ç¬¦ä¸²çš„å˜é‡12345678910111213141516171819202122#include &lt;string&gt;#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Enter your full name: \"; std::string name&#123;&#125;; std::getline(std::cin, name); // read a full line of text into name std::cout &lt;&lt; \"Enter your age: \"; std::string age&#123;&#125;; std::getline(std::cin, age); // read a full line of text into age std::cout &lt;&lt; \"Your name is \" &lt;&lt; name &lt;&lt; \" and your age is \" &lt;&lt; age &lt;&lt; '\\n'; return 0;&#125;/********ç»“æœ**************/Enter your full name: John DoeEnter your age: 23Your name is John Doe and your age is 23æ··åˆä½¿ç”¨std::cinã€std::getline()æ··åˆä½¿ç”¨ä»–ä¿©ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå¼‚å¸¸ï¼š1234567891011121314151617#include &lt;string&gt;#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Pick 1 or 2: \"; int choice&#123;&#125;; std::cin &gt;&gt; choice; std::cout &lt;&lt; \"Now enter your name: \"; std::string name&#123;&#125;; std::getline(std::cin, name); std::cout &lt;&lt; \"Hello, \" &lt;&lt; name &lt;&lt; \", you picked \" &lt;&lt; choice &lt;&lt; '\\n'; return 0;&#125;è¿™ä¸ªç¨‹åºé¦–å…ˆè¦æ±‚æ‚¨è¾“å…¥1æˆ–2ï¼Œç„¶åç­‰å¾…æ‚¨è¿™æ ·åšã€‚åˆ°ç›®å‰ä¸ºæ­¢ä¸€åˆ‡é¡ºåˆ©ã€‚ç„¶åå®ƒä¼šè¦æ±‚ä½ è¾“å…¥ä½ çš„åå­—ã€‚ç„¶è€Œï¼Œå®ƒå®é™…ä¸Šä¸ä¼šç­‰å¾…æ‚¨è¾“å…¥æ‚¨çš„åå­—ï¼ç›¸åï¼Œå®ƒæ‰“å°â€œHelloâ€è¡Œï¼Œç„¶åé€€å‡ºã€‚å‘ç”Ÿäº†ä»€ä¹ˆäº‹?ç»“æœæ˜¯ï¼Œå½“æ‚¨ä½¿ç”¨cinè¾“å…¥ä¸€ä¸ªå€¼æ—¶ï¼Œcinä¸ä»…æ•è·å€¼ï¼Œè¿˜æ•è·æ¢è¡Œç¬¦ã€‚å½“æˆ‘ä»¬è¾“å…¥2æ—¶ï¼Œcinå®é™…ä¸Šä¼šå¾—åˆ°å­—ç¬¦ä¸²â€œ2\\nâ€ã€‚ç„¶åæå–2åˆ°å˜é‡é€‰æ‹©ï¼Œä½¿æ¢è¡Œç•™åœ¨è¾“å…¥æµä¸­ã€‚ç„¶åï¼Œå½“std::getline()å»è¯»å–åç§°æ—¶ï¼Œå®ƒä¼šçœ‹åˆ°â€œ\\nâ€å·²ç»åœ¨æµä¸­ï¼Œå¹¶ä¸”è®¤ä¸ºæˆ‘ä»¬å¿…é¡»è¾“å…¥ä¸€ä¸ªç©ºå­—ç¬¦ä¸²!ç»å¯¹ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ä¸€ä¸ªå¥½æ–¹æ³•ï¼šä½¿ç”¨std::cinè¯»å–å®Œå€¼ ä¹‹åï¼Œå°†æ¢è¡Œ ä»è¾“å…¥æµä¸­åˆ é™¤ï¼šstd::cin.ignore(32767, &#39;\\n&#39;); //å¿½ç•¥ä¸è¶…è¿‡32767ä¸ªå­—ç¬¦ï¼Œç›´åˆ°åˆ é™¤ä¸€ä¸ª\\n.å…³äº32767è¯·çœ‹ä¸‹ä¸€èŠ‚å¦‚ä¸‹ï¼Œåœ¨mainå‡½æ•°ä¸­ï¼Œå¢åŠ ä¸€å¥std::cin.ignore(32767, &#39;\\n&#39;);ï¼š1234567891011121314151617int main()&#123; std::cout &lt;&lt; \"Pick 1 or 2: \"; int choice&#123;&#125;; std::cin &gt;&gt; choice; //æ–°åŠ  std::cin.ignore(32767, '\\n'); // ignore up to 32767 characters until a \\n is removed std::cout &lt;&lt; \"Now enter your name: \"; std::string name; std::getline(std::cin, name); std::cout &lt;&lt; \"Hello, \" &lt;&lt; name &lt;&lt; \", you picked \" &lt;&lt; choice &lt;&lt; '\\n'; return 0;&#125;è§„åˆ™:å¦‚æœä½¿ç”¨std::cinè¯»å–å€¼ï¼Œæœ€å¥½ä½¿ç”¨std:: cin .ignore()æ¥åˆ é™¤å¤šä½™çš„æ¢è¡Œç¬¦ã€‚32767ä»£è¡¨ä»€ä¹ˆè¿™å‘Šè¯‰std::cin.ignore()è¦å¿½ç•¥å¤šå°‘å­—ç¬¦ã€‚æˆ‘ä»¬é€‰æ‹©32767æ˜¯å› ä¸ºå®ƒæ˜¯ä¿è¯åœ¨æ‰€æœ‰å¹³å°ä¸Šéƒ½é€‚åˆ(2å­—èŠ‚)æ•´æ•°çš„æœ€å¤§æœ‰ç¬¦å·å€¼ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œå¿½ç•¥æ— é™é‡è¾“å…¥çš„æ­£ç¡®æ–¹æ³•å¦‚ä¸‹:12345#include &lt;limits&gt; ... std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); // ignore unlimited characters until a \\n is removedä½†æ˜¯ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œè¿™æ ·çš„æ–¹å¼å¤ªå¤æ‚äº†ã€‚è€Œä¸”è¿˜éœ€è¦åŠ ä¸Šå¤´æ–‡ä»¶limitså­—ç¬¦ä¸²çš„â€œåŠ æ³•â€12345678910111213141516171819#include &lt;string&gt;#include &lt;iostream&gt; int main()&#123; std::string a&#123; \"45\" &#125;; std::string b&#123; \"11\" &#125;; std::cout &lt;&lt; a + b &lt;&lt; '\\n'; // a and b will be concatenated a += \"volts\"; std::cout &lt;&lt; a; return 0;&#125;/*****ç»“æœ********/451145voltsæ³¨æ„ï¼Œå¦‚æœä½ æƒ³å¯¹å­—ç¬¦ä¸²å‡æ³•ï¼Œæ˜¯ä¸å¯ä»¥çš„ç†¬å­—ç¬¦ä¸²é•¿åº¦12345678910#include &lt;string&gt;#include &lt;iostream&gt; int main()&#123; std::string myName&#123; \"Alex\" &#125;; std::cout &lt;&lt; myName &lt;&lt; \" has \" &lt;&lt; myName.length() &lt;&lt; \" characters\\n\"; std::cout &lt;&lt; myName &lt;&lt; \" has \" &lt;&lt; length(myName) &lt;&lt; \" characters\\n\";//error:æœªå®šä¹‰æ ‡è¯†ç¬¦ length return 0;&#125;æ³¨æ„ï¼Œæˆ‘ä»¬ä¸æ˜¯å°†å­—ç¬¦ä¸²é•¿åº¦ä½œä¸ºlength(myName)ï¼Œè€Œæ˜¯ä½¿ç”¨myName.length()ã€‚lengthå‡½æ•°ä¸æ˜¯æˆ‘ä»¬ç›®å‰ä½¿ç”¨çš„ä¸€ä¸ªæ™®é€šçš„ç‹¬ç«‹å‡½æ•°ï¼Œå®ƒæ˜¯å±äºstd::stringçš„ä¸€ç§ç‰¹æ®Šç±»å‹çš„å‡½æ•°ï¼Œç§°ä¸ºæˆå‘˜å‡½æ•°ã€‚S.4.4c ä½¿ç”¨è¯­è¨€å‚è€ƒæœ¬èŠ‚åŸæ–‡åœ°å€ï¼šS.4.4c â€” Using a language referenceå…¶ä¸­ä¸€ä¸ªèµ„æºæ˜¯Stack Overflowï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæé—®ï¼›å¦ä¸€ä¸ªå°±æ˜¯è¯­è¨€å‚è€ƒæ–‡æ¡£ï¼š cppreferenceï¼›S.4.5 æšä¸¾ç±»å‹c++åŒ…å«å…è®¸ç¨‹åºå‘˜åˆ›å»ºè‡ªå·±çš„æ•°æ®ç±»å‹çš„åŠŸèƒ½ã€‚è¿™äº›æ•°æ®ç±»å‹ç§°ä¸ºç”¨æˆ·å®šä¹‰çš„æ•°æ®ç±»å‹ã€‚æšä¸¾ç±»å‹(ä¹Ÿç§°ä¸ºenumerationæˆ–enum)æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå…¶ä¸­æ¯ä¸ªå¯èƒ½çš„å€¼éƒ½è¢«å®šä¹‰ä¸ºç¬¦å·å¸¸é‡(ç§°ä¸ºenumerator(æšä¸¾å™¨))ã€‚æšä¸¾æ˜¯é€šè¿‡enumå…³é”®å­—å®šä¹‰çš„ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­:æ³¨æ„ï¼Œæ¯ä¸ªæšä¸¾æ•°ç”±é€—å·åˆ†éš”ï¼Œæ•´ä¸ªæšä¸¾ä»¥åˆ†å·ç»“æŸã€‚1234567891011121314151617181920// Define a new enumeration named Colorenum Color&#123; // Here are the enumerators // These define all the possible values this type can hold // Each enumerator is separated by a comma, not a semicolon COLOR_BLACK, COLOR_RED, COLOR_BLUE, COLOR_GREEN, COLOR_WHITE, COLOR_CYAN, COLOR_YELLOW, COLOR_MAGENTA, // see note about trailing comma on the last enumerator below&#125;; // however the enum itself must end with a semicolon // Define a few variables of enumerated type ColorColor paint = COLOR_WHITE;Color house(COLOR_BLUE);Color apple &#123; COLOR_RED &#125;;å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹(ä¹Ÿå¯ä»¥è¯´ï¼Œå®šä¹‰ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰ç±»å‹)æ—¶ï¼Œæ˜¯ä¸ä¼šç»™å®ƒåˆ†é…å†…å­˜çš„ï¼›åªæœ‰å½“å®šä¹‰äº†æšä¸¾ç±»å‹çš„å˜é‡(å¦‚ä¸Šé¢ç¤ºä¾‹ä¸­çš„å˜é‡paint)æ—¶ï¼Œæ‰ä¼šä¸ºè¯¥å˜é‡åˆ†é…å†…å­˜ã€‚åœ¨c++ 11ä¹‹å‰ï¼Œä¸å…è®¸åœ¨æœ€åä¸€ä¸ªæšä¸¾æ•°ä¹‹åä½¿ç”¨é€—å·(ä¾‹å¦‚ï¼Œåœ¨COLOR_MAGENTAä¹‹å)(å°½ç®¡è®¸å¤šç¼–è¯‘å™¨éƒ½æ¥å—äº†é€—å·)ã€‚ä½†æ˜¯ï¼Œä»c++ 11å¼€å§‹ï¼Œå…è®¸ä½¿ç”¨é€—å·ç»“å°¾ã€‚ç°åœ¨c++ 11ç¼–è¯‘å™¨æ›´åŠ æµè¡Œäº†ï¼Œä¸€èˆ¬è®¤ä¸ºåœ¨æœ€åä¸€ä¸ªå…ƒç´ åé¢ä½¿ç”¨é€—å·æ˜¯å¯ä»¥æ¥å—çš„ã€‚æšä¸¾çš„å‘½åå’Œæšä¸¾å™¨æšä¸¾çš„å‘½åæ˜¯å¯é€‰çš„ï¼Œé€šå¸¸ï¼Œæ²¡æœ‰åå­—çš„æšä¸¾æœ‰æ—¶è¢«ç§°ä¸ºåŒ¿åæšä¸¾ã€‚æšä¸¾çš„åå­—é€šå¸¸ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚æšä¸¾å™¨(æšä¸¾å¸¸é‡)æ˜¯å¿…é¡»è¦ç»™å‡ºåå­—çš„ã€‚å®ƒçš„åå­—é€šå¸¸æ˜¯å¤§å†™å­—æ¯(å¦‚ï¼ŒCOLOR_WHITE)ï¼Œæˆ–è€…ä»¥å¤§å†™å­—æ¯Kä¸ºå‰ç¼€(å¦‚ï¼Œ kColorWhite)æšä¸¾å¸¸é‡çš„èŒƒå›´å› ä¸ºæšä¸¾å¸¸é‡è¢«æ”¾åœ¨ä¸æšä¸¾ç›¸åŒçš„å‘½åç©ºé—´ä¸­ï¼Œæ‰€ä»¥ï¼Œæšä¸¾å¸¸é‡åå­—ä¸èƒ½ç”¨äºåŒä¸€å‘½åç©ºé—´å†…çš„å¤šä¸ªæšä¸¾:12345678910111213enum Color&#123;RED,BLUE, // BLUE is put into the global namespaceGREEN&#125;; enum Feeling&#123;HAPPY,TIRED,BLUE // error, BLUE was already used in enum Color in the global namespace&#125;;æšä¸¾å¸¸é‡çš„å€¼æ¯ä¸ªæšä¸¾å™¨æ ¹æ®å…¶åœ¨æšä¸¾åˆ—è¡¨ä¸­çš„ä½ç½®è‡ªåŠ¨åˆ†é…ä¸€ä¸ªæ•´æ•°å€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªæšä¸¾æ•°è¢«èµ‹å€¼ä¸ºæ•´æ•°å€¼0ï¼Œéšåçš„æ¯ä¸ªæšä¸¾æ•°çš„å€¼éƒ½æ¯”å‰ä¸€ä¸ªæšä¸¾æ•°å¤§1:1234567891011121314151617enum Color&#123; COLOR_BLACK, // assigned 0 COLOR_RED, // assigned 1 COLOR_BLUE, // assigned 2 COLOR_GREEN, // assigned 3 COLOR_WHITE, // assigned 4 COLOR_CYAN, // assigned 5 COLOR_YELLOW, // assigned 6 COLOR_MAGENTA // assigned 7&#125;; Color paint(COLOR_WHITE);std::cout &lt;&lt; paint;/*********ç»“æœ*********/4ä½ ä¹Ÿå¯ä»¥æ˜¾å¼å®šä¹‰æšä¸¾æ•°çš„å€¼ã€‚è¿™äº›æ•´æ•°å€¼å¯ä»¥æ˜¯æ­£çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯è´Ÿçš„ï¼Œå¹¶ä¸”å¯ä»¥ä¸å…¶ä»–æšä¸¾æ•°å…±äº«ç›¸åŒçš„å€¼ã€‚ä»»ä½•æœªå®šä¹‰çš„æšä¸¾æ•°éƒ½è¢«èµ‹äºˆä¸€ä¸ªæ¯”å‰ä¸€ä¸ªæšä¸¾æ•°å¤§1çš„å€¼ã€‚12345678910// define a new enum named Animalenum Animal&#123; ANIMAL_CAT = -3, ANIMAL_DOG, // assigned -2 ANIMAL_PIG, // assigned -1 ANIMAL_HORSE = 5, ANIMAL_GIRAFFE = 5, // shares same value as ANIMAL_HORSE ANIMAL_CHICKEN // assigned 6&#125;;æ³¨æ„åˆ°ï¼šANIMAL_HORSEå’ŒANIMAL_GIRAFFEçš„å€¼ç›¸åŒã€‚è¿™è¡¨ç¤ºä»–ä»¬ä¸¤ä¸ªå¯ä»¥äº’æ¢ã€‚å³ï¼Œå®ƒä¿©æ²¡åŒºåˆ«ã€‚è™½ç„¶ï¼ŒC++å…è®¸è¿™æ ·ï¼Œä½†æ˜¯ä¸å»ºè®®å°†æšä¸¾å¸¸é‡èµ‹å€¼ä½ç›¸åŒçš„å€¼ã€‚æšä¸¾ç±»å‹çš„input/outputå› ä¸ºæšä¸¾å€¼æ˜¯æ•´æ•°ç±»å‹çš„ï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥è¢«èµ‹å€¼ç»™æ•´å‹å˜é‡ã€‚è¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥ ä»¥integerså½¢å¼è¢«outputï¼Œå› ä¸ºstd::coutçŸ¥é“å¦‚ä½•è¾“å‡ºæ•´æ•°ã€‚12345int mypet = ANIMAL_PIG;std::cout &lt;&lt; ANIMAL_PIG;//evaluates to integer before being passed to std::cout/*******ç»“æœ*****/5ç¼–è¯‘å™¨ä¸ä¼šéšå¼çš„å°†æ•´å‹è½¬å˜ä¸ºæšä¸¾ç±»å‹å€¼ã€‚1234Animal animal = 5; // will cause compiler error//ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ static_cast æ¥å¼ºåˆ¶è½¬æ¢Color color = static_cast&lt;Color&gt;(5); // uglyç¼–è¯‘å™¨ä¹Ÿä¸ä¼šè®©ä½ è¾“å…¥ä¸€ä¸ªæšä¸¾ç±»å‹ï¼š1234567891011121314151617181920enum Color&#123; COLOR_BLACK, // assigned 0 COLOR_RED, // assigned 1 COLOR_BLUE, // assigned 2 COLOR_GREEN, // assigned 3 COLOR_WHITE, // assigned 4 COLOR_CYAN, // assigned 5 COLOR_YELLOW, // assigned 6 COLOR_MAGENTA // assigned 7&#125;; Color color;std::cin &gt;&gt; color; // will cause compiler error//ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯»å–ä¸€ä¸ªæ•´å‹ï¼Œå¹¶ä½¿ç”¨static_castæ¥å¼ºåˆ¶ç¼–è¯‘å™¨å°†æ•´å‹å€¼æ”¾å…¥æšä¸¾ç±»å‹ä¸­ï¼šint inputColor;std::cin&gt;&gt; inpitColor;Color color&#123; static_cast&lt;Color&gt;(inputColor) &#125;;æ¯ä¸ªæšä¸¾ç±»å‹éƒ½è¢«è®¤ä¸ºæ˜¯ä¸åŒçš„ç±»å‹ã€‚å› æ­¤ï¼Œè¯•å›¾å°†æšä¸¾æ•°ä»ä¸€ä¸ªæšä¸¾ç±»å‹åˆ†é…åˆ°å¦ä¸€ä¸ªæšä¸¾ç±»å‹å°†å¯¼è‡´ç¼–è¯‘é”™è¯¯:1Animal animal&#123; COLOR_BLUE &#125;; // will cause compiler errorå¦‚æœæ‚¨æƒ³ä¸ºæšä¸¾å™¨ä½¿ç”¨ä¸åŒçš„æ•´æ•°ç±»å‹ï¼Œä½ å¯ä»¥æ‚¨å¯ä»¥åœ¨enumå£°æ˜ä¸­æŒ‡å®šå®ƒï¼š1234567// Use an 8 bit unsigned integer as the enum base.enum Color : std::uint_least8_t&#123; COLOR_BLACK, COLOR_RED, // ...&#125;;æšä¸¾ç±»å‹çš„æå‰å£°æ˜ã€‚12345678910111213enum Color; // Errorenum Color : int; // Okay // ... // Because Color was forward declared with a fixed base, we// need to specify the base again at the definition.enum Color : int&#123; COLOR_BLACK, COLOR_RED, // ...&#125;;Enumåˆ†é…å’Œæå‰å£°æ˜Enumç±»å‹è¢«è®¤ä¸ºæ˜¯æ•´æ•°ç±»å‹å®¶æ—çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒç”±ç¼–è¯‘å™¨å†³å®šä¸ºEnumå˜é‡åˆ†é…å¤šå°‘å†…å­˜ã€‚c++æ ‡å‡†è¦æ±‚æšä¸¾çš„å¤§å°å¿…é¡»è¶³å¤Ÿå¤§ï¼Œä»¥è¡¨ç¤ºæ‰€æœ‰æšä¸¾å€¼ã€‚é€šå¸¸ï¼Œå®ƒä¼šä½¿enumå˜é‡çš„å¤§å°ä¸æ ‡å‡†intç›¸åŒã€‚å› ä¸ºç¼–è¯‘å™¨çŸ¥é“ç»™æšä¸¾ç±»å‹åˆ†é…å¤šå°‘å†…å­˜ï¼Œæ‰€ä»¥æ‚¨åªèƒ½åœ¨æŒ‡å®šå›ºå®šåŸºæ•°æ—¶ï¼Œæ‰å¯ä»¥æå‰å£°æ˜å®ƒä»¬ã€‚æšä¸¾å™¨æœ‰ä»€ä¹ˆç”¨?å½“éœ€è¦è¡¨ç¤ºç‰¹å®šçš„é¢„å®šä¹‰çŠ¶æ€é›†æ—¶ï¼Œæšä¸¾ç±»å‹å¯¹äºä»£ç æ–‡æ¡£å’Œå¯è¯»æ€§éå¸¸æœ‰ç”¨ã€‚å¦‚ï¼š1234567891011int readFileContents()&#123; if (!openFile()) return -1; if (!readFile()) return -2; if (!parseFile()) return -3; return 0; // success&#125;è´Ÿæ•°ç”¨æ¥è¡¨ç¤ºä¸åŒçš„å¯èƒ½çš„é”™è¯¯ä»£ç ã€‚å¦‚ä¸Šé¢ï¼š-1 -2 -3ç„¶è€Œï¼Œä½¿ç”¨åƒè¿™æ ·çš„ç¥å¥‡æ•°å­—å¹¶ä¸æ˜¯å¾ˆæœ‰æè¿°æ€§ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æšä¸¾ç±»å‹ï¼šè¿™ç§æ–¹æ³•å¯è¯»æ€§æ›´å¼ºã€‚12345678910111213141516171819enum ParseResult&#123; SUCCESS = 0, ERROR_OPENING_FILE = -1, ERROR_READING_FILE = -2, ERROR_PARSING_FILE = -3&#125;; ParseResult readFileContents()&#123; if (!openFile()) return ERROR_OPENING_FILE; if (!readFile()) return ERROR_READING_FILE; if (!parsefile()) return ERROR_PARSING_FILE; return SUCCESS;&#125;è°ƒç”¨è€…å¯ä»¥æ ¹æ®é€‚å½“çš„æšä¸¾å™¨æµ‹è¯•å‡½æ•°çš„è¿”å›å€¼ï¼Œè¿™æ¯”æµ‹è¯•ç‰¹å®šæ•´æ•°å€¼çš„è¿”å›ç»“æœæ›´å®¹æ˜“ç†è§£ã€‚å¦‚ï¼š12345678if (readFileContents() == SUCCESS) &#123; // do something &#125;else &#123; // print error message &#125;è®¸å¤šè¯­è¨€ä½¿ç”¨æšä¸¾å®šä¹‰å¸ƒå°”å€¼ã€‚å¸ƒå°”å€¼æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæœ‰ä¸¤ä¸ªæšä¸¾å™¨çš„æšä¸¾:falseå’Œtrue!ç„¶è€Œï¼Œåœ¨c++ä¸­ï¼Œtrueå’Œfalseè¢«å®šä¹‰ä¸ºå…³é”®å­—ï¼Œè€Œä¸æ˜¯æšä¸¾æ•°ã€‚S.4.6 æšä¸¾ç±»C++11å®šä¹‰äº†ä¸€ä¸ªæ–°æ¦‚å¿µï¼Œenum class(æšä¸¾ç±»)ï¼Œä¹Ÿç§° scoped enumerationï¼ˆä½œç”¨åŸŸæšä¸¾ï¼‰ã€‚æˆ‘ä»¬åœ¨enumä¹‹åä½¿ç”¨å…³é”®å­— classæ¥æ„é€ æšä¸¾ç±»ï¼š1234567891011121314151617181920212223242526#include &lt;iostream&gt; int main()&#123; enum class Color // \"enum class\" defines this as a scoped enumeration instead of a standard enumeration &#123; red, // red is inside the scope of Color blue &#125;; enum class Fruit &#123; banana, // banana is inside the scope of Fruit apple &#125;; Color color&#123; Color::red &#125;; // note: red is not directly accessible any more, we have to use Color::red Fruit fruit&#123; Fruit::banana &#125;; // note: banana is not directly accessible any more, we have to use Fruit::banana if (color == fruit) // compile error here, as the compiler doesn't know how to compare different types Color and Fruit std::cout &lt;&lt; \"color and fruit are equal\\n\"; else std::cout &lt;&lt; \"color and fruit are not equal\\n\"; return 0;&#125;å¯¹äºæ­£å¸¸çš„æšä¸¾ï¼Œæšä¸¾å™¨è¢«æ”¾ç½®åœ¨ä¸æšä¸¾æœ¬èº«ç›¸åŒçš„èŒƒå›´å†…ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®æšä¸¾å™¨(æšä¸¾å¸¸é‡). (e.g. red).å› ä¸ºæšä¸¾å™¨æ˜¯enumç±»çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨æšä¸¾å™¨åç§°å‰é¢åŠ ä¸Šå‰ç¼€(ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨redè€Œä¸æ˜¯COLOR_redï¼Œå› ä¸ºColor::COLOR_redæ˜¯å¤šä½™çš„)ã€‚ä½†æ˜¯ï¼Œåœ¨æšä¸¾ç±»ä¸­ï¼Œä¸¥æ ¼çš„èŒƒå›´è§„åˆ™æ„å‘³ç€æ‰€æœ‰çš„æšä¸¾å™¨(æšä¸¾å¸¸é‡)æ˜¯æšä¸¾çš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨å¿…é¡»ä½¿ç”¨èŒƒå›´é™å®šç¬¦æ¥è®¿é—®æšä¸¾å™¨(ä¾‹å¦‚ï¼ŒColor::red)ã€‚è¿™æœ‰åŠ©äºé™ä½åç§°æ±¡æŸ“å’Œåç§°å†²çªçš„å¯èƒ½æ€§ã€‚å¼ºç±»å‹è§„åˆ™æ„å‘³ç€æ¯ä¸ªenumç±»éƒ½è¢«è®¤ä¸ºæ˜¯å”¯ä¸€çš„ç±»å‹ã€‚è¿™æ„å‘³ç€ç¼–è¯‘å™¨ä¸ä¼šéšå¼åœ°æ¯”è¾ƒæ¥è‡ªä¸åŒæšä¸¾çš„æšä¸¾æ•°ã€‚å¦‚æœå°è¯•è¿™æ ·åšï¼Œç¼–è¯‘å™¨å°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå¦‚ä¸Šé¢çš„ç¤ºä¾‹æ‰€ç¤ºã€‚ç„¶è€Œï¼Œä½ ä»ç„¶å¯ä»¥åœ¨åŒä¸€æšä¸¾ç±» å†…éƒ¨è¿›è¡Œ æšä¸¾å¸¸é‡çš„æ¯”è¾ƒ(å› ä¸ºè®©é—¨å±äºåŒä¸€ç±»å‹)ï¼š12345678910111213141516171819#include &lt;iostream&gt; int main()&#123; enum class Color &#123; red, blue &#125;; Color color&#123; Color::red &#125;; if (color == Color::red) // this is okay(è¿™æ ·æ˜¯å¯ä»¥çš„) std::cout &lt;&lt; \"The color is red!\\n\"; else if (color == Color::blue) std::cout &lt;&lt; \"The color is blue!\\n\"; return 0;&#125;ä½¿ç”¨enumç±»ï¼Œç¼–è¯‘å™¨å°†ä¸å†éšå¼åœ°å°†æšä¸¾æ•°å€¼è½¬æ¢ä¸ºæ•´æ•°ã€‚è¿™åŸºæœ¬ä¸Šæ˜¯ä¸€ä»¶å¥½äº‹ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™æ ·åšæ˜¯æœ‰ç”¨çš„ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨static_castå°†enumç±»æšä¸¾æ•°æ˜¾å¼è½¬æ¢ä¸ºæ•´æ•°:1234567891011121314151617#include &lt;iostream&gt; int main()&#123; enum class Color &#123; red, blue &#125;; Color color&#123; Color::blue &#125;; std::cout &lt;&lt; color; // won't work, because there's no implicit conversion to int std::cout &lt;&lt; static_cast&lt;int&gt;(color); // will print 1 return 0;&#125;ã€noteã€‘ä¸‡ä¸€ä½ é‡åˆ°å®ƒï¼Œâ€œenum structâ€ç›¸å½“äºâ€œenum classâ€ã€‚ä½†è¿™ç§ç”¨æ³•ä¸æ¨èï¼Œä¹Ÿä¸å¸¸ç”¨ã€‚S.4.7 structc++å…è®¸æˆ‘ä»¬åˆ›å»ºè‡ªå·±çš„ç”¨æˆ·å®šä¹‰çš„aggregate data types(èšé›†æ•°æ®ç±»å‹)ã€‚èšé›†æ•°æ®ç±»å‹ï¼šæ˜¯å°†å¤šä¸ªå•ç‹¬å˜é‡åˆ†ç»„åœ¨ä¸€èµ·çš„æ•°æ®ç±»å‹structå°±æ˜¯èšé›†æ•°æ®ç±»å‹çš„æœ€ç®€å•ä¹‹ä¸€ã€‚structçš„å®šä¹‰&amp;å£°æ˜å› ä¸ºstructsæ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆè¦åœ¨ä½¿ç”¨å®ƒä¹‹å‰ï¼Œå¿…é¡»è¦å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬çš„structæ˜¯ä»€ä¹ˆæ ·çš„ã€‚æˆ‘ä»¬ä½¿ç”¨structå…³é”®å­—å£°æ˜ç»“æ„ä½“ã€‚12345678//å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªç»“æ„ä½“ï¼Œåä¸ºEmployeestruct Employee&#123; short id; int age; double wage;&#125;;//è¿™äº›ç»“æ„ä¸­çš„å˜é‡ç§°ä¸º **æˆå‘˜(æˆ–å­—æ®µ)**ã€‚è®°ä½ï¼Œä¸Šé¢çš„Employeeåªæ˜¯ä¸€ä¸ªå£°æ˜ã€‚å°½ç®¡æˆ‘ä»¬å‘Šè¯‰ç¼–è¯‘å™¨ç»“æ„ä½“å°†æœ‰æˆå‘˜å˜é‡ï¼Œä½†æ­¤æ—¶æ²¡æœ‰åˆ†é…å†…å­˜ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œç»“æ„åä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œä»¥ä¾¿ä¸å˜é‡ååŒºåˆ†å¼€æ¥ã€‚ä¸ºäº†ä½¿ç”¨Employeeç»“æ„ï¼Œæˆ‘ä»¬åªéœ€å£°æ˜ä¸€ä¸ªç±»å‹ä¸ºEmployeeçš„å˜é‡:1Employee joe; // struct Employee is capitalized, variable joe is notè¿™å®šä¹‰äº†ä¸€ä¸ªåä¸ºjoeçš„Employeeç±»å‹çš„å˜é‡ã€‚ä¸æ™®é€šå˜é‡ä¸€æ ·ï¼Œå®šä¹‰ç»“æ„å˜é‡ä¸ºè¯¥å˜é‡åˆ†é…å†…å­˜ã€‚è®¿é—®ç»“æ„ä½“æˆå‘˜å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå˜é‡å¦‚Employee joeæ—¶ï¼Œjoeå¼•ç”¨æ•´ä¸ªç»“æ„(åŒ…å«æˆå‘˜å˜é‡)ã€‚ä¸ºäº†è®¿é—®å„ä¸ªæˆå‘˜ï¼Œæˆ‘ä»¬ä½¿ç”¨member selection operator(æˆå‘˜é€‰æ‹©æ“ä½œç¬¦)ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨æˆå‘˜é€‰æ‹©æ“ä½œç¬¦åˆå§‹åŒ–æ¯ä¸ªæˆå‘˜å˜é‡çš„ä¾‹å­:123456789Employee joe; // create an Employee struct for Joejoe.id = 14; // assign a value to member id within struct joejoe.age = 32; // assign a value to member age within struct joejoe.wage = 24.15; // assign a value to member wage within struct joe Employee frank; // create an Employee struct for Frankfrank.id = 15; // assign a value to member id within struct frankfrank.age = 28; // assign a value to member age within struct frankfrank.wage = 18.27; // assign a value to member wage within struct frankä¸æ™®é€šå˜é‡ä¸€æ ·ï¼Œç»“æ„æˆå‘˜å˜é‡æ²¡æœ‰åˆå§‹åŒ–ï¼Œé€šå¸¸ä¼šåŒ…å«åƒåœ¾ã€‚æˆ‘ä»¬å¿…é¡»æ‰‹åŠ¨åˆå§‹åŒ–å®ƒä»¬ã€‚Structæˆå‘˜å˜é‡çš„ä½œç”¨å°±åƒæ™®é€šå˜é‡ä¸€æ ·ï¼Œæ‰€ä»¥å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œæ™®é€šæ“ä½œ:1234567891011121314int totalAge&#123; joe.age + frank.age &#125;; if (joe.wage &gt; frank.wage) std::cout &lt;&lt; \"Joe makes more than Frank\\n\";else if (joe.wage &lt; frank.wage) std::cout &lt;&lt; \"Joe makes less than Frank\\n\";else std::cout &lt;&lt; \"Joe and Frank make the same amount\\n\"; // Frank got a promotionfrank.wage += 2.50; // Today is Joe's birthday++joe.age; // use pre-increment to increment Joe's age by 1åˆå§‹åŒ–ç»“æ„ä½“é€šè¿‡é€ä¸ªæˆå‘˜åˆ†é…å€¼æ¥åˆå§‹åŒ–ç»“æ„æœ‰ç‚¹éº»çƒ¦ï¼Œå› æ­¤ï¼Œc++æ”¯æŒä½¿ç”¨initializer list(åˆå§‹åŒ–åˆ—è¡¨)æ¥åˆå§‹åŒ–ç»“æ„ä½“çš„æ›´å¿«æ–¹æ³•:123456789struct Employee&#123; short id; int age; double wage;&#125;; Employee joe&#123; 1, 32, 60000.0 &#125;; // joe.id = 1, joe.age = 32, joe.wage = 60000.0Employee frank&#123; 2, 28 &#125;; // frank.id = 2, frank.age = 28, frank.wage = 0.0 (default initialization)åœ¨C++11/14ä¸­: Non-static member initializationä»c++ 11å¼€å§‹ï¼Œå¯ä»¥ç»™éé™æ€(æ™®é€š)ç»“æ„æˆå‘˜ä¸€ä¸ªé»˜è®¤å€¼:1234567891011121314struct Rectangle&#123; double length&#123; 1.0 &#125;; double width&#123; 1.0 &#125;;&#125;; int main()&#123; Rectangle x; // length = 1.0, width = 1.0 x.length = 2.0; // you can assign other values like normal return 0;&#125;ä¸å¹¸çš„æ˜¯ï¼Œåœ¨c++ 11ä¸­ï¼Œéé™æ€æˆå‘˜åˆå§‹åŒ–è¯­æ³•ä¸åˆå§‹åŒ–åˆ—è¡¨å’Œç»Ÿä¸€çš„åˆå§‹åŒ–è¯­æ³•ä¸å…¼å®¹ã€‚ä¾‹å¦‚ï¼Œåœ¨c++ 11ä¸­ï¼Œä»¥ä¸‹ç¨‹åºæ— æ³•ç¼–è¯‘:123456789101112struct Rectangle&#123; double length&#123; 1.0 &#125;; // non-static member initialization double width&#123; 1.0 &#125;;&#125;; int main()&#123; Rectangle x&#123; 2.0, 2.0 &#125;; // uniform initialization/initializer listã€æ¨èã€‘ return 0;&#125;å› æ­¤ï¼Œåœ¨c++ 11ä¸­ï¼Œæ‚¨å¿…é¡»å†³å®šæ˜¯ä½¿ç”¨éé™æ€æˆå‘˜åˆå§‹åŒ–è¿˜æ˜¯ä½¿ç”¨ç»Ÿä¸€åˆå§‹åŒ–ã€‚ç»Ÿä¸€åˆå§‹åŒ–æ›´åŠ çµæ´»ï¼Œå› æ­¤æˆ‘ä»¬å»ºè®®åšæŒä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚ç„¶è€Œï¼Œåœ¨c++ 14ä¸­ï¼Œè¿™ä¸ªé™åˆ¶è¢«å–æ¶ˆäº†ï¼Œä¸¤è€…éƒ½å¯ä»¥ä½¿ç”¨ã€‚å¦‚æœä¸¤è€…éƒ½æä¾›äº†ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨/ç»Ÿä¸€åˆå§‹åŒ–è¯­æ³•ï¼ˆå³ï¼šinitializer listï¼‰ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒçŸ©å½¢xçš„lengthå’Œwidthå°†ç”¨2.0è¿›è¡Œåˆå§‹åŒ–ã€‚åœ¨c++ 14ä¸­ï¼Œä¸¤è€…éƒ½ä½¿ç”¨åº”è¯¥æ˜¯é¦–é€‰çš„ï¼Œå› ä¸ºå®ƒå…è®¸æ‚¨å£°æ˜å…·æœ‰æˆ–ä¸å…·æœ‰åˆå§‹åŒ–å‚æ•°çš„ç»“æ„ï¼Œå¹¶ç¡®ä¿æˆå‘˜å·²åˆå§‹åŒ–å¯¹ç»“æ„ä½“èµ‹å€¼12345678910111213141516171819202122struct Employee&#123; short id; int age; double wage;&#125;; Employee joe;joe = &#123; 1, 32, 60000.0 &#125;; // C++11 only(åªåœ¨C++11ä¸­å¯ä»¥ä½¿ç”¨)//åœ¨C++11ä¹‹å‰struct Employee&#123; short id; int age; double wage;&#125;; Employee joe;joe.id = 1;joe.age = 32;joe.wage = 60000.0;ç»“æ„ä½“ä¸å‡½æ•°ä¸å•ä¸ªå˜é‡ç›¸æ¯”ï¼Œä½¿ç”¨structçš„ä¸€å¤§å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªstructä¼ é€’ç»™ä¸€ä¸ªéœ€è¦ä¸æˆå‘˜ååŒå·¥ä½œçš„å‡½æ•°:è¿™é¿å…äº†æˆ‘ä»¬å¿…é¡»å•ç‹¬ä¼ é€’æ¯ä¸ªå˜é‡ã€‚12345678910111213141516171819202122232425262728293031323334353637383940#include &lt;iostream&gt; struct Employee&#123; short id; int age; double wage;&#125;; void printInformation(Employee employee)&#123; std::cout &lt;&lt; \"ID: \" &lt;&lt; employee.id &lt;&lt; '\\n'; std::cout &lt;&lt; \"Age: \" &lt;&lt; employee.age &lt;&lt; '\\n'; std::cout &lt;&lt; \"Wage: \" &lt;&lt; employee.wage &lt;&lt; '\\n';&#125; int main()&#123; Employee joe &#123; 14, 32, 24.15 &#125;; Employee frank &#123; 15, 28, 18.27 &#125;; // Print Joe's information printInformation(joe); std::cout &lt;&lt; '\\n'; // Print Frank's information printInformation(frank); return 0;&#125;/******ç»“æœ*********/ID: 14Age: 32Wage: 24.15ID: 15Age: 28Wage: 18.27æˆ‘ä»¬å°†æ•´ä¸ªEmployeeç»“æ„ä¼ é€’ç»™printInformation() (é€šè¿‡å€¼ä¼ é€’ï¼Œè¿™æ„å‘³ç€å®å‚è¢«å¤åˆ¶åˆ°å½¢å‚ä¸­)ã€‚å‡½æ•°çš„è¿”å›å¯ä»¥æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼šä¸€ä¸ªå‡½æ•°ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªç»“æ„ä½“ï¼Œè¿™æ˜¯ä½¿ä¸€ä¸ªå‡½æ•°è¿”å›å¤šä¸ªå˜é‡çš„å‡ ç§æ–¹æ³•ä¹‹ä¸€ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142#include &lt;iostream&gt; struct Point3d&#123; double x; double y; double z;&#125;; Point3d getZeroPoint()&#123; // We can create a variable and return the variable. Point3d temp &#123; 0.0, 0.0, 0.0 &#125;; return temp;&#125; Point3d getZeroPoint2()&#123; // We can return directly. We already specified the type // at the function declaration (Point3d), so we don't need // it again here. return &#123; 0.0, 0.0, 0.0 &#125;;&#125; Point3d getZeroPoint3()&#123; // We can use empty curly braces to zero-initialize all // members of `Point3d`. return &#123;&#125;;&#125; int main()&#123; Point3d zero&#123; getZeroPoint() &#125;; if (zero.x == 0.0 &amp;&amp; zero.y == 0.0 &amp;&amp; zero.z == 0.0) std::cout &lt;&lt; \"The point is zero\\n\"; else std::cout &lt;&lt; \"The point is not zero\\n\"; return 0;&#125;ç»“æ„ä½“åµŒå¥—ç»“æ„ä½“å¯ä»¥åŒ…å«å…¶ä»–ç»“æ„ä½“ã€‚ä¾‹å¦‚:12345678910111213141516struct Employee&#123; short id; int age; double wage;&#125;; struct Company&#123; Employee CEO; // Employee is a struct within the Company struct int numberOfEmployees;&#125;; Company myCompany;//æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–å®ƒä»¬ï¼š//Company myCompany&#123;&#123; 1, 42, 60000.0 &#125;, 5 &#125;;ç»“æ„ä½“çš„å¤§å°ç»“æ„ä½“çš„å¤§å°æ˜¯æ‰€æœ‰æˆå‘˜å¤§å°çš„æ€»å’Œï¼Œä½†è¿™ä¸æ˜¯ä¸€å®šçš„ã€‚12345678910111213141516struct Employee&#123; short id; int age; double wage;&#125;; int main()&#123; std::cout &lt;&lt; \"The size of Employee is \" &lt;&lt; sizeof(Employee) &lt;&lt; '\\n'; return 0;&#125;/*******ç»“æœ*************/The size of Employee is 16ç»“æœæ˜¯ï¼Œæˆ‘ä»¬åªèƒ½è¯´ç»“æ„ä½“çš„å¤§å°è‡³å°‘ä¸å®ƒæ‰€åŒ…å«çš„æ‰€æœ‰å˜é‡çš„å¤§å°ä¸€æ ·å¤§ã€‚ä½†å®ƒå¯ä»¥æ›´å¤§! å‡ºäºæ€§èƒ½åŸå› ï¼Œç¼–è¯‘å™¨æœ‰æ—¶ä¼šåœ¨ç»“æ„ä¸­æ·»åŠ ç©ºç™½(è¿™ç§°ä¸ºpadding(å¡«å……))ã€‚äº‹å®ä¸Šï¼Œä¸Šé¢ç¨‹åºä¸­çš„Employeeç»“æ„ä½“ä¸­ï¼Œç¼–è¯‘å™¨åœ¨æˆå‘˜idçš„åé¢æ·»åŠ äº†2ä¸ªå­—èŠ‚çš„å¡«å……(è¿™æ˜¯ä¸å¯è§çš„)ã€‚æ‰€ä»¥æ‰å¯¼ç»“æ„çš„å¤§å°ä¸º16å­—èŠ‚ï¼Œè€Œä¸æ˜¯14å­—èŠ‚ã€‚æœ¬è¯¾ä»‹ç»çš„ç»“æ„æœ‰æ—¶è¢«ç§°ä¸ºplain old data structs(æ™®é€šæ—§æ•°æ®ç»“æ„)(æˆ–PODç»“æ„)ï¼Œå› ä¸ºæˆå‘˜éƒ½æ˜¯æ•°æ®(å˜é‡)æˆå‘˜ã€‚å°†æ¥(å½“æˆ‘ä»¬è®¨è®ºç±»æ—¶)ï¼Œæˆ‘ä»¬å°†è®¨è®ºå…¶ä»–ç±»å‹çš„æˆå‘˜","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"ã€è½¬ã€‘Githubä¸‹è½½æé€Ÿ","slug":"å®ç”¨æŠ€å·§/[è½¬]Githubå…‹éš†&ä¸‹è½½æé€Ÿ","date":"2020-04-13T15:21:08.000Z","updated":"2020-04-19T14:38:29.546Z","comments":true,"path":"archives/260c7660.html","link":"","permalink":"https://longlongqin.github.io/archives/260c7660.html","excerpt":"Githubå…‹éš†&ä¸‹è½½æé€Ÿä»¥ä¸Šå†…å®¹è½¬è½½äºï¼šhttps://mp.weixin.qq.com/s/SYR4zvjhAH1mX9fxdp8cbAåŸä½œè€…ï¼šcodesheep","text":"Githubå…‹éš†&ä¸‹è½½æé€Ÿä»¥ä¸Šå†…å®¹è½¬è½½äºï¼šhttps://mp.weixin.qq.com/s/SYR4zvjhAH1mX9fxdp8cbAåŸä½œè€…ï¼šcodesheepä¸€ä¸ªç—›ç‚¹ä¼—æ‰€å‘¨çŸ¥ï¼ŒGitHubæ˜¯ä¸€ä¸ªå·¨å¤§çš„å¼€æºå®åº“ï¼Œä»¥åŠç¨‹åºå‘˜å’Œç¼–ç¨‹çˆ±å¥½è€…çš„èšé›†åœ°ï¼ŒåŒ…æ‹¬æˆ‘ä¹‹å‰æ¨èçš„è¯¸å¤šä¼˜ç§€çš„å¼€æºé¡¹ç›®å…¨éƒ¨éƒ½æ˜¯ä½äºGitHubä¸Šã€‚ä½†æ˜¯æ¯å½“æˆ‘ä»¬çœ‹åˆ°ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Œå‡†å¤‡å»ä¸‹ï¼ˆbaiï¼‰è½½ï¼ˆpiaoï¼‰æ—¶ï¼Œä¼šå‘ç° git cloneçš„é€Ÿåº¦å¼‚å¸¸ä¹‹æ…¢ï¼å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œåœ¨æˆ‘å®¶é‡Œ200Mç§»åŠ¨å®½å¸¦çš„ç¯å¢ƒä¸‹ï¼Œæˆ‘å…‹éš†å¼€æºé¡¹ç›®å°±æ²¡å‘ç°é€Ÿåº¦å¤§äºè¿‡ 20.00KiB/sçš„æ—¶å€™ï¼Œè¿™ç®€ç›´å¤ªéš¾å—äº†ã€‚å°é¡¹ç›®å€’è¿˜å¥½ï¼Œæˆ‘ç­‰å‡ åˆ†é’Ÿæ— æ‰€è°“ï¼›ä¸€æ—¦é¡¹ç›®åºå¤§èµ·æ¥ï¼Œæˆ–è€…é¡¹ç›®æ–‡ä»¶æ•°ç›®ä¸€å¤šï¼Œ git clone å¤§æ¦‚ç‡ä¼šå¤±è´¥ï¼å½“ç„¶ç½‘ä¸Šå¸¸è§çš„è¯¸å¦‚ä¿®æ”¹hostsã€ä»£ç†ç­‰æ–¹å¼å®é™…ä½¿ç”¨æ•ˆæœå¹¶ä¸ä¸€å®šå¥½ï¼Œè€Œä¸”ä¹Ÿä¸ç¨³å®šã€‚â€œç äº‘â€æ˜¯ä¸ªå¥½ä¸œè¥¿æ¥ä¸‹æ¥å°±ä»‹ç»ä¸€ç§GitHubä¸‹è½½çš„åŠ é€Ÿæ–¹æ³•ï¼šé€šè¿‡å›½å†…ç äº‘å¹³å°çš„è½¬æ¥ï¼Œæ¥å®ŒæˆGitHubä¸Šé¡¹ç›®çš„ä¸‹è½½åŠ é€Ÿã€‚æ„Ÿè°¢å…¬ä¼—å·å°ä¼™ä¼´iocæä¾›æ€è·¯ï¼ˆ1ï¼‰é¦–å…ˆç¡®ä¿ç äº‘ä¸Šæœ‰è´¦æˆ·ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œæ²¡æœ‰çš„å¯ä»¥è‡ªè¡Œæ³¨å†Œä¸€ä¸‹ã€‚ï¼ˆ2ï¼‰ç‚¹å‡»å³ä¸Šè§’æ–°å»ºä»“åº“çš„åŠ å· +ï¼Œé€‰æ‹©â€œä» GitHub/GitLabå¯¼å…¥ä»“åº“â€èœå•ï¼ˆ3ï¼‰ç„¶åå¡«å†™ä½äº GitHubä¸Šä½ æƒ³ cloneçš„ä»“åº“åœ°å€å¹¶å¯¼å…¥è¿™ä¸€æ­¥äº¤ç»™ç äº‘æ¥åšé€Ÿåº¦æ˜¯éå¸¸å¿«çš„ï¼Œä¸€ä¼šå„¿åŠŸå¤«ï¼Œç äº‘å°±å…‹éš†å‡ºäº†ä¸€ä»½å’ŒGitHubä¸Šä¸€æ¨¡ä¸€æ ·çš„é¡¹ç›®ï¼ï¼ˆ4ï¼‰æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ç äº‘ä¸Šçš„é¡¹ç›®åœ°å€ï¼Œå°†é¡¹ç›® cloneåˆ°æœ¬åœ°ï¼Œè¿™æ—¶å€™çš„cloneé€Ÿåº¦å°±å¾ˆå¿«äº†ï¼Œå‡  MB/sçš„é€Ÿåº¦æ˜¯æ²¡é—®é¢˜çš„ï¼Œå¾ˆå¿«é¡¹ç›®å°±ä¸‹è½½ä¸‹æ¥äº†ã€‚æŒ‰é“ç†è®²è¿™æ—¶å€™æˆ‘ä»¬çš„ç›®çš„å·²ç»è¾¾åˆ°äº†ï¼Œä¸è¿‡ä¸è¦å¿˜äº†ï¼Œè¿˜æœ‰ä¸€ä»¶äº‹æ²¡åšã€‚é‡æ–°å…³è”è¿œç«¯åœ°å€è¦çŸ¥é“ï¼Œè¿™æ—¶å€™å…‹éš†åˆ°æœ¬åœ°çš„é¡¹ç›®å…³è”çš„æ˜¯ç äº‘Giteeçš„åœ°å€ï¼Œå·²ç»å’ŒåŸæ¥çš„GitHubé¡¹ç›®å®Œå…¨è„±ç¦»äº†ï¼Œæ˜¯å¦å¤–ä¸€ä¸ªå‰¯æœ¬ã€‚åœ¨å¿…è¦æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚æˆ‘ä»¬å°±æ˜¯è¦ç»™GitHubä¸Šçš„æŸä¸ªé¡¹ç›®æ PRï¼‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é‡æ–°å°†æˆ‘ä»¬æœ¬åœ°çš„é¡¹ç›®å…³è”åˆ°åŸæ¥çš„GitHubé¡¹ç›®ä¸Šå»ï¼Œåšæ³•å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰é¦–å…ˆæ‰¾åˆ°ä½äºæœ¬åœ°ä»“åº“ç›®å½•ä¸‹çš„éšè—æ–‡ä»¶å¤¹ .gitï¼ˆ2ï¼‰ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ .gitæ–‡ä»¶å¤¹ä¸­çš„ configé…ç½®æ–‡ä»¶å°†é…ç½®æ–‡ä»¶ä¸­çš„ [remote&quot;origin&quot;].urlå­—æ®µé‡æ–°å…³è”åˆ°åŸæ¥ä½äºGitHubä¸Šçš„GitHubé¡¹ç›®åœ°å€å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¥ä¿®æ”¹è¿œç«¯åœ°å€ï¼Œæ•ˆæœä¸€æ ·çš„è‡³æ­¤å¤§åŠŸå‘Šæˆï¼Œæœ¬åœ°é¡¹ç›®å°±ç›¸å½“äºæ˜¯ cloneè‡ªGitHubï¼Œåç»­æä»£ç ï¼Œæ PRåˆ°GitHubä¸Šéƒ½æ²¡æœ‰é—®é¢˜ã€‚ä»¥ä¸Šå†…å®¹è½¬è½½äºï¼šhttps://mp.weixin.qq.com/s/SYR4zvjhAH1mX9fxdp8cbA","categories":[{"name":"å®ç”¨æŠ€å·§","slug":"å®ç”¨æŠ€å·§","permalink":"https://longlongqin.github.io/categories/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/"}],"tags":[{"name":"github","slug":"github","permalink":"https://longlongqin.github.io/tags/github/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"ã€è½¬ã€‘é…ç½®æ–¹æ³•é›†åˆ","slug":"é…ç½®/ã€è½¬ã€‘é…ç½®æ–¹æ³•é›†åˆ","date":"2020-04-13T15:21:08.000Z","updated":"2020-04-19T14:38:29.546Z","comments":true,"path":"archives/6de95ae.html","link":"","permalink":"https://longlongqin.github.io/archives/6de95ae.html","excerpt":"","text":"WSL ä½¿ç”¨æŒ‡å—ï¼šhttps://zhuanlan.zhihu.com/p/36482795OpenCVå®‰è£…é…ç½®ï¼š http://blog.csdn.net/poem_qianmo/article/details/19809337onedriveæ— æ³•å¯åŠ¨ï¼šhttps://blog.ooolg.com/index.php/20190121/568=568.html","categories":[{"name":"é…ç½®","slug":"é…ç½®","permalink":"https://longlongqin.github.io/categories/%E9%85%8D%E7%BD%AE/"}],"tags":[{"name":"é…ç½®","slug":"é…ç½®","permalink":"https://longlongqin.github.io/tags/%E9%85%8D%E7%BD%AE/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"C&C++/LearnCpp-chapter6","slug":"C&C++/LearnCpp-chapter6","date":"2020-04-06T05:59:00.000Z","updated":"2020-04-19T14:38:29.547Z","comments":true,"path":"archives/2faa8a4b.html","link":"","permalink":"https://longlongqin.github.io/archives/2faa8a4b.html","excerpt":"LearnCpp chapter6https://www.learncpp.com","text":"LearnCpp chapter6https://www.learncpp.com6.2 ç”¨æˆ·è‡ªå®šä¹‰namespaceåœ¨2.9 â€“ Naming collisions and an introduction to namespacesä¸­è®²è§£äº†å‘½åå†²çªå’Œå‘½åç©ºé—´çš„å†…å®¹ã€‚ç°åœ¨å†æ¬¡çœ‹ä¸€ä¸‹å‘½åå†²çªã€‚ä¸‹é¢çš„foo.cppå’Œgoo.cppä¸¤ä¸ªæºæ–‡ä»¶ï¼Œä¸­çš„å‡½æ•°æœ‰ç€ä¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒä»¬çš„åå­—å´æ˜¯ä¸€æ ·çš„ï¼šfoo.cpp12345//this dosomething() adds the value of its parametersint dosomething(intx, int y)&#123; return x+y;&#125;goo.cpp12345//this dosomething() subtracts the value of its parametersint doSomething(int x, int y)&#123; return x - y;&#125;main.cpp123456789#include &lt;iostream&gt;int dosomething(int x, int y); //forward declaration for dosomethingint main()&#123; std::cout &lt;&lt; dosometing(4, 3) &lt;&lt;'\\n'; //which dosometing will we get? return 0;&#125;æ­¤æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°†foo.cppå’Œgoo.cppéƒ½ç¼–è¯‘åœ¨åŒä¸€ä¸ªç¨‹åºä¸­ã€‚å› ä¸ºå®ƒä»¬ä¿©é‡Œé¢ä¸­çš„å‡½æ•°çš„åå­—ã€å‚æ•°éƒ½ä¸€æ ·ï¼Œè€Œä¸”åˆåœ¨åŒä¸€ä¸ªèŒƒå›´ä¸­(global scope)ï¼Œè¿™å°†ä¼šé€ æˆâ€œå‘½åå†²çªâ€ã€‚ç»“æœå°±æ˜¯ï¼Œé“¾æ¥å™¨å·¥ä½œæ—¶ï¼Œå°†ä¼šå‘ç”Ÿé”™è¯¯ï¼šgoo.cpp:3: multiple definition of &quot;doSomething(int, int)&quot;; foo.cpp:3: first defined hereä¸€ä¸ªè¾ƒå¥½çš„è§£å†³åŠæ³•å°±æ˜¯ï¼Œå°†ä½ çš„å‡½æ•°æ”¾åœ¨ä½ è‡ªå·±å®šä¹‰çš„â€œå‘½åç©ºé—´namespace **â€ä¸­ã€‚å®šä¹‰è‡ªå·±çš„namespaceC++å…è®¸æˆ‘ä»¬ä½¿ç”¨å…³é”®å­—namespaceæ¥å®šä¹‰è‡ªå·±çš„å‘½åç©ºé—´ã€‚ç”±ç”¨æˆ·è‡ªå®šä¹‰çš„å‘½åç©ºé—´ï¼Œå«ï¼šuser-defined namespacesã€‚è€Œ ç”±C++æä¾›çš„å‘½åç©ºé—´ï¼Œå¦‚ global namespaceï¼›æˆ–è€…ç”±åº“æä¾›çš„ï¼Œå¦‚namespace stdï¼›å®ƒä»¬å°±ä¸æ˜¯user-defined namespacesã€‚å‘½åç©ºé—´çš„æ ‡è¯†ç¬¦é€šå¸¸ ä¸å¤§å†™ã€‚ä¸‹é¢æ˜¯å¯¹ä¸Šé¢å‘½åå†²çªçš„å‡½æ•°çš„æ”¹å†™ï¼šfoo.cpp12345678namespace foo //å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œåå­—ä¸ºï¼šfoo&#123; //this dosomething() belongs to namespace foo int dosomething(int x, int y) &#123; return x+y; &#125;&#125;goo.cpp12345678namespace goo //å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œåå­—ä¸ºï¼šgoo&#123; //this dosomething() belongs namespace goo int dosomething(int x, int y) &#123; return x+y; &#125;&#125;main.cpp1234567int dosomething(int x, int y) //æå‰å¯¹å‡½æ•°dosomething()è¿›è¡Œå£°æ˜ int main()&#123; std::cout &lt;&lt;dosomething(4, 3)&lt;&lt;'\\n'; //which dosomething will we get? return 0;&#125;ç°åœ¨è¿™ä¸ªä¸¤ä¸ªdosomething()å‡½æ•°éƒ½åˆ†åˆ«å±äºä¸åŒçš„å‘½åç©ºé—´äº†ã€‚è®©æˆ‘ä»¬æ¥è¿è¡Œä¸€ä¸‹ã€‚ğŸ˜‚ï¼Œæ–°é—®é¢˜åˆå‡ºç°äº†ï¼šConsoleApplication1.obj : error LNK2019: unresolved external symbol &quot;int __cdecl doSomething(int,int)&quot; (?doSomething@@YAHHH@Z) referenced in function _mainåœ¨è¿™ä¸ªæ”¹ç‰ˆä¸­ï¼Œå…¶å®ç¼–è¯‘å™¨æ˜¯æ»¡æ„çš„(å› ä¸ºæˆ‘ä»¬å·²ç»è¿›è¡Œæå‰å£°æ˜)ã€‚ä½†æ˜¯é“¾æ¥å™¨æ‰¾ä¸åˆ°ä¸€ä¸ªåœ¨global namespaceä¸­çš„dosomethingçš„å®šä¹‰ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è™½ç„¶ä¸ºä¸¤ä¸ªdosomethingåˆ†åˆ«å£°æ˜åœ¨ä¸åŒçš„å‘½åç©ºé—´ï¼Œå¯æƒœçš„æ˜¯è¿™ä¸¤ä¸ªå‘½åç©ºé—´éƒ½ä¸å±äº å…¨å±€å‘½åç©ºé—´ ä¸­ã€‚è¿™é‡Œæœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š1.ä½¿ç”¨scope resolution operatorï¼›2.é€šè¿‡using statements*ä½¿ç”¨èŒƒå›´è§£ææ“ä½œç¬¦(::)è®¿é—®åç§°ç©ºé—´ *ã€èŒƒå›´è§£ææ“ä½œç¬¦ï¼šscope resolution operator(::)ã€‘å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç‰¹å®šåç§°ç©ºé—´ä¸­æŸ¥æ‰¾æ ‡è¯†ç¬¦çš„æœ€ä½³æ–¹æ³•æ˜¯ä½¿ç”¨scope resolution operator(::)â€œ::â€ï¼Œå®ƒå‘Šè¯‰ç¼–è¯‘å™¨ï¼šåº”è¯¥åœ¨è¯¥æ“ä½œç¬¦çš„ å·¦æ“ä½œæ•°è¡¨ç¤ºçš„èŒƒå›´ä¸­æŸ¥æ‰¾ æ“ä½œç¬¦å³è¾¹çš„æ“ä½œæ•°(ä¹Ÿå°±æ˜¯è¦æ‰¾çš„æ ‡è¯†ç¬¦)ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼šå¯¹äºåé¢çš„ç¤ºä¾‹ï¼Œä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œæˆ‘ä»¬å°†æŠŠç¤ºä¾‹å‹ç¼©ä¸ºä¸€ä¸ªæ–‡ä»¶è§£å†³æ–¹æ¡ˆã€‚12345678910111213141516171819202122232425#include &lt;iostream&gt; namespace foo // define a namespace named foo&#123; // This doSomething() belongs to namespace foo int doSomething(int x, int y) &#123; return x + y; &#125;&#125; namespace goo // define a namespace named goo&#123; // This doSomething() belongs to namespace goo int doSomething(int x, int y) &#123; return x - y; &#125;&#125; int main()&#123; std::cout &lt;&lt; foo::doSomething(4, 3) &lt;&lt; '\\n'; // use the doSomething() that exists in namespace foo return 0;&#125;å¯ä»¥æ³¨æ„åˆ°mainå‡½æ•°ä¸­çš„è¿™ä¸ªè¯­å¥ï¼šstd::cout &lt;&lt; foo::doSomething(4, 3) &lt;&lt; &#39;\\n&#39;;ï¼Œå°±æ˜¯ç”¨äº†â€œèŒƒå›´è§£æç¬¦ :: â€ã€‚è¯¥æ ‡è¯†ç¬¦çš„å·¦æ“ä½œæ•°ï¼šfooï¼Œè¡¨ç¤ºå‘½åç©ºé—´çš„åå­—ã€‚å³æ“ä½œæ•°è¡¨ç¤ºæ ‡è¯†ç¬¦ã€‚æ‰€ä»¥ï¼Œfoo::dosomething(4,3)ï¼Œå°±è¡¨ç¤ºï¼šè°ƒç”¨çš„å‡½æ•°dosomething()æ˜¯æ¥æºäºå‘½åç©ºé—´fooä¸­çš„ã€‚å°ç»“è§£å†³å‘½åå†²çªçš„æ­¥éª¤ä¸ºï¼šä¸ºè¿™äº›åŒåçš„å‡½æ•°ï¼Œå‡è®¾ç½®è‡ªå·±çš„å‘½åç©ºé—´ï¼›åœ¨ä½¿ç”¨è¿™ä¸ªåŒåå‡½æ•°çš„æ—¶å€™ï¼Œè¿˜éœ€è¦åŠ ä¸Šâ€œèŒƒå›´è§£æç¬¦ :: â€æ²¡æœ‰å‰ç¼€çš„èŒƒå›´è§£æç¬¦æ ¼å¼ï¼š:: æ ‡è¯†ç¬¦æ²¡æœ‰å‰ç¼€çš„èŒƒå›´è§£æç¬¦ï¼Œå°±ç›¸å½“äºå®ƒçš„èŒƒå›´æ˜¯å…¨å±€å‘½åç©ºé—´ã€‚ä¾‹å­ï¼š12345678910111213141516171819202122#include &lt;iostream&gt;void print() //this print lives in the global namespace&#123; std::cout &lt;&lt; \"there\"&lt;&lt;'\\n';&#125;namespace foo&#123; void print() // this print lives in the foo namespace &#123; std::cout &lt;&lt; \"Hello\"; &#125;&#125;int main()&#123; foo::print(); // call foo::print() ::print(); // call print() in global namespace (same as just calling print() in this case) return 0; &#125;å…è®¸å¤šä¸ªå‘½åç©ºé—´å—ï¼šMultiple namespace blocks allowedåœ¨å¤šä¸ªä½ç½®(è·¨å¤šä¸ªæ–‡ä»¶ï¼Œæˆ–åŒä¸€æ–‡ä»¶ä¸­çš„å¤šä¸ªä½ç½®)å£°æ˜åç§°ç©ºé—´å—æ˜¯åˆæ³•çš„ã€‚å‘½åç©ºé—´å†…çš„æ‰€æœ‰å£°æ˜éƒ½è¢«è®¤ä¸ºæ˜¯å‘½åç©ºé—´çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å­1ï¼ˆå¤šæ–‡ä»¶ä¸­ï¼‰ï¼šcircle.h123456789#if !defined(CIRCLE_H)#define CIRCLE_H namespace basicMath&#123; inline constexpr double pi&#123; 3.14 &#125;;&#125; #endifgrowth.h12345678910#if !defined(GROWTH_H)#define GROWTH_H namespace basicMath&#123; // the constant e is also part of namespace basicMath inline constexpr double e&#123; 2.7 &#125;;&#125; #endifmain.cpp123456789101112#include \"circle.h\" // for basicMath::pi#include \"growth.h\" // for basicMath::e #include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; basicMath::pi &lt;&lt; '\\n'; std::cout &lt;&lt; basicMath::e &lt;&lt; '\\n'; return 0;&#125;ç»“æœï¼š3.142.7æ ‡å‡†åº“å……å°±åˆ†åˆ©ç”¨äº†è¿™ä¸ªç‰¹æ€§ï¼Œå› ä¸ºæ¯ä¸ªæ ‡å‡†åº“å¤´æ–‡ä»¶éƒ½å°†å…¶å£°æ˜åŒ…å«åœ¨è¯¥å¤´æ–‡ä»¶ä¸­åŒ…å«çš„ å‘½åç©ºé—´std å—ä¸­ã€‚å¦åˆ™ï¼Œæ•´ä¸ªæ ‡å‡†åº“å¿…é¡»åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­å®šä¹‰!ã€noteã€‘ï¼šå°½ç®¡ä½ å¯ä»¥åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œå°†ä½ å†™çš„å‡½æ•°æ·»åŠ åˆ°std namespaceä¸­ï¼Œä½†æ˜¯std namespaceæœ‰ä¸€ä¸ªè§„åˆ™ï¼Œé‚£å°±æ˜¯ç¦æ­¢ç”¨æˆ·å°†è‡ªå·±çš„å‡½æ•°æ‰©å±•åˆ°å®ƒçš„é‡Œé¢ã€‚ä¾‹å­2å¦‚æœä½ å°†ä½ çš„ä»£ç åˆ†ç¦»å†å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œä½ å°±å¿…é¡»åœ¨å¤´æ–‡ä»¶å’ŒåŸæ–‡ä»¶ä¸­ä½¿ç”¨å‘½åç©ºé—´ã€‚add.h12345678910#if !defined(ADD_H)#define ADD_H namespace basicMath&#123; // function add() is part of namespace basicMath int add(int x, int y);&#125; #endifadd.cpp12345678910#include \"add.h\" namespace basicMath&#123; // define the function add() int add(int x, int y) &#123; return x + y; &#125;&#125;main.cpp12345678910#include \"add.h\" // for basicMath::add() #include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; basicMath::add(4, 3) &lt;&lt; '\\n'; return 0;&#125;å¦‚æœåœ¨add.cppä¸­çœç•¥äº†namespaceï¼Œå°†ä¼šå¯¼è‡´é“¾æ¥å™¨æ‰¾ä¸åˆ°basicMath::addã€‚å› ä¸ºè¿™ä¸ªæºæ–‡ä»¶åœ¨ç¼ºå°‘namespaceæ—¶ï¼Œå¯¹addçš„å®šä¹‰æ˜¯åœ¨å…¨å±€å‘½åç©ºé—´ä¸­çš„ã€‚å¦‚æœåœ¨add.hä¸­çœç•¥namespaceï¼Œå°†ä¼šå¯¼è‡´åœ¨â€œmain.cppâ€ä¸­ä¸èƒ½ä½¿ç”¨basicMath::addå› ä¸ºè¿™ä¸ªå¤´æ–‡ä»¶åœ¨ç¼ºå°‘namespaceæ—¶ï¼Œå¯¹addçš„å£°æ˜æ˜¯åœ¨å…¨å±€å‘½åç©ºé—´ä¸­çš„ã€‚åµŒå¥—å‘½åç©ºé—´å¦‚ï¼š123456789101112131415161718#include &lt;iostream&gt; namespace foo&#123; namespace goo // goo is a namespace inside the foo namespace &#123; int add(int x, int y) &#123; return x + y; &#125; &#125;&#125; int main()&#123; std::cout &lt;&lt; foo::goo::add() &lt;&lt; '\\n'; return 0;&#125;æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬è¦è°ƒç”¨å‡½æ•°addçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä½¿ç”¨æ ¼å¼ä¸ºï¼šfoo::goo::addåœ¨C++17ä¸­ï¼ŒåµŒå¥—çš„å‘½åç©ºé—´ä¹Ÿå¯ä»¥è¿™æ ·å£°æ˜ï¼š123456789101112131415#include &lt;iostream&gt; namespace foo::goo // goo is a namespace inside the foo namespace (C++17 style)&#123; int add(int x, int y) &#123; return x + y; &#125;&#125; int main()&#123; std::cout &lt;&lt; foo::goo::add() &lt;&lt; '\\n'; return 0;&#125;ç»™å‘½åç©ºé—´è®¾ç½®åˆ«åï¼šnamespace aliasesåœ¨ä½¿ç”¨åµŒå¥—çš„å‘½åç©ºé—´çš„å‡½æ•°æˆ–å˜é‡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å‘½åç©ºé—´å±‚çº§éƒ½å…¨éƒ¨å†™å®Œæ•´ï¼Œè¿™æ ·ä¼šå¾ˆéº»çƒ¦ï¼Œå¦‚æœæˆ‘ä»¬ç»™è¿™ä¸ªåµŒå¥—çš„å‘½åç©ºé—´èµ·ä¸€ä¸ªåˆ«åå°±çœäº‹å¤šäº†ï¼š123456789101112131415161718192021#include &lt;iostream&gt; namespace foo&#123; namespace goo &#123; int add(int x, int y) &#123; return x + y; &#125; &#125;&#125; int main()&#123; namespace boo = foo::goo; // boo now refers to foo::goo std::cout &lt;&lt; boo::add() &lt;&lt; '\\n'; // This is really foo::goo::add() return 0;&#125; // The boo alias ends here6.3 å±€éƒ¨å˜é‡åœ¨ 2.4 â€“ Introduction to local scope,ä»‹ç»äº†å±€éƒ¨å˜é‡ï¼Œå®ƒæ˜¯åœ¨å‡½æ•°ä¸­çš„å½¢å‚ã€‚å±€éƒ¨å˜é‡çš„å—èŒƒå›´æ ‡è¯†ç¬¦çš„èŒƒå›´å†³å®šäº†æ ‡è¯†ç¬¦åœ¨æºç ä¸­å¯è·å¾—çš„åŒºåŸŸã€‚èŒƒå›´æ˜¯ä¸€ä¸ªâ€œç¼–è¯‘æ—¶é—´â€çš„å±æ€§ã€‚å±€éƒ¨å˜é‡çš„ å—èŒƒå›´(block scope)ï¼Œä¸­çš„èŒƒå›´å°±æ˜¯ï¼šä»ä»–ä»¬å®šä¹‰å¼€å§‹ï¼Œåˆ°è¿™ä¸ªå—ç»“æŸ çš„è¿™ä¸ªèŒƒå›´ã€‚å¦‚ï¼š1234567#include &lt;iostream&gt;&#123; int i &#123;5&#125;; //i enters scope here double d &#123;4.0&#125;; // d enters scope here return 0;&#125;// i and d go out of scope hereè™½ç„¶å‡½æ•°çš„å½¢å‚æ²¡æœ‰è¢«å®šä¹‰åœ¨å‡½æ•°ä½“çš„å†…éƒ¨ï¼Œä½†æ˜¯å¯¹äºå…¸å‹å‡½æ•°è€Œè¨€ï¼Œå½¢å‚å¯ä»¥è¢«çœ‹æˆï¼Œæ˜¯å±äºå‡½æ•°ä½“å—çš„èŒƒå›´å†…ã€‚å¦‚ä¸‹ï¼š1234567int max(int x, int y) //x and y enter scope here&#123; //å°†xã€yä¸­è¾ƒå¤§è€…åˆ†é…ç»™max int max&#123;(x&gt;y) ? x : y&#125;; //max enters scope here return max;&#125;// x, y and max leave scope hereåŒä¸€èŒƒå›´å†…çš„å˜é‡åä¸ç›¸åŒä¸‹é¢çš„å‡½æ•°åœ¨ç¼–è¯‘æ—¶ä¼šå‡ºé”™ï¼Œå› ä¸ºè¯¥èŒƒå›´å†…çš„å˜é‡åç›¸åŒäº†ï¼š1234void someFunction(int x)&#123; int x&#123;&#125;; //ç¼–è¯‘æ—¶ä¼šå‡ºé”™ï¼Œå› ä¸ºè¿™é‡Œçš„xå’Œå½¢å‚xä¹‹é—´å‘½åå†²çªäº†&#125;å±€éƒ¨å˜é‡çš„è‡ªåŠ¨å­˜å‚¨æœŸå˜é‡çš„å­˜å‚¨æœŸ(storage duration),ä¹Ÿå«æŒç»­æ—¶é•¿(duration)å†³å®šäº†ä»€ä¹ˆæ—¶é—´ä»¥åŠå¦‚ä½•åˆ›é€ å’Œé”€æ¯å®ƒã€‚é€šå¸¸ï¼Œå˜é‡çš„å­˜å‚¨å™¨ç›´æ¥å†³å®šäº†å®ƒçš„â€œç”Ÿå‘½å‘¨æœŸ(lifetime)â€ä¾‹å¦‚ï¼Œå±€éƒ¨å˜é‡çš„å­˜å‚¨å™¨ï¼Œæ„å‘³ç€å®ƒåœ¨è¢«å®šä¹‰æ—¶å°±è¢«åˆ›å»ºï¼Œç„¶ååœ¨ä»–è¢«å®šä¹‰çš„èŒƒå›´å—çš„å°¾éƒ¨è¢«é”€æ¯ï¼š1234567int main()&#123; int i &#123;5&#125;; //i created and initialized here double d &#123;4.0&#125;; //d created and initialized here return 0;&#125; // i and d are destoryed hereç”±äºè¿™ä¸ªåŸå› ï¼Œå±€éƒ¨å˜é‡ æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºï¼šè‡ªåŠ¨å˜é‡åµŒå¥—å¿«ä¸­çš„å±€éƒ¨å˜é‡å±€éƒ¨å˜é‡å¯ä»¥è¢«å®šä¹‰åœ¨åµŒå¥—å—ä¸­ï¼Œè¿™å’Œåœ¨å‡½æ•°ä½“å—ä¸­çš„å±€éƒ¨å˜é‡å·¥ä½œæµç¨‹ç›¸åŒï¼š1234567891011int main() //å¤–éƒ¨å—&#123; int x&#123;5&#125;; //x enters scope and is created here &#123; //åµŒå¥—å— int y &#123;7&#125;; //y enters scope and is created here &#125; // y goes out of scope and is destroyed here //æ­¤æ—¶ï¼Œyå°±ä¸èƒ½å†è¢«ç”¨äº†ï¼Œå› ä¸ºå®ƒä¸å±äºç°åœ¨æ‰€åœ¨çš„èŒƒå›´ return 0;&#125; // x goes out of scope and is destoryed hereæ³¨æ„ï¼šå˜é‡xçš„èŒƒå›´æ˜¯æ•´ä¸ªmianå‡½æ•°å—ä¸­ï¼Œè‡ªç„¶ï¼Œåœ¨åµŒå¥—å—ä¸­ï¼Œå˜é‡xä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼Œå³ä¹Ÿå¯ä»¥è®¿é—®å®ƒã€‚å±€éƒ¨å˜é‡çš„æ— è¿æ¥æ ‡è¯†ç¬¦çš„å¦ä¸€ä¸ªå±æ€§å°±æ˜¯ï¼šâ€œè¿æ¥(linkage)â€ã€‚ä¸€ä¸ªæ ‡è¯†ç¬¦çš„linkageå†³å®šäº†è¯¥æ ‡è¯†ç¬¦çš„å…¶ä»–å£°æ˜æ˜¯å¦å¼•ç”¨çš„æ˜¯ç›¸åŒçš„å¯¹è±¡ã€‚å±€éƒ¨å˜é‡æ²¡æœ‰å…³è”æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹ä¸€ä¸ªæ ‡è¯†ç¬¦çš„æ¯ä¸€ä¸ªå£°æ˜éƒ½ä»£è¡¨ä¸åŒçš„å¯¹è±¡å¦‚ï¼š12345678int main()&#123; int x &#123;2&#125;; // local variable, no linkage &#123; int x &#123;3&#125;; //è¿™ä¸ªæ ‡è¯†ç¬¦xä¸ä¸Šé¢çš„æ ‡è¯†ç¬¦xï¼Œè¡¨ç¤ºçš„æ˜¯ä¸åŒå¯¹è±¡(å°½ç®¡ä»–ä»¬åå­—ç›¸åŒ) //ä½†æ˜¯ç°åœ¨åµŒå¥—å¤–éƒ¨çš„å˜é‡xè¢«éšè—èµ·æ¥äº†(åœ¨6.5èŠ‚ä¼šè®²åˆ°å˜é‡éšè—) &#125;&#125;å˜é‡å®šä¹‰çš„èŒƒå›´å¦‚æœä¸€ä¸ªå˜é‡ä»…åœ¨åµŒå¥—å—ä¸­ä½¿ç”¨ï¼Œé‚£å®ƒå°±åº”è¯¥æ—¨åœ¨åµŒå¥—å—ä¸­è¢«å®šä¹‰ï¼š1234567891011121314#include &lt;iostream&gt;int main()&#123; //don't define y here &#123; //yåªåœ¨è¿™ä¸ªå—ä¸­è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå®šä¹‰å®ƒ int y&#123;5&#125;; std::cout &lt;&lt;y&lt;&lt;'\\n'; &#125; return 0;&#125;æ‰€ä»¥ï¼Œæˆ‘ä»¬å°½é‡æŠŠå˜é‡å®šä¹‰åœ¨ï¼Œä½¿ç”¨å®ƒçš„èŒƒå›´å†…éƒ¨ã€‚6.4 å…¨å±€å˜é‡å…¨å±€å˜é‡çš„å£°æ˜é€šå¸¸ï¼Œå…¨å±€å˜é‡å£°æ˜æ˜¯åœ¨ï¼šå¤´æ–‡ä»¶çš„ä¸‹é¢ï¼Œåœ¨å…¶ä»–ä»£ç çš„ä¸Šé¢ã€‚123456789101112131415161718192021222324252627282930#include &lt;iostream&gt;//åœ¨å‡½æ•°å¤–é¢å£°æ˜çš„å˜é‡æ˜¯å…¨å±€å˜é‡int g_x &#123;&#125;; // global variable g_xvoid doSomething()&#123; // global variables can be seen and used everywhere in the file g_x = 3; std::cout &lt;&lt; g_x &lt;&lt; '\\n';&#125;int main()&#123; doSomething(); std::cout &lt;&lt; g_x &lt;&lt; '\\n'; // global variables can be seen and used everywhere in the file g_x = 5; std::cout &lt;&lt; g_x &lt;&lt; '\\n'; return 0;&#125;// g_x goes out of scope here/********ç»“æœ*****/335æŒ‰ç…§æƒ¯ä¾‹ï¼Œ åœ¨å…¨å±€å˜é‡åå­—åŠ ä¸Šå‰ç¼€â€œgâ€æˆ–è€…â€œg_â€ï¼Œæ¥ä¾¿äºæ˜¯æ˜¾ç¤ºçš„è¯´æ˜å®ƒæ˜¯ å…¨å±€å˜é‡å…¨å±€å˜é‡çš„file scope&amp;é™æ€æŒç»­æ—¶é—´file scopeä¹Ÿå«ï¼šå…¨å±€èŒƒå›´(global scope)æˆ–è€…å…¨å±€å‘½åç©ºé—´èŒƒå›´(global namespace scope)å› ä¸ºå…¨å±€å˜é‡æ˜¯åœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰çš„ï¼Œæ‰€ä»¥ä¹Ÿè¢«è§†ä¸ºâ€œå…¨å±€å‘½åç©ºé—´(global namespace)â€çš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥ï¼Œæ‰æœ‰global namespace scopeè¿™ä¸ªå«æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ä»è¢«å®šä¹‰å¼€å§‹ï¼Œåˆ°æ‰€åœ¨æ–‡ä»¶çš„ç»“æŸæœŸé—´ éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚å…¨å±€å˜é‡åœ¨ç¨‹åºå¼€å§‹è¢«åˆ›å»ºï¼Œåœ¨ç¨‹åºç»“æŸæ—¶è¢«é”€æ¯ã€‚è¿™æˆä¸ºâ€œé™æ€æŒç»­æ—¶é—´(static duration)â€æœ‰ç€â€˜static durationâ€™çš„å˜é‡ï¼Œä¹Ÿè¢«ç§°ä¸ºï¼šâ€œé™æ€å˜é‡(static variable)â€å±€éƒ¨å˜é‡é»˜è®¤æ˜¯ä¸è¢«åˆå§‹åŒ–çš„ï¼Œå…¨å±€å˜é‡é»˜è®¤æ˜¯è¢«åˆå§‹åŒ–ä¸º0çš„å…¨å±€å˜é‡çš„åˆå§‹åŒ–123int g_x; //æ²¡æœ‰æ˜¾ç¤ºçš„åˆå§‹åŒ–å˜é‡(æ‰€ä»¥é»˜è®¤åˆå§‹åŒ–ä¸º0)int g_y&#123;&#125;; //åˆå§‹åŒ–ä¸º0int g_z&#123;3&#125;; //æ˜¾ç¤ºçš„åˆå§‹åŒ–ä¸º3å¸¸é‡å±€éƒ¨å˜é‡ä¸å±€éƒ¨å˜é‡ä¸€æ ·ï¼Œå…¨å±€å˜é‡ä¹Ÿå¯ä»¥æ˜¯å¸¸é‡ã€‚åªè¦æ˜¯å¸¸é‡ï¼Œé‚£å®ƒå°±å¿…é¡»è¢«åˆå§‹åŒ–ã€‚1234567891011121314151617181920212223242526#include &lt;iostream&gt;const int g_x; //error:å¸¸é‡å‹çš„å˜é‡å¿…é¡»è¦è¢«åˆå§‹åŒ–constexpr int g_w; //error:å¸¸é‡å‹çš„å˜é‡å¿…é¡»è¦è¢«åˆå§‹åŒ–ï¼ˆconstexprï¼Œè¡¨ç¤ºå®ƒæ˜¯ ç¼–è¯‘æ—¶å¸¸é‡ï¼‰const int g_y &#123;1&#125;; //æ­£ç¡®ï¼Œåˆå§‹åŒ–äº†constexpr int g_z &#123;2&#125;; //æ­£ç¡®ï¼Œåˆå§‹åŒ–äº†void dosomething()&#123; //å…¨å±€å˜é‡åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªåœ°æ–¹éƒ½æ˜¯æœ‰æ•ˆçš„(å¯ä»¥è¢«çœ‹è§å’Œä½¿ç”¨) std::cout &lt;&lt; g_y &lt;&lt; '\\n'; std::cout &lt;&lt; g_z &lt;&lt; '\\n'; &#125;int main()&#123; dosomething(); //å…¨å±€å˜é‡åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªåœ°æ–¹éƒ½æ˜¯æœ‰æ•ˆçš„(å¯ä»¥è¢«çœ‹è§å’Œä½¿ç”¨) std::cout &lt;&lt; g_y &lt;&lt; '\\n'; std::cout &lt;&lt; g_z &lt;&lt; '\\n'; return 0;&#125;// g_y and g_z goes out of scope hereå°ç»“123456789101112// Non-constant global variables(éå¸¸é‡çš„å…¨å±€å˜é‡)int g_x; // defines non-initialized global variable (zero initialized by default)int g_x &#123;&#125;; // defines explicitly zero-initialized global variableint g_x &#123; 1 &#125;; // defines explicitly initialized global variable // Const global variablesconst int g_y; // error: const variables must be initializedconst int g_y &#123; 2 &#125;; // defines initialized global constant // Constexpr global variablesconstexpr int g_y; // error: constexpr variables must be initializedconstexpr int g_y &#123; 3 &#125;; // defines initialized global const6.5 å˜é‡è¢«éšè—å±€éƒ¨å˜é‡è¢«éšè—123456789101112131415161718192021#include &lt;iostream&gt;int main()&#123;// outer block int apples &#123; 5 &#125;; // åµŒå¥—å¤–éƒ¨çš„apples &#123;// nested block std::cout &lt;&lt;apples&lt;&lt;'\\n'; //è¿™é‡Œçš„applesæ˜¯åµŒå¥—å¤–éƒ¨çš„ int apples &#123;0&#125;; //åœ¨åµŒå¥—å†…éƒ¨å®šä¹‰å˜é‡apples //ç°åœ¨çš„applesæŒ‡çš„æ˜¯åµŒå¥—å†…éƒ¨ çš„apples.åµŒå¥—å¤–éƒ¨çš„applesç°åœ¨è¢«éšè—èµ·æ¥äº† apples = 10; //ç°åœ¨è¢«èµ‹å€¼çš„applesæŒ‡çš„æ˜¯åµŒå¥—å†…éƒ¨çš„apples std::cout &lt;&lt; apples &lt;&lt;'\\n'' &#125; //åµŒå¥—å—å†…éƒ¨çš„applesè¢«é”€æ¯ std::cout &lt;&lt;apples&lt;&lt;'\\n'; //è¿™ä¸ªapplesæŒ‡çš„æ˜¯åµŒå¥—å¤–éƒ¨çš„apples(å› ä¸ºç°åœ¨ï¼ŒåµŒå¥—å†…éƒ¨çš„appleså·²ç»è¢«é”€æ¯) return 0ï¼›&#125; //åµŒå¥—å¤–éƒ¨çš„applesè¢«é”€æ¯è¿è¡Œç»“æœï¼š1235105å…¨å±€å˜é‡è¢«éšè—å°±åƒå±€éƒ¨å˜é‡ä¸­çš„ï¼ŒåµŒå¥—å—ä¸­çš„å˜é‡å¯ä»¥å°†åµŒå¥—å¤–éƒ¨çš„åŒåå˜é‡ä»¥è—èµ·æ¥ ä¸€æ ·ã€‚å±€éƒ¨å˜é‡å¯ä»¥å°†å…¨å±€ä¸­çš„åŒåå˜é‡éšè—èµ·æ¥:123456789101112131415161718#include &lt;iostream&gt;int a &#123;5&#125;; //å…¨å±€å˜é‡ void foo() &#123; std::cout &lt;&lt;\"global variable aï¼š\"&lt;&lt;a&lt;&lt;'\\n';//æ­¤æ—¶ï¼Œå…¨å±€å˜é‡aè¿˜æ²¡æœ‰è¢«éšè—ã€‚å³ï¼Œè¿™é‡Œçš„å˜é‡aï¼ŒæŒ‡çš„æ˜¯å…¨å±€å˜é‡ &#125;int main()&#123; int a &#123;7&#125;; //æ­¤æ—¶ï¼Œå…¨å±€å˜é‡aå°±è¢«è¿™é‡Œçš„å±€éƒ¨å˜é‡a éšè—èµ·æ¥äº† ++a; //å±€éƒ¨å˜é‡aåŠ 1ï¼Œè€Œä¸æ˜¯å…¨å±€å˜é‡ std::cout &lt;&lt; \"local variable a: \" &lt;&lt; a &lt;&lt; '\\n'; foo(); return 0;&#125; // å±€éƒ¨å˜é‡aè¢«é”€æ¯è¿è¡Œç»“æœ:12local variable a: 8global variable a: 5ç„¶è€Œå•Šï¼Œå…¨å±€å˜é‡æ˜¯å±äºå…¨å±€çš„å‘½åç©ºé—´ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ èŒƒå›´è§£æç¬¦(::)ï¼ˆä¸å¸¦å‰ç¼€çš„ï¼Œå³é»˜è®¤æ˜¯åœ¨å…¨å±€å‘½åç©ºé—´ï¼‰æ¥å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å…¨å±€å˜é‡ï¼š123456789101112131415#include &lt;iostream&gt;int a &#123;5&#125;; //å…¨å±€å˜é‡int main()&#123; int a &#123;7&#125;; //æ­¤æ—¶ï¼Œå°†å…¨å±€å˜é‡aéšè—èµ·æ¥äº† ++aï¼› //å±€éƒ¨å˜é‡aåŠ 1ï¼Œè€Œä¸æ˜¯å…¨å±€å˜é‡ --(::a); //æ­¤æ—¶æ˜¯å¯¹äºå…¨å±€å˜é‡ï¼Œå‡ä¸€ std::cout &lt;&lt; \"local variable a: \" &lt;&lt; a &lt;&lt; '\\n'; std::cout &lt;&lt; \"global variable a: \" &lt;&lt; ::a &lt;&lt; '\\n'; return 0; &#125;//local a è¢«é”€æ¯è¿è¡Œç»“æœï¼š12local variable a: 8global variable a: 4é¿å…å˜é‡è¢«éšè—é€šå¸¸åº”è¯¥é¿å…å±€éƒ¨å˜é‡çš„éšè—ï¼Œå› ä¸ºå®ƒä¼šåœ¨ä½¿ç”¨æˆ–ä¿®æ”¹é”™è¯¯çš„å˜é‡æ—¶å¯¼è‡´æ— æ„çš„é”™è¯¯ã€‚ä¸€äº›ç¼–è¯‘å™¨ä¼šåœ¨å˜é‡è¢«éšè—æ—¶å‘å‡ºè­¦å‘Šã€‚6.6 å†…éƒ¨è¿æ¥åœ¨ 6.3 â€“ Local variablesä¸­ï¼Œè®²åˆ°ï¼šâ€œä¸€ä¸ªæ ‡è¯†ç¬¦çš„è¿æ¥å†³å®šäº†è¯¥åç§°çš„å…¶ä»–å£°æ˜æ˜¯å¦å¼•ç”¨åŒä¸€å¯¹è±¡â€å’Œâ€œå±€éƒ¨å˜é‡çš„æ— è¿æ¥â€å…¨å±€å˜é‡å’Œå‡½æ•°æ ‡è¯†ç¬¦æœ‰ï¼šå†…éƒ¨é“¾æ¥(internal linkage)å’Œå¤–éƒ¨é“¾æ¥(external linkage)ã€‚æœ¬èŠ‚ä¸»è¦è®²å†…éƒ¨é“¾æ¥ã€‚ä¸€ä¸ªæ ‡è¯†è‹¥æ˜¯å†…éƒ¨è¿æ¥ï¼Œé‚£å®ƒå°±åªèƒ½åœ¨è¿™ä¸€ä¸ªæ–‡ä»¶ä¸­æœ‰æ•ˆ(å¯ä»¥è¢«çœ‹åˆ°å’Œä½¿ç”¨)ï¼›è€Œä¸å¯ä»¥åœ¨å…¶ä»–æ–‡ä»¶ä¸­çœ‹åˆ°å’Œä½¿ç”¨ã€ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ²¡æœ‰æš´éœ²ç»™é“¾æ¥å™¨ã€‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œå®ƒä»¬åˆ†åˆ«å«æœ‰ä¸€ä¸ªç›¸åŒåå­—çš„æ ‡è¯†ç¬¦(è€Œä¸”è¿™è¿™ä¸ªåŒåçš„æ ‡è¯†ç¬¦æ˜¯ å†…éƒ¨è¿æ¥)ï¼Œé‚£ä¹ˆè¿™ä¸ªåŒåçš„æ ‡è¯†ç¬¦å°±è¢«çœ‹å¾…æˆç›¸äº’ç‹¬ç«‹çš„ã€‚å…¨å±€å˜é‡å†…éƒ¨è¿æ¥å…¨å±€å˜é‡æ˜¯å†…éƒ¨é“¾æ¥æ—¶ï¼Œä¹Ÿè¢«ç§°ä¸ºï¼šå†…éƒ¨å˜é‡(internal variables)ã€‚è®© éå¸¸é‡çš„å…¨å±€å˜é‡ æˆä¸ºå†…éƒ¨å˜é‡ï¼Œéœ€è¦ä½¿ç”¨å…³é”®å­—staticï¼›ï¼ˆå› ä¸ºéå¸¸é‡çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å¤–éƒ¨é“¾æ¥ çš„ï¼‰è€Œ å¸¸é‡çš„å…¨å±€å˜é‡ é»˜è®¤çš„å°±æ˜¯ å†…éƒ¨å˜é‡ã€‚å¦‚ï¼š123456789static int g_x; //éå¸¸é‡çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å¤–éƒ¨é“¾æ¥ã€‚ä½†æ˜¯åŠ ä¸Šå…³é”®å­—staticåï¼Œå°±å˜æˆå†…éƒ¨è¿æ¥const int g_y &#123;1&#125;; //const çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å†…éƒ¨è¿æ¥constexpr int g_z &#123;2&#125;; //constexpr çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å†…éƒ¨è¿æ¥int main()&#123; return 0;&#125;constå’Œconstexprçš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å†…éƒ¨è¿æ¥(æ‰€ä»¥ï¼Œä¸éœ€è¦åŠ  å…³é”®å­—static)ä¸€ä¸ªå®šä¹‰è§„åˆ™å’Œå†…éƒ¨è¿æ¥è¿˜è®°å¾—åœ¨ 2.7 â€“ Forward declarations and definitions,ä¸­è®²åˆ°ä¸€ä¸ªå®šä¹‰çš„è§„åˆ™ï¼šåœ¨æ–‡ä»¶æˆ–ç¨‹åºä¸­ï¼Œ*ä¸€ä¸ª*å¯¹è±¡æˆ–è€…å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ã€‚ç„¶è€Œï¼Œè¿™ä¸€ä¸ªæˆ‘ä»¬å´åœ¨ä¸€ä¸ªç¨‹åºä¸­å¯¹ä¸€ä¸ªå¯¹è±¡æˆ–å‡½æ•°è¿›è¡Œäº†â€œå¤šæ¬¡å®šä¹‰â€ï¼Œè¿™æ˜¯å¦è¿èƒŒäº†ä¸Šé¢çš„è§„åˆ™å‘¢ï¼Ÿç­”ï¼šä¸è¿èƒŒã€‚å› ä¸ºæœ¬èŠ‚ä¸­æˆ‘ä»¬å°†å®ƒä»¬è®¾ç½®ä¸ºå†…éƒ¨è¿æ¥ï¼Œæ­¤æ—¶è™½ç„¶å®ƒä»¬çš„åå­—ç›¸åŒï¼Œä½†æ˜¯ç›¸äº’ç‹¬ç«‹ï¼ˆå³ï¼Œå®ƒä»¬ç›¸å½“äºä¸åŒçš„å¯¹è±¡æˆ–å‡½æ•°ï¼Œåªæ˜¯åå­—ç›¸åŒã€‚å°±å¥½åƒä¸¤ä¸ªåŒåçš„äººä¸€æ ·ï¼‰ã€‚æ‰€ä»¥ä¸è¿èƒŒä¸Šé¢çš„å®šä¹‰è§„åˆ™ã€‚å‡½æ•°å†…éƒ¨è¿æ¥å› ä¸ºâ€œè¿æ¥(linkage)â€æ˜¯æ ‡è¯†ç¬¦çš„å±æ€§(æ ‡è¯†ç¬¦ä¸ä»…ä»…åªä»£è¡¨å˜é‡(â˜„âŠ™Ï‰âŠ™)â˜„ï¼Œå› ä¸ºå‡½æ•°çš„åå­—ä¹Ÿæ˜¯æ ‡è¯†ç¬¦)ã€‚æ‰€ä»¥ï¼Œå‡½æ•°æ ‡è¯†ç¬¦ä¹Ÿå…·æœ‰ å†…éƒ¨è¿æ¥ çš„å±æ€§ã€‚å¦‚ï¼šadd.cpp123456//è¿™ä¸ªå‡½æ•°å‰ä½¿ç”¨å…³é”®å­—staticï¼Œè¡¨ç¤ºå®ƒç°åœ¨åªåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æœ‰æ•ˆ//å¦‚æœï¼Œä¼å›¾é€šè¿‡å‡½æ•°æå‰å£°æ˜ä»ï¼Œä»å¦ä¸€ä¸ªæ–‡ä»¶è®¿é—®å®ƒï¼Œå°†å¤±è´¥static int add (int x, int y)&#123; return x+y;&#125;main.cpp123456789#include &lt;iostream&gt;int add (int x, int y); //å¯¹å‡½æ•°addï¼Œæå‰å£°æ˜int main()&#123; std::cout &lt;&lt; add(3, 4) &lt;&lt;'\\n'; return 0;&#125;ä¸Šé¢çš„ç¨‹åºï¼Œåœ¨é“¾æ¥å™¨è¿æ¥æ—¶ï¼Œå°†ä¼šå‡ºé”™ã€‚å› ä¸ºå‡½æ•°addåœ¨main.cppä¸­ä¸å¯è®¿é—®å°ç»“123456789// Internal global variables definitions:static int g_x; // defines non-initialized internal global variable (zero initialized by default)static int g_x&#123; 1 &#125;; // defines initialized internal global variable const int g_y &#123; 2 &#125;; // defines initialized internal global const variableconstexpr int g_y &#123; 3 &#125;; // defines initialized internal global constexpr variable // Internal function definitions:static int foo() &#123;&#125;; // defines internal function6.7 å¤–éƒ¨è¿æ¥ä¸€ä¸ªæ ‡è¯†ç¬¦å…·æœ‰ å¤–éƒ¨è¿æ¥(external linkage)çš„å±æ€§ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥åœ¨æ•´ä¸ªç¨‹åºä¸­(ä¸ä»…ä»…åªåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­)è¢«çœ‹è§å’Œè®¿é—®ã€‚ï¼ˆåœ¨å…¶ä»–æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡æå‰å£°æ˜æ¥è®¿é—®å®ƒï¼‰æ‰€ä»¥ï¼Œå…·æœ‰å¤–éƒ¨è¿æ¥å±æ€§çš„è¡¨ç¤ºç¬¦ï¼Œæ‰æ˜¯çœŸæ­£çš„â€œå…¨å±€â€å˜é‡å‡½æ•°é»˜è®¤æ˜¯å¤–éƒ¨é“¾æ¥åœ¨ 2.8 â€“ Programs with multiple code filesä¸­ï¼Œè®²åˆ°æˆ‘ä»¬å¯ä»¥ä»å…¶ä»–æ–‡ä»¶ä¸­è°ƒç”¨å‡½æ•°ï¼Œè¿™æ˜¯å› ä¸ºè¿™ä¸ªå‡½æ•°é»˜è®¤æ˜¯â€œå¤–éƒ¨é“¾æ¥â€çš„ã€‚åœ¨ä»å…¶ä»–æ–‡ä»¶ä¸­è°ƒç”¨å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»è¦å¯¹è¿™ä¸ªå‡½æ•°è¿›è¡Œ æå‰å£°æ˜(forward declaration)å› ä¸ºï¼Œæå‰å£°æ˜å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå‡½æ•°çš„å­˜åœ¨ï¼›è€Œé“¾æ¥å™¨åˆ™æ˜¯å°†å‡½æ•°è°ƒç”¨è¿æ¥åˆ°å®é™…çš„å‡½æ•°å®šä¹‰å¦‚ï¼ša.cpp123456#include &lt;iostream&gt;void sayHi() //è¿™ä¸ªå‡½æ•°é»˜è®¤æ˜¯ å¤–éƒ¨è¿æ¥ï¼Œæ‰€ä»¥ä»–å¯ä»¥åœ¨æ•´ä¸ªç¨‹åº(åŒ…æ‹¬å…¶ä»–æ–‡ä»¶)ä¸­è¢«çœ‹è§&#123; std::cout &lt;&lt; \"hi\";&#125;main.cpp12345678void sayHi(); //å¯¹å‡½æ•°è¿›è¡Œæå‰å£°æ˜ï¼Œä½¿å¾—è¯¥å‡½æ•°åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å¯ä»¥è¢«è®¿é—®int main()&#123; sayHi(); //è¿™é‡Œæ˜¯ä»å…¶ä»–æ–‡ä»¶ä¸­è°ƒç”¨æ­¤å‡½æ•°ï¼Œé“¾æ¥å™¨å°†æŠŠè¿™ä¸ªè°ƒç”¨è¿æ¥åˆ°å‡½æ•°å®šä¹‰ return 0;&#125;è¿è¡Œç»“æœ:1hiå…¨å±€å˜é‡å¤–éƒ¨è¿æ¥å…¨å±€å˜é‡å…·æœ‰å¤–éƒ¨è¿æ¥å±æ€§æ—¶ï¼Œä¹Ÿç§°ä¸ºï¼šå¤–éƒ¨å˜é‡(external variables)éå¸¸é‡çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å¤–éƒ¨å˜é‡ï¼›å¸¸é‡çš„å…¨å±€å˜é‡ è¦æƒ³æˆä¸ºå¤–éƒ¨å˜é‡ï¼Œéœ€è¦ä½¿ç”¨å…³é”®å­—externå¦‚ï¼š123456789int g_x &#123;2&#125;; //éå¸¸é‡çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å¤–éƒ¨å˜é‡ï¼›extern const int g_y &#123;3&#125;;//const çš„å…¨å±€å˜é‡å¯ä»¥è¢«å®šä¹‰æˆ å¤–éƒ¨å˜é‡ï¼Œéœ€è¦åŠ å…³é”®å­—externextern constexpr int g_z &#123;3&#125;; //constexpr çš„å…¨å±€å˜é‡å¯ä»¥è¢«å®šä¹‰æˆ å¤–éƒ¨å˜é‡,éœ€è¦åŠ å…³é”®å­—externint main()&#123; return 0;&#125;é»˜è®¤æƒ…å†µä¸‹ï¼Œéconstå…¨å±€å˜é‡æ˜¯å¤–éƒ¨å˜é‡(å¦‚æœä½¿ç”¨ï¼Œexternå…³é”®å­—å°†è¢«å¿½ç•¥)ã€‚externæå‰å£°æ˜å˜é‡è¦å®é™…ä½¿ç”¨åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰çš„å¤–éƒ¨å…¨å±€å˜é‡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä½¿ç”¨å®ƒçš„æ–‡ä»¶ä¸­å¯¹å…¨å±€å˜é‡è¿›è¡Œæå‰å£°æ˜ã€‚å¯¹äºå˜é‡ï¼Œåœ¨åˆ›å»ºä¸€ä¸ªæå‰å£°æ˜æ—¶ï¼Œä¹Ÿæ˜¯éœ€è¦ä½¿ç”¨å…³é”®å­—externçš„(æ²¡æœ‰åˆå§‹åŒ–å€¼)ï¼šå¦‚ï¼ša.cpp123//å…¨å±€å˜é‡çš„å®šä¹‰int g_x &#123;2&#125;; //éå¸¸é‡çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å¤–éƒ¨é“¾æ¥extern const int g_y &#123;3&#125;; //å¸¸é‡çš„å…¨å±€å˜é‡æ˜¯å†…éƒ¨è¿æ¥ï¼Œä½†ä½¿ç”¨å…³é”®å­—externåï¼Œå˜ä¸º å¤–éƒ¨é“¾æ¥main.cpp12345678910#include &lt;iostream&gt;extern int g_x; //å¯¹å˜é‡g_xçš„æå‰å£°æ˜ã€‚å®ƒçš„å®šä¹‰åœ¨å…¶ä»–æ–‡ä»¶ä¸­extern const int g_y; //å¯¹å¸¸é‡å˜é‡g_yçš„æå‰å£°æ˜ã€‚å®ƒçš„å®šä¹‰åœ¨å…¶ä»–æ–‡ä»¶ä¸­int main()&#123; std&lt;&lt; g_x; //ç»“æœä¸º2 return 0;&#125;å‡½æ•°æå‰å£°æ˜ä¸ç”¨externå‡½æ•°çš„æå‰å£°æ˜ä¸éœ€è¦å…³é”®å­—externç¼–è¯‘å™¨èƒ½æå‘Šè¯‰ä½ è¿™ä¸ªå‡½æ•°åœ¨å“ªå®šä¹‰ï¼Œä¹Ÿå¯ä»¥æ ¹æ®æ˜¯å¦æä¾›å‡½æ•°ä½“æ¥è¿›è¡Œæå‰å£°æ˜ã€‚å˜é‡çš„æå‰å£°æ˜å¿…é¡»è¦ç”¨å…³é”®å­—externï¼Œæ¥å¸®åŠ©åŒºåˆ† å˜é‡å®šä¹‰ å’Œ å˜é‡æå‰å£°æ˜(å®ƒä»¬çœ‹èµ·æ¥æ˜¯ä¸€æ ·çš„):å¦‚ï¼š1234567//éå¸¸é‡int g_x; //å˜é‡çš„å®šä¹‰(å¦‚æœéœ€è¦ï¼Œå¯è¿›è¡Œåˆå§‹åŒ–)extern int g_x; //å˜é‡çš„æå‰å£°æ˜(æå‰å£°æ˜ ä¸å¸¦åˆå§‹åŒ–)//å¸¸é‡extern const int g_y &#123;1&#125;;//å®šä¹‰å˜é‡(å¸¸é‡çš„å®šä¹‰å¿…é¡»è¦è¿›è¡Œåˆå§‹åŒ–)extern const int g_y; //æå‰å£°æ˜(æå‰å£°æ˜ ä¸å¸¦åˆå§‹åŒ–)fileèŒƒå›´VS.globalèŒƒå›´çœ‹ä¸‹é¢çš„ä¾‹å­ï¼šglobal.cpp12int g_x &#123;2&#125;; //ï¼ˆéå¸¸é‡çš„å˜é‡ï¼‰é»˜è®¤æ˜¯å¤–éƒ¨è¿æ¥//g_x goes out scope heremain.cpp12345678extern int g_x; //å¯¹å˜é‡g_xçš„æå‰å£°æ˜ã€‚å¯ä»¥åœ¨æ­¤æ–‡ä»¶ä¸­ä½¿ç”¨g_xint main()&#123; std::cout &lt;&lt; g_x; //åº”è¯¥è¾“å‡º 2 return 0;&#125;//g_xçš„æå‰å£°æ˜ goes out of scope hereå˜é‡g_xçš„æ–‡ä»¶èŒƒå›´(file scope)æ˜¯åœ¨global.cppä¸­ã€‚å®ƒåœ¨è¯¥æ–‡ä»¶ä¸­å®šä¹‰ä¹‹åï¼Œå°±å¯ä»¥è¢«ä½¿ç”¨ã€‚ä½†æ˜¯å®ƒä¸èƒ½ç›´æ¥åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚å¦‚æœè¦åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨g_xï¼Œæˆ‘ä»¬è¦åœ¨å…¶ä»–æ–‡ä»¶ä¸­å¯¹å®ƒè¿›è¡Œæå‰å£°æ˜(è®°å¾—è¦ä½¿ç”¨å…³é”®å­—extern)ä¹Ÿå°±æ˜¯è¯´ï¼Œâ€œæ–‡ä»¶èŒƒå›´â€é€šå¸¸ç”¨äºå…·æœ‰å†…éƒ¨è¿æ¥å±æ€§çš„å…¨å±€å˜é‡ï¼›â€œå…¨å±€èŒƒå›´â€æ›´å¤šç”¨äºå…·æœ‰å¤–éƒ¨è¿æ¥å±æ€§çš„å…¨å±€å˜é‡(å› ä¸ºï¼Œå®ƒè¢«æå‰å£°æ˜ä¹‹åï¼Œå°±å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨)å…¨å±€å˜é‡åˆå§‹åŒ–é¡ºåºé—®é¢˜å…¨å±€å˜é‡çš„åˆå§‹åŒ–æ˜¯ç¨‹åºå¯åŠ¨çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨æ‰§è¡Œmianå‡½æ•°ä¹‹å‰ï¼Œè¿™ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šç¬¬ä¸€éƒ¨åˆ†ï¼Œç§°ä¸º static initializationé™æ€åˆå§‹åŒ–ã€‚åœ¨é™æ€åˆå§‹åŒ–ä¸­ï¼Œå¸¦æœ‰constexpråˆå§‹åŒ–å™¨(åŒ…æ‹¬å­—é¢å€¼(literal))çš„å…¨å±€å˜é‡è¢«åˆå§‹åŒ–ä¸ºç»™å®šçš„å€¼[å› ä¸ºï¼Œconstexprå’Œå­—é¢å€¼å¸¸é‡å®šä¹‰æ—¶è‡ªå¸¦æœ‰åˆå§‹å€¼]ï¼›eg,const a {1};é‚£ä¹ˆaå°±è¢«åˆå§‹åŒ–ä¸º1constexpr a{1};é‚£ä¹ˆaå°±è¢«åˆå§‹åŒ–ä¸º1å®šä¹‰æ—¶æ²¡æœ‰ç»™å®šåˆå§‹å€¼çš„å…¨å±€å˜é‡(ä¹Ÿä½¿å¸¸é‡çš„å…¨å±€å˜é‡ï¼Œä½†æ²¡æœ‰æ˜¾ç¤ºåˆå§‹åŒ–ä¸º0)è¢«é»˜è®¤åˆå§‹åŒ–ä¸º0ã€‚const a {};é‚£ä¹ˆaå°±é»˜è®¤è¢«åˆå§‹åŒ–ä¸º0constexpr a{};é‚£ä¹ˆaå°±é»˜è®¤è¢«åˆå§‹åŒ–ä¸º0ç¬¬äºŒéƒ¨åˆ†ï¼Œç§°ä¸º dynamic initializationåŠ¨æ€åˆå§‹åŒ–ã€‚è¿™éƒ¨åˆ†ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œå®ƒçš„è¦ç‚¹æ˜¯ï¼šåˆå§‹åŒ–é‚£äº›â€œä¸å¸¦æœ‰constexpråˆå§‹åŒ–å™¨çš„å…¨å±€å˜é‡â€(å³ï¼Œå°±æ˜¯ éå¸¸é‡çš„å…¨å±€å˜é‡)ã€‚ä¾‹å¦‚ï¼š123456int init()&#123; return 5;&#125;int g_something &#123;init()&#125;; //éå¸¸é‡çš„å˜é‡åˆå§‹åŒ–åœ¨å•ä½ä»¶çš„ç¨‹åºä¸­ï¼Œå…¨å±€å˜é‡æŒ‰ç…§å®šä¹‰çš„é¡ºåºè¢«åˆå§‹åŒ–è¿™ä¸ªè§„åˆ™æœ‰å‡ ä¸ªä¾‹å¤–ã€‚è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œæ‚¨éœ€è¦å°å¿ƒä¸è¦è®©å˜é‡ä¾èµ–äºå…¶ä»–å˜é‡çš„åˆå§‹åŒ–å€¼ï¼Œè¿™äº›å˜é‡è¦åˆ°ç¨åæ‰ä¼šåˆå§‹åŒ–ã€‚ä¾‹å¦‚:12345678910111213141516171819202122232425#include &lt;iostream&gt; int initx(); // forward declarationint inity(); // forward declaration int g_x&#123; initx() &#125;; // g_x is initialized firstint g_y&#123; inity() &#125;; int initx()&#123; return g_y; // g_y isn't initialized when this is called&#125; int inity()&#123; return 5;&#125; int main()&#123; std::cout &lt;&lt; g_x &lt;&lt; ' ' &lt;&lt; g_y &lt;&lt; '\\n';&#125;/******ç»“æœ*******/0 5å†å¤šæ–‡ä»¶ç¨‹åºä¸­ï¼Œä¸åŒæ–‡ä»¶ä¹‹é—´çš„åˆå§‹åŒ–é¡ºåºæ˜¯æ²¡æœ‰è§„å®šçš„ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸¤ä¸ªæ–‡ä»¶a.cppå’Œb.cppï¼Œå®ƒä»¬ä¸¤ä¸ªæ–‡ä»¶è°å…ˆè¢«åˆå§‹åŒ–æ˜¯ä¸ç¡®å®šçš„ã€‚æ‰€ä»¥ï¼Œå¦‚æœåœ¨a.cppä¸­æœ‰ä¸€ä¸ªå˜é‡çš„å€¼æ˜¯ä¾èµ–äºb.cppã€‚é‚£ä¹ˆå°±æœ‰50%çš„å¯èƒ½è¿™äº›å˜é‡è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ã€‚æ³¨æ„ï¼šC++ä¸­ï¼Œå…¨å±€å˜é‡çš„åŠ¨æ€åˆå§‹åŒ–ä¼šé€ æˆå¾ˆå¤šé—®é¢˜ã€‚æ‰€ä»¥é¿å…ä½¿ç”¨ã€‚å°ç»“ï¼š123456789// External global variable definitions:int g_x; // defines non-initialized external global variable (zero initialized by default)extern const int g_x&#123; 1 &#125;; // defines initialized const external global variableextern constexpr int g_x&#123; 2 &#125;; // defines initialized constexpr external global variable // Forward declarationsextern int g_y; // forward declaration for non-constant global variableextern const int g_y; // forward declaration for const global variableextern constexpr int g_y; // not allowed: constexpr variables can't be forward declared6.8 å…¨å±€å¸¸é‡&amp;å†…è”å˜é‡Global constants and inline variablesä¸€äº›ç¬¦å·å¸¸é‡éœ€(å¦‚ï¼Œé˜¿ä¼ä¼½å¾·ç½—å¸¸æ•°ï¼Œé‡åŠ›ç³»æ•°â€¦)è¦åœ¨æ•´ä¸ªç¨‹åºä¸­ä½¿ç”¨ã€‚æ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯åœ¨ä¸€ä¸ªåœ°æ–¹å¯¹ä»–ä»¬è¿›è¡Œå£°æ˜ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªéœ€è¦å®ƒä»¬çš„æ–‡ä»¶ä¸­é‡æ–°å®šä¹‰è¿™äº›å¸¸é‡ã€‚å…¨å±€å¸¸é‡ä½œä¸ºå†…éƒ¨å˜é‡åœ¨c++ä¸­æœ‰å¤šç§æ–¹æ³•å¯ä»¥ä¿ƒè¿›è¿™ä¸€ç‚¹ã€‚åœ¨c++ 17ä¹‹å‰ï¼Œä»¥ä¸‹å¯èƒ½æ˜¯æœ€ç®€å•å’Œæœ€å¸¸è§çš„æ–¹æ³•:é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå¤´æ–‡ä»¶æ¥å­˜æ”¾è¿™äº›å¸¸é‡ï¼›åœ¨è¿™ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼ˆåœ¨ 6.2 â€“ User-defined namespacesè®²è§£è¿‡å‘½åç©ºé—´ï¼‰ï¼›ç„¶åï¼Œå°†å¸¸é‡åŠ å…¥è¿™ä¸ªå‘½åç©ºé—´ä¸­ï¼ˆè¯·ç¡®ä¿å®ƒä»¬çš„ç±»å‹æ˜¯constexprï¼‰ï¼›åœ¨ä½ è¦ç”¨è¿™äº›å˜é‡çš„æ–‡ä»¶ä¸­ï¼ŒåŠ ä¸Šè¿™ä¸ªå¤´æ–‡ä»¶#include &quot;xxx&quot;eg:constants.h12345678910111213#ifndef CONSTANTS_H#define CONSTANTS_H//å®šä¹‰ä½ è‡ªå·±çš„å‘½åç©ºé—´(ç”¨æ¥å­˜å‚¨å¸¸é‡)namespace constants&#123; //é»˜è®¤æƒ…å†µä¸‹ï¼Œå¸¸é‡æœ‰ å†…éƒ¨è¿æ¥ constexpr double pi &#123;3.14159&#125;; constexpr double my_gravity &#123;9.2&#125;; //....å¸¸é‡&#125;#endifmain.cpp1234567891011#include \"constants.h\" //ï¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åŒ…å«æ¯ä¸ªå¸¸é‡çš„å‰¯æœ¬int main()&#123; std::cout &lt;&lt; \"enter a radius: \"; int radius&#123;&#125;; //radiusï¼šåŠå¾„ std::cin &gt;&gt;radius; std::cout &lt;&lt; \"the circumference is: \" &lt;&lt;2* radius* constants::pi; return 0;&#125;æ³¨æ„ï¼šåœ¨main.cppæ–‡ä»¶ä¸­ï¼Œè¦æƒ³è®¿é—®constantsä¸­çš„å¸¸é‡ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ èŒƒå›´è§£æç¬¦(::)ã€‚a::b èŒƒå›´è§£ææ“ä½œç¬¦çš„ å·¦æ“ä½œæ•°a,è¡¨ç¤ºå‘½åç©ºé—´åç§°ï¼›å³æ“ä½œç¬¦bè¡¨ç¤ºå‘½åç©ºé—´aä¸­çš„å˜é‡æˆ–è€…å‡½æ•°åå­—ã€‚::b è¿™ç§å½¢å¼è¡¨ç¤º å…¶å‘½åç©ºé—´æ˜¯å…¨å±€å‘½åç©ºé—´ã€‚å…¨å±€å¸¸é‡ä½œä¸ºå¤–éƒ¨å˜é‡å½“ä½œä¸ºå†…éƒ¨å˜é‡æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜ï¼šè™½ç„¶è¿™å¾ˆç®€å•(å¯¹äºè¾ƒå°çš„ç¨‹åºä¹Ÿå¾ˆå¥½)ï¼Œä½†æ˜¯æ¯å½“constants.hè¢«åŒ…å«åˆ°ä¸åŒçš„ä»£ç æ–‡ä»¶ä¸­æ—¶ï¼Œæ¯ä¸ªå˜é‡éƒ½ä¼šè¢«å¤åˆ¶åˆ°åŒ…å«ä»£ç æ–‡ä»¶ä¸­ã€‚å› æ­¤ï¼Œå¦‚æœå°†constants.håŒ…å«åˆ°20ä¸ªä¸åŒçš„ä»£ç æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆæ¯ä¸ªå˜é‡éƒ½ä¼šé‡å¤20æ¬¡ã€‚å¤´æ–‡ä»¶ä¿æŠ¤ä¸ä¼šé˜»æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œå› ä¸ºå®ƒä»¬åªä¼šé˜»æ­¢å¤´æ–‡ä»¶ä¸æ­¢ä¸€æ¬¡è¢«åŒ…å«åˆ°ä¸€ä¸ªåŒ…å«æ–‡ä»¶ä¸­ï¼Œè€Œä¸ä¼šé˜»æ­¢å¤´æ–‡ä»¶ä¸€æ¬¡è¢«åŒ…å«åˆ°å¤šä¸ªä¸åŒçš„ä»£ç æ–‡ä»¶ä¸­ã€‚è¿™å¸¦æ¥äº†ä¸¤ä¸ªæŒ‘æˆ˜:å¤´æ–‡ä»¶ä¿æŠ¤ç¬¦(header guards)åªèƒ½ç¡®ä¿åœ¨å•ä¸ªæ–‡ä»¶ä¸­åŒ…å«çš„å¤´æ–‡ä»¶åªåŒ…å«ä¸€æ¬¡ï¼›å½“ä¿®æ”¹ä¸€ä¸ªå¸¸é‡å€¼æ—¶ï¼Œå°±å¯èƒ½éœ€è¦é‡æ–°ç¼–è¯‘é‚£äº›åŒ…å«è¿™ä¸ªå¸¸é‡çš„æ–‡ä»¶ï¼Œè¿™å¯èƒ½å¯¼è‡´å¤§å‹é¡¹ç›®çš„é‡å»ºæ—¶é—´å¾ˆé•¿ã€‚å¦‚æœå¸¸é‡çš„sizeå¾ˆå¤§ï¼Œå¹¶ä¸”ä¸èƒ½è¿›è¡Œä¼˜åŒ–ã€‚è¿™å°†èŠ±è´¹å¾ˆå¤šå†…å­˜ã€‚ä¸€ä¸ªè§£å†³ä¸Šé¢çš„åŠæ³•å°±æ˜¯ï¼Œå°†è¿™äº›å¸¸é‡è®¾ä¸ºâ€œå¤–éƒ¨å˜é‡(external variables)â€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†å˜é‡åªåˆå§‹åŒ–ä¸€æ¬¡å°±å¯ä»¥åœ¨æ•´ä¸ªç¨‹åºä¸­ä½¿ç”¨ã€‚constants.cpp123456namespace constants&#123; //actual global variables extern const double pi &#123;3.14159&#125;; extern const my_gravity &#123;9.2&#125;;&#125;åœ¨constants.cppæ–‡ä»¶ä¸­å®šä¹‰è¿™äº›å¸¸é‡ï¼Œæ¥ç¡®ä¿å®ƒä»¬åªè¢«å®šä¹‰ä¸€æ¬¡ï¼›constants.h123456789101112#ifndef CONSTANTS_H#define CONSTANTS_H namespace constants&#123; // since the actual variables are inside a namespace, the forward declarations need to be inside a namespace as well extern const double pi; extern const double avogadro; extern const double my_gravity;&#125; #endiféœ€è¦åœ¨å¤´æ–‡ä»¶constants.hä¸­å¯¹è¿™äº›å¸¸é‡è¿›è¡Œ æå‰å£°æ˜main.cppä½¿ç”¨çš„æ–¹æ³•ä¸å˜12345678910#include \"constants.h\" // include all the forward declarations int main()&#123; std::cout &lt;&lt; \"Enter a radius: \"; int radius&#123;&#125;; std::cin &gt;&gt; radius; std::cout &lt;&lt; \"The circumference is: \" &lt;&lt; 2 * radius * constants::pi;&#125;å› ä¸ºå…¨å±€ç¬¦å·å¸¸é‡åœ¨å‘½åç©ºé—´ä¸­(ä¸ºäº†é¿å…ä¸å…¨å±€å‘½åç©ºé—´ä¸­çš„æ ‡è¯†ç¬¦å‘ç”Ÿ å‘½åå†²çª)ï¼Œæ‰€ä»¥ï¼Œå°±ä¸éœ€è¦åœ¨å®ƒåå­—ä¸­ä½¿ç”¨g_å‰ç¼€ç°åœ¨ï¼Œè¿™äº›ç¬¦å·å¸¸é‡åªç”¨åœ¨constants.cppä¸­å®ä¾‹åŒ–ä¸€æ¬¡(è€Œä¸æ˜¯æ¯æ¬¡constants.hè¢«#includeä¸­éƒ½è¢«å®ä¾‹åŒ–ä¸€æ¬¡)ï¼Œæ‰€ä»¥ï¼Œå¯¹constants.cppæ‰€åšçš„ä»»ä½•ä¿®æ”¹éƒ½åªéœ€è¦é‡æ–°ç¼–è¯‘constants.cppå³å¯ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•ä¹Ÿæœ‰å‡ ä¸ªç¼ºç‚¹ã€‚é¦–å…ˆï¼Œè¿™äº›å¸¸é‡ç°åœ¨åªåœ¨å®é™…å®šä¹‰å®ƒä»¬çš„æ–‡ä»¶(constants.cpp)ä¸­è¢«è®¤ä¸ºæ˜¯ ç¼–è¯‘æ—¶å¸¸é‡ï¼Œè€Œä¸æ˜¯åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨å®ƒä»¬ã€‚è¿™æ„å‘³ç€åœ¨constants.cppä¹‹å¤–çš„åœ°æ–¹ï¼Œå®ƒä»¬ä¸èƒ½åœ¨ä»»ä½•éœ€è¦ç¼–è¯‘æ—¶å¸¸é‡çš„åœ°æ–¹ä½¿ç”¨ã€‚å…¶æ¬¡ï¼Œç¼–è¯‘å™¨å¯èƒ½æ— æ³•å¯¹å®ƒä»¬è¿›è¡Œå°½å¯èƒ½å¤šçš„ä¼˜åŒ–ã€‚å…¨å±€å¸¸é‡ä½œä¸ºå†…è”å˜é‡åœ¨C++17ä¸­ï¼Œæœ‰ä¸€ä¸ªæ–°æ¦‚å¿µå«åšï¼šinline variable(å†…è”å˜é‡)inlineæ„ä¸ºï¼šå…è®¸å¤šä¸ªå®šä¹‰ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªå†…è”å˜é‡å°±å¯ä»¥åœ¨å¤šä¸ªæ–‡ä»¶ä¸­è¢«å¤šæ¬¡å®šä¹‰ã€‚(è¿™å¹¶ä¸è¿èƒŒ å•å®šä¹‰è§„åˆ™)å†…è”å…¨å±€å˜é‡ é»˜è®¤æ˜¯ å¤–éƒ¨è¿æ¥å†…è”å˜é‡æœ‰ä¸¤ä¸ªé‡è¦çš„é™åˆ¶ï¼Œå¿…é¡»éµå®ˆï¼šå†…è”å˜é‡çš„æ‰€æœ‰å®šä¹‰å¿…é¡»ç›¸åŒï¼ˆå¦åˆ™ï¼Œå°†äº§ç”Ÿæœªå®šä¹‰çš„è¡Œä¸ºï¼‰ï¼›å†…æ•›å˜é‡çš„å®šä¹‰(ä¸æ˜¯æå‰å£°æ˜)å¿…é¡»å‡ºç°åœ¨æ¯ä¸€ä¸ªä½¿ç”¨è¿™äº›å˜é‡çš„æ–‡ä»¶ä¸­ã€‚ç¼–è¯‘å™¨å°†ä¼šæŠŠå†…è”å˜é‡çš„æ‰€æœ‰å®šä¹‰åˆå¹¶ä¸ºä¸€ä¸ªå˜é‡çš„å®šä¹‰ã€‚è¿™å°±å…è®¸æˆ‘ä»¬åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰å˜é‡ï¼Œå¹¶å°†å®ƒä»¬å½“ä½œa.cppæ–‡ä»¶ä¸­åªæœ‰ä¸€ä¸ªå®šä¹‰ã€‚è¿™äº›å˜é‡åœ¨å®ƒä»¬è¢«åŒ…å«çš„æ–‡ä»¶ä¸­ï¼Œä¾ç„¶ä¿æŒè¿™ constexpr çš„æ€§è´¨è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰å…¨å±€å˜é‡ï¼Œè€Œä¸ç”¨æ‹…å¿ƒé‡å¤å˜é‡:constants.h123456789101112#ifndef CONSTANTS_H#define CONSTANTS_H // define your own namespace to hold constantsnamespace constants&#123; inline constexpr double pi &#123; 3.14159 &#125;; // note: now inline constexpr inline constexpr double avogadro &#123; 6.0221413e23 &#125;; inline constexpr double my_gravity &#123; 9.2 &#125;; // m/s^2 -- gravity is light on this planet // ... other related constants&#125;#endifmain.cpp12345678910#include \"constants.h\" int main()&#123; std::cout &lt;&lt; \"Enter a radius: \"; int radius&#123;&#125;; std::cin &gt;&gt; radius; std::cout &lt;&lt; \"The circumference is: \" &lt;&lt; 2 * radius * constants::pi;&#125;æˆ‘ä»¬å¯ä»¥åœ¨å°½å¯èƒ½å¤šçš„ä»£ç æ–‡ä»¶ä¸­åŒ…å«constants.hï¼Œä½†æ˜¯è¿™äº›å˜é‡åªä¼šè¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œå¹¶åœ¨æ‰€æœ‰ä»£ç æ–‡ä»¶ä¸­å…±äº«ã€‚å¦‚æœä½ éœ€è¦å…¨å±€å¸¸é‡ï¼Œå¹¶ä¸”ä½ çš„ç¼–è¯‘å™¨æ”¯æŒC++17ï¼Œé‚£å»ºè®®æœ€å¥½ä½¿ç”¨ å†…è”å˜é‡6.9 éå¸¸é‡çš„å…¨å±€å˜é‡evilæœ€å¤§çš„é—®é¢˜å°±æ˜¯ï¼šå½“ä½ ä½¿ç”¨å…¨å±€å˜é‡(not-const)æ—¶ï¼Œå®ƒå¯èƒ½åœ¨ä»»ä½•åœ°æ–¹å°±è¢«ä¿®æ”¹ï¼Œä½†æ˜¯ä½ å´ä¸èƒ½è½»æ¾çš„ç›´åˆ°åœ¨å“ªè¢«æ”¹çš„ã€‚1234567891011121314151617181920int g_mode; //å£°æ˜å…¨å±€å˜é‡(å°†é»˜è®¤è¢«åˆå§‹åŒ–ä¸º0)void dosomething()&#123; g_mode = 2; //è¿™é‡Œä¿®æ”¹å…¨å±€å˜é‡g_modeä¸º2&#125;int main()&#123; g_mode =1; //note:è¿™å°†å…¨å±€g_modeå˜é‡è®¾ç½®ä¸º1ã€‚è€Œä¸æ˜¯å£°æ˜ä¸€ä¸ªæœ¬åœ°g_modeå˜é‡! dosomething(); //ç¨‹åºçŒ¿å¸Œæœ›è¿™é‡Œè¾“å‡ºçš„g_modeçš„å€¼æ˜¯1ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒçš„å€¼æ˜¯2 if(g_mode == 1) std::cout &lt;&lt;\"no threat detected.\\n\"; else std::cout &lt;&lt; \"lanunching nuclear missiles...\\n\"; return 0;&#125;å±€éƒ¨å˜é‡è¦å®‰å…¨å¾—å¤šï¼Œå› ä¸ºå…¶ä»–å‡½æ•°ä¸èƒ½ç›´æ¥å½±å“å®ƒä»¬ã€‚ä¿æŠ¤ä½ çš„å…¨å±€å˜é‡å¦‚æœä½ éè¦ä½¿ç”¨å…¨å±€å˜é‡ï¼šé‚£æˆ‘ä»¬å¯ä»¥å¯¹å˜é‡åä½¿ç”¨å‰ç¼€â€g_â€æˆ–â€œgâ€ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬è¯†åˆ«å®ƒæ˜¯å…¨å±€å˜é‡ã€‚æœ€å¥½ä¹Ÿå°†å…¶æ”¾åœ¨ä½ è‡ªå·±åˆ›å»ºçš„å‘½åç©ºé—´ï¼Œä»è€Œé¿å…ä¸€äº›å‘½åå†²çªã€‚6.10 é™æ€å±€éƒ¨å˜é‡æœ¯è¯­staticæ˜¯c++è¯­è¨€ä¸­æœ€å®¹æ˜“æ··æ·†çš„æœ¯è¯­ä¹‹ä¸€ï¼Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å› ä¸ºé™æ€åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­æœ‰ä¸åŒçš„å«ä¹‰ã€‚åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†å…¨å±€å˜é‡å…·æœ‰é™æ€æŒç»­æ—¶é—´ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºï¼Œåœ¨ç¨‹åºç»“æŸæ—¶é”€æ¯ã€‚æˆ‘ä»¬è¿˜è®¨è®ºäº†staticå…³é”®å­—å¦‚ä½•æä¾›å…¨å±€æ ‡è¯†ç¬¦å†…éƒ¨é“¾æ¥ï¼Œè¿™æ„å‘³ç€æ ‡è¯†ç¬¦åªèƒ½åœ¨å®šä¹‰å®ƒçš„æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚æˆ‘ä»¬å°†æ¢è®¨åº”ç”¨äºå±€éƒ¨å˜é‡æ—¶é™æ€å…³é”®å­—çš„ç”¨æ³•ã€‚åœ¨ 2.4 â€“ Introduction to local scope, æ‚¨äº†è§£åˆ°ï¼Œé»˜è®¤æƒ…å†µä¸‹ å±€éƒ¨å˜é‡å…·æœ‰ è‡ªåŠ¨æŒç»­æ—¶é—´ï¼Œè¿™æ„å‘³ç€å®ƒä»¬æ˜¯åœ¨å®šä¹‰æ—¶åˆ›å»ºçš„ï¼Œå¹¶åœ¨å—é€€å‡ºæ—¶é”€æ¯ã€‚ä½†å…³é”®å­—staticï¼Œå¯ä»¥å°†è‡ªåŠ¨æŒç»­æ—¶é—´(attomatic duration)è½¬å˜æˆ é™æ€æŒç»­æ—¶é—´(static duration) ã€‚ä»è€Œï¼Œé™æ€å˜é‡å³ä½¿å·²ç»è¶…å‡ºå®ƒæ‰€åœ¨çš„èŒƒå›´æ—¶ï¼Œä»–ä¾ç„¶æ²¡æœ‰è¢«é”€æ¯ã€‚è¿™æ„å‘³ç€å˜é‡ç°åœ¨åœ¨ç¨‹åºå¼€å§‹æ—¶åˆ›å»ºï¼Œå¹¶åœ¨ç¨‹åºç»“æŸæ—¶é”€æ¯(å°±åƒå…¨å±€å˜é‡ä¸€æ ·)ã€‚ä¾‹å¦‚ï¼šé»˜è®¤æ˜¯ automatic duration12345678910111213141516171819202122#include &lt;iostream&gt; void incrementAndPrint()&#123; int value&#123; 1 &#125;; // é»˜è®¤æ˜¯ automatic duration ++value; std::cout &lt;&lt; value &lt;&lt; '\\n';&#125; // value is destroyed here int main()&#123; incrementAndPrint(); incrementAndPrint(); incrementAndPrint(); return 0;&#125;/********ç»“æœ**********/222æ¯æ¬¡è°ƒç”¨å‡½æ•°incrementAndPrint()æ—¶ï¼Œéƒ½å°†ç©¿ä»¶ä¸€ä¸ªå«valueçš„å˜é‡ï¼Œå®ƒè¢«åˆå§‹åŒ–ä¸º1ç°åœ¨ä½¿ç”¨staticå…³é”®å­—ï¼Œå°†é»˜è®¤çš„ atuomatic duration è½¬å˜ä¸º static duration12345678910111213141516171819202122#include &lt;iostream&gt; void incrementAndPrint()&#123; static int s_value&#123; 1 &#125;; // ç”±äºä½¿ç”¨å…³é”®å­— static,æ‰€ä»¥ç°åœ¨æ˜¯ static durationã€‚ æ‰€ä»¥è¿™ä¸ªå˜é‡å°†åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼ˆä¸ä¼šåƒä¸Šé¢é‚£ä¸ªä¾‹å­ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¢«é™¤åˆå§‹åŒ–ï¼‰ ++s_value; std::cout &lt;&lt; s_value &lt;&lt; '\\n';&#125; // s_value is not destroyed here, but becomes inaccessible because it goes out of scope int main()&#123; incrementAndPrint(); incrementAndPrint(); incrementAndPrint(); return 0;&#125;/****ç»“æœ****/234åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œå› ä¸ºs_valueè¢«å£°æ˜ä¸ºé™æ€çš„ï¼Œæ‰€ä»¥s_valueåªåˆ›å»ºä¸€æ¬¡(åœ¨ç¨‹åºå¯åŠ¨æ—¶)(å¹¶ä¸”åˆå§‹åŒ–ä¸ºé›¶)ã€‚ç„¶ååœ¨ç¬¬ä¸€æ¬¡é‡åˆ°å˜é‡å®šä¹‰æ—¶ä½¿ç”¨æˆ‘ä»¬æä¾›çš„åˆå§‹åŒ–å€¼(1)åˆå§‹åŒ–å˜é‡(ä½†åœ¨åç»­è°ƒç”¨æ—¶ä¸ä¼šé‡æ–°åˆå§‹åŒ–)ã€‚å°±åƒæˆ‘ä»¬ä½¿ç”¨â€œg_â€ ä½œä¸ºå…¨å±€å˜é‡çš„å‰ç¼€ä¸€æ ·ï¼Œä½¿ç”¨ â€œ s_â€ä½œä¸ºé™æ€(é™æ€æŒç»­æ—¶é—´)å±€éƒ¨å˜é‡çš„å‰ç¼€ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ã€‚é™æ€å˜é‡æä¾›äº†å…¨å±€å˜é‡çš„ä¸€äº›å¥½å¤„(å®ƒä»¬ç›´åˆ°ç¨‹åºç»“æŸæ—¶æ‰è¢«é”€æ¯)ï¼ŒåŒæ—¶ï¼Œé™åˆ¶ä¸ºå®ƒä»¬åªåœ¨å®ƒè‡ªå·±çš„å—ä¸­æ‰èƒ½è¢«çœ‹è§ï¼Œè¿™ä½¿å¾—å³ä½¿æ‚¨ç»å¸¸æ›´æ”¹å®ƒä»¬çš„å€¼ï¼Œè¿™ä¹Ÿä½¿å®ƒä»¬å¯ä»¥å®‰å…¨ä½¿ç”¨ã€‚å…¨å±€ã€å±€éƒ¨å˜é‡ä½¿ç”¨staticå…¨å±€å˜é‡ä½¿ç”¨å…³é”®å­—staticï¼šè¿™ä¼šä½¿å¾—å…¨å±€å˜é‡å˜ä¸º internal linkage(å†…éƒ¨è¿æ¥)ï¼Œå³ï¼Œä½¿å¾—è¯¥å˜é‡ä¸èƒ½å†å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚å±€éƒ¨å˜é‡ä½¿ç”¨å…³é”®å­—statciï¼šè¿™ä½¿å¾—å±€éƒ¨å˜é‡å˜ä¸º static duration(é™æ€æŒç»­æ—¶é—´),å³ï¼Œä½¿å¾—è¯¥å˜é‡å°† åªè¢«åˆ›å»ºä¸€æ¬¡ï¼Œè€Œä¸”ç›´åˆ°ç¨‹åºç»“æŸæ‰ä¼šè¢«é”€æ¯ã€‚6.11 æ€»ç»“scope/duration/linkageæ€»ç»“scopeæ ‡è¯†ç¬¦çš„èŒƒå›´å†³å®šäº†å®ƒèƒ½å¤Ÿè¢«è®¿é—®çš„åŒºé—´ï¼šå…·æœ‰ block scope(å—èŒƒå›´) / local scope(å±€éƒ¨èŒƒå›´) çš„å˜é‡ åªèƒ½åœ¨å®ƒä»¬è¢«å£°æ˜çš„å—ä¸­(åŒ…æ‹¬åµŒå¥—å—)è¢«è®¿é—®ï¼Œè¿™äº›æœ‰ï¼šå±€éƒ¨å˜é‡ï¼›å‡½æ•°çš„å½¢å‚ï¼›åœ¨å—ä¸­å£°æ˜çš„ç”¨æˆ·å®šä¹‰ç±»å‹å®šä¹‰ï¼ˆå¦‚ï¼Œæšä¸¾(enum)ã€ç±»(class)ï¼‰;å…·æœ‰ global scope(å…¨å±€èŒƒå›´) / file scope(æ–‡ä»¶èŒƒå›´)çš„å˜é‡ å¯ä»¥å†æ–‡ä»¶ä¸­çš„ä»»ä½•åœ°æ–¹è¢«è®¿é—®ï¼Œè¿™äº›æœ‰ï¼šå…¨å±€å˜é‡ï¼›å‡½æ•°ï¼›åœ¨å‘½ åç©ºé—´å†… æˆ– å…¨å±€èŒƒå›´ å†…å£°æ˜çš„ç”¨æˆ·å®šä¹‰ç±»å‹å®šä¹‰(å¦‚æšä¸¾(enum)ã€ç±»(class))æ€»ç»“durationå˜é‡çš„æŒç»­æ—¶é—´å†³å®šäº†å®ƒä»¬ä½•æ—¶è¢«åˆ›å»ºä¸é”€æ¯ï¼šå…·æœ‰ automatic duration(è‡ªåŠ¨æŒç»­æ—¶é—´)çš„å˜é‡ åœ¨å®šä¹‰æ—¶è¢«åˆ›å»ºï¼Œåœ¨ç¦»å¼€å®ƒæ‰€åœ¨çš„å—æ—¶è¢«é”€æ¯ï¼Œè¿™äº›æœ‰ï¼šå±€éƒ¨å˜é‡ï¼›å‡½æ•°çš„å½¢å‚ï¼›å…·æœ‰ static duration(é™æ€æŒç»­æ—¶é—´)çš„å˜é‡ åœ¨ç¨‹åºå¼€å§‹æ—¶è¢«åˆ›å»ºï¼Œ åœ¨ç¨‹åºç»“æŸæ—¶è¢«é”€æ¯ã€‚è¿™äº›æœ‰ï¼šå…¨å±€å˜é‡ï¼›é™æ€å±€éƒ¨å˜é‡ï¼›å…·æœ‰ dynamic duration(åŠ¨æ€æŒç»­æ—¶é—´)çš„å˜é‡ ç”±ç¨‹åºå‘˜è¯·æ±‚åˆ›å»ºå’Œé”€æ¯ã€‚è¿™äº›æœ‰ï¼šåŠ¨æ€åˆ†é…çš„å˜é‡ï¼›æ€»ç»“linkageæ ‡è¯†ç¬¦çš„ linkage(è¿æ¥) å†³å®šäº† ä¸€ä¸ªæ ‡è¯†ç¬¦çš„å¤šä¸ªå®ä¾‹æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚æ ‡è¯†ç¬¦ æ²¡æœ‰ è¿æ¥ æ—¶ï¼Œæ„å‘³ç€è¿™ä¸ªæ ‡è¯†ç¬¦ä»…æŒ‡å…¶è‡ªèº«ã€‚è¿™äº›æœ‰ï¼šå±€éƒ¨å˜é‡ï¼›åœ¨å—ä¸­å£°æ˜çš„ç”¨æˆ·å®šä¹‰ç±»å‹å®šä¹‰(å¦‚æšä¸¾å’Œç±»)ï¼›å…·æœ‰ intrnal linkage(å†…éƒ¨è¿æ¥) çš„æ ‡è¯†ç¬¦ åªèƒ½åœ¨å®ƒæ‰€å£°æ˜çš„æ–‡ä»¶ä¸­ è¢«è®¿é—®ã€‚è¿™äº›æœ‰ï¼šé™æ€å…¨å±€å˜é‡(static global variables) [åˆå§‹åŒ– æˆ– æœªåˆå§‹åŒ– ]ï¼›é™æ€å‡½æ•°ï¼ˆstatic functionsï¼‰;åœ¨æœªå‘½åçš„å‘½åç©ºé—´ä¸­å£°æ˜çš„å‡½æ•°ï¼›åœ¨æœªå‘½åçš„å‘½åç©ºé—´ä¸­å£°æ˜çš„ç”¨æˆ·å®šä¹‰ç±»å‹å®šä¹‰(å¦‚æšä¸¾å’Œç±»)ï¼›å…·æœ‰ external linkage(å¤–éƒ¨è¿æ¥) çš„æ ‡è¯†ç¬¦ å¯ä»¥åœ¨ åœ¨å£°æ˜çš„æ–‡ä»¶å†…çš„ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œä¹Ÿå¯ä»¥å…¶ä»–æ–‡ä»¶(é€šè¿‡æå‰å£°æ˜)è¿›è¡Œè®¿é—®ã€‚è¿™åŒ…æ‹¬:å‡½æ•°ï¼›éå¸¸é‡çš„å…¨å±€å˜é‡(åˆå§‹åŒ– æˆ– æœªåˆå§‹åŒ–)ï¼›å¤–éƒ¨å¸¸é‡å…¨å±€å˜é‡ï¼›å†…è”å¸¸é‡å…¨å±€å˜é‡ï¼›åœ¨ å‘½åç©ºé—´å†… æˆ– å…¨å±€èŒƒå›´å†…å£°æ˜çš„ç”¨æˆ·å®šä¹‰ç±»å‹å®šä¹‰(å¦‚æšä¸¾å’Œç±»)ï¼›NOTE:é»˜è®¤æƒ…å†µä¸‹ï¼Œ å‡½æ•°æ˜¯ å¤–éƒ¨è¿æ¥ï¼›å®ƒå¯é€šè¿‡ä½¿ç”¨å…³é”®å­—staticå˜æˆ å†…éƒ¨è¿æ¥ã€‚å˜é‡çš„ scope/duratio /linkageTypeExampleScopeDurationLinkageNotesLocal variableint x;BlockAutomaticNoneStatic local variablestatic int s_x;BlockStaticNoneDynamic variableint *x { new int };BlockDynamicNoneFunction parametervoid foo(int x)BlockAutomaticNoneExternal non-constant global variableint g_x;FileStaticExternalInitialized or uninitializedInternal non-constant global variablestatic int g_x;FileStaticInternalInitialized or uninitializedInternal constant global variableconstexpr int g_x { 1 };FileStaticInternalConst or constexpr, Must be initializedExternal constant global variableextern constexpr int g_x { 1 };FileStaticExternalConst or constexpr, Must be initializedInline constant global variableinline constexpr int g_x { 1 };FileStaticExternalConst or constexpr, Must be initializedæ€»ç»“æå‰å£°æ˜ä½ å¯ä»¥åœ¨å…¶ä»–æ–‡ä»¶ä¸­å¯¹ä¸€ä¸ª å‡½æ•°/å˜é‡ è¿›è¡Œæå‰å£°æ˜ï¼šTypeExampleNotesFunction forward declarationvoid foo(int x);Prototype only, no function bodyNon-constant global variable forward declarationextern int g_x;Must be uninitializedConst global variable forward declarationextern const int g_x;Must be uninitializedConstexpr global variable forward declarationextern constexpr int g_x;Not allowed, constexpr cannot be forward declaredä»€ä¹ˆæ˜¯å­˜å‚¨ç±»è¯´æ˜ç¬¦?å½“å…³é”®å­—static ã€externç”¨ä½œæ ‡è¯†ç¬¦å£°æ˜çš„ä¸€éƒ¨åˆ†æ—¶,å®ƒä»¬å°±è¢«ç§°ä¸ºï¼šstorage class specifierï¼ˆå­˜å‚¨ç±»è¯´æ˜ç¬¦ï¼‰ã€‚å®ƒä»¬è®¾ç½®æ ‡è¯†ç¬¦çš„å­˜å‚¨çš„ duration å’Œ linkageC++æ”¯æŒ4ä¸­å­˜å‚¨ç±»è¯´æ˜ç¬¦ï¼šSpecifierMeaningNoteexternstatic (or thread_local) storage duration and external linkagestaticstatic (or thread_local) storage duration and internal linkagethread_localthread storage durationIntroduced in C++11mutableobject allowed to be modified even if containing class is constautoautomatic storage durationDeprecated in C++11registerautomatic storage duration and hint to the compiler to place in a registerDeprecated in C++17æœ¯è¯­ storage class specifier é€šå¸¸åªåœ¨æ­£å¼æ–‡æ¡£ä¸­ä½¿ç”¨ã€‚6.12 using è¯­å¥å¦‚æœä½ ç»å¸¸ä½¿ç”¨æ ‡å‡†åº“ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„æ‰€æœ‰å†…å®¹ä¹‹å‰è¾“å…¥std::ä¼šå˜å¾—é‡å¤ã€‚C++æä¾›äº†ä¸€ç§å¯é€‰æ‹©çš„åŠæ³•ï¼Œå«åšï¼šusing statementsusingçš„å£°æ˜ä¸€ç§ç®€åŒ–çš„æ–¹æ³•æ˜¯ä½¿ç”¨usingå£°æ˜è¯­å¥ï¼š123456789#include &lt;iostream&gt; int main()&#123; using std::cout; // this using declaration tells the compiler that cout should resolve to std::cout cout &lt;&lt; \"Hello world!\"; // so no std:: prefix is needed here! return 0;&#125; // the using declaration expires hereusing çš„å£°æ˜ï¼šusing std::coutå‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬å°†è¦ä½¿ç”¨ å‘½åç©ºé—´std ä¸­çš„coutã€‚æ‰€ä»¥å½“ç¼–è¯‘å™¨çœ‹åˆ°coutæ—¶ï¼Œå®ƒä¼šå‡è®¾æˆ‘ä»¬æŒ‡çš„æ˜¯std::coutã€‚å¦‚æœstd::coutä¸coutçš„å…¶ä»–ä¸€äº›ä½¿ç”¨ä¹‹é—´å­˜åœ¨å‘½åå†²çªï¼Œåˆ™é¦–é€‰std::coutã€‚ä¸Šé¢çš„ä¾‹å­ï¼Œçœ‹èµ·æ¥ä¼¼ä¹æ²¡æœ‰ç®€åŒ–å¤šå°‘ã€‚ä½†å¦‚æœæˆ‘ä»¬è¦å¤šæ¬¡ä½¿ç”¨coutæ—¶ï¼Œä½¿ç”¨ using statementså°±å¯ä»¥ç®€åŒ–å¾ˆå¤šã€‚æ³¨æ„ï¼Œå¦‚æœä½ å¤šæ¬¡ä½¿ç”¨std::coutå’Œstd::cinçš„è¯ï¼Œä½ éœ€è¦å¯¹ä»–ä»¬ä¸¤ä¸ªåˆ†åˆ«ä½¿ç”¨using statementsusing æŒ‡ä»¤å¦ä¸€ç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨ï¼šusing directiveè¯­å¥ã€‚å¦‚ï¼š12345678#include &lt;iostream&gt;int main()&#123; using namespace std; //è¿™ä¸ªusingæŒ‡ä»¤ å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ å‘½åç©ºé—´std ä¸­çš„ä»»ä½•ä¸œè¥¿ cout &lt;&lt; \"hello world!\"; // æ‰€ä»¥ï¼Œå‰ç¼€ std:: å°±å¯ä»¥çœç•¥ return 0;&#125;è¿™ä¸ªusing æŒ‡ä»¤ ï¼šusing namespace stdå‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬æƒ³ä½¿ç”¨ å‘½åç©ºé—´std ä¸­çš„ä»»ä½•ä¸œè¥¿ã€‚æ‰€ä»¥å½“ç¼–è¯‘å™¨å‘ç°äº†ä¸€ä¸ªåå­—å®ƒä¸è®¤è¯†æ—¶ï¼Œå®ƒå°±ä¼šæ£€æŸ¥ å‘½åç©ºé—´stdã€‚ç»“æœå°±æ˜¯ï¼Œå½“ç¼–è¯‘å™¨é‡åˆ°cout(ç¼–è¯‘å™¨ä¸è®¤è¯†cout)ï¼Œç¼–è¯‘å™¨å°±ä¼šæŸ¥çœ‹ å‘½åç©ºé—´std ç„¶åæ‰¾åˆ°coutã€‚å¦‚æœstd::coutä¸coutçš„å…¶ä»–ä¸€äº›ä½¿ç”¨ä¹‹é—´å­˜åœ¨å‘½åå†²çªï¼Œç¼–è¯‘å™¨å°†æŠŠå®ƒæ ‡è®°ä¸ºé”™è¯¯(è€Œä¸æ˜¯é€‰æ‹©å…¶ä¸­ä¹‹ä¸€)ã€‚ä¸‹é¢æ¥çœ‹ä¸€ä¸‹ using æŒ‡ä»¤ é€ æˆçš„æ­§ä¹‰ï¼šeg1ï¼š123456789101112131415161718192021#include &lt;iostream&gt; namespace a&#123; int x&#123; 10 &#125;;&#125; namespace b&#123; int x&#123; 20 &#125;;&#125; int main()&#123; using namespace a; using namespace b; std::cout &lt;&lt; x &lt;&lt; '\\n'; return 0;&#125;ä¸Šé¢ä¾‹å­ä¸­ï¼Œç¼–è¯‘å™¨æ— æ³•åœ¨mianå‡½æ•°ä¸­å†³å®šä½¿ç”¨a::xè¿˜æ˜¯b::xã€‚ç„¶åå°±ä¼šå‡ºç°â€œä¸æ˜ç¡®çš„ç¬¦å·â€é”™è¯¯ã€‚è¦æƒ³è§£å†³è¿™ä¸ªå†²çªï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Šå‰ç¼€ä½¿ç”¨ã€‚å³æ˜¾ç¤ºæ ‡æ˜ä½¿ç”¨çš„æ˜¯å“ªä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„xã€‚eg2ï¼š1234567891011121314#include &lt;iostream&gt; // imports the declaration of std::cout int cout() // declares our own \"cout\" function&#123; return 5;&#125; int main()&#123; using namespace std; // makes std::cout accessible as \"cout\" cout &lt;&lt; \"Hello, world!\"; // uh oh! Which cout do we want here? The one in the std namespace or the one we defined above? return 0;&#125;eg2ä¸­ï¼Œç¼–è¯‘å™¨æ— æ³•åˆ¤æ–­æˆ‘ä»¬ä½¿ç”¨çš„coutæ˜¯å¼•ç”¨çš„ std::coutè¿˜æ˜¯ coutå‡½æ•°ã€‚å¹¶å‡ºç°â€œä¸æ˜ç¡®çš„ç¬¦å·â€é”™è¯¯ã€‚è§£å†³æ–¹æ³•ï¼šä½¿ç”¨using declaration æ¥æ›¿ä»£ using directiveï¼š12using std::cout; //å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œ cout æŒ‡çš„æ˜¯ std::coutcout &lt;&lt; \"Hello, world!\"; //æ‰€ä»¥coutè¡¨ç¤ºçš„æ˜¯ std::coutæ˜¾ç¤ºçš„ä½¿ç”¨å‰ç¼€ï¼š1std::cout &lt;&lt; \"Hello, world!\"; //å‘Šè¯‰ç¼–è¯‘å™¨ä½¿ç”¨çš„æ˜¯std::coutå–æ¶ˆoræ›¿æ¢ usingè¯­å¥ä¸€æ—¦ï¼Œusingè¯­å¥è¢«å£°æ˜ï¼Œé‚£å°±æ²¡æœ‰åŠæ³•åœ¨å£°æ˜å®ƒçš„èŒƒå›´å†…ä½¿ç”¨å¦ä¸€ä¸ªusingè¯­å¥æ›¿æ¢æˆ–å–æ¶ˆå®ƒã€‚1234567int main()&#123; using namespace Foo; //æ­¤æ—¶æ— æ³•ä½¿ç”¨ä¸€ä¸ªå…¶ä»–çš„ usingè¯­å¥æ¥ å–æ¶ˆæˆ–æ›¿æ¢ â€œusing namespace Foo;â€ return 0;&#125;//using namespace Foo ends hereå¯¹åº”å®ƒçš„æœ€å¥½åŠæ³•å°±æ˜¯ï¼Œæ˜¾ç¤ºçš„é™åˆ¶ usingè¯­å¥ çš„èŒƒå›´ï¼š12345678int main()&#123; &#123; using namespace Foo; //åœ¨è¿™é‡Œè°ƒç”¨Foo::ä¸­çš„ä¸œè¥¿ &#125; //using namespace Foo è¿‡æœŸ return 0;&#125;å½“ç„¶ï¼Œå¯ä»¥æ˜¾å¼åœ°ä½¿ç”¨èŒƒå›´è§£ææ“ä½œç¬¦(::)æ¥é¿å…æ‰€æœ‰è¿™äº›éº»çƒ¦ã€‚6.13 typedefä¸ç±»å‹åˆ«å**ä¼˜å…ˆä½¿ç”¨ç±»å‹åˆ«åï¼Œè€Œä¸æ˜¯typedefsï¼Œå¹¶å¤§é‡ä½¿ç”¨å®ƒä»¬æ¥è®°å½•ç±»å‹çš„å«ä¹‰**typedefå…è®¸ç¨‹åºçŒ¿å»åˆ›å»ºä¸€ä¸ªæ•°æ®ç±»å‹çš„åˆ«åã€‚ç„¶åå¯ä»¥ä½¿ç”¨åˆ«åæ¥æ›¿æ¢è¿™ä¸ªç±»å‹çœŸæ­£çš„åå­—ã€‚Typedefçš„å­—é¢æ„æ€æ˜¯â€œç±»å‹å®šä¹‰â€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…³é”®å­—typedefï¼Œæ¥è¿›è¡Œ ç±»å‹å®šä¹‰ï¼štypedef a b ï¼šå…¶ä¸­aè¡¨ç¤ºç±»å‹çš„åå­—ï¼Œbè¡¨ç¤ºç±»å‹è¢«æ›¿æ¢æˆçš„åˆ«å.12345typedef double distance_t; //å®šä¹‰distance_t ä½œä¸º doubleç±»å‹ çš„åˆ«å//ä¸‹é¢ä¸¤ä¸ªè¯­å¥æ˜¯ç­‰ä»·çš„:double howFar;distance_t howFar;æŒ‰ç…§æƒ¯ä¾‹ï¼Œtypedefåç§°æ˜¯ä½¿ç”¨â€œ_tâ€åç¼€å£°æ˜çš„ã€‚è¿™æœ‰åŠ©äºæŒ‡ç¤ºæ ‡è¯†ç¬¦ä»£è¡¨çš„æ˜¯ç±»å‹ï¼Œè€Œä¸æ˜¯å˜é‡æˆ–å‡½æ•°ï¼Œè¿˜æœ‰åŠ©äºé˜²æ­¢ä¸å…¶ä»–æ ‡è¯†ç¬¦çš„å‘½åå†²çªã€‚ç±»å‹åˆ«åä¸ºäº†å¸®åŠ©è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ç§æ”¹è¿›çš„typedefsè¯­æ³•ï¼Œå®ƒæ¨¡ä»¿äº†å˜é‡çš„å£°æ˜æ–¹å¼ã€‚è¿™ç§è¯­æ³•ç§°ä¸º type alias(ç±»å‹åˆ«å)ã€‚123typedef double distance_t; //å®šä¹‰distance_t ä½œä¸º doubleç±»å‹çš„ åˆ«åusing distance_t = double; //å®šä¹‰distance_t ä½œä¸º doubleç±»å‹çš„ åˆ«åã€æ¨èã€‘ä¸Šé¢ä¸¤ä¸ªè¯­å¥åœ¨åŠŸèƒ½ä¸Šç­‰ä»·ã€‚ã€NOTEã€‘è™½ç„¶ä½¿ç”¨äº†å…³é”®å­—usingï¼ˆåœ¨è¿™é‡Œæ˜¯é‡è½½çš„æ„ä¹‰ï¼‰ï¼Œä½†è¿™å’Œ ä¸å‘½åç©ºé—´ç›¸å…³çš„ usingè¯­å¥ æ²¡æœ‰å…³ç³»ã€‚ä¸ºæ˜“è¯»æ€§ä½¿ç”¨ç±»å‹åˆ«å1int GradeTest();æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œä½†æ˜¯è¿™ä¸ªæ•´æ•°æ˜¯ä»€ä¹ˆæ„æ€å‘¢?ä¸€ä¸ªå­—æ¯ç­‰çº§?é—æ¼äº†å¤šå°‘é—®é¢˜?å­¦ç”Ÿçš„èº«ä»½è¯å·ç ?ä¸€ä¸ªé”™è¯¯ä»£ç ?è°çŸ¥é“!Intä¸èƒ½å‘Šè¯‰æˆ‘ä»¬ä»»ä½•ä¸œè¥¿ã€‚å†™æˆä¸‹é¢å½¢å¼ï¼Œä¾¿äºç†è§£ï¼š12using testScore_t = int;testScore_t GradeTest();ä½¿ç”¨ç±»å‹åˆ«åç¼–å†™ä¸å¹³å°æ— å…³çš„ä»£ç æ¯”å¦‚ï¼Œåœ¨ä¸€äº›å¹³å°ä¸­ï¼Œintç±»å‹å 2ä¸ªå­—èŠ‚ï¼›ä½†åœ¨å…¶ä»–å¹³å°ä¸­ï¼Œå¯èƒ½å 4ä¸ªå­—èŠ‚ã€‚æ‰€ä»¥ï¼Œåœ¨4å­—èŠ‚å¹³å°ä¸­å†™çš„ä»£ç åœ¨2å­—èŠ‚å¹³å°ä¸­å¯èƒ½ä¼šå‡ºé”™ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨ç±»å‹åˆ«åå¯ä»¥å¸®åŠ©æˆ‘ä»¬é¿å…å‡ºé”™ï¼Œä¹Ÿæ›´æ¸…æ¥šåœ°è¯´æ˜äº†å¯¹å˜é‡å¤§å°çš„å‡è®¾ã€‚123456789#ifdef INT_2_BYTESusing int8_t = char;using int16_t = int;using int32_t = long;#elseusing int8_t = char;using int16_t = short;using int32_t = int;#endifå¦‚æœï¼Œåœ¨ä¸€ä¸ªæœºå™¨ä¸­ï¼Œæ•´æ•°æ˜¯2ä¸ªå­—èŠ‚ã€‚é‚£ä¹ˆINT_2_BYTESå°†è¢«å®šä¹‰ã€‚æ­¤æ—¶ï¼Œå°±ä½¿ç”¨çš„æ˜¯ä¸Šéƒ¨å®šä¹‰çš„è¿™å‡ ä¸ªã€‚å¦‚æœï¼Œåœ¨ä¸€ä¸ªæœºå™¨ä¸­ï¼Œæ•´æ•°æ˜¯4ä¸ªå­—èŠ‚ã€‚é‚£ä¹ˆINT_2_BYTESå°†ä¸è¢«å®šä¹‰ã€‚æ­¤æ—¶ï¼Œå°±ä½¿ç”¨çš„æ˜¯ä¸‹éƒ¨å®šä¹‰çš„è¿™å‡ ä¸ªã€‚è¿™ç§æƒ…å†µä¸‹ï¼šé€šè¿‡ä½¿ç”¨charã€shortã€intå’Œlongçš„ç»„åˆï¼Œè¿™å¯¹äºæ­£åœ¨ç¼–è¯‘ç¨‹åºçš„æœºå™¨æ˜¯åˆé€‚çš„int_8å°†å¤„ç† 1å­—èŠ‚çš„æ•´æ•°ï¼›int16_tå°†å¤„ç† 2å­—èŠ‚çš„æ•´æ•°ï¼›int32_tå°†å¤„ç† 4å­—èŠ‚çš„æ•´æ•°ã€‚6.14 å…³é”®å­—autoçœ‹ä¸€ä¸ªä¾‹å­ï¼š1double d &#123;5.0&#125;;å¦‚æœC++æ—©å°±çŸ¥é“5.0æ˜¯doubleç±»å‹çš„æ•°å­—ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜è¦æ˜¾ç¤ºçš„æŒ‡å®šdæ˜¯doubleç±»å‹çš„å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬å¯ä»¥è®©ä¸€ä¸ªå˜é‡æ ¹æ®æˆ‘ä»¬åˆå§‹åŒ–å®ƒçš„å€¼æ¥è®¾æƒ³å®ƒçš„ç±»å‹ï¼Œè¿™ä¸æ˜¯å¾ˆå¥½å—?åˆå§‹åŒ–å˜é‡çš„ç±»å‹æ¨æ–­å½“åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ï¼Œå…³é”®å­—autoå¯ä»¥ç”¨æ¥ä»£æ›¿ç±»å‹ï¼Œä»¥å‘Šè¯‰ç¼–è¯‘å™¨ä»åˆå§‹åŒ–å™¨çš„ç±»å‹æ¨æ–­å˜é‡çš„ç±»å‹ã€‚è¿™ç§å°±å«ä½œï¼štype inference(ç±»å‹æ¨æ–­), è‹±æ–‡ä¸­ä¹Ÿå¯ä»¥å«ä½œï¼štype deductionä¾‹å¦‚ï¼š12auto d &#123;5.0&#125;; //å› ä¸º5.0æ˜¯ä¸€ä¸ªdoubleç±»å‹çš„æ•°å­—ï¼Œæ‰€ä»¥å®ƒçš„ç±»å‹å°†è¢«æ¨æ–­ä¸ºdoubleauto i &#123;1+2&#125;; //å› ä¸º1+2çš„ç»“æœæ˜¯intç±»å‹ï¼Œæ‰€ä»¥ï¼Œi å°†è¢«æ¨æ–­ä¸ºintç±»å‹ä¹Ÿå¯ä»¥ç”¨åœ¨å‡½æ•°è¿”å›å€¼ï¼š123456789int add(int x, int y)&#123; return x+y;&#125;int main()&#123; auto sum&#123;add(5,6)&#125;; //add() è¿”å›ä¸€ä¸ªint, æ‰€ä»¥sumçš„ç±»å‹å°†è¢«æ¨æ–­ä¸ºint&#125;åœ¨C++14ä¸­å‡½æ•°çš„ç±»å‹æ¨æ–­åœ¨C++14ä¸­ï¼Œå…³é”®å­—autoè¢«æ‰©å±•åˆ°å¯ä»¥ä»å‡½æ•°ä½“ä¸­çš„è¿”å›è¯­å¥æ¨æ–­å‡ºå‡½æ•°çš„è¿”å›ç±»å‹ã€‚1234auto add(int x, int y)&#123; return x+y;&#125;å› ä¸ºx+yçš„å€¼æ˜¯intç±»å‹ï¼Œç¼–è¯‘å™¨å°†ä¼šæ¨æ–­è¿™ä¸ªå‡½æ•°åº”è¯¥è¿”å›ä¸€ä¸ªintç±»å‹ã€‚å½“ä½¿ç”¨autoè¿”å›ç±»å‹æ—¶ï¼Œæ‰€æœ‰çš„è¿”å›è¯­å¥å°±å¿…é¡»è¿”å›ç›¸åŒçš„ç±»å‹ï¼Œå¦åˆ™å°†ä¼šå‡ºé”™ã€‚ä½†æ˜¯ä¸æ¨èå¯¹å‡½æ•°çš„è¿”å›ç±»å‹ä½¿ç”¨å…³é”®å­—autoã€‚å› ä¸ºæ²¡æœ‰ä¸Šä¸‹æ–‡æ¥å¸®åŠ©æŒ‡ç¤ºå‡½æ•°è¿”å›çš„ç±»å‹ã€‚ç”¨æˆ·å®é™…ä¸Šå¿…é¡»æ·±å…¥å‡½æ•°ä½“æœ¬èº«æ¥ç¡®å®šå‡½æ•°è¿”å›çš„ç±»å‹ã€‚å®ƒä¸é‚£ä¹ˆç›´è§‚ï¼Œå› æ­¤æ›´å®¹æ˜“å‡ºé”™ã€‚åç½®è¿”å›ç±»å‹è¯­æ³•å…³é”®å­—autoä¹Ÿå¯ä»¥è¢«ç”¨æ¥åç½®è¿”å›ç±»å‹(trailing return syntax)ã€‚å³ï¼Œåœ¨å‡½æ•°åŸå‹ä¹‹åæŒ‡å®šè¿”å›çš„ç±»å‹ã€‚è¿™æ˜¯C++11æ–°å¢çš„ä¸€ç§å‡½æ•°å£°æ˜çš„æ–¹æ³•ã€‚ä¸‹é¢çš„ä¸¤ä¸ªå¯¹å‡½æ•°å£°æ˜çš„è¯­å¥æ˜¯ç­‰ä»·çš„ï¼š12int add(int x, int y);auto add(int x, int y) -&gt; int;//åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œautoä¸æ‰§è¡Œç±»å‹æ¨æ–­â€”â€”ä½¿ç”¨åç½®è¿”å›ç±»å‹åªæ˜¯è¯­æ³•çš„ä¸€éƒ¨åˆ†ã€‚é‚£ä¸ºä»€ä¹ˆè¦ç”¨åç½®ç±»å‹è¿”å›è¯­å¥å‘¢ï¼Ÿå…¶ä¸­çš„å¥½å¤„ä¹‹ä¸€å°±æ˜¯ï¼šå¯ä»¥è®©å‡½æ•°çš„å£°æ˜æ—¶çš„åå­—å¯¹é½ğŸ˜Šï¼Œå¦‚ï¼š1234auto add(int x, int y) -&gt; int;auto divide(double x, double y) -&gt; double;auto printSomething() -&gt; void;auto generateSubstring(const std::string &amp;s, int start, int len) -&gt; std::string;å‡½æ•°å½¢å‚çš„ç±»å‹æ¨æ–­åœ¨C++20æ—¶å¼•å…¥çš„123456789101112#include &lt;iostream&gt;void add(auto x, auto y) //only valid in C++20&#123; std::cout &lt;&lt;x+y;&#125;int main()&#123; add(2, 3); //int add(1.1, 2.2); //double&#125;åœ¨C++20ä¹‹å‰ï¼Œè¿™ç§å½¢å¼æ˜¯æ— æ•ˆçš„ã€‚å› ä¸ºç¼–è¯‘å™¨åœ¨ ç¼–è¯‘æ—¶(complie time) ä¸èƒ½æ¨æ–­å‡½æ•°å½¢å‚çš„ç±»å‹ã€‚åœ¨C++20ä¹‹å‰ï¼Œå¦‚æœä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªä½¿ç”¨å„ç§ä¸åŒç±»å‹çš„æ³›å‹å‡½æ•°ï¼Œä½ éœ€è¦ä½¿ç”¨function templatesï¼Œè€Œä¸æ˜¯ç°åœ¨ç”¨çš„type inference6.15 å¼ºåˆ¶ç±»å‹è½¬æ¢(éšå¼)ç±»å‹è½¬æ¢æœ‰ä¸¤ç§å½¢å¼ï¼šimplicit type conversionï¼ˆéšå¼ç±»å‹è½¬æ¢ï¼‰ï¼šç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†ä¸€ç§æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹explicit type conversionï¼ˆæ˜¾ç¤ºç±»å‹è½¬æ¢ï¼‰ï¼šå¼€å‘äººå‘˜ä½¿ç”¨è½¬æ¢æ“ä½œç¬¦æ¥æŒ‡å¯¼è½¬æ¢ã€‚å°†å€¼ä»ä¸€ç§æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹çš„è¿‡ç¨‹ç§°ä¸ºtype conversion(ç±»å‹è½¬æ¢)ã€‚ç±»å‹è½¬æ¢å¯ä»¥åœ¨è®¸å¤šä¸åŒçš„æƒ…å†µä¸‹å‘ç”Ÿ:å½“ç”¨ä¸åŒæ•°æ®ç±»å‹çš„å€¼ åˆ†é… æˆ– åˆå§‹ åŒ–ä¸€ä¸ªå˜é‡æ—¶:12double d&#123;3&#125;; // initialize double variable with integer value 3d = 6; // assign double variable the integer value 6å½“ä¼ é€’ä¸€ä¸ªå€¼ç»™ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä½†å‡½æ•°å‚æ•°æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ï¼š12345void doSomething(long l)&#123;&#125; doSomething(3); // pass integer value 3 to a function expecting a long parameterå½“ä»ä¸€ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªå€¼æ—¶ï¼Œè¯¥å‡½æ•°çš„è¿”å›ç±»å‹æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ï¼š1234float doSomething()&#123; return 3.0; // Return double value 3.0 back to caller through float return type&#125;ä½¿ç”¨ä¸åŒç±»å‹çš„æ“ä½œæ•°çš„ äºŒå…ƒæ“ä½œç¬¦ï¼š1double division&#123; 4.0 / 3 &#125;; // division with a double and an integeréšå¼ç±»å‹è½¬æ¢éšå¼ç±»å‹è½¬æ¢(ä¹Ÿç§°ä¸ºè‡ªåŠ¨ç±»å‹è½¬æ¢æˆ–å¼ºåˆ¶è½¬æ¢)åœ¨å¸Œæœ›æ˜¯è¿™ç§æ•°æ®ç±»å‹ï¼Œä½†æä¾›äº†å¦ä¸€ç§æ•°æ®ç±»å‹ã€‚ä¹³æ²Ÿç¼–è¯‘å™¨èƒ½å¤Ÿè¾¨è®¤å‡ºç±»å‹è½¬æ¢ä¸­çš„ä¸¤ç§ç±»å‹ï¼ŒæŒ ä»–å°±è½¬æ¢ã€‚å¦åˆ™ï¼ŒæŠ¥é”™ã€‚éšå¼ç±»å‹è½¬æ¢æœ‰ä¸¤ç§åŸºæœ¬ç±»å‹ï¼šæå‡å’Œè½¬æ¢ã€‚Numeric promotionæ•°å€¼æå‡æ¯å½“å°†ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼è½¬æ¢ä¸ºæ¥è‡ªåŒä¸€æ—çš„æ›´å¤§çš„åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼æ—¶ï¼Œè¿™ç§°ä¸ºæ•°å€¼æå‡(æˆ–åŠ å®½ï¼Œå°½ç®¡è¿™ä¸ªæœ¯è¯­é€šå¸¸ç”¨äºæ•´æ•°)ã€‚123//an int can be widened into a long, or a float promoted into a double:long l&#123; 64 &#125;; // widen the integer 64 into a longdouble d&#123; 0.12f &#125;; // promote the float 0.12 into a doubleè™½ç„¶æœ¯è¯­æ•°å€¼æ¨å¹¿æ¶µç›–äº†ä»»ä½•ç±»å‹çš„æå‡ï¼Œä½†åœ¨c++ä¸­è¿˜æœ‰ä¸¤ä¸ªå…·æœ‰ç‰¹å®šå«ä¹‰çš„æœ¯è¯­:Integral promotion(æ•´å‹æå‡)ï¼šå¯ä»¥å°†[ bool , char, unsigned char, signed char, unsigned short, and signed short ]è¿™äº›ç±»å‹è½¬æ¢ä¸º intæˆ–è€…æ˜¯unsigned intFloating point promotion(æµ®ç‚¹å‹æå‡)ï¼šå¯ä»¥å°†floatç±»å‹è½¬æ¢ä¸ºdoubleæ•´å‹æå‡ å’Œ æµ®ç‚¹å‹æå‡ é€šå¸¸æ˜¯å°† è¾ƒå°çš„æ•°æ®ç±»å‹è½¬æ¢ä¸ºint/unsigned intæˆ–doubleã€‚Numeric conversions(æ•°å€¼è½¬æ¢)å½“æˆ‘ä»¬å°†ä¸€ä¸ªå€¼ä»è¾ƒå¤§çš„ç±»å‹è½¬æ¢ä¸ºç±»ä¼¼çš„è¾ƒå°ç±»å‹æ—¶ï¼Œæˆ–è€…åœ¨ä¸åŒç±»å‹ä¹‹é—´è½¬æ¢æ—¶ï¼Œè¿™ç§°ä¸ºæ•°å€¼è½¬æ¢ã€‚ä¾‹å¦‚:12double d&#123; 3 &#125;; // convert integer 3 to a double (between different types)short s&#123; 2 &#125;; // convert integer 2 to a short (from larger to smaller type within same type family)æ•°å€¼æå‡æ˜¯å®‰å…¨çš„ï¼›ä½†æ˜¯æ•°å€¼è½¬æ¢å¯èƒ½ä¼šä¸¢å¤±æ•°æ®ã€‚å› æ­¤ï¼Œå¯¼è‡´æ‰§è¡Œéšå¼è½¬æ¢çš„ä»£ç é€šå¸¸ä¼šå¯¼è‡´ç¼–è¯‘å™¨å‘å‡ºè­¦å‘Šã€‚eg,å°†ä¸€ä¸ªå€¼è½¬æ¢ä¸ºçš„ç±»å‹æ²¡æœ‰è¶³å¤Ÿå¤§çš„èŒƒå›´æ¥æ”¯æŒè¿™ä¸ªå€¼ï¼Œå°±ä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„ç»“æœï¼š123456789101112int main()&#123; int i&#123; 30000 &#125;; char c = i; // chars have range -128 to 127 std::cout &lt;&lt; static_cast&lt;int&gt;(c); return 0;&#125;/********ç»“æœ**********/48åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªå¤§æ•´æ•°åˆ†é…ç»™ä¸€ä¸ªchar(å…¶èŒƒå›´ä¸º-128åˆ°127)ã€‚è¿™ä¼šå¯¼è‡´charæº¢å‡ºï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæ„å¤–çš„ç»“æœ: 48ä½†æ˜¯ï¼Œåªè¦å€¼ç¬¦åˆè¾ƒå°ç±»å‹çš„èŒƒå›´ï¼Œä»è¾ƒå¤§çš„æ•´æ•°æˆ–æµ®ç‚¹ç±»å‹è½¬æ¢ä¸ºè¾ƒå°çš„ç±»ä¼¼ç±»å‹é€šå¸¸å°±å¯ä»¥å·¥ä½œã€‚ä¾‹å¦‚:1234567891011 int i&#123; 2 &#125;; short s = i; // convert from int to short std::cout &lt;&lt; s &lt;&lt; '\\n'; double d&#123; 0.1234 &#125;; float f = d; std::cout &lt;&lt; f &lt;&lt; '\\n';/***********ç»“æœ**************/20.1234å¯¹äºæµ®ç‚¹å€¼ï¼Œç”±äºè¾ƒå°ç±»å‹çš„ç²¾åº¦æŸå¤±ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº›èˆå…¥ã€‚ä¾‹å¦‚:12345float f = 0.123456789; // double value 0.123456789 has 9 significant digits, but float can only support about 7 std::cout &lt;&lt; std::setprecision(9) &lt;&lt; f &lt;&lt; '\\n'; // std::setprecision defined in å¤´æ–‡ä»¶â€œiomanipâ€ä¸­/************ç»“æœ************/0.123456791åªè¦å€¼ç¬¦åˆæµ®ç‚¹ç±»å‹çš„èŒƒå›´ï¼Œå°±å¯ä»¥å°†æ•´æ•°è½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚ä¾‹å¦‚:123456 int i&#123; 10 &#125;; float f = i; std::cout &lt;&lt; f;/**************ç»“æœ**************/10åªè¦å€¼ç¬¦åˆæ•´æ•°çš„èŒƒå›´ï¼Œå°±å¯ä»¥å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°ï¼Œä½†æ˜¯ä»»ä½•å°æ•°å€¼éƒ½ä¼šä¸¢å¤±ã€‚ä¾‹å¦‚:12345 int i = 3.5; std::cout &lt;&lt; i &lt;&lt; '\\n';/***åœ¨æœ¬ä¾‹ä¸­ï¼Œä¸¢å¤±äº†åˆ†æ•°å€¼(.5)ï¼Œç»“æœå¦‚ä¸‹:****/3è®¡ç®—ç®—æœ¯è¡¨è¾¾å¼å½“è®¡ç®—è¡¨è¾¾å¼æ—¶ï¼Œç¼–è¯‘å™¨å°†æ¯ä¸ªè¡¨è¾¾å¼åˆ†è§£æˆå•ç‹¬çš„å­è¡¨è¾¾å¼ã€‚ç®—æœ¯è¿ç®—ç¬¦è¦æ±‚å®ƒä»¬çš„æ“ä½œæ•°å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ã€‚ä¸ºäº†ç¡®ä¿è¿™ä¸€ç‚¹ï¼Œç¼–è¯‘å™¨ä½¿ç”¨ä»¥ä¸‹è§„åˆ™:å¦‚æœä¸€ä¸ªæ“ä½œæ•°æ˜¯ä¸€ä¸ªæ¯”intæ›´çª„çš„æ•´æ•°ï¼Œå®ƒå°†ç»å†æ•´æ•°æå‡(å¦‚ä¸Šæ‰€è¿°)åˆ°intæˆ–usigned intã€‚å¦‚æœæ“ä½œæ•°ä»ç„¶ä¸åŒ¹é…ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæ‰¾åˆ°ä¼˜å…ˆçº§æœ€é«˜çš„æ“ä½œæ•°ï¼Œå¹¶éšå¼åœ°å°†å¦ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºåŒ¹é…çš„æ“ä½œæ•°ã€‚æ“ä½œæ•°çš„ä¼˜å…ˆçº§å¦‚ä¸‹:long double (highest)doublefloatunsigned long longlong longunsigned longlongunsigned intint (lowest)æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨typeidæ“ä½œç¬¦(åŒ…å«åœ¨å¤´ä¸­)çœ‹åˆ°é€šå¸¸çš„ç®—æœ¯è½¬æ¢ï¼Œè¯¥æ“ä½œç¬¦å¯ç”¨äºæ˜¾ç¤ºè¡¨è¾¾å¼çš„ç»“æœç±»å‹ã€‚eg1:1234567891011121314#include &lt;iostream&gt;#include &lt;typeinfo&gt; // for typeid() int main()&#123; short a&#123; 4 &#125;; short b&#123; 5 &#125;; std::cout &lt;&lt; typeid(a + b).name() &lt;&lt; \" \" &lt;&lt; a + b &lt;&lt; '\\n'; // show us the type of a + b return 0;&#125;/*å› ä¸ºshortæ˜¯æ•´æ•°ï¼Œæ‰€ä»¥å®ƒä»¬åœ¨è¢«æ·»åŠ ä¹‹å‰è¦ç»è¿‡æ•´æ•°æå‡åˆ°intã€‚æ·»åŠ ä¸¤ä¸ªintçš„ç»“æœæ˜¯ä¸€ä¸ªintï¼Œæ­£å¦‚æ‚¨æ‰€æœŸæœ›çš„:*/int 9æ³¨æ„:ç¼–è¯‘å™¨å¯èƒ½ä¼šæ˜¾ç¤ºä¸€äº›ç¨å¾®ä¸åŒçš„å†…å®¹ï¼Œå› ä¸ºtypeid.name()çš„æ ¼å¼ç”±ç¼–è¯‘å™¨å†³å®šã€‚eg2:12345678910111213#include &lt;iostream&gt;#include &lt;typeinfo&gt; // for typeid() int main()&#123; double d&#123; 4.0 &#125;; short s&#123; 2 &#125;; std::cout &lt;&lt; typeid(d + s).name() &lt;&lt; ' ' &lt;&lt; d + s &lt;&lt; '\\n'; // show us the type of d + s return 0;&#125;/*****ç»“æœ*************/double 6.0åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œshortå°†è¢« æ•°å€¼æå‡ ä¸ºintã€‚ä½†æ˜¯ï¼Œintä¸doubleè¿˜æ˜¯ä¸åŒ¹é…ã€‚åˆå› ä¸ºdoubleåœ¨ç±»å‹çš„å±‚æ¬¡ç»“æ„ä¸­æ›´é«˜ã€‚æ‰€ä»¥ï¼Œæ•´å‹çš„2å°†è¢«è½¬æ¢ä¸ºdouble ç±»å‹çš„ 2.0 ã€‚ç„¶åå°±ç›¸å½“äºæ˜¯ä¸¤ä¸ªdoubleç±»å‹çš„ç›¸åŠ ï¼Œç»“æœè¿˜æ˜¯doubleç±»å‹.å¼ºåˆ¶ç±»å‹è½¬æ¢(æ˜¾å¼) &amp; static_castæ˜¾å¼çš„ç±»å‹è½¬æ¢æ˜¯ä½¿ç”¨ type casting operator(ç±»å‹è½¬æ¢æ“ä½œç¬¦)ã€‚ï¼ˆé€šå¸¸æ˜¯ç¨‹åºå‘˜æ¥åšçš„ä¸€ä¸ªæ˜¾å¼çš„çš„ç±»å‹è½¬æ¢ï¼‰åœ¨C++ä¸­ï¼Œç±»å‹è½¬æ¢å¤§è‡´åˆ†ä¸º5ç§ï¼š C-style casts, static casts, const casts, dynamic casts, and reinterpret casts. åå››ä¸ªæœ‰æ—¶è¢«ç§°ä¸ºå‘½åç±»å‹è½¬æ¢(named casts)ã€‚åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»cé£æ ¼çš„ç±»å‹è½¬æ¢å’Œé™æ€ç±»å‹è½¬æ¢ã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„è¯¾ç¨‹ä¸­è®¨è®ºæŒ‡é’ˆå’Œç»§æ‰¿æ—¶å†ä¿å­˜åŠ¨æ€ç±»å‹è½¬æ¢ã€‚é€šå¸¸åº”è¯¥é¿å…ä½¿ç”¨Const castså’Œreinterpret castsï¼Œå› ä¸ºå®ƒä»¬åªåœ¨æå°‘æ•°æƒ…å†µä¸‹æœ‰ç”¨ï¼Œå¦‚æœä½¿ç”¨ä¸å½“å¯èƒ½ä¼šæœ‰å®³ã€‚C-style castsåœ¨æ ‡å‡†çš„Cè¯­è¨€ä¸­ï¼Œç±»å‹è½¬æ¢æ˜¯é€šè¿‡ æ“ä½œç¬¦()æ¥å®Œæˆçš„ã€‚æ‹¬å·å†…æ˜¯å°†è¦è½¬æ¢çš„ç›®æ ‡ç±»å‹ï¼š123int i1 &#123; 10 &#125;;int i2 &#123; 4 &#125;;float f &#123; (float)i1 / i2 &#125;;åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æµ®ç‚¹cé£æ ¼çš„å¼ºåˆ¶è½¬æ¢æ¥å‘Šè¯‰ç¼–è¯‘å™¨å°†i1è½¬æ¢ä¸ºæµ®ç‚¹å€¼ã€‚å› ä¸ºè¿ç®—ç¬¦/çš„å·¦æ“ä½œæ•°ç°åœ¨å˜ä¸ºæµ®ç‚¹å€¼ï¼Œå³æ“ä½œç¬¦ä¹Ÿå°†è¢«è½¬æ¢ä¸ºæµ®ç‚¹å€¼ã€‚å¹¶ä¸”é™¤æ³•å°†ä½¿ç”¨æµ®ç‚¹é™¤æ³•è€Œä¸æ˜¯æ•´æ•°é™¤æ³•!ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢æ¥æ¸…é™¤éšå¼ç±»å‹è½¬æ¢1234int i &#123; 48 &#125;; // explicit conversion from int to char, so that a char is assigned to variable chchar ch = static_cast&lt;char&gt;(i);å½“æˆ‘ä»¬è¿™æ ·åšæ—¶ï¼Œæˆ‘ä»¬æ˜¾å¼åœ°å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªè½¬æ¢æ˜¯æœ‰æ„çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬æ¥å—å¯¹ç»“æœçš„è´£ä»»ã€‚å› ä¸ºè¿™ä¸ªstatic_castçš„è¾“å‡ºç±»å‹æ˜¯charï¼Œæ‰€ä»¥å¯¹å˜é‡chçš„èµ‹å€¼ä¸ä¼šäº§ç”Ÿä»»ä½•ç±»å‹ä¸åŒ¹é…ï¼Œå› æ­¤æ²¡æœ‰è­¦å‘Šã€‚ä¸‹é¢çš„ç¨‹åºï¼Œç¼–è¯‘å™¨å°†ä¼šæŠ±æ€¨å°†doubleè½¬æ¢æˆintå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±:12int i &#123; 100 &#125;;i = i / 2.5;å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬æ˜ç¡®çš„æ„æ€æ˜¯è¿™æ ·åš:12int i &#123; 100 &#125;;i = static_cast&lt;int&gt;(i / 2.5);6.17 æœªå‘½å/å†…è” å‘½åç©ºé—´æœªå‘½å(åŒ¿å) å‘½åç©ºé—´12345678910111213141516171819#include &lt;iostream&gt; namespace // unnamed namespace&#123; void doSomething() // can only be accessed in this file &#123; std::cout &lt;&lt; \"v1\\n\"; &#125;&#125; int main()&#123; doSomething(); // we can call doSomething() without a namespace prefix return 0;&#125;/********ç»“æœ**********/v1åœ¨æœªå‘½åçš„å‘½åç©ºé—´ä¸­å£°æ˜çš„æ‰€æœ‰å†…å®¹éƒ½è¢«è§†ä¸ºçˆ¶å‘½åç©ºé—´çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œå°½ç®¡doSomethingå‡½æ•°æ˜¯åœ¨æœªå‘½åçš„å‘½åç©ºé—´ä¸­å®šä¹‰çš„ï¼Œä½†å‡½æ•°æœ¬èº«å¯ä»¥ä»çˆ¶å‘½åç©ºé—´(åœ¨æœ¬ä¾‹ä¸­æ˜¯global namespace)è®¿é—®ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥ä»mainè°ƒç”¨doSomethingè€Œä¸éœ€è¦ä»»ä½•é™å®šç¬¦ã€‚è¿™å¯èƒ½ä½¿æœªå‘½åçš„å‘½åç©ºé—´çœ‹èµ·æ¥æ¯«æ— ç”¨å¤„ã€‚ä½†æœªå‘½ååç§°ç©ºé—´çš„å¦ä¸€ä¸ªå½±å“æ˜¯ï¼šæœªå‘½åå‘½åç©ºé—´å†…çš„æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½è¢«è§†ä¸ºå…·æœ‰å†…éƒ¨é“¾æ¥ï¼Œè¿™æ„å‘³ç€æœªå‘½åå‘½åç©ºé—´çš„å†…å®¹å°±ä¸èƒ½åœ¨å…¶ä»–æ–‡ä»¶ä¸­çœ‹åˆ°ã€‚å¯¹äºå‡½æ•°ï¼Œè¿™å®é™…ä¸Šç­‰åŒäºå°†æœªå‘½åçš„å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰å‡½æ•°å®šä¹‰ä¸ºé™æ€å‡½æ•°ã€‚ä¸‹é¢çš„ç¨‹åºä¸ä¸Šé¢çš„ç¨‹åºå®é™…ä¸Šæ˜¯ç›¸åŒçš„ï¼š12345678910111213#include &lt;iostream&gt; static void doSomething() // can only be accessed in this file&#123; std::cout &lt;&lt; \"v1\\n\";&#125; int main()&#123; doSomething(); // we can call doSomething() without a namespace prefix return 0;&#125;unnamed namespaceé€šå¸¸ç”¨äº å½“ä½ æœ‰å¾ˆå¤šå†…å®¹æƒ³è¦ç¡®ä¿åœ¨ç»™å®šæ–‡ä»¶ä¸­ä¿æŒå±€éƒ¨æ—¶ï¼Œä½¿ç”¨unnamed namespaceè¦æ¯”å•ç‹¬å°†æ‰€æœ‰å£°æ˜æ ‡è®°ä¸ºstaticæ›´å®¹æ˜“ã€‚å†…è” å‘½åç©ºé—´Inline namespaces12345678910111213#include &lt;iostream&gt; void doSomething()&#123; std::cout &lt;&lt; \"v1\\n\";&#125; int main()&#123; doSomething(); return 0;&#125;ä½†æ˜¯å‡è®¾ä½ å¯¹doSomethingä¸æ»¡æ„ï¼Œä½ æƒ³é€šè¿‡æ”¹å˜å®ƒçš„è¡Œä¸ºæ–¹å¼æ¥æ”¹è¿›å®ƒã€‚ä½†å¦‚æœè¿™æ ·åšï¼Œå°±æœ‰å¯èƒ½ç ´åä½¿ç”¨æ—§ç‰ˆæœ¬çš„ç°æœ‰ç¨‹åºã€‚ä½ æ˜¯æ€ä¹ˆå¤„ç†çš„?ä¸€ç§æ–¹æ³•æ˜¯ç”¨ä¸åŒçš„åç§°åˆ›å»ºå‡½æ•°çš„æ–°ç‰ˆæœ¬ã€‚ä½†æ˜¯ç»è¿‡è®¸å¤šæ›´æ”¹ä¹‹åï¼Œæ‚¨å¯èƒ½ä¼šå¾—åˆ°ä¸€ç»„åç§°å‡ ä¹ç›¸åŒçš„å‡½æ•°(doSomethingã€doSomething_v2ã€doSomething_v3ç­‰)ã€‚ã€æ¨èã€‘å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å†…è”å‘½åç©ºé—´ã€‚å†…è”å‘½åç©ºé—´æ˜¯é€šå¸¸ç”¨äºç‰ˆæœ¬åŒ–å†…å®¹çš„åç§°ç©ºé—´ã€‚ä¸æœªå‘½åçš„å‘½åç©ºé—´éå¸¸ç›¸ä¼¼ï¼Œåœ¨å†…è”å‘½åç©ºé—´ä¸­å£°æ˜çš„ä»»ä½•å†…å®¹éƒ½è¢«è®¤ä¸ºæ˜¯çˆ¶åç§°ç©ºé—´çš„ä¸€éƒ¨åˆ†ã€‚ç„¶è€Œï¼Œå†…è”å‘½åç©ºé—´å¹¶ä¸æ˜¯ å†…éƒ¨é“¾æ¥ã€‚ä½¿ç”¨å…³é”®å­—inline1234567891011121314151617181920212223242526272829303132#include &lt;iostream&gt; inline namespace v1 // declare an inline namespace named v1&#123; void doSomething() &#123; std::cout &lt;&lt; \"v1\\n\"; &#125;&#125; namespace v2 // declare a normal namespace named v2&#123; void doSomething() &#123; std::cout &lt;&lt; \"v2\\n\"; &#125;&#125; int main()&#123; v1::doSomething(); // calls the v1 version of doSomething() v2::doSomething(); // calls the v2 version of doSomething() doSomething(); // calls the inline version of doSomething() (which is v1) return 0;&#125;/*********ç»“æœ********/v1v2v1å¯ä»¥çœ‹å‡ºï¼Œå½“æœ‰ å†…è”å‡½æ•°å­˜åœ¨æ—¶ï¼Œå¦‚æœä¸åŠ å‰ç¼€ï¼Œåˆ™é»˜è®¤è°ƒç”¨çš„æ˜¯ å†…è”å‡½æ•°ç‰ˆæœ¬åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè°ƒç”¨doSomethingå°†å¾—åˆ°doSomethingçš„v1(å†…è”ç‰ˆæœ¬)ã€‚å¸Œæœ›ä½¿ç”¨æ–°ç‰ˆæœ¬çš„è°ƒç”¨è€…å¯ä»¥æ˜¾å¼åœ°è°ƒç”¨v2::dosomething()ã€‚è¿™ä¿ç•™äº†ç°æœ‰ç¨‹åºçš„åŠŸèƒ½ï¼ŒåŒæ—¶å…è®¸æ›´æ–°çš„ç¨‹åºåˆ©ç”¨æ›´æ–°çš„/æ›´å¥½çš„å˜ä½“ã€‚6.x Chapter 6 summary and quizhttps://www.learncpp.com/cpp-tutorial/chapter-6-summary-and-quiz/","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"GIT å­¦ä¹ ","slug":"å­¦ä¹ ç¬”è®°/GIT å­¦ä¹ ","date":"2020-04-05T06:08:23.000Z","updated":"2020-09-06T03:34:02.000Z","comments":true,"path":"archives/18085cf9.html","link":"","permalink":"https://longlongqin.github.io/archives/18085cf9.html","excerpt":"Gitå­¦ä¹ ç¬”è®°","text":"Gitå­¦ä¹ ç¬”è®°Gitçš„ä¸‰ç§çŠ¶æ€ï¼šcommittedï¼ˆå·²æäº¤ï¼‰ï¼šæ•°æ®å·²ç»å®‰å…¨çš„ä¿å­˜åœ¨æœ¬åœ°æ•°æ®åº“ï¼ˆä»“åº“ï¼‰ï¼›modifiedï¼ˆå·²ä¿®æ”¹ï¼‰ï¼šä¿®æ”¹äº†æ–‡ä»¶ï¼Œä½†è¿˜æ²¡æœ‰ä¿å­˜åˆ°æ•°æ®åº“ï¼›stagedï¼ˆå·²æš‚å­˜ï¼‰ï¼šå¯¹ä¸€ä¸ªå·²ä¿®æ”¹æ–‡ä»¶çš„å½“å‰ç‰ˆæœ¬åšäº†æ ‡è®°ï¼Œä½¿ä¹‹åŒ…å«åœ¨ä¸‹æ¬¡æäº¤çš„å¿«ç…§ä¸­ã€‚Gité¡¹ç›®çš„ä¸‰ä¸ªå·¥ä½œåŒºåŸŸæ¦‚å¿µï¼šGitä»“åº“ï¼ˆGit directory æˆ– repositoryï¼‰ï¼šæ˜¯Gitç”¨æ¥ä¿å­˜é¡¹ç›®çš„å…ƒæ•°æ®å’Œå¯¹è±¡æ•°æ®åº“çš„åœ°æ–¹ã€‚æ˜¯Gitæœ€é‡è¦éƒ¨åˆ†ï¼Œä»å…¶ä»–è®¡ç®—æœºå…‹éš†ä»“åº“æ—¶ï¼Œæ‹·è´çš„å°±æ˜¯è¿™é‡Œçš„æ•°æ®ã€‚å·¥ä½œç›®å½•ï¼ˆworking directoryï¼‰ï¼šå¯¹é¡¹ç›®çš„æŸä¸ªç‰ˆæœ¬ç‹¬ç«‹æå–å‡ºæ¥çš„å†…å®¹ã€‚è¿™äº›ä»Gitä»“åº“çš„å‹ç¼©æ•°æ®åº“ä¸­æå–å‡ºæ¥çš„æ–‡ä»¶ï¼Œæ”¾åœ¨ç£ç›˜ä¸Šä¾›ä½ ä½¿ç”¨æˆ–ä¿®æ”¹ã€‚æš‚å­˜åŒºåŸŸï¼ˆstaging areaï¼‰ï¼šæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜äº†ä¸‹ä¸€æ¬¡å°†æäº¤çš„æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯ï¼Œä¸€èˆ¬åœ¨Gitä»“åº“ç›®å½•ä¸­ï¼Œæœ‰æ—¶ä¹Ÿè¢«ç§°ä½œâ€œç´¢å¼•â€ã€‚åŸºæœ¬çš„ Git å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š1.åœ¨å·¥ä½œç›®å½•ä¸­ä¿®æ”¹æ–‡ä»¶ï¼›2.æš‚å­˜æ–‡ä»¶ï¼Œå°†æ–‡ä»¶çš„å¿«ç…§æ”¾å…¥æš‚å­˜åŒºåŸŸï¼›3.æäº¤æ›´æ–°ï¼Œæ‰¾åˆ°æš‚å­˜åŒºåŸŸçš„æ–‡ä»¶ï¼Œå°†å¿«ç…§æ°¸ä¹…æ€§å­˜å‚¨åˆ° Git ä»“åº“ç›®ã€‚åˆå§‹è®¾ç½®ï¼šè®¾ç½®å§“åå’Œé‚®ç®±ï¼š12git config --global user.name &quot;Firstname Lastname&quot; &#x2F;&#x2F; åå­—ä½¿ç”¨è‹±æ–‡è¾“å…¥git config --global user.email &quot;your_email@example.com&quot;æ³¨æ„git configå‘½ä»¤çš„--globalå‚æ•°ï¼Œç”¨äº†è¿™ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä½ è¿™å°æœºå™¨ä¸Šæ‰€æœ‰çš„Gitä»“åº“éƒ½ä¼šä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æŸä¸ªä»“åº“æŒ‡å®šä¸åŒçš„ç”¨æˆ·åå’ŒEmailåœ°å€ã€‚è¿™ä¸ªå‘½ä»¤ï¼Œä¼šåœ¨â€œ~/.gitconfigâ€ä¸­ä»¥å¦‚ä¸‹å½¢å¼è¾“å‡ºè®¾ç½®æ–‡ä»¶ã€‚æˆ‘çš„ç”µè„‘ä¸Šï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹çš„ä½ç½®åœ¨C:\\Users\\ACERè®¾ç½®SSH key:åˆ›å»ºå…¬å¼€å¯†é’¥ï¼š1ssh-keygen -t rsa -C &quot;your_email@example.com&quot;å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•é‡Œæ‰¾åˆ°.sshç›®å½•ï¼Œæˆ‘çš„åœ¨ï¼šC:\\Users\\ACER\\.sshé‡Œé¢æœ‰id_rsaå’Œid_rsa.pubä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯SSH Keyçš„ç§˜é’¥å¯¹ï¼Œid_rsaæ˜¯ç§é’¥ï¼Œä¸èƒ½æ³„éœ²å‡ºå»ï¼Œid_rsa.pubæ˜¯å…¬é’¥ï¼Œå¯ä»¥æ”¾å¿ƒåœ°å‘Šè¯‰ä»»ä½•äººã€‚åˆå§‹åŒ–Gitä»“åº“ï¼šåœ¨è¯¥ä»“åº“ä¸­ï¼Œæ‰“å¼€Git bashï¼Œç„¶åï¼š1git initå…³è”è¿œç¨‹ä»“åº“ï¼šåœ¨è¿œç¨‹ä»“åº“ï¼ˆå¦‚ï¼šgithubã€giteeï¼‰ä¸­æœ‰ä¸€ä¸ªæ–°ä»“åº“ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥ï¼šå…‹éš†ä¸€ä»½åˆ°æœ¬åœ°ï¼›ä¹Ÿå¯ä»¥æŠŠä¸€ä¸ªå·²æœ‰çš„æœ¬åœ°ä»“åº“ä¸ä¹‹å…³è”ã€‚123456git remote add &lt;è¿œç¨‹ä»“åº“åå­—&gt; &lt;è¿œç¨‹ä»“åº“çš„SSHæˆ–HTTPS&gt;å¦‚ï¼šgit remote add origin git@github.com:michaelliao&#x2F;learngit.gitå…¶ä¸­ï¼š è¿œç¨‹ä»“åº“åå­—ï¼šoriginï¼ˆæ˜¯gitçš„é»˜è®¤å«æ³•ï¼Œä¹Ÿå¯ä»¥å†™æˆå…¶ä»–çš„ï¼‰ è¿œç¨‹ä»“åº“çš„SSHï¼šgit@github.com:longlongqin&#x2F;learngit.git å½“éœ€è¦å°†ä¸€ä¸ªä»“åº“åŒæ—¶åœ¨github å’Œ giteeä¸Šå…³è”æ—¶ï¼šå‡å¦‚åœ¨giteeä¸Šå…³è”ä¹‹å‰ï¼Œå·²ç»åœ¨GitHubä¸Šå…³è”è¿‡äº†ã€‚æ¯”å¦‚äº‹å…ˆåœ¨GitHubä¸Šï¼šgit remote add origin git@github.com:longlongqin/LearnGit.gitï¼Œå…³è”äº†ä¸€ä¸ªå«originçš„è¿œç¨‹ä»“åº“ã€‚ç„¶åï¼Œæˆ‘ç°åœ¨è¦åœ¨giteeä¸Šå…³è”ä¸€ä¸ªä»“åº“ï¼šgit remote add origin git@gitee.com:longlongqin/LearnGit.gitå‡ºç°æŠ¥é”™ï¼šfatal: remote origin already exists.è¯´æ˜ï¼Œæœ¬åœ°åº“å·²ç»å…³è”äº†ä¸€ä¸ªå«åšoriginçš„è¿œç¨‹ä»“åº“äº†ï¼Œæ‰€ä»¥æ‰ä¼šæŠ¥é”™ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œä¸èƒ½å°†githubå’Œgiteeä¸Šçš„ä»“åº“åå­—éƒ½å«ä¸€æ ·çš„åå­—ã€‚ä»–ä»¬ä¹‹é—´çš„åå­—è¦åŒºåˆ†ã€‚å…ˆï¼Œåˆ é™¤å…³è”çš„å·²æœ‰çš„GitHubè¿œç¨‹åº“ï¼š1git remote rm originå†å¼€å§‹é‡æ–°å…³è”githubå’Œgiteeçš„ä»“åº“ï¼Œè¿™æ¬¡è¦å°†ä»–ä»¬çš„ä»“åº“åå­—åŒºåˆ†å¼€ï¼š/*giteeä¸­çš„LearnGitä»“åº“èµ·åï¼šgiteeï¼›/*githubä¸­çš„LearnGitä»“åº“èµ·åï¼šgithubï¼›12git remote gitee origin git@gitee.com:longlongqin&#x2F;LearnGit.gitgit remote github origin git@github.com:longlongqin&#x2F;LearnGit.gitæ£€æŸ¥ä¸€ä¸‹ï¼Œæ˜¯å¦æˆåŠŸï¼šâ€‹ æˆ‘ä»¬ç”¨git remote -væŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªè¿œç¨‹åº“ï¼š12345$ git remote -vgitee git@gitee.com:longlongqin&#x2F;LearnGit.git (fetch)gitee git@gitee.com:longlongqin&#x2F;LearnGit.git (push)github git@github.com:longlongqin&#x2F;LearnGit.git (fetch)github git@github.com:longlongqin&#x2F;LearnGit.git (push)æˆåŠŸã€‚å–æ¶ˆå…³è”è¿œç¨‹ä»“åº“ï¼šåœ¨å…³è”è¿œç¨‹ä»“åº“ä¸€èŠ‚ä¸­ï¼Œå…³è”è¿œç¨‹ä»“åº“ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å–æ¶ˆä»¥ç»å…³è”çš„è¿œç¨‹ä»“åº“ï¼Œè®©ä»–ä»¬å–æ¶ˆå…³è”ï¼š1git remote rm &lt;è¦å–æ¶ˆå…³è”çš„è¿œç¨‹ä»“åº“çš„åå­—&gt;æ—¶å…‰ç©¿æ¢­æœºæ’¤é”€ä¿®æ”¹1ã€æ²¡æœ‰git addæ—¶ï¼ˆå³ï¼Œå¯¹æ–‡ä»¶åšäº†ä¿®æ”¹ï¼Œä½†æ˜¯æ²¡æ·»åŠ åˆ°æš‚å­˜åŒºï¼‰ï¼š==ç”¨git checkout -- &lt;file&gt; (==fileå‰é¢æœ‰ä¸€ä¸ªç©ºæ ¼)2ã€å·²ç»git addæ—¶ï¼ˆå³ï¼Œå¯¹æ–‡ä»¶åšäº†ä¿®æ”¹ï¼Œå¹¶ä¸”æ·»åŠ åˆ°æš‚å­˜åŒºï¼‰ï¼šå…ˆgit reset HEAD &lt;file&gt;æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æ‰ï¼Œå³ï¼šå›é€€åˆ°æ²¡æœ‰git addæ—¶çš„çŠ¶æ€ç„¶åï¼Œå†git checkout -- &lt;file&gt;ã€‚3ã€å·²ç»git commitæ—¶ï¼ˆå³ï¼Œå¯¹æ–‡ä»¶åšäº†ä¿®æ”¹ï¼Œä¸ä»…æ·»åŠ åˆ°æš‚å­˜åŒºï¼Œè€Œä¸”è¿˜æäº¤åˆ°æœ¬åœ°ä»“åº“ä¸­äº†ï¼‰ï¼šè¿›è¡Œ==ç‰ˆæœ¬å›é€€==ç‰ˆæœ¬å›é€€ç‰ˆæœ¬ä¹‹é—´çš„åˆ‡æ¢ï¼Œç‰ˆæœ¬æŒ‡çš„æ˜¯git commitä¹‹åå¸¦æœ‰å“ˆå¸Œå€¼çš„çŠ¶æ€ã€‚ç‰ˆæœ¬å›é€€ï¼šgit reset --hard commit_id å¯ä»¥å›é€€åˆ°ç‰ˆæœ¬å·ä¸ºcommit_idçš„é‚£ä¸ªç‰ˆæœ¬ã€‚git reset --hard head^ å›é€€åˆ°å½“å‰ç‰ˆæœ¬çš„ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚è½¬å›åˆ°æ–°ç‰ˆæœ¬ï¼šå› ä¸ºgit logæ˜¾ç¤ºçš„æ˜¯ä»æ­¤åˆ»headæŒ‡é’ˆæ‰€åœ¨çš„çŠ¶æ€åˆ°ä¹‹å‰çš„çŠ¶æ€çš„æäº¤æ—¥å¿—ã€‚è€Œgit reflogç”¨æ¥è®°å½•ä½ çš„æ¯ä¸€æ¬¡å‘½ä»¤ã€‚æ‰€ä»¥è½¬å›åˆ°æ¯”å½“å‰æ‰€åœ¨çš„çŠ¶æ€è¦æ–°çš„çŠ¶æ€éœ€è¦ï¼šgit reflog,æ‰¾åˆ°ä½ æƒ³è¦å›å»çš„é‚£ä¸ªè¾ƒæ–°çš„çŠ¶æ€çš„commit çš„idgit reset --hard &lt;commit_id&gt; å›åˆ°æƒ³è¦å›å™¨çš„é‚£ä¸ªç‰ˆæœ¬ã€‚åˆ é™¤æ–‡ä»¶rm &lt;file&gt;ä»å·¥ä½œåŒºä¸­åˆ é™¤æ–‡ä»¶ï¼ˆå’Œæ‰‹åŠ¨åˆ é™¤æ–‡ä»¶æ•ˆæœä¸€æ ·ã€‚ï¼‰git rm &lt;file&gt;å°†æ–‡ä»¶ä»å·¥ä½œåŒºåˆ é™¤ï¼Œå¹¶ä¸”è¿˜æ·»åŠ åˆ°äº†æš‚å­˜åŒºï¼ˆå³ï¼ŒæŠŠåˆ é™¤çš„è¿™ä¸ªçŠ¶æ€åŒæ­¥åˆ°æš‚å­˜åŒºäº†ï¼‰ã€‚git rm -r &lt;æ–‡ä»¶å¤¹&gt; åˆ é™¤ä¸€ä¸ªæ–‡ä»¶å¤¹[^å°æç¤º]: å…ˆæ‰‹åŠ¨åˆ é™¤æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨git rmå’Œgit addæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚è¿œç¨‹ä»“åº“æ·»åŠ è¿œç¨‹ä»“åº“ï¼šå…³è”ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼šgit remote add origin git@github.com:path/repo-name.gitå…³è”åï¼Œç¬¬ä¸€æ¬¡æ¨é€masteråˆ†æ”¯çš„æ‰€æœ‰å†…å®¹ï¼šgit push origin masterè¿œç¨‹ä»“åº“å…‹éš†ï¼š1git clone &lt;ä½ æƒ³è¦å…‹éš†å†…å®¹çš„å…¬å¼€å¯†é’¥çš„å¯†ç &gt;å…¬å¼€çš„å¯†é’¥å¯†ç ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šåˆ†æ”¯ç®¡ç†åˆ›å»ºä¸åˆå¹¶åˆ†æ”¯ï¼šæŸ¥çœ‹åˆ†æ”¯ï¼šgit branchæ–°å»ºåˆ†æ”¯ï¼šgit branch &lt;name&gt;åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout -b &lt;name&gt; or git switch -c &lt;name&gt;åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout &lt;name&gt; or git switch &lt;name&gt;åˆ é™¤åˆ†æ”¯ï¼šgit branch -d &lt;name&gt;ä¸èƒ½åˆ é™¤å½“å‰æ‰€åœ¨çš„åˆ†æ”¯åˆå¹¶åˆ†æ”¯ï¼šgit merge &lt;name&gt; ç”¨äºåˆå¹¶åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯git merge --no-ff &lt;name&gt; å…¶ä¸­å‚æ•°â€“no-ffï¼šè¡¨ç¤ºåœ¨å†å²è®°å½•ä¸­æ˜ç¡®è®°å½•ä¸‹æœ¬æ¬¡åˆ†æ”¯åˆå¹¶ã€‚æ³¨æ„ï¼šè¾“å…¥æ­¤å‘½ä»¤ä¹‹åï¼Œä¼šå¯åŠ¨ç¼–è¾‘å™¨ï¼Œç”¨äºå½•å…¥åˆå¹¶æäº¤çš„ä¿¡æ¯ã€‚è§£å†³å†²çªï¼šå½“Gitæ— æ³•è‡ªåŠ¨åˆå¹¶åˆ†æ”¯æ—¶ï¼Œå°±å¿…é¡»é¦–å…ˆè§£å†³å†²çªã€‚è§£å†³å†²çªåï¼Œå†æäº¤ï¼Œåˆå¹¶å®Œæˆã€‚è§£å†³å†²çªå°±æ˜¯æŠŠGitåˆå¹¶å¤±è´¥çš„æ–‡ä»¶æ‰‹åŠ¨ç¼–è¾‘ä¸ºæˆ‘ä»¬å¸Œæœ›çš„å†…å®¹ï¼Œå†æäº¤ã€‚ç”¨git log --graphå‘½ä»¤å¯ä»¥çœ‹åˆ°åˆ†æ”¯åˆå¹¶å›¾ã€‚åˆ†æ”¯ç®¡ç†ç­–ç•¥ï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æŒ‰ç…§å‡ ä¸ªåŸºæœ¬åŸåˆ™è¿›è¡Œåˆ†æ”¯ç®¡ç†ï¼šé¦–å…ˆï¼Œmasteråˆ†æ”¯åº”è¯¥æ˜¯éå¸¸ç¨³å®šçš„ï¼Œä¹Ÿå°±æ˜¯ä»…ç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå¹³æ—¶ä¸èƒ½åœ¨ä¸Šé¢å¹²æ´»ï¼›é‚£åœ¨å“ªå¹²æ´»å‘¢ï¼Ÿå¹²æ´»éƒ½åœ¨devåˆ†æ”¯ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œdevåˆ†æ”¯æ˜¯ä¸ç¨³å®šçš„ï¼Œåˆ°æŸä¸ªæ—¶å€™ï¼Œæ¯”å¦‚1.0ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œå†æŠŠdevåˆ†æ”¯åˆå¹¶åˆ°masterä¸Šï¼Œåœ¨masteråˆ†æ”¯å‘å¸ƒ1.0ç‰ˆæœ¬ï¼›ä½ å’Œä½ çš„å°ä¼™ä¼´ä»¬æ¯ä¸ªäººéƒ½åœ¨devåˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åˆ†æ”¯ï¼Œæ—¶ä¸æ—¶åœ°å¾€devåˆ†æ”¯ä¸Šåˆå¹¶å°±å¯ä»¥äº†ã€‚æ‰€ä»¥ï¼Œå›¢é˜Ÿåˆä½œçš„åˆ†æ”¯çœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼šå°ç»“ï¼šGitåˆ†æ”¯ååˆ†å¼ºå¤§ï¼Œåœ¨å›¢é˜Ÿå¼€å‘ä¸­åº”è¯¥å……åˆ†åº”ç”¨ã€‚åˆå¹¶åˆ†æ”¯æ—¶ï¼ŒåŠ ä¸Š--no-ffå‚æ•°å°±å¯ä»¥ç”¨æ™®é€šæ¨¡å¼åˆå¹¶ï¼Œåˆå¹¶åçš„å†å²æœ‰åˆ†æ”¯ï¼Œèƒ½çœ‹å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ï¼Œè€Œfast forwardåˆå¹¶å°±çœ‹ä¸å‡ºæ¥æ›¾ç»åšè¿‡åˆå¹¶ã€‚åˆå¹¶åˆ†æ”¯çš„ä¸¤ç§æ–¹å¼ï¼šgit çš„ merge ä¸ merge no-ff çš„ä¸åŒä¹‹å¤„ï¼š no-ff mergeå¯ä»¥çœ‹åˆ°åˆå¹¶å†å²ã€‚æ–°å»ºåˆ†æ”¯dev1ï¼Œä¿®æ”¹readme.txtï¼Œç„¶ååœ¨dev1åˆ†æ”¯ä¸‹git add readme.txt git commit -m &quot;dev1 branch commit&quot;å›åˆ°masteråˆ†æ”¯ï¼Œæ‰§è¡Œmergeå³git merge dev1åˆ é™¤åˆ†æ”¯æŸ¥çœ‹æ—¥å¿—å³git log --graph --pretty=oneline --abbrev-commitæ–°å»ºåˆ†æ”¯dev2ï¼Œä¿®æ”¹readme.txtï¼Œç„¶ååœ¨dev2åˆ†æ”¯ä¸‹git add readme.txt git commit -m &quot;dev2 branch commit&quot;å›åˆ°masteråˆ†æ”¯ï¼Œæ‰§è¡Œmergeå³git merge --no-ff -m &quot;dev2 merged with mo-ff&quot; dev2åˆ é™¤åˆ†æ”¯æŸ¥çœ‹æ—¥å¿—å³git log --graph --pretty=oneline --abbrev-commitæ¯”è¾ƒä¸¤æ¬¡åˆå¹¶ï¼Œå¯ä»¥çœ‹å‡ºä¸åŒä¹‹å¤„ï¼Œno-ffçš„æ¨¡å¼ä¼šè®°å½•åˆ†æ”¯å†å²ã€12//æ£€æŸ¥ Git çš„æŸä¸€é¡¹é…ç½®ï¼šgit config &lt;key&gt; 12//åˆ—å‡ºæ‰€æœ‰ Git å½“æ—¶èƒ½æ‰¾åˆ°çš„é…ç½®ï¼š git config --list 1234//è·å–å¸®åŠ©ï¼š3ç§æ–¹æ³•$ git help &lt;verb&gt;$ git &lt;verb&gt; --help$ man git-&lt;verb&gt;###############################################Git å…¶ä»–æŒ‡ä»¤ï¼šæŸ¥çœ‹å·¥ä½œåŒºçŠ¶æ€statusï¼šgit statusæŸ¥çœ‹çš„æ˜¯å·¥ä½œåŒºçš„çŠ¶æ€ã€‚git diff æŸ¥çœ‹å·¥ä½œåŒºä¸æš‚å­˜åŒºçš„åŒºåˆ«ã€‚git diff headæŸ¥çœ‹å·¥ä½œåŒºä¸æœ¬åœ°ä»“åº“çš„åŒºåˆ«ã€‚æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼š1cat &lt;name&gt;æäº¤ï¼šå·¥ä½œåŒºæäº¤åˆ°æš‚å­˜åŒºï¼š1git add &quot;filename&quot;æš‚å­˜åŒºæäº¤åˆ°æœ¬åœ°ä»“åº“ï¼š1git commit -m &quot;message&quot; &#x2F;&#x2F;messageæ˜¯å¯¹æ­¤æ¬¡æäº¤çš„ä¸€ä¸ªè¯´æ˜è¯­å¥12git commit&#x2F;&#x2F;æ­¤å‘½ä»¤å¯ä»¥æ›´åŠ è¯¦ç»†çš„è®°è¿°æäº¤ä¿¡æ¯ï¼ˆè¿è¡Œæ­¤å‘½ä»¤åï¼Œä¼šè‡ªåŠ¨æ‰“å¼€Gitè®¾ç½®å¥½çš„ç¼–è¾‘å™¨ï¼‰æ‰§è¡Œæ­¤å‘½ä»¤åï¼Œç¼–è¾‘å™¨å°±ä¼šå¯åŠ¨ï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š1234567# Please enter the commit message for your changes. Lines starting# with &#39;#&#39; will be ignored, and an empty message aborts the commit.## On branch dev# Changes to be committed:# modified: readme.txt#åœ¨ç¼–è¾‘å™¨ä¸­è®°è¿°æäº¤ä¿¡æ¯çš„æ ¼å¼å¦‚ä¸‹ï¼šâ— ç¬¬ä¸€è¡Œï¼šç”¨ä¸€è¡Œæ–‡å­—ç®€è¿°æäº¤çš„æ›´æ”¹å†…å®¹â— ç¬¬äºŒè¡Œï¼šç©ºè¡Œâ— ç¬¬ä¸‰è¡Œä»¥åï¼šè®°è¿°æ›´æ”¹çš„åŸå› å’Œè¯¦ç»†å†…å®¹1git commit --amend :ä¿®æ”¹ä¸Šä¸€æ¡æäº¤æ—¶å†™çš„ä¿¡æ¯æœ¬åœ°ä»“åº“æäº¤(æ¨é€)åˆ°è¿œç¨‹ä»“åº“ï¼šgit pushæƒ…å†µä¸€ï¼šæ³¨æ„ï¼Œåˆ†æ”¯æ¨é€é¡ºåºçš„å†™æ³•æ˜¯&lt;æ¥æºåœ°&gt;:&lt;ç›®çš„åœ°&gt;ï¼Œæ‰€ä»¥git pullæ˜¯&lt;è¿œç¨‹åˆ†æ”¯&gt;:&lt;æœ¬åœ°åˆ†æ”¯&gt;ï¼Œè€Œgit pushæ˜¯&lt;æœ¬åœ°åˆ†æ”¯&gt;:&lt;è¿œç¨‹åˆ†æ”¯&gt;ã€‚1git push &lt;è¿œç¨‹ä»“åº“å&gt; &lt;æœ¬åœ°åˆ†æ”¯å&gt;:&lt;è¿œç¨‹åˆ†æ”¯å&gt;æƒ…å†µäºŒï¼šï¼ˆæ¨èï¼‰å¦‚æœçœç•¥è¿œç¨‹åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºå°†æœ¬åœ°åˆ†æ”¯æ¨é€ä¸ä¹‹å­˜åœ¨â€è¿½è¸ªå…³ç³»â€çš„è¿œç¨‹åˆ†æ”¯ï¼ˆé€šå¸¸ä¸¤è€…åŒåï¼‰ï¼Œå¦‚æœè¯¥è¿œç¨‹åˆ†æ”¯ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚1234git push &lt;è¿œç¨‹ä»“åº“åå­—&gt; &lt;å°†æœ¬åœ°çš„åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ï¼ˆæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„åå­—ä¸€æ ·ï¼‰&gt;å¦‚ï¼šgit push origin masterä¸Šé¢å‘½ä»¤è¡¨ç¤ºï¼Œå°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originä¸»æœºçš„masteråˆ†æ”¯ã€‚å¦‚æœåè€…ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè¢«æ–°å»ºã€‚æƒ…å†µä¸‰ï¼šä¸‹é¢å‘½ä»¤å°†æœ¬åœ°çš„masteråˆ†æ”¯æ¨é€åˆ°originè¿œç¨‹ä»“åº“ï¼ŒåŒæ—¶æŒ‡å®šoriginä¸ºé»˜è®¤ä»“åº“ï¼Œåé¢å°±å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ä½¿ç”¨git pushäº†ã€‚1git push -u &lt;è¿œç¨‹ä»“åº“åå­—&gt; &lt;å°†æœ¬åœ°çš„åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ï¼ˆæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„åå­—ä¸€æ ·ï¼‰&gt;æƒ…å†µå››ï¼šå¦‚æœçœç•¥æœ¬åœ°åˆ†æ”¯åï¼Œåˆ™è¡¨ç¤ºåˆ é™¤æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ï¼Œå› ä¸ºè¿™ç­‰åŒäºæ¨é€ä¸€ä¸ªç©ºçš„æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹åˆ†æ”¯ã€‚123git push origin :&lt;è¿œç¨‹åˆ†æ”¯&gt;# ç­‰åŒäº:git push origin --delete masterè·å–æœ€æ–°çš„è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ï¼šåŠ å…¥åœ¨è¿œç¨‹ä»“åº“ä¸­çš„ä¸€ä¸ªåˆ†æ”¯ä¸­çš„å†…å®¹æ›´æ–°äº†ï¼Œè€Œæœ¬åœ°çš„è¿™ä¸ªåˆ†æ”¯ï¼ˆå’Œè¿œç¨‹çš„è¿™ä¸ªåˆ†æ”¯åå­—ç›¸åŒï¼‰ä¸æ˜¯æœ€æ–°çš„ï¼Œå¯ä»¥ç”¨git pullæ¥åŒæ­¥ã€‚1git pull &lt;è¿œç¨‹ä»“åº“å&gt; &lt;éœ€è¦æ›´æ–°çš„åˆ†æ”¯ï¼ˆè¿™ä¸ªåˆ†æ”¯åï¼šæœ¬åœ°çš„å’Œè¿œç¨‹çš„åå­—ä¸€æ ·ï¼‰&gt;å¦‚ï¼šgit pull origin feature-Dï¼Œè¡¨ç¤ºï¼šä»è¿œç¨‹ä»“åº“originä¸­çš„â€œfeature-Dâ€åˆ†æ”¯è¿›è¡Œå¯¹æœ¬åœ°çš„åˆ†æ”¯â€œfeature-Dâ€æ›´æ–°ã€‚æŸ¥çœ‹æäº¤å†å²ï¼šgit log æŸ¥çœ‹æäº¤ï¼ˆcommitï¼‰å†å²ï¼ˆä»¥ä¾¿ç¡®å®šè¦å›é€€åˆ°å“ªä¸ªç‰ˆæœ¬ï¼‰ã€‚â€‹ å¦‚æœå«Œè¾“å‡ºä¿¡æ¯å¤ªå¤šï¼Œçœ‹å¾—çœ¼èŠ±ç¼­ä¹±çš„ï¼Œå¯ä»¥è¯•è¯•åŠ ä¸Š--pretty=onelineå‚æ•°ï¼Œå³ï¼šgit log --pretty=onelinegit log &lt;filename&gt; ï¼šæ˜¾ç¤ºç‰¹å®šæ–‡ä»¶(filename)çš„æäº¤å†å²git log -p ï¼šæ–‡ä»¶çš„å‰åå·®åˆ«å°±ä¼šæ˜¾ç¤ºåœ¨æäº¤ä¿¡æ¯ä¹‹ågit log -p &lt;filename&gt; ï¼šåªæŸ¥çœ‹ â€œfilenameâ€æ–‡ä»¶çš„æäº¤æ—¥ å¿—ä»¥åŠæäº¤å‰åçš„å·®åˆ«ã€‚git log --graphï¼šä»¥å›¾è¡¨å½¢å¼æŸ¥çœ‹åˆ†æ”¯ï¼Œä¾‹å¦‚ä¸‹å›¾ï¼šgit reflog æŸ¥çœ‹å†å²çš„æ¯ä¸€æ¬¡çš„å‘½ä»¤ï¼ˆä»¥ä¾¿ç¡®å®šè¦å›åˆ°æœªæ¥çš„å“ªä¸ªç‰ˆæœ¬ï¼‰ã€‚è‡ªå®šä¹‰Git:ä¿®æ”¹GITé»˜è®¤ç¼–è¾‘å™¨ï¼šGITé»˜è®¤ç¼–è¾‘å™¨ä¸ºViï¼Œå‡å¦‚æˆ‘æƒ³ç”¨Notepad++ï¼š1git config --global core.editor &quot;Notepad++&quot; &#x2F;&#x2F;è®¾ç½®Editorä½¿ç”¨Notepad++Gitæ˜¾ç¤ºé¢œè‰²ï¼š1git config --global color.ui true##################################################å­¦ä¹ å»–é›ªå³°æ•™å­¦ä¸­çš„é—®é¢˜ï¼š1ã€ä¸æ•™å­¦æ­¥éª¤ä¸­çš„å‘½ä»¤åŒºåˆ«äºï¼šâ€œâ€“â€ï¼ˆ1ï¼‰git diff head --readme.txtï¼šé—®é¢˜ï¼šåœ¨æˆ‘è‡ªå·±ç”µè„‘ä¸Šé¢è¿è¡Œæ²¡ååº”ï¼Ÿè§£å†³ï¼šè¿è¡Œï¼šgit diff head readme.txt,å³å»æ‰é‚£ä¸ªâ€œâ€“â€ã€‚ï¼ˆ2ï¼‰git checkout --readme.txté—®é¢˜ï¼šåœ¨äºæˆ‘çš„ç”µè„‘ä¸Šå¤šäº†â€œâ€“â€ä¼šè¿è¡Œå¤±è´¥ã€‚è§£å†³ï¼šå»æ‰â€œâ€“â€ï¼šGitHubä½¿ç”¨æŠ€å·§æœç´¢ï¼š1ï¼‰ã€åœ¨ä¸åŒåœ°æ–¹æœç´¢1ã€æŒ‰ç…§nameæœç´¢1in:name &lt;something&gt; &#x2F;&#x2F;å‡è®¾æƒ³æœç´¢çš„ä¸œè¥¿å«ï¼šsomething2ã€æŒ‰ç…§readmeæœç´¢ä¹Ÿå¯ä»¥æŒ‰ç…§readme.mdä¸­åŒ…å«çš„æŸ¥æ‰¾é¡¹ç›®ï¼š1in:readme &lt;something&gt; &#x2F;&#x2F;å‡è®¾æƒ³æœç´¢çš„ä¸œè¥¿å«ï¼šsomething3ã€æŒ‰ç…§descriptinæœç´¢å‡è®¾æˆ‘ä»¬ç°åœ¨è¦å­¦ä¹ çš„é¡¹ç›®ï¼Œæˆ‘ä»¬æœç´¢é¡¹ç›®æè¿°(description)é‡Œé¢åŒ…å«çš„é¡¹ç›®:1in:description &lt;something&gt; &#x2F;&#x2F;å‡è®¾æƒ³æœç´¢çš„ä¸œè¥¿å«ï¼šsomething4ã€ç›´æ¥æœç´¢ç›´æ¥åœ¨æœç´¢æ ä¸­æœç´¢ï¼šåŠ å…¥æƒ³æœç´¢ä¸CJSONæœ‰å…³çš„å†…å®¹ï¼š2ï¼‰ã€æ·»åŠ çº¦æŸæ¡ä»¶staræ•°é‡12stars: &gt; 500 &#x2F;&#x2F; star æ•°é‡å¤§äº500çš„é¡¹ç›®stars: 10..20 &#x2F;&#x2F; star æ•°é‡åœ¨10-20ä¹‹é—´çš„ä»“åº“forkæ•°é‡åŒç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŒ‰ç…§forkçš„æ•°é‡æ¥è¿›è¡Œæœç´¢:1in:name React forks:&gt;3000languageç¼–ç¨‹è¯­è¨€1language:python &#x2F;&#x2F;æ¯”å¦‚ï¼ŒæŠŠè¯­è¨€é™åˆ¶ä¸ºPythonä»“åº“pushçš„æ—¶é—´å‡å¦‚åœ¨è¿™äº›é¡¹ç›®é‡Œé¢ï¼Œæˆ‘ä»¬æƒ³è¦æ‰¾åˆ°æœ€è¿‘æ‰æ›´æ–°çš„é¡¹ç›®ï¼Œæ„æ€æ˜¯æ›´æ–°æ—¶é—´å°±åœ¨æœ€è¿‘ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š1pushed:&gt;2020-01-01 &#x2F;&#x2F;é¡¹ç›®çš„æœ€è¿‘ä¸€æ¬¡æ›´æ–°æ—¶é—´é™åˆ¶åˆ°2020-01-01ä¹‹åä»“åº“æŒæœ‰è€…1userï¼š&lt;username&gt;ä»“åº“å¤§å°1size:&gt;&#x3D;5000 &#x2F;&#x2F; ä»“åº“å¤§äº5000KBçš„ä»“åº“ä»“åº“createæ—¶é—´1created:&gt;2019-01-01 &#x2F;&#x2F; 2019å¹´ä»¥ååˆ›å»ºçš„ä»“åº“licenseåè®®1license:apache-2.0 &#x2F;&#x2F; ä½¿ç”¨ apache-2.0 åè®®çš„ä»“åº“ç»„ç»‡æœºæ„ä»£ç 1org:spring-cloud &#x2F;&#x2F; åˆ—å‡ºorg çš„ spring-cloud ä»“åº“3ï¼‰ã€ç»„åˆæœç´¢å°†1ï¼‰å’Œ2ï¼‰ä¸­å¯ä»¥éšæœºç»„åˆè¿›è¡Œç²¾ç¡®æœç´¢,æ¯”å¦‚ï¼š1in:description &lt;something&gt; language:python &#x2F;&#x2F;å°†ç¼–ç¨‹è¯­è¨€é™åˆ¶ä¸ºpython1in:readme &lt;something&gt; stars:&gt;3000 forks:&gt;300012in:description å¾®æœåŠ¡ language:python pushed:&gt;2020-01-01&#x2F;*pushed:&gt;2020-01-01çš„æ„æ€æ˜¯æˆ‘ä»¬æŠŠé¡¹ç›®çš„æœ€åæ›´æ–°æ—¶é—´é™åˆ¶åˆ°2020-01-01*&#x2F;1in:name React forks:&gt;3000ç­‰ç­‰å¥‡ç‰¹æœç´¢ï¼šawesomeæœç´¢1ã€awesome-awesomeæœç´¢ç›´æ¥ä½¿ç”¨awesome-awesomeå¯ä»¥æœç´¢å‡ºå¾ˆå¤šä¼˜è´¨é¡¹ç›®ã€‚1awesome-awesome2ã€awesome nameæœç´¢1awesome &lt;name&gt;","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"Git","slug":"å­¦ä¹ ç¬”è®°/Git","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Git/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://longlongqin.github.io/tags/Git/"}]},{"title":"LearnCpp chapterO","slug":"C&C++/LearnCpp-chapterO","date":"2020-04-04T02:21:31.000Z","updated":"2020-04-19T14:38:29.546Z","comments":true,"path":"archives/67343d3.html","link":"","permalink":"https://longlongqin.github.io/archives/67343d3.html","excerpt":"LearnCpp chapterOhttps://www.learncpp.comæœªå®Œå¾…ç»­~~","text":"LearnCpp chapterOhttps://www.learncpp.comæœªå®Œå¾…ç»­~~O.1 Bit flags and bit manipulation via std::bitsetåœ¨ç°ä»£è®¡ç®—æœºä½“ç³»ç»“æ„ä¸­ï¼Œæœ€å°çš„å¯å¯»å€å†…å­˜å•å…ƒæ˜¯å­—èŠ‚ã€‚ç”±äºæ‰€æœ‰å¯¹è±¡éƒ½éœ€è¦æœ‰å”¯ä¸€çš„å†…å­˜åœ°å€ï¼Œè¿™æ„å‘³ç€å¯¹è±¡çš„å¤§å°å¿…é¡»è‡³å°‘ä¸ºä¸€ä¸ªå­—èŠ‚ã€‚å¯¹äºå¤§å¤šæ•°å˜é‡ç±»å‹ï¼Œè¿™æ˜¯å¯ä»¥çš„ã€‚ç„¶è€Œï¼Œå¯¹äºå¸ƒå°”å€¼ï¼Œè¿™æœ‰ç‚¹æµªè´¹ã€‚å¸ƒå°”ç±»å‹åªæœ‰ä¸¤ç§çŠ¶æ€:çœŸ(1)ï¼Œæˆ–å‡(0)ã€‚è¿™ä¸€ç»„çŠ¶æ€åªéœ€è¦å­˜å‚¨ä¸€ä½ã€‚ç„¶è€Œï¼Œå¦‚æœä¸€ä¸ªå˜é‡å¿…é¡»è‡³å°‘æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼Œè€Œä¸€ä¸ªå­—èŠ‚æ˜¯8ä½ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªå¸ƒå°”å€¼ä½¿ç”¨1ä½ï¼Œè€Œå…¶ä»–7ä½ä¸ä½¿ç”¨ã€‚ä½æ“ä½œï¼šbit manipulationåœ¨å¯¹è±¡å†…éƒ¨ï¼Œä¿®æ”¹å•ä¸ªbitçš„è¿‡ç¨‹ï¼Œå«ä½æ“ä½œã€‚ä½æ“ä½œåœ¨åŠ å¯†å’Œå‹ç¼©ç®—æ³•ä¸­ä¹Ÿå¾ˆæœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¯¹è±¡è§†ä¸ºå•ä¸ªä½çš„é›†åˆï¼Œè€Œä¸æ˜¯å°†å…¶è§†ä¸ºæŒæœ‰å•ä¸ªå€¼çš„å¯¹è±¡ã€‚å½“å¯¹è±¡çš„ä¸ªåˆ«ä½ç”¨ä½œå¸ƒå°”å€¼æ—¶ï¼Œè¿™äº›ä½ç§°ä¸ºä½æ ‡å¿—ï¼šbit flagã€‚åœ¨è®¡ç®—ä¸­ï¼Œæ ‡å¿—æ˜¯ä½œä¸ºæŸä¸ªå‡½æ•°æˆ–è¿›ç¨‹çš„ä¿¡å·çš„å€¼ã€‚ç±»ä¼¼åœ°ï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œé‚®ç®±æ ‡å¿—ç”¨äºæŒ‡ç¤ºé‚®ç®±ä¸­æœ‰å†…å®¹ï¼Œå› æ­¤ä¸å¿…æ‰“å¼€é‚®ç®±è¿›è¡Œæ£€æŸ¥ã€‚ä¸ºäº†å®šä¹‰ä¸€ç»„ä½æ ‡å¿—ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨é€‚å½“å¤§å°çš„æ— ç¬¦å·æ•´æ•°(8ä½ã€16ä½ã€32ä½ç­‰ç­‰ï¼Œè¿™å–å†³äºæˆ‘ä»¬æœ‰å¤šå°‘ä¸ªæ ‡å¿—)ï¼Œæˆ–è€…std::bitsetã€‚123#include &lt;bitset&gt; //for std::bitsetstd::bitset&lt;8&gt; mybitset &#123;&#125;; //8 bits in size means room for 8 flagsä½æ“ä½œæ˜¯å°‘æ•°å‡ ç§åº”è¯¥æ˜ç¡®ä½¿ç”¨æ— ç¬¦å·æ•´æ•°(æˆ–std::bitset)çš„æ“ä½œä¹‹ä¸€ã€‚ä½ç¼–å·å’Œä½çš„ä½ç½®ï¼šBit numbering and bit positionsç»™å®šä¸€ä¸ªbits åºåˆ—ï¼Œé€šå¸¸ä»å³åˆ°å·¦å¼€å§‹è¿›è¡Œç¼–å·(ç¼–å·çš„å¼€å¤´æ˜¯0ï¼Œä¸æ˜¯1)ã€‚æ¯ä¸€ä¸ªæ•°å­—è¡¨ç¤ºä¸€ä¸ªbit positonï¼šä½çš„ä½ç½®ã€‚egï¼š1276543210 Bit position00000101 Bit sequenceé€šè¿‡std::bitsetæ“ä½œä½åœ¨ 4.12 â€“ Literalsï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨std::bitsetæ¥è¾“å‡ºäºŒè¿›åˆ¶å½¢å¼çš„ç»“æœã€‚ç°åœ¨æˆ‘ä»¬æ¥ä»‹ç»std::bitsetçš„å…¶ä»–åŠŸèƒ½ï¼šstd::bitsetæä¾›äº†4ä¸ªå…³é”®çš„åŠŸèƒ½ï¼Œå¯¹åšä½æ“ä½œå¾ˆæœ‰ç”¨:text()ï¼šå…è®¸æˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸ªä½æ˜¯0è¿˜æ˜¯1ï¼›set()ï¼šå…è®¸æˆ‘ä»¬å°†ä¸€ä¸ª ä½(bit)è®¾ç½®æˆ onï¼Œå³å°†å…¶è®¾ç½®ä¸º1ï¼›reset()ï¼šå…è®¸æˆ‘ä»¬å°†ä¸€ä¸ª ä½(bit)è®¾ç½®æˆ offï¼Œå³å°†å…¶è®¾ç½®ä¸º 0ï¼›flip()ï¼šå…è®¸æˆ‘ä»¬å°†ä¸€ä¸ª ä½(bit) ç”±0è®¾ç½®ä¸º1ï¼Œæˆ–è€…ç”±1è®¾ç½®ä¸º0ï¼›è¿™äº›å‡½æ•°ä¸­çš„æ¯ä¸€ä¸ªéƒ½å¸¦æœ‰ä¸€ä¸ªä½ä½ç½®å‚æ•°ï¼Œè¯¥å‚æ•°æŒ‡ç¤ºæˆ‘ä»¬å°†è¦æ“ä½œçš„ä½ çš„ä½ç½®ã€‚123456789101112131415161718192021#include &lt;bitset&gt;#include &lt;iostream&gt;int main()&#123; std::bitset&lt;8&gt; bits&#123;0b0000'0101&#125;; //we need 8 bits, start with bit pattern 0000 0101 bit.set(3); //set bit position 3 to 1 (now we have 0000 1101) bit.flip(4); //flip bit 4(now we have 0001 1101) bit.reset(4); //set bit 4 back to 0 (now we have 0000 1101) std::cout &lt;&lt;\"All the bits: \"&lt;&lt;bits&lt;&lt;'\\n'; std::cout &lt;&lt;\"bit 3 has valude: \" &lt;&lt;bit.test(3) &lt;&lt;'\\n'; std:;cout &lt;&lt;\"bit 4 has valud: \"&lt;&lt;bit.test(4) &lt;&lt;'\\n'; return 0;&#125;/********è¾“å‡ºç»“æœ********/All the bits: 00001101bit 3 has valude: 1bit 4 has valude: 0O.2 ä½æ“ä½œç¬¦C++æä¾›äº†â€œä½æ“ä½œç¬¦(bitwise operator)â€ï¼šOperatorSymbolFormOperationleft shift&lt;&lt;x &lt;&lt; yall bits in x shifted left y bitsright shift&gt;&gt;x &gt;&gt; yall bits in x shifted right y bitsbitwise NOT~~xall bits in x flippedbitwise AND&amp;x &amp; yeach bit in x AND each bit in ybitwise OR|x | yeach bit in x OR each bit in ybitwise XOR^x ^ yeach bit in x XOR each bit in yåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä¸»è¦ä½¿ç”¨4ä½äºŒè¿›åˆ¶å€¼ã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿å’Œä¿æŒä¾‹å­ç®€å•ã€‚åœ¨å®é™…çš„ç¨‹åºä¸­ï¼Œä½¿ç”¨çš„ä½çš„æ•°é‡æ˜¯åŸºäºå¯¹è±¡çš„å¤§å°(ä¾‹å¦‚ï¼Œä¸€ä¸ª2å­—èŠ‚çš„å¯¹è±¡å°†å­˜å‚¨16ä½)ã€‚ä¸ºäº†å¯è¯»æ€§ï¼Œæˆ‘ä»¬è¿˜å°†åœ¨ä»£ç ç¤ºä¾‹ä¹‹å¤–çœç•¥0bå‰ç¼€(ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨0101è€Œä¸æ˜¯0b0101)ã€‚ä½æ“ä½œç¬¦ï¼š&lt;&lt;å·¦ç§»ã€&gt;&gt;å³ç§»æŒ‰ä½å·¦ç§»(&lt;&lt;)æ“ä½œç¬¦å°†ä½ç§»åˆ°å·¦è¾¹ã€‚å·¦æ“ä½œæ•°æ˜¯è¦ç§»ä½çš„ä½çš„è¡¨è¾¾å¼ï¼Œè€Œå³æ“ä½œæ•°æ˜¯è¦å·¦ç§»çš„ä½çš„æ•´æ•°ã€‚å¦‚ï¼šx&lt;&lt;1è¡¨ç¤ºï¼Œå°†å˜é‡xå·¦ç§»ä¸€ä¸ªä½ç½®ã€‚ä»å³è¾¹ç§»è¿›æ¥çš„æ–°ä½æ¥å—ä¸€ä¸ª å€¼0ã€‚egï¼Œ0011&lt;&lt;1 æ˜¯ 01100011&lt;&lt;2 æ˜¯ 11000011&lt;&lt;3 æ˜¯ 1000åŒç†ï¼ŒæŒ‰ä½å³ç§»(&gt;&gt;)æ“ä½œç¬¦åŸç†ä¹Ÿä¸€æ ·ï¼š1100&gt;&gt;1 æ˜¯ 01101100&gt;&gt;2 æ˜¯ 00111100&gt;&gt;3 æ˜¯ 0001ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ç¨‹åºï¼š123456789101112131415161718#include &lt;iostream&gt;#include &lt;bitset&gt;int main()&#123; std::bitset&lt;4&gt; x&#123;0b1100&#125;; std::cout &lt;&lt;x&lt;&lt;'\\n'; std::cout &lt;&lt; (x&gt;&gt;1) &lt;&lt; '\\n'; //å³ç§»ä¸€ä¸ªä½ç½®ï¼Œç»“æœæ˜¯0110 std::cout &lt;&lt; (x&lt;&lt;1) &lt;&lt; '\\n'; //å·¦ç§»ä¸€ä¸ªä½ç½®ï¼Œç»“æœæ˜¯1000 return 0ï¼›&#125;/*******ç»“æœ******/110001101000ä½æ“ä½œï¼šNOT ~è¿™ä¸ªæ“ä½œç¬¦åŠŸèƒ½å°±æ˜¯å°†æ¯ä¸ªä½çš„æ•°ç”±0å˜ä¸º1ï¼Œæˆ–ç”±1å˜ä¸º0ï¼šå¦‚ï¼š~0100 æ˜¯ 1011ï¼›~0000 0100 æ˜¯ 1111 1011ä¸Šé¢ä¾‹å­ä¸­ï¼Œè™½ç„¶ï¼š0100 å’Œ000 0100æ˜¯ä¸€æ ·çš„ï¼Œå°±åƒåè¿›åˆ¶çš„7å’Œ07ä¸€æ ·ï¼›ä½†æ˜¯ç»è¿‡~æ“ä½œç¬¦ä¹‹åï¼Œå®ƒä»¬ä½æ•°ä¸ä¸€æ ·ï¼Œå°±ä¼šäº§ç”Ÿä¸ä¸€æ ·çš„ç»“æœã€‚ä½æ“ä½œï¼šOR |å®ƒçš„å½¢å¼æ˜¯å¯¹ä¸¤ä¸ªè¡¨è¾¾å¼è¿›è¡Œæ¯ä¸ªä½ä¸Šçš„æˆ–è¿ç®—ï¼Œå¦‚ï¼š0b0101 | 0b0110ã€‚æ›´åŠ ç›´è§‚çš„å½¢å¼ä¸ºï¼š12340 1 0 1 OR0 1 1 0--------- &#x2F;&#x2F;ç»“æœä¸º0 1 1 1ç¤ºä¾‹ï¼š1234567891011#include &lt;iostream&gt;#include &lt;bitset&gt;int main()&#123; std::cout &lt;&lt; (std::bitset&lt;4&gt;&#123;0b0101&#125; | std::bitset&lt;4&gt;&#123;0b0110&#125;); return 0;&#125;/**********ç»“æœ********/0111ä¹Ÿå¯è¿›è¡Œå¤šä¸ªè¡¨è¾¾å¼çš„è¿ç®—ï¼Œå¦‚ï¼š12345670 1 1 1 OR0 0 1 1 OR0 0 0 1--------0 1 1 1&#x2F;&#x2F;åªè¦å¯¹åº”çš„åˆ—æœ‰1ï¼Œå®ƒçš„ç»“æœä¸­å¯¹åº”çš„é‚£ä¸€åˆ—å°±æ˜¯1å®ƒå†™æˆç¨‹åºï¼š123456789101112#include &lt;iostream&gt;#include &lt;bitset&gt; int main()&#123; std::cout &lt;&lt; (std::bitset&lt;4&gt;&#123; 0b0111 &#125; | std::bitset&lt;4&gt;&#123; 0b0011 &#125; | std::bitset&lt;4&gt;&#123; 0b0001 &#125;); return 0;&#125;/*********ç»“æœ*********/0111ä½æ“ä½œï¼šAND &amp;å®ƒçš„å½¢å¼ä¸ºï¼š0b0101 &amp; 0b0110,æ›´åŠ ç›´è§‚çš„å½¢å¼ï¼ˆä¹Ÿå¯ä»¥æœ‰å¤šä¸ªè¡¨è¾¾å¼ä¸€èµ·è¿ç®—ï¼‰ï¼š12340 1 0 1 AND0 1 1 0--------0 1 0 0æ¯ä¸€åˆ—ä¸­åªæœ‰å…¨éƒ¨ä¸º1æ—¶ï¼Œç»“æœä¸­å¯¹åº”çš„åˆ—æ‰æ˜¯1.ç¤ºä¾‹ï¼š12345678910111213141516#include &lt;iostream&gt;#include &lt;bitset&gt; int main()&#123; std::cout &lt;&lt; (std::bitset&lt;4&gt;&#123; 0b0001 &#125; &amp; std::bitset&lt;4&gt;&#123; 0b0011 &#125; &amp; std::bitset&lt;4&gt;&#123; 0b0111 &#125;); return 0;&#125;//ç›´è§‚çš„è¡¨ç¤ºä¸ºï¼š0 0 0 1 AND0 0 1 1 AND0 1 1 1-------- //ç»“æœä¸º0 0 0 1ä½æ“ä½œï¼šXOR ^å®ƒçš„å½¢å¼ä¸ºï¼š0b0001 ^ 0b0011 ^ 0b0111æ›´åŠ ç›´è§‚çš„çœ‹ï¼š123450 0 0 1 XOR0 0 1 1 XOR0 1 1 1--------0 1 0 1æ¯ä¸€åˆ—å¦‚æœæœ‰å¥‡æ•°ä¸ª1ï¼Œåˆ™ç»“æœä¸­å¯¹åº”çš„åˆ—å°±æ˜¯1ï¼›å¦åˆ™å°±æ˜¯0.ä½çš„èµ‹å€¼æ“ä½œç¬¦ä¸ç®—æœ¯èµ‹å€¼è¿ç®—ç¬¦ç›¸ä¼¼ï¼ŒC++æä¾›ä½çš„èµ‹å€¼æ“ä½œç¬¦ï¼Œä¸ºäº†æ–¹ä¾¿ä¿®æ”¹å˜é‡ï¼šOperatorSymbolFormOperationLeft shift assignment&lt;&lt;=x &lt;&lt;= yShift x left by y bitsRight shift assignment&gt;&gt;=x &gt;&gt;= yShift x right by y bitsBitwise OR assignment|=x |= yAssign x | y to xBitwise AND assignment&amp;=x &amp;= yAssign x &amp; y to xBitwise XOR assignment^=x ^= yAssign x ^ y to xæ¯”å¦‚ï¼Œx= x&gt;&gt;1ï¼Œå¯ä»¥å†™æˆï¼šx&gt;&gt;=1:1234567891011121314#include &lt;bitset&gt;#include &lt;iostream&gt;int main()&#123; std::bitset&lt;4&gt; bits&#123;0b0100&#125;; bits &gt;&gt;= 1; std::cout &lt;&lt; bits; return 0;&#125;/********ç»“æœ*********/0010æ€»ç»“ï¼š","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"LearnCpp chapter5","slug":"C&C++/LearnCpp-chapter5","date":"2020-04-03T02:21:47.000Z","updated":"2020-04-19T14:38:29.545Z","comments":true,"path":"archives/b6a3dbf1.html","link":"","permalink":"https://longlongqin.github.io/archives/b6a3dbf1.html","excerpt":"LearnCpp chapter5https://www.learncpp.com","text":"LearnCpp chapter5https://www.learncpp.com5.1 æ“ä½œç¬¦ä¼˜å…ˆçº§ &amp; ç»“åˆå¾‹Operator precedence and associativityä¸‹é¢æ˜¯æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ åŠ ç»“åˆå¾‹ã€noteã€‘ä¸‹é¢è¡¨æ ¼çš„æ“ä½œç¬¦ä¼˜å…ˆçº§ï¼šlevel 1æ˜¯æœ€é«˜ä¼˜å…ˆçº§ï¼›level 17 ä¼˜å…ˆçº§æœ€ä½ç»“åˆå¾‹ï¼šL-&gt;Rï¼šå³ï¼Œä»å·¦å‘å³ç»“åˆR-&gt;L ï¼šå³ã€‚ä»å³å‘å·¦ç»“åˆæ³¨æ„ä¸€ä¸ªè¿ç­‰å·åˆ°è¡¨è¾¾å¼ï¼šx=y=z;ç”±ä¸Šè¡¨å¯çŸ¥ï¼Œè¯¥è¡¨è¾¾å¼å…¶å®æ˜¯è¿™æ ·çš„ï¼šx=(y=z);5.2 ç®—æ•°è¿ç®—ç¬¦Arithmetic operatorsä¸€å…ƒæ“ä½œç¬¦(Unary arithmetic operators)ï¼š+ã€-ï¼šunary minusï¼šè¿”å› æ“ä½œæ•°ä¹˜ä»¥-1 ä¹‹åçš„å€¼ã€‚unary plusï¼šè¿”å› æ“ä½œæ•°æœ¬èº«ã€‚è¿™ä¸¤ä¸ªæ“ä½œç¬¦éƒ½åº”è¯¥æ”¾åœ¨æ“ä½œæ•°çš„å‰é¢(e.g. -x , è€Œä¸æ˜¯ - x)eg: x=5 - -3;.ç¬¬ä¸€ä¸ªå‡å·è¡¨ç¤ºäºŒå…ƒæ“ä½œç¬¦ï¼Œå‡æ³•ï¼›ç¬¬äºŒä¸ªå‡å·è¡¨ç¤ºä¸€å…ƒæ“ä½œç¬¦ã€‚äºŒå…ƒè¿ç®—ç¬¦ï¼šBinary arithmetic operatorsäºŒå…ƒæ“ä½œç¬¦æœ‰å·¦ã€å³ ä¸¤ä¸ªæ“ä½œæ•°(operand)ï¼šæ•´æ•°ä¸æµ®ç‚¹æ•° çš„é™¤æ³•å·¦å³ä¸¤ä¸ªæ“ä½œæ•°è‡³å°‘æœ‰ä¸€ä¸ªæ˜¯ æµ®ç‚¹å‹å€¼ï¼Œå®ƒä»¬çš„è¿ç®—ç»“æœä¾ç„¶æ˜¯ä¸€ä¸ªæµ®ç‚¹å‹çš„å€¼ã€‚For example, 7.0 / 4 = 1.75, 7 / 4.0 = 1.75ã€7.0 / 4.0 = 1.75åšæœ‰ä¸¤ä¸ªæ“ä½œæ•°å‡ä¸º æ•´å‹å€¼ï¼Œå®ƒçš„è¿ç®—ç»“æœä¾ç„¶æ˜¯ æ•´å‹å€¼ã€‚For example, 7 / 4 = 1ç”¨static_cast&lt;&gt;å¯¹æ•´æ•°è¿›è¡Œæµ®ç‚¹é™¤æ³•1234567891011121314151617181920#include &lt;iostream&gt;int main()&#123; int x&#123;7&#125;; int y&#123;4&#125;; std::cout &lt;&lt;\"int/int=\"&lt;&lt;x/y&lt;&lt;\"\\n\"; std::cout &lt;&lt;\"double / int = \"&lt;&lt;static_cast&lt;double&gt;(x)/y&lt;&lt;'\\n'; std::cout &lt;&lt; \"int / double = \"&lt;&lt;x/ static_cast&lt;double&gt;(y)&lt;&lt;'\\n'; std::cout &lt;&lt;\"double / double = \" &lt;&lt; static_cast&lt;double&gt;(x) / static_cast&lt;double&gt;(y)&lt;&lt;'\\n'; return 0;&#125;/*****ç»“æœ*****/int / int = 1double / int = 1.75int / double = 1.75double / double = 1.75é™¤ä»¥0å¦‚æœé™¤ä»¥0(æˆ–è€… 0.0)å°†ä¼šä½¿ç¨‹åºå´©æºƒã€‚å› ä¸ºè¿™ä¸ªç»“æœåœ¨æ•°å­¦ä¸­æ˜¯æ²¡æœ‰å®šä¹‰çš„ã€‚èµ‹å€¼æ“ä½œç¬¦5.3 å–æ¨¡ &amp; å¹‚è¿ç®—å–æ¨¡æ“ä½œç¬¦ï¼šThe modulus operatorå–æ¨¡æ“ä½œç¬¦*ï¼Œåˆç§° *å–ä½™æ“ä½œç¬¦ã€‚ã€noteã€‘ï¼šå–ä½™è¿ç®—ç»“æœçš„ç¬¦å·ï¼Œåªå’Œç¬¬ä¸€ä¸ªæ“ä½œæ•°ç›¸ä¸€è‡´ã€‚12345678910111213141516#include &lt;iostream&gt;int main()&#123; int x&#123; 6 &#125;, y&#123; -4 &#125;; //ç¬¬ä¸€ä¸ªæ“ä½œæ•°ç¬¦å·ä¸º æ­£ std::cout &lt;&lt; x%y &lt;&lt; '\\n'; int z&#123; -6 &#125;, w&#123; 4 &#125;; //ç¬¬ä¸€ä¸ªæ“ä½œæ•°ç¬¦å·ä¸º è´Ÿ std::cout &lt;&lt; z%w ; std::cin.clear(); std::cin.ignore(std::numeric_limits &lt;std::streamsize&gt;::max(), '\\n' ); std::cin.get(); return 0;&#125;ç»“æœï¼šå¹‚è¿ç®—ç¬¦^æ‚¨å°†æ³¨æ„åˆ°^è¿ç®—ç¬¦(åœ¨æ•°å­¦ä¸­é€šå¸¸ç”¨äºè¡¨ç¤ºæ±‚å¹‚)æ˜¯c++ä¸­çš„ä½XORæ“ä½œã€‚åœ¨C++ä¸­ä¸åŒ…å«â€œå¹‚è¿ç®—æ“ä½œç¬¦â€ã€‚å¦‚æœè¦ç”¨ï¼Œå°±éœ€è¦åŠ ä¸Šå¤´æ–‡ä»¶cmathï¼š12#include &lt;cmath&gt;double x&#123; std::pow(3.0, 4.0)&#125;; //3 to the 4th power(3çš„4æ¬¡æ–¹)ã€Noteã€‘æ³¨æ„ï¼Œpow()å‡½æ•°çš„å‚æ•°(å’Œè¿”å›å€¼)æ˜¯doubleç±»å‹çš„ã€‚æ‰€ä»¥ï¼Œå°±ç®—ä¼ å…¥çš„æ˜¯æ•´æ•°ç±»å‹çš„ï¼Œå®ƒçš„è®¡ç®—è¿˜æ˜¯ä¼šæœ‰è¯¯å·®çš„(å› ä¸ºæµ®ç‚¹æ•°è®¡ç®—æœ¬èº«å°±ä¼šæœ‰è¯¯å·®)æ‰€ä»¥ï¼Œå¦‚æœä½ æƒ³å¯¹æ•´æ•°è¿›è¡Œå¹‚è¿ç®—ï¼Œå¯ä»¥è‡ªå·±è®¾è®¡å‡½æ•°ï¼Œä½¿å…¶ç»“æœæ¯”è¾ƒç²¾ç¡®ï¼š12345678910111213141516171819202122#include &lt;iostream&gt;#include &lt;cstdint&gt; //for std::int_fast64_t//note: exp(å¹‚æ•°) ä¸èƒ½æ˜¯è´Ÿæ•°[å› ä¸ºç”¨çš„æ˜¯whileå¾ªç¯]std::int_fast64_t powint (int base, int exp)&#123; std::int_fast64_t result &#123;1&#125;; while (exp) &#123; if(exp &amp; 1) result *= base; exp &gt;&gt;= 1; base *= base; &#125; return result;&#125;int main()&#123; std::cout &lt;&lt;powint(7,12); //7çš„12æ¬¡å¹‚ return 0;&#125;5.4 é€’å¢/é€’å‡æ“ä½œç¬¦OperatorSymbolFormOperationPrefix increment (pre-increment)++++xIncrement x, then return xPrefix decrement (pre-decrement)â€“â€“â€“â€“xDecrement x, then return xPostfix increment (post-increment)++x++Copy x, then increment x, then return the copyPostfix decrement (post-decrement)â€“â€“xâ€“â€“Copy x, then decrement x, then return the copyå‰¯ä½œç”¨ï¼šside effectsc++ä¸å®šä¹‰å‡½æ•°å‚æ•°æˆ–æ“ä½œç¬¦æ“ä½œæ•°çš„æ±‚å€¼é¡ºåºã€‚12345678910111213141516#include &lt;iostream&gt; int add(int x, int y) &#123; return x+y; &#125;int main()&#123; int x&#123;5&#125;; int valude = add(x, ++x); //ç»“æœæ˜¯5+6,è¿˜æ˜¯6+6? //è¿™å–å†³äºç¼–è¯‘å™¨è®¡ç®—å‡½æ•°å‚æ•°çš„é¡ºåº std::cout &lt;&lt;value; // value could be 11 or 12, depending on how the above line evaluates! return 0;&#125;ã€å‰¯ä½œç”¨ã€‘ï¼šc++æ²¡æœ‰å®šä¹‰å‡½æ•°å‚æ•°æ±‚å€¼çš„é¡ºåºã€‚è¿™ç§å°±ä¼šäº§ç”Ÿä¸ç¡®å®šæ€§ï¼Œå› ä¸ºè¿˜è¦å–å†³äºç¼–è¯‘å™¨å¯¹å‡½æ•°çš„å‚æ•°è®¡ç®—çš„é¡ºåºã€‚æ‰€ä»¥ï¼Œä¸åŒçš„ç¼–è¯‘å™¨å¯èƒ½ä¼šäº§ç”Ÿä¸åŒçš„ç»“æœã€‚æ‰€ä»¥ï¼Œç»“æœå¯èƒ½ä¸ºï¼š11 æˆ–è€… 125.5 é€—å·â€œ,â€ &amp; æ¡ä»¶ è¿ç®—ç¬¦é€—å·æ“ä½œç¬¦é€—å·æ“ä½œç¬¦é€‚ç”¨äºforå¾ªç¯ï¼Œå…¶ä»–æƒ…å†µä¸æ¨èç”¨OperatorSymbolFormOperationComma,x, yEvaluate x then y, returns value of ycomma operator (,)ï¼šå…è®¸æ‚¨åœ¨å…è®¸å•ä¸ªè¡¨è¾¾å¼çš„æƒ…å†µä¸‹è®¡ç®—å¤šä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚é€—å·è¿ç®—ç¬¦å¯¹å·¦æ“ä½œæ•°æ±‚å€¼ï¼Œç„¶åå¯¹å³æ“ä½œæ•°æ±‚å€¼ï¼Œç„¶åè¿”å›å³æ“ä½œæ•°çš„ç»“æœã€‚1234567891011121314#include &lt;iostream&gt;int main()&#123; int x&#123;1&#125;; int y&#123;2&#125;; std::cout&lt;&lt; (++x, ++y); //å…ˆè®¡ç®—å·¦æ“ä½œç¬¦ï¼Œåœ¨è®¡ç®—å³æ“ä½œç¬¦ï¼Œä½†æ˜¯è¿”å›å³æ“ä½œç¬¦çš„ç»“æœ return 0;&#125;/*******ç»“æœ**********/3é€—å·æ“ä½œç¬¦æ˜¯æ‰€æœ‰æ“ä½œç¬¦ä¸­æœ€ä½çš„12z = (a,b); //è®¡ç®—(a,b)ï¼Œç„¶åå°†è¿”å›çš„ç»“æœèµ‹å€¼ç»™zz = a , b; //ç”±äºâ€œ=â€æ“ä½œç¬¦ä¼˜å…ˆäºâ€œ,â€æ“ä½œç¬¦ï¼Œæ‰€ä»¥ï¼Œå…ˆè®¡ç®—â€œz=aâ€;ç„¶ååœ¨è®¡ç®—bï¼Œè®¡ç®—å®Œä¹‹åï¼Œbæ²¡ç”¨å°±è¢«æŠ›å¼ƒäº†é€—å·ç”¨ä½œåˆ†éš”ç¬¦æ—¶ï¼Œå®ƒæ­¤æ—¶ä»£è¡¨çš„ä¸æ˜¯æ“ä½œç¬¦12345void foo(int x, int y) // Comma used to separate parameters in function definition&#123; add(x, y); // Comma used to separate arguments in function call int z(3), w(5); // Comma used to separate multiple variables being defined on the same line (don't do this)&#125;æ¡ä»¶æ“ä½œç¬¦æ¡ä»¶æ“ä½œç¬¦æ˜¯ä¸€ä¸ª ä¸‰å…ƒæ“ä½œç¬¦OperatorSymbolFormOperationConditional? :c ? x : yIf c is nonzero (true) then evaluate x, otherwise evaluate yå½¢å¼ï¼š(condition) ? expression1 : expression2;å½“conditionçš„ç»“æœæ˜¯æ­£ç¡®çš„(æˆ–è€…éé›¶æ•°å­—)ï¼Œå°±æ‰§è¡Œexpression1ï¼Œå¦åˆ™ï¼Œæ‰§è¡Œexpression2ç”±äºæ¡ä»¶æ“ä½œç¬¦ä¼˜å…ˆçº§è¾ƒä½ï¼Œæœ‰æ—¶éœ€è¦æ‹¬å·å¦‚ï¼š12345std::cout &lt;&lt; (x&gt;y) ? x : y;//ç”±äºâ€œ&lt;&lt;â€çš„ä¼˜å…ˆçº§é«˜äºâ€œæ¡ä»¶æ“ä½œç¬¦â€,æ‰€ä»¥ï¼Œç­‰åŒäºä»¥ä¸‹å½¢å¼ï¼š(std::cout &lt;&lt; (x&gt;y)) ? x : y;//æƒ³è¦æŒ‰ç…§æˆ‘ä»¬è®¾è®¡çš„æ­£ç¡®æ‰§è¡Œï¼Œåˆ™éœ€è¦é€‚å½“åŠ ä¸Šæ‹¬å·std::cout &lt;&lt;((x&gt;y) ? x : y);ã€æ³¨æ„ã€‘ä¸åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡åœ¨å‡½æ•°ç»“æŸæ—¶æ­»äº¡éå¸¸ç›¸ä¼¼ï¼Œåœ¨ifæˆ–elseè¯­å¥ä¸­å®šä¹‰çš„å˜é‡åœ¨ifæˆ–elseè¯­å¥ç»“æŸæ—¶æ­»äº¡ã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬è¯•å›¾æ‰“å°å®ƒæ—¶ï¼Œç±»å¤§å°å·²ç»è¢«ç ´åäº†ã€‚1234567891011121314#include &lt;iostream&gt; int main()&#123; bool inBigClassroom &#123; false &#125;; if (inBigClassroom) const int classSize &#123; 30 &#125;; else const int classSize &#123; 20 &#125;; //æ­¤æ—¶ï¼Œif/elseå·²ç»æ‰§è¡Œç»“æŸï¼Œæ‰€ä»¥ï¼Œå…¶å†…éƒ¨å®šä¹‰çš„å˜é‡classSizeä¹Ÿå·²ç»è¢«é”€æ¯ std::cout &lt;&lt; \"The class size is: \" &lt;&lt; classSize; //å› ä¸ºclassSizeè¢«é”€æ¯ï¼Œæ‰€ä»¥ä¼šç¼–è¯‘å‡ºé”™ return 0;&#125;æ¡ä»¶ç¼–è¯‘çš„ä¸¤ä¸ªè¡¨è¾¾å¼çš„ç±»å‹æ¡ä»¶ç¼–è¯‘çš„ä¸¤ä¸ªè¡¨è¾¾å¼ï¼Œè¦ä¹ˆå…·æœ‰ç›¸åŒçš„ç±»å‹ï¼›è¦ä¹ˆç¬¬äºŒä¸ªè¡¨è¾¾å¼çš„ç±»å‹å¯ä»¥è½¬åŒ–ä¸ºç¬¬ä¸€ä¸ªè¡¨è¾¾å¼çš„ç±»å‹ã€‚1234567891011#include &lt;iostream&gt; int main()&#123; int x = 5; std::cout &lt;&lt; (x != 5 ? x : \"x is 5\"); // won't compile return 0;&#125;//å› ä¸ºï¼Œè¡¨è¾¾å¼1ï¼šx æ˜¯integer ç±»å‹ï¼›è¡¨è¾¾å¼2ï¼š\"x is 5\"æ˜¯stringç±»å‹ã€‚æ‰€ä»¥è¡¨è¾¾å¼2è¦è½¬æ¢ä¸ºè¡¨è¾¾å¼1çš„ç±»å‹ï¼Œä½†æ˜¯è½¬æ¢å¤±è´¥ã€‚æ‰€ä»¥ç¼–è¯‘å°±ä¸æˆåŠŸ5.6 å…³ç³»è¿ç®—ç¬¦ &amp; æµ®ç‚¹æ•°çš„æ¯”è¾ƒå…³ç³»è¿ç®—ç¬¦OperatorSymbolFormOperationGreater than&gt;x &gt; ytrue if x is greater than y, false otherwiseLess than&lt;x &lt; ytrue if x is less than y, false otherwiseGreater than or equals&gt;=x &gt;= ytrue if x is greater than or equal to y, false otherwiseLess than or equals&lt;=x &lt;= ytrue if x is less than or equal to y, false otherwiseEquality==x == ytrue if x equals y, false otherwiseInequality!=x != ytrue if x does not equal y, false otherwiseè¿™äº›æ“ä½œç¬¦çš„å€¼åˆ†åˆ«ä¸ºå¸ƒå°”å€¼true(1)å’Œfalse(0)ã€‚æµ®ç‚¹æ•°çš„æ¯”è¾ƒ12345678910111213141516171819#include &lt;iostream&gt; int main()&#123; double d1&#123; 100.0 - 99.99 &#125;; // should equal 0.01 ? double d2&#123; 10.0 - 9.99 &#125;; // should equal 0.01 ? if (d1 == d2) std::cout &lt;&lt; \"d1 == d2\" &lt;&lt; '\\n'; else if (d1 &gt; d2) std::cout &lt;&lt; \"d1 &gt; d2\" &lt;&lt; '\\n'; else if (d1 &lt; d2) std::cout &lt;&lt; \"d1 &lt; d2\" &lt;&lt; '\\n'; return 0;&#125;/****ç»“æœ*****/d1 &gt; d2æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æˆ‘ä»¬çš„è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œd1 = 0.0100000000000005116 è€Œ d2 = 0.0099999999999997868.ã€Noteã€‘ï¼šåœ¨ä¸¤ä¸ªæµ®ç‚¹æ•°éå¸¸æ¥è¿‘æ—¶ï¼Œå¦‚æœä½¿ç”¨==å’Œ!=å¯¹æµ®ç‚¹æ•°ä¹‹é—´æ¯”è¾ƒï¼Œç»“æœä¼šä¸å¤ªå‡†ç¡®ã€‚ä½¿ç”¨epsilonå‡†ç¡®æ¯”è¾ƒæµ®ç‚¹æ•°æˆ‘ä»¬å¯ä»¥ä½¿ç”¨epsilonæ¥ç›¸å¯¹å‡†ç¡®çš„æ¯”è¾ƒä¸¤ä¸ª è¶³å¤Ÿæ¥è¿‘çš„ æµ®ç‚¹å‹æ•°å€¼ã€‚epsilonï¼šé€šå¸¸è¢«å®šä¹‰ä¸ºä¸€ä¸ªå°çš„æ­£æ•°(å¦‚ï¼Œ0.00000001ï¼Œå³1e-8)ç°åœ¨ï¼Œæˆ‘ä»¬æ¥æ¯”è¾ƒä¸¤ä¸ªâ€close enoughâ€çš„æµ®ç‚¹æ•°ï¼š12345678#include &lt;cmath&gt; //for std::abs()//epsilon is an absolute valuebool isAlmostEqual(double a, double b, double epsilon)&#123; //if the distance between a and b is less than epsilon, then a and b are \"close enough\" return std::abs(a-b) &lt;= epsilon;&#125;è™½ç„¶è¿™ä¸ªå‡½æ•°å¯ä»¥å·¥ä½œï¼Œä½†å®ƒä¸æ˜¯å¾ˆå¥½ã€‚0.00001çš„epsilonå€¼å¯¹äº1.0å·¦å³çš„è¾“å…¥æ˜¯åˆé€‚çš„ï¼Œå¯¹äº0.0000001å·¦å³çš„è¾“å…¥æ˜¯å¤ªå¤§äº†ï¼Œå¯¹äº10,000è¿™æ ·çš„è¾“å…¥æ˜¯å¤ªå°äº†ã€‚è¿™æ„å‘³ç€æ¯æ¬¡æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»é€‰æ‹©ä¸€ä¸ªé€‚åˆæˆ‘ä»¬è¾“å…¥çš„ã€‚å¦‚æœæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬è¦æ ¹æ®è¾“å…¥çš„æ¯”ä¾‹æ¥ç¼©æ”¾ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿®æ”¹å‡½æ•°æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚æ”¹è¿›1ï¼š12345678#include &lt;cmath&gt; //std::abs#include &lt;algorithm&gt; //std::max//return true if the difference between a and b is within epsilonbool approximatelyEqual(double a,double b, double epsilon)&#123; return (std::abs(a-b) &lt;= ( std::max( std::abs(a),std::abs(b) ) * epsilon ));&#125;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œepsilonä¸å†æ˜¯ä¸€ä¸ªç»å¯¹å€¼ï¼Œç°åœ¨æ˜¯ç›¸å¯¹äºaæˆ–bå¤§å°çš„é‡çº§ã€‚å†æ”¹è¿›2ã€æ¨èã€‘ï¼šå½“æµ®ç‚¹æ•°è¶³å¤Ÿæ¥è¿‘äº0æ—¶ï¼Œä¸Šé¢çš„æ–¹æ³•è¿˜æ˜¯ä¸å¤ªè¡Œçš„ã€‚æ”¹è¿›æ–¹æ³•å°±æ˜¯ï¼šåŒæ—¶ä½¿ç”¨ç›¸å¯¹å€¼å’Œç»å¯¹å€¼ï¼š1234567891011// return true if the difference between a and b is less than absEpsilon, or within relEpsilon percent of the larger of a and bbool approximatelyEqualAbsRel(double a, double b, double absEpsilon, double relEpsilon)&#123; // Check if the numbers are really close -- needed when comparing numbers near zero. double diff&#123; std::abs(a - b) &#125;; if (diff &lt;= absEpsilon) return true; // Otherwise fall back to Knuth's algorithm(ç›¸å¯¹å€¼æ–¹æ³•ï¼Œå³â€œæ”¹è¿›1â€çš„æ–¹æ³•) return (diff &lt;= (std::max(std::abs(a), std::abs(b)) * relEpsilon));&#125;åœ¨è¿™ä¸ªç®—æ³•ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆæ£€æŸ¥aå’Œbåœ¨ç»å¯¹å€¼ä¸Šæ˜¯å¦æ¥è¿‘ï¼Œè¿™å¤„ç†äº†aå’Œbéƒ½æ¥è¿‘äºé›¶çš„æƒ…å†µã€‚absEpsilonå‚æ•°åº”è¯¥è®¾ç½®ä¸ºéå¸¸å°çš„å€¼(ä¾‹å¦‚1e-12)ã€‚å¦‚æœå¤±è´¥äº†ï¼Œæˆ‘ä»¬å°±å›åˆ°Knuthçš„ç®—æ³•ï¼Œå³ï¼Œä½¿ç”¨ç›¸å¯¹çš„epsilonã€‚å®Œæ•´çš„ç¤ºä¾‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738#include &lt;algorithm&gt; //std::max#include &lt;cmath&gt; //std::abs#include &lt;iostream&gt;//å¦‚æœaå’Œbä¹‹é—´çš„å·®å€¼åœ¨aå’Œbä¹‹é—´è¾ƒå¤§å€¼çš„ç™¾åˆ†ä¹‹å‡ å†…ï¼Œåˆ™è¿”å›truebool approximatelyEqual(double a,double b,double epsilon)&#123; return (std::abs(a-b) &lt;= (std::max(std::abs(a), std::abs(b)) * epsilon ));&#125;//é’ˆå¯¹äºæ¥è¿‘äº0 çš„æµ®ç‚¹æ•°çš„æ¯”è¾ƒbool approximatelyEqualAbsRel(double a, double b,double absEpsilon, double relEspilon)&#123; //check if the numbers are really close -- need when comparing numbers near zero. double diff &#123;std::abs(a-b)&#125;; if (diff &lt;= absEpsilon) return ture; //otherwise fall back to ç›¸å¯¹å€¼æ³• return (diff &lt;= (std::max(std::abs(a), std::abs(b)) * relEspilon));&#125;int main()&#123; //a is really close to 1.0, but has rounding errors double a&#123;0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1&#125;; std::cout &lt;&lt; approximatelyEqual(a, 1.0, 1e-8);//compare \"almost 1.0\" to 1.0 std::cout &lt;&lt; approximatelyEqual(a-1.0, 0.0, 1e-8); //compare \"almost 0.0\" to 0.0 std::cout &lt;&lt; approximatelyEqualAbsRel(a-1.0, 0.0, 1e-12, 1e-8) &lt;&lt; '\\n'; // compare \"almost 0.0\" to 0.0&#125;/**********ç»“æœ*********/101å¯ä»¥çœ‹å‡ºï¼Œåœ¨å¯¹äºæ¥è¿‘äº0çš„æµ®ç‚¹æ•°ï¼Œä¸ 0.0æ¯”è¾ƒæ—¶ã€‚approximatelyEqualAbsRelè¦æ›´åŠ å‡†ç¡®ã€‚ä½¿ç”¨approximatelyEqualAbsRelæ–¹æ³•ï¼Œå°±å¯ä»¥è§£å†³å¤§å¤šæ•°æƒ…å†µã€‚å®ƒä¹Ÿæ¶µç›–äº†approximatelyEqualå‡½æ•°çš„åŠŸèƒ½ã€‚5.7 é€»è¾‘æ“ä½œç¬¦OperatorSymbolFormOperationLogical NOT!!xtrue if x is false, or false if x is trueLogical AND&amp;&amp;x &amp;&amp; ytrue if both x and y are true, false otherwiseLogical OR||x || ytrue if either x or y are true, false otherwiseNOTï¼šï¼éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNOT æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å¾ˆé«˜ï¼Œåœ¨level 3ã€‚æ‰€ä»¥ï¼Œä½ å¾ˆæœ‰å¯èƒ½ä¼šçŠ¯è¿™ç§é”™è¯¯ï¼š1234567891011121314151617#include &lt;iostream&gt;int main()&#123; int x&#123;5&#125;; int y&#123;7&#125;; if(!x&gt;y) //æ­£ç¡®å†™æ³•ï¼šif (!(x&gt;y)) std::cout &lt;&lt; \"x is not greater than y\\n\"; else std::cout &lt;&lt; \"x is equal to or greater than y\\n\"; return 0; &#125;/********ç»“æœ************/x is equal to or greater than yå¯ä»¥çœ‹å‡ºï¼Œç»“æœä¸æ­£ç¡®ã€‚åœ¨è¿™é‡Œå°±æ˜¯å› ä¸ºï¼Œif(!x&gt;y)ä¸­ï¼Œç”±äº!ä¼˜å…ˆçº§é«˜äº&gt;ã€‚æ‰€ä»¥ï¼Œå…ˆè®¡ç®—â€œ!xâ€ï¼Œå…¶å®ï¼Œå°±ç›¸å½“äºï¼šif ( (!x) &gt; y )ANDï¼š &amp;&amp;å¦‚æœé€»è¾‘æ“ä½œç¬¦&amp;&amp;è¦è¿”å›â€œtrueâ€ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„æ“ä½œæ•°éƒ½å¿…é¡»æ˜¯â€˜trueâ€™ï¼›ä½†å¦‚æœ&amp;&amp;è¿”å›æ˜¯â€œfalseâ€ï¼Œåªè¦æœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯â€˜falseâ€™å³å¯ã€‚ç‰¹æ®Šçš„ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯â€˜falseâ€™çš„è¯ï¼Œå°±ä¸ä¼šå†ç»§ç»­çœ‹åé¢æ“ä½œç¬¦æ˜¯â€˜falseâ€™è¿˜æ˜¯â€˜trueâ€™ï¼Œå³å›¾ç­¾ç»ˆæ­¢äº†ã€‚è¿™ç§æƒ…å†µå«åšï¼šâ€œshort circuit evaluationâ€ç›¸ä¼¼çš„ï¼Œé€»è¾‘æ“ä½œç¬¦ æˆ–||ï¼Œå¦‚æœè¦è¿”å›â€œtrueâ€çš„è¯ï¼Œä¹Ÿæ˜¯åªè¦æœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯â€˜trueâ€™å³å¯ã€‚é€»è¾‘æ“ä½œç¬¦&amp;&amp;çš„ä¼˜å…ˆçº§é«˜äº||ï¼Œæ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨å¦‚ï¼švalue1 || value2 &amp;&amp; value3æ—¶ï¼Œè¦æ›´åŠ å°å¿ƒï¼Œä½¿ç”¨æ‹¬å·æ‰ä¼šæ›´åŠ å®‰å…¨ã€‚å¾·æ‘©æ ¹å®šå¾‹ï¼šDe Morganâ€™s lawå¾·æ‘©æ ¹å®šå¾‹å‘Šè¯‰æˆ‘ä»¬ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨é€»è¾‘æ“ä½œç¬¦!ï¼š!(x &amp;&amp; y) ç­‰åŒäº !x || !y!(x || y)ç­‰åŒäº !x &amp;&amp; !yæ¢å¥è¯è¯´ï¼Œå½“æ‚¨åˆ†å‘é€»è¾‘NOTæ—¶ï¼Œæ‚¨è¿˜éœ€è¦è½¬æ¢ä¸ºé€»è¾‘ANDé€»è¾‘ORï¼Œåä¹‹äº¦ç„¶!é€»è¾‘æ“ä½œç¬¦ï¼Œå¼‚æˆ–XORLeft operandRight operandResultfalsefalsefalsefalsetruetruetruefalsetruetruetruefalseå³ï¼ŒçœŸå‡ ä¸º çœŸï¼Œå…¶ä»–ç»“æœéƒ½æ˜¯ å‡C++æ²¡æœ‰æä¾›ä¸“é—¨æä¾› å¼‚æˆ–æ“ä½œç¬¦ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼šå½“æ“ä½œæ•°æ˜¯å¸ƒå°”å‹çš„ï¼Œå³trueï¼Œfalseï¼Œè€Œä¸æ˜¯integerï¼Œå¯ä»¥ä½¿ç”¨!=æ¥å®ç°å¼‚æˆ–ï¼š123456if (a != b) //a XOR b ,å‡å®šaã€bæ˜¯booleans ... //å¤šä¸ªæ“ä½œæ•°if (a != b != c != d) // a XOR b XOR c XOR d, assuming a, b, c, and d are Booleans ...å½“æ“ä½œæ•°ä¸æ˜¯å¸ƒå°”å‹æ—¶ï¼Œä½¿ç”¨static_castè½¬åŒ–ä¸ºboolï¼š12if (static_cast&lt;bool&gt;(a) != static_cast&lt;bool&gt;(b) != static_cast&lt;bool&gt;(c)) // a XOR b XOR c XOR d, for any type that can be converted to bool ...","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"è®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾(æ€»)","slug":"å­¦ä¹ ç¬”è®°/ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹ç¬”è®°/è®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾","date":"2020-04-01T02:29:42.000Z","updated":"2020-04-01T02:49:13.858Z","comments":true,"path":"archives/3ae1bc73.html","link":"","permalink":"https://longlongqin.github.io/archives/3ae1bc73.html","excerpt":"è®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾","text":"è®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾###å‚è€ƒæ–‡ç« ###ï¼š*è®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ *ï¼šç¬”è®°ï¼šhttps://www.cnblogs.com/livil/p/10155073.html å’Œhttps://zhuanlan.zhihu.com/p/103505933 æˆ– https://www.imooc.com/article/271502å­—å¹•ï¼šhttps://github.com/1c7/Crash-Course-Computer-Science-Chinese/blob/master/(å­—å¹•)å…¨40é›†ä¸­è‹±å­—å¹•æ–‡æœ¬2ã€ç”µå­è®¡ç®—æœº3ã€å¸ƒå°”é€»è¾‘å’Œé€»è¾‘é—¨è®¡ç®—æœºæœ€æ—©æ˜¯æœºç”µè®¾å¤‡ï¼Œä¸€èˆ¬ç”¨åè¿›åˆ¶è®¡æ•°ã€‚ä¹Ÿæœ‰ä¸€äº›æ˜¯ä¸‰è¿›åˆ¶ã€äº”è¿›åˆ¶çš„ã€‚ã€ä¹Ÿå°±æ˜¯xè¿›åˆ¶è¡¨ç¤ºæœ‰xç§çŠ¶æ€ã€‚ã€‘äºŒè¿›åˆ¶ä¸­çš„ 1æˆ–0 å«åšï¼šä½ï¼ˆbitï¼‰ï¼›1å­—èŠ‚ï¼ˆbyteï¼‰=8ä½(bits)5ã€ç®—æ•°é€»è¾‘å•å…ƒï¼ˆALUï¼‰ï¼šæ˜¯è®¡ç®—æœºçš„æ•°å­¦å¤§è„‘ï¼Œæ˜¯è®¡ç®—æœºé‡Œè´Ÿè´£è¿ç®—çš„ç»„ä»¶ã€‚ALUæœ‰2ä¸ªå•å…ƒï¼š1ä¸ªç®—æ•°å•å…ƒå’Œ1ä¸ªé€»è¾‘å•å…ƒã€‚ç®—æ•°å•å…ƒï¼šè´Ÿè´£è®¡ç®—æœºé‡Œçš„æ‰€æœ‰æ•°å­—æ“ä½œã€‚å¦‚åŠ å‡æ³•ã€‚1ï¼‰ç®—æ•°å•å…ƒ(åŠåŠ å™¨)A half adder:åŠåŠ å™¨å¦‚ä¸‹æ‰€ç¤ºï¼šå°†å…¶æŠ½è±¡åŒ–ï¼ŒæŠŠâ€œæŠŠå‡æœŸâ€å°è£…æˆä¸€ä¸ªå•ç‹¬ç»„ä»¶ï¼šå…¨åŠ å™¨ï¼ˆFull Adderï¼‰:å¦‚æœæƒ³è¦å¤„ç†å¤šä½äºŒè¿›åˆ¶æ•°åŠ æ³•æ—¶ï¼Œå°±éœ€è¦å…¨åŠ å™¨ï¼ˆFull Adderï¼‰ï¼Œå› ä¸ºåŠåŠ å™¨è®¡ç®—å®Œå½“å‰ä½çš„ç»“æœåï¼Œä¼šè¾“å‡ºè¿›ä½ï¼Œæ„å‘³ç€è®¡ç®—ä¸‹ä¸€ä½çš„ç»“æœæ—¶ï¼Œè¦å°†ä¸¤ä¸ªè¾“å…¥ä»¥åŠå‰ä¸€ä½çš„è¿›ä½ç›¸åŠ ã€‚æˆ‘ä»¬å¯ä»¥å¾—åˆ°å…¨åŠ å™¨çš„çœŸå€¼è¡¨ï¼šå…¨åŠ å™¨çœŸå€¼è¡¨![image-20200211205005097](https://longlongqin.gitee.io/image_save/images/assets/image-20200211205005097.png)æˆ‘ä»¬è¿™é‡Œå¯ä»¥ä½¿ç”¨åŠåŠ å™¨æ¥å®ç°å…¨åŠ å™¨ã€‚æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªåŠåŠ å™¨ç»“æœå½“åšæ˜¯INPUT A å’ŒINPUT Bç›¸åŠ åçš„ç»“æœï¼Œç„¶åå°†SUMå½“åšæ˜¯æ–°çš„INPUT Aï¼Œè€ŒPRE CARRYå½“åšæ˜¯æ–°çš„INPUT Bè¾“å…¥åˆ°æ–°çš„åŠåŠ å™¨ä¸­ï¼Œå¯ä»¥å‘ç°å…¶SUMç»“æœå’Œå…¨åŠ å™¨SUMç»“æœç›¸åŒã€‚è€Œå…¨åŠ å™¨çš„CARRYåªè¦å¯¹è¿™ä¸¤ä¸ªåŠåŠ å™¨çš„CARRYè¿›è¡ŒORè¿ç®—å°±å¯ä»¥äº†ã€‚ï¼ˆæ³¨æ„ï¼šè¿™ä¸¤ä¸ªåŠåŠ å™¨ä¸ä¼šåŒæ—¶å‡ºç°è¿›ä½ï¼‰åŒæ ·æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹å…¨åŠ å™¨è¿›è¡ŒæŠ½è±¡ï¼Œå¾—åˆ°ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªè¾“å…¥å’Œä¸¤ä¸ªè¾“å‡ºçš„ç‹¬ç«‹éƒ¨ä»¶ã€‚ç”±æ­¤æˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸¤ä¸ª8ä½æ•°å­—ç›¸åŠ ï¼Œè¡¨ç¤ºä¸ºAå’ŒB:å¯¹Aå’ŒBçš„ç¬¬ä¸€ä½è¿›è¡Œç›¸åŠ æ—¶ï¼Œç”±äºä¸å­˜åœ¨è¿›ä½ï¼Œæ‰€ä»¥å€¼ä½¿ç”¨ä¸€ä¸ªåŠåŠ å™¨å°±èƒ½å®ç°ï¼Œè¿™ä¸ªåŠåŠ å™¨çš„SUMå°±ä¸ºè¯¥ä½çš„ç»“æœï¼ŒCARRYå°±ä¸ºè¿›ä½ã€‚åç»­çš„7ä½äºŒè¿›åˆ¶ç›¸åŠ ï¼Œç”±äºæ¯ä¸€ä¸ªéƒ½æ¶‰åŠäº†ä¸Šä¸€ä½çš„è¿›ä½ï¼Œæ‰€ä»¥åç»­éœ€è¦7ä¸ªå…¨åŠ å™¨ï¼Œå¹¶ä¸”æ¯ä¸ªå…¨åŠ å™¨çš„CARRYè¦è¿æ¥åˆ°ä¸‹ä¸€ä¸ªå…¨åŠ å™¨çš„è¾“å…¥ï¼Œè€Œæ¯ä¸ªå…¨åŠ å™¨çš„SUMå°±ä¸ºè¯¥ä½çš„ç»“æœã€‚æœ€åä¸€ä¸ªå…¨åŠ å™¨æœ‰CARRYçš„è¾“å‡ºï¼Œå¦‚æœè¯¥CARRYä¸º1ï¼Œå°±è¡¨ç¤ºç›¸åŠ ç»“æœå¤ªå¤§äº†ï¼Œè¶…å‡ºäº†8ä½ï¼Œæ‰€ä»¥å‡ºç°äº†æº¢å‡ºï¼ˆoverflowï¼‰ã€æº¢å‡ºï¼šä¸€èˆ¬æ¥è¯´ â€œæº¢å‡ºâ€ çš„æ„æ€æ˜¯, ä¸¤ä¸ªæ•°å­—çš„å’Œå¤ªå¤§äº†ï¼Œè¶…è¿‡äº†ç”¨æ¥è¡¨ç¤ºçš„ä½æ•°ï¼Œè¿™ä¼šå¯¼è‡´é”™è¯¯å’Œä¸å¯é¢„æœŸçš„ç»“æœã€‚ã€‘ã€‚ç”±æ­¤ï¼Œæˆ‘ä»¬å°±æ„å»ºå‡ºäº†ä¸€ä¸ª8ä½åŠ æ³•å™¨ï¼ˆ8-bit adderï¼‰é€šè¿‡è¿æ¥1ä¸ªåŠåŠ å™¨å’Œn-1ä¸ªå…¨åŠ å™¨ï¼Œå°±èƒ½æ„å»ºnä½åŠ æ³•å™¨ã€‚é€šè¿‡å åŠ æ›´å¤šçš„åŠ æ³•å™¨ï¼Œèƒ½å¤Ÿé¿å…æº¢å‡ºçš„å‡ºç°ï¼Œä½†æ˜¯ä¼šå‡ºç°æ›´å¤šçš„é€»è¾‘é—¨ï¼Œè€Œä¸”æ¯æ¬¡è¿›ä½éƒ½è¦ä¸€äº›æ—¶é—´ï¼Œè€Œè®¡ç®—æ˜¯ä¸²è¡Œçš„ï¼Œæ‰€ä»¥æ¶ˆè€—çš„æ—¶é—´ä¹Ÿè¶Šé•¿ï¼Œåˆ°å¦‚ä»Šçš„æ¯ç§’å‡ åäº¿æ¬¡è¿ç®—æ—¶å°±ä¼šé€ æˆå½±å“ï¼Œæ‰€ä»¥ç°ä»£è®¡ç®—æœºç”¨çš„åŠ æ³•ç”µè·¯æœ‰æ‰€ä¸åŒï¼Œç§°ä¸ºè¶…å‰è¿›ä½åŠ æ³•å™¨ï¼ˆCarry-Look-Ahead Adderï¼‰ã€‚ALUé€šå¸¸æ”¯æŒä»¥ä¸‹æ“ä½œï¼šåŠ æ³•ã€å¸¦è¿›ä½çš„åŠ æ³•ã€å‡æ³•ã€å¸¦å€Ÿä½çš„å‡æ³•ã€å–åã€å¢1ã€å‡1ã€æ•°å­—æ— æ”¹å˜é€šè¿‡ã€‚è¿™äº›æ“ä½œä¹Ÿæ˜¯ç”±é€»è¾‘é—¨æ„æˆçš„ã€‚æ³¨æ„ï¼šç®€å•çš„ALUå¹¶==ä¸==æ”¯æŒä¹˜æ³•ï¼Œè€Œæ˜¯æŠŠä¹˜æ³•ç”¨å¤šæ¬¡åŠ æ³•æ¥å®ç°ï¼Œè€Œæ›´å¥½çš„å¤„ç†å™¨æœ‰ä¸“é—¨åšä¹˜æ³•çš„ç®—æ•°å•å…ƒã€‚2ï¼‰é€»è¾‘å•å…ƒé€»è¾‘å•å…ƒï¼šæ‰§è¡Œé€»è¾‘æ“ä½œï¼Œæ¯”å¦‚ANDã€ORå’ŒNOTæ“ä½œï¼Œä¹Ÿèƒ½åšç®€å•çš„æ•°å€¼æµ‹è¯•ï¼Œæ¯”å¦‚æ•°å­—æ˜¯ä¸æ˜¯è´Ÿæ•°ã€‚å¯¹æ•´ä¸ª8ä½ALUè¿›è¡ŒæŠ½è±¡ï¼Œç”¨ä¸€ä¸ªç‰¹æ®Šçš„Vå½¢ç¬¦å·è¿›è¡Œè¡¨ç¤ºã€‚å…¶ä¸­æœ‰ä¸¤ä¸ª8ä½è¾“å…¥ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ª4ä½æ“ä½œç ï¼ˆOperation Codeï¼‰æ¥å‘Šè¯‰ALUå¯¹è¾“å…¥æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Œæ¯”å¦‚1000è¡¨ç¤ºåŠ æ³•å‘½ä»¤ï¼Œ1100è¡¨ç¤ºå‡æ³•å‘½ä»¤ï¼Œç„¶åæœ‰ä¸€ä¸ª8ä½è¾“å‡ºã€‚åŒæ—¶ALUä¼šè¾“å‡ºä¸€ç³»åˆ—1ä½æ ‡å¿—ï¼ˆFLAGï¼‰ï¼Œæ¥è¡¨ç¤ºç‰¹å®šçŠ¶æ€ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥è®¡ç®—A-Bï¼Œç„¶åé€šè¿‡ZEROæ¥åˆ¤æ–­ç»“æœæ˜¯å¦ä¸ºé›¶æ¥åˆ¤æ–­Aä¸Bæ˜¯å¦ç›¸ç­‰ï¼Œé€šè¿‡NEGATIVEæ¥åˆ¤æ–­Aæ˜¯å¦å°äºBï¼›ç„¶åOVERFLOWè¿æ¥åˆ°åŠ æ³•å™¨çš„è¿›ä½ï¼Œæ¥åˆ¤æ–­æ˜¯å¦å‡ºç°æº¢å‡ºã€‚6ã€å¯„å­˜å™¨&amp;å†…å­˜ä¸ŠèŠ‚ä¸­ä»‹ç»çš„ALUè¿›è¡Œè®¡ç®—åå¾—åˆ°çš„ç»“æœéœ€è¦å¯¹å…¶è¿›è¡Œå­˜å‚¨ï¼Œå¯èƒ½è¿˜è¦è¿›è¡Œå¤šä¸ªè¿ç»­æ“ä½œï¼Œè¿™å°±éœ€è¦ç”¨åˆ°è®¡ç®—æœºå†…å­˜äº†ã€‚è®¡ç®—æœºä½¿ç”¨çš„æ˜¯éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆRandom Access Memory, RAMï¼‰ï¼Œå…¶åªèƒ½åœ¨æœ‰ç”µçš„æƒ…å†µä¸‹å­˜å‚¨ä¸œè¥¿ã€‚å¦ä¸€ç§å­˜å‚¨ç§°ä¸ºæŒä¹…å­˜å‚¨ï¼ˆPersistent Memoryï¼‰ï¼Œç”µæºå…³é—­æ—¶æ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œå®ƒç”¨æ¥å­˜å…¶ä»–ä¸œè¥¿ã€‚éšæœºå­˜å–å­˜å‚¨å™¨(RAM)ï¼šåªèƒ½åœ¨æœ‰ç”µçš„æ—¶å€™å­˜å‚¨ä¸œè¥¿ã€‚ã€ å†…å­˜çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼šå¯ä»¥éšæ—¶è®¿é—®ä»»ä½•ä½ç½®ã€‚æ‰€ä»¥å«â€œéšæœºå­˜å–å­˜å‚¨å™¨(RAM)â€ã€‘))æ”¾å…¥æ•°æ®çš„åŠ¨ä½œå«â€œå†™å…¥â€ï¼Œæ‹¿å‡ºæ•°æ®çš„åŠ¨ä½œå«â€œè¯»å–â€ã€‚è¿™ä¸€èŠ‚ä¸­é¦–å…ˆæ„å»ºèƒ½å¤Ÿå­˜å‚¨1ä½çš„å­˜å‚¨å™¨ï¼Œç„¶åå¯¹å…¶æ‰©å±•æ¥å¾—åˆ°å†…å­˜æ¨¡å—ã€‚ä¹‹å‰æ„å»ºçš„éƒ½æ˜¯å•å‘ç”µè·¯ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ„å»ºå›å‘ç”µè·¯ï¼ŒæŠŠè¾“å‡ºè¿å›è¾“å…¥ã€‚1ã€å½“å°†ORé—¨æ„å»ºæˆå›å‘ç”µè·¯æ—¶ï¼Œå¯ä»¥åˆ†æå…¶ç”µè·¯ç‰¹æ€§ï¼šAå’ŒBåˆå§‹ä¸º0æ—¶ï¼Œè¾“å‡ºç»“æœä¸º0å­˜å‚¨0çš„ç”µè·¯- å°†Aä¿®æ”¹ä¸º1æ—¶ï¼Œè¾“å‡ºç»“æœä¸º1ï¼Œæ­¤æ—¶Bçš„è¾“å…¥å°±å˜ä¸ºäº†1ã€‚éšåè¾“å‡ºå§‹ç»ˆä¿æŒä¸º1ï¼Œä¸è®ºAå¦‚ä½•å˜åŒ–ã€‚æ‰€ä»¥è¿™ä¸ªç”µè·¯èƒ½å¤Ÿæ°¸ä¹…è®°å½•1ï¼Œå¹¶ä¸”æ— æ³•å°†1å˜å›0ã€‚2ã€åŒç†å¯ä»¥åˆ†æä¸‹ANDé—¨æ„å»ºæˆå›å‘ç”µè·¯æ—¶çš„ç‰¹ç‚¹Aå’ŒBåˆå§‹åŒ–ä¸º1ï¼Œåˆ™è¾“å‡ºç»“æœä¸º1å°†Aä¿®æ”¹ä¸º0æ—¶ï¼Œè¾“å‡ºç»“æœä¸º0ï¼Œæ­¤æ—¶Bçš„è¾“å…¥å°±å˜æˆäº†0ã€‚éšåè¾“å…¥å§‹ç»ˆä¿æŒä¸º0ï¼Œæ— è®ºAå¦‚ä½•å˜åŒ–ã€‚æ‰€ä»¥è¿™ä¸ªç”µè·¯èƒ½å¤Ÿæ°¸ä¹…è®°å½•0ï¼Œå¹¶ä¸”æ— æ³•å°†0å˜å›1ã€‚æ‰€ä»¥æˆ‘ä»¬å°±å¾—åˆ°äº†èƒ½å¤Ÿå­˜å‚¨1å’Œ0çš„ç”µè·¯ï¼Œä¸ºäº†å¾—åˆ°æœ‰ç”¨çš„Memoryï¼Œéœ€è¦å°†ä¸¤ä¸ªç”µè·¯ç»“åˆèµ·æ¥ï¼Œå¯ä»¥å¾—åˆ°AND-ORé”å­˜å™¨ï¼ˆAND-OR Latchï¼‰ï¼Œä¸Šæ–¹çš„æ˜¯SETè¾“å…¥ï¼Œä¸‹æ–¹çš„æ˜¯RESETè¾“å…¥ï¼Œå½“SET=1ã€RESET=0ï¼Œå°±èƒ½å°†è¾“å‡ºè®¾ç½®ä¸º1ï¼Œå½“RESET=1ï¼Œå°±èƒ½å°†è¾“å‡ºè®¾ç½®ä¸º0ï¼Œå½“SET=0ã€RESET=0ï¼Œåˆ™è¾“å‡ºæœ€åæ”¾å…¥çš„å†…å®¹ã€‚ç”±æ­¤èƒ½å¤Ÿå­˜å‚¨1ä½çš„ä¿¡æ¯ï¼ˆè¯¥ä¿¡æ¯å­˜å‚¨åœ¨ORé—¨ä¸Šæ–¹çš„è¾“å…¥ç”µæä¸­ï¼‰ï¼è¿™å«â€é”å­˜â€, å› ä¸ºå®ƒâ€é”å®šâ€äº†ä¸€ä¸ªå€¼ï¼Œæ”¾å…¥æ•°æ®çš„åŠ¨ä½œå« â€œå†™å…¥â€ ï¼Œæ‹¿å‡ºæ•°æ®çš„åŠ¨ä½œå« â€œè¯»å–â€ã€‚å¯¹å…¶è¿›è¡ŒSETå’ŒRESETè¿›è¡Œåˆå¹¶ï¼Œå¹¶æ·»åŠ å…¶ä»–é—¨æ§å•å…ƒï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªé—¨é”ï¼ˆGATE LATCHï¼‰é—¨é”å…¶ä¸­DATE INPUTè¡¨ç¤ºæ•°æ®è¾“å…¥ï¼ŒWRITE ENABLEè¡¨ç¤ºå…è®¸å†™å…¥çº¿ï¼Œç”¨æ¥æ§åˆ¶æ˜¯å¦ä¿å­˜å½“å‰è¾“å…¥çš„æ•°æ®ã€‚å¯¹è¿™ä¸ªç”µè·¯è¿›è¡Œåˆ†æã€‚å¯ä»¥å°†é—¨é”è¿›è¡ŒæŠ½è±¡ï¼Œå¾—åˆ°ä¸€ä¸ªèƒ½å¤Ÿå­˜å‚¨ä¸€ä¸ªbitçš„éƒ¨ä»¶ã€‚å½“å…è®¸å†™å…¥çº¿ä¸º0æ—¶ï¼Œè¾“å‡ºä¿æŒä¸å˜ï¼Œå½“å…è®¸å†™å…¥çº¿ä¸º1æ—¶ï¼Œè¾“å‡ºå°±æ˜¯æ•°æ®è¾“å…¥ï¼Œå¹¶ä¸”èƒ½å¤Ÿå°†æ•°æ®è¾“å…¥è¿›è¡Œå­˜å‚¨ã€‚é—¨é”çš„æŠ½è±¡å¦‚æœæˆ‘ä»¬å¹¶æ’8ä¸ªé”å­˜å™¨ï¼Œå°±èƒ½å­˜å‚¨8ä½ä¿¡æ¯ã€‚ä¸€ç»„è¿™æ ·çš„é”å­˜å™¨ç§°ä¸º**å¯„å­˜å™¨ï¼ˆRegisterï¼‰**ï¼Œå¯„å­˜å™¨èƒ½å¤Ÿå­˜ä¸€ä¸ªæ•°å­—ï¼Œè¿™ä¸ªæ•°å­—çš„ä½æ•°ç§°ä¸ºå¯„å­˜å™¨çš„**ä½å®½ï¼ˆWidthï¼‰**ã€‚å†™å…¥å¯„å­˜å™¨ä¹‹å‰ï¼Œè¦å…ˆå¯åŠ¨é‡Œé¢æ‰€æœ‰çš„é”å­˜å™¨ï¼Œå¯ä»¥å°†æ‰€æœ‰é”å­˜å™¨çš„å…è®¸å†™å…¥çº¿éƒ½è¿æ¥åœ¨ä¸€èµ·ï¼ŒæŠŠå®ƒè®¾ä¸º1ï¼Œç„¶åç”¨8æ¡æ•°æ®çº¿å‘é€æ•°æ®ï¼Œç„¶åå°†å…è®¸å†™å…¥çº¿è®¾å›0ï¼Œå°±èƒ½å°†8ä½æ•°æ®å­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­ã€‚)å¯„å­˜å™¨ï¼šä¸Šé¢æ˜¯åªèƒ½å­˜å‚¨1bitçš„â€œé”å­˜å™¨â€ï¼Œå¦‚æœæˆ‘ä»¬å¹¶æ’æ”¾8ä¸ªé”å­˜å™¨ï¼Œå°±å¯ä»¥å­˜8ä½(bits)ä¿¡æ¯ã€‚ä¸€ç»„è¿™æ ·çš„é”å­˜å™¨å«åšâ€œå¯„å­˜å™¨â€ã€‚1ã€ä½å®½å¯„å­˜å™¨èƒ½å­˜ä¸€ä¸ªæ•°å­—ï¼Œè¿™ä¸ªæ•°å­—æœ‰å¤šå°‘ä½ï¼Œå«åšâ€œä½å®½â€ã€‚$æ—©æœŸç”µè„‘ç”¨8ä½å¯„å­˜å™¨ï¼Œç„¶åæ˜¯16ä½ã€32ä½ã€‚å¦‚ä»Šéƒ½æœ‰64ä½å®½çš„å¯„å­˜å™¨ã€‚$)))æ‰€ä»¥ï¼Œå¦‚64ä½çš„å¯„å­˜å™¨åªéœ€è¦129æ¡çº¿å°±å¯ä»¥äº†ã€‚ã€64æ¡æ˜¯â€œæ•°æ®è¾“å…¥çº¿â€ã€â€œ64æ¡æ•°æ®è¾“å‡ºçº¿â€ã€â€œä¸€æ¡å¯ç”¨å†™å…¥çº¿â€ã€‘ã€‚å¦‚æœè¦å­˜256ä½ï¼Œå°±éœ€è¦513æ¡çº¿ã€‚å‡å°‘çº¿æ•°çš„æ–¹æ³•å°±æ˜¯ï¼šçŸ©é˜µã€‚)æ‰€ä»¥ï¼Œå¯¹äºä¸€ä¸ª256ä½çš„å­˜å‚¨ï¼šåªéœ€è¦35æ¡ã€‚)å¦‚æœæƒ³è¦è®¿é—®ç‰¹å®šçš„é”å­˜å™¨ï¼ˆå³å¯»æ‰¾å…¶åœ°å€ï¼‰ï¼Œï¼ˆç”±äºè¡Œæ•°å’Œåˆ—æ•°å‡åªæœ‰16ï¼Œæ‰€ä»¥å‡å¯ä»¥ç”¨4ä¸ªäºŒè¿›åˆ¶ä½æ¥è¡¨ç¤ºã€‚ï¼‰å°±æœ‰è¡Œå·å’Œåˆ—å·æ¥å¯¹åº”ã€‚)))å¤šè·¯å¤ç”¨å™¨ï¼šæœ‰ä¸åŒå¤§å°ã€‚é€šå¸¸åŒ…å«ä¸€å®šæ•°ç›®çš„æ•°æ®è¾“å…¥ï¼Œæœ‰ä¸€ä¸ªå•ç‹¬çš„è¾“å‡ºã€‚æŠŠ256ä½å†…å­˜å½“æˆä¸€ä¸ªæ•´ä½“ï¼ŒæŠ½è±¡åŒ–ä¸€ä¸‹ï¼š))ä¸€ä¸ª256ä½å†…å­˜ä¹Ÿä¸èƒ½åšä»€ä¹ˆå¤§äº‹ï¼Œæ‰€ä»¥ç»§ç»­æ‰©å¤§ï¼š))))å†æ¬¡ï¼Œçœ‹æˆä¸€ä¸ªæ•´ä½“ï¼šä¸‹å›¾ä¸­ï¼šæˆ‘ä»¬æœ‰256ä¸ªåœ°å€ï¼Œæ¯ä¸ªåœ°å€èƒ½è¯»æˆ–å†™ä¸€ä¸ª8ä½(bit)çš„å€¼ã€‚)))))è¿™ä¸€èŠ‚ç”¨é”å­˜å™¨åšäº†ä¸€å—é™æ€éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆStatic Random-Access Memoryï¼ŒSRAMï¼‰ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–ç±»å‹çš„RAMï¼Œæ¯”å¦‚DRAMã€é—ªå­˜å’ŒNVRAMï¼Œå®ƒä»¬çš„åŠŸèƒ½å’ŒSRAMç›¸ä¼¼ï¼Œä½†æ˜¯ä½¿ç”¨ä¸åŒçš„ç”µè·¯å­˜æ”¾å•ä¸ªä½ã€‚ä½†æ˜¯æ ¹æœ¬ä¸Šï¼Œè¿™äº›æŠ€æœ¯éƒ½æ˜¯çŸ©é˜µå±‚å±‚åµŒå¥—æ¥å­˜å‚¨å¤§é‡ä¿¡æ¯ã€‚7ã€ä¸­å¤®å¤„ç†å™¨(CPU)CPUè´Ÿè´£æ‰§è¡Œç¨‹åºï¼Œç¨‹åºç”±ä¸€ä¸ªä¸ªæ“ä½œç»„æˆï¼Œè¿™äº›æ“ä½œå«â€œæŒ‡ä»¤(instruction)â€ã€‚å¦‚æœæ˜¯æ•°å­¦æŒ‡ä»¤ï¼Œæ¯”å¦‚åŠ å‡ï¼ŒCPUä¼šè®©ALUè¿›è¡Œæ•°å­¦è¿ç®—ã€‚å¦‚æœæ˜¯å†…å­˜æŒ‡ä»¤ï¼ŒCPUä¼šå’Œå†…å­˜é€šä¿¡ï¼Œç„¶åè¯»å†™å€¼ã€‚9ã€é«˜çº§CPUè®¾è®¡RAMæ˜¯CPUä¹‹å¤–çš„ç‹¬ç«‹ç»„ä»¶ï¼Œæ„å‘³ç€æ•°æ®è¦ç”¨çº¿æ¥ä¼ é€’ï¼Œè¿™ä¸ªçº¿å«åšâ€œæ€»çº¿ï¼ˆBUSï¼‰â€ã€‚$æ€»çº¿å¯èƒ½åªæœ‰å‡ å˜ç±³ï¼Œè™½ç„¶ç”µä¿¡å·ä¼ è¾“é€Ÿåº¦æ¥è¿‘å…‰é€Ÿï¼Œä½†æ˜¯CPUæ¯ç§’å¯ä»¥å¤„ç†ä¸Šäº¿æ¡æŒ‡ä»¤ï¼Œå¾ˆå°çš„å»¶è¿Ÿä¹Ÿä¼šé€ æˆé—®é¢˜ã€‚$)æå‡æ€§èƒ½æ–¹æ³•ä¸€ï¼šç¼“å­˜ä¸€æ¡â€œä»å†…å­˜è¯»æ•°æ®â€çš„æŒ‡ä»¤å¯èƒ½éœ€è¦å¤šä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œè€Œæ­¤æ—¶CPUç©ºç­‰æ•°æ®ã€‚è§£å†³å»¶è¿Ÿçš„æ–¹æ³•ä¹‹ä¸€æ˜¯ç»™CPUåŠ ä¸€ç‚¹RAM,å«ï¼šâ€œç¼“å­˜(Cache)â€ã€‚å› ä¸ºå¤„ç†å™¨çš„ç©ºé—´ä¸å¤§ï¼Œæ‰€ä»¥ç¼“å­˜ä¸€èˆ¬åªæœ‰KBæˆ–MBï¼Œè€ŒRAMéƒ½æ˜¯GBèµ·æ­¥ã€‚ç¼“å­˜æé«˜äº†é€Ÿåº¦ï¼šå½“CPUä»RAMæ‹¿æ•°æ®æ—¶ï¼ŒRAMä¸ç”¨ä¼ ä¸€ä¸ªï¼Œå¯ä»¥ä¼ ä¸€æ‰¹ã€‚è™½ç„¶èŠ±çš„æ—¶é—´å¤šä¸€ç‚¹ï¼Œä½†æ•°æ®å¯ä»¥å­˜åœ¨ç¼“å­˜ã€‚è¿™å¾ˆå®ç”¨ï¼Œå› ä¸ºæ•°æ®å¸¸å¸¸æ˜¯ä¸€ä¸ªä¸ªæŒ‰é¡ºåºå¤„ç†ã€‚æ¯”å¦‚ï¼šç®—é¤å…çš„å½“æ—¥æ”¶å…¥æ—¶ï¼Œå…ˆå–RAMåœ°å€ä¸º100 çš„äº¤æ˜“é¢ï¼ŒRAMä¸å…¶åªç»™ä¸€ä¸ªå€¼ï¼Œä¸å¦‚ç›´æ¥ç»™ä¸€æ‰¹å€¼ï¼ŒæŠŠåœ°å€ä¸º100~200çš„æ•°æ®éƒ½å¤åˆ¶åˆ°ç¼“å­˜ä¸­ã€‚å½“å¤„ç†å™¨è¦ä¸‹ä¸€ä¸ªäº¤æ˜“é¢ï¼ˆåœ°å€ä¸º101çš„ï¼‰æ—¶ï¼Œç¼“å­˜å°±ä¼šå‘Šè¯‰å¤„ç†å™¨ï¼šâ€œæˆ‘å·²ç»æœ‰è¿™ä¸ªæ•°æ®äº†ï¼Œç°åœ¨å°±ç»™ä½ â€ã€‚å°±ä¸ç”¨å†å»RAMå–æ•°æ®äº†ã€‚)å½“æƒ³è¦çš„æ•°æ®å·²ç»åœ¨ç¼“å­˜ä¸­æ—¶ï¼Œè¿™ç§çŠ¶æ€å«â€œç¼“å­˜å‘½ä¸­ï¼ˆCache Hitï¼‰â€ï¼›å¦‚æœä¸åœ¨ï¼Œåˆ™å«â€œç¼“å­˜æœªå‘½ä¸­ï¼ˆCache Missï¼‰â€ã€‚ç¼“å­˜ä¹Ÿå¯ä»¥å½“ä¸´æ—¶ç©ºé—´ï¼Œå­˜ä¸€äº›ä¸­é—´å€¼ï¼Œé€‚åˆé•¿çš„æˆ–è€…å¤æ‚çš„è¿ç®—ã€‚ç»§ç»­é¤é¦†çš„ä¾‹å­ï¼šå‡è®¾CPUç®—å®Œäº†ä¸€å¤©çš„é”€å”®é¢ï¼Œæƒ³æŠŠç»“æœå­˜åˆ°åœ°å€ä¸º150çš„åœ°æ–¹ã€‚å°±åƒä¹‹å‰ï¼Œæ•°æ®ä¸æ˜¯ç›´æ¥å­˜åˆ°RAMä¸­ï¼Œè€Œæ˜¯å­˜åœ¨ç¼“å­˜ä¸­ã€‚è¿™æ ·ä¸ä½†å­˜èµ·æ¥å¿«ä¸€äº›ã€å¦‚æœè¿˜è¦æ¥ç€è®¡ç®—ï¼Œå–å€¼ä¹Ÿä¼šå¿«ä¸€äº›ã€‚ä½†æ˜¯è¿™ä¼šå¯¼è‡´ï¼šç¼“å­˜å’ŒRAMä¸­çš„æ•°æ®ä¸ä¸€è‡´ã€‚å› æ­¤ç¼“å­˜é‡Œæ¯å—ç©ºé—´æœ‰ä¸€ä¸ªç‰¹æ®Šæ ‡è®°ï¼Œå«ï¼šâ€œè„ä½ï¼ˆDirty Bitï¼‰â€ã€‚åŒæ­¥ä¸€èˆ¬å‘ç”Ÿåœ¨ï¼šå½“ç¼“å­˜æ»¡äº†è€ŒCPUåˆéœ€è¦ç¼“å­˜çš„æ—¶å€™ã€‚åœ¨æ¸…ç†ç¼“å­˜è…¾å‡ºç©ºé—´ä¹‹å‰ï¼Œä¼šå…ˆæ£€æŸ¥â€œè„ä½â€ï¼Œå¦‚æœæ˜¯â€œè„â€çš„è¯ï¼Œåœ¨åŠ è½½æ–°å†…å®¹ä¹‹å‰ï¼Œä¼šæŠŠæ•°æ®å†™å›RAMã€‚![æ¼”ç¤º (3)](https://longlongqin.gitee.io/image_save/images/assets/æ¼”ç¤º (3).gif)æå‡æ€§èƒ½æ–¹æ³•äºŒï¼šâ€œæŒ‡ä»¤æµæ°´çº¿â€æŒ‡ä»¤æµæ°´çº¿ï¼šinstruction pipeliningä¾‹å¦‚ï¼šå¦‚æœä½ æƒ³è¦æ´—ä¸€æ•´ä¸ªçš„åºŠå•ï¼Œä½†åªæœ‰ä¸€ä¸ªæ´—è¡£æœºå’Œä¸€ä¸ªçƒ˜å¹²æœºã€‚é€‰æ‹©ä¸€ï¼šæŒ‰é¡ºåºï¼Œå…ˆæ”¾æ´—è¡£æœºæ´—30åˆ†é’Ÿï¼Œç„¶ååœ¨çƒ˜å¹²æœº30åˆ†é’Ÿã€‚å…±è®¡1å°æ—¶ã€‚é€‰æ‹©äºŒï¼šåƒä¸€ä¸­ä¸€æ ·ï¼Œå…ˆæ”¾ä¸€æ‰¹åºŠå•åˆ°æ´—è¡£æœº30åˆ†é’Ÿï¼Œç„¶åæŠŠå®ƒæ”¾åˆ°çƒ˜å¹²æœºä¸­ã€‚ä½†æ˜¯è¿™æ—¶å€™è¦ç­‰30åˆ†é’Ÿæ‰èƒ½çƒ˜å¹²ã€‚æ­¤æ—¶ï¼Œå¯ä»¥æ”¾å¦ä¸€æ‰¹åºŠå•åˆ° æ´—è¡£æœºï¼ˆæ­¤æ—¶ï¼Œæ´—è¡£æœºï¼Œçƒ˜å¹²æœºåœ¨åŒæ—¶å·¥ä½œï¼‰ï¼Œä¾æ¬¡ï¼Œç›´åˆ°æ´—å®Œæ‰€æœ‰åºŠå•ã€‚æ•ˆç‡æ˜¯ä¸€çš„2å€ã€‚å¤„ç†å™¨ä¹Ÿå¯ä»¥è¿™æ ·è®¾è®¡ï¼ŒCPUæ˜¯æŒ‰é¡ºåºå¤„ç†çš„ï¼š(è¯»)å–æŒ‡(ä»¤)â€”â€”&gt;è§£ç â€”â€”&gt;æ‰§è¡Œã€‚ä¸æ–­é‡å¤ï¼šä½†æ˜¯æ¯ä¸ªé˜¶æ®µéƒ½æ˜¯ç”¨çš„CPUçš„ä¸åŒéƒ¨åˆ†ï¼Œæ„å‘³ç€å¯ä»¥å¹¶è¡Œå¤„ç†ï¼šâ€œæ‰§è¡Œâ€ä¸€ä¸ªæŒ‡ä»¤æ—¶ï¼ŒåŒæ—¶â€œè§£ç â€ä¸‹ä¸€ä¸ªæŒ‡ä»¤ï¼ŒåŒæ—¶ï¼Œâ€œè¯»å–â€ä¸‹ä¸‹æ¡æŒ‡ä»¤ã€‚è¿™æ ·çš„æµæ°´çº¿ï¼Œæ¯ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸæ‰§è¡Œ1ä¸ªæŒ‡ä»¤ï¼Œååé‡ä¹˜3.ä½†æ˜¯ï¼Œå’Œç¼“å­˜ä¸€æ ·ï¼Œè¿™ä¹Ÿä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼šé—®é¢˜1ï¼šæŒ‡ä»¤ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚)å› æ­¤æµæ°´çº¿å¤„ç†å™¨ï¼Œè¦å…ˆå¼„æ¸…æ¥šæ•°æ®ä¾èµ–æ€§ã€‚å¿…è¦æ—¶åœæ­¢æµæ°´çº¿ï¼Œé¿å…å‡ºé—®é¢˜ã€‚é«˜ç«¯çš„CPUï¼Œä¼šæœ€å°åŒ–æµæ°´çº¿çš„åœå·¥æ—¶é—´ï¼Œè¿™å«â€œä¹±åºæ‰§è¡Œâ€ã€‚é—®é¢˜äºŒï¼šâ€œæ¡ä»¶è·³è½¬â€ï¼Œæ¯”å¦‚ä¹‹å‰çš„JUMP NEGATIVEï¼ˆç±»ä¼¼å¾ªç¯è·³è½¬ï¼‰ã€‚è¿™äº›æŒ‡ä»¤ä¼šæ”¹å˜ç¨‹åºçš„æ‰§è¡Œæµã€‚)ç©ºç­‰ä¼šé€ æˆå»¶è¿Ÿã€‚â€‹ æŠ€å·§ï¼šâ€œæ¨æµ‹æ‰§è¡Œâ€)))))ä¸ºäº†å°½å¯èƒ½å‡å°‘æ¸…ç©ºæµæ°´çº¿çš„æ¬¡æ•°ï¼ŒCPUå‚å•†å¼€å‘å¤æ‚çš„æ–¹æ³•ï¼šâ€œåˆ†æ”¯é¢„æµ‹â€ã€‚ç°åœ¨è¿™ç§çŒœæµ‹çš„æ­£ç¡®ç‡è¶…è¿‡90%ã€‚åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼ŒCPUåœ¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå®Œæˆä¸€ä¸ªæŒ‡ä»¤ã€‚ä½†æ˜¯â€œè¶…æ ‡é‡å¤„ç†å™¨â€çš„å‡ºç°ï¼Œä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå¯ä»¥å®Œæˆå¤šä¸ªæŒ‡ä»¤ã€‚ç”¨â€œå¤šæ ¸å¤„ç†å™¨â€ã€åŒæ ¸ã€å››æ ¸å¤„ç†å™¨ï¼šæ„æ€æ˜¯ä¸€ä¸ªCPUèŠ¯ç‰‡é‡Œï¼Œæœ‰å¤šä¸ªç‹¬ç«‹çš„å¤„ç†å•å…ƒï¼Œâ€çœ‹èµ·æ¥å°±åƒæœ‰å¤šä¸ªç‹¬ç«‹çš„CPUâ€ã€‚ä½†å› ä¸ºä»–ä»¬æ•´åˆç´§å¯†ï¼Œå¯ä»¥å…±äº«ä¸€äº›èµ„æºå¦‚ï¼Œç¼“å­˜ï¼Œä½¿å¾—å¤šæ ¸å¯ä»¥åˆä½œè¿ç®—ã€‚ã€‘ã€‚å½“å¤šæ ¸ä¸å¤Ÿæ—¶ï¼Œå¯ä»¥ç”¨å¤šä¸ªCPUã€‚10ã€æ—©æœŸçš„è®¡ç®—æœºç¼–ç¨‹â€‹ ä¹‹å‰çš„ç¨‹åºæ˜¯ç”¨æ’çº¿æ¿ç¼–ç¨‹ï¼Œåˆ°åæ¥ï¼ˆ1940å¹´ä»£æ™šæœŸåˆ°1950å¹´ä»£åˆï¼‰å†…å­˜çš„ä»·æ ¼ä¸‹é™ï¼Œå®¹é‡ä¸Šå‡ï¼Œä½¿å¾—ç¨‹åºå­˜å…¥å†…å­˜å˜å¾—å¯è¡Œã€‚ç¨‹åºå­˜å…¥å†…å­˜ä¸­æ˜“äºä¿®æ”¹ã€æ–¹ä¾¿CPUå¿«é€Ÿè¯»å–ï¼Œè¿™ç±»æœºå™¨å«åšï¼šâ€œå­˜å‚¨ç¨‹åºè®¡ç®—æœºï¼ˆStored-program Computersï¼‰â€ã€‚å†…å­˜è¶³å¤Ÿæ—¶ï¼Œè¿˜å¯ä»¥å­˜å‚¨ç¨‹åºéœ€è¦çš„æ•°æ®ï¼ˆåŒ…æ‹¬è¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®ï¼‰ã€‚è¿™ç§å°†ç¨‹åºå’Œæ•°æ®å­˜å‚¨åœ¨ä¸€èµ·çš„å­˜å‚¨ç»“æ„ï¼Œå«â€œå†¯è¯ºä¾æ›¼ç»“æ„â€ã€‚â€‹ å†¯è¯ºä¾æ›¼è®¡ç®—æœºçš„æ ‡å¿—æ˜¯ï¼Œä¸€ä¸ªå¤„ç†å™¨ï¼ˆæœ‰ç®—æ•°é€»è¾‘å•å…ƒï¼‰+æ•°æ®å¯„å­˜å™¨+æŒ‡ä»¤å¯„å­˜å™¨+æŒ‡ä»¤åœ°å€å¯„å­˜å™¨+å†…å­˜ï¼ˆè´Ÿè´£å­˜æ•°æ®å’ŒæŒ‡ä»¤ï¼‰ã€‚11ã€ç¼–ç¨‹è¯­è¨€å‘å±•å²â€‹ è®¡ç®—æœºåªèƒ½å¤„ç†äºŒè¿›åˆ¶ï¼Œå…¶å®ï¼Œâ€œæœºå™¨è¯­è¨€ï¼ˆMachine Languageï¼‰â€æˆ–â€œæœºå™¨ç ï¼ˆMachine Codeï¼‰â€ã€‚åœ¨è®¡ç®—æœºæ—©èµ·ï¼Œè¿˜å¿…é¡»è¦ç”¨æœºå™¨ç  äº›å¥½åƒå‘¢ä¾›éœ€ï¼Œä¸€èˆ¬ä¼šå…ˆå¯¹ç¨‹åºè¿›è¡Œé«˜å±‚æ¬¡çš„åŠŸèƒ½æè¿°ï¼Œç§°ä¸ºâ€œä¼ªä»£ç ï¼ˆPseudo-codeï¼‰â€ï¼Œåªæ˜¯åŠ©äºç¨‹åºå‘˜ç†è§£æ— æ³•è®©è®¡ç®—æœºè¿è¡Œï¼Œç„¶åæ ¹æ®æŒ‡ä»¤è¡¨å°†ä¼ªä»£ç è½¬æ¢æˆäºŒè¿›åˆ¶æœºå™¨ç ï¼Œç„¶åå°†æœºå™¨ç é€å…¥è®¡ç®—æœºä¸­è¿è¡Œã€‚â€‹ åœ¨1940-1950å¹´ï¼Œç¨‹åºå‘˜å¼€å‘å‡ºä¸€ç§æ–°è¯­è¨€ï¼Œæ›´å¯è¯»ã€æ›´é«˜å±‚æ¬¡ï¼Œæ¯ä¸ªæ“ä½œç åˆ†é…ä¸€ä¸ªç®€å•åå­—ï¼Œç§°ä¸ºåŠ©è®°ç¬¦ï¼ˆMnemonicsï¼‰ï¼ŒåŠ©è®°ç¬¦åè·Ÿæ•°æ®ï¼Œå½¢æˆå®Œæ•´çš„æŒ‡ä»¤ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæ‰€ä»¥ä¸å…¶å†™0å’Œ1çš„æœºå™¨ç ï¼Œç¨‹åºå‘˜å¯ä»¥ç›´æ¥å†™â€œLOAD_A 14â€ï¼Œè¿™ä¸ªè¯­è¨€ç§°ä¸ºæ±‡ç¼–è¯­è¨€ï¼ˆAssembly Languageï¼‰ã€‚å½“ç„¶è®¡ç®—æœºæ— æ³•ç†è§£â€œLOAD_A 14â€ï¼Œæ‰€ä»¥ç¨‹åºå‘˜ä»¬å†™äº†ä¸€ä¸ªç¨‹åºæ¥å°†æ–‡å­—æŒ‡ä»¤è‡ªåŠ¨è½¬æ¢æˆäºŒè¿›åˆ¶æŒ‡ä»¤ï¼Œè¿™ä¸ªç¨‹åºç§°ä¸ºæ±‡ç¼–å™¨ï¼ˆAssemblerï¼‰ï¼Œ$æ±‡ç¼–å™¨è¯»å–æ±‡ç¼–è¯­è¨€å†™çš„ç¨‹åºï¼Œç„¶åè½¬æ¢æˆæœºå™¨ç $ã€‚éšç€å‘å±•ï¼Œæ±‡ç¼–å™¨æœ‰è¶Šæ¥è¶Šå¤šçš„åŠŸèƒ½ä½¿å¾—ç¼–ç¨‹æ›´åŠ å®¹æ˜“ï¼Œå…¶ä¸­ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯è‡ªåŠ¨åˆ†æJUMPåœ°å€ã€‚å¦‚ä¸‹å›¾ï¼ŒJUMPåé¢è·Ÿçš„æ˜¯å†…å­˜ä¸­çš„çœŸå®åœ°å€ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ä¸Šæ–¹å¯¹ç¨‹åºè¿›è¡Œä¿®æ”¹ï¼Œåˆ™åé¢çš„æ‰€æœ‰åœ°å€éƒ½ä¼šæ”¹å˜ã€‚æ‰€ä»¥æ±‡ç¼–å™¨ä¸ç”¨å›ºå®šè·³è½¬åœ°å€ï¼Œè€Œæ˜¯è®©ä½ æ’å…¥å¯è·³è½¬çš„æ ‡ç­¾ï¼Œå½“ç¨‹åºä¼ å…¥æ±‡ç¼–å™¨ï¼Œæ±‡ç¼–å™¨å°±ä¼šè‡ªå·±æ¨ç®—å‡ºè·³è½¬åœ°å€ï¼Œè¿™æ ·å°±ç¨‹åºå‘˜å°±æ— åºè¿‡åˆ†å…³æ³¨ç»†èŠ‚ã€‚â€‹ $æ±‡ç¼–ä»£ç ä¾‹å­$æ±‡ç¼–åªæ˜¯ä¿®é¥°äº†ä¸€ä¸‹æœºå™¨ç ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä¸€æ¡æ±‡ç¼–æŒ‡ä»¤å¯¹åº”ä¸€æ¡æœºå™¨æŒ‡ä»¤ï¼Œæ‰€ä»¥æ±‡ç¼–ç å’Œåº•å±‚ç¡¬ä»¶è¿æ¥å¾ˆå¯†åˆ‡ï¼Œç¨‹åºå‘˜ä»éœ€è¦æ€è€ƒä½¿ç”¨ä»€ä¹ˆå¯„å­˜å™¨å’Œå†…å­˜åœ°å€ã€‚ä¸ºäº†é‡Šæ”¾ç”µè„‘çš„æ½œåŠ›ï¼Œéœæ™®è®¾è®¡äº†ä¸€ä¸ªé«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œå«åšArithmetic Language Version 0ï¼Œç®€ç§°A0ã€‚ä¸€è¡Œé«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œå¯èƒ½ä¼šè½¬æ¢æˆå‡ åæ¡äºŒè¿›åˆ¶æŒ‡ä»¤ã€‚ä¸ºæ­¤åšåˆ°è¿™ç§å¤æ‚è½¬æ¢ï¼Œéœæ™®åœ¨1952å¹´åˆ›é€ äº†ç¬¬ä¸€ä¸ªç¼–è¯‘å™¨ï¼ˆCompilerï¼‰ï¼Œç¼–è¯‘å™¨ä¸“é—¨æŠŠé«˜çº§è¯­è¨€è½¬æ¢æˆä½çº§è¯­è¨€ï¼ˆæ¯”å¦‚æ±‡ç¼– æˆ– æœºå™¨ç ï¼‰ã€‚ç”±æ­¤ï¼Œé«˜çº§ç¼–ç¨‹è¯­è¨€å°±ä¸ç”¨ç®¡å¯„å­˜å™¨æˆ–å†…å­˜ä½ç½®ï¼Œç¼–è¯‘å™¨ä¼šè§£å†³è¿™äº›ç»†èŠ‚ã€‚åœ¨1950å¹´ï¼Œå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€å’Œç¼–è¯‘å™¨åªèƒ½è¿è¡Œåœ¨ä¸€ç§è®¡ç®—æœºä¸­ï¼Œå¦‚æœæ›´æ¢è®¡ç®—æœºï¼Œå°±è¦é‡å†™æ‰€æœ‰ä»£ç ï¼Œå› æ­¤1959å¹´å¼€å‘ä¸€ç§é€šç”¨ç¼–ç¨‹è¯­è¨€ï¼Œå¯ä»¥åœ¨ä¸åŒæœºå™¨ä¸Šé€šç”¨ï¼Œæœ€åè¯ç”Ÿäº†ä¸€é—¨é«˜çº§ã€æ˜“äºä½¿ç”¨çš„è¯­è¨€æ™®é€šé¢å‘å•†ä¸šè¯­è¨€ï¼ˆCommon Business-Oriented Languageï¼ŒCOBOLï¼‰ã€‚ä¸ºäº†å…¼å®¹ä¸åŒåº•å±‚ç¡¬ä»¶ï¼Œæ¯ä¸ªè®¡ç®—æœºæ¶æ„éœ€è¦ä¸€ä¸ªCOBOLç¼–è¯‘å™¨ï¼Œç”±æ­¤æ— è®ºè¿è¡Œçš„è®¡ç®—æœºæ˜¯ä»€ä¹ˆï¼Œè¿™äº›ç¼–è¯‘å™¨å¯ä»¥æ¥æ”¶ç›¸åŒçš„COBOLä»£ç ã€‚å¦‚ä»Šå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯å¦‚æ­¤ï¼Œä¸å¿…æ¥è§¦CPUç‰¹æœ‰çš„æ±‡ç¼–ç å’Œæœºå™¨ç ã€‚12ã€ç¼–ç¨‹åŸç†-è¯­å¥å’Œå‡½æ•°a=5;æ˜¯ä¸€ä¸ªç¼–ç¨‹è¯­è¨€çš„è¯­å¥ã€‚ç¨‹åºç”±ä¸€ä¸ªä¸ªæŒ‡ä»¤ç»„æˆã€‚13ã€ç®—æ³•å…¥é—¨ç®—æ³•ï¼šè§£å†³é—®é¢˜çš„å…·ä½“æ­¥éª¤ã€‚14ã€æ•°æ®ç»“æ„æ•°æ®æ˜¯ä»¥ä»€ä¹ˆå½¢å¼å­˜åœ¨å†…å­˜é‡Œå‘¢ï¼Ÿæˆ‘ä»¬å¸Œæœ›æ•°æ®æ˜¯ç»“æ„åŒ–çš„ï¼Œæ–¹ä¾¿è¯»å–ï¼Œç”±æ­¤å‘æ˜äº†æ•°æ®ç»“æ„ã€‚14.1 æ•°ç»„Arrayä¸€ä¸ªå˜é‡åªèƒ½å­˜å‚¨ä¸€ä¸ªå€¼ï¼Œè€Œä¸€ä¸ªæ•°ç»„å˜é‡èƒ½å¤Ÿä¿å­˜å¤šä¸ªåŒç±»å‹å€¼ï¼Œå¹¶ä¸”æ•°ç»„çš„å€¼æ˜¯ä¸€ä¸ªä¸ªè¿ç»­å­˜åœ¨å†…å­˜ä¸­çš„ã€‚ä¸ºäº†å–å‡ºæ•°ç»„ä¸­çš„æŸä¸ªå€¼ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸€ä¸ªä¸‹æ ‡ï¼ˆIndexï¼‰ã€‚å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„çš„ä¸‹æ ‡éƒ½ä»0å¼€å§‹ã€‚ä¸‹å›¾æ˜¯æ•°ç»„ä¿å­˜åœ¨å†…å­˜ä¸­çš„å½¢å¼ï¼Œä¸ºäº†ç®€å•ï¼Œå‡è®¾ç¼–è¯‘å™¨ä»å†…å­˜åœ°å€1000å¼€å§‹ä¿å­˜æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å†…å®¹å°±åƒå›¾ä¸­é‚£æ ·é¡ºåºä¿å­˜åœ¨å†…å­˜ä¸­ã€‚å®šä¹‰è¯¥æ•°ç»„å˜é‡ä¸ºjï¼Œåˆ™j[0]ä¼šå–å†…å­˜åœ°å€1000çš„æ•°æ®æ¥è·å¾—ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ï¼Œ j[5] åˆ™ä¼šå»å†…å­˜åœ°å€1000åŠ 5ä¸ªåç§»é‡å¾—åˆ°å†…å­˜åœ°å€1005ä¸­ä¿å­˜çš„æ•°æ®ã€‚ç¼ºç‚¹ï¼šåˆ›å»ºæ•°ç»„æ—¶å°±è¦å›ºå®šå¤§å°ï¼Œä¸èƒ½åŠ¨æ€å¢åŠ å¤§å°ï¼Œå¹¶ä¸”æ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯æŒ‰é¡ºåºå­˜å‚¨çš„ï¼Œåœ¨ä¸­é—´æ’å…¥ä¸€ä¸ªå€¼å¾ˆå›°éš¾ã€‚14.2 å­—ç¬¦ä¸²Stringç±»ä¼¼äºæ•°ç»„ï¼Œå…¶å®å°±æ˜¯å­—æ¯ã€æ•°å­—ã€æ ‡ç‚¹ç¬¦å·ç­‰æ„æˆçš„æ•°ç»„ã€‚æˆ‘ä»¬åœ¨ç¬¬4èŠ‚ä¸­æœ‰è®¨è®ºäº†è®¡ç®—æœºæ€ä¹ˆå­˜å‚¨å­—ç¬¦çš„ï¼Œé€šè¿‡ASCIIæˆ–è€…Unicodeç¼–ç ï¼Œå°†å­—ç¬¦è½¬æ¢ä¸ºå¯¹åº”çš„äºŒè¿›åˆ¶æ•°ã€‚å†™ä»£ç æ—¶ï¼Œå¯ä»¥ç›´æ¥ç”¨å¼•å·æ‹¬èµ·æ¥æ„å»ºå­—ç¬¦ä¸²j=&quot;Hello World&quot;ï¼Œ å…¶åœ¨å†…å­˜ä¸­çš„å­˜å‚¨å½¢å¼å¦‚ä¸‹å›¾ã€‚æ³¨æ„ï¼šå­—ç¬¦ä¸²åœ¨å†…å­˜ä¸­ä»¥äºŒè¿›åˆ¶0ç»“å°¾ï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²ç»“å°¾ï¼Œç”¨æ¥ç»™åˆ«çš„å‡½æ•°æŒ‡ç¤ºä»€ä¹ˆæ—¶å€™å­—ç¬¦ä¸²ç»“æŸäº†ã€‚14.3 çŸ©é˜µMatrixä¹‹å‰ä¿å­˜çš„éƒ½æ˜¯ä¸€ç»´æ•°ç»„ï¼Œä½†æ˜¯åƒç”µå­è¡¨æ ¼æˆ–å±å¹•åƒç´ ï¼Œéƒ½éœ€è¦ä¿å­˜äºŒç»´ä¿¡æ¯ï¼Œæ‰€ä»¥è¿™é‡Œå°±éœ€è¦ç”¨åˆ°çŸ©é˜µã€‚å¯ä»¥å°†çŸ©é˜µçœ‹æˆæ˜¯æ•°ç»„çš„æ•°ç»„ï¼Œæ¯”å¦‚ä¸€ä¸ª3x3çŸ©é˜µï¼Œ ç›¸å½“äºå°±æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º3çš„æ•°ç»„ï¼Œè€Œè¿™ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ åˆæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º3çš„æ•°ç»„ã€‚çŸ©é˜µä¿å­˜åœ¨å†…å­˜ä¸­çš„å½¢å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯è¡Œä¼˜å…ˆå­˜å‚¨ï¼Œå³ä¼˜å…ˆå°†çŸ©é˜µçš„æ¯ä¸€è¡Œä¿å­˜åœ¨å†…å­˜çš„ç›¸é‚»ä½ç½®ï¼Œå½“ä¸€è¡Œä¿å­˜å®Œåï¼Œå†ä¿å­˜ä¸‹ä¸€è¡Œã€‚çŸ©é˜µä¾‹å­![img](https://longlongqin.gitee.io/image_save/images/assets/v2-f4e8c5b992abea5477f71fcf39702a68_hd.jpg)å†…å­˜ä¸­çš„çŸ©é˜µä¸ºäº†è·å–ä¸€ä¸ªå€¼ï¼Œéœ€è¦ä¸¤ä¸ªå°æ ‡ï¼Œæ¯”å¦‚`j[2][1]`è¡¨ç¤ºä»å†…å­˜åœ°å€1000åç§»`2*3+1=7`ä½ç½®ï¼Œå¾—åˆ°å…ƒç´ 12ã€‚è¿™é‡Œåç§»é‡çš„è®¡ç®—æ–¹æ³•æ˜¯`è¡Œç´¢å¼•*åˆ—å…ƒç´ ä¸ªæ•°+åˆ—ç´¢å¼•`ã€‚æˆ‘ä»¬ä¸ä»…èƒ½æ„å»ºäºŒç»´çŸ©é˜µï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºä»»æ„ç»´åº¦çš„çŸ©é˜µã€‚14.4 ç»“æ„ä½“Structç›®å‰æˆ‘ä»¬åªå°†å•ä¸ªæ•°å­—æˆ–å­—ç¬¦å­˜åœ¨æ•°ç»„æˆ–çŸ©é˜µä¸­ï¼Œåœ¨æ•°ç»„ä¸­ä¿å­˜çš„éƒ½æ˜¯ç›¸åŒç±»å‹çš„å…ƒç´ ã€‚å¦‚æœæˆ‘ä»¬æƒ³æŠŠå‡ ä¸ªæœ‰å…³ç³»çš„å˜é‡å­˜å‚¨åœ¨ä¸€èµ·ï¼Œå¹¶ä¸”è¿™äº›å˜é‡éƒ½æ˜¯ä¸åŒç±»å‹çš„ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°ç»“æ„ä½“ã€‚â€¦..16ã€è½¯ä»¶å·¥ç¨‹ä¸ºäº†å†™å¤§å‹ç¨‹åºï¼Œç¨‹åºå‘˜ç”¨å„ç§å·¥å…·å’Œæ–¹æ³•ï¼Œæ‰€æœ‰è¿™äº›å½¢æˆäº†è½¯ä»¶å·¥ç¨‹å­¦ç§‘ã€‚å°†å¤§é¡¹ç›®åˆ†è§£æˆå°å‡½æ•°å¯ä»¥è®©å¾ˆå¤šäººåŒæ—¶å·¥ä½œï¼Œç”±æ­¤ä»–ä»¬æ— éœ€å…³å¿ƒæ•´ä¸ªé¡¹ç›®ï¼Œåªè¦å…³å¿ƒè‡ªå·±çš„å‡½æ•°å°±å¥½äº†ã€‚ä½†æ˜¯è¿™ç§æŠ½è±¡ç¨‹åº¦è¿˜æ˜¯ä¸å¤Ÿï¼Œå¤§å‹é¡¹ç›®ä¸­å¯èƒ½è¿˜æ˜¯ä¼šå­˜åœ¨å¤§é‡çš„å‡½æ•°ï¼Œå› æ­¤éœ€è¦å°†å‡½æ•°æ‰“åŒ…æˆå±‚çº§ï¼Œå°†ç›¸å…³ä»£ç æ”¾åœ¨ä¸€èµ·ï¼Œæ‰“åŒ…æˆå¯¹è±¡ï¼ˆObjectï¼‰ã€‚æ¯”å¦‚æ±½è½¦è½¯ä»¶ä¸­ï¼Œå¯èƒ½æœ‰å‡ ä¸ªå’Œå®šé€Ÿå·¡èˆªæœ‰å…³çš„å‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åŒ…è£…ä¸€ä¸ªâ€œå®šé€Ÿå·¡èˆªå¯¹è±¡â€æ¥æ‰“åŒ…è¿™äº›å‡½æ•°ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œâ€œå®šé€Ÿå·¡èˆªâ€åªæ˜¯å¼•æ“è½¯ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œå¯èƒ½è¿˜æœ‰â€œç«èŠ±å¡ç‚¹ç«â€ã€â€œç‡ƒæ²¹æ³µâ€å’Œâ€œæ•£çƒ­å™¨â€ç­‰ç­‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªâ€œå¼•æ“å¯¹è±¡â€æ¥æ‰“åŒ…æ‰€æœ‰å­å¯¹è±¡ï¼Œå¹¶ä¸”é™¤äº†å­å¯¹è±¡ï¼Œå¼•æ“å¯¹è±¡è¿˜ä¼šåŒ…å«è‡ªå·±çš„å‡½æ•°ï¼Œæ¯”å¦‚â€œå¼€å…³å¼•æ“â€ï¼Œä¹Ÿä¼šæœ‰è‡ªå·±çš„å˜é‡ï¼Œæ¯”å¦‚æ±½è½¦è¡Œé©¶é‡Œç¨‹æ•°ã€‚æ€»çš„æ¥è¯´ï¼Œå¯¹è±¡å¯ä»¥åŒ…å«å…¶ä»–å¯¹è±¡ã€å‡½æ•°å’Œå˜é‡ã€‚ç„¶åå½“ä½ æƒ³è°ƒç”¨ä¸€ä¸ªæ¯”è¾ƒåº•å±‚å¯¹è±¡çš„å‡½æ•°æ—¶ï¼Œåªéœ€è¦å±‚å±‚å‘ä¸‹è°ƒç”¨å°±è¡Œï¼Œæ¯”å¦‚Car.Engine.CruiseControl.setCruiseSpeed(55)ã€‚è¿™ç§å°†å‡½æ•°æ‰“åŒ…æˆå¯¹è±¡çš„æ€æƒ³ç§°ä¸ºé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject Oriented Programmingï¼‰ã€‚ç›¸åŒçš„æƒ³æ³•éƒ½æ˜¯é€šè¿‡å°è£…ç»„ä»¶æ¥éšè—å¤æ‚åº¦ã€‚æŠŠå¤§å‹è½¯ä»¶æ‹†æˆä¸€ä¸ªä¸ªæ›´å°å•å…ƒï¼Œä¼šæ›´é€‚åˆå›¢é˜Ÿåˆä½œã€‚ä½†æ˜¯å„ä¸ªå›¢é˜Ÿä¹‹é—´çš„ä»£ç æ˜¯ç›¸äº’äº¤ç»‡çš„ï¼Œæ¯”å¦‚å›¢é˜ŸAå®ç°çš„æŸä¸ªå‡½æ•°éœ€è¦å›¢é˜ŸBçš„ä»£ç æ”¯æŒï¼Œå› æ­¤å›¢é˜Ÿéœ€è¦æ–‡æ¡£ï¼ˆDocumentationï¼‰æ¥å¸®åŠ©ç†è§£ä»£ç éƒ½åšä»€ä¹ˆï¼Œä»¥åŠå®šä¹‰å¥½çš„ç¨‹åºç¼–ç¨‹æ¥å£ï¼ˆApplication Programming Interfaceï¼ŒAPIï¼‰ã€‚è¿™æ ·ï¼Œå³ä½¿ç¨‹åºå‘˜ä¸çŸ¥é“å…·ä½“çš„å®ç°ç»†èŠ‚ï¼Œä¹Ÿèƒ½ç›´æ¥ä½¿ç”¨APIè°ƒç”¨ç›¸åº”çš„å‡½æ•°ã€‚å¹¶ä¸”APIèƒ½æ§åˆ¶å“ªäº›å‡½æ•°å’Œæ•°æ®æ˜¯å¯¹å¤–å¼€æ”¾çš„ï¼Œå“ªäº›æ˜¯ä»…ä¾›å¯¹è±¡å†…éƒ¨ä½¿ç”¨çš„ï¼Œé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€å¯ä»¥æŒ‡å®šå‡½æ•°æ—¶publicæˆ–privateæ¥è®¾ç½®æƒé™ï¼Œé¿å…ç”¨æˆ·è°ƒç”¨é”™äº†å‡½æ•°é€ æˆbugã€‚å¦‚æœæ ‡å¿—ä¸ºprivateï¼Œè¡¨ç¤ºåªæœ‰åŒä¸€ä¸ªå¯¹è±¡å†…çš„å…¶ä»–å‡½æ•°èƒ½è°ƒç”¨å®ƒï¼Œ æ‰€ä»¥åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåªæœ‰å†…éƒ¨å‡½æ•°æ¯”å¦‚setRPMèƒ½å¤Ÿè°ƒç”¨ fireSparkPlugå‡½æ•°ï¼Œå¹¶ä¸”ç”±äºsetRPMå‡½æ•°æ˜¯publicçš„ï¼Œæ‰€ä»¥å…¶ä»–å¯¹è±¡å¯ä»¥è°ƒç”¨å®ƒã€‚é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒï¼šéšè—å¤æ‚åº¦ï¼Œé€‰æ‹©æ€§çš„å…¬å¸ƒåŠŸèƒ½ã€‚ç°ä»£è½¯ä»¶å¼€å‘è€…ä¼šä½¿ç”¨ä¸“é—¨çš„å·¥å…·æ¥å†™ä»£ç ï¼Œå·¥å…·é‡Œé›†æˆäº†å¾ˆå¤šåŠŸèƒ½å¸®åŠ©å†™ä»£ç ã€æ•´ç†ã€ç¼–è¯‘å’Œæµ‹è¯•ï¼Œè¿™äº›è½¯ä»¶ç§°ä¸ºé›†æˆå¼€å‘ç¯å¢ƒï¼ˆIntegrated Development Environmentsï¼ŒIDEï¼‰ã€‚ç¨‹åºå‘˜ä¸€ä¸ªé‡è¦çš„å·¥ä½œéƒ¨åˆ†æ˜¯ç»™ä»£ç å†™æ–‡æ¡£ï¼Œä¸€èˆ¬æ”¾åœ¨ä¸€ä¸ªå«READMEçš„æ–‡ä»¶ä¸­ï¼Œ æ–‡æ¡£ä¹Ÿèƒ½ç›´æ¥å†™æˆæ³¨é‡Šæ”¾åœ¨æºä»£ç ä¸­ã€‚é™¤äº†IDEï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦è½¯ä»¶å¸®åŠ©å›¢é˜Ÿåä½œï¼Œç§°ä¸ºæºä»£ç ç®¡ç†ï¼ˆSource Controlï¼‰ã€‚æ¯”è¾ƒå¤§å‹çš„å…¬å¸ä¼šå°†ä»£ç æ”¾åœ¨ä¸€ä¸ªä¸­å¿ƒæœåŠ¡å™¨ä¸Šï¼Œç§°ä¸ºä»£ç ä»“åº“ï¼ˆCode Repositoryï¼‰ã€‚å½“ç¨‹åºå‘˜æƒ³æ”¹ä¸€æ®µä»£ç æ—¶ï¼Œå¯ä»¥check outè·å¾—ä»£ç ï¼Œç„¶åå¼€å‘è€…åœ¨è‡ªå·±ç”µè„‘ä¸Šç¼–è¾‘ä»£ç ï¼Œå½“ä»£ç æ²¡æœ‰é—®é¢˜ï¼Œæ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡æ—¶ï¼Œå°±èƒ½å°†ä»£ç æ”¾å›ä»£ç ä»“åº“äº†ï¼Œç§°ä¸ºæäº¤ï¼ˆCommitï¼‰ã€‚å½“ä»£ç è¢«check outï¼Œå¹¶ä¸”å¯èƒ½è¢«æ”¹è¿‡äº†ï¼Œå…¶ä»–å¼€å‘è€…å°±ä¸ä¼šåŠ¨è¿™æ®µä»£ç ï¼Œé¿å…ä»£ç å†²çªå’Œé‡å¤åŠ³åŠ¨ã€‚ä»£ç çš„ä¸»ç‰ˆæœ¬ï¼ˆmasterï¼‰åº”è¯¥æ€»æ˜¯ç¼–è¯‘æ­£å¸¸ï¼Œå°½å¯èƒ½å°‘bugã€‚å¹¶ä¸”æºä»£ç ç®¡ç†å¯ä»¥è·Ÿè¸ªæ‰€æœ‰å˜åŒ–ï¼Œå½“å‡ºç°bugæ—¶ï¼Œå…¨éƒ¨æˆ–éƒ¨åˆ†ä»£ç å¯ä»¥å›æ»šï¼ˆRolled Backï¼‰åˆ°ä¹‹å‰çš„ç¨³å®šç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¹Ÿèƒ½è®°å½•ä¸‹ä»£ç ä¿®æ”¹è€…ã€‚æµ‹è¯•ä»£ç ä¸€èˆ¬ç”±ä¸ªäººæˆ–å°å›¢é˜Ÿå®Œæˆï¼Œæµ‹è¯•å¯ç»Ÿç§°ä¸ºè´¨é‡ä¿è¯æµ‹è¯•ï¼ˆQuality Assurance Testingï¼ŒQAï¼‰ã€‚â€œalpha versionâ€è½¯ä»¶ä¸€èˆ¬å¾ˆç²—ç³™ï¼Œé”™è¯¯å¾ˆå¤šï¼Œç»å¸¸åªåœ¨å…¬å¸å†…éƒ¨æ“ä½œï¼Œè€Œâ€œbeta versionâ€è½¯ä»¶æŒ‡çš„æ˜¯è½¯ä»¶æ¥è¿‘å®Œæˆï¼Œä½†ä¸æ˜¯å®Œå…¨æµ‹è¯•é€šè¿‡ï¼Œå…¬å¸æœ‰æ—¶ä¼šå‘å…¬ä¼—å‘å¸ƒbetaç‰ˆï¼Œä»¥å¸®åŠ©å‘ç°é—®é¢˜ï¼Œç”¨æˆ·å°±åƒå…è´¹çš„QAå›¢é˜Ÿã€‚17ã€é›†æˆç”µè·¯&amp;æ‘©å°”å®šå¾‹è¿‡å»è®¡ç®—æœºçš„é£é€Ÿå‘å±•ï¼Œå¼ºçƒˆä¾èµ–äºç¡¬ä»¶çš„å‘å±•ã€‚å¤§çº¦1940å¹´ä»£-1960å¹´ä»£ä¸­æœŸï¼Œè®¡ç®—æœºéƒ½ç”±ç‹¬ç«‹éƒ¨ä»¶ç»„æˆï¼Œç§°ä¸ºåˆ†ç«‹å…ƒä»¶ï¼ˆDiscrete Componentsï¼‰ï¼Œç„¶åä¸åŒç»„ä»¶å†ç”¨çº¿è¿åœ¨ä¸€èµ·ã€‚æ¯”å¦‚ENIACæœ‰1ä¸‡7åƒå¤šä¸ªçœŸç©ºç®¡ï¼Œ7ä¸‡ä¸ªç”µé˜»ï¼Œ1ä¸‡ä¸ªç”µå®¹ï¼Œ7åƒä¸ªäºŒæç®¡ï¼Œ5ç™¾ä¸‡ä¸ªæ‰‹å·¥ç„Šç‚¹ã€‚å¦‚æœæƒ³è¦æå‡æ€§èƒ½ï¼Œå°±è¦åŠ æ›´å¤šéƒ¨ä»¶ï¼Œè¿™å°±å¯¼è‡´äº†æ›´å¤šæ›´å¤æ‚çš„ç”µçº¿ï¼Œè¿™ä¸ªç§°ä¸ºæ•°å­—æš´æ”¿ï¼ˆTyranny of Numbersï¼‰é—®é¢˜ã€‚åˆ°1950å¹´ä»£ä¸­æœŸï¼Œæ™¶ä½“ç®¡å¼€å§‹å•†ä¸šåŒ–ï¼Œå¼€å§‹ç”¨äºè®¡ç®—æœºä¸­ï¼Œæ™¶ä½“ç®¡æ¯”ç”µå­ç®¡æ›´å°æ›´å¿«æ›´å¯é ï¼Œä½†æ™¶ä½“ç®¡ä¾ç„¶æ˜¯åˆ†ç«‹å…ƒä»¶ã€‚1959å¹´ï¼ŒIBMæŠŠ709è®¡ç®—æœºä»åŸæœ¬çš„ç”µå­ç®¡å…¨éƒ¨æ¢æˆæ™¶ä½“ç®¡ï¼Œè¯ç”Ÿäº†IBM 7090ï¼Œé€Ÿåº¦å¿«6å€ï¼Œä»·æ ¼åªæœ‰ä¸€åŠã€‚æ™¶ä½“ç®¡æ ‡å¿—ç€è®¡ç®—æœº2.0æ—¶ä»£çš„åˆ°æ¥ï¼Œä½†æ˜¯æ™¶ä½“ç®¡çš„å‡ºç°è¿˜æ˜¯æ²¡æœ‰è§£å†³æ•°å­—æš´æ”¿çš„é—®é¢˜ï¼Œæœ‰åå‡ ä¸‡ä¸ªç‹¬ç«‹å…ƒä»¶çš„è®¡ç®—æœºä¸ä½†éš¾è®¾è®¡ï¼Œè€Œä¸”éš¾ç”Ÿäº§ã€‚é›†æˆç”µè·¯ï¼ˆIntegrated Circuitsï¼ŒICï¼‰ï¼šåˆ°1960å¹´ä»£ï¼Œè¿™ä¸ªé—®é¢˜çš„ä¸¥é‡æ€§è¾¾åˆ°é¡¶ç‚¹ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯å¼•å…¥ä¸€å±‚æ–°æŠ½è±¡ï¼Œå°è£…å¤æ‚æ€§ã€‚çªç ´æ€§è¿›å±•åœ¨1958å¹´ï¼Œä¸å…¶æŠŠå¤šä¸ªç‹¬ç«‹éƒ¨ä»¶ç”¨ç”µçº¿è¿èµ·æ¥ï¼Œæ‹¼è£…å‡ºè®¡ç®—æœºï¼Œæˆ‘ä»¬æŠŠå¤šä¸ªç»„ä»¶åŒ…åœ¨ä¸€èµ·ï¼Œå˜æˆä¸€ä¸ªæ–°çš„ç‹¬ç«‹ç»„ä»¶ï¼Œè¿™ä¸ªç§°ä¸ºé›†æˆç”µè·¯ï¼ˆIntegrated Circuitsï¼ŒICï¼‰ã€‚å‡ ä¸ªæœˆåï¼Œä»™ç«¥åŠå¯¼ä½“å°±è®©é›†æˆç”µè·¯å˜æˆç°å®ï¼Œä¹‹å‰ä½¿ç”¨é”—æ¥åšé›†æˆç”µè·¯ï¼Œä½†æ˜¯é”—å¾ˆç¨€å°‘ä¸”ä¸ç¨³å®šï¼Œä»™ç«¥åŠå¯¼ä½“ä½¿ç”¨ç¡…ï¼Œå› ä¸ºç¡…çš„è•´è—é‡ä¸°å¯Œï¼Œä¹Ÿæ›´ç¨³å®šå¯é ã€‚èµ·åˆï¼Œä¸€ä¸ªICåªæœ‰å‡ ä¸ªæ™¶ä½“ç®¡ï¼Œä½†æ˜¯ä¹Ÿè¶³ä»¥å°†é€»è¾‘é—¨å°è£…æˆç‹¬ç«‹ç»„ä»¶ï¼Œå¯ä»¥ç»„åˆå‡ºæ— æ•°ç§è®¾è®¡ï¼Œä½†æ˜¯æœ€ç»ˆè¿˜æ˜¯è¦è¿èµ·æ¥ï¼Œåˆ›é€ å‡ºæ›´å¤§æ›´å¤æ‚çš„ç”µè·¯ï¼Œæ¯”å¦‚è®¡ç®—æœºã€‚æ‰€ä»¥åˆ›é€ å‡ºäº†å°åˆ·ç”µè·¯æ¿ï¼ˆPrinted Circuit Boardsï¼ŒPCBï¼‰ï¼Œå¯ä»¥å¤§è§„æ¨¡ç”Ÿäº§ï¼Œæ— éœ€ç„Šæ¥æˆ–ç”¨ä¸€å †çº¿ï¼Œå®ƒé€šè¿‡èš€åˆ»é‡‘å±çº¿çš„æ–¹å¼å°†é›¶ä»¶è¿æ¥åˆ°ä¸€èµ·ã€‚æŠŠPCBå’ŒICç»“åˆä½¿ç”¨ï¼Œå¯ä»¥å¤§å¹…å‡å°‘ç‹¬ç«‹ç»„ä»¶å’Œç”µçº¿ï¼Œä½†åšåˆ°ç›¸åŒçš„åŠŸèƒ½ï¼Œè€Œä¸”æ›´å°æ›´ä¾¿å®œæ›´å¯é ã€‚ä¸è¿‡å³ä½¿ç»„ä»¶å†å°ï¼Œå¡5ä¸ªä»¥ä¸Šçš„æ™¶ä½“ç®¡è¿˜æ˜¯å¾ˆå›°éš¾ï¼Œä¸ºäº†å®ç°æ›´å¤æ‚è®¾è®¡ï¼Œå‡ºç°äº†å…¨æ–°çš„åˆ¶ä½œå·¥è‰ºâ€”â€”å…‰åˆ»ï¼ˆPhotolithographyï¼‰ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç”¨å…‰æŠŠå¤æ‚å›¾æ¡ˆå°åˆ°ææ–™ä¸Šï¼Œæ¯”å¦‚åŠå¯¼ä½“ã€‚å®ƒåªæœ‰å‡ ä¸ªåŸºç¡€æ“ä½œï¼Œä½†æ˜¯å¯ä»¥åˆ¶ä½œå‡ºå¤æ‚ç”µè·¯ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»ä¸€ç‰‡ç¡…å¼€å§‹ï¼Œç§°ä¸ºæ™¶åœ†ï¼ˆWaferï¼‰ï¼Œé•¿å¾—å’Œè–„é¥¼å¹²ä¸€æ ·ã€‚å¹¶ä¸”ç¡…æ˜¯åŠå¯¼ä½“ï¼Œæœ‰æ—¶å¯¼ç”µæœ‰æ—¶ä¸å¯¼ç”µï¼Œæˆ‘ä»¬å°±å¯ä»¥æ§åˆ¶å¯¼ç”µæ—¶æœºï¼Œæ‰€ä»¥ç¡…æ˜¯åšæ™¶ä½“ç®¡çš„ç»ä½³ææ–™ã€‚æˆ‘ä»¬å¯ä»¥ç”¨æ™¶åœ†åšåŸºç¡€ï¼ŒæŠŠå¤æ‚é‡‘å±ç”µè·¯æ”¾ä¸Šå»ï¼Œæ¥é›†æˆæ‰€æœ‰ä¸œè¥¿ã€‚åœ¨ç¡…ç‰‡é¡¶éƒ¨åŠ ä¸€å±‚è–„è–„çš„æ°§åŒ–å±‚ï¼ˆOxide Layerï¼‰ä½œä¸ºä¿æŠ¤å±‚ï¼Œç„¶ååŠ ä¸€å±‚ç‰¹æ®ŠåŒ–å­¦å“ç§°ä¸ºå…‰åˆ»èƒ¶ï¼ˆPhotoresistï¼‰ï¼Œå…‰åˆ»èƒ¶è¢«å…‰ç…§å°„åï¼Œå°±å˜å¾—å¯æº¶ï¼Œå¯ä»¥ç”¨ä¸€ç§ç‰¹æ®ŠåŒ–å­¦è¯å‰‚æ´—æ‰ã€‚ç„¶åæˆ‘ä»¬ä¼šåœ¨å…‰åˆ»èƒ¶ä¸ŠåŠ ä¸€å±‚å…‰æ©è†œï¼ˆPhotomaskï¼‰ï¼Œå½“ç”¨å¼ºå…‰ç…§å°„æ—¶ï¼ŒæŒ¡ä½å…‰çš„éƒ¨åˆ†å…‰åˆ»èƒ¶å°±ä¸ä¼šå˜åŒ–ï¼Œè€Œå…‰ç…§å°„åˆ°çš„åœ°æ–¹ï¼Œå…‰åˆ»èƒ¶å°±ä¼šå‘ç”ŸåŒ–å­¦å˜åŒ–ï¼Œæ´—æ‰å˜åŒ–çš„å…‰åˆ»èƒ¶åï¼Œå°±ä¼šæš´éœ²å‡ºéƒ¨åˆ†æ°§åŒ–å±‚ã€‚ç„¶åé€šå¸¸ç”¨é…¸èƒ½æ´—æ‰æ°§åŒ–å±‚æš´éœ²å‡ºçš„éƒ¨åˆ†ï¼Œå°±èƒ½èš€åˆ»åˆ°ç¡…å±‚ã€‚ç„¶åå†ç”¨å¦ä¸€ç§åŒ–å­¦è¯•å‰‚æ¸…æ´—æ‰å‰©ä½™çš„å…‰åˆ»èƒ¶ï¼Œè¿™æ ·åªå‰©ä¸‹æ°§åŒ–å±‚å’Œæ™¶åœ†äº†ã€‚æˆ‘ä»¬æƒ³ä¿®æ”¹ç¡…æš´éœ²å‡ºæ¥çš„åŒºåŸŸï¼Œè®©å®ƒä»¬å¯¼ç”µæ€§æ›´å¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨æºæ‚ï¼ˆDopingï¼‰ï¼Œé€šè¿‡å°†ç£·æ¸—é€è¿›æš´éœ²çš„ç¡…ï¼Œæ¥æ”¹å˜ç”µå­¦æ€§è´¨ã€‚æˆ‘ä»¬è¿˜éœ€è¦å‡ è½®å…‰åˆ»æ³•æ¥åšæ™¶ä½“ç®¡ã€‚è¿˜æ˜¯å åŠ ä¸Šæ°§åŒ–å±‚ã€å…‰åˆ»èƒ¶å’Œæ–°çš„å…‰æ©è†œï¼Œè¿™æ ·å°±èƒ½åœ¨æºæ‚åŒºåŸŸä¸Šæ–¹å¼€ç¼ºå£ï¼Œç„¶åè¿›è¡Œæ¸…æ´—èš€åˆ»ï¼Œå†ç”¨å¦ä¸€ç§å…ƒç´ è¿›è¡Œæºæ‚ï¼ŒæŠŠç¡…è½¬æ¢æˆå¦ä¸€ç§å½¢å¼ã€‚ä¸ºäº†æ§åˆ¶æ·±åº¦ï¼Œæ—¶æœºå¾ˆé‡è¦ï¼Œä¸è¦è¶…è¿‡ä¹‹å‰æºæ‚çš„åŒºåŸŸï¼Œè¿™æ ·æ‰€æœ‰éœ€è¦çš„ç»„ä»¶éƒ½æœ‰äº†ã€‚æœ€åï¼Œåœ¨æ°§åŒ–å±‚ä¸Šåšé€šé“ï¼Œè¿™æ ·å¯ä»¥ç”¨ç»†å°é‡‘å±å¯¼çº¿è¿æ¥ä¸åŒæ™¶ä½“ç®¡ã€‚é¦–å…ˆç”¨å…‰åˆ»èƒ¶å’Œå…‰æ©è†œï¼Œåœ¨æ°§åŒ–å±‚ä¸Šèš€åˆ»å‡ºå°é€šé“ã€‚ç„¶åç”¨æ–°çš„å¤„ç†æ–¹æ³•ç§°ä¸ºé‡‘å±åŒ–ï¼ˆMetalizationï¼‰ï¼Œåœ¨æ°§åŒ–å±‚ä¸Šæ”¾ä¸€å±‚è–„è–„çš„é‡‘å±ï¼Œæ¯”å¦‚é“æˆ–é“œï¼Œå†åŠ ä¸Šå…‰åˆ»èƒ¶å’Œå…‰æ©è†œï¼Œç„¶åèæ‰æš´éœ²çš„å…‰åˆ»èƒ¶ï¼Œæš´éœ²å‡ºé‡‘å±ã€‚æœ€ç»ˆæ¸…æ´—ï¼Œåªä¿ç•™æ™¶åœ†ã€æ°§åŒ–å±‚å’Œé‡‘å±åŒ–ï¼Œè¿™æ ·å°±åšå‡ºäº†ä¸€ä¸ªæ™¶ä½“ç®¡ã€‚å®ƒæœ‰ä¸‰æ ¹çº¿åˆ†åˆ«è¿æ¥ç€ç¡…çš„ä¸‰ä¸ªä¸åŒåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸçš„æºæ‚æ–¹å¼ä¸åŒï¼Œè¿™ä¸ªå«åŒæå‹æ™¶ä½“ç®¡ï¼ˆBipolar Junction Transistorï¼‰ã€‚æ™¶ä½“ç®¡ç›¸åŒæ–¹æ³•ï¼Œå…‰åˆ»å¯ä»¥åœ¨ä¸€ç‰‡ç¡…ä¸Šåˆ¶ä½œå…¶ä»–ç”µå­å…ƒä»¶ï¼Œæ¯”å¦‚ç”µé˜»ç”µå®¹ï¼Œè€Œä¸”ç›¸äº’è¿æ¥çš„ç”µè·¯ä¹Ÿåšå¥½äº†ã€‚å¹¶ä¸”é€šè¿‡è°ƒèŠ‚å…‰æ©è†œå’Œå…‰æºä¹‹é—´çš„è·ç¦»ï¼Œå…‰å¯ä»¥æŠ•å°„æˆä»»æ„è§’åº¦ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå…‰æ©è†œèšç„¦åˆ°æå°çš„åŒºåŸŸï¼Œåˆ¶ä½œå‡ºéå¸¸ç²¾ç»†çš„ç»†èŠ‚ï¼Œè¿™æ ·ä¸€ç‰‡æ™¶åœ†å°±èƒ½åšå‡ºå¾ˆå¤šICï¼Œæ•´å—éƒ½åšå®Œåï¼Œå°±å¯ä»¥åˆ‡å‰²ç„¶ååŒ…è¿›å¾®å‹èŠ¯ç‰‡ä¸­ï¼ŒèŠ¯ç‰‡çš„æ ¸å¿ƒéƒ½æ˜¯ä¸€å°ç‰‡ICã€‚éšç€å…‰åˆ»æŠ€æœ¯å‘å±•ï¼Œæ™¶ä½“ç®¡å˜å°ï¼Œå¯†åº¦å˜é«˜ã€‚1960å¹´åˆï¼ŒICå¾ˆå°‘èƒ½è¶…è¿‡5ä¸ªæ™¶ä½“ç®¡ï¼Œä½†åˆ°äº†1960å¹´ä¸­æœŸï¼Œå¸‚åœºä¸Šå·²ç»å¼€å§‹å‡ºç°è¶…è¿‡100ä¸ªæ™¶ä½“ç®¡çš„ICã€‚æ‘©å°”å®šå¾‹ï¼ˆMooreâ€™s Lawï¼‰:1965å¹´ï¼Œæˆˆç™»Â·æ‘©å°”çœ‹åˆ°äº†å‘å±•è¶‹åŠ¿ï¼Œæå‡ºæ‘©å°”å®šå¾‹ï¼ˆMooreâ€™s Lawï¼‰ï¼šæ¯ä¸¤å¹´å·¦å³ï¼Œå¾—ç›Šäºææ–™å’Œåˆ¶é€ æŠ€æœ¯çš„å‘å±•ï¼ŒåŒæ ·å¤§å°çš„ç©ºé—´ï¼Œèƒ½å¡è¿›ä¸¤å€é‡çš„æ™¶ä½“ç®¡ã€‚æ™¶ä½“ç®¡æ›´å°å¯†åº¦æ›´é«˜ï¼Œè¦ç§»åŠ¨çš„ç”µè·é‡å°±è¶Šå°‘ï¼Œèƒ½å¿«é€Ÿåˆ‡æ¢çŠ¶æ€ï¼Œè€—ç”µæ›´å°‘ã€‚å¹¶ä¸”ç”µè·¯æ›´ç´§å‡‘ï¼Œæ„å‘³ç€ä¿¡å·å»¶è¿Ÿæ›´ä½ï¼Œå¯¼è‡´æ—¶é’Ÿé€Ÿåº¦æ›´å¿«ã€‚é›†æˆç”µè·¯çš„å‡ºç°ï¼Œå°¤å…¶æ˜¯ç”¨æ¥åšå¾®å¤„ç†å™¨ï¼Œå¼€å¯äº†è®¡ç®—æœº3.0æ—¶ä»£ã€‚åˆ°äº†2010å¹´ï¼Œä¸€ä¸ªICä¸­æœ‰10äº¿ä¸ªæ™¶ä½“ç®¡ã€‚ä¸ºäº†è¾¾åˆ°è¿™ç§å¯†åº¦ï¼Œå…‰åˆ»çš„åˆ†è¾¨ç‡ä»å¤§çº¦ä¸€ä¸‡çº³ç±³ï¼Œå‘å±•åˆ°å¦‚ä»Šçš„14çº³ç±³ã€‚ç°ä»£å·¥ç¨‹å¸ˆè®¾è®¡ç”µè·¯æ—¶ï¼Œä¸æ˜¯æ‰‹å·¥ä¸€ä¸ªä¸ªè®¾è®¡æ™¶ä½“ç®¡çš„ï¼Œä»1970å¹´ä»£å¼€å§‹ï¼Œè¶…å¤§è§„æ¨¡é›†æˆï¼ˆVery-large-scale Integrationï¼ŒVLSIï¼‰è½¯ä»¶ç”¨æ¥è‡ªåŠ¨ç”ŸæˆèŠ¯ç‰‡è®¾è®¡ã€‚ç”¨æ¯”å¦‚é€»è¾‘ç»¼åˆï¼ˆLogic Synthesisï¼‰å¯ä»¥æ”¾ä¸€æ•´ä¸ªé«˜çº§ç»„ä»¶ï¼Œæ¯”å¦‚å†…å­˜ç¼“å­˜ï¼Œè½¯ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆç”µè·¯ï¼Œåšåˆ°å°½å¯èƒ½é«˜æ•ˆï¼Œè®¸å¤šäººè®¤ä¸ºè¿™æ˜¯è®¡ç®—æœº4.0æ—¶ä»£çš„å¼€å§‹ã€‚ä½†æ˜¯æ‘©å°”å®šå¾‹ç°åœ¨è¿æ¥äº†ç»ˆç»“ï¼Œè¿›ä¸€æ­¥åšå°ï¼Œä¼šè¿æ¥ä¸¤ä¸ªé—®é¢˜ï¼šç”¨å…‰æ©è†œæŠŠå›¾æ¡ˆå¼„åˆ°æ™¶åœ†ä¸Šï¼Œå› ä¸ºå…‰çš„æ³¢é•¿ï¼Œç²¾åº¦å·²ç»åˆ°è¾¾æé™ã€‚æ‰€ä»¥ç§‘å­¦å®¶åœ¨ç ”åˆ¶æ³¢é•¿æ›´çŸ­çš„å…‰æºï¼ŒæŠ•å°„æ›´å°çš„å½¢çŠ¶ã€‚å½“æ™¶ä½“ç®¡éå¸¸å°ï¼Œç”µæä¹‹é—´å¯èƒ½åªè·ç¦»å‡ ä¸ªåŸå­ï¼Œç”µå­å°±ä¼šè·³è¿‡é—´éš™ï¼Œç§°ä¸ºé‡å­éš§é“è´¯ç©¿ï¼ˆQuantum Tunnelingï¼‰ï¼Œç”±æ­¤æ™¶ä½“ç®¡å°±ä¸èƒ½æ­£å¸¸å·¥ä½œäº†ã€‚18ã€æ“ä½œç³»ç»Ÿ40 50å¹´ä»£çš„ç”µè„‘ï¼Œæ¯æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªç¨‹åºï¼Œç¨‹åºå‘˜åœ¨æ‰“å­”çº¸ä¸Šå†™ç¨‹åºï¼Œç„¶åå†æ”¾å…¥è®¡ç®—æœºä¸­è¿›è¡Œè®¡ç®—ï¼Œä¸€å¼€å§‹è®¡ç®—æœºé€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œé€šå¸¸ä¸€ä¸ªç¨‹åºéœ€è¦è¿è¡Œå‡ å¤©æ—¶é—´ï¼Œæ‰€ä»¥æ”¾ç¨‹åºçš„æ—¶é—´è¿˜èƒ½å¿å—ã€‚ä½†æ˜¯éšç€è®¡ç®—æœºè¿ç®—é€Ÿåº¦çš„å‘Šè¯‰å‘å±•åï¼Œæ”¾ç¨‹åºçš„æ—¶é—´æ¯”ç¨‹åºè¿è¡Œæ—¶é—´è¿˜è¦é•¿ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ç§æ–¹å¼ï¼Œè®©è®¡ç®—æœºè‡ªåŠ¨è¿è¡Œï¼Œäºæ˜¯è¯ç”Ÿäº†æ“ä½œç³»ç»Ÿï¼ˆOperation Systemsï¼ŒOSï¼‰ã€‚æ“ä½œç³»ç»Ÿå…¶å®ä¹Ÿæ˜¯ç¨‹åºï¼Œä½†å®ƒæœ‰æ“ä½œç¡¬ä»¶çš„ç‰¹æ®Šæƒé™ï¼Œå¯ä»¥è¿è¡Œå’Œç®¡ç†å…¶ä»–ç¨‹åºã€‚æ“ä½œç³»ç»Ÿä¸€èˆ¬æ˜¯å¼€æœºç¬¬ä¸€ä¸ªå¯åŠ¨çš„ç¨‹åºï¼Œç„¶åå…¶ä»–æ‰€æœ‰ç¨‹åºéƒ½ç”±æ“ä½œç³»ç»Ÿå¯åŠ¨ã€‚ä»1950å¹´ä»£å¼€å§‹æœ‰æ“ä½œç³»ç»Ÿï¼Œé‚£æ—¶è®¡ç®—æœºå¼€å§‹å˜å¾—æ›´åŠ å¼ºå¤§ï¼Œ ç¬¬ä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸»è¦åŠ å¼ºäº†ç¨‹åºåŠ è½½æ–¹å¼ï¼Œå–ä»£äº†æ‰‹å·¥åŠ è½½ç¨‹åºçš„è¿‡ç¨‹ã€‚ä¹‹å‰åªèƒ½ä¸€æ¬¡ç»™ä¸€ä¸ªç¨‹åºï¼Œç°åœ¨å¯ä»¥ä¸€æ¬¡å¤šä¸ªç¨‹åºï¼Œå½“è®¡ç®—æœºè¿è¡Œå®Œä¸€ä¸ªç¨‹åºåï¼Œå°±ä¼šè‡ªåŠ¨è¿è¡Œä¸‹ä¸€ä¸ªç¨‹åºï¼Œè¿™æ ·å°±ä¸ç”¨æµªè´¹æ—¶é—´æ‰¾ä¸‹ä¸€ä¸ªç¨‹åºçš„çº¸å¡ï¼Œè¿™ç§°ä¸ºæ‰¹å¤„ç†ï¼ˆBatch Processingï¼‰ã€‚éšç€è®¡ç®—æœºçš„å‘å±•ï¼Œè®¡ç®—æœºå‡ºç°åœ¨å¤§å­¦å’Œæ”¿åºœåŠå…¬å®¤ï¼Œäººä»¬å¼€å§‹åˆ†äº«è½¯ä»¶ï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜ã€‚åœ¨å“ˆä½›1å·å’ŒENIACé‚£ä¸ªæ—¶ä»£ï¼Œè®¡ç®—éƒ½æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œç¨‹åºå‘˜åªéœ€è¦ç»™ç‰¹å®šä¸€å°æœºå™¨å†™ä»£ç ï¼Œå…¶ä¸­å¤„ç†å™¨ã€è¯»å¡å™¨å’Œæ‰“å°æœºéƒ½æ˜¯å·²çŸ¥å¹¶ä¸”ä¸ä¼šæ”¹å˜çš„ã€‚ä½†æ˜¯éšç€è®¡ç®—æœºè¶Šæ¥è¶Šæ™®éï¼Œè®¡ç®—æœºé…ç½®å¹¶ä¸æ€»æ˜¯ç›¸åŒçš„ï¼Œæ¯”å¦‚è®¡ç®—æœºå¯èƒ½æœ‰ç›¸åŒçš„CPUä½†æ˜¯ä¸åŒçš„æ‰“å°æœºç­‰ç­‰ï¼Œè¿™æ ·ç¨‹åºå‘˜ä¸ä»…è¦æ‹…å¿ƒç¨‹åºï¼Œè¿˜è¦æ‹…å¿ƒç¨‹åºæ€ä¹ˆå’Œä¸åŒå‹å·çš„æ‰“å°æœºè¿›è¡Œäº¤äº’ï¼Œä»¥åŠè®¡ç®—æœºè¿ç€çš„å…¶ä»–è®¾å¤‡ï¼Œç»Ÿç§°ä¸ºå¤–éƒ¨è®¾å¤‡ï¼ˆPeripheralsï¼‰ã€‚å’Œæ—©æœŸçš„å¤–éƒ¨è®¾å¤‡äº¤äº’æ˜¯éå¸¸åº•å±‚çš„ï¼Œç¨‹åºå‘˜éœ€è¦äº†è§£è®¾å¤‡çš„ç¡¬ä»¶ç»†èŠ‚ï¼Œä½†æ˜¯ç¨‹åºå‘˜åˆå¾ˆå°‘èƒ½æ‹¿åˆ°æ‰€æœ‰å‹å·çš„è®¾å¤‡æ¥æµ‹è¯•ä»£ç ã€‚æ‰€ä»¥ä¸€èˆ¬æ˜¯é˜…è¯»æ‰‹å†Œç„¶åå°½å¯èƒ½ç¼–å†™ä»£ç ã€‚æ‰€ä»¥ä¸ºäº†èƒ½å¤Ÿæ›´å¥½åœ°å†™è½¯ä»¶ï¼Œæ“ä½œç³»ç»Ÿå°±å……å½“è½¯ä»¶å’Œç¡¬ä»¶ä¹‹é—´çš„åª’ä»‹ã€‚æ›´å…·ä½“çš„ï¼Œæ“ä½œç³»ç»Ÿæä¾›APIæ¥æŠ½è±¡ç¡¬ä»¶ï¼Œå«è®¾å¤‡é©±åŠ¨ç¨‹åºï¼ˆDevice Driversï¼‰ã€‚è¿™æ ·ç¨‹åºå‘˜å¯ä»¥é€šè¿‡æ ‡å‡†åŒ–æœºåˆ¶å’Œè¾“å…¥è¾“å‡ºç¡¬ä»¶ï¼ˆInput &amp; Outputï¼ŒI/Oï¼‰è¿›è¡Œäº¤äº’ï¼Œè€Œæ— éœ€å…³æ³¨ç¡¬ä»¶å‹å·ä»¥åŠå…·ä½“ç¡¬ä»¶ç»†èŠ‚ã€‚åˆ°1950å¹´ä»£æœ«å°¾ï¼Œç”µè„‘å·²ç»è¿è¡Œéå¸¸å¿«äº†ï¼Œå¤„ç†å™¨ç»å¸¸éœ€è¦ç­‰å¾…è¾ƒæ…¢çš„æœºæ¢°è®¾å¤‡ï¼ˆæ¯”å¦‚æ‰“å°æœºå’Œè¯»å¡å™¨ï¼‰ï¼Œç¨‹åºå°±é˜»å¡åœ¨I/Oä¸Šï¼Œè€Œå¤„ç†å™¨ä»€ä¹ˆéƒ½æ²¡æœ‰è¿›è¡Œå¤„ç†ã€‚è‹±å›½æ›¼å½»æ–¯ç‰¹å¤§å­¦å¼€å§‹ç ”å‘ä¸–ç•Œä¸Šç¬¬ä¸€å°è¶…çº§è®¡ç®—æœºAtlasï¼Œç”±äºæœºå™¨è¿ç®—éå¸¸å¿«ï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§æ–¹å¼æ¥å°½å¯èƒ½åˆ©ç”¨æ›´å¤šçš„ç®—åŠ›ã€‚ä»–ä»¬äº1962å¹´å¹´è®¾è®¡äº†ä¸€ä¸ªç¨‹åºå«Atlas Supervisorï¼Œä½¿å¾—æ“ä½œç³»ç»Ÿä¸ä»…èƒ½è¿›è¡Œæ‰¹å¤„ç†ï¼Œå¹¶ä¸”é€šè¿‡è°ƒåº¦ï¼ˆSchedulingï¼‰è¿˜èƒ½åœ¨å•ä¸ªCPUä¸ŠåŒæ—¶è¿è¡Œå‡ ä¸ªç¨‹åºã€‚æ¯”å¦‚æˆ‘ä»¬éœ€è¦è°ƒç”¨printå‡½æ•°è®©Atlasæ‰“å°ä¸€ä¸ªå˜é‡å€¼ï¼Œç”±äºæ‰“å°æœºæ¯”CPUæ…¢å¾ˆå¤šï¼Œæ‰€ä»¥printå‡½æ•°éœ€è¦è¿è¡Œæ¯”è¾ƒé•¿çš„æ—¶é—´ã€‚ä¸å…¶ç­‰å¾…æ‰“å°æœºå®Œæˆæ‰“å°ï¼ŒAtlasä¼šå°†è¯¥ç¨‹åºè¿›è¡Œä¼‘çœ ï¼Œç„¶åè¿è¡Œå…¶ä»–ç­‰å¾…çš„å¹¶ä¸”å¯è¿è¡Œçš„ç¨‹åºã€‚æœ€ç»ˆå½“æ‰“å°æœºæ‰“å°å®Œåï¼Œä¼šæŠ¥å‘Šç»™Atlasï¼Œåˆ™Atlasä¼šå°†ä¹‹å‰çš„ç¨‹åºæ ‡è®°ä¸ºâ€œå¯è¿è¡Œâ€çŠ¶æ€ï¼Œç„¶ååœ¨æŸä¸ªæ—¶åˆ»ä¼šå®‰æ’ç»™CPUç»§ç»­è¿è¡Œprintå‡½æ•°ä¸‹ä¸€è¡Œä»£ç ã€‚ç”±æ­¤ï¼ŒAtlasèƒ½å¤Ÿåœ¨CPUä¸Šè¿è¡Œä¸€ä¸ªç¨‹åºï¼ŒåŒæ—¶å¦ä¸€ä¸ªç¨‹åºåœ¨æ‰“å°æ•°æ®ï¼ˆè¿™é‡Œæ˜¯è®©æ‰“å°æœºè‡ªå·±åœ¨æ‰“å°ï¼Œæ‰€ä»¥æ— éœ€CPUè¿›è¡Œå‚ä¸ï¼‰ï¼ŒåŒæ—¶å¦ä¸€ä¸ªç¨‹åºè¯»æ•°æ®ï¼ˆè¿™é‡Œåªéœ€è¦ä½¿ç”¨è¯»å¡å™¨ï¼Œä¸éœ€è¦CPUï¼‰ã€‚Atlasé…æœ‰4å°è¯»å–å™¨ã€4å°æ‰“å°æœºå’Œ8ä¸ªç£å¸¦é©±åŠ¨å™¨ã€‚ä½¿å¤šä¸ªç¨‹åºå¯ä»¥åŒæ—¶è¿è¡Œï¼Œåœ¨å•ä¸ªCPUä¸Šå…±äº«æ—¶é—´ã€‚æ“ä½œç³»ç»Ÿçš„è¿™ç§èƒ½åŠ›ç§°ä¸ºå¤šä»»åŠ¡å¤„ç†ï¼ˆMultitaskingï¼‰ã€‚ä½†æ˜¯åŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åºå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œæ¯ä¸ªç¨‹åºéƒ½ä¼šå ç”¨ä¸€äº›å†…å­˜ï¼Œå½“åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç¨‹åºåï¼Œæˆ‘ä»¬ä¸èƒ½ä¸¢å¤±è¿™äº›å†…å­˜ä¸­çš„æ•°æ®ã€‚æ‰€ä»¥æˆ‘ä»¬ç»™æ¯ä¸ªç¨‹åºåˆ†é…ä¸“å±å†…å­˜å—ï¼Œæ¯”å¦‚æˆ‘ä»¬è®¡ç®—æœºä¸€å…±æœ‰10000ä¸ªå†…å­˜åœ°å€ï¼Œç„¶åç¨‹åºAåˆ†é…åˆ°äº†0-999çš„å†…å­˜åœ°å€ï¼Œç¨‹åºBåˆ†é…åˆ°1000åˆ°1999ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¦‚æœä¸€ä¸ªç¨‹åºè¯·æ±‚æ›´å¤šå†…å­˜ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šå†³å®šæ˜¯å¦åŒæ„ï¼Œå¦‚æœåŒæ„ï¼Œå°±è¦å†³å®šåˆ†é…å“ªäº›å†…å­˜å—ï¼Œè¿™å°±ä½¿å¾—ç¨‹åºAå¯èƒ½ä¼šåˆ†é…åˆ°éè¿ç»­çš„å†…å­˜å—ï¼Œä½¿å¾—ç¨‹åºå‘˜èƒ½éš¾è¿›è¡Œè·Ÿè¸ªã€‚å†…å­˜ä¸­ç¨‹åºåˆ†é…**å¤„ç†åˆ†é…çš„å†…å­˜ä¸è¿ç»­çš„æƒ…å†µ--åŠ¨æ€å†…å­˜åˆ†é…**$å¦‚æœåŒæ„ï¼Œå°±è¦å†³å®šåˆ†é…å“ªäº›å†…å­˜å—ï¼Œè¿™å°±ä½¿å¾—ç¨‹åºAå¯èƒ½ä¼šåˆ†é…åˆ°éè¿ç»­çš„å†…å­˜å—ï¼Œä½¿å¾—ç¨‹åºå‘˜èƒ½éš¾è¿›è¡Œè·Ÿè¸ªã€‚$ä¸ºäº†éšè—è¿™ç§å¤æ‚æ€§ï¼Œæ“ä½œç³»ç»Ÿä¼šæŠŠå†…å­˜åœ°å€è¿›è¡Œè™šæ‹ŸåŒ–ï¼Œç§°ä¸ºè™šæ‹Ÿå†…å­˜ï¼ˆVirtual Memoryï¼‰ã€‚ç¨‹åºå¯ä»¥å‡å®šå†…å­˜æ€»æ˜¯ä»åœ°å€0å¼€å§‹ï¼Œè€Œå®é™…çš„ç‰©ç†ä½ç½®ï¼Œè¢«æ“ä½œç³»ç»Ÿéšè—å’ŒæŠ½è±¡äº†ã€‚ä»¥ç¨‹åºBä¸ºä¾‹ï¼Œå®ƒåˆ†é…äº†å†…å­˜åœ°å€1000åˆ°1999ï¼Œä½†æ˜¯å¯¹äºç¨‹åºBè€Œè¨€ï¼Œå®ƒèƒ½çœ‹åˆ°çš„åœ°å€æ˜¯0åˆ°999ï¼Œæ“ä½œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜ä¹‹é—´çš„æ˜ å°„ï¼Œæ‰€ä»¥ç¨‹åºBè¦åœ°å€42ï¼Œå®é™…éœ€è¦ç‰©ç†åœ°å€1042ã€‚å¯¹äºç¨‹åºAï¼Œå®ƒè¢«åˆ†é…äº†åˆ†æ•£çš„ç‰©ç†å†…å­˜å—ï¼Œä½†æ˜¯ç¨‹åºAå¹¶ä¸çŸ¥é“ï¼Œå®ƒæ‰€èƒ½çœ‹åˆ°çš„æ˜¯è¿ç»­çš„ä»0åˆ°1999çš„åœ°å€ï¼Œå½“ç¨‹åºAè¯»å†…å­˜åœ°å€999æ—¶ï¼Œä¼šè¢«æ˜ å°„åˆ°ç‰©ç†åœ°å€999ï¼Œè€Œå½“ç¨‹åºAè¯»å†…å­˜åœ°å€1000ï¼Œåˆ™ä¼šè¢«æ˜ å°„åˆ°ç‰©ç†åœ°å€2000ã€‚è™šæ‹Ÿå†…å­˜ä¾‹å­è¿™ç§æœºåˆ¶ä½¿å¾—ç¨‹åºçš„å†…å­˜å¤§å°å¯ä»¥çµæ´»å¢å‡ï¼Œç§°ä¸º**åŠ¨æ€å†…å­˜åˆ†é…ï¼ˆDynamic Memory Allocationï¼‰**ã€‚å¯¹ç¨‹åºè€Œè¨€ï¼Œå†…å­˜çœ‹èµ·æ¥æ˜¯è¿ç»­çš„ï¼Œä¸ºæ“ä½œç³»ç»ŸåŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åºæä¾›äº†æå¤§çš„çµæ´»æ€§ï¼Œç¨‹åºå‘˜åªéœ€è¦æ ¹æ®è¿ç»­çš„è™šæ‹Ÿå†…å­˜åœ°å€è¿›è¡Œç¼–ç¨‹ï¼Œæ— éœ€è€ƒè™‘ç¨‹åºåœ¨å®é™…ç‰©ç†å†…å­˜ä¸­ä¸è¿ç»­çš„ç‰©ç†å†…å­˜å—ã€‚åŒæ—¶ç»™æ¯ä¸ªç¨‹åºåˆ†é…ä¸€ä¸ªä¸“ç”¨çš„å†…å­˜å—ï¼Œå¯ä»¥ä½¿å¾—éš”ç¦»èµ·æ¥æ›´æ–¹ä¾¿ã€‚å¦‚æœä¸€ä¸ªç¨‹åºå‡ºé”™äº†ï¼Œåœ¨å†…å­˜ä¸­èƒ¡ä¹±å†™æ•°æ®ï¼Œå®ƒåªèƒ½åœ¨è‡ªå·±åˆ†é…çš„å†…å­˜å—ä¸­è¿›è¡Œæ“ä½œï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–ç¨‹åºçš„æ•°æ®ï¼Œè¿™ä¸ªç§°ä¸ºå†…å­˜ä¿æŠ¤ï¼ˆMemory Protectionï¼‰ã€‚è¿™å¯¹äºé˜²æ­¢æ¶æ„è½¯ä»¶æ˜¯å¦æœ‰æ•ˆã€‚Atlasæ˜¯ç¬¬ä¸€å°æä¾›è™šæ‹Ÿå†…å­˜å’Œå†…å­˜ä¿æŠ¤åŠŸèƒ½çš„æ“ä½œç³»ç»Ÿã€‚åˆ°1970å¹´ä»£ï¼Œå¤§å­¦ä¼šè´­ä¹°ç”µè„‘ç»™å­¦ç”Ÿä½¿ç”¨ï¼Œæ­¤æ—¶è®¡ç®—æœºä¸ä»…èƒ½åŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åºï¼Œè¿˜èƒ½è®©å¤šä¸ªç”¨æˆ·åŒæ—¶è®¿é—®ã€‚å¤šä¸ªç”¨æˆ·ä½¿ç”¨ç»ˆç«¯ï¼ˆTerminalï¼‰æ¥è®¿é—®è®¡ç®—æœºï¼ˆè¿™é‡Œçš„ç»ˆç«¯åªæœ‰é”®ç›˜å’Œå±å¹•ï¼Œç„¶åè¿æ¥åˆ°è®¡ç®—æœºï¼‰ï¼Œç»ˆç«¯æœ¬èº«å¹¶ä¸å…·æœ‰å¤„ç†èƒ½åŠ›ã€‚è¿™æ ·è®¡ç®—æœºä¸ä»…è¦èƒ½å¤„ç†å¤šä¸ªç¨‹åºï¼Œè¿˜è¦å¤„ç†å¤šä¸ªç”¨æˆ·ï¼Œä¸ºäº†ç¡®ä¿å…¶ä¸­ä¸€äººä¸ä¼šå æ»¡è®¡ç®—æœºèµ„æºï¼Œå¼€å‘äº†åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼ˆTime-Sharingï¼‰ï¼ŒæŒ‡çš„æ˜¯æ¯ä¸ªç”¨æˆ·åªèƒ½ç”¨ä¸€å°éƒ¨åˆ†å¤„ç†å™¨ã€å†…å­˜ç­‰ï¼Œå› ä¸ºè®¡ç®—æœºå¾ˆå¿«ï¼Œæ‰€ä»¥å³ä½¿åªæœ‰ä¸€å°éƒ¨åˆ†èµ„æºï¼Œä¹Ÿè¶³ä»¥å®Œæˆå¾ˆå¤šä»»åŠ¡ã€‚æ—©æœŸåˆ†æ—¶æ“ä½œç³»ç»Ÿä¸­ï¼Œæœ€æœ‰å½±å“åŠ›çš„æ˜¯1969å¹´å‘å¸ƒçš„Multicsï¼Œå®ƒæ˜¯ç¬¬ä¸€ä¸ªä»è®¾è®¡æ—¶å°±è€ƒè™‘åˆ°å®‰å…¨æ€§çš„æ“ä½œç³»ç»Ÿã€‚å¼€å‘äººå‘˜ä¸å¸Œæœ›æ¶æ„ç”¨æˆ·è®¿é—®ä¸è¯¥è®¿é—®çš„æ•°æ®ï¼Œè¿™ä½¿å¾—æ“ä½œç³»ç»Ÿçš„å¤æ‚åº¦è¿œè¶…å½“æ—¶çš„å¹³å‡æ°´å¹³ï¼Œé€šå¸¸å†…å­˜çš„ä¸€åŠéƒ½è¦ç”¨æ¥è¿è¡Œæ“ä½œç³»ç»Ÿï¼Œè¿™ç§è¿‡åº¦è®¾è®¡ä½¿å¾—Multicsæœªèƒ½è·å¾—å•†ä¸šæˆåŠŸã€‚æ‰€ä»¥ç ”ç©¶å‘˜ä»¬é‡æ–°æ‰“é€ äº†ä¸€ä¸ªæ“ä½œç³»ç»ŸUnixï¼Œä»–ä»¬æƒ³æŠŠæ“ä½œç³»ç»Ÿåˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæ¯”å¦‚å†…å­˜ç®¡ç†ï¼Œå¤šä»»åŠ¡å’Œè¾“å…¥è¾“å‡ºå¤„ç†ï¼Œè¿™ä¸ªç§°ä¸ºå†…æ ¸ï¼ˆKernelï¼‰ã€‚ä¸€äº›æœ‰ç”¨çš„å·¥å…·ï¼Œä½†æ˜¯ä»–ä»¬ä¸æ˜¯å†…æ ¸çš„ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚ç¨‹åºå’Œè¿è¡Œåº“ã€‚ç´§å‡‘çš„å†…æ ¸æ„å‘³ç€åŠŸèƒ½æ²¡æœ‰ä¹‹å‰é‚£ä¹ˆå…¨é¢ã€‚å½“å†…æ ¸å‡ºç°å´©æºƒæ—¶ï¼ŒMulticsæœ‰å¾ˆå¤šæ“ä½œæ¥è¿›è¡Œæ¢å¤ï¼Œä½†æ˜¯Unixæ˜¯æ²¡æœ‰åŠæ³•æ¢å¤çš„ï¼Œä¼šç›´æ¥è°ƒç”¨ä¸€ä¸ªpanicå‡½æ•°ï¼Œæœ€åˆåªèƒ½æ— é™å¾ªç¯æ‰“å°panicã€‚è¿™ç§ç®€å•æ€§æ„å‘³ç€Unixå¯ä»¥å†æ›´ä¾¿å®œçš„ç¡¬ä»¶ä¸Šè¿è¡Œã€‚1971å¹´å‘å¸ƒä¹‹åï¼Œå°±æœ‰äººå†™äº†ä¸åŒç¼–ç¨‹è¯­è¨€çš„ç¼–è¯‘å™¨ï¼Œç”šè‡³æ–‡å­—å¤„ç†å™¨ï¼Œä½¿å¾—Unixè¿…é€Ÿæˆä¸º1970-80å¹´ä»£æœ€æµè¡Œçš„æ“ä½œç³»ç»Ÿä¹‹ä¸€ã€‚åˆ°1980å¹´ä»£æ—©æœŸï¼Œä¸ªäººç”µè„‘é€æ¸å‡ºç°ï¼Œè¿™äº›ç”µè„‘æ¯”å¤§å‹ä¸»æœºç®€å•å¾ˆå¤šï¼Œä¸»æœºä¸€èˆ¬åœ¨å¤§å­¦ã€å…¬å¸å’Œæ”¿åºœï¼Œå› æ­¤æ“ä½œç³»ç»Ÿä¹Ÿè¦å˜å¾—ç®€å•ã€‚äº1981å¹´å¾®è½¯å‘å¸ƒçš„ç£ç›˜æ“ä½œç³»ç»ŸMS-DOSåªæœ‰160kbï¼Œè™½ç„¶ç¼ºå°‘å¤šä»»åŠ¡å’Œä¿æŠ¤å†…å­˜è¿™æ ·çš„åŠŸèƒ½ï¼Œæ„å‘³ç€ç¨‹åºç»å¸¸ä½¿ç³»ç»Ÿå´©æºƒï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥é‡å¯ã€‚å³ä½¿åœ¨1985å¹´å‘å¸ƒçš„æ—©æœŸwindosï¼Œä¹Ÿä¸€æ ·ç¼ºå°‘å†…å­˜ä¿æŠ¤åŠŸèƒ½ï¼Œå½“ç¨‹åºé”™è¯¯æ—¶ï¼Œå°±ä¼šå‡ºç°è“å±ã€‚ç°ä»£çš„æ“ä½œç³»ç»ŸåŒ…å«äº†å¤šä»»åŠ¡ã€è™šæ‹Ÿå†…å­˜å’Œå†…å­˜ä¿æŠ¤æœºåˆ¶ï¼Œå› æ­¤å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åºã€‚19ã€å†…å­˜&amp;å­˜å‚¨ä»‹è´¨ä¸€èˆ¬æ¥è¯´ï¼Œç”µè„‘å†…å­˜æ˜¯éæ°¸ä¹…æ€§çš„ï¼ˆNon-Permanentï¼‰ï¼Œå¦‚æœç”µè„‘å…³æœºï¼Œåˆ™å†…å­˜ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šä¸¢å¼ƒï¼Œæ‰€ä»¥å†…å­˜å«æ˜“å¤±æ€§å­˜å‚¨å™¨ï¼ˆVolatile Memoryï¼‰ï¼Œè¿˜å­˜åœ¨å¦ä¸€ç§å­˜å‚¨å™¨ï¼ˆStorageï¼‰ï¼Œå­˜å‚¨å™¨ï¼ˆstorageï¼‰å’Œå†…å­˜ï¼ˆmemoryï¼‰å­˜åœ¨ä¸€å®šçš„ä¸åŒã€‚ä»»ä½•å†™å…¥storageçš„æ•°æ®ï¼Œå°±ä¼šä¸€ç›´ä¿å­˜ï¼Œç›´åˆ°è¢«è¦†ç›–æˆ–åˆ é™¤ï¼Œæ–­ç‚¹ä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œç§°ä¸ºéæ˜“å¤±æ€§ï¼ˆNon-volatileï¼‰ã€‚è¿‡å»æ˜¯æ˜“å¤±æ€§çš„é€Ÿåº¦å¿«ï¼Œéæ˜“å¤±æ€§çš„é€Ÿåº¦æ…¢ï¼Œä½†éšç€æŠ€æœ¯å‘å±•ï¼Œä¸¤è€…çš„å·®å¼‚è¶Šæ¥è¶Šå°ã€‚æœ€æ—©çš„å­˜å‚¨ä»‹è´¨æ˜¯æ‰“å­”çº¸å¡ä»¥åŠæ‰“å­”çº¸å¸¦ï¼Œåˆ°1940å¹´ä»£ï¼Œçº¸å¡æ ‡å‡†æ˜¯80åˆ—x12è¡Œï¼Œèƒ½å¤Ÿå­˜å‚¨960ä½æ•°æ®ã€‚çº¸å¡ç”¨äº†åå‡ å¹´ï¼Œå› ä¸ºä¸ç”¨ç”µè€Œä¸”ä¾¿å®œè€ç”¨ï¼Œä½†æ˜¯è¯»å–é€Ÿåº¦è¾ƒæ…¢ï¼Œåªèƒ½å†™å…¥ä¸€æ¬¡ï¼Œå¯¹äºå­˜ä¸´æ—¶å€¼ï¼Œçº¸å¡ä¸å¥½ç”¨ï¼Œæˆ‘ä»¬éœ€è¦æ›´å¤§æ›´çµæ´»çš„å­˜å‚¨æ–¹å¼ã€‚å»¶è¿Ÿçº¿å­˜å‚¨å™¨ï¼š1944å¹´æ—¶ï¼Œå‡ºç°äº†å»¶è¿Ÿçº¿å­˜å‚¨å™¨ï¼ˆDelay Line Memoryï¼‰ã€‚åŸç†ï¼šå‡è®¾ä½ æœ‰ä¸€ä¸ªè£…æ»¡æ¶²ä½“ï¼ˆå¦‚æ°´é“¶ï¼‰çš„ç®¡å­ï¼Œç®¡å­ä¸€ç«¯æ”¾ç€æ‰¬å£°å™¨ï¼Œå¦ä¸€ç«¯æ”¾ç€éº¦å…‹é£ï¼Œå½“æ‰¬å£°å™¨å‘å‡ºè„‰å†²æ—¶ï¼Œå°±ä¼šåœ¨ç®¡å­å†…äº§ç”Ÿå‹åŠ›æ³¢ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´åå‹åŠ›æ³¢ä¼šä¼ é€’åˆ°éº¦å…‹é£ï¼Œç„¶åéº¦å…‹é£å°†å‹åŠ›æ³¢è½¬æ¢ä¸ºç”µä¿¡å·ï¼Œé€šè¿‡åœ¨éº¦å…‹é£åé¢æ¥ä¸€ä¸ªæ”¾å¤§å™¨ï¼ˆAMPLIFIERï¼‰ï¼Œç„¶åè¿å›æ‰¬å£°å™¨ï¼Œæˆ‘ä»¬å°±èƒ½ç”¨å‹åŠ›æ³¢çš„ä¼ æ’­å»¶è¿Ÿæ¥å­˜å‚¨æ•°æ®ã€‚å‡è®¾æœ‰å‹åŠ›æ³¢ä»£è¡¨1ï¼Œæ²¡æœ‰ä»£è¡¨0ï¼Œæ‰¬å£°å™¨å‘å‡ºä¸€ç³»åˆ—å‹åŠ›æ³¢ï¼Œå› ä¸ºä¼ æ’­å»¶æ—¶çš„åŸå› ï¼Œè¿™äº›å‹åŠ›æ³¢ä¼šå­˜åœ¨ç®¡å­å†…ï¼Œå½“æ’å‡»åˆ°éº¦å…‹é£åï¼Œåˆä¼šé€šè¿‡æ‰¬å£°å™¨é‡æ–°å›åˆ°ç®¡å­ï¼Œæ‰€ä»¥å°±èƒ½å°†æ•°æ®ä¿å­˜åœ¨ç®¡å­å†…ã€‚åœ¨1949å¹´çš„EDVACè®¡ç®—æœºä¸­ä½¿ç”¨äº†å»¶è¿Ÿçº¿å­˜å‚¨å™¨ï¼Œæ€»å…±æœ‰128æ¡å»¶è¿Ÿçº¿ï¼Œæ¯æ¡èƒ½å­˜352ä½ï¼Œä¸€å…±èƒ½ä¿å­˜45000ä½ã€‚è¿™ä½¿å¾—EDVACæˆä¸ºæœ€æ—©çš„å­˜å‚¨ç¨‹åºè®¡ç®—æœºä¹‹ä¸€ã€‚ç¼ºç‚¹ï¼šä½†å»¶è¿Ÿçº¿å­˜å‚¨å™¨çš„ç¼ºç‚¹æ˜¯ï¼Œæ¯ä¸ªæ—¶åˆ»åªèƒ½è¯»ä¸€ä½æ•°æ®ï¼Œå¦‚æœæƒ³è®¿é—®ä¸€ä¸ªç‰¹å®šçš„ä½ï¼Œå°±è¦ç­‰å¾…å®ƒä»å¾ªç¯ä¸­å‡ºç°ï¼Œæ‰€ä»¥åˆè¢«ç§°ä¸ºé¡ºåºå­˜å‚¨å™¨Sequential Memoryï¼‰æˆ–è€…å¾ªç¯å­˜å‚¨å™¨ï¼ˆCyclic-Access Memoryï¼‰ã€‚è€Œæˆ‘ä»¬æƒ³è¦éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆRandom Access Memoryï¼‰ï¼Œå¯ä»¥éšæ—¶è®¿é—®ä»»ä½•ä½ç½®ã€‚å¹¶ä¸”å¢åŠ å†…å­˜å¯†åº¦ä¹Ÿæ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼Œå¦‚æœè¦å°†å‹åŠ›æ³¢å˜å¾—æ›´ç´§å¯†ï¼Œå°±ä¼šä½¿å…¶æ··åœ¨ä¸€èµ·ï¼Œæ‰€ä»¥å‡ºç°äº†å…¶ä»–ç±»å‹çš„å»¶è¿Ÿçº¿å­˜å‚¨å™¨ï¼Œæ¯”å¦‚ç£è‡´ä¼¸ç¼©å»¶è¿Ÿå­˜å‚¨å™¨ï¼ˆMagnetostrictive Delay Linesï¼‰ï¼Œå®ƒé€šè¿‡é‡‘å±çº¿çš„æŒ¯åŠ¨æ¥ä»£è¡¨æ•°æ®ã€‚ç£èŠ¯å­˜å‚¨å™¨ï¼šä½†æ˜¯å»¶è¿Ÿçº¿å­˜å‚¨å™¨åœ¨1950å¹´ä»£ä¸­æœŸå°±è¿‡æ—¶äº†ã€‚å› ä¸ºå‡ºç°äº†æ–°æŠ€æœ¯ï¼Œäºæ˜¯å‡ºç°äº†ï¼Œç£èŠ¯å­˜å‚¨å™¨ï¼ˆMagnetic Core Memoryï¼‰ï¼Œå®ƒç”¨äº†ç¯çŠ¶ç£åœˆï¼Œå¦‚æœç»™ç£èŠ¯ç»•ä¸Šç”µçº¿å¹¶æ–½åŠ ç”µæµï¼Œå°±èƒ½å°†å…¶ç£åŒ–åœ¨ä¸€ä¸ªæ–¹å‘ï¼Œå¦‚æœå…³æ‰ç”µæµï¼Œç£èŠ¯è¿˜ä¼šä¿æŒç£åŒ–ï¼Œå¦‚æœæ–½åŠ äº†ç›¸åæ–¹å‘çš„ç”µæµï¼Œåˆ™ç£åŒ–æ–¹å‘ä¼šç¿»è½¬ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½é€šè¿‡ç£åŒ–æ–¹å‘æ¥å­˜å‚¨0å’Œ1ï¼Œå°±èƒ½ç”¨æ¥å­˜å‚¨1ä½ã€‚é€šè¿‡å°†ç£èŠ¯æ’åˆ—æˆç½‘æ ¼çŠ¶ï¼Œæœ‰çº¿è·¯è´Ÿè´£é€‰æ‹©è¡Œå’Œåˆ—ï¼Œä¹Ÿæœ‰ç”µçº¿è´¯ç©¿æ¯ä¸ªç£èŠ¯ï¼Œç”¨äºè¯»å†™1ä½ã€‚ç£èŠ¯å­˜å‚¨å™¨å¦‚æœè¦å­˜çš„æ•°æ®è¶…è¿‡1bitï¼Œå°±éœ€è¦æŠŠç£èŠ¯å­˜å‚¨å™¨æ’åˆ—æˆç½‘æ ¼ï¼š1953å¹´éº»çœç†å·¥çš„Whirlwind1è®¡ç®—æœºç¬¬ä¸€æ¬¡å¤§è§„æ¨¡ä½¿ç”¨ç£èŠ¯å†…å­˜ï¼Œç£èŠ¯æ’åˆ—ä½¿ç”¨32x32ï¼Œç”¨äº†16å—æ¿å­ï¼Œå¤§çº¦èƒ½å­˜å‚¨16000ä½ã€‚ä¸åƒå»¶è¿Ÿçº¿å­˜å‚¨å™¨ï¼Œç£èŠ¯å­˜å‚¨å™¨èƒ½éšæ—¶è®¿é—®ä»»ä½•ä¸€ä½ï¼Œå› æ­¤ä»1950å¹´ä»£ä¸­æœŸæˆä¸ºä¸»æµï¼Œæµè¡Œäº†20å¤šå¹´ï¼Œå°†å­˜å‚¨æˆæœ¬ä»1ç¾å…ƒ1ä½é™ä½åˆ°äº†1ç¾åˆ†å·¦å³ã€‚ç£å¸¦ï¼šåˆ°1951å¹´ï¼ŒUNIVACç”µè„‘æ¨å‡ºäº†ä¸€ç§æ–°å­˜å‚¨â€”â€”ç£å¸¦ï¼ˆMagnetic Tapeï¼‰ã€‚ç£å¸¦æ˜¯çº¤è–„æŸ”è½¯çš„ä¸€é•¿æ¡å·åœ¨è½´ä¸Šçš„ç£æ€§å¸¦å­ï¼Œç£å¸¦å¯ä»¥åœ¨ç£å¸¦é©±åŠ¨å™¨å†…å‰åç§»åŠ¨ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªç¼ ç»•äº†ç”µçº¿çš„å†™å¤´ï¼ˆWrite Headï¼‰ï¼Œé€šè¿‡ç”µæµæ¥äº§ç”Ÿç£åœºï¼Œå¯¼è‡´ç£å¸¦çš„ä¸€å°éƒ¨åˆ†è¢«ç£åŒ–ï¼Œç”µæµæ–¹å‘å†³å®šäº†ææ€§ï¼Œä»£è¡¨1å’Œ0ã€‚åŒæ ·è¿˜æœ‰ä¸€ä¸ªè¯»å¤´ï¼ˆRead Headï¼‰ï¼Œå¯ä»¥éç ´ååœ°æ£€æµ‹ææ€§æ¥ç¡®å®šæ•°æ®ã€‚ç¼ºç‚¹ï¼šç£å¸¦çš„ä¸»è¦ç¼ºç‚¹æ˜¯è®¿é—®é€Ÿåº¦ï¼Œç£å¸¦æ˜¯è¿ç»­çš„ï¼Œå¿…é¡»å€’å¸¦æˆ–å¿«è¿›åˆ°ç‰¹å®šä½ç½®ã€‚50 60å¹´ä»£å‡ºç°äº†ç±»ä¼¼çš„æŠ€æœ¯ç£é¼“å­˜å‚¨å™¨ï¼ˆMagnetic Drum Memoryï¼‰,æœ‰ä¸€ä¸ªé‡‘å±åœ†ç®¡ï¼Œç›–æ»¡äº†ç£æ€§ææ–™æ¥è®°å½•æ•°æ®ï¼Œåœ†ç®¡ä¼šæŒç»­æ—‹è½¬ï¼Œå‘¨å›´æœ‰æ•°åä¸ªè¯»å†™å¤´ï¼Œç­‰åœ†ç®¡è½¬åˆ°äº†æ­£ç¡®çš„ä½ç½®ï¼Œè¯»å†™å¤´å°±ä¼šè¯»æˆ–å†™æ•°æ®ã€‚ä½†åˆ°äº†1970å¹´ä»£ç£é¼“å­˜å‚¨å™¨å°±ä¸å†ç”Ÿäº§äº†ï¼Œä½†æ˜¯ç£é¼“å¯¼è‡´äº†ç¡¬ç›˜ï¼ˆHard Disk Drivesï¼‰çš„å‘å±•ï¼Œç£ç›˜çš„å¥½å¤„æ˜¯è–„ï¼Œå¯ä»¥å åœ¨ä¸€èµ·æ¥æä¾›æ›´å¤šè¡¨é¢ç§¯æ¥å­˜å‚¨æ•°æ®ã€‚è¦è®¿é—®æŸä¸ªç‰¹å®šä½ï¼Œä¸€ä¸ªè¯»å†™ç£å¤´ä¼šä¸Šä¸‹ç§»åŠ¨ï¼Œæ‰¾åˆ°æ­£ç¡®çš„ç£ç›˜ï¼Œç„¶åç£å¤´ä¼šæ»‘è¿›å»ï¼Œå°±å’Œç£é¼“å­˜å‚¨å™¨ä¸€æ ·ï¼Œç£ç›˜ä¹Ÿä¼šé«˜é€Ÿæ—‹è½¬ï¼Œæ‰€ä»¥è¯»å†™å¤´è¦ç­‰åˆ°æ­£ç¡®çš„éƒ¨åˆ†æ—‹è½¬è¿‡æ¥ï¼Œè¿™ä¸ªç§°ä¸ºå¯»é“æ—¶é—´ï¼ˆSeek Timeï¼‰ã€‚ä»¥ä¸‹æ˜¯å†…å­˜å±‚æ¬¡ç»“æ„ï¼ˆMemory Hierarchyï¼‰ï¼Œæœ‰ä¸€å°éƒ¨åˆ†é«˜é€Ÿä¸”æ˜‚è´µçš„å†…å­˜ï¼Œä¸€éƒ¨åˆ†ç¨æ…¢ä¸”ç›¸å¯¹ä¾¿å®œçš„å†…å­˜ï¼Œè¿˜æœ‰æ›´æ…¢ä¸”æ›´ä¾¿å®œçš„å†…å­˜ï¼Œè¿™ç§æ··åˆå¯ä»¥åœ¨æˆæœ¬å’Œé€Ÿåº¦ä¹‹é—´å–å¾—å¹³è¡¡ã€‚å…¶æ¬¡è¿˜æœ‰è½¯ç›˜ï¼ˆFloppy Diskï¼‰ï¼Œé™¤äº†ç£ç›˜æ˜¯è½¯çš„ï¼Œå…¶ä»–éƒ½ä¸€æ ·ã€‚åé¢å‡ºç°çš„å…‰ç›˜ï¼ˆCompact Diskï¼ŒCDï¼‰ä»¥åŠDVDï¼Œå®ƒä»¬ä¸ä½¿ç”¨ç£æ€§æ¥ä¿å­˜æ•°æ®ï¼Œè€Œæ˜¯ä½¿ç”¨è¡¨é¢çš„å°å‘æ¥é€ æˆå…‰çš„ä¸åŒåå°„ï¼Œé€šè¿‡å…‰å­¦ä¼ æ„Ÿå™¨æ•è·å¹¶è§£ç ä¸º1å’Œ0ã€‚å…‰ç›˜è¡¨é¢å¦‚ä»Šæˆæœ¬ä¸‹é™äº†æ›´å¤šçš„å­˜å‚¨æŠ€æœ¯åœ¨æœ**å›ºæ€ï¼ˆSolid Stateï¼‰**å‰è¿›ï¼Œ**æœºæ¢°ç¡¬ç›˜ï¼ˆhard disk driveï¼ŒHDDï¼‰**è¢«**å›ºæ€ç¡¬ç›˜ï¼ˆSolid State Driveï¼ŒSSDï¼‰**é€æ¸ä»£æ›¿ã€‚ç”±äºSSDæ²¡æœ‰æœºæ¢°æ´»åŠ¨éƒ¨ä»¶ï¼Œé‡Œé¢éƒ½æ˜¯é›†æˆç”µè·¯ã€‚å› ä¸ºä¸å­˜åœ¨æœºæ¢°æ´»åŠ¨ï¼Œæ‰€ä»¥ç£å¤´ä¸ç”¨ç­‰ç£ç›˜æ—‹è½¬ï¼Œæ‰€ä»¥å›ºæ€é€Ÿåº¦å¿«å¾ˆå¤šï¼Œä½†æ˜¯ä»ç„¶æ¯”RAMæ…¢å¾ˆå¤šï¼Œæ‰€ä»¥ç°ä»£è®¡ç®—æœºä»ç„¶ä½¿ç”¨å­˜å‚¨å±‚æ¬¡ç»“æ„ã€‚20ã€æ–‡ä»¶ç³»ç»Ÿä¸Šä¸€èŠ‚ä¸­ä»‹ç»çš„æ•°æ®å­˜å‚¨ã€‚å­˜å‚¨å™¨å¯ä»¥åœ¨æ–­ç”µçŠ¶æ€ä¸‹é•¿æ—¶é—´å­˜ä¸Šä¸‡äº¿ä½ï¼Œæ‰€ä»¥éå¸¸é€‚åˆç”¨æ¥å­˜ä¸€æ•´å—æœ‰å…³ç³»çš„æ•°æ®ï¼ˆæˆ–è€…ç§°ä¸ºæ–‡ä»¶ï¼ˆFilesï¼‰ï¼‰ï¼Œæ¯”å¦‚æ–‡æœ¬æ–‡ä»¶ã€éŸ³ä¹æ–‡ä»¶ã€ç…§ç‰‡å’Œè§†é¢‘ã€‚è¿™ä¸€èŠ‚å°†è®¨è®ºæ–‡ä»¶æ˜¯ä»€ä¹ˆä»¥åŠè®¡ç®—æœºæ˜¯æ€ä¹ˆç®¡ç†æ–‡ä»¶çš„ã€‚éšæ„æ’åˆ—æ–‡ä»¶çš„æ•°æ®æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æŒ‰æ ¼å¼æ’åˆ—ä¼šæ›´å¥½ï¼Œè¿™ä¸ªç§°ä¸ºæ–‡ä»¶æ ¼å¼ï¼ˆFile Formatï¼‰ã€‚é¦–å…ˆçœ‹ä¸€ä¸ªæœ€ç®€å•çš„æ–‡ä»¶æ ¼å¼â€”â€”æ–‡æœ¬æ–‡ä»¶ï¼ˆTxt Fileï¼Œtxtï¼‰ã€‚å°±åƒå…¶ä»–æ–‡ä»¶ä¸€æ ·ï¼Œæ–‡æœ¬æ–‡ä»¶åªæ˜¯ä¸€é•¿ä¸²äºŒè¿›åˆ¶æ•°ï¼Œå¯ä»¥é€šè¿‡ASCIIç¼–ç å°†å…¶è§£ç æˆå¯¹åº”æ–‡æœ¬ã€‚æ³¢å½¢æ–‡ä»¶ï¼šæ³¢å½¢æ–‡ä»¶ï¼ˆWAVï¼‰**æ³¢å½¢æ–‡ä»¶ï¼ˆWave Fileï¼ŒWAVï¼‰**ç”¨äºå­˜éŸ³é¢‘æ•°æ®ã€‚åœ¨æ­£ç¡®è¯»å–æ•°æ®ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸€äº›ä¿¡æ¯æ¯”å¦‚ç ç‡ï¼Œä»¥åŠæ˜¯å•å£°é“è¿˜æ˜¯ç«‹ä½“å£°ï¼Œè¿™ç§æè¿°æ•°æ®çš„æ•°æ®ç§°ä¸º**å…ƒæ•°æ®ï¼ˆMeta Dataï¼‰**ã€‚å…ƒæ•°æ®ä¿å­˜åœ¨æ–‡ä»¶å¼€å¤´ï¼Œåœ¨å®é™…æ•°æ®ä¹‹å‰ï¼Œå› æ­¤ä¹Ÿå«**æ–‡ä»¶å¤´ï¼ˆHeaderï¼‰**ã€‚ä»¥ä¸‹æ˜¯WAVæ–‡ä»¶çš„å‰44ä¸ªå­—èŠ‚ï¼Œæœ‰äº›éƒ¨åˆ†ä¼šæ ¹æ®æ•°æ®è¿›è¡Œå˜åŒ–ã€‚[^å…ƒæ•°æ®]: å…ƒæ•°æ®ï¼ˆMetadataï¼‰ï¼Œåˆç§°ä¸­ä»‹æ•°æ®ã€ä¸­ç»§æ•°æ®ï¼Œä¸ºæè¿°æ•°æ®çš„æ•°æ®ï¼ˆdata about dataï¼‰ï¼Œä¸»è¦æ˜¯æè¿°æ•°æ®å±æ€§ï¼ˆpropertyï¼‰çš„ä¿¡æ¯ï¼Œç”¨æ¥æ”¯æŒå¦‚æŒ‡ç¤ºå­˜å‚¨ä½ç½®ã€å†å²æ•°æ®ã€èµ„æºæŸ¥æ‰¾ã€æ–‡ä»¶è®°å½•ç­‰åŠŸèƒ½ã€‚WAVæ ¼å¼çš„æ•°æ®çš„å…ƒæ•°æ®è€ŒéŸ³é¢‘æ•°æ®å°±ç´§è·Ÿåœ¨å…ƒæ•°æ®ä¹‹åï¼Œä¹Ÿæ˜¯ä¸€é•¿ä¸²äºŒè¿›åˆ¶æ•°ï¼Œè¿™äº›æ•°å­—ä»£è¡¨æ¯ç§’æ•è·å¤šæ¬¡çš„å£°éŸ³å¹…åº¦ã€‚éº¦å…‹é£é¦–å…ˆä¼šå¯¹å£°éŸ³è¿›è¡Œæ¯ç§’ä¸Šåƒæ¬¡é‡‡æ ·ï¼Œæ¯æ¬¡é‡‡æ ·å¯ä»¥ç”¨ä¸€ä¸ªæ•°å­—è¡¨ç¤ºï¼Œå£°å‹è¶Šé«˜æ•°å­—è¶Šå¤§ï¼Œç§°ä¸º**æŒ¯å¹…(Amplitude)**ï¼Œè¿™å°±æ˜¯WAVæ–‡ä»¶ä¸­å­˜å‚¨çš„æ•°æ®ã€‚æ’­æ”¾å£°éŸ³æ—¶ï¼Œæ‰¬å£°å™¨å°±ä¼šäº§ç”Ÿç›¸åŒçš„æ³¢å½¢ã€‚ä½å›¾(Bitmap)å†æ¥è°ˆè°ˆä½å›¾ï¼Œå…¶åç¼€ä¸ºbmpï¼Œç”¨äºä¿å­˜å›¾ç‰‡ã€‚ã€‚è®¡ç®—æœºä¸­ï¼Œå›¾ç‰‡ç”±å¤šä¸ªåƒç´ (Pixel)æ–¹å—ç»„æˆï¼Œæ¯ä¸ªåƒç´ ç”±ä¸‰ç§é¢œè‰²ç»„æˆï¼šçº¢ã€ç»¿ã€è“ï¼Œå«â€œåŠ è‰²ä¸‰åŸè‰²â€ï¼Œæ··åˆåœ¨ä¸€èµ·èƒ½äº§ç”Ÿå…¶ä»–é¢œè‰²ã€‚ç±»ä¼¼äºWAVæ–‡ä»¶ï¼ŒBMPæ–‡ä»¶å¼€å¤´ä¹Ÿæ˜¯å…ƒæ•°æ®ï¼Œæœ‰å›¾ç‰‡å®½åº¦ã€å›¾ç‰‡é«˜åº¦å’Œé¢œè‰²æ·±åº¦ç­‰ç­‰ã€‚ç°åœ¨å‡è®¾å›¾ç‰‡å®½é«˜å‡ä¸º4ä¸ªåƒç´ ï¼Œé¢œè‰²æ·±åº¦ä¸º24ï¼Œä¹Ÿå°±æ˜¯8ä½(bit)çº¢è‰²ã€8ä½ç»¿è‰²å’Œ9ä½è“è‰²ï¼Œåˆ™æ¯ä¸ªé¢œè‰²æœ‰0-255ç¨‹åº¦ï¼Œç„¶åä¾æ¬¡ä¿å­˜æ¯ä¸ªä½ç½®çš„ä¸‰åŸè‰²æ•°å€¼ã€‚ä½å›¾çš„å…ƒæ•°æ®![image-20200223203327886](https://longlongqin.gitee.io/image_save/images/assets/image-20200223203327886.png)ä½å›¾çš„æ•°æ®é€šè¿‡ä»¥ä¸Šä¾‹å­ï¼Œå¯ä»¥çŸ¥é“ï¼Œæ–‡ä»¶åº•å±‚éƒ½æ˜¯äºŒè¿›åˆ¶æ•°ï¼Œä¸ºäº†çŸ¥é“æ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Œæ–‡ä»¶æ ¼å¼å°±ååˆ†é‡è¦ã€‚è®¡ç®—æœºå¦‚ä½•å­˜å‚¨æ–‡ä»¶ï¼šæœ€ç®€å•å­˜å‚¨å¤šä¸ªæ–‡ä»¶çš„æ–¹æ³•æ˜¯å°†æ–‡ä»¶è¿ç»­å­˜å‚¨ï¼Œä½†æ˜¯è¿™æ ·æ€ä¹ˆçŸ¥é“æ–‡ä»¶å¼€å¤´å’Œç»“å°¾åœ¨å“ªå‘¢ï¼Ÿå­˜å‚¨å™¨å¹¶æ²¡æœ‰æ–‡ä»¶çš„æ¦‚å¿µï¼Œå®ƒåªæ˜¯ç”¨æ¥å­˜å‚¨å¤§é‡äºŒè¿›åˆ¶æ•°ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç‰¹æ®Šæ–‡ä»¶æ¥è®°å½•å…¶ä»–æ–‡ä»¶çš„ä½ç½®ï¼Œè¿™é‡Œç§°ä¸ºç›®å½•æ–‡ä»¶ï¼ˆDirectory Fileï¼‰ï¼Œå®ƒé€šå¸¸ä¿å­˜åœ¨å­˜å‚¨å™¨æœ€å¼€å¤´ï¼Œæ–¹ä¾¿å¯»æ‰¾ã€‚storageåœ¨ç›®å½•æ–‡ä»¶ä¸­ï¼Œå­˜æœ‰å…¶å®ƒæ‰€æœ‰æ–‡ä»¶çš„åå­—ï¼Œæ ¼å¼ä¸º`æ–‡ä»¶å+ç‚¹+æ‰©å±•å`ï¼Œ æ‰©å±•åæœ‰åŠ©äºå¾—çŸ¥æ–‡ä»¶ç±»å‹ã€‚ç›®å½•æ–‡ä»¶è¿˜ä¿å­˜äº†æ–‡ä»¶çš„å…ƒæ•°æ®ï¼Œæ¯”å¦‚åˆ›å»ºæ—¶é—´ã€æœ€åä¿®æ”¹æ—¶é—´ã€æ–‡ä»¶æ‰€æœ‰è€…ã€æ˜¯å¦èƒ½è¯»å†™ï¼Œæœ€é‡è¦çš„æ˜¯è®°å½•äº†æ–‡ä»¶èµ·å§‹ä½ç½®å’Œé•¿åº¦ã€‚ç›®å½•æ–‡ä»¶å¦‚æœè¦æ·»åŠ ã€åˆ é™¤æ–‡ä»¶æˆ–è€…æ›´æ”¹æ–‡ä»¶åï¼Œå¿…é¡»æ›´æ–°æ•´ä¸ªç›®å½•æ–‡ä»¶ã€‚ç›®å½•æ–‡ä»¶ä»¥åŠå¯¹ç›®å½•æ–‡ä»¶çš„ç®¡ç†ï¼Œæ˜¯æœ€åŸºæœ¬çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆFile Systemï¼‰çš„ä¾‹å­ï¼Œæ–‡ä»¶ç³»ç»Ÿä¸“é—¨è´Ÿè´£ç®¡ç†æ–‡ä»¶ã€‚åˆšåˆšçš„ä¾‹å­å«å¹³é¢æ–‡ä»¶ç³»ç»Ÿï¼ˆFlat File Systemï¼‰ï¼Œå› ä¸ºæ‰€æœ‰æ–‡ä»¶éƒ½åœ¨åŒä¸€å±‚æ¬¡ã€‚å­˜åœ¨ä¸€ä¸ªç¼ºç‚¹ï¼šå½“æˆ‘ä»¬æƒ³è¦å¯¹ä¸­é—´æ–‡ä»¶å¢åŠ æ•°æ®æ—¶ï¼Œå°±ä¼šè¦†ç›–åç»­æ–‡ä»¶çš„æ•°æ®ã€‚æ‰€ä»¥ç°ä»£æ–‡ä»¶ç³»ç»Ÿä¼šåšä¸¤ä¸ªå¤„ç†ï¼šå°†ç©ºé—´åˆ’åˆ†æˆä¸€å—å—ï¼Œä¼šå‡ºç°ä¸€äº›é¢„ç•™ç©ºé—´ï¼ˆSlack Spaceï¼‰ï¼Œå¯ä»¥æ–¹ä¾¿æ”¹åŠ¨ã€‚åŒæ—¶æ–‡ä»¶æ•°æ®éƒ½å¯¹é½åˆ°äº†ç›¸åŒå¤§å°ï¼Œå¯ä»¥æ–¹ä¾¿ç®¡ç†ã€‚ä½¿ç”¨è¿™ç§æ–¹æ¡ˆï¼Œç›®å½•æ–‡ä»¶å°±è¦è®°å½•æ–‡ä»¶åœ¨å“ªäº›å—ä¸­ã€‚æ‹†åˆ†æ–‡ä»¶ä¿å­˜åœ¨å¤šä¸ªå—ä¸­ã€‚å‡è®¾todo.txtæ–‡ä»¶ä¸­åŠ äº†ä¸€äº›æ•°æ®ï¼Œä½¿å¾—æ–‡ä»¶å¤ªå¤§æ— æ³•å­˜åœ¨ä¸€ä¸ªå—ä¸­ï¼Œåˆ™æ–‡ä»¶ç³»ç»Ÿä¼šåˆ†é…ä¸€ä¸ªæ²¡ä½¿ç”¨çš„å—æ¥å®¹çº³é¢å¤–çš„æ•°æ®ï¼Œåˆ™ç›®å½•æ–‡ä»¶å¯¹æ¯ä¸ªæ–‡ä»¶å°±ä¼šè®°å½•ä¸æ­¢ä¸€ä¸ªå—ï¼Œè€Œæ˜¯å¤šä¸ªå—ã€‚é€šè¿‡åˆ†é…å—ï¼Œæ–‡ä»¶å°±å¯ä»¥è½»æ¾å¢åŠ å‡å°ã€‚å¦‚æœæƒ³è¦åˆ é™¤carrie.bmpï¼Œåªè¦åœ¨ç›®å½•æ–‡ä»¶ä¸­åˆ é™¤å¯¹åº”è®°å½•å°±è¡Œï¼Œè®©è¿™ä¸€å—ç©ºé—´å˜æˆå¯ç”¨çš„ï¼Œè¿™æ ·å°±ä¸éœ€è¦è¿›è¡Œæ“¦é™¤ï¼Œåªéœ€è¦ç›´æ¥åˆ é™¤è®°å½•å°±è¡Œã€‚åœ¨é‚£ä¸€å—è¢«æ–°æ•°æ®è¦†ç›–ä¹‹å‰ï¼Œæ•°æ®è¿˜æ˜¯ä¿å­˜åœ¨åŸå¤„çš„ã€‚æ‰€ä»¥æ¢å¤åˆ é™¤æ•°æ®æ˜¯æœ‰å¯èƒ½çš„ã€‚å½“æ–‡ä»¶è¿‡å¤§ï¼Œä¿å­˜åœ¨è‹¥å¹²ä¸ªå—ä¸­ï¼Œè¿™ä¸ªç§°ä¸ºç¢ç‰‡ï¼ˆFragmentationï¼‰ï¼Œç¢ç‰‡æ˜¯å¢åˆ æ”¹æ–‡ä»¶å¯¼è‡´çš„ï¼Œæ— æ³•é¿å…ï¼Œä½†æ˜¯ä¼šé€ æˆæ€§èƒ½ä¸‹é™ã€‚è§£å†³æ–¹æ³•æ˜¯é€šè¿‡ç¢ç‰‡æ•´ç†ï¼ˆDefragmentationï¼‰ï¼Œè®¡ç®—æœºä¼šå°†æ•°æ®æ¥å›ä¸€å®šï¼Œæ’åˆ—æˆæ­£ç¡®çš„é¡ºåºï¼Œå°±èƒ½å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œè¯»å†™ã€‚ç¢ç‰‡æ•´ç†å‰![image-20200223204733889](https://longlongqin.gitee.io/image_save/images/assets/image-20200223204733889.png)ç¢ç‰‡æ•´ç†åéšç€å®¹é‡çˆ†ç‚¸å¼å¢é•¿ï¼Œæ–‡ä»¶æ•°é‡é£é€Ÿå¢åŠ ï¼Œå¹³é¢æ–‡ä»¶ç³»ç»Ÿé€æ¸åº”ä»˜ä¸æ¥ï¼Œæ‰€ä»¥å‡ºç°äº†**åˆ†å±‚æ–‡ä»¶ç³»ç»Ÿï¼ˆHirerarchical File Systemï¼‰**ï¼Œè¿™é‡Œæœ€å¤§çš„å˜åŒ–å°±æ˜¯æ¯ä¸ªæ–‡ä»¶å¤¹ä¸­éƒ½æœ‰ä¸€ä¸ªç›®å½•æ–‡ä»¶ï¼Œå¹¶ä¸”ç›®å½•æ–‡ä»¶ä¸ä»…è¦æŒ‡å‘æ–‡ä»¶ï¼Œè¿˜è¦æŒ‡å‘ç›®å½•ï¼Œè¿˜éœ€è¦å¢åŠ é¢å¤–çš„å…ƒæ•°æ®æ¥åŒºåˆ†æ–‡ä»¶å’Œç›®å½•ã€‚ä¼˜ç‚¹ï¼šè¿™ç§æ–‡ä»¶ç³»ç»Ÿä¸ä»…å¯ä»¥åšå‡ºæ— é™æ·±çš„æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥è®©æˆ‘ä»¬å¾ˆè½»æ¾åœ°ç§»åŠ¨æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç§»åŠ¨ä»»ä½•æ•°æ®å—ï¼Œåªéœ€è¦åœ¨ä¸¤ä¸ªç›®å½•æ–‡ä»¶ä¸­åˆ å¢è®°å½•å°±è¡Œã€‚åˆ†å±‚æ–‡ä»¶æ–‡ä»¶ç³»ç»Ÿä½¿æˆ‘ä»¬ä¸å¿…å…³å¿ƒæ–‡ä»¶åœ¨ç£ç›˜ä¸­çš„å…·ä½“ä½ç½®ã€‚21ã€å‹ç¼©ä¹‹å‰ä»‹ç»äº†æ–‡ä»¶æ ¼å¼ï¼Œå¦‚ä½•ç¼–ç æ–‡å­—ã€å£°éŸ³å’Œå›¾ç‰‡ï¼Œä½†æ˜¯å®ƒä»¬çš„æ•ˆç‡å¹¶ä¸é«˜ï¼Œæˆ‘ä»¬å¸Œæœ›æ–‡ä»¶èƒ½å°ä¸€ç‚¹ï¼Œè¿™æ ·å°±èƒ½ä¿å­˜å¤§é‡æ–‡ä»¶ï¼ŒåŒæ—¶ä¼ è¾“ä¹Ÿä¼šå¿«ä¸€äº›ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯å‹ç¼©ï¼ˆCompressionï¼‰ï¼ŒæŠŠæ•°æ®å ç”¨çš„ç©ºé—´å‹å¾—æ›´å°ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦ç”¨æ›´å°‘çš„bitæ¥è¡¨ç¤ºæ•°æ®ã€‚ä»¥å‹ç¼©å›¾ç‰‡ä¸ºä¾‹ï¼Œå›¾ç‰‡ä¸€èˆ¬å­˜æˆä¸€é•¿ä¸²åƒç´ å€¼ï¼Œä¸ºäº†çŸ¥é“ä¸€è¡Œåœ¨å“ªé‡Œç»“æŸï¼Œå›¾åƒè¦æœ‰å…ƒæ•°æ®ï¼Œå†™æ˜å°ºå¯¸ç­‰å±æ€§ã€‚æ¯ä¸ªåƒç´ çš„é¢œè‰²æ˜¯ä¸‰åŸè‰²çš„ç»„åˆï¼Œæ¯ä¸ªé¢œè‰²ç”¨ä¸€ä¸ªå­—èŠ‚ä¿å­˜ï¼Œæ•°å­—èŒƒå›´æ˜¯0~255ï¼ˆä¸€ä¸ªå­—èŠ‚=8 bitsï¼Œ2^8^=256ï¼‰ï¼Œç”±æ­¤ä¸€å¼ 4*4ï¼ˆ16ä¸ªåƒç´ ï¼‰å¤§å°çš„å›¾åƒï¼Œå…¶ä¸­æ¯ä¸ªåƒç´ 3ä¸ªå­—èŠ‚ã€‚åˆ™è¿™ä¸ªå›¾ç‰‡éœ€è¦4*4*3=48å­—èŠ‚ã€‚â€”ã€‹å­˜æˆä¸€é•¿ä¸²åƒç´ å€¼ï¼šå›¾ç‰‡ä¸€èˆ¬å­˜æˆä¸€é•¿ä¸²åƒç´ å€¼![img](https://longlongqin.gitee.io/image_save/images/assets/v2-202fff7eae740ec4451258a92c96eda0_720w.jpg)å‰äº”ä¸ªåƒç´ çš„è¡¨ç¤º## æ— æŸå‹ç¼©ï¼šä¸€ç§å‹ç¼©æ–¹æ³•æ˜¯å‡å°‘é‡å¤ä¿¡æ¯ï¼Œæœ€ç®€å•çš„æ–¹æ³•å«æ¸¸ç¨‹ç¼–ç ï¼ˆRun-Length Encodingï¼‰ï¼Œé€‚åˆç»å¸¸å‡ºç°ç›¸åŒå€¼çš„æ–‡ä»¶ã€‚æ¯”å¦‚ä¸Šå›¾ä¸­æœ‰7ä¸ªè¿ç»­ç›¸åŒçš„é»„è‰²åƒç´ å—ï¼Œæˆ‘ä»¬å¯ä»¥æ’å…¥ä¸€ä¸ªé¢å¤–å­—èŠ‚æ¥è¡¨ç¤º7ä¸ªè¿ç»­é»„è‰²åƒç´ ï¼Œç„¶ååˆ æ‰åé¢é‡å¤çš„æ•°æ®ã€‚ä¸ºäº†è®©è®¡ç®—æœºåˆ†è¾¨å“ªäº›å­—èŠ‚æ—¶é•¿åº¦ï¼Œé‚£äº›å­—èŠ‚æ˜¯é¢œè‰²ï¼Œæ ¼å¼éœ€è¦ä¿æŒä¸€è‡´ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™æ‰€æœ‰åƒç´ å‰é¢éƒ½æ ‡ä¸Šé•¿åº¦ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ç°åœ¨åªéœ€è¦24ä¸ªå­—èŠ‚ï¼Œå¹¶ä¸”ä¸æŸå¤±ä»»ä½•ä¿¡æ¯ã€‚è¿™ä¸ªæ–¹æ³•ç§°ä¸ºæ— æŸå‹ç¼©ï¼ˆLossless Compressionï¼‰ï¼Œæ²¡æœ‰ä¸¢å¤±ä»»ä½•æ•°æ®ã€‚æ¸¸ç¨‹ç¼–ç å¦ä¸€ç§æ— æŸå‹ç¼©æ–¹æ³•å«åš**DFTBA**ï¼Œå®ƒç”¨æ›´ç´§å‡‘çš„æ–¹å¼æ¥è¡¨ç¤ºæ•°æ®å—ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå­—å…¸ï¼Œæ¥ä¿å­˜ä»£ç å’Œæ•°æ®ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥å°†å›¾åƒçœ‹æˆä¸€å—ä¸€å—ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä¸ªåƒç´ ï¼Œä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬å°†2ä¸ªåƒç´ å½“æˆä¸€ä¸ªå—ï¼Œç”±æ­¤æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹å›¾çš„4ä¸ªåƒç´ å¯¹ï¼Œæˆ‘ä»¬ä¼šå¯¹äº›åƒç´ å¯¹ç”Ÿæˆ**ç´§å‡‘ä»£ç ï¼ˆCompact Codesï¼‰**ã€‚è¿™äº›å—å‡ºç°é¢‘ç‡ä¸åŒï¼Œæˆ‘ä»¬é€šè¿‡éœå¤«æ›¼æ ‘çš„æ–¹æ³•å¯¹æ¯ä¸€ç§æƒ…å†µè¿›è¡Œç¼–ç ï¼Œä½¿å¾—é¢‘ç‡æœ€é«˜çš„å—ä»£ç æœ€çŸ­ã€‚ç„¶åæˆ‘ä»¬å°±èƒ½é€šè¿‡codeä»£æ›¿å—æ¥å¯¹å›¾åƒè¿›è¡Œå‹ç¼©ã€‚è¿™ä¸ªä¾‹å­ä¸­å°†48å­—èŠ‚çš„æ•°æ®å‹ç¼©æˆäº†14ä½ï¼Œä½†æ˜¯åŒæ ·ä¹Ÿè¦æŠŠå­—å…¸ä¿å­˜ä¸‹æ¥ï¼Œæ‰€ä»¥è¿˜éœ€è¦å°†å­—å…¸åŠ åˆ°æ•°æ®å‰é¢ï¼Œæ‰€ä»¥æ€»å…±æœ‰30å­—èŠ‚ã€‚ä½¿ç”¨éœå¤«æ›¼æ ‘ç”Ÿæˆçš„å—çš„ç¼–ç ![img](https://longlongqin.gitee.io/image_save/images/assets/v2-557e83d3f9b5d120457fb8fe3fc9df87_720w.png)å‹ç¼©ç»“æœ![img](https://longlongqin.gitee.io/image_save/images/assets/v2-e688a0f2a014255ed2e3c9ba38855ed5_720w.png)åŠ ä¸Šå­—å…¸åçš„å‹ç¼©ç»“æœ## æœ‰æŸå‹ç¼©ï¼šâ€œæ¶ˆé™¤å†—ä½™â€å’Œâ€œä½¿ç”¨æ›´ç´§å‡‘è¡¨ç¤ºæ–¹æ³•â€é€šå¸¸ä¼šç»„åˆèµ·æ¥ä¸€èµ·ä½¿ç”¨ï¼Œå‡ ä¹æ‰€æœ‰æ— æŸå‹ç¼©æ ¼å¼éƒ½ç”¨åˆ°å®ƒä»¬ã€‚æ— æŸå‹ç¼©å¯¹äºæ–‡æœ¬æ•°æ®ååˆ†é‡è¦ï¼Œä½†æ˜¯æœ‰å…¶ä»–ä¸€äº›æ•°æ®å³ä½¿ä¸¢å¤±äº†ä¸€éƒ¨åˆ†ä¹Ÿä¸ä¼šé€ æˆå¾ˆå¤§å½±å“ï¼Œé€šå¸¸ä¼šä¸¢å¤±äººä»¬æ— æ³•æ³¨æ„åˆ°çš„ä¿¡æ¯ï¼Œå¤§éƒ¨åˆ†æœ‰æŸå‹ç¼©æŠ€æœ¯ï¼ˆLossy Compressionï¼‰éƒ½ç”¨åˆ°äº†è¿™ç‚¹ã€‚ä»¥å£°éŸ³ä¸ºä¾‹ï¼Œäººç±»å¬åŠ›å¹¶ä¸æ˜¯å®Œç¾çš„ï¼Œæœ‰äº›é¢‘ç‡æˆ‘ä»¬å¯ä»¥æ•è·ï¼Œä½†æ˜¯ç±»ä¼¼äºè¶…å£°æ³¢è¿™ç±»çš„é¢‘ç‡æˆ‘ä»¬æ ¹æœ¬å¬ä¸è§ï¼Œæ‰€ä»¥å½•åˆ¶éŸ³ä¹æ—¶ï¼Œè¶…å£°æ³¢æ•°æ®æ˜¯å¯ä»¥ä¸¢å¼ƒçš„ï¼Œå…¶æ¬¡äººç±»å¯¹äººå£°ååˆ†æ•æ„Ÿï¼Œæ‰€ä»¥åº”è¯¥å°½å¯èƒ½ä¿æŒåŸæ ·ã€‚æœ‰æŸéŸ³é¢‘å‹ç¼©ï¼ˆLossy Audio Compressorsï¼‰é€šè¿‡ä¸åŒç²¾åº¦ç¼–ç ä¸åŒé¢‘æ®µï¼Œè¿™æ ·äººç±»å¬ä¸å‡ºä»€ä¹ˆåŒºåˆ«ï¼Œä¹Ÿä¸ä¼šæ˜æ˜¾å½±å“ä½“éªŒã€‚æ¯”å¦‚ç”µè¯ä¸­ä¹Ÿç”¨åˆ°äº†è¿™ä¸ªæŠ€æœ¯ï¼Œè¿™å°±ä½¿å¾—åœ¨ç”µè¯ä¸­çš„å£°éŸ³å’Œç°å®ä¸­æœ‰æ‰€å·®åˆ«ï¼Œç”¨è¿‡è¿™ä¸ªæŠ€æœ¯æ‰ä½¿å¾—æ›´å¤šäººåŒæ—¶æ‰“ç”µè¯ã€‚å¦‚æœç½‘é€Ÿå˜æ…¢ï¼Œå‹ç¼©ç®—æ³•å°±ä¼šåˆ æ‰æ›´å¤šçš„æ•°æ®ã€‚å‹ç¼©éŸ³é¢‘æ–‡ä»¶MP3å’Œæ²¡å‹ç¼©éŸ³é¢‘æ–‡ä»¶WAVæˆ–FLACå¤§å°å¯ä»¥ç›¸å·®10å€ã€‚è¿™ç§åˆ é™¤äººç±»æ— æ³•æ„ŸçŸ¥çš„æ•°æ®çš„æ–¹æ³•ç§°ä¸ºæ„ŸçŸ¥ç¼–ç ï¼ˆPerceptual Codingï¼‰ã€‚è¿™ä¹Ÿæ˜¯å„ç§æœ‰æŸå‹ç¼©å›¾åƒæ ¼å¼çš„åŸºç¡€ï¼Œæ¯”å¦‚JPEGï¼Œäººç±»çš„è§†è§‰ç³»ç»Ÿä¹Ÿä¸æ˜¯å®Œç¾çš„ï¼Œæˆ‘ä»¬æ¯”è¾ƒå–„äºçœ‹åˆ°å°–é”çš„å¯¹æ¯”ï¼Œæ¯”å¦‚ç‰©ä½“çš„è¾¹ç¼˜ï¼Œä½†æˆ‘ä»¬æ— æ³•çœ‹å‡ºé¢œè‰²çš„ç»†å¾®å˜åŒ–ã€‚JPEGç”±æ­¤å°†å›¾åƒåˆ†è§£æˆ8x8å¤§å°çš„åƒç´ å—ï¼Œç„¶ååˆ æ‰å¤§é‡é«˜é¢‘ç©ºé—´æ•°æ®ã€‚æ¯”å¦‚ä»¥ä¸‹è¿™å¼ å›¾ç‰‡ï¼Œå…¶ä¸­ä¸€ä¸ª8x8åƒç´ ï¼Œç”±äºæ¯ä¸ªåƒç´ éƒ½æœ‰ç»†å¾®å·®å¼‚ï¼Œæ‰€ä»¥æ— æŸå‹ç¼©æŠ€æœ¯å¾ˆéš¾å¯¹å…¶å‹ç¼©ï¼Œä½†æ˜¯äººçœ¼å¾ˆéš¾çœ‹å‡ºè¿™äº›ç»†å¾®å·®åˆ«ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ é™¤å¾ˆå¤šåƒç´ å€¼ï¼Œè¿™æ ·åªå 10%çš„åŸå§‹æ•°æ®ï¼Œå¹¶ä¸”å›¾åƒçœ‹èµ·æ¥æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚åŸå›¾ï¼›8x8åŸå§‹åƒç´ å—ï¼›8x8å‹ç¼©åƒç´ å—ï¼›å‹ç¼©å›¾åƒè§†é¢‘åªæ˜¯ä¸€é•¿ä¸²è¿ç»­å›¾ç‰‡ï¼Œæ‰€ä»¥å›¾ç‰‡çš„å¾ˆå¤šæ–¹é¢ä¹Ÿé€‚ç”¨äºè§†é¢‘ï¼Œä½†è§†é¢‘ä¹Ÿå¯ä»¥åšä¸€äº›å°æŠ€å·§ï¼Œå› ä¸ºå¸§ä¸å¸§ä¹‹é—´æœ‰å¾ˆå¤šç›¸åŒçš„åƒç´ ï¼Œç§°ä¸º**æ—¶é—´å†—ä½™ï¼ˆTemporal Redundancyï¼‰**ã€‚æˆ‘ä»¬ä¸éœ€æ¯ä¸€å¸§éƒ½ä¿å­˜è¿™äº›åƒç´ ï¼Œå¯ä»¥åªä¿å­˜å˜åŒ–äº†çš„éƒ¨åˆ†ã€‚æ›´é«˜çº§çš„è§†é¢‘å‹ç¼©æ ¼å¼ä¼šæ›´è¿›ä¸€æ­¥ï¼Œä»–ä»¬æ‰¾å‡ºå¸§å’Œå¸§ä¹‹é—´ç›¸ä¼¼çš„è¡¥ä¸ï¼Œç„¶åå¯¹ä»–ä»¬åº”ç”¨ç®€å•å˜æ¢ï¼Œæ¯”å¦‚ç§»åŠ¨ã€æ—‹è½¬ã€å˜äº®å’Œå˜æš—ï¼Œè¿™æ ·å°±ä¸ç”¨é‡å¤ä¿å­˜è¿™äº›ç›¸ä¼¼çš„è¡¥ä¸ï¼Œç›´æ¥å¯¹å…¶è¿›è¡Œå˜æ¢å°±è¡Œã€‚MPEG-4è§†é¢‘æ˜¯å¸¸è§çš„æ ‡å‡†ï¼Œå¯ä»¥æ¯”åŸæ–‡ä»¶å°20å€åˆ°200å€ã€‚ä½†æ˜¯å½“å‹ç¼©å¤ªä¸¥é‡æ—¶ï¼Œæ²¡æœ‰è¶³å¤Ÿç©ºé—´æ›´æ–°è¡¥ä¸å†…çš„åƒç´ ï¼Œå°±ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜ã€‚è¿‡åº¦å‹ç¼©é€ æˆçš„é”™è¯¯# 23ã€å±å¹•&2Då›¾åƒæ˜¾ç¤ºæ—©æœŸçš„æ–‡æœ¬ä»»åŠ¡é€šè¿‡æ‰“å°æœºæ˜¾ç¤ºï¼Œå› ä¸ºå±å¹•åˆ†è¾¨ç‡è¾ƒä½ï¼Œæ— æ³•æ˜¾ç¤ºæ¸…æ™°çš„æ–‡å­—ï¼Œè€Œå°†è®¡ç®—ç»“æœçš„æ–‡å­—æ‰“å°åœ¨çº¸ä¸Šï¼Œæœ‰æ›´é«˜çš„å¯¹æ¯”åº¦å’Œåˆ†è¾¨ç‡ï¼Œå±å¹•ä¸€èˆ¬åªç”¨äºè·Ÿè¸ªç¨‹åºçš„è¿è¡Œæƒ…å†µï¼Œæ¯”å¦‚å¯„å­˜å™¨çš„å€¼ï¼Œå¯ä»¥èŠ‚çº¦çº¸ï¼Œå¹¶ä¸”å±å¹•æ›´æ–°å¾ˆå¿«ï¼Œå¯¹ä¸´æ—¶å€¼å¾ˆåŒ¹é…ã€‚æœ€æ—©æœ€æœ‰å½±å“åŠ›çš„æ˜¯é˜´æå°„çº¿ç®¡ï¼ˆCathode Ray Tubeï¼ŒCRTï¼‰ï¼ŒåŸç†æ˜¯å°†ç”µå­å‘å°„åˆ°æœ‰ç£·å…‰ä½“æ¶‚å±‚çš„å±å¹•ä¸Šï¼Œå½“ç”µå­æ’å‡»æ¶‚å±‚æ—¶ï¼Œä¼šå‘å…‰å‡ åˆ†ä¹‹ä¸€ç§’ã€‚å¹¶ä¸”å› ä¸ºç”µå­æ˜¯å¸¦ç”µç²’å­ï¼Œæ‰€ä»¥è·¯å¾„å¯ä»¥é€šè¿‡ç£åœºè¿›è¡Œæ§åˆ¶ã€‚CRTè¿™æ ·å°±æœ‰ä¸¤ç§æ–¹æ³•æ¥ç»˜åˆ¶å›¾å½¢ï¼šå¼•å¯¼ç”µå­æŸæç»˜å‡ºå½¢çŠ¶ï¼Œç§°ä¸ºçŸ¢é‡æ‰«æï¼ˆVector Scanningï¼‰ã€‚å› ä¸ºå‘å…‰åªæŒç»­ä¸€å°ä¼šå„¿ï¼Œå¦‚æœé‡å¤é€Ÿåº¦è¶³å¤Ÿå¿«ï¼Œå°±èƒ½å¾—åˆ°æ¸…æ™°çš„å›¾åƒã€‚ç¬¬äºŒç§æ–¹æ³•æ˜¯æŒ‰ç…§å›ºå®šè·¯å¾„ï¼Œä¸€è¡Œè¡Œä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³ä¸æ–­é‡å¤ï¼Œåªåœ¨ç‰¹å®šçš„ç‚¹æ‰“å¼€ç”µå­æŸæ¥ç»˜åˆ¶å›¾å½¢ã€‚è¿™ç§æ–¹æ³•ç§°ä¸ºå…‰æ …æ‰«æï¼ˆRaster Scanningï¼‰ã€‚ç”¨è¿™ç§æ–¹æ³•å¯ä»¥ç”¨å¾ˆå¤šå°çº¿æ®µç»˜åˆ¶å›¾å½¢ï¼Œç”šè‡³æ–‡å­—ã€‚çŸ¢é‡æ‰«æå’Œå…‰æ …æ‰«æéšç€å±å¹•çš„å‘å±•ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ¸…æ™°çš„ç‚¹ï¼Œç§°ä¸º**åƒç´ ï¼ˆPixelï¼‰**ã€‚**æ¶²æ™¶æ˜¾ç¤ºå™¨ï¼ˆLiquid Crystal Displayï¼ŒLCDï¼‰**ä¹Ÿä½¿ç”¨å…‰æ …æ‰«æï¼Œæ¯ç§’æ›´æ–°å¤šæ¬¡åƒç´ é‡Œçº¢ç»¿è“çš„é¢œè‰²ã€‚LCDä½†æ˜¯æ—©æœŸè®¡ç®—æœºä¸ä½¿ç”¨åƒç´ ï¼Œå› ä¸ºå†…å­˜ä¸­éœ€è¦ä¿å­˜åƒç´ å¯¹åº”çš„å€¼ï¼Œä½¿å…¶å ç”¨å¤ªå¤šå†…å­˜ï¼Œæ‰€ä»¥éœ€è¦ä¸€äº›ç‰¹æ®ŠæŠ€å·§æ¥æ¸²æŸ“å›¾å½¢ï¼ŒçŸ¥é“å†…å­˜å‘å±•åˆ°è¶³å¤Ÿç”¨çš„åœ°æ­¥ã€‚æ‰€ä»¥æ—©æœŸè®¡ç®—æœºä¸ä¿å­˜å¤§é‡åƒç´ å€¼ï¼Œè€Œæ˜¯ç›´æ¥ä¿å­˜ç¬¦å·ï¼Œå…¶ä¸­80x25ä¸ªç¬¦å·æ˜¯æœ€ç»å…¸çš„ï¼Œè‹¥å¹²æ¯ä¸ªå­—ç¬¦ç”¨8ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œä¸€å…±ä¹Ÿæ‰16000ä½ã€‚ä¸ºæ­¤ï¼Œéœ€è¦ç‰¹æ®Šçš„ç¡¬ä»¶æ¥ä»å†…å­˜è¯»å–å­—ç¬¦ï¼Œè½¬æ¢æˆå…‰æ …å›¾å½¢ï¼Œè¿™æ ·æ‰èƒ½æ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œè¿™ä¸ªç§°ä¸ºå­—ç¬¦ç”Ÿæˆå™¨ï¼ˆCharacter Generatorï¼‰ï¼ŒåŸºæœ¬ç®—æ˜¯ç¬¬ä¸€ä»£æ˜¾å¡ã€‚æ˜¾å¡å†…éƒ¨æœ‰ä¸€å°å—åªè¯»å­˜å‚¨å™¨ï¼ˆRead Only Memoryï¼ŒROMï¼‰å­˜ç€æ¯ä¸ªå­—ç¬¦çš„å›¾å½¢ï¼Œç§°ä¸ºç‚¹é˜µå›¾æ¡ˆï¼ˆDot Matrix Patterï¼‰ã€‚å¦‚æœæ˜¾å¡çœ‹åˆ°æŸä¸ªå­—ç¬¦å¯¹åº”çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå®ƒå°±ä¼šæŠŠè¯¥å­—ç¬¦çš„ç‚¹é˜µå›¾æ¡ˆé€šè¿‡å…‰æ …æ‰«æçš„æ–¹å¼æ˜¾ç¤ºåœ¨å±å¹•çš„é€‚å½“ä½ç½®ã€‚ä¸ºäº†æ˜¾ç¤ºï¼Œå­—ç¬¦ç”Ÿæˆå™¨ä¼šè®¿é—®å†…å­˜ä¸­ä¸€å—ç‰¹æ®ŠåŒºåŸŸï¼Œè¿™å—åŒºåŸŸä¸“ä¸ºå›¾å½¢ä¿ç•™ï¼Œç§°ä¸ºå±å¹•ç¼“å†²åŒºï¼ˆScreen Bufferï¼‰ï¼Œç¨‹åºæƒ³æ˜¾ç¤ºæ–‡å­—æ—¶ï¼Œå°±ç›´æ¥ä¿®æ”¹ä¿å­˜åœ¨è¿™ä¸ªåŒºåŸŸçš„å€¼å°±è¡Œã€‚å­—ç¬¦ç”Ÿæˆå™¨è¿™ç§æ–¹æ¡ˆç”¨çš„å†…å­˜å¾ˆå°‘ï¼Œä½†åªèƒ½ç”»å­—ç¬¦åˆ°å±å¹•ä¸Šï¼Œæ— æ³•ç»˜åˆ¶ä»»æ„å½¢çŠ¶ã€‚ä¼ ç»Ÿçš„ASCIIç¼–ç çš„å­—ç¬¦é›†å¤ªå°ï¼Œåšä¸äº†å¾ˆå¤æ‚çš„äº‹æƒ…ï¼Œå› æ­¤å¯¹ASCIIè¿›è¡Œæ‰©å±•å¢åŠ æ›´å¤šçš„æ–°å­—ç¬¦ï¼Œæ¯”å¦‚ç”¨äºDOSçš„IBM CP437å­—ç¬¦é›†ï¼Œæœ‰äº›ç³»ç»Ÿè¿˜ä¼šç”¨é¢å¤–çš„bitæ¥å®šä¹‰å­—ä½“é¢œè‰²å’ŒèƒŒæ™¯é¢œè‰²ã€‚IBM CP437å­—ç¬¦é›†ä¸ºäº†ç»˜åˆ¶ä»»æ„å½¢çŠ¶ï¼ŒåŒæ—¶ä¸ä¼šå ç”¨å¤ªå¤šå†…å­˜ï¼Œå°±è¦ä½¿ç”¨CRTä¸Šçš„**çŸ¢é‡æ¨¡å¼**ã€‚æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ç”±ä¸€ç³»åˆ—çº¿æ¡ç»„æˆçš„ï¼Œå®Œå…¨ä¸éœ€è¦æœ‰æ–‡æœ¬çš„æ¦‚å¿µï¼Œå¦‚æœè¦æ˜¾ç¤ºæ–‡å­—ï¼Œç›´æ¥ç”¨ç”»çº¿çš„å½¢å¼è¿›è¡Œæ˜¾ç¤ºã€‚æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªæ—©æœŸé€‚é‡æ˜¾ç¤ºç³»ç»ŸVectrexçš„å‘½ä»¤ä¸ºä¾‹é¦–å…ˆä½¿ç”¨RESETå‘½ä»¤æ¥æ¸…ç©ºå±å¹•ï¼Œ åŒæ—¶å°†ç”µå­æªçš„ç»˜å›¾ç‚¹ç§»åŠ¨åˆ°åæ ‡(0,0)ï¼Œä¹Ÿå°±æ˜¯å±å¹•å·¦ä¸Šè§’ï¼Œå¹¶å°†çº¿çš„äº®åº¦è®¾ä¸º0ã€‚è°ƒç”¨MOVE_TO 50 50ï¼Œå°±ä¼šå°†ç»˜å›¾ç‚¹ç§»åŠ¨åˆ°åæ ‡(50,50)ã€‚ç„¶åä½¿ç”¨INTENSITY 100å°†å¼ºåº¦è®¾ä¸º100ï¼Œ ç„¶ååå¤è°ƒç”¨ä»¥ä¸Šå‘½ä»¤å°±ä¼šç»˜åˆ¶å‡ºå¯¹åº”å›¾å½¢ã€‚è¿™äº›å‘½ä»¤ä¹Ÿå°±å 160ä½ï¼Œæ¯”ç›´æ¥ä¿å­˜ä¸€ä¸ªåƒç´ çŸ©é˜µå¥½å¾ˆå¤šã€‚ç±»ä¼¼äºä¹‹å‰çš„å­—ç¬¦ç”Ÿæˆå™¨æŠŠå†…å­˜é‡Œçš„å­—ç¬¦è½¬æ¢æˆå›¾å½¢ä¸€æ ·ï¼Œè¿™äº›çŸ¢é‡æŒ‡ä»¤ä¹Ÿä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œé€šè¿‡çŸ¢é‡å›¾å½¢å¡ï¼ˆVector Graphics Cardï¼‰ç”»åœ¨å±å¹•ä¸Šã€‚ç„¶åé€šè¿‡æ•°ç™¾ä¸ªå‘½ä»¤æŒ‰åºä¿å­˜åœ¨å±å¹•ç¼“å†²åŒºä¸­ï¼Œå°±èƒ½ç»˜åˆ¶å‡ºååˆ†å¤æ‚çš„å›¾å½¢ã€‚å¹¶ä¸”å› ä¸ºè¿™äº›çŸ¢é‡éƒ½åœ¨å†…å­˜ä¸­ï¼Œç¨‹åºå°±å¯ä»¥æ›´æ–°è¿™äº›å€¼ï¼Œè®©å›¾å½¢éšæ—¶é—´è¿›è¡Œå˜åŒ–ï¼Œå°±å‡ºç°äº†åŠ¨ç”»ã€‚1962å¹´è¯ç”Ÿçš„Sketchpadæ˜¯ä¸€ä¸ªå·¨å¤§çš„é‡Œç¨‹ç¢‘ï¼Œå®ƒæ˜¯ä¸€ä¸ªäº¤äº’å¼å›¾å½¢ç•Œé¢ï¼Œç”¨äºè®¡ç®—æœºè¾…åŠ©è®¾è®¡ï¼ˆCADï¼‰ï¼Œå®ƒè¢«è®¤ä¸ºæ˜¯ç¬¬ä¸€ä¸ªå®Œæ•´çš„å›¾å½¢ç¨‹åºã€‚ä¸ºäº†ä¸å›¾å½¢ç•Œé¢è¿›è¡Œäº¤äº’ï¼ŒSketchpadä½¿ç”¨äº†è¾“å…¥è®¾å¤‡â€”â€”å…‰ç¬”ï¼Œå°±æ˜¯ä¸€ä¸ªæœ‰çº¿è¿ç€ç”µè„‘çš„è§¦æ§ç¬”ï¼Œç¬”å°–ç”¨å…‰çº¿ä¼ æ„Ÿå™¨ï¼Œå¯ä»¥æ£€æµ‹åˆ°æ˜¾ç¤ºå™¨çš„åˆ·æ–°ï¼Œå¹¶ä¸”é€šè¿‡åˆ¤æ–­åˆ·æ–°æ—¶é—´ï¼Œç”µè„‘ä¹Ÿå¯ä»¥çŸ¥é“ç¬”æ‰€åœ¨çš„ä½ç½®ã€‚ä½¿ç”¨å…‰ç¬”å’Œå„ç§æŒ‰é’®ï¼Œç”¨æˆ·å¯ä»¥ç”»çº¿å’Œå…¶ä»–å„ç§ç®€å•å›¾æ¡ˆã€‚æœ€æ—©çœŸæ­£ä½¿ç”¨åƒç´ çš„è®¡ç®—æœºå’Œæ˜¾ç¤ºå™¨å‡ºç°äº1960å¹´ä»£æœ«ã€‚å†…å­˜ä¸­çš„ä½å¯¹åº”å±å¹•ä¸Šçš„åƒç´ ï¼Œç§°ä¸ºä½å›¾æ˜¾ç¤ºï¼ˆBitmapped Displayï¼‰ï¼Œé€šè¿‡å¯¹åƒç´ çš„æ§åˆ¶ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå®Œå…¨ç»˜åˆ¶ä»»æ„çš„å›¾å½¢ã€‚å¯ä»¥å°†å›¾å½¢æƒ³è±¡æˆæ˜¯ä¸€ä¸ªå·¨å¤§åƒç´ å€¼çŸ©é˜µï¼Œä¹‹å‰è®¡ç®—æœºå°†åƒç´ æ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ä¸€ä¸ªç‰¹æ®ŠåŒºåŸŸï¼Œç§°ä¸ºå¸§ç¼“å†²åŒºï¼ˆFrame Bufferï¼‰ï¼Œä½†æ˜¯åæ¥ä¿å­˜åœ¨ç‰¹æ®Šçš„é«˜é€Ÿè§†é¢‘å†…å­˜ï¼ˆVideo RAMï¼ŒVRAMï¼‰ä¸­ï¼Œè¿™ä¸ªVRAMæ˜¯åœ¨æ˜¾å¡ä¸Šï¼Œè¿™æ ·è®¿é—®é€Ÿåº¦æ›´å¿«ã€‚åœ¨ä¸€ä¸ªåˆ†è¾¨ç‡æ˜¯60x35çš„8ä½ç°åº¦å±å¹•ä¸Šï¼Œæˆ‘ä»¬å¯ç”¨çš„é¢œè‰²èŒƒå›´æ˜¯0åˆ°255ã€‚å¦‚æœæˆ‘ä»¬æƒ³æŠŠ(10,10)å¤„çš„åƒç´ è®¾ä¸ºç™½è‰²ï¼Œå¯ä»¥ä½¿ç”¨frambuffer [10] [10]=255ï¼Œ å¦‚æœæˆ‘ä»¬æƒ³è¦ä»(30,0)åˆ°(30,35)ç”»ä¸€æ¡ç›´çº¿ï¼Œå¯ä»¥ä½¿ç”¨123FOR y&#x3D;0 TO 35 framebuffer[30][y]&#x3D;255NEXTä½¿ç”¨ç›¸åŒæ–¹æ³•ï¼Œé€šè¿‡ä¿®æ”¹åƒç´ å€¼å°±å¯ä»¥ç»˜åˆ¶ä»»æ„å›¾åƒã€‚å¹¶ä¸”ç¨‹åºå¯ä»¥æ“çºµå¸§ç¼“å†²åŒºå†…çš„åƒç´ æ•°æ®ï¼Œæ¥å®ç°äº¤äº’å¼å›¾å½¢ã€‚28ã€è®¡ç®—æœºç½‘ç»œç¬¬ä¸€ä¸ªè®¡ç®—æœºç½‘ç»œå‡ºç°åœ¨1950-1960å¹´ä»£ï¼Œé€šå¸¸åœ¨å…¬å¸æˆ–ç ”ç©¶å®¤å†…éƒ¨ä½¿ç”¨ï¼Œæ–¹ä¾¿ä¿¡æ¯äº¤æ¢ï¼Œç§°ä¸ºçƒé‹ç½‘ç»œï¼ˆSneakernetï¼‰ï¼Œç¬¬äºŒä¸ªå¥½å¤„åœ¨äºå…±äº«ç‰©ç†èµ„æºï¼Œæ¯”å¦‚ï¼Œä¸å…¶æ¯å°ç”µè„‘é…ä¸€å°æ‰“å°æœºï¼Œä¸å¦‚å¤§å®¶å…±äº«ä¸€å°è”ç½‘çš„æ‰“å°æœºã€‚å¹¶ä¸”æ—©æœŸç½‘ç»œä¹Ÿä¼šå…±äº«å­˜å‚¨ç©ºé—´ï¼Œå› ä¸ºä¸ºæ¯å°è®¡ç®—æœºéƒ½é…å­˜å‚¨å™¨å¤ªè¿‡æ˜‚è´µã€‚è®¡ç®—æœºè¿‘è·ç¦»æ„æˆçš„å°å‹ç½‘ç»œç§°ä¸ºå±€åŸŸç½‘ï¼ˆLocal Area Networkï¼ŒLANï¼‰ï¼Œå±€åŸŸç½‘èƒ½å°åˆ°æ˜¯åŒä¸€é—´æˆ¿é—´å†…çš„ä¸¤å°è®¡ç®—æœºï¼Œæˆ–è€…å¤§åˆ°æ ¡å›­å†…çš„ä¸Šåƒå°ç”µè„‘ã€‚å°½ç®¡å¼€å‘å’Œéƒ¨ç½²äº†å¾ˆå¤šä¸åŒçš„LANæŠ€æœ¯ï¼Œå…¶ä¸­æœ€è‘—åçš„æ˜¯â€œä»¥å¤ªç½‘ï¼ˆEthernetï¼‰â€ï¼Œä»¥å¤ªç½‘çš„æœ€ç®€å•å½¢å¼æ˜¯ï¼šä¸€æ¡ä»¥å¤ªç½‘ç”µçº¿è¿æ¥æ•°å°è®¡ç®—æœºï¼Œå½“ä¸€å°è®¡ç®—æœºè¦ä¼ æ•°æ®ç»™å¦ä¸€å°è®¡ç®—æœºæ—¶å®ƒä»¥ç”µä¿¡å·å½¢å¼ï¼Œå°†æ•°æ®ä¼ å…¥ç”µç¼†ä¸­ï¼Œç”±äºç”µç¼†æ˜¯å…±äº«çš„ï¼Œæ‰€ä»¥è¿æ¥åœ¨åŒä¸€ä¸ªç½‘ç»œé‡Œçš„å…¶ä»–è®¡ç®—æœºéƒ½èƒ½çœ‹åˆ°æ•°æ®ï¼Œä½†æ˜¯æ‰€æœ‰è®¡ç®—æœºéƒ½ä¸çŸ¥é“è¿™äº›æ•°æ®æ˜¯ç»™è‡ªå·±çš„è¿˜æ˜¯ç»™åˆ«äººçš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»¥å¤ªç½‘éœ€è¦æ¯å°è®¡ç®—æœºæœ‰å”¯ä¸€çš„åª’ä½“è®¿é—®æ§åˆ¶åœ°å€ï¼ˆMedia Access Control Addressï¼ŒMAC Addressï¼‰ï¼Œç„¶åå°†MACåœ°å€ä½œä¸ºæ•°æ®çš„å‰ç¼€å‘é€åˆ°ç½‘ç»œä¸­ï¼Œæ‰€ä»¥è®¡ç®—æœºåªéœ€è¦ç›‘å¬ä»¥å¤ªç½‘ç”µç¼†ï¼Œåªè¦çœ‹åˆ°è‡ªå·±çš„MACåœ°å€ï¼Œæ‰å»æ¥æ”¶å¤„ç†æ•°æ®ã€‚ç°åœ¨åˆ¶é€ çš„æ¯å°è®¡ç®—æœºéƒ½è‡ªå¸¦å”¯ä¸€çš„MACåœ°å€ï¼Œç”¨äºä»¥å¤ªç½‘å’Œæ— çº¿ç½‘ç»œã€‚ä»¥å¤ªç½‘ä½†æ˜¯å…±äº«è½½ä½“æœ‰ä¸ªå¾ˆå¤§çš„**å¼Šç«¯**ï¼šå½“ç½‘ç»œæµé‡æ¯”è¾ƒå°æ—¶ï¼Œè®¡ç®—æœºå¯ä»¥ç­‰å¾…è½½ä½“æ¸…ç©ºï¼Œç„¶åå†ä¼ è¾“ä»–ä»¬çš„æ•°æ®ã€‚ä½†éšç€ç½‘ç»œæµé‡ä¸Šå‡ï¼Œä¸¤å°è®¡ç®—æœºæƒ³åŒæ—¶å†™å…¥æ•°æ®çš„æ¦‚ç‡ä¹Ÿä¼šä¸Šå‡ï¼Œè¿™ç§°ä¸º**å†²çªï¼ˆCollisionï¼‰**ï¼Œå°±ä¼šä½¿å¾—ä¼ è¾“çš„æ•°æ®æ··ä¹±ã€‚å¹¸å¥½è®¡ç®—æœºèƒ½å¤Ÿç›‘å¬ç”µçº¿é‡Œçš„ä¿¡å·æ¥æ£€æµ‹å†²çªï¼Œæœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯çœ‹åˆ°å†²çªå°±åœæ­¢ä¼ è¾“ï¼Œç­‰å¾…ç½‘ç»œç©ºé—²åå†è¯•ä¸€æ¬¡ï¼Œé—®é¢˜æ˜¯å…¶ä»–è®¡ç®—æœºä¹Ÿæ˜¯è¿™æ ·æ‰“ç®—çš„ï¼Œå…¶ä»–ç­‰å¾…çš„è®¡ç®—æœºå¯èƒ½åœ¨ä»»ä½•åœé¡¿é—´éš™å°±é—¯å…¥å¼€å§‹ä¼ è¾“æ•°æ®ï¼Œè¿™å°±å¯¼è‡´äº†è¶Šæ¥è¶Šå¤šçš„å†²çªã€‚ä»¥å¤ªç½‘çš„è§£å†³æ–¹æ³•æ˜¯ï¼šå½“è®¡ç®—æœºæ£€æµ‹åˆ°å†²çªåï¼Œå°±ä¼šåœ¨é‡ä¼ ä¹‹å‰ç­‰å¾…ä¸€å°æ®µæ—¶é—´ï¼ˆå› ä¸ºè¦ä¸¾ä¾‹ï¼Œå‡è®¾æ˜¯ 1 ç§’å¥½äº†ï¼‰ï¼Œå½“ç„¶ å¦‚æœæ‰€æœ‰è®¡ç®—æœºç”¨åŒæ ·çš„ç­‰å¾…æ—¶é—´ æ˜¯ä¸è¡Œçš„ï¼Œå®ƒä»¬ä¼šåœ¨ä¸€ç§’åå†æ¬¡å†²çªã€‚æ‰€ä»¥åŠ å…¥ä¸€ä¸ªéšæœºæ—¶é—´ ä¸€å°è®¡ç®—æœºå¯èƒ½ç­‰1.3ç§’ï¼Œå¦ä¸€å°è®¡ç®—æœºç­‰å¾…1.5ç§’ ã€‚è¦æ˜¯è¿æ°”å¥½ ç­‰1.3ç§’çš„è®¡ç®—æœºä¼šé†’æ¥å‘ç°è½½ä½“æ˜¯ç©ºé—²çš„ ç„¶åå¼€å§‹ä¼ è¾“ ï¼Œå½“1.5ç§’çš„è®¡ç®—æœºé†’æ¥å ä¼šå‘ç°è½½ä½“è¢«å ç”¨ä¼šç­‰å¾…å…¶ä»–è®¡ç®—æœºå®Œæˆ ï¼Œæ¥ç›¸äº’é¿å¼€ã€‚å½“ç„¶è¿™ä¸ªå¹¶ä¸èƒ½å®Œå…¨è§£å†³é—®é¢˜ï¼Œè¿˜éœ€è¦ç”¨åˆ°å¦ä¸€ä¸ªæŠ€å·§ã€‚å¦‚æœä¸€å°è®¡ç®—æœºåœ¨ä¼ è¾“æ•°æ®æœŸé—´æ£€æµ‹åˆ°å†²çªï¼Œå°±ç­‰å¾…â€œ1ç§’+éšæœºæ—¶é—´â€ï¼Œä½†æ˜¯å¦‚æœå†æ¬¡å‘ç”Ÿå†²çªï¼Œå°±è¡¨æ˜æœ‰ç½‘ç»œæ‹¥å¡ï¼Œè¿™æ¬¡ä¸ç­‰1ç§’ï¼Œè€Œæ˜¯ç­‰2ç§’ ï¼Œå¦‚æœå†æ¬¡å‘ç”Ÿå†²çª ç­‰4ç§’ ç„¶å8ç§’ 16ç§’ç­‰ç­‰ï¼Œç›´åˆ°æˆåŠŸä¼ è¾“ã€‚å› ä¸ºè®¡ç®—æœºçš„é€€é¿ï¼Œå†²çªæ¬¡æ•°ä¼šå¤§å¹…å‡å°‘ï¼Œä½¿å¾—æ•°æ®èƒ½å¤Ÿå†æ¬¡æµåŠ¨èµ·æ¥ï¼Œç½‘ç»œå°±å˜å¾—é¡ºç•…äº†ã€‚è¿™ç§æŒ‡æ•°çº§å¢åŠ ç­‰å¾…æ—¶é—´çš„æ–¹æ³•ç§°ä¸ºæŒ‡æ•°é€€é¿ï¼ˆExponential Backoffï¼‰ï¼Œå¾ˆå¤šä»¥å¤ªç½‘å’ŒWiFiéƒ½ç”¨åˆ°è¿™ä¸ªæŠ€æœ¯ã€‚ä½†æ˜¯å³ä½¿æœ‰äº†ä»¥ä¸Šçš„æŠ€æœ¯ï¼Œæƒ³ç”¨ä¸€æ ¹ç½‘çº¿è¿æ¥æ•´ä¸ªå¤§å­¦çš„è®¡ç®—æœºè¿˜æ˜¯ä¸å¯èƒ½çš„ï¼Œä¸ºäº†å‡å°‘å†²çªåŒæ—¶æé«˜æ•ˆç‡ï¼Œæˆ‘ä»¬éœ€è¦å‡å°‘åŒä¸€è½½ä½“ä¸­è®¾å¤‡çš„æ•°é‡ï¼Œè½½ä½“å’Œå…¶ä¸­çš„è®¾å¤‡æ€»ç§°ä¸ºå†²çªåŸŸï¼ˆCollision Domainï¼‰ã€‚ä»¥ä¹‹å‰ä»¥å¤ªç½‘ä¸ºä¾‹ï¼Œä¸€æ ¹ç”µç¼†è¿æ¥äº†6å°è®¡ç®—æœºï¼Œè¿™ä¸ªç§°ä¸ºä¸€ä¸ªå†²çªåŸŸã€‚ä¸ºäº†å‡å°‘å†²çªï¼Œæˆ‘ä»¬å¯ä»¥ç”¨äº¤æ¢æœºï¼ˆSwitchï¼‰å°†å®ƒæ‹†æˆä¸¤ä¸ªå†²çªåŸŸã€‚äº¤æ¢æœºä½äºä¸¤ä¸ªæ›´å°çš„ç½‘ç»œä¹‹é—´ï¼Œåœ¨å¿…è¦æ—¶æ‰åœ¨ä¸¤ä¸ªç½‘ç»œä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œå¹¶ä¸”äº¤æ¢æœºä¼šè®°å½•ä¸€ä¸ªåˆ—è¡¨ï¼Œå†™ç€å“ªä¸ªMACåœ°å€ä½äºå“ªè¾¹ç½‘ç»œï¼Œæ‰€ä»¥å½“MAC Aæƒ³è¦ä¼ æ•°æ®ç»™MAC Cï¼Œäº¤æ¢æœºå°±ä¸ä¼šå°†æ•°æ®ä¼ åˆ°å¦ä¸€è¾¹çš„ç½‘ç»œï¼ŒåŒç†å¦‚æœMAC Eä¼ è¾“æ•°æ®ç»™MAC Fï¼Œäº¤æ¢æœºä¹Ÿä¸ä¼šå°†æ•°æ®ä¼ åˆ°ä¸Šé¢çš„ç½‘ç»œï¼Œè¿™ä½¿å¾—ä¸¤è¾¹çš„ä¼ è¾“èƒ½åŒæ—¶è¿›è¡Œã€‚ä½†æ˜¯å¦‚æœMAC Fæƒ³ä¼ æ•°æ®ç»™Aï¼Œæ•°æ®å°±ä¼šé€šè¿‡äº¤æ¢æœºï¼Œä½¿å¾—ä¸¤ä¸ªç½‘ç»œéƒ½ä¼šè¢«çŸ­æš‚å ç”¨ã€‚ä¸€ä¸ªä»¥å¤ªç½‘ä¸­åŠ å…¥ä¸€ä¸ªäº¤æ¢æœºå³ä½¿æœ€å¤§å‹çš„ç½‘ç»œâ€”â€”**äº’è”ç½‘ï¼ˆInternetï¼‰**ä¹Ÿæ˜¯è¿™æ ·æ„å»ºèµ·æ¥çš„ï¼Œæœ¬è´¨è¿˜æ˜¯å¤šä¸ªè¿åœ¨ä¸€èµ·çš„ç¨å°ä¸€ç‚¹çš„ç½‘ç»œï¼Œä½¿å¾—ä¸åŒç½‘ç»œé—´å¯ä»¥ä¼ é€’æ•°æ®ã€‚è€Œå¤§å‹ç½‘ç»œæœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œä»ä¸€å°ä¸»æœºåˆ°å¦ä¸€å°ä¸»æœºé€šå¸¸æœ‰å¤šæ¡çº¿è·¯ï¼ˆ**è§£å†³çš„ä¸»è¦é—®é¢˜**ï¼‰ï¼Œè¿™å°±å¼•å‡ºäº†å¦ä¸€ä¸ªè¯é¢˜â€”â€”**è·¯ç”±ï¼ˆRoutingï¼‰ï¼ˆç”¨æ¥é€‰æ‹©åˆé€‚è·¯çº¿çš„æ–¹æ³•ï¼‰**ã€‚å¤§å‹ç½‘ç»œï¼Œä¸¤å°ä¸»æœºä¹‹é—´å­˜åœ¨å¤šæ¡çº¿è·¯è¿æ¥ä¸¤å°ç›¸éš”é¥è¿œçš„è®¡ç®—æœºæˆ–ç½‘ç»œï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯åˆ†é…ä¸€æ¡ä¸“é—¨çš„é€šä¿¡çº¿è·¯ï¼Œæ—©æœŸçš„ç”µè¯ç³»ç»Ÿå°±æ˜¯è¿™æ ·è¿ä½œçš„ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸º**ç”µè·¯äº¤æ¢ï¼ˆCircuit Switchingï¼‰**ï¼Œå› ä¸ºæ˜¯å¯¹æ•´ä¸ªç”µè·¯è¿›è¡Œä¿®æ”¹ï¼Œæ¥è¿æ¥åˆ°æ­£ç¡®ç›®çš„åœ°ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•ä¸çµæ´»ä¸”ä»·æ ¼æ˜‚è´µï¼Œå¹¶ä¸”æ€»æœ‰é—²ç½®çš„è·¯çº¿ã€‚ä½†æ˜¯å¥½å¤„æ˜¯ä½ å¯ä»¥æœ€å¤§é™åº¦éšæ„ä½¿ç”¨ï¼Œæ— éœ€å…±äº«ã€‚å› æ­¤å†›é˜Ÿã€é“¶è¡Œå’Œå…¶ä»–ä¸€äº›æœºæ„ä¾ç„¶ä¼šè´­ä¹°ä¸“é—¨çº¿è·¯æ¥è¿æ¥æ•°æ®ä¸­å¿ƒã€‚ç”µè·¯äº¤æ¢ä¼ è¾“æ•°æ®çš„å¦ä¸€ç§æ–¹æ³•æ˜¯**æŠ¥æ–‡äº¤æ¢ï¼ˆMessage Switchingï¼‰**ï¼Œå°±åƒé‚®æ”¿ç³»ç»Ÿä¸€æ ·ã€‚ä¸åƒä¹‹å‰Aå’ŒBä¹‹é—´æœ‰ä¸€æ¡ä¸“æœ‰çº¿è·¯ï¼Œè¿™é‡Œæ¶ˆæ¯ä¼šç»è¿‡å¥½å‡ ä¸ªç«™ç‚¹ï¼Œå°±ç±»ä¼¼äºé‚®å¯„ä¿¡å°ï¼Œä¿¡å°ä¼šé€šè¿‡ä¸€ä¸ªä¸ªä¸­è½¬ç«™æœ€ç»ˆåˆ°è¾¾æ”¶ä»¶äººæ‰‹ä¸­ï¼Œæ¯ä¸ªç«™ç‚¹éƒ½çŸ¥é“ä¸‹ä¸€ç«™è¦å‘å¾€å“ªé‡Œï¼Œå› ä¸ºç«™ç‚¹éƒ½æœ‰è‡ªå·±ä¸€ä¸ª**è¡¨æ ¼**ï¼Œç”¨æ¥è®°å½•åˆ°è¾¾å„ä¸ªç›®çš„åœ°ï¼Œä¿¡ä»¶è¦å¦‚ä½•ä¼ é€’ã€‚æŠ¥æ–‡äº¤æ¢çš„**å¥½å¤„**æ˜¯ä½ å¯ä»¥ç”¨ä¸åŒçš„è·¯ç”±ï¼Œä½¿å¾—é€šä¿¡æ›´å¯é ã€‚æ¯”å¦‚å¦‚æœå…¶ä¸­ä¸€ä¸ªåŸå¸‚ç”±äºé™é›ªæ— æ³•æ¥æ”¶é‚®ä»¶æ—¶ï¼Œå°±èƒ½æ¢åˆ°å¦ä¸€ä¸ªåŸå¸‚ç»§ç»­ä¼ é€’æ•°æ®ã€‚è¿™é‡Œï¼ŒåŸå¸‚å°±ç›¸å½“äºç½‘ç»œä¸­çš„è·¯ç”±å™¨ä¸€æ ·ã€‚æŠ¥æ–‡äº¤æ¢> äº¤æ¢æœºæ˜¯è¿æ¥è‹¥å¹²ä¸ªä¸»æœºçš„æœºå™¨ï¼Œç”¨æ¥è§£å†³å†²çªåŸŸé—®é¢˜ã€‚ > > è·¯ç”±å™¨æ˜¯è¿æ¥ä¸»æœºã€è·¯ç”±å™¨ã€äº¤æ¢æœºçš„æœºå™¨ï¼Œç”¨æ¥æ„å»ºæ•°æ®ä¼ è¾“çš„çº¿è·¯ã€‚ä¿¡æ¯æ²¿ç€è·¯ç”±è·³è½¬çš„æ¬¡æ•°ç§°ä¸ºè·³æ•°ï¼ˆHop Countï¼‰ï¼Œé€šè¿‡è®°å½•è·³æ•°ï¼Œå¯ä»¥åˆ†è¾¨å‡ºè·¯ç”±é—®é¢˜ã€‚æ¯”å¦‚å½“è·¯ç”±Aè®¤ä¸ºåˆ°è¾¾ç›®çš„åœ°æœ€å¿«çš„ä¸‹ä¸€ä¸ªè·¯ç”±æ˜¯Bï¼Œå°±å°†ä¿¡æ¯ä¼ é€’ç»™è·¯ç”±Bï¼Œè€Œè·¯ç”±Båˆ™è®¤ä¸ºåˆ°è¾¾ç›®çš„åœ°æœ€å¿«çš„ä¸‹ä¸€ä¸ªè·¯ç”±æ˜¯Aï¼Œåˆå°†ä¿¡æ¯ä¼ é€’å›ç»™äº†è·¯ç”±Aï¼Œè¿™å°±ä½¿å¾—ä¿¡æ¯åœ¨è·¯ç”±Aå’ŒBä¹‹é—´è¸¢çš®çƒï¼Œä½†æ˜¯è¿™ç§é”™è¯¯å¯ä»¥é€šè¿‡åœ¨ä¿¡æ¯ä¸­å®æ—¶è®°å½•çš„è·³æ•°æ¥è§£å†³ï¼Œå¦‚æœæŸæ¡ä¿¡æ¯çš„è·³æ•°å¾ˆå¤§ï¼Œå°±è¯´æ˜è·¯ç”±æœ‰å‡ºé—®é¢˜ï¼Œè¿™ä¸ªç§°ä¸ºè·³æ•°é™åˆ¶ï¼ˆHop Limitï¼‰ã€‚è€ŒæŠ¥æ–‡äº¤æ¢çš„ç¼ºç‚¹ä¹‹ä¸€å°±æ˜¯å½“æŠ¥æ–‡è¾ƒå¤§æ—¶ï¼Œä¼šå µå¡ç½‘ç»œï¼Œå› ä¸ºè¿™é‡Œè¦æ±‚å°†æ•´ä¸ªæŠ¥æ–‡ä»ä¸€ä¸ªè·¯ç”±ä¼ åˆ°ä¸‹ä¸€ä¸ªè·¯ç”±åï¼Œæ‰èƒ½ç»§ç»­ä¼ é€’å…¶ä»–æŠ¥æ–‡ï¼Œå½“ä¼ è¾“å¤§æŠ¥æ–‡æ—¶ï¼Œå…¶ä»–æŠ¥æ–‡è¦ä¹ˆç­‰å¾…å®ƒä¼ é€’å®Œï¼Œè¦ä¹ˆé€‰æ‹©å¦ä¸€æ¡æ•ˆç‡è¾ƒä½çš„è·¯çº¿ã€‚è§£å†³æ–¹æ³•å°±æ˜¯å°†å¤§æŠ¥æ–‡åˆ†æˆå¾ˆå¤šå°å—ï¼Œç§°ä¸ºæ•°æ®åŒ…ï¼ˆPacketï¼‰ã€‚å’ŒæŠ¥æ–‡äº¤æ¢ä¸€æ ·ï¼Œæ¯ä¸ªæ•°æ®åŒ…éƒ½æœ‰ç½‘ç»œä¸­çš„ç›®çš„åœ°å€ï¼Œå› æ­¤è·¯ç”±å™¨çŸ¥é“è¦å‘é€åˆ°å“ªé‡Œï¼Œè¿™ä¸ªåœ°å€çš„å…·ä½“æ ¼å¼ç”±äº’è”ç½‘åè®®ï¼ˆInternet Protocolï¼ŒIPï¼‰å®šä¹‰ã€‚æ¯ä¸ªè”ç½‘çš„è®¡ç®—æœºéƒ½éœ€è¦ä¸€ä¸ªIPåœ°å€ï¼ˆIP Addressï¼‰ï¼Œä¾‹å¦‚172.217.7.238ã€‚MACåœ°å€ç”¨æ¥æ ‡è¯†æ¯æ¡è®¡ç®—æœºï¼Œè€ŒIPåœ°å€æ˜¯å¯¹æ•°æ®åŒ…è€Œè¨€çš„ã€‚è·¯ç”±å™¨ä¼šå¹³è¡¡ä¸å…¶ä»–è·¯ç”±å™¨ä¹‹é—´çš„è´Ÿè½½ï¼Œæ¥ç¡®ä¿ä¼ è¾“å¯ä»¥å¿«é€Ÿå¯é ï¼Œç§°ä¸ºæ‹¥å¡æ§åˆ¶ ï¼ˆCongestion Controlï¼‰ã€‚æœ‰æ—¶å€™ä¸€ä¸ªæŠ¥æ–‡çš„å¤šä¸ªæ•°æ®åŒ…ä¼šç»è¿‡ä¸åŒçº¿è·¯ï¼Œä½¿å¾—åˆ°è¾¾é¡ºåºä¹Ÿå¯èƒ½ä¸ç›¸åŒï¼Œè¿™å¯¹ä¸€äº›è½¯ä»¶æ¥è¯´æ˜¯å­˜åœ¨é—®é¢˜çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨IPä¹‹ä¸Šè¿˜æœ‰å…¶ä»–åè®®ï¼Œæ¯”å¦‚TCP/IPå¯ä»¥è§£å†³ä¹±åºé—®é¢˜ã€‚å°†æ•°æ®æ‹†åˆ†æˆå¤šä¸ªå°æ•°æ®åŒ…ï¼Œç„¶åé€šè¿‡çµæ´»çš„è·¯ç”±ä¼ é€’ï¼Œéå¸¸é«˜æ•ˆä¸”å®¹é”™ç‡é«˜ï¼Œè¿™ç§æ–¹æ³•ç§°ä¸ºåˆ†ç»„äº¤æ¢ï¼ˆPacket Switchingï¼‰ã€‚å®ƒçš„å¥½å¤„æ˜¯å¯ä»¥å»ä¸­å¿ƒåŒ–ï¼Œå°±æ²¡æœ‰å•ç‚¹å¤±è´¥é—®é¢˜ã€‚å¦‚ä»Šå…¨çƒçš„è·¯ç”±å™¨ååŒå·¥ä½œï¼Œæ‰¾å‡ºæœ€é«˜æ•ˆçš„çº¿è·¯ï¼Œç”¨å„ç§æ ‡å‡†åè®®ä¼ è¾“æ•°æ®ï¼Œæ¯”å¦‚å› ç‰¹ç½‘æ§åˆ¶ä¿¡æ¯åè®®ï¼ˆInternet Control Message Protocolï¼ŒICMPï¼‰å’Œè¾¹ç•Œç½‘å…³åè®®ï¼ˆBorder Gateway Protocolï¼ŒBGPï¼‰ã€‚ç½‘ç»œæ˜¯ä¸€å †ç®¡å­ç»„æˆçš„å—ï¼Ÿ é¢ ç®—æ˜¯å§ã€‚29ã€äº’è”ç½‘ä»»æ„è®¡ç®—æœºéƒ½å’Œä¸€ä¸ªå·¨å¤§çš„åˆ†å¸ƒå¼ç½‘ç»œè¿æ¥åœ¨ä¸€èµ·ï¼Œç§°ä¸ºäº’è”ç½‘ï¼ˆInternetï¼‰ã€‚å½“ä½ åœ¨å®¶ä¸­é€šè¿‡è®¡ç®—æœºè§‚çœ‹ç½‘ä¸Šè§†é¢‘æ—¶ï¼Œä½ çš„è®¡ç®—æœºé¦–å…ˆéœ€è¦è¿æ¥åˆ°å±€åŸŸç½‘LANï¼Œè¿™ä¸ªå±€åŸŸç½‘æ˜¯ç”±å®¶é‡ŒWiFiè·¯ç”±å™¨è¿æ¥çš„æ‰€æœ‰è®¾å¤‡ç»„æˆçš„ã€‚ç„¶åå®¶é‡Œçš„å±€åŸŸç½‘å†é€šè¿‡è·¯ç”±å™¨è¿æ¥åˆ°å¹¿åŸŸç½‘ï¼ˆWide Area Networkï¼ŒWANï¼‰ï¼Œå¹¿åŸŸç½‘çš„è·¯ç”±å™¨ä¸€èˆ¬å±äºä½ çš„äº’è”ç½‘æœåŠ¡æä¾›å•†ï¼ˆInternet Service Providerï¼ŒISPï¼‰ã€‚åœ¨å¹¿åŸŸç½‘é‡Œï¼Œé¦–å…ˆä¼šæœ‰ä¸€ä¸ªåŒºåŸŸæ€§è·¯ç”±å™¨ï¼Œæ¯”å¦‚è¦†ç›–ä½ æ‰€åœ¨è¡—åŒºçš„ä¸€ä¸ªè·¯ç”±å™¨ï¼Œç„¶åè¯¥è·¯ç”±å™¨ä¼šè¿æ¥åˆ°ä¸€ä¸ªæ›´å¤§çš„å¹¿åŸŸç½‘ä¸­ï¼Œæ¯”å¦‚è¦†ç›–ä½ æ‰€åœ¨çš„åŸå¸‚ï¼Œå¯èƒ½å†è·³è·ƒå‡ æ¬¡ï¼Œæœ€ç»ˆä¼šåˆ°è¾¾äº’è”ç½‘ä¸»å¹²ï¼Œä¸€èˆ¬ç”±ä¸€ç¾¤è¶…å¤§å‹ã€å¸¦å®½è¶…é«˜çš„è·¯ç”±å™¨ç»„æˆã€‚å³é¦–å…ˆä¼šè¿æ¥åˆ°ä½ å®¶é‡Œçš„WiFiè·¯ç”±å™¨æ„å»ºçš„å±€åŸŸç½‘ï¼Œç„¶åè¯¥è·¯ç”±å™¨å†è¿æ¥åˆ°ISPæä¾›çš„å¹¿åŸŸç½‘ä¸­ï¼Œè¯¥å¹¿åŸŸç½‘æ˜¯ç”±å¾ˆå¤šå±‚å±‚é€’è¿›çš„è·¯ç”±å™¨æ„æˆçš„ã€‚æ¯”å¦‚è¦ä»YouTubeä¸­è·å¾—è§†é¢‘ï¼Œæ•°æ®åŒ…é¦–å…ˆä¼šåˆ°è¾¾äº’è”ç½‘ä¸»å¹²ï¼Œæ²¿ç€ä¸»å¹²åˆ°è¾¾å¯¹åº”ä¿å­˜è¯¥è§†é¢‘æ–‡ä»¶çš„YouTubeæœåŠ¡å™¨ï¼Œå¯èƒ½è¿™é‡Œä¼šè·³4æ¬¡åˆ°è¾¾äº’è”ç½‘ä¸»å¹²ï¼Œç„¶åè·³ä¸¤æ¬¡ç©¿è¿‡äº’è”ç½‘ä¸»å¹²ï¼Œæœ€ç»ˆå†è·³4æ¬¡åˆ°è¾¾YouTubeæœåŠ¡å™¨ï¼Œæ‰€ä»¥æ€»å…±ä¼šè·³è·ƒ10æ¬¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡tracerouteæ¥çœ‹è·³è·ƒäº†å‡ æ¬¡ï¼š1234567891011121314Windowsä¸Šçš„Traceroute1.æŒ‰å¼€å§‹æŒ‰é’®2.è¾“å…¥â€œ CMDâ€ï¼Œç„¶åæŒ‰â€œ Enterâ€3.åœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œé”®å…¥â€œ tracert dftba.comâ€åœ¨Macä¸Šçš„Traceroute1.ç‚¹å‡»â€œè½¬åˆ°â€ä¸‹æ‹‰èœå•2.ç‚¹å‡»â€œå®ç”¨ç¨‹åºâ€3.æ‰“å¼€ç»ˆç«¯4.é”®å…¥â€œ traceroute dftba.comâ€Linuxä¸Šçš„Traceroute1.é€šè¿‡é”®å…¥CTRL + Alt + Tæ‰“å¼€ç»ˆç«¯2.è¾“å…¥ï¼šâ€œ traceroute dftba.comâ€é€šè¿‡tracerouteæŸ¥çœ‹åˆ°dftba.comä¸­è½¬çš„æ¬¡æ•°ç»å†äº†11æ¬¡ä¸­è½¬ã€‚ä½†æ˜¯æ•°æ®åŒ…åˆ°åº•æ˜¯æ€ä¹ˆä¼ é€’è¿‡å»çš„å‘¢ï¼Ÿå¦‚æœä¼ è¾“æ—¶æ•°æ®åŒ…ä¸¢å¤±äº†ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€æ—¶ï¼Œæµè§ˆå™¨æ€ä¹ˆçŸ¥é“æœåŠ¡å™¨çš„åœ°å€æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå°±åƒä¸ŠèŠ‚ä»‹ç»çš„ï¼Œäº’è”ç½‘æ˜¯ä¸€ä¸ªå·¨å¤§åˆ†å¸ƒå¼ç½‘ç»œï¼Œå¦‚æœè¦å‘é€çš„æ•°æ®è¾ƒå¤§ï¼Œåˆ†ç»„ä¼ è¾“å°±ä¼šå°†æ•°æ®æ‹†æˆä¸€ä¸ªä¸ªè¾ƒå°çš„æ•°æ®åŒ…è¿›è¡Œä¼ è¾“ã€‚å…¶ä¸­æ•°æ®åŒ…è¦æƒ³åœ¨äº’è”ç½‘ä¸Šè¿›è¡Œä¼ è¾“ï¼Œå°±è¦ç¬¦åˆäº’è”ç½‘åè®®ï¼ˆInternet Protocolï¼ŒIPï¼‰ã€‚ç±»ä¼¼äºé‚®å¯„æ‰‹å†™ä¿¡ä¸€èˆ¬ï¼Œæ¯å°ä¿¡éƒ½éœ€è¦ä¸€ä¸ªåœ°å€ï¼Œå¹¶ä¸”åœ°å€å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”ä¿¡çš„å¤§å°å’Œé‡é‡ä¹Ÿæ˜¯æœ‰é™åˆ¶çš„ï¼Œå¦åˆ™ä¿¡ä»¶å°±æ— æ³•é€è¾¾ã€‚IPæ•°æ®åŒ…ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› ä¸ºIPæ˜¯ä¸€ä¸ªéå¸¸åº•å±‚çš„åè®®ï¼Œæ•°æ®åŒ…çš„å¤´éƒ¨åªåŒ…å«ç›®æ ‡åœ°å€ï¼ˆIPåœ°å€ï¼‰ï¼Œæ„å‘³ç€å½“æ•°æ®åŒ…åˆ°è¾¾å¯¹æ–¹ç”µè„‘æ—¶ï¼Œè®¡ç®—æœºä¸çŸ¥é“è¦æŠŠæ•°æ®åŒ…äº¤ç»™å“ªä¸ªç¨‹åºï¼ˆæ¯”å¦‚QQæˆ–å¾®ä¿¡ï¼‰ï¼Œå› æ­¤éœ€è¦åœ¨IPä¹‹ä¸Šï¼Œå¼€å‘æ›´é«˜çº§çš„åè®®ã€‚æ•°æ®åŒ…çš„ç»“æ„æœ€ç®€å•å¸¸è§çš„åè®®ç§°ä¸ºç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆUser Datagram Protocolï¼ŒUDPï¼‰ã€‚UDPä¹Ÿæœ‰å¤´éƒ¨ï¼Œä½äºdata payloadé‡Œé¢ï¼Œåœ¨dataä¹‹å‰ã€‚UDPå¤´éƒ¨é‡Œé¢åŒ…å«äº†å¾ˆå¤šæœ‰ç”¨çš„ä¿¡æ¯ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯**ç«¯å£å·ï¼ˆPort Numberï¼‰**ï¼Œæ¯ä¸ªæƒ³è®¿é—®ç½‘ç»œçš„ç¨‹åºéƒ½è¦å‘æ“ä½œç³»ç»Ÿç”³è¯·ä¸€ä¸ªç«¯å£å·ã€‚æ‰€ä»¥å½“æ•°æ®åŒ…åˆ°è¾¾æ—¶ï¼Œæ¥æ”¶æ–¹çš„æ“ä½œç³»ç»Ÿä¼šè¯»å–UDPå¤´éƒ¨é‡Œçš„ç«¯å£å·ï¼Œæ¥ç¡®å®šè¯¥æ•°æ®åŒ…æ˜¯è¦äº¤ç»™å“ªä¸ªè½¯ä»¶çš„ã€‚UDPæ¯”å¦‚ Skype ä¼šç”³è¯·ç«¯å£ 3478ï¼Œå½“ä¸€ä¸ªæ•°æ®åŒ…åˆ°è¾¾æ—¶æ¥æ”¶æ–¹çš„æ“ä½œç³»ç»Ÿä¼šè¯» UDP å¤´éƒ¨ï¼Œè¯»é‡Œé¢çš„ç«¯å£å·å¦‚æœçœ‹åˆ°ç«¯å£å·æ˜¯ 3478ï¼Œå°±æŠŠæ•°æ®åŒ…äº¤ç»™ Skypeã€‚ç«¯å£å·![image-20200229170954885](assets/image-20200229170954885.png)IPåè®®é€šè¿‡IPåœ°å€æŠŠæ•°æ®åŒ…é€åˆ°æ­£ç¡®çš„è®¡ç®—æœºå†…ï¼›UDPé€šè¿‡æ•°æ®åŒ…é‡Œçš„ç«¯å£å·é€åˆ°æ­£ç¡®çš„ç¨‹åºã€‚åŒæ—¶UDPçš„å¤´éƒ¨ä¸­è¿˜æœ‰æ ¡éªŒå’Œï¼ˆChecksumï¼‰ï¼Œé€šè¿‡å¯¹æ•°æ®æ±‚å’Œæ¥æ£€æŸ¥æ•°æ®æ˜¯å¦æ­£ç¡®ã€‚å‡è®¾UDPæ•°æ®åŒ…é‡ŒåŸå§‹æ•°æ®æ˜¯89 111 33 32 58 41ï¼Œ æœ€ç®€å•çš„è®¡ç®—æ ¡éªŒå’Œçš„æ–¹å¼å°±æ˜¯ï¼Œåœ¨å‘é€æ•°æ®åŒ…ä¹‹å‰ï¼Œè®¡ç®—æœºä¼šæŠŠæ‰€æœ‰æ•°æ®åŠ åœ¨ä¸€èµ·ï¼Œè®¡ç®—å‡ºæ ¡éªŒå’Œ364ã€‚åœ¨UDPä¸­ï¼Œæ ¡éªŒå’Œæ˜¯ä»¥16ä½å½¢å¼å­˜å‚¨çš„ï¼Œå¦‚æœè®¡ç®—å‡ºæ¥çš„å’Œè¶…è¿‡16ä½èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼ï¼Œåˆ™é«˜ä½æ•°ä¼šè¢«ä¸¢å¼ƒï¼Œåªä¿ç•™ä½ä½ã€‚å½“æ¥æ”¶æ–¹è®¡ç®—æœºæ¥æ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…æ—¶ï¼Œä¹Ÿä¼šé‡å¤ä»¥ä¸Šè¿‡ç¨‹ï¼Œå¦‚æœè®¡ç®—å‡ºæ¥çš„æ ¡éªŒå’Œå’ŒUDPä¸­ä¿å­˜çš„æ ¡éªŒå’Œç›¸åŒï¼Œä»£è¡¨æ•°æ®æ˜¯æ­£å¸¸çš„ï¼Œå¦åˆ™æ•°æ®æ˜¯å‡ºé”™çš„ã€‚ä½†æ˜¯ï¼ŒUDPä¸æä¾›æ•°æ®ä¿®å¤æˆ–æ•°æ®é‡å‘æœºåˆ¶ï¼Œå½“æ¥æ”¶æ–¹çŸ¥é“æ•°æ®æŸååï¼Œä¸€èˆ¬åªæ˜¯ä¸¢å¼ƒè¿™ä¸ªæ•°æ®åŒ…ã€‚å¹¶ä¸”å½“å‘é€æ–¹ä½¿ç”¨UDPåè®®å‘é€æ•°æ®åŒ…æ—¶ï¼Œæ˜¯æ— æ³•å¾—çŸ¥æ•°æ®åŒ…æ˜¯å¦åˆ°è¾¾ç›®çš„åœ°çš„ã€‚æœ‰äº›ç¨‹åºå¹¶ä¸åœ¨æ„ä»¥ä¸Šé—®é¢˜ï¼Œå› ä¸ºUDPååˆ†ç®€å•ä¸”å¿«é€Ÿã€‚æ¯”å¦‚è§†é¢‘é€šå¸¸ä½¿ç”¨UDPåè®®ï¼Œå½“æ•°æ®åŒ…ä¸¢å¤±æ—¶ï¼Œä¹Ÿå°±é€ æˆè§†é¢‘å¡é¡¿ã€‚ä½†æ˜¯æœ‰äº›æ•°æ®ä¸èƒ½æ¥å—æ•°æ®åŒ…ä¸¢å¤±çš„é—®é¢˜ï¼Œæ¯”å¦‚å‘é€ç”µå­é‚®ä»¶æ—¶ï¼Œæ‰€æœ‰æ•°æ®å¿…é¡»åˆ°è¾¾ï¼Œæ‰€ä»¥å°±éœ€è¦ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTransmission Control Protocolï¼ŒTCPï¼‰ã€‚å’ŒUDPä¸€æ ·ï¼Œå®ƒçš„å¤´éƒ¨ä¹Ÿä¿å­˜åœ¨æ•°æ®ä¹‹å‰ï¼Œäººä»¬é€šå¸¸å°†IPåè®®å’ŒTCPåè®®ç»Ÿç§°ä¸ºTCP/IPåè®®ã€‚TCPçš„å¤´éƒ¨ä¸­ä¹ŸåŒ…å«ç«¯å£å·å’Œæ ¡éªŒå’Œï¼Œå¹¶ä¸”TCPåè®®è¿˜æä¾›æ›´é«˜çº§çš„åŠŸèƒ½ï¼šTCP1. TCPçš„æ•°æ®åŒ…æ˜¯æœ‰åºå·çš„ï¼Œä½¿å¾—æ¥æ”¶æ–¹å¯ä»¥é€šè¿‡è¿™ä¸ªåºå·å°†æ•°æ®åŒ…æ’æˆæ­£ç¡®é¡ºåºï¼Œå³ä½¿åˆ°è¾¾æ—¶é—´ä¸åŒã€‚ 2. TCPè¦æ±‚æ¥æ”¶æ–¹çš„ç”µè„‘æ”¶åˆ°æ•°æ®åŒ…å¹¶æ ¡éªŒå’Œæ£€æŸ¥æ— è¯¯åï¼Œéœ€è¦ç»™å‘é€æ–¹å‘é€ä¸€ä¸ª**ç¡®è®¤ç ï¼ˆAcknowledgementï¼ŒACKï¼‰**ï¼Œä»£è¡¨æ•°æ®åŒ…å·²ç»æ­£ç¡®æ¥æ”¶ã€‚å½“å‘é€æ–¹æ¥æ”¶åˆ°ç¡®è®¤ç åï¼Œå°±çŸ¥é“ä¸Šä¸€ä¸ªæ•°æ®åŒ…æˆåŠŸæŠµè¾¾äº†ï¼Œå‘é€æ–¹å°±ä¼šå‘é€ä¸‹ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå¦‚æœè¿™æ¬¡å‘é€æ–¹è¿‡äº†ä¸€æ®µæ—¶é—´æ²¡æœ‰æ¥æ”¶åˆ°ç¡®è®¤ç ï¼Œåˆ™ä¼šé‡æ–°å‘é€ä¸€æ¬¡ã€‚å³ä½¿è¿™é‡Œåªæ˜¯ç”±äºç¡®è®¤ç å»¶è¿Ÿäº†ï¼Œä½¿å¾—æ¥æ”¶æ–¹é‚£é‡Œæœ‰é‡å¤çš„æ•°æ®åŒ…ï¼Œä½†æ˜¯é€šè¿‡åºåˆ—å·ï¼Œå¯ä»¥ç›´æ¥åˆ é™¤é‡å¤çš„æ•°æ®åŒ…ã€‚å¹¶ä¸”æ•°æ®åŒ…å¹¶ä¸ä¼šä¸€ä¸ªä¸ªæ•°æ®åŒ…è¿›è¡Œä¼ è¾“ï¼Œè€Œæ˜¯åŒæ—¶å‘é€å¤šä¸ªæ•°æ®åŒ…ï¼ŒåŒæ—¶æ¥æ”¶å¤šä¸ªç¡®è®¤ç (ACK)ï¼Œè¿™å°†å¤§å¤§æé«˜æ•ˆç‡ï¼Œä¸ç”¨æµªè´¹æ—¶é—´ç­‰å¾…ç¡®è®¤ç ã€‚å¹¶ä¸”é€šè¿‡ç¡®è®¤ç çš„æˆåŠŸç‡å’Œæ¥å›æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥æ¨æµ‹ç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼ŒTCPé€šè¿‡è¿™ä¸ªä¿¡æ¯ï¼Œæ¥è°ƒæ•´åŒæ—¶å‘åŒ…æ•°é‡æ¥è§£å†³æ‹¥å¡é—®é¢˜ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒTCPå¯ä»¥å¤„ç†ä¹±åºå’Œä¸¢åŒ…é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®æ‹¥å¡æƒ…å†µè‡ªåŠ¨è°ƒæ•´ä¼ è¾“ç‡ã€‚ä½†æ˜¯ç”±äºç¡®è®¤ç æ•°æ®åŒ…çš„å­˜åœ¨ï¼Œä½¿å¾—TCPéœ€è¦ä¼ è¾“çš„æ•°æ®åŒ…æ•°é‡ç¿»äº†ä¸€å€ï¼Œå¹¶ä¸”å¹¶æ²¡æœ‰ä¼ è¾“æ›´å¤šä¿¡æ¯ï¼Œè¿™å¯¹æ—¶é—´è¦æ±‚å¾ˆé«˜çš„ç¨‹åºä»£ä»·å¤ªé«˜ï¼Œæ‰€ä»¥è¿™ç±»ç¨‹åºå°±ä¼šä½¿ç”¨UDPåè®®ï¼ˆæ¯”å¦‚å°„å‡»ç±»æ¸¸æˆï¼‰ã€‚å½“è®¡ç®—æœºè®¿é—®ä¸€ä¸ªç½‘ç«™æ—¶ï¼Œéœ€è¦ä¸¤ä¸ªä¸œè¥¿ï¼šIPåœ°å€ï¼ˆç›®æ ‡ç½‘ç«™çš„åœ°å€ï¼‰å’Œ ç«¯å£å·ï¼ˆå¯¹åº”äºä½ ä½¿ç”¨çš„è®¡ç®—æœºæµè§ˆå™¨ï¼‰ï¼ˆä¾‹å¦‚ï¼šä¾‹å¦‚ 172.217.7.238 çš„ 80 ç«¯å£ è¿™æ˜¯è°·æ­Œçš„ IP åœ°å€å’Œç«¯å£å·ï¼‰ã€‚ä½†æ˜¯é€šè¿‡IPåœ°å€è®¿é—®ç½‘ç«™ååˆ†ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥äº’è”ç½‘æä¾›ä¸€ä¸ªç‰¹æ®ŠæœåŠ¡ï¼Œæ¥å°†åŸŸåï¼ˆDomain Nameï¼‰å’ŒIPåœ°å€ä¸€ä¸€å¯¹åº”ï¼Œç§°ä¸ºåŸŸåç³»ç»Ÿï¼ˆDimain Name Systemï¼ŒDNSï¼‰ï¼Œä¸€èˆ¬DNSæœåŠ¡å™¨éƒ½æ˜¯ç”±ISPæä¾›çš„ã€‚å½“ä½ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘ç«™åŸŸåæ—¶ï¼Œæµè§ˆå™¨å°±ä¼šå»è®¿é—®DNSæœåŠ¡å™¨ï¼ŒDNSå°±ä¼šå»æŸ¥è¡¨ï¼Œå¦‚æœåŸŸåå­˜åœ¨ï¼Œåˆ™ä¼šè¿”å›æµè§ˆå™¨å¯¹åº”IPåœ°å€ï¼Œç„¶åæµè§ˆå™¨å°±ä¼šç»™è¿™ä¸ªIPåœ°å€å‘é€TCPè¯·æ±‚ã€‚å› ä¸ºå½“å‰åŸŸåç‰¹åˆ«å¤šï¼Œæ‰€ä»¥DNSä¸ä¼šå°†å…¶ä¿å­˜æˆåˆ—è¡¨å½¢å¼ï¼Œè€Œæ˜¯å°†å…¶ä¿å­˜æˆæ ‘çŠ¶ç»“æ„ã€‚æœ€é¡¶å±‚æ˜¯é¡¶çº§åŸŸåï¼ˆTop Level Domainï¼ŒTLDï¼‰ï¼Œæ¯”å¦‚.comå’Œ.govï¼›ä¸‹ä¸€å±‚æ˜¯äºŒçº§åŸŸåï¼ˆSecond Level Domainï¼‰ï¼Œ æ¯”å¦‚google.comå’Œdftba.comï¼›å†ä¸‹ä¸€å±‚æ˜¯å­åŸŸåï¼ˆSub-domainï¼‰ï¼Œæ¯”å¦‚images.google.comç­‰ç­‰ã€‚ç”±äºè¿™ä¸ªæ ‘ç»“æ„ç‰¹åˆ«å¤§ï¼Œå› æ­¤è¿™äº›æ•°æ®åˆ†å¸ƒåœ¨å¾ˆå¤šDNSæœåŠ¡å™¨ä¸Šï¼Œä¸åŒæœåŠ¡å™¨è´Ÿè´£æ ‘çš„ä¸åŒéƒ¨åˆ†ã€‚åŸŸç»“æ„æ€»ç»“ä¸Šä¸¤èŠ‚ï¼ˆ28ã€29ï¼‰çš„å†…å®¹ï¼Œå…¶å®è®¡ç®—æœºç½‘ç»œåˆ†æˆå¾ˆå¤šå±‚æ¬¡ï¼Œæ¥ä¸‹æ¥ä»æœ€åº•å±‚åˆ°æœ€é«˜å±‚ï¼šç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰ï¼Œæ¯”å¦‚çº¿è·¯ä¸­çš„ç”µä¿¡å·ï¼Œä»¥åŠæ— çº¿ç½‘ç»œä¸­çš„æ— çº¿ä¿¡å·ã€‚æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰è´Ÿè´£æ“æ§ç‰©ç†å±‚ï¼Œå…¶ä¸­åŒ…å«MACåœ°å€ã€å†²çªæ£€æµ‹ã€æŒ‡æ•°å›é€€ä»¥åŠå…¶ä»–ä¸€äº›åº•å±‚åè®®ã€‚ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰è´Ÿè´£å„ç§æŠ¥æ–‡äº¤æ¢å’Œè·¯ç”±æŠ€æœ¯ã€‚ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰è´Ÿè´£åœ¨è®¡ç®—æœºä¹‹é—´è¿›è¡Œç‚¹åˆ°ç‚¹çš„ä¼ è¾“ï¼Œè¿˜ä¼šæ£€æµ‹å’Œä¿®å¤é”™è¯¯ï¼Œæ¯”å¦‚UDPå’ŒTCPåè®®ã€‚ä¼šè¯å±‚ï¼ˆSession Layerï¼‰ä¼šä½¿ç”¨TCPå’ŒUDPæ¥åˆ›å»ºè¿æ¥ï¼Œä¼ é€’ä¿¡æ¯ï¼Œç„¶åå…³æ‰è¿æ¥ã€‚ä»¥ä¸Šæ˜¯å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šä¿¡å‚è€ƒæ¨¡å‹ï¼ˆOpen System Interconnection modelï¼ŒOSIï¼‰ä¸‹çš„5å±‚ï¼Œè¿™ä¸ªæ¡†æ¶å°†ç½‘ç»œé€šä¿¡åˆ’åˆ†æˆäº†å¾ˆå¤šå±‚ï¼Œæ¯ä¸€å±‚å¤„ç†å„è‡ªçš„é—®é¢˜ã€‚è¿™ç§æŠ½è±¡å¯ä»¥ä½¿å¾—åˆ†å·¥æ”¹è¿›å¤šä¸ªå±‚ï¼Œè€Œæ— éœ€è€ƒè™‘æ•´ä½“å¤æ‚æ€§ã€‚å¹¶ä¸”OSIè¿˜æœ‰é¢å¤–ä¸¤å±‚ï¼šè¡¨ç¤ºå±‚ï¼ˆPresentation Layerï¼‰å’Œåº”ç”¨å±‚ï¼ˆApplication Layerï¼‰ï¼Œåœ¨ä¸‹ä¸€èŠ‚ä¸­è¿›è¡Œä»‹ç»ã€‚30ã€ä¸‡ç»´ç½‘å‰ä¸¤èŠ‚ä»‹ç»çš„ä¸œè¥¿å…±åŒç»„æˆäº†äº’è”ç½‘ï¼Œè¿™ä¸€èŠ‚å°†å‘ä¸ŠæŠ½è±¡ä¸€å±‚ï¼Œæ¥è®¨è®ºä¸‡ç»´ç½‘ï¼ˆWorld Wide Webï¼‰ã€‚ä¸‡ç»´ç½‘å’Œäº’è”ç½‘çš„æ¦‚å¿µå®Œå…¨ä¸åŒï¼Œä¸‡ç»´ç½‘æ˜¯è¿è¡Œäºäº’è”ç½‘ä¹‹ä¸Šçš„ï¼Œè¿˜æœ‰å…¶ä»–æ¯”å¦‚Skypeã€Instagramç­‰ä¹Ÿæ˜¯è¿è¡Œåœ¨äº’è”ç½‘ä¹‹ä¸Šçš„ã€‚äº’è”ç½‘æ˜¯ç”¨æ¥ä¼ è¾“æ•°æ®çš„ç®¡é“ï¼Œå„ç§ç¨‹åºéƒ½ä¼šä½¿ç”¨åˆ°ï¼Œå…¶ä¸­ä¼ è¾“æœ€å¤šæ•°æ®çš„ç¨‹åºå°±æ˜¯ä¸‡ç»´ç½‘ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„ç¨‹åºâ€”â€”æµè§ˆå™¨ï¼ˆWeb Browserï¼‰æ¥è®¿é—®ä¸‡ç»´ç½‘ã€‚ä¸‡ç»´ç½‘çš„æœ€åŸºæœ¬å•ä½æ˜¯å•ä¸ªé¡µé¢ï¼Œé‡Œé¢åŒ…å«å†…å®¹ï¼Œä¹Ÿæœ‰è®¿é—®å…¶ä»–é¡µé¢çš„é“¾æ¥ï¼Œè¿™äº›é“¾æ¥ç§°ä¸ºè¶…é“¾æ¥ï¼ˆHyperlinkï¼‰ã€‚è¿™äº›è¶…é“¾æ¥å½¢æˆå·¨å¤§çš„äº’è”ç½‘ç»œï¼Œè¿™ä¹Ÿæ˜¯ä¸‡ç»´ç½‘åå­—çš„ç”±æ¥ã€‚å¹¶ä¸”ç”±äºæ–‡å­—è¶…é“¾æ¥çš„å¼ºå¤§ï¼Œå®ƒæœ‰ä¸€ä¸ªç‰¹æ®Šçš„åå­—â€”â€”è¶…æ–‡æœ¬ï¼ˆHypertextï¼‰ã€‚å¦‚ä»Šè¶…æ–‡æœ¬æœ€å¸¸æŒ‡å‘çš„æ˜¯å¦ä¸€ä¸ªé¡µé¢ï¼Œè¿™äº›é¡µé¢ä¼šè¢«è·å–å¹¶ç”±æµè§ˆå™¨è¿›è¡Œæ¸²æŸ“ã€‚ä¸ºäº†ä½¿ç½‘é¡µèƒ½å¤Ÿäº’ç›¸è¿æ¥ï¼Œæ¯ä¸ªç½‘é¡µéœ€è¦ä¸€ä¸ªå”¯ä¸€çš„åœ°å€ï¼Œè¿™ä¸ªåœ°å€ç§°ä¸ºç»Ÿä¸€èµ„æºå®šä½å™¨ï¼ˆUniform Resource Locatorï¼ŒURLï¼‰ï¼Œæ¯”å¦‚thecrashcourse.com/courseså°±æ˜¯ä¸€ä¸ªé¡µé¢URLã€‚å½“ä½ è®¿é—®thecrashcourse.comç½‘å€æ—¶ï¼Œè®¡ç®—æœºé¦–å…ˆä¼šè¿›è¡ŒDNSæŸ¥è¯¢ï¼Œè¿™é‡Œè¾“å…¥ä¸€ä¸ªåŸŸåï¼Œç„¶åDNSå°±ä¼šè¿”å›ç»™æµè§ˆå™¨å¯¹åº”çš„è®¡ç®—æœºIPåœ°å€ã€‚ç„¶åæµè§ˆå™¨å°±ä¼šæ‰“å¼€ä¸€ä¸ªTCPè¿æ¥åˆ°è¿™ä¸ªIPåœ°å€å¯¹åº”çš„è®¡ç®—æœºä¸Šï¼Œè€Œè¿™ä¸ªè®¡ç®—æœºè¿è¡Œç€ä¸€ä¸ªç‰¹æ®Šçš„è½¯ä»¶â€”â€”ç½‘ç»œæœåŠ¡å™¨ï¼ˆWeb Serverï¼‰ï¼Œç½‘ç»œæœåŠ¡å™¨çš„æ ‡å‡†ç«¯å£æ˜¯80ã€‚æ­¤æ—¶ï¼Œä½ çš„è®¡ç®—æœºå°±è¿æ¥åˆ°äº†thecrashcourse.comå¯¹åº”çš„æœåŠ¡å™¨äº†ï¼Œä¸‹ä¸€æ­¥æ˜¯å‘æœåŠ¡å™¨è¯·æ±‚courses é¡µé¢ï¼Œè¿™é‡Œå°±ä¼šç”¨åˆ°è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHypertext Transfer Protocolï¼ŒHTTPï¼‰ã€‚HTTPçš„ç¬¬ä¸€ä¸ªæ ‡å‡†æ˜¯1991å¹´åˆ›å»ºçš„HTTP 0.9ï¼Œåªæœ‰ä¸€ä¸ªæŒ‡ä»¤GET ã€‚å› ä¸ºè¿™é‡Œæˆ‘ä»¬æƒ³è¦è·å–coursesé¡µé¢ï¼Œ æˆ‘ä»¬å¯ä»¥ç›´æ¥å‘æœåŠ¡å™¨å‘é€æŒ‡ä»¤GET/coursesï¼Œ è¯¥æŒ‡ä»¤ä»¥ASCIIç¼–ç å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›è¯¥ç½‘å€å¯¹åº”çš„é¡µé¢ï¼Œç„¶åæµè§ˆå™¨å°±ä¼šå°†å…¶æ¸²æŸ“åˆ°å±å¹•ä¸Šã€‚å¦‚æœç”¨æˆ·ç‚¹å‡»äº†å¦ä¸€ä¸ªé“¾æ¥ï¼Œè®¡ç®—æœºå°±ä¼šé‡æ–°å‘é€ä¸€ä¸ªGETè¯·æ±‚ã€‚åœ¨ä¹‹åçš„ç‰ˆæœ¬ä¸­ï¼ŒHTTPæ·»åŠ äº†æ–°çš„çŠ¶æ€ç ï¼Œä¼šå°†å…¶æ”¾åœ¨è¯·æ±‚é¡µé¢çš„å‰é¢ï¼Œæ¯”å¦‚çŠ¶æ€ç 200è¡¨ç¤ºç½‘é¡µè¢«æ­£ç¡®æ‰¾åˆ°äº†ï¼ŒçŠ¶æ€ç 400-499ä»£è¡¨å®¢æˆ·ç«¯å‡ºé”™ã€‚å› ä¸ºè¶…æ–‡æœ¬çš„å­˜å‚¨å’Œå‘é€éƒ½æ˜¯ä»¥æ™®é€šæ–‡æœ¬å½¢å¼è¿›è¡Œçš„ï¼Œç¼–ç å¯èƒ½æ˜¯ASCIIæˆ–è€…UTF-8ï¼Œè¿™æ ·å°±æ— æ³•è¡¨æ˜ä»€ä¹ˆæ˜¯é“¾æ¥ï¼Œä»€ä¹ˆåªæ˜¯æ™®é€šçš„æ–‡æœ¬äº†ï¼Œæ‰€ä»¥å¿…é¡»å¼€å‘ä¸€ç§æ ‡è®°æ–¹æ³•ï¼Œå› æ­¤å‡ºç°äº†è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼ˆHypertext Markup Languageï¼ŒHTMLï¼‰ï¼Œç¬¬ä¸€ä»£HTMLåˆ›å»ºäº1990å¹´çš„0.8ç‰ˆæœ¬ï¼Œæœ‰18ç§æŒ‡ä»¤ã€‚åˆ¶ä½œä¸€ä¸ªç®€å•çš„ç½‘é¡µç»¼ä¸Šï¼Œç½‘ç»œæµè§ˆå™¨å¯ä»¥å’Œç½‘ç»œæœåŠ¡å™¨æ²Ÿé€šï¼Œä¸ä»…è·å–ç½‘é¡µå’Œåª’ä½“ï¼Œå¹¶ä¸”è¿˜è´Ÿè´£æ˜¾ç¤ºã€‚éšç€åæœŸä¸‡ç»´ç½‘æ—¥ç›Šç¹è£ï¼Œäººä»¬è¶Šæ¥è¶Šéœ€è¦æœç´¢ã€‚èµ·åˆäººä»¬ä¼šç»´æŠ¤ä¸€ä¸ªç›®å½•ï¼Œæ¥é“¾æ¥åˆ°å…¶ä»–ç½‘ç«™ï¼Œä½†æ˜¯éšç€ç½‘ç»œè¶Šæ¥è¶Šå¤§ï¼Œäººå·¥ç¼–è¾‘ç›®å½•å˜å¾—å¾ˆä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥å¼€å‘äº†æœç´¢å¼•æ“ã€‚æœ€æ—©çš„æœç´¢å¼•æ“æ˜¯JumpStationï¼Œå®ƒæœ‰3ä¸ªéƒ¨åˆ†ï¼šé€šè¿‡çˆ¬è™«æ¥å°†æ–°é“¾æ¥æ·»åŠ è¿›è‡ªå·±çš„åˆ—è¡¨ä¸­ã€‚ä¸æ–­æ‰©å¼ çš„ç´¢å¼•ï¼Œç”¨æ¥è®°å½•è®¿é—®è¿‡çš„ç½‘é¡µä¸Šå‡ºç°äº†å“ªäº›è¯ã€‚æŸ¥è¯¢ç´¢å¼•çš„æœç´¢ç®—æ³•ï¼Œæ¯”å¦‚è¾“å…¥äº†æŸä¸ªå…³é”®å­—ï¼Œåˆ™åŒ…å«è¿™ä¸ªå…³é”®å­—çš„ç½‘é¡µå°±ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚æ—©æœŸçš„æœç´¢å¼•æ“çš„æ’åæ–¹å¼ç›´æ¥å–å†³äºæœç´¢è¯åœ¨é¡µé¢ä¸Šçš„å‡ºç°æ¬¡æ•°ï¼Œä½†æ˜¯æœ‰çš„ç½‘é¡µä¼šé€šè¿‡åœ¨é¡µé¢ä¸­é‡å¤è¯¥å…³é”®å­—æ¥æé«˜æ’åã€‚Googleæˆåçš„å¾ˆå¤§åŸå› å°±æ˜¯æå‡ºäº†ä¸€ç§ç®—æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸å…¶ä¿¡ä»»é¡µé¢ä¸Šçš„å†…å®¹ï¼Œæœç´¢å¼•æ“ä¼šçœ‹å…¶ä»–ç½‘é¡µæœ‰æ²¡æœ‰è¿æ¥åˆ°è¿™ä¸ªç½‘é¡µã€‚æœ€åæä¸€ä¸ªæ¦‚å¿µâ€”â€”ç½‘ç»œä¸­ç«‹æ€§ï¼ˆNetwork Neutralityï¼‰ï¼Œå®ƒæŒ‡çš„æ˜¯è¦å¯¹æ‰€æœ‰æ•°æ®åŒ…éƒ½å¹³ç­‰å¯¹å¾…ï¼Œé€Ÿåº¦å’Œä¼˜å…ˆçº§éƒ½åº”è¯¥ä¸€æ ·ã€‚31ã€è®¡ç®—æœºå®‰å…¨è®¡ç®—æœºå®‰å…¨çš„èŒƒå›´å’Œè®¡ç®—èƒ½åŠ›çš„å‘å±•é€Ÿåº¦ä¸€æ ·å¿«ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè®¡ç®—æœºå®‰å…¨ï¼Œçœ‹æˆæ˜¯ä¿æŠ¤ç³»ç»Ÿå’Œæ•°æ®çš„ä¿å¯†æ€§ã€å®Œæ•´æ€§å’Œå¯ç”¨æ€§ã€‚ä¿å¯†æ€§ï¼ˆSecrecyï¼‰ï¼šåªæœ‰æœ‰æƒé™çš„äººæ‰èƒ½è¯»å–è®¡ç®—æœºç³»ç»Ÿå’Œæ•°æ®ï¼Œæ¯”å¦‚é»‘å®¢æ³„éœ²åˆ«äººçš„ä¿¡ç”¨å¡ä¿¡æ¯ï¼Œå°±æ˜¯æ”»å‡»ä¿å¯†æ€§ã€‚å®Œæ•´æ€§ï¼ˆIntegrityï¼‰ï¼šåªæœ‰æœ‰æƒé™çš„äººæ‰èƒ½ä½¿ç”¨å’Œä¿®æ”¹ç³»ç»Ÿå’Œæ•°æ®ï¼Œæ¯”å¦‚é»‘å®¢å‡å†’ä½ å‘é€é‚®ä»¶ï¼Œå°±æ˜¯æ”»å‡»å®Œæ•´æ€§ã€‚å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰ï¼šæœ‰æƒé™çš„äººåº”è¯¥éšæ—¶å¯ä»¥è®¿é—®ç³»ç»Ÿå’Œæ•°æ®ï¼Œæ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆDDOSï¼‰å°±æ˜¯é»‘å®¢å‘é€å¤§é‡çš„å‡è¯·æ±‚åˆ°æœåŠ¡å™¨ä¸Šï¼Œä½¿å¾—ç½‘ç«™å¾ˆæ…¢æˆ–è€…ç›´æ¥æŒ‚æ‰ï¼Œè¿™å°±æ˜¯æ”»å‡»å¯ç”¨æ€§ã€‚ä¸ºäº†å®ç°è¿™ä¸‰ä¸ªç›®æ ‡ï¼Œå®‰å…¨ä¸“å®¶ä¼šä»æŠ½è±¡å±‚é¢æƒ³æƒ³æ•Œäººå¯èƒ½æ˜¯è°ï¼Œè¿™ä¸ªç§°ä¸ºå¨èƒæ¨¡å‹åˆ†æï¼ˆThreat Modelï¼‰ã€‚æ¨¡å‹ä¼šå¯¹æ”»å‡»è€…æœ‰ä¸ªå¤§è‡´çš„æè¿°ï¼šèƒ½åŠ›å¦‚ä½•ã€ç›®æ ‡æ˜¯ä»€ä¹ˆã€å¯èƒ½ä½¿ç”¨ä»€ä¹ˆæ‰‹æ®µã€‚æ”»å‡»æ‰‹æ®µåˆç§°ä¸ºæ”»å‡»çŸ¢é‡ï¼ˆAttack Vectorï¼‰ã€‚å¨èƒæ¨¡å‹åˆ†æèƒ½å¤Ÿè®©ä½ ä¸ºç‰¹å®šæƒ…å¢ƒåšå¥½å‡†å¤‡ï¼Œä¸è¢«å¯èƒ½çš„æ”»å‡»æ‰‹æ®µæ‰€æ·¹æ²¡ã€‚æ¢å¥è¯è¯´ï¼Œè¦æ€ä¹ˆä¿æŠ¤ï¼Œå…·ä½“çœ‹è¦å¯¹æŠ—è°ã€‚é€šå¸¸å¨èƒæ¨¡å‹åˆ†æä¸­ï¼Œä¼šä»¥èƒ½åŠ›æ°´å¹³è¿›è¡ŒåŒºåˆ†ã€‚åœ¨ç»™å®šçš„å¨èƒæ¨¡å‹ä¸‹ï¼Œå®‰å…¨æ¶æ„å¸ˆè¦æä¾›è§£å†³æ–¹æ¡ˆï¼Œæ¥ä¿æŒç³»ç»Ÿå®‰å…¨ã€‚æœ‰å¾ˆå¤šä¿æŠ¤è®¡ç®—æœºç³»ç»Ÿã€ç½‘ç»œå’Œæ•°æ®çš„æ–¹æ³•ã€‚å¾ˆå¤šå®‰å…¨é—®é¢˜å¯ä»¥æ€»ç»“æˆä¸¤ä¸ªé—®é¢˜ï¼šä½ æ˜¯è°ï¼Ÿä½ èƒ½è®¿é—®ä»€ä¹ˆï¼Ÿæƒé™åº”è¯¥ç»™é€‚åˆçš„äººè€Œæ‹’ç»é”™è¯¯çš„äººï¼Œæ‰€ä»¥ä¸ºäº†åŒºåˆ†è°æ˜¯è°ï¼Œæˆ‘ä»¬ä½¿ç”¨èº«ä»½è®¤è¯ï¼ˆAuthenticationï¼‰æ¥è®©è®¡ç®—æœºå¾—çŸ¥ä½¿ç”¨è€…æ˜¯è°ã€‚é€šå¸¸èº«ä»½è®¤è¯æœ‰ä¸‰ç§ï¼Œå„æœ‰åˆ©å¼Šï¼šä½ çŸ¥é“ä»€ä¹ˆï¼šè¿™ä¸ªæ˜¯åŸºäºæŸç§åªæœ‰ç”¨æˆ·å’Œè®¡ç®—æœºçŸ¥é“çš„ç§˜å¯†ï¼Œæ¯”å¦‚ç”¨æˆ·åå’Œå¯†ç ã€‚è¿™æ˜¯å¦‚ä»Šä½¿ç”¨æœ€å¹¿æœ€å®¹æ˜“å®ç°çš„æ–¹æ³•ã€‚ä½†æ˜¯å¦‚æœé»‘å®¢çŸ¥é“äº†ä½ çš„å¯†ç å°±æƒ¨äº†ï¼Œæˆ–è€…å¯ä»¥é€šè¿‡æš´åŠ›æ”»å‡»è¯•äº†å¯†ç çš„æ‰€æœ‰å¯èƒ½æ¥è·å–ä½ çš„å¯†ç ï¼Œæœ‰äº›ç³»ç»Ÿä¼šåœ¨ä½ å°è¯•è‹¥å¹²æ¬¡é”™è¯¯åé˜»æ­¢ä½ ç»§ç»­å°è¯•ã€‚å³ä½¿å¢é•¿å¯†ç ä¹Ÿå¾ˆå®¹æ˜“ç ´è§£ï¼Œæ‰€ä»¥ç°åœ¨å¾ˆå¤šç½‘ç«™éƒ½è¦æ±‚å¤§å°å†™å­—æ¯åŠ ç‰¹æ®Šå­—ç¬¦ï¼Œæ¥å¢åŠ å¯èƒ½çš„å¯†ç ã€‚ä½ æœ‰ä»€ä¹ˆï¼šè¿™æ˜¯åŸºäºç”¨æˆ·ç‰¹å®šçš„ç‰©ä½“ï¼Œæ¯”å¦‚é’¥åŒ™å’Œé”ã€‚è¿™ç§æ–¹æ³•å¯ä»¥é¿å…è¢«äººçŒœä¸­å¯†ç çš„é—®é¢˜ï¼Œè€Œä¸”é€šå¸¸éœ€è¦äººåœ¨ç°åœºï¼Œæ‰€ä»¥è¿œç¨‹æ”»å‡»å°±æ›´åŠ å›°éš¾äº†ã€‚ä½ æ˜¯ä»€ä¹ˆï¼šè¿™æ˜¯åŸºäºä½ ï¼Œé€šè¿‡ä½ è‡ªå·±çš„ç‰¹å¾å±•ç¤ºç»™è®¡ç®—æœºæ¥è¿›è¡ŒéªŒè¯ï¼Œæ¯”å¦‚æŒ‡çº¹è¯†åˆ«å™¨å’Œçº¢è†œæ‰«æä»ªï¼Œè¿™äº›æ–¹æ³•ç‰¹åˆ«çš„å®‰å…¨ï¼Œä½†æ˜¯æœ€å¥½çš„è¯†åˆ«æŠ€æœ¯ååˆ†æ˜‚è´µã€‚â€œä½ çŸ¥é“ä»€ä¹ˆâ€å’Œâ€œä½ æœ‰ä»€ä¹ˆâ€æ˜¯ç¡®å®šæ€§çš„ï¼Œä½†æ˜¯æ¥è‡ªä¼ æ„Ÿå™¨çš„æ•°æ®æ¯æ¬¡éƒ½ä¸ç›¸åŒï¼Œæ‰€ä»¥â€œä½ æ˜¯ä»€ä¹ˆâ€æ˜¯æ¦‚ç‡æ€§çš„ï¼Œç³»ç»Ÿå¯èƒ½è®¤ä¸å‡ºä½ ï¼Œæˆ–è€…å°†å…¶ä»–äººè®¤æˆäº†ä½ ã€‚å¹¶ä¸”è¿™ç§æ–¹æ³•å¦ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ— æ³•é‡è®¾ï¼Œä½ æ— æ³•ä¿®æ”¹è‡ªå·±çš„æŒ‡çº¹æˆ–è€…è™¹è†œã€‚æ¯ç§æ–¹æ³•éƒ½æœ‰ä¼˜ç¼ºç‚¹ï¼Œä¸€èˆ¬å»ºè®®ä½¿ç”¨ä¸¤ç§æˆ–ä¸¤ç§ä»¥ä¸Šçš„è®¤è¯æ–¹å¼ã€‚å½“ç³»ç»ŸçŸ¥é“äº†ä½ æ˜¯è°ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦çŸ¥é“ä½ èƒ½è®¿é—®ä»€ä¹ˆï¼Œè¿™ä¸ªç§°ä¸ºè®¿é—®æ§åˆ¶ï¼ˆAccess Controlï¼‰ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªè§„èŒƒï¼Œæ¥è¯´æ˜è°èƒ½è®¿é—®ä»€ä¹ˆã€ä¿®æ”¹ä»€ä¹ˆå’Œä½¿ç”¨ä»€ä¹ˆã€‚è¿™ä¸ªå¯ä»¥é€šè¿‡æƒé™ï¼ˆPermissionï¼‰æˆ–è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆAccess Control Listï¼ŒACLï¼‰æ¥å®ç°ï¼Œå…¶ä¸­æè¿°äº†ç”¨æˆ·å¯¹æ¯ä¸ªæ–‡ä»¶ã€æ–‡ä»¶å¤¹å’Œç¨‹åºçš„è®¿é—®æƒé™ã€‚è¯»æƒé™ï¼šå…è®¸ç”¨æˆ·æŸ¥çœ‹æ–‡ä»¶å†…å®¹ã€‚å†™æƒé™ï¼šå…è®¸ç”¨æˆ·ä¿®æ”¹æ–‡ä»¶å†…å®¹ã€‚æ‰§è¡Œæƒé™ï¼šè¿è¡Œç”¨æˆ·è¿è¡Œæ–‡ä»¶ã€‚æœ‰äº›é˜»æ­¢éœ€è¦ä¸åŒå±‚æ¬¡çš„æƒé™ï¼Œåˆ™ACLçš„æ­£ç¡®é…ç½®å°±ååˆ†é‡è¦ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸‰ä¸ªè®¿é—®çº§åˆ«ï¼šå…¬å¼€ã€æœºå¯†å’Œé¡¶çº§æœºå¯†ã€‚æœ‰ä¸ªç»å…¸æ¨¡å‹ç§°ä¸ºBell-LaPadulaæ¨¡å‹ï¼Œå…¶ä¸­åŒ…å«ä¸¤æ¡è§„åˆ™ï¼šç”¨æˆ·ä¸èƒ½read upï¼Œå³ä¸èƒ½è¯»ç­‰çº§æ›´é«˜çš„ä¿¡æ¯ã€‚ç”¨æˆ·ä¸èƒ½write downï¼Œå³ç”¨æˆ·ä¸èƒ½å†™æ›´ä½æƒé™çš„ä¿¡æ¯ï¼Œè¿™æ ·èƒ½é¿å…é«˜çº§åˆ«çš„ä¿¡æ¯ä¸ä¼šæ³„æ¼åˆ°ä½çº§åˆ«çš„æ–‡ä»¶ä¸­ã€‚é€šè¿‡èº«ä»½è®¤è¯å’Œæƒé™æ§åˆ¶ï¼Œå¯ä»¥è®©è®¡ç®—æœºçŸ¥é“ä½ æ˜¯è°å’Œä½ èƒ½è®¿é—®ä»€ä¹ˆï¼Œä½†æ˜¯å¿…é¡»å…ˆä¿è¯åšè¿™äº›äº‹çš„è½¯ç¡¬ä»¶å¿…é¡»æ˜¯å¯ä¿¡çš„ã€‚ä½†æ˜¯ä»ç„¶æ— æ³•ä¿è¯ç¨‹åºæˆ–è®¡ç®—æœºç³»ç»Ÿçš„å®‰å…¨ï¼Œå› ä¸ºå®‰å…¨è½¯ä»¶åœ¨ç†è®ºä¸Šå¯èƒ½æ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯å®ç°æ—¶å¯èƒ½ä¼šä¸å°å¿ƒç•™ä¸‹æ¼æ´ã€‚ä½†æ˜¯æˆ‘ä»¬æœ‰åŠæ³•å‡å°‘æ¼æ´å‡ºç°çš„å¯èƒ½æ€§ï¼Œæ¯”å¦‚ä¸€å‘ç°æ¼æ´å°±é©¬ä¸Šä¿®è¡¥ã€‚å¤§éƒ¨åˆ†æ¼æ´éƒ½æ˜¯å…·ä½“å®ç°æ—¶å‡ºé”™äº†ï¼Œæ‰€ä»¥ä¸ºäº†å‡å°‘æ‰§è¡Œé”™è¯¯ï¼Œå°±è¦å‡å°‘æ‰§è¡Œã€‚ç³»ç»Ÿçº§å®‰å…¨çš„åœ£æ¯ä¹‹ä¸€æ˜¯å®‰å…¨å†…æ ¸æˆ–å¯ä¿¡è®¡ç®—æœºåŸºç¡€ï¼šä¸€ç»„å°½å¯èƒ½å°‘çš„æ“ä½œç³»ç»Ÿè½¯ä»¶ï¼Œè¿™ä¸ªå®‰å…¨æ€§æ˜¯æ¥è¿‘å¯éªŒè¯çš„ã€‚æ„å»ºå®‰å…¨å†…æ ¸çš„æŒ‘æˆ˜åœ¨äºï¼Œè¦å†³å®šå†…æ ¸åº”è¯¥æœ‰ä»€ä¹ˆï¼ˆä»£ç è¶Šå°‘è¶Šå¥½ï¼‰ã€‚å½“æœ€å°åŒ–ä»£ç æ•°é‡åï¼Œè¦æ˜¯èƒ½ä¿è¯ä»£ç æ˜¯å®‰å…¨çš„ï¼Œé‚£å°±å¾ˆå¥½äº†ã€‚ç°åœ¨æœ€å¥½çš„éªŒè¯ä»£ç å®‰å…¨æ€§çš„æ‰‹æ®µæ˜¯ç‹¬ç«‹å®‰å…¨ç›‘å¯Ÿå’Œè´¨é‡éªŒè¯ï¼ˆIndependent Verification and Validationï¼‰ï¼Œè®©ä¸€ç¾¤å®‰å…¨è¡Œä¸šå†…çš„è½¯ä»¶å¼€å‘è€…æ¥å®¡è®¡ä»£ç ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®‰å…¨å‹ä»£ç å‡ ä¹éƒ½æ˜¯å¼€æºçš„ã€‚ä½†æ˜¯å³ä½¿è¿™æ ·ï¼Œè¿˜æ˜¯æœ‰å¯èƒ½è¢«é»‘å®¢æ”»ç ´ï¼Œå› æ­¤ç¨‹åºå¼€å‘è€…éœ€è¦æ§åˆ¶æŸå¤±çš„æœ€å¤§ç¨‹åº¦ï¼Œè¿™ä¸ªç§°ä¸ºéš”ç¦»ï¼ˆIoslationï¼‰ã€‚è¦å®ç°éš”ç¦»ï¼Œå¯ä»¥â€œæ²™ç›’â€ï¼ˆsandboxï¼‰ç¨‹åºï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡ç»™æ¯ä¸ªç¨‹åºç‹¬ç«‹çš„å†…å­˜å—ï¼Œä½¿å¾—åˆ«çš„ç¨‹åºæ˜¯æ— æ³•è§¦åŠçš„ï¼Œè¿™æ ·å°±èƒ½æŠŠç¨‹åºæ”¾åˆ°æ²™ç›’ä¸­ï¼Œå³ä½¿æ²™ç›’è¢«ç ´åäº†ï¼Œä¹Ÿä¸ä¼šå½±å“åˆ«çš„ç¨‹åºæ‰§è¡Œã€‚å¹¶ä¸”ä¸€å°è®¡ç®—æœºå¯ä»¥è¿è¡Œå¤šä¸ªè™šæ‹Ÿæœºï¼ˆVirtual Machineï¼‰ï¼Œä½¿å¾—æ¯ä¸ªè™šæ‹Ÿæœºéƒ½åœ¨è‡ªå·±çš„æ²™ç›’ä¸­ã€‚32ã€é»‘å®¢&amp;æ”»å‡»é»‘å®¢å…¥ä¾µæœ€å¸¸è§çš„æ–¹å¼ä¸æ˜¯é€šè¿‡æŠ€æœ¯ï¼Œè€Œæ˜¯æ¬ºéª—åˆ«äººï¼Œè¿™ä¸ªç§°ä¸ºç¤¾ä¼šå·¥ç¨‹å­¦ï¼ˆSocial Engineeringï¼‰ï¼Œé€šè¿‡æ¬ºéª—åˆ«äººæ¥è®©äººæ³„éœ²ç§˜å¯†ï¼Œæˆ–è®©äººé…ç½®ç”µè„‘ç³»ç»Ÿæ¥å˜å¾—æ˜“äºæ”»å‡»ã€‚æœ€å¸¸è§çš„æ”»å‡»æ˜¯ç½‘ç»œé’“é±¼ï¼ˆPhishingï¼‰ï¼Œå…¶æ¬¡è¿˜æœ‰å‡æ‰˜ï¼ˆPretextingï¼‰ï¼Œæ”»å‡»è€…ç»™æŸä¸ªå…¬å¸æ‰“ç”µè¯ï¼Œå‡è£…æ˜¯ITéƒ¨é—¨çš„äººï¼Œæ”»å‡»è€…çš„ç¬¬ä¸€é€šç”µè¯ä¸€èˆ¬ä¼šå«äººè½¬æ¥ï¼Œè¿™æ ·å¦ä¸€ä¸ªæ¥çš„æ—¶å€™ï¼Œç”µè¯çœ‹èµ·æ¥å°±åƒå†…éƒ¨çš„ï¼Œç„¶åè®©åˆ«äººæŠŠç”µè„‘é…ç½®å¾—æ˜“äºå…¥ä¾µï¼Œæˆ–è€…è®©ä»–ä»¬æ³„éœ²æœºå¯†ä¿¡æ¯ï¼Œæ¯”å¦‚å¯†ç æˆ–ç½‘ç»œé…ç½®ã€‚é‚®ä»¶é‡Œå¸¦æœ¨é©¬ï¼ˆtrojan horseï¼‰ä¹Ÿæ˜¯å¸¸è§æ‰‹æ®µï¼Œæœ¨é©¬é€šå¸¸ä¼šä¼ªè£…æˆæ— å®³çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ç…§ç‰‡æˆ–å‘ç¥¨ï¼Œä½†å®é™…ä¸Šæ˜¯æ¶æ„è½¯ä»¶ï¼Œæœ‰çš„ä¼šå·æ•°æ®ï¼Œæœ‰çš„ä¼šåŠ å¯†æ–‡ä»¶ã€‚å¦‚æœæ”»å‡»è€…æ— æ³•ç”¨æœ¨é©¬æˆ–ç”µè¯æ¬ºéª—ï¼Œæ”»å‡»è€…åªèƒ½è¢«è¿«ä½¿ç”¨å…¶ä»–æ‰‹æ®µï¼Œæ–¹æ³•ä¹‹ä¸€å°±æ˜¯æš´åŠ›ç ´è§£ï¼Œå°è¯•æ‰€æœ‰å¯èƒ½çš„å¯†ç ï¼Œç›´åˆ°è¿›å…¥ç³»ç»Ÿï¼Œå¤§å¤šæ•°ç°ä»£ç³»ç»Ÿä¼šåŠ é•¿ç­‰å¾…æ—¶é—´æ¥æŠµå¾¡è¿™ç§æ”»å‡»ï¼Œæ¯æ¬¡å¤±è´¥å°±åŠ é•¿ç­‰å¾…æ—¶é—´ï¼Œç”šè‡³è¶…è¿‡ä¸€å®šæ¬¡æ•°åï¼Œå®Œå…¨å°é”ã€‚ç°åœ¨å‡ºç°äº†ä¸€ç§æ”»ç ´æ–¹æ³•ç§°ä¸ºNANDé•œåƒï¼Œå¦‚æœèƒ½ç‰©ç†æ¥è§¦åˆ°ç”µè„‘ï¼Œå¯ä»¥å¾€å†…å­˜ä¸Šæ¥å‡ æ ¹çº¿ï¼Œå¤åˆ¶æ•´ä¸ªå†…å­˜ï¼Œç„¶åæš´åŠ›å°è¯•å¯†ç ï¼Œç›´åˆ°è®¾å¤‡è®©ä½ ç­‰å¾…ã€‚è¿™æ—¶åªè¦æŠŠå¤åˆ¶çš„å†…å®¹è¦†ç›–æ‰å†…å­˜ï¼Œæœ¬è´¨ä¸Šé‡ç½®äº†å†…å­˜ï¼Œå°±ä¸ç”¨ç­‰å¾…ï¼Œå¯ä»¥ç»§ç»­å°è¯•å¯†ç ã€‚å¦‚æœæ— æ³•ç‰©ç†æ¥è§¦åˆ°è®¾å¤‡ï¼Œå°±éœ€è¦è¿œç¨‹æ”»å‡»ï¼Œæ¯”å¦‚é€šè¿‡äº’è”ç½‘ï¼Œè¿™ä¸€èˆ¬éœ€è¦æ”»å‡»è€…åˆ©ç”¨ç³»ç»Ÿæ¼æ´ï¼Œæ¥è·å¾—æŸäº›èƒ½åŠ›æˆ–è®¿é—®æƒé™ï¼Œç§°ä¸ºæ¼æ´åˆ©ç”¨ï¼ˆExploitï¼‰ã€‚ä¸€ç§å¸¸è§çš„æ¼æ´åˆ©ç”¨å«ç¼“å†²åŒºæº¢å‡ºï¼ˆBuffer Overflowï¼‰ï¼Œè¿™é‡Œçš„ç¼“å†²åŒºæ˜¯æŒ‡é¢„ç•™çš„ä¸€å—å†…å­˜ç©ºé—´ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ç³»ç»Ÿç™»å½•ç•Œé¢è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œè€Œç³»ç»Ÿæ˜¯ç”¨ç¼“å†²åŒºæ¥å­˜å‚¨è¾“å…¥å€¼çš„ï¼Œå‡è®¾ç¼“å†²åŒºå¤§å°ä¸º10ï¼Œå¹¶ä¸”ç¼“å†²åŒºå‰åè‚¯å®šè¿˜æœ‰å…¶ä»–æ•°æ®ï¼Œå½“ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç æ—¶ï¼Œè¿™äº›å€¼å°±ä¼šè¢«å¤åˆ¶åˆ°ç¼“å†²åŒºä¸­æ¥è¿›è¡ŒéªŒè¯ï¼Œè€Œè¯¥æ–¹æ³•ä¼šæº¢å‡ºç¼“å†²åŒºï¼Œæ¯”å¦‚è¾“å…¥è¶…è¿‡10ä¸ªå­—ç¬¦çš„å¯†ç ï¼Œä¼šè¦†ç›–æ‰ç›¸é‚»çš„æ•°æ®ï¼Œæœ‰æ—¶ä¼šè®©ç¨‹åºæˆ–ç³»ç»Ÿå´©æºƒï¼Œå› ä¸ºé‡è¦å€¼è¢«åƒåœ¾æ•°æ®è¦†ç›–æ‰äº†ã€‚è¿™é‡Œåªæ˜¯è®©ç³»ç»Ÿå´©æºƒï¼Œä½†æ˜¯æ”»å‡»è€…å¯ä»¥è¾“å…¥æœ‰æ„ä¹‰çš„æ–°å€¼åˆ°ç¨‹åºçš„å†…å­˜ä¸­ï¼Œæ¯”å¦‚æŠŠis_adminæ ‡å¿—ä½çš„å€¼æ”¹ä¸ºtrueï¼Œæœ‰äº†ä»»æ„ä¿®æ”¹å†…å­˜çš„èƒ½åŠ›ï¼Œé»‘å®¢å°±å¯ä»¥ç»•è¿‡ç™»å½•è¿™ç±»ä¸œè¥¿ï¼Œç”šè‡³ä½¿ç”¨é‚£ä¸ªç¨‹åºåŠ«æŒæ•´ä¸ªç³»ç»Ÿã€‚æœ‰è®¸å¤šæ–¹æ³•é˜»æ­¢ç¼“å†²åŒºæº¢å‡ºï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å¤åˆ¶åˆ°å†…å­˜ä¹‹å‰å…ˆæ£€æŸ¥é•¿åº¦ï¼Œç§°ä¸ºè¾¹ç•Œæ£€æŸ¥ï¼ˆBounds checkingï¼‰ï¼Œè®¸å¤šç°ä»£ç¼–ç¨‹è¯­è¨€éƒ½è‡ªå¸¦è¾¹ç•Œæ£€æŸ¥ï¼Œç¨‹åºä¹Ÿä¼šéšæœºå­˜æ”¾å˜é‡åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œè¿™æ ·é»‘å®¢å°±ä¸çŸ¥é“åº”è¯¥è¦†ç›–å†…å­˜çš„å“ªéƒ¨åˆ†ï¼Œä½¿å¾—æ›´å®¹æ˜“è®©ç¨‹åºå´©æºƒï¼Œè€Œä¸æ˜¯è·å¾—è®¿é—®æƒé™ã€‚ç¨‹åºä¹Ÿå¯ä»¥åœ¨ç¼“å†²åŒºåï¼Œé¢„ç•™ä¸€äº›ä¸ç”¨çš„ç©ºé—´ï¼Œç„¶åè·Ÿè¸ªé‡Œé¢çš„å€¼ï¼Œçœ‹æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œæ¥åˆ¤æ–­æ˜¯å¦æœ‰æ”»å‡»ï¼Œè¿™äº›ä¸ç”¨çš„å†…å­˜ç©ºé—´ç§°ä¸ºé‡‘ä¸é›€ï¼ˆCanariesï¼‰ã€‚å¦ä¸€ç§ç»å…¸æ‰‹æ®µæ˜¯ä»£ç æ³¨å…¥ï¼ˆCode Injectionï¼‰ï¼Œæœ€å¸¸ç”¨äºæ”»å‡»ç”¨æ•°æ®åº“çš„ç½‘ç«™ã€‚å‡è®¾ç½‘é¡µä¸Šæœ‰ç™»å½•æç¤ºï¼Œå½“ç”¨æˆ·ç‚¹å‡»â€œç™»å½•â€ï¼Œè¾“å…¥æ–‡æœ¬å°±ä¼šå‘é€æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°±ä¼šè¿è¡Œä»£ç ï¼Œæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±çœ‹å¯†ç æ˜¯å¦åŒ¹é…ã€‚ä¸ºæ­¤æœåŠ¡å™¨ä¼šæ‰§è¡Œä¸€æ®µsqlæŸ¥è¯¢ä»£ç ï¼Œæ¯”å¦‚1SELECT password FROM users WHERE username='___';è¿™é‡Œè¯­å¥å°±æ˜¯è¦ä»usersè¡¨ä¸­æŸ¥æ‰¾usernameä¸º___çš„å¯†ç passwordã€‚ è¿™é‡Œçš„___å°±æ˜¯ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åã€‚ç”±æ­¤æ”»å‡»è€…å°±èƒ½æŠŠsqlå‘½ä»¤è¾“å…¥åˆ°ç”¨æˆ·åä¸­ï¼Œæ¯”å¦‚whatever&#39;;DROP TABLE users;&#39;ï¼Œè¿™æ—¶ä¸Šé¢çš„æŸ¥è¯¢è¯­å¥å°±ä¼šå˜æˆ1SELECT password FROM users WHERE username='whatever';DROP TABLE users;';å¦‚æœæœåŠ¡å™¨å­˜åœ¨ç”¨æˆ·åwhareverï¼Œæ•°æ®åº“å°±ä¼šè¿”å›å¯†ç ï¼Œ å½“ç„¶æˆ‘ä»¬æ— æ³•å¾—çŸ¥å¯†ç æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥æœåŠ¡å™¨ä¼šæ‹’ç»æˆ‘ä»¬ï¼›å¦‚æœä¸å­˜åœ¨ç”¨æˆ·åwhareverï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ç©ºå¯†ç æˆ–è€…ç›´æ¥é”™è¯¯ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šæ‹’ç»æˆ‘ä»¬ã€‚ ä½†æ˜¯æˆ‘ä»¬å…³å¿ƒçš„æ˜¯åé¢çš„ä»£ç DROP TABLE users;è¿™ä¸ªæ˜¯æˆ‘ä»¬æ³¨å…¥çš„å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯åˆ æ‰usersè¿™å¼ è¡¨ã€‚å¦‚ä»Šå‡ ä¹æ‰€æœ‰æœåŠ¡å™¨éƒ½ä¼šé˜²å¾¡è¿™ç§æ‰‹æ®µã€‚ç¨‹åºå‘˜éœ€è¦è®¤è¯†åˆ°ä»å¤–ç•Œè¾“å…¥çš„ä¿¡æ¯éƒ½æ˜¯å±é™©çš„ï¼Œå¿…é¡»è¦å¥½å¥½æ£€æŸ¥ï¼Œå¾ˆå¤šç”¨æˆ·åå’Œå¯†ç è¡¨å•ï¼Œä¸ä¼šè®©ä½ ç›´æ¥è¾“å…¥ç‰¹æ®Šç¬¦å·ï¼Œæ¯”å¦‚åˆ†å·æˆ–æ‹¬å·ï¼Œæ¥ä½œä¸ºç¬¬ä¸€é“é˜²å¾¡ã€‚å¥½çš„æœåŠ¡å™¨ä¹Ÿä¼šæ¸…ç†è¾“å…¥ï¼Œæ¯”å¦‚ä¿®æ”¹æˆ–åˆ é™¤ç‰¹æ®Šå­—ç¬¦ï¼Œç„¶åæ‰æ”¾åˆ°æ•°æ®åº“æŸ¥è¯¢è¯­å¥ä¸­ã€‚å½“è½¯ä»¶åˆ¶é€ è€…ä¸çŸ¥é“çš„æ–°æ¼æ´è¢«å‘ç°æ—¶ï¼Œç§°ä¸º0dayæ¼æ´ï¼ˆZero Day Vulnerabilityï¼‰ï¼Œé»‘å®¢å°±ä¼šæŠ¢åœ¨ç™½å¸½ç¨‹åºå‘˜åšå‡ºè¡¥ä¸ä¹‹å‰å°½å¯èƒ½åˆ©ç”¨æ¼æ´ã€‚å¦‚æœæœ‰è¶³å¤Ÿå¤šçš„ç”µè„‘æœ‰æ¼æ´ï¼Œè®©æ¶æ„ç¨‹åºå¯ä»¥è‡ªåŠ¨åœ°åœ¨ç”µè„‘ä¹‹é—´äº’ç›¸ä¼ æ’­ï¼Œç§°ä¸ºè •è™«ï¼ˆWormï¼‰ã€‚å¦‚æœé»‘å®¢æ‹¿ä¸‹å¤§é‡ç”µè„‘ï¼Œè¿™äº›ç”µè„‘å¯ä»¥ç»„æˆåƒµå°¸ç½‘ç»œï¼ˆBotnetï¼‰ï¼Œå¯ä»¥ç”¨äºå¾ˆå¤šç›®çš„ï¼Œæ¯”å¦‚å‘å¤§é‡åƒåœ¾é‚®ä»¶ç­‰ï¼Œç”¨åˆ«äººç”µè„‘çš„è®¡ç®—èƒ½åŠ›æ¥æŒ–æ¯”ç‰¹å¸ï¼Œæˆ–å‘èµ·DDOSæ¥æ”»å‡»æœåŠ¡å™¨ã€‚DDOSå°±æ˜¯åƒµå°¸ç½‘ç»œé‡Œçš„æ‰€æœ‰ç”µè„‘å‘ä¸€å¤§å †åƒåœ¾ä¿¡æ¯åˆ°æœåŠ¡å™¨ä¸Šï¼Œé€ æˆæœåŠ¡å™¨çš„é˜»å¡ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹","slug":"ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹","permalink":"https://longlongqin.github.io/tags/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E9%80%9F%E6%88%90%E8%AF%BE%E3%80%8B/"}]},{"title":"LearnCpp chapter4","slug":"C&C++/LearnCpp-chapter4","date":"2020-03-31T05:59:58.000Z","updated":"2020-04-19T14:38:29.546Z","comments":true,"path":"archives/c1a4eb67.html","link":"","permalink":"https://longlongqin.github.io/archives/c1a4eb67.html","excerpt":"LearnCpp chapter4https://www.learncpp.com","text":"LearnCpp chapter4https://www.learncpp.com4.1 åŸºæœ¬çš„æ•°æ®ç±»å‹å†…å­˜æœ€å°çš„å•ä½æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ•°(binary digit)ï¼Œå³ä½(bit)ã€‚å®ƒå¯ä»¥å­˜å‚¨ä¸€ä¸ª0æˆ–è€…1ã€‚å°±åƒä¼ ç»Ÿçš„ç”µç¯å¼€å…³ä¸€æ ·â€”â€”ç¯å¼€ç€(1)ï¼Œç¯å…³ç€(0)ç”±è¿ç»­çš„å•å…ƒç»„æˆçš„å†…å­˜ï¼Œå«å†…å­˜åœ°å€(memory addresses)ï¼Œç®€ç§°åœ°å€(addresses)ç°ä»£è®¡ç®—æœºä¸­ï¼Œâ€œä½â€æ˜¯æ²¡æœ‰å®ƒè‡ªå·±çš„å†…å­˜åœ°å€çš„ã€‚è€Œæ˜¯ç”¨ä¸€ä¸ªâ€œå­—èŠ‚(byte)â€æ¥è¡¨ç¤ºä¸€ä¸ªå†…å­˜åœ°å€ã€‚å› ä¸ºå†…å­˜åœ°å€æ˜¯æ¯”è¾ƒæœ‰é™çš„ï¼Œè€Œä¸”éœ€è¦é€â€œä½â€è®¿é—®æ•°æ®çš„æƒ…å†µå¾ˆå°‘ã€‚å­—èŠ‚æ˜¯ä½œä¸ºä¸€ä¸ªå•ä½æ¥æ“ä½œçš„ä¸€ç»„â€ä½(bit)â€ã€‚ç°ä»£æ ‡å‡†è§„å®šï¼šä¸€ä¸ªå­—èŠ‚ç”±8ä¸ªè¿ç»­çš„ä½ç»„æˆã€‚ä¸‹é¢çš„å›¾ç‰‡æ˜¾ç¤ºäº†ä¸€äº›è¿ç»­çš„å†…å­˜åœ°å€ï¼Œä»¥åŠç›¸åº”çš„æ•°æ®å­—èŠ‚:æ•°æ®ç±»å‹(Data types)ï¼Œç®€ç§°â€œç±»å‹(type)â€æˆ‘ä»¬ä½¿ç”¨æ•°æ®ç±»å‹æ¥å‘Šè¯‰ç¼–è¯‘å™¨å¦‚ä½•ä»¥æŸç§æœ‰æ„ä¹‰çš„æ–¹å¼è§£é‡Šå†…å­˜çš„å†…å®¹ã€‚å¦‚ï¼šå½“æˆ‘ä»¬å£°æ˜ä¸€ä¸ªå˜é‡çš„ç±»å‹ä¸º æ•´å‹(integer)æ—¶ï¼Œå°±ç›¸å½“äºå‘Šè¯‰å†…å­˜â€œè¿™ä¸ªå˜é‡ä½¿ç”¨çš„å†…å­˜æ®µå°†è¢«è§£é‡Šä¸ºä¸€ä¸ªæ•´æ•°å€¼â€ç»™å¯¹è±¡(object)ä¸€ä¸ªå€¼(value)æ—¶ï¼Œç¼–è¯‘å™¨å’ŒCPUå°±è´Ÿè´£å°†æ‚¨çš„å€¼ ç¼–ç (encode)ä¸ºè¯¥æ•°æ®ç±»å‹çš„é€‚å½“çš„ä½åºåˆ—ï¼Œå¹¶å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚ã€è®°ä½ï¼šå†…å­˜åªå­˜å‚¨ä½(bits)ã€‘å¦‚ï¼šç»™ä¸€ä¸ªæ•´å‹å¯¹è±¡èµ‹ä¸€ä¸ªå€¼,65ã€‚è¿™ä¸ªå€¼å°±è¢«è½¬æ¢ä¸ºbitsï¼š0100 0001ï¼Œå¹¶è¢«å­˜å‚¨åœ¨åˆ†é…ç»™å¯¹è±¡çš„å†…å­˜ä¸­ã€‚å½“è¿™ä¸ªå¯¹è±¡è¢«æ±‚å€¼ï¼Œäº§ç”Ÿä¸€ä¸ªå€¼æ—¶ï¼Œè¿™ä¸ª ä½åºåˆ—(sequence of bits) è¢«é‡æ–°æ„é€ æˆåŸæ¥çš„å€¼ã€‚æ„æ€å°±æ˜¯ï¼š0100 0001è¢«è½¬æ¢å› å€¼65.å¹¸è¿çš„æ˜¯ï¼Œè¿™äº›è½¬æ¢å·¥ä½œéƒ½æ˜¯ç”± ç¼–è¯‘å™¨ å’Œ CPU æ¥å®Œæˆçš„ã€‚åŸºæœ¬æ•°æ®ç±»å‹(fundamental data types)ï¼Œä½†é€šå¸¸è¢«éæ­£å¼åœ°ç§°ä¸ºåŸºæœ¬ç±»å‹(basic types)ã€åŸºæœ¬ç±»å‹(primitive types)æˆ–å†…ç½®ç±»å‹(built-in types)ã€‚ä¸‹é¢æ˜¯ä¸€äº›åŸºæœ¬æ•°æ®ç±»å‹ï¼š1ã€æ³¨æ„ï¼šinteger vs integralï¼šintegralå³æ¯”integerèŒƒå›´æ›´å¹¿integerï¼šè¡¨ç¤ºæ•´æ•°ï¼Œå³æ­£æ•´æ•°ã€è´Ÿæ•´æ•°ã€0ï¼›integralï¼šåŒ…å«äº† integerã€boolean(å¸ƒå°”å‹)ã€å­—ç¬¦ç±»å‹ã€‚ä»–ä»¬ä¸¤ä¸ªåå­—æ¯”è¾ƒç›¸è¿‘ï¼Œæ˜¯å› ä¸ºï¼šintegralç±»å‹åœ¨å†…å­˜ä¸­å­˜å‚¨å½¢å¼æ˜¯å’Œintegerä¸€æ ·ã€‚2ã€ _tåç¼€è¿™ä¸ªåç¼€ï¼Œè¡¨ç¤ºâ€œç±»å‹â€çš„æ„æ€ã€‚4.2 Voidvoidæ˜¯æœ€ç®€å•çš„ç±»å‹ï¼Œvoidï¼Œå³â€œæ²¡æœ‰ç±»å‹â€å˜é‡ä¸èƒ½å®šä¹‰ä¸ºvoidç±»å‹ï¼š1void value; // won't work, variables can't be defined with a void typevoidç”¨é€”ï¼šFunctions that do not return a valueï¼ˆå‡½æ•°ä¸è¿”å›å€¼ï¼‰ï¼š12345void writeValue(int x) // void here means no return value&#123; std::cout &lt;&lt; \"The value of x is: \" &lt;&lt; x &lt;&lt; '\\n'; // no return statement, because this function doesn't return a value&#125;Functions that do not take parameters(å‡½æ•°ä¸­ä¸å¸¦å‚æ•°)1234567891011121314int getValue(void) // void here means no parameters&#123; int x; std::cin &gt;&gt; x; return x;&#125;//æˆ–è€…è¿™ç§å½¢å¼ã€åœ¨C++ä¸­ï¼Œæ¨èå†™è¿™ç§å½¢å¼ã€‘int getValue() // empty function parameters is an implicit void&#123; int x; std::cin &gt;&gt; x; return x;&#125;4.3 å¯¹è±¡å¤§å°&amp;sizeofæ“ä½œç¬¦å¯¹è±¡çš„å¤§å°ï¼šå¯¹è±¡çš„å¤§å°å–å†³äºå®ƒçš„æ•°æ®ç±»å‹é€šå¸¸é€šè¿‡å˜é‡åè®¿é—®å†…å­˜ï¼Œè€Œä¸æ˜¯ç›´æ¥é€šè¿‡å†…å­˜åœ°å€ã€‚1ä¸ªbit(ä½)å¯ä»¥å®¹çº³2ä¸ªå¯èƒ½çš„å€¼ï¼Œ0æˆ–1ï¼›â€¦â€¦.å³ï¼Œå…·æœ‰nä½(bits)çš„å¯¹è±¡ï¼Œå¯ä»¥å®¹çº³2^n ä¸ªå¯èƒ½çš„å€¼ã€‚å› æ­¤ï¼Œå¯¹è±¡çš„å¤§å°é™åˆ¶äº†å®ƒå¯ä»¥å­˜å‚¨çš„å”¯ä¸€å€¼çš„ä¸ªæ•°ã€‚æ¯æ¬¡å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œåªè¦è¯¥å¯¹è±¡å­˜åœ¨ï¼Œå°±ä¼šä½¿ç”¨ä¸€å°éƒ¨åˆ†ç©ºé—²å†…å­˜ã€‚åŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°ï¼šç»™å®šæ•°æ®ç±»å‹çš„å¤§å°å–å†³äºç¼–è¯‘å™¨ å’Œ/æˆ– è®¡ç®—æœºä½“ç³»ç»“æ„!C++åªä¿è¯æ¯ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°éƒ½æ˜¯æœ€å°çš„ï¼šç„¶è€Œï¼Œè¿™äº›ç±»å‹çš„å¤§å°åœ¨ä¸åŒçš„è®¡ç®—æœºä¸Šå¯èƒ½ä¼šä¸ä¸€æ ·ã€‚æ¯”å¦‚ï¼Œæœ‰äº›æœºå™¨ä¸Šçš„intå¤§å°ä¸º4 bytesæ“ä½œç¬¦â€œsizeofâ€ä¸ºäº†èƒ½å¤Ÿåœ¨è®¡ç®—æœºä¸Šç›´åˆ°ç±»å‹çš„å¤§å°ï¼ŒC++æä¾›äº†â€œsizeofâ€æ“ä½œç¬¦æ¥ç¡®è®¤ç±»å‹çš„å¤§å°ã€‚sizeofï¼šæ˜¯ä¸€ä¸ªä¸€å…ƒæ“ä½œç¬¦ï¼Œå®ƒæ¥å— ç±»å‹ æˆ– å˜é‡ï¼Œç„¶åè¿”å›å®ƒçš„å¤§å°(bytes)123456789101112131415161718192021222324#include &lt;iostream&gt;int main()&#123; std::cout &lt;&lt; \"bool:\\t\\t\" &lt;&lt; sizeof(bool) &lt;&lt; \"bytes\\n\"; std::cout &lt;&lt; \"char:\\t\\t\" &lt;&lt; sizeof(char) &lt;&lt; \"bytes\\n\"; std::cout &lt;&lt; \"wchar_t:\\t\" &lt;&lt; sizeof(wchar_t) &lt;&lt; \"bytes\\n\"; std::cout &lt;&lt; \"char16_t:\\t\" &lt;&lt; sizeof(char16_t) &lt;&lt; \" bytes\\n\"; // C++11 only std::cout &lt;&lt; \"char32_t:\\t\" &lt;&lt; sizeof(char32_t) &lt;&lt; \" bytes\\n\"; // C++11 only std::cout &lt;&lt; \"short:\\t\\t\" &lt;&lt; sizeof(short) &lt;&lt; \" bytes\\n\"; std::cout &lt;&lt; \"int:\\t\\t\" &lt;&lt; sizeof(int) &lt;&lt; \" bytes\\n\"; std::cout &lt;&lt; \"long:\\t\\t\" &lt;&lt; sizeof(long) &lt;&lt; \" bytes\\n\"; std::cout &lt;&lt; \"long long:\\t\" &lt;&lt; sizeof(long long) &lt;&lt; \" bytes\\n\"; // C++11 only std::cout &lt;&lt; \"float:\\t\\t\" &lt;&lt; sizeof(float) &lt;&lt; \" bytes\\n\"; std::cout &lt;&lt; \"double:\\t\\t\" &lt;&lt; sizeof(double) &lt;&lt; \" bytes\\n\"; std::cout &lt;&lt; \"long double:\\t\" &lt;&lt; sizeof(long double) &lt;&lt; \" bytes\\n\"; //é¿å…åœ¨visual studio ä¸­è¿è¡Œæ—¶ é—ªè¿‡ std::cin.clear(); std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); std::cin.get(); return 0;&#125;è¿è¡Œç»“æœï¼šè¿è¡Œç»“æœä¼šå› ä¸ºä¸åŒç±»å‹çš„æœºå™¨orç¼–è¯‘å™¨ï¼Œè€Œå‡ºç°å·®å¼‚ã€‚4.4 æœ‰ç¬¦å·æ•´å‹C++ä¸­æœ‰å››ç§æ•´å‹çš„ç±»å‹ï¼šSigned integers(æœ‰ç¬¦å·æ•´å‹)å¦‚ï¼š+1ã€-1ã€0è¿™ç§éƒ½å±äº æœ‰ç¬¦å·æ•´å‹ã€‚å®šä¹‰æœ‰ç¬¦å·æ•´å‹ï¼š123456789101112131415161718//ã€æ¨èã€‘short s;int i;long i;long long i;//é™¤äº†intï¼Œå…¶å®ƒç±»å‹ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼šshort int s;long int i;long liong i;//è¿™ç§ã€ä¸æ¨èã€‘ï¼Œä½¿ç”¨â€œintâ€åç¼€ä¸åˆ©äºè§‚çœ‹//ä¹Ÿå¯ä»¥ä½¿ç”¨ signedå‰ç¼€signed shrt s;signed int i;signed long i;signed long long i;//ã€ä¸æ¨èã€‘ï¼Œå› ä¸ºsignedå†—ä½™ï¼Œä¸åˆ©äºè¾¨è®¤æœ‰ç¬¦å·æ•´å‹çš„èŒƒå›´æ•°æ®ç±»å‹å¯ä»¥å®¹çº³çš„ä¸€ç»„ç‰¹å®šå€¼ï¼Œå«åšï¼šrange(èŒƒå›´)æ•´å‹å˜é‡çš„â€œèŒƒå›´â€çš„å†³å®šå› ç´ ï¼šè¯¥ç±»å‹æœ¬èº«çš„å¤§å°ï¼›è¯¥ç±»å‹æ˜¯å¦æ˜¯ æœ‰ç¬¦å· çš„ã€‚æ¯”å¦‚ï¼Œå¤§å°ä¸º1å­—èŠ‚çš„æœ‰ç¬¦å·æ•´å‹ï¼Œå®ƒçš„èŒƒå›´æ˜¯ï¼š-128~127(åŒ…å«èŒƒå›´çš„ä¸¤ç«¯)ï¼Œå³å®ƒå¯ä»¥å­˜å‚¨2^8=256 ä¸ªå¯èƒ½çš„æ•´æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…å«ä¸åŒå¤§å°æœ‰ç¬¦å·æ•´æ•°èŒƒå›´çš„è¡¨:å°ç»“ï¼Œä¸€ä¸ªæœ‰ n-bitsçš„ æœ‰ç¬¦å·å˜é‡ï¼Œå®ƒå¯å­˜å‚¨å€¼çš„èŒƒå›´æ˜¯ï¼š-(2^n-1^) ~ (2^n-1^ -1)æ•´æ•°æº¢å‡ºï¼Œç®€ç§°ï¼šæº¢å‡ºå¦‚æœæˆ‘ä»¬æŠŠå€¼280,å­˜å‚¨åœ¨ 1ä¸ªå­—èŠ‚çš„æœ‰ç¬¦å·æ•´å‹ ä¸­ï¼Œä»–å°±ä¼šå‘ç”Ÿ æº¢å‡ºç°è±¡ã€‚æ­¤æ—¶ï¼Œæ•°æ®ä¸¢å¤±æ˜¯å› ä¸ºå¯¹è±¡æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜æ¥å­˜å‚¨æ‰€æœ‰ä¸œè¥¿ã€‚4.5 æ— ç¬¦å·æ•´å‹ä¸æ¨èä½¿ç”¨æ— ç¬¦å·æ•´å‹ï¼šunsigned integerã€‚ä¸èƒ½å­˜å‚¨â€œè´Ÿæ•°â€ï¼Œå¯ä»¥å­˜å‚¨ï¼š0 å’Œ æ­£æ•´æ•°å®šä¹‰æ— ç¬¦å·æ•´å‹å˜é‡è¦å®šä¹‰æ— ç¬¦å·æ•´æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨unsignedå…³é”®å­—ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œè¿™æ˜¯æ”¾åœ¨å‰é¢çš„ç±»å‹:1234unsigned short us;unsigned int ui;unsigned long ul;unsigned long long ull;æ— ç¬¦å·æ•´å‹èŒƒå›´ä¸€ä¸ªæœ‰ n-bits çš„æ— ç¬¦å·æ•´å‹å˜é‡ï¼Œå®ƒå¯å­˜å‚¨çš„èŒƒå›´æ˜¯ï¼š0 ~ (2^n^)-1å½“ä¸éœ€è¦è´Ÿæ•°æ—¶ï¼Œæ— ç¬¦å·æ•´æ•°éå¸¸é€‚åˆäºç½‘ç»œå’Œå†…å­˜å¾ˆå°‘çš„ç³»ç»Ÿï¼Œå› ä¸ºæ— ç¬¦å·æ•´æ•°å¯ä»¥å­˜å‚¨æ›´å¤šçš„æ­£æ•°è€Œä¸å ç”¨é¢å¤–çš„å†…å­˜ã€‚æ— ç¬¦å·æ•´æ•°çš„æº¢å‡ºï¼šUnsigned integer overflowæ— ç¬¦å·æ•´æ•°ä¸ä¼šæº¢å‡ºã€‚å¦‚æœä¸€ä¸ªå€¼è¶…è¿‡èŒƒå›´ï¼Œé‚£ä¹ˆå®ƒä¼šé™¤ä»¥ä¸€ä¸ªæ¯”è¿™ä¸ªèŒƒå›´å¤§çš„æ•°ï¼Œç„¶åå°†ä½™æ•°å­˜èµ·æ¥ã€‚æ­£æ•°æº¢å‡ºå¦‚ï¼Œåœ¨ 1byteçš„èŒƒå›´ä¸­ï¼Œå­˜å‚¨æ•°æ®ã€‚280åœ¨ èŒƒå›´ä¸º 1ä¸ªå­—èŠ‚ çš„æ•´å‹ä¸­å­˜å‚¨ï¼Œå› 280&gt;255ã€‚æ‰€ä»¥ï¼Œå®ƒä¼šé™¤ä»¥256(æ¯” 1ä¸ªå­—èŠ‚çš„èŒƒå›´çš„æœ€å¤§å€¼å¤§1ï¼Œå³æ¯”255å¤§1çš„æ•°ï¼Œ256)ã€‚280/256=24ï¼Œæ‰€ä»¥å­˜å‚¨çš„æ˜¯24.å­˜å‚¨256ã€‚256&gt;255ã€‚åˆ™è¿›è¡Œ 256/256 = 0ï¼Œå³ç›¸å½“äºå­˜å‚¨ 0å­˜å‚¨257ã€‚257&gt;255ã€‚åˆ™è¿›è¡Œ 257/256 = 1ï¼Œå³ç›¸å½“äºå­˜å‚¨ 1çœ‹ä¸€ä¸ªç¨‹åºï¼š123456789101112131415#include &lt;iostream&gt; int main()&#123; unsigned short x&#123; 65535 &#125;; // æœ€å¤§çš„16ä½æ— ç¬¦å·å€¼ std::cout &lt;&lt; \"x was: \" &lt;&lt; x &lt;&lt; '\\n'; x = 65536; // 65536 is out of our range, so we get wrap-around std::cout &lt;&lt; \"x is now: \" &lt;&lt; x &lt;&lt; '\\n'; x = 65537; // 65537 is out of our range, so we get wrap-around std::cout &lt;&lt; \"x is now: \" &lt;&lt; x &lt;&lt; '\\n'; return 0;&#125;è¾“å‡ºï¼šè´Ÿæ•°æº¢å‡ºè™½ç„¶ï¼Œæ— ç¬¦å·æ•´æ•°çš„èŒƒå›´æ˜¯0~255(å‡å¦‚åœ¨ 1byteçš„èŒƒå›´).ä½†æ˜¯æˆ‘ä»¬ä¸å°å¿ƒåœ¨æ— ç¬¦å·æ•´å‹ä¸­è¾“å…¥äº† è´Ÿæ•°ï¼Œåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæ¯”å¦‚ï¼Œå½“è¾“å…¥ -1 æ—¶ã€‚-1ä¸åœ¨ 0~255è¿™ä¸ªèŒƒå›´ä¸­ã€‚æ­¤æ—¶å°±å¾ªç¯åˆ°è¿™ä¸ªèŒƒå›´çš„é¡¶éƒ¨ï¼ˆæœ€å¤§å€¼å¤„ï¼‰ï¼Œå³ 255ã€‚æ‰€ä»¥ï¼Œåœ¨ 1 byte çš„èŒƒå›´çš„æ— ç¬¦å·æ•´æ•°ä¸­ï¼Œè¾“å…¥ -1 ï¼Œå­˜å‚¨çš„æ˜¯ 255ã€‚è¾“å…¥-2ï¼Œå­˜å‚¨çš„æ˜¯254ã€‚ï¼ˆä»æœ€é¡¶éƒ¨å¾€å›å¾ªç¯ï¼‰4.6 å›ºå®šå®½åº¦çš„æ•´æ•°å’Œsize_tä¹‹å‰è®²äº†æ•´å‹å˜é‡çš„æœ€ä½sizeï¼Œå…¶å®ä»–ä»¬å¯ä»¥æŒ‰ç…§ä¸åŒçš„ç³»ç»Ÿå˜å¾—æ›´å¤§ã€‚ä¸ºä»€ä¹ˆä¸å›ºå®šæ•´å‹å˜é‡çš„å¤§å°ï¼Ÿå› ä¸ºåœ¨Cè¯­è¨€ä¸­ï¼Œä¸ºäº†æé«˜æ€§èƒ½ï¼ŒCæ•…æ„ä¿æŒæ•´æ•°çš„å¤§å°æ˜¯å¼€æ”¾çš„ï¼Œè¿™æ ·ç¼–è¯‘å™¨å®ç°è€…å°±å¯ä»¥ä¸º int é€‰æ‹©ä¸€ä¸ªåœ¨ç›®æ ‡è®¡ç®—æœºæ¶æ„ä¸Šè¡¨ç°æœ€å¥½çš„å¤§å°ã€‚å›ºå®šå®½åº¦çš„æ•´å‹ä¸ºäº†å®ç°è·¨å¹³å°ï¼ŒC99å®šä¹‰äº†ä¸€ç³»åˆ—çš„å›ºå®šå®½åº¦çš„æ•´å‹(åœ¨å¤´æ–‡ä»¶stdint.hä¸­)ï¼Œä½¿å¾—åœ¨ä»»ä½•å¹³å°ä¸­çš„å¤§å°éƒ½ä¸€è‡´ã€‚åœ¨C++11ä¸­çš„å¤´æ–‡ä»¶cstdintä¸­ï¼Œä¹ŸåŒ…å«äº†ä¸Šè¿°çš„å›ºå®šå®½åº¦æ•´å‹ã€‚ä»–ä»¬åœ¨å‘½åç©ºé—´stdä¸­å®šä¹‰çš„ã€‚å¦‚;123456789#include &lt;iostream&gt;#include &lt;cstdint&gt;int main()&#123; std::int16_t i(5); std::cout &lt;&lt; i; return 0;&#125;åº”è¯¥é¿å…ä¸Šè¿°å›ºå®šå®½åº¦çš„æ•´æ•°ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½ä¸æ˜¯åœ¨æ‰€æœ‰ç›®æ ‡ä½“ç³»ç»“æ„ä¸Šå®šä¹‰çš„ã€‚fast &amp; least æ•´å‹ï¼šå¿«ç±»å‹ &amp; å°ç±»å‹ä¸ºäº†å¸®åŠ©è§£å†³ä¸Šè¿°ç¼ºç‚¹ï¼Œc++ 11è¿˜å®šä¹‰äº†ä¸¤ä¸ªå¯é€‰çš„æ•´æ•°é›†ã€‚*fast type *æ— ç¬¦å·æ ¼å¼ä¸ºï¼š std::int_fast#_t ï¼›æœ‰ç¬¦å·æ ¼å¼ï¼šstd::uint_fast#_tå®ƒæä¾›ä¸€ä¸ªæ•´å‹ï¼Œå®ƒæä¾›ä¸€ä¸ªåœ¨ä½ çš„æœºå™¨ä¸Šè¡¨ç°å¾—æ€§èƒ½æœ€å¥½çš„å®½åº¦ï¼Œä½†æ˜¯å®ƒçš„å®½åº¦æœ€å°æ˜¯â€œ# bitsâ€ï¼ˆ# = 8ï¼Œ16ï¼Œ32ï¼Œor 64 bitï¼‰å¦‚ï¼šstd::int_fast32_tå°†ä¼šç»™ä½ ä¸€ä¸ªæœ€å°ä¸º 32bits çš„æ— ç¬¦å·æ•´å‹least typeæ— ç¬¦å·æ ¼å¼ä¸ºï¼š std::int_least#_t ï¼›æœ‰ç¬¦å·æ ¼å¼ï¼šstd::uint_least#_tå®ƒæä¾›ä¸€ä¸ªæ•´å‹ç±»å‹ï¼Œå®ƒæä¾›ä¸€ä¸ªæœ€æ¥è¿‘äºâ€œ# bitsâ€çš„å®½åº¦ï¼Œä½†æ˜¯å®ƒçš„å®½åº¦æœ€å°æ˜¯â€œ# bitsâ€ï¼ˆ# = 8ï¼Œ16ï¼Œ32ï¼Œor 64 bitï¼‰å°ç»“ï¼šæ¯”è¾ƒï¼šint#\\_tã€int_fast#_tã€int_least#_tçš„å·®å¼‚ï¼šint#_tçš„bits(ä½æ•°)æ˜¯å›ºå®šçš„ï¼Œå³æœ‰â€œ# bitsâ€ï¼›int_fast#_t å’Œ int_least#_tçš„bits(ä½æ•°)æœ€å°‘æœ‰â€œâ€œ# bitsâ€ï¼›exampleï¼šint16_tï¼šæ˜¯å›ºå®šçš„16ä½çš„æ•´å‹ï¼›int_fast16_tï¼šå¯èƒ½è½¬å˜æˆäº†64ä½çš„æ•´å‹ã€‚ï¼ˆå› ä¸ºåœ¨ä½ çš„æœºå™¨ä¸Šï¼Œ64ä½æ•´å‹æœ€å¿«äº†ï¼‰int_least16_tï¼šå¯èƒ½è½¬å˜æˆäº†32ä½çš„æ•´å‹ã€‚ï¼ˆå‡è®¾å› ä¸ºä½ çš„ç³»ç»Ÿä¸­æ²¡æœ‰16ä½çš„æ•´å‹ï¼Œè€Œ32ä½æ­¤æ—¶æ˜¯æœ€æ¥è¿‘16ä½ çš„æ•´å‹äº†ï¼‰æ³¨æ„ï¼šstd::int8_tå’Œstd::uint8_tæ˜¯charç±»å‹ï¼Œè€Œä¸æ˜¯integeråœ¨C++ä¸­ï¼Œå¾ˆå¤šç¼–è¯‘å™¨å¯¹std::int8_tå’Œstd::uint8_tï¼ˆä»¥åŠç›¸åº”çš„fast å’Œ least æ•´å‹ï¼‰çš„å®šä¹‰å’Œå¯¹å¾…æ–¹å¼ æ˜¯ä¸ signed char(æœ‰ç¬¦å·å­—ç¬¦ç±»å‹) çš„æ–¹å¼ç›¸åŒã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›ç³»ç»Ÿä¸­ï¼Œå®ƒç¡®å®æ˜¯æ•´å‹çš„ï¼Œè€Œä¸æ˜¯charç±»å‹ã€‚12345678910111213#include &lt;cstdint&gt;#include &lt;iostream&gt; int main()&#123; std::int8_t myint = 65; std::cout &lt;&lt; myint; return 0;&#125;/******************************/è¿è¡Œç»“æœæ˜¯ï¼š Aæ‰€ä»¥ï¼Œæˆ‘ä»¬è¦é¿å…ä½¿ç”¨è¿™å‡ ä¸ªæ•´å‹ç±»å‹ã€‚æœ€ä½³ä½¿ç”¨æ•´å‹å½“æ•´å‹çš„å¤§å°ä¸åšè¦æ±‚æ—¶ï¼Œä½¿ç”¨intï¼›å¦‚æœéœ€è¦ä¸€ä¸ªä¿è¯ä¸ºç‰¹å®šå¤§å°çš„å˜é‡ï¼Œå¹¶ä¸”å¸Œæœ›æé«˜æ€§èƒ½ï¼Œä½¿ç”¨int_fast#_tï¼›å¦‚æœæ‚¨éœ€è¦ä¸€ä¸ªä¿è¯ä¸ºç‰¹å®šå¤§å°çš„å˜é‡ï¼Œå¹¶ä¸”å¸Œæœ›ä¼˜å…ˆè€ƒè™‘å†…å­˜ä¿æŠ¤è€Œä¸æ˜¯æ€§èƒ½ï¼Œä½¿ç”¨ int_least#_tå°½é‡ä¸è¦ä½¿ç”¨è¿™äº›ï¼šæ— ç¬¦å·æ•´å‹ï¼ŒUnsigned typesï¼›8 bits çš„å›ºå®šå®½åº¦çš„æ•´å‹ç±»å‹ï¼›ä»»ä½•ç‰¹å®šäºç¼–è¯‘å™¨çš„å›ºå®šå®½åº¦æ•´æ•°ï¼ˆä¾‹å¦‚ï¼Œvisual studio å®šä¹‰äº† __int8 ï¼Œ__int16 ç­‰ç­‰ï¼‰std::size_tæ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ç±»å‹ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºå¯¹è±¡çš„å¤§å°æˆ–é•¿åº¦ã€‚sizeofè¿”å›ä¸€ä¸ªstd::size_tç±»å‹çš„å€¼ã€‚å¦‚ï¼š1234567891011#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; sizeof(int) &lt;&lt; '\\n'; return 0;&#125;/***********************/ç»“æœæ˜¯ï¼š 4 ã€è¿™ä¸ª4ï¼Œå°±æ˜¯ std::size_tç±»å‹çš„ã€‘size_tæœ¬èº«å¤§å°ä¹Ÿæ˜¯ä¸å›ºå®šçš„ï¼Œå®ƒç¡®ä¿æ˜¯æ— ç¬¦å·çš„ï¼Œå¹¶ä¸”è‡³å°‘æ˜¯16ä½ã€‚ä½†æ˜¯åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œå®ƒçš„å¤§å°å°†ç­‰äºåº”ç”¨ç¨‹åºçš„åœ°å€å®½åº¦ã€‚æ¯”å¦‚ï¼Œåœ¨32ä½åº”ç”¨ç¨‹åºä¸­ï¼Œsize_tæ˜¯ä¸€ä¸ª 32 bits çš„æ— ç¬¦å·æ•´å‹ï¼›åœ¨64ä½åº”ç”¨ç¨‹åºä¸­ï¼Œsize_tæ˜¯ä¸€ä¸ª 64 bits çš„æ— ç¬¦å·æ•´å‹ã€‚4.7 ç§‘å­¦è®¡æ•°æ³•scientific notationç§‘å­¦è®¡æ•°æ³•çš„å½¢å¼ï¼šaÃ—10^exponent^ã€‚å…¶ä¸­, aï¼šåªèƒ½æ˜¯0~9çš„æ•°ï¼ˆä¸åŒ…æ‹¬0ï¼Œä½†åŒ…æ‹¬9ï¼‰å¦‚ï¼š1.2Ã—10^4^ ã€ 5.9736 x 10^24^åœ¨C++ä¸­ï¼Œæˆ‘ä»¬ç”¨å­—æ¯eï¼ˆå¤§å†™Eä¹Ÿå¯ä»¥ï¼‰æ¥ä»£è¡¨ 10ï¼›1.2Ã—10^4^ -&gt; 1.2e4 ï¼› 5.9736 x 10^24^ -&gt; 5.9736e24å°äº1çš„åˆ†æ•°0.05è¡¨ç¤ºä¸ºï¼š 5e-2æœ‰æ•ˆæ•°å­—ï¼šsignificant digitsæœ‰æ•ˆæ•°å­—çš„æ•°é‡å®šä¹‰äº†æ•°å­—çš„ç²¾åº¦ã€‚(æœ‰æ•ˆæ•°å­—è¶Šå¤šï¼Œæ•°å­—è¶Šç²¾ç¡®ã€‚)eå‰é¢çš„æ•°å°±æ˜¯æœ‰æ•ˆæ•°å­—ï¼Œå¦‚5.9736e24çš„æœ‰æ•ˆæ•°å­—æ˜¯ï¼š5.9736ï¼Œå³ï¼Œ5ä¸ªæœ‰æ•ˆæ•°å­—4.8 æµ®ç‚¹æ•°floatæ°¸è¿œä¸è¦å‡è®¾æµ®ç‚¹æ•°æ˜¯ç²¾ç¡®çš„ã€‚ä¸‰ç§æµ®ç‚¹å‹æ•°æ®ï¼šfloatã€doubleã€long doubleä¸æ•´æ•°ä¸€æ ·ï¼Œc++æ²¡æœ‰å®šä¹‰è¿™äº›ç±»å‹çš„å®é™…å¤§å°(ä½†å®ƒç¡®å®ä¿è¯äº†æœ€å°å¤§å°)ã€‚åœ¨ç°ä»£ä½“ç³»ç»“æ„ä¸­ï¼Œæµ®ç‚¹è¡¨ç¤ºå‡ ä¹æ€»æ˜¯éµå¾ªIEEE 754äºŒè¿›åˆ¶æ ¼å¼ã€‚åœ¨è¿™ç§æ ¼å¼ä¸­ï¼šfloatï¼š4å­—èŠ‚ï¼›doubleï¼š8å­—èŠ‚ï¼Œlong doubleï¼šå¯ä»¥ç­‰äºä¸€ä¸ªdouble(8å­—èŠ‚)ã€80 bits(é€šå¸¸å¡«å……ä¸º12å­—èŠ‚)æˆ–è€… 16å­—èŠ‚ã€‚æµ®ç‚¹å‹æ•°æ®é€šå¸¸æ˜¯ æœ‰ç¬¦å·çš„(sign)ï¼š123456int x&#123;5&#125;; //æ•´å‹double y&#123;5.0&#125;; //5.0æ˜¯ä¸€ä¸ªæµ®ç‚¹å‹(æ²¡æœ‰åç¼€ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯doubleç±»å‹)float z&#123;5.0f&#125;; //5.0æ˜¯ä¸€ä¸ªæµ®ç‚¹å‹ï¼Œfåç¼€è¡¨ç¤ºæµ®ç‚¹ç±»å‹/**********/ã€æ³¨ã€‘æµ®ç‚¹å‹æ•°æ®é»˜è®¤æ˜¯ï¼šdoubleç±»å‹çš„ï¼ŒåŠ ä¸Šåç¼€â€œfâ€è¡¨ç¤ºæ˜¯ floatç±»å‹æµ®ç‚¹å‹æ•°æ®çš„è¾“å‡º1234567891011121314#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; 5.0 &lt;&lt; '\\n'; std::cout &lt;&lt; 6.7f &lt;&lt; '\\n'; std::cout &lt;&lt; 9876543.21 &lt;&lt; '\\n';&#125;/*************/è¾“å‡ºç»“æœï¼š56.79.87654e+06ç¬¬ä¸€ä¸ªï¼Œå³ä½¿æˆ‘ä»¬è¾“å…¥çš„æ˜¯5.0ï¼Œä½†å®ƒè¾“å‡ºçš„ä¾ç„¶æ˜¯ 5ã€‚ã€é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœå°æ•°éƒ¨åˆ†ä¸º0,std::coutå°†ä¸ä¼šæ‰“å°æ•°å­—çš„å°æ•°éƒ¨åˆ†ã€‚ã€‘ç¬¬äºŒä¸ªè¾“å‡ºæ­£å¸¸ï¼›ç¬¬ä¸‰ä¸ªè¾“å‡ºæ˜¯ç§‘å­¦è®°æ•°çš„å½¢å¼ã€‚æµ®ç‚¹å‹çš„èŒƒå›´æ ¹æ® IEEE 754çš„è¡¨ç¤ºï¼šæµ®ç‚¹å‹çš„ç²¾åº¦æµ®ç‚¹å‹çš„é»˜è®¤ç²¾åº¦æ˜¯6ï¼š123456789101112131415161718#include &lt;iostream&gt;int main()&#123; std::cout &lt;&lt; 9.87654321f &lt;&lt; '\\n'; std::cout &lt;&lt; 987.654321f &lt;&lt; '\\n'; std::cout &lt;&lt; 987654.321f &lt;&lt; '\\n'; std::cout &lt;&lt; 9876543.21f &lt;&lt; '\\n'; std::cout &lt;&lt; 0.0000987654321f &lt;&lt; '\\n'; return 0;&#125;/*******è¾“å‡º**********/9.87654987.6549876549.87654e+0069.87654e-005æ³¨æ„ï¼šæ ¹æ®ç¼–è¯‘å™¨çš„ä¸åŒï¼ŒæŒ‡æ•°çš„ä½æ•°ä¼šè¢«å¡«å……ã€‚æ¯”å¦‚ï¼šâ€œ9.87654e+006â€çš„æŒ‡æ•°ä½ç½®å°±è¢«å¡«å……ä¸º3ä½ã€‚æ˜¾ç¤ºçš„æœ€å°æŒ‡æ•°ä½æ•°æ˜¯ç‰¹å®šäºç¼–è¯‘å™¨çš„ï¼Œåœ¨Visual Studio ä¸­å¡«å……ä¸º 3 ä½æµ®ç‚¹å˜é‡çš„ç²¾åº¦ä½æ•°å–å†³äºå¤§å°(æµ®ç‚¹æ•°çš„ç²¾åº¦å°äºåŒç²¾åº¦)å’Œå­˜å‚¨çš„ç‰¹å®šå€¼(æŸäº›å€¼çš„ç²¾åº¦é«˜äºå…¶ä»–å€¼)ã€‚ç”¨ iomanipå¤´æ–‡ä»¶ä¸­çš„å‡½æ•° std::setprecisonæ¥è¦†ç›–std::coutæ˜¾ç¤ºçš„é»˜è®¤ç²¾åº¦ã€‚12345678910111213#include &lt;iostream&gt;#include &lt;iomanip&gt; // for std::setprecision()int main()&#123; std::cout &lt;&lt; std::setprecision(16); // show 16 digits of precision std::cout &lt;&lt; 3.33333333333333333333333333333333333333f &lt;&lt;'\\n'; // f suffix means float std::cout &lt;&lt; 3.33333333333333333333333333333333333333 &lt;&lt; '\\n'; // no suffix means double return 0;&#125;/*******è¾“å‡º*********/3.3333332538604743.333333333333334å¯ä»¥çœ‹å‡ºï¼Œdoubleç±»å‹çš„æ¯”floatç±»å‹çš„ç²¾åº¦æ›´é«˜ã€‚ç²¾åº¦ä¸ä»…å½±å“å°æ•°éƒ¨åˆ†ï¼Œä»–è¿˜å½±å“æ¯”è¾ƒå¤§çš„æ•°çš„ç²¾åº¦ã€‚12345678910111213#include &lt;iostream&gt;#include &lt;iomanip&gt; // for std::setprecision() int main()&#123; float f &#123; 123456789.0f &#125;; // f has 10 significant digits std::cout &lt;&lt; std::setprecision(9); // to show 9 digits in f std::cout &lt;&lt; f &lt;&lt; '\\n'; return 0;&#125;/*********ç»“æœ**********/123456792123456789.0 çš„æœ‰æ•ˆæ•°å­—æ˜¯10ä¸ªï¼Œä½†æ˜¯æµ®ç‚¹å‹é€šå¸¸æœ‰7ä½ç²¾åº¦(123456792çš„ç»“æœåªèƒ½ç²¾ç¡®åˆ°7ä½æœ‰æ•ˆæ•°å­—)ã€‚æˆ‘ä»¬å¤±å»äº†ä¸€äº›ç²¾åº¦!å½“ç”±äºæ— æ³•ç²¾ç¡®åœ°å­˜å‚¨æ•°å­—è€Œä¸¢å¤±ç²¾åº¦æ—¶ï¼Œè¿™ç§°ä¸ºrounding error(èˆå…¥è¯¯å·®)ã€‚å°ç»“ï¼šé€šå¸¸æƒ…å†µæ¨èä½¿ç”¨doubleæ— é™å¾ªç¯ &amp; éæ•°å­— ï¼šNaN and Inf123456789101112131415161718192021#include &lt;iostream&gt; int main()&#123; double zero &#123;0.0&#125;; double posinf &#123; 5.0 / zero &#125;; // positive infinity std::cout &lt;&lt; posinf &lt;&lt; std::endl; double neginf &#123; -5.0 / zero &#125;; // negative infinity std::cout &lt;&lt; neginf &lt;&lt; std::endl; double nan &#123; zero / zero &#125;; // not a number (mathematically invalid) std::cout &lt;&lt; nan &lt;&lt; std::endl; return 0;&#125;/*******ç»“æœ************/1.#INF-1.#INF1.#INDINFä»£è¡¨æ— ç©·ï¼ŒINDä»£è¡¨ä¸ç¡®å®šã€‚è¯·æ³¨æ„ï¼Œè¾“å‡ºInfå’ŒNaNçš„ç»“æœæ˜¯ç‰¹å®šäºå¹³å°çš„ï¼Œå› æ­¤æ‚¨çš„ç»“æœå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚æ€»ç»“ï¼šæµ®ç‚¹æ•°ç”¨äºå­˜å‚¨éå¸¸å¤§æˆ–éå¸¸å°çš„æ•°å­—ï¼ŒåŒ…æ‹¬é‚£äº›å…·æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ã€‚æµ®ç‚¹æ•°é€šå¸¸æœ‰è¾ƒå°çš„èˆå…¥è¯¯å·®ï¼Œå³ä½¿è¯¥æ•°çš„æœ‰æ•ˆä½æ•°æ¯”ç²¾åº¦å°ã€‚å¾ˆå¤šæ—¶å€™ï¼Œè¿™äº›æ•°æ®çš„èˆå…¥è¯¯å·®æ²¡æœ‰è¢«æ³¨æ„åˆ°ï¼Œå› ä¸ºå®ƒä»¬éå¸¸å°ï¼Œè€Œä¸”ç”±äºè¾“å‡ºè€Œè¢«æˆªæ–­ã€‚ä½†æ˜¯ï¼Œå¯¹æµ®ç‚¹æ•°çš„æ¯”è¾ƒå¯èƒ½ä¸ä¼šå¾—åˆ°é¢„æœŸçš„ç»“æœã€‚å¯¹è¿™äº›å€¼æ‰§è¡Œæ•°å­¦è¿ç®—å°†å¯¼è‡´èˆå…¥è¯¯å·®å¢å¤§ã€‚4.9 å¸ƒå°”å‹boolå®é™…ä¸Šï¼ŒBoolean values(å¸ƒå°”å€¼)å­˜å‚¨çš„å¸ƒå°”å˜é‡ï¼Œä¸æ˜¯ä»¥trueã€falseçš„å½¢å¼ã€‚è€Œæ˜¯ä»¥æ•´å‹ç±»å‹å­˜å‚¨çš„ï¼Œå³trueå¯¹åº”æ•´å‹1ï¼›falseå¯¹åº”æ•´å‹0ã€‚å³ï¼Œå¸ƒå°”å€¼è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ•´å‹ç±»å‹ã€‚è¾“å‡ºå¸ƒå°”å€¼123456789101112131415161718#include &lt;iostream&gt; int main() &#123; std::cout &lt;&lt;true&lt;&lt;'\\n'; std::cout &lt;&lt;false&lt;&lt;'\\n'; bool b&#123;false&#125;; std::cout &lt;&lt;b&lt;&lt;'\\n'; std::cout &lt;&lt;!b&lt;&lt;'\\n'; return 0; &#125;/***************ç»“æœ***********/1001å¦‚æœä½ æƒ³è¾“å‡ºâ€œtrueã€falseâ€ã€‚ä½ å¯ä»¥ç”¨std::boolalpahï¼šstd::noboolalphaæ˜¯å…³é—­ä½œç”¨1234567891011121314151617#include &lt;iostream&gt;int main()&#123; std::cout &lt;&lt; true &lt;&lt; '\\n'; std::cout &lt;&lt; false &lt;&lt; '\\n'; std::cout &lt;&lt; std::boolalpha; //print bools as ture or false std::cout &lt;&lt;true&lt;&lt;'\\n'; std::cout &lt;&lt;false&lt;&lt;'\\n'; return 0;&#125;/********ç»“æœ**********/10truefalseæ•´å‹ä¸å¸ƒå°”å‹çš„è½¬æ¢ï¼šInteger to Boolean conversion*ä¸èƒ½ç”¨æ•´å‹æ•°å­—æ¥åˆå§‹åŒ–boolå˜é‡*bool b{4}; //error: ä¸å…è®¸è¿™æ ·è½¬æ¢ä½†æ˜¯ï¼Œæ•´å‹å˜é‡å¯ä»¥è½¬æ¢ä¸ºå¸ƒå°”å‹ï¼šæ•´å‹ 0 å¯ä»¥è¢«è½¬æ¢ä¸ºfalseï¼›å…¶ä»–çš„é0 çš„æ•´å‹å¯ä»¥è¢«è½¬æ¢ä¸ºtrue12345678910111213141516171819#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; std::boolalpha; // print bools as true or false bool b1 = 4 ; // copy initialization allows implicit conversion from int to bool std::cout &lt;&lt; b1 &lt;&lt; '\\n'; bool b2 = 0 ; // copy initialization allows implicit conversion from int to bool std::cout &lt;&lt; b2 &lt;&lt; '\\n'; return 0;&#125;/********ç»“æœ**********/truefalseè¾“å…¥å¸ƒå°”å‹å€¼123456789int main()&#123; bool b &#123;&#125;; // default initialize to false (0) std::cout &lt;&lt; \"Enter a boolean value: \"; std::cin &gt;&gt; b; std::cout &lt;&lt; \"You entered: \" &lt;&lt; b; return 0;&#125;12Enter a Boolean value: trueYou entered: 0å‘ç°ï¼Œå¸ƒå°”å‹å€¼çš„è¾“å…¥ï¼Œåªæ¥å—ï¼š0 å’Œ1 (ä¸æ˜¯ true æˆ–è€… false)ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¾“å…¥çš„å€¼æ˜¯0 å’Œ1ä¹‹å¤–çš„å…¶ä»–å€¼ï¼Œéƒ½æ˜¯å¤±è´¥çš„ï¼Œå³falseï¼Œæ‰€ä»¥æ˜¯0ã€‚å› ä¸ºåœ¨C++11æˆ–è€…æ›´æ–°çš„æ ‡å‡†ä¸­ï¼Œä¸€ä¸ªå¤±è´¥çš„è¾“å…¥ä¹Ÿä¼šä½¿å˜é‡å˜ä¸º0ï¼Œæ‰€ä»¥bä¹Ÿä¼šè¢«èµ‹å€¼ä¸º0ã€‚4.11 charç±»å‹charæ•°æ®ç±»å‹æ˜¯æ•´æ•°ç±»å‹ï¼Œè¿™æ„å‘³ç€åº•å±‚å€¼å­˜å‚¨ä¸ºæ•´æ•°ï¼Œå¹¶ä¸”ä¿è¯å¤§å°ä¸º1å­—èŠ‚ã€‚ä½†æ˜¯ï¼Œä¸å°†å¸ƒå°”å€¼è§£é‡Šä¸ºtrueæˆ–falseç±»ä¼¼ï¼Œå°†charå€¼è§£é‡Šä¸ºASCIIå­—ç¬¦ã€‚ASCIIæ˜¯ç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç çš„ç¼©å†™ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ç‰¹æ®Šçš„æ–¹å¼æ¥å°†è‹±æ–‡å­—ç¬¦(åŠ ä¸Šä¸€äº›å…¶ä»–ç¬¦å·)è¡¨ç¤ºä¸º0åˆ°127ä¹‹é—´çš„æ•°å­—(ç§°ä¸ºASCIIç æˆ–ä»£ç ç‚¹)ã€‚å­—ç¬¦æ–‡å­—æ€»æ˜¯æ”¾åœ¨å•å¼•å·ä¹‹é—´ã€‚ä¾‹å¦‚ï¼ŒASCIIç 97è¢«è§£é‡Šä¸ºå­—ç¬¦â€œaâ€ã€‚ä¸‹é¢æ˜¯å®Œæ•´çš„ASCIIå­—ç¬¦è¡¨:CodeSymbolCodeSymbolCodeSymbolCodeSymbol0NUL (null)32(space)64@96`1SOH (start of header)33!65A97a2STX (start of text)34â€66B98b3ETX (end of text)35#67C99c4EOT (end of transmission)36$68D100d5ENQ (enquiry)37%69E101e6ACK (acknowledge)38&amp;70F102f7BEL (bell)39â€™71G103g8BS (backspace)40(72H104h9HT (horizontal tab)41)73I105i10LF (line feed/new line)42*74J106j11VT (vertical tab)43+75K107k12FF (form feed / new page)44,76L108l13CR (carriage return)45-77M109m14SO (shift out)46.78N110n15SI (shift in)47/79O111o16DLE (data link escape)48080P112p17DC1 (data control 1)49181Q113q18DC2 (data control 2)50282R114r19DC3 (data control 3)51383S115s20DC4 (data control 4)52484T116t21NAK (negative acknowledge)53585U117u22SYN (synchronous idle)54686V118v23ETB (end of transmission block)55787W119w24CAN (cancel)56888X120x25EM (end of medium)57989Y121y26SUB (substitute)58:90Z122z27ESC (escape)59;91[123{28FS (file separator)60&lt;92\\124|29GS (group separator)61=93]125}30RS (record separator)62&gt;94^126~31US (unit separator)63?95_127DEL (delete)åˆå§‹åŒ–å­—ç¬¦ä½¿ç”¨å­—ç¬¦ åˆå§‹åŒ–ï¼šchar cha2{&#39;a&#39;}; // initialize with code point for â€˜aâ€™ (stored as integer 97) (preferred)ä½¿ç”¨æ•´å‹æ•°å€¼ åˆå§‹åŒ–ï¼šchar cha1{97}; // initialize with integer 97 (â€˜aâ€™) (not preferred)è¾“å‡ºå­—ç¬¦å‹12345678910111213141516#include &lt;iostream&gt; int main()&#123; char ch1&#123; 'a' &#125;; // (preferred) std::cout &lt;&lt; ch1; // cout prints a character char ch2&#123; 98 &#125;; // code point for 'b' (not preferred) std::cout &lt;&lt; ch2; // cout prints a character std::cout&lt;&lt;'c'; return 0;&#125;/*******ç»“æœ********/abcã€æ³¨æ„ã€‘å›ºå®šå®½åº¦æˆ‘çš„æ•´å‹ï¼šint8_tç±»å‹ï¼Œæ˜¯è¢«å½“åšæœ‰ç¬¦å·çš„charç±»å‹å¯¹å¾…çš„ã€‚12345678910#include &lt;iostream&gt;#include &lt;cstdint&gt;int main()&#123; int8_t a&#123; 97 &#125;; std::cout &lt;&lt; a; return 0;&#125;è¾“å‡ºï¼šé€šè¿‡ç±»å‹è½¬æ¢å°†å­—ç¬¦æ‰“å°ä¸ºæ•´æ•°ä¸€ç§(ç³Ÿç³•çš„)æ–¹æ³•æ˜¯å°†charèµ‹å€¼ç»™ä¸€ä¸ªæ•´æ•°ï¼Œç„¶åè¾“å‡ºè¿™ä¸ªæ•´æ•°:1234567891011121314#include &lt;iostream&gt;int main()&#123; char ch&#123;97&#125;; int a&#123;ch&#125;; std::cout&lt;&lt;i; return 0;&#125;/********ç»“æœ*********/97å¦ä¸€ç§è¾ƒå¥½çš„æ–¹æ³•å°±æ˜¯ï¼štype caseï¼šå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå…¶æ ¼å¼ä¸ºï¼šstatic_cast&lt;new_type&gt;(expression)12345678910111213141516#include &lt;iostream&gt;int main()&#123; char ch1&#123;97&#125;; char ch2&#123;'a'&#125;; std::cout&lt;&lt; static_cast&lt;int&gt; (ch1) &lt;&lt;'\\n'; //å¼ºåˆ¶ç±»å‹è½¬æ¢ std::cout&lt;&lt; static_cast&lt;int&gt; (ch2) ; //å¼ºåˆ¶ç±»å‹è½¬æ¢ return 0;&#125;/*********ç»“æœ********/9797åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå˜é‡chä»ç„¶æ˜¯ä¸€ä¸ªcharï¼Œå¹¶ä¸”ä»ç„¶ä¿æŒç›¸åŒçš„å€¼ã€‚çŸ¥è¯†åœ¨æœ¬æ¬¡è¾“å‡ºæ—¶ï¼Œè¾“å‡ºçš„æ˜¯æ•´å‹ç±»å‹çš„å€¼ã€‚çŸ¥è¯†ç‚¹ï¼šå½“æ‚¨çœ‹åˆ°c++è¯­æ³•(ä¸åŒ…æ‹¬é¢„å¤„ç†å™¨)ä½¿ç”¨å°–æ‹¬å·&lt;&gt;æ—¶ï¼Œå°–æ‹¬å·ä¹‹é—´çš„å†…å®¹å¾ˆå¯èƒ½æ˜¯ç±»å‹ã€‚è¿™å°±æ˜¯c++å¤„ç†éœ€è¦å‚æ•°åŒ–ç±»å‹çš„æ¦‚å¿µçš„å…¸å‹æ–¹å¼ã€‚ã€æ³¨æ„ã€‘ï¼šstd::cinå°†å…è®¸æ‚¨è¾“å…¥å¤šä¸ªå­—ç¬¦ã€‚ç„¶è€Œï¼Œå˜é‡chåªèƒ½åŒ…å«ä¸€ä¸ªå­—ç¬¦ã€‚å› æ­¤ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªè¾“å…¥å­—ç¬¦è¢«æå–åˆ°å˜é‡chä¸­ï¼Œå…¶ä½™çš„ç”¨æˆ·è¾“å…¥ç•™åœ¨std::cinä½¿ç”¨çš„è¾“å…¥ç¼“å†²åŒºä¸­ï¼Œå¯ä»¥é€šè¿‡åç»­è°ƒç”¨std::cinæ¥æå–ã€‚12345678910111213141516#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Input a keyboard character: \"; // assume the user enters \"abcd\" (without quotes) char ch&#123;&#125;; std::cin &gt;&gt; ch; // ch = 'a', \"bcd\" is left queued. std::cout &lt;&lt; ch &lt;&lt; \" has ASCII code \" &lt;&lt; static_cast&lt;int&gt;(ch) &lt;&lt; '\\n'; // Note: The following cin doesn't ask the user for input, it grabs queued input! std::cin &gt;&gt; ch; // ch = 'b', \"cd\" is left queued. std::cout &lt;&lt; ch &lt;&lt; \" has ASCII code \" &lt;&lt; static_cast&lt;int&gt;(ch) &lt;&lt; '\\n'; return 0;&#125;è¾“å‡ºï¼š)charçš„å¤§å°ã€èŒƒå›´ä»¥åŠé»˜è®¤çš„sign(ç¬¦å·)sizeï¼šC++ä¸­charç±»å‹é€šå¸¸ä¸ºï¼š1 byteï¼›signï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œcharç±»å‹æ˜¯ signed æˆ–è€… unsignedï¼›å¦‚æœä½¿ç”¨å­—ç¬¦æ¥ä¿å­˜ASCIIå­—ç¬¦ï¼Œåˆ™ä¸éœ€è¦æŒ‡å®šç¬¦å·(å› ä¸ºæœ‰ç¬¦å·å’Œæ— ç¬¦å·å­—ç¬¦éƒ½å¯ä»¥ä¿å­˜0åˆ°127ä¹‹é—´çš„å€¼)ã€‚ä¸€ä¸ªæœ‰ç¬¦å·çš„å­—ç¬¦å¯ä»¥å®¹çº³-128åˆ°127ä¹‹é—´çš„æ•°å­—ï¼›æ— ç¬¦å·å­—ç¬¦å¯ä»¥å®¹çº³0åˆ°255ä¹‹é—´çš„æ•°å­—ã€‚è½¬ä¹‰ç¬¦ï¼šescape sequencesè½¬ä¹‰ç¬¦ä»¥ â€œ\\â€ å¼€å¤´,åé¢è·Ÿç€ä¸€ä¸ª å­—æ¯ æˆ– æ•°å­—ï¼›NameSymbolMeaningAlert\\aMakes an alert, such as a beepBackspace\\bMoves the cursor back one spaceFormfeed\\fMoves the cursor to next logical pageNewline\\nMoves cursor to next lineCarriage return\\rMoves cursor to beginning of lineHorizontal tab\\tPrints a horizontal tabVertical tab\\vPrints a vertical tabSingle quote\\â€™Prints a single quoteDouble quote\\â€Prints a double quoteBackslash\\Prints a backslash.Question mark?Prints a question mark. No longer relevant. You can use question marks unescaped.Octal number(number)Translates into char represented by octal (octalï¼š8è¿›åˆ¶)Hex number\\x(number)Translates into char represented by hex number(hexï¼š16è¿›åˆ¶)å•å¼•å· VS åŒå¼•å· çš„åŒºåˆ«å•ä¸ªå­—ç¬¦æ€»æ˜¯æ”¾åœ¨ å•å¼•å· ä¸­ã€‚(e.g. â€˜aâ€™, â€˜+â€™, â€˜5â€™)ã€‚charç±»å‹çš„åªèƒ½æ¥æ”¶ä¸€ä¸ªç¬¦å·(e.g. å­—æ¯ a, + , æ•°å­— 5)char ch(&#39;56&#39;); // a char can only hold one symbolæ”¾åœ¨åŒå¼•å·(ä¾‹å¦‚â€œHello, world!â€)ä¹‹é—´çš„æ–‡æœ¬ç§°ä¸ºå­—ç¬¦ä¸²stringã€‚ä¸€ä¸ª stringæ˜¯è¿ç»­å­—ç¬¦çš„é›†åˆ(å› æ­¤ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²å¯ä»¥åŒ…å«å¤šä¸ªç¬¦å·)ã€‚std::cout &lt;&lt; &quot;hello world&quot; ; // â€œHello, world!â€ is a string literalçŸ¥è¯†ç‚¹ï¼šstringç±»å‹åœ¨C++ä¸­ï¼Œä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹charçš„å…¶ä»–ç±»å‹ï¼šwchar_tã€char16_tã€char32_twchar_tï¼šåº”é¿å…ä½¿ç”¨(é™¤éæ˜¯åœ¨windows APIæ¥å£æ—¶ä½¿ç”¨)ã€‚å®ƒçš„å¤§å°æ˜¯åœ¨å®ç°æ—¶æ‰ç¡®å®šçš„ï¼Œå®ƒå¹¶ä¸å¯é ã€‚char16_tã€char32_tåœ¨C++11ä¸­æ·»åŠ ï¼Œä»¥æä¾›å¯¹16ä½å’Œ32ä½Unicodeå­—ç¬¦çš„æ˜¾å¼æ”¯æŒã€‚åœ¨c++ 20ä¸­æ·»åŠ äº†char8_tã€‚4.12 å­—é¢å¸¸é‡constantï¼šæ˜¯å›ºå®šçš„å€¼ï¼Œä¸å¯è¢«æ”¹å˜ã€‚C++ä¸­æœ‰ä¸¤ç§constantï¼šå­—é¢å¸¸é‡ã€ç¬¦å·å¸¸é‡ã€‚literal constantï¼šå­—é¢å¸¸é‡ï¼Œç®€ç§°ï¼šliteralã€‚æ˜¯ç›´æ¥å°†å€¼æ’å…¥ä»£ç ä¸­çš„ã€‚123return 5; //5æ˜¯ä¸€ä¸ªæ•´å‹literalbool mynameisqin&#123;true&#125;; //true æ˜¯ä¸€ä¸ªå¸ƒå°”å‹literalstd::cout &lt;&lt;3.4; //3.4 æ˜¯ä¸€ä¸ªåŒç²¾åº¦æµ®ç‚¹å‹çš„literalä¸Šé¢è¿™äº›éƒ½æ˜¯å¸¸æ•°ï¼Œå› ä¸ºä»–ä»¬ä¸èƒ½åŠ¨æ€çš„è¢«æ”¹å˜ã€‚å°±åƒå¯¹è±¡åˆ†ç±»å‹ä¸€æ ·ï¼Œå¸¸é‡ä¹Ÿæ˜¯æœ‰ç±»å‹çš„ï¼šliteral çš„åç¼€exampleï¼š12unsigned int value1 &#123;5u&#125;; //5çš„ç±»å‹æ˜¯ unsigned intlong value2 &#123;6L&#125;; // 6çš„ç±»å‹æ˜¯ long123/*é»˜è®¤æƒ…å†µï¼Œæµ®ç‚¹ç±»å‹æ˜¯ double ï¼›å¦‚æœæƒ³å®šä¹‰å…¶ä¸ºfloatç±»å‹ï¼Œå¯ä»¥æ·»åŠ åç¼€ç±»å®ç°*/float f1 &#123;5.0f&#125;; //5.0 çš„ç±»å‹æ˜¯ floatfloat f2 &#123;4.1&#125;; //4.1çš„ç±»å‹æ˜¯ doublestring literals123std::cout &lt;&lt; \"hello world\"; //è¿™ç§æ˜¯ Cåˆ†å‰²çš„ string literalstd::cout &lt;&lt; \"hello\" \" world\"; //C++å°†ä¼šæŠŠå®ƒä»¬è¿æ¥èµ·æ¥Scientific notation for floating point literalsï¼šæµ®ç‚¹å‹literal çš„ç§‘å­¦è®¡æ•°12double pi &#123;3.14159&#125;; //3.14159æ˜¯ä¸€ç§ä¸€èˆ¬å½¢å¼double avogadro &#123;6.02e23&#125;; //6.02e23 æ˜¯åŒç²¾åº¦æµ®ç‚¹å‹literal çš„ç§‘å­¦è®¡æ•°æ³•å½¢å¼Octal and hexadecimal literalsï¼šå…«è¿›åˆ¶ &amp; åå…­è¿›åˆ¶ çš„ literalå…«è¿›åˆ¶ï¼šoctalå…«è¿›åˆ¶æ˜¯ä»¥8ä¸ºåº•ï¼Œå®ƒå¯ç”¨çš„æ•°ä¸ºï¼š 0, 1, 2, 3, 4, 5, 6, 7ã€‚123456789/*å…«è¿›åˆ¶çš„å‰ç¼€æ˜¯ï¼Œæ•°å­—â€œ0â€ï¼Œä¸æ˜¯å­—æ¯â€œoâ€*/#include &lt;iostream&gt;int main()&#123; int x&#123;012&#125;; //\"0\"è¡¨ç¤ºè¿™ä¸ªæ•°å­—æ˜¯å…«è¿›åˆ¶æ•° std::cout &lt;&lt;x; return 0;&#125;åå…­è¿›åˆ¶ï¼šhexadecimal123456789/*åå…­è¿›åˆ¶æ•°çš„å‰ç¼€æ˜¯ï¼šæ•°å­—0å’Œå­—æ¯xï¼Œå³ 0x*/#include &lt;iostream&gt;int main()&#123; int x&#123;0xF&#125;; //0xè¡¨ç¤ºè¿™ä¸ªæ•°æ˜¯åå…­è¿›åˆ¶æ•° std::cout&lt;&lt; x; return 0;&#125;åå…­è¿›åˆ¶é€šå¸¸ç”¨æ¥è¡¨ç¤ºå†…å­˜åœ°å€ æˆ– å†…å­˜ä¸­çš„åŸå§‹å€¼ã€‚å› ä¸ºç›¸å¯¹äºäºŒè¿›åˆ¶ï¼Œ16è¿›åˆ¶è¡¨ç¤ºèµ·æ¥æ›´åŠ ç®€æ´ã€‚å¦‚ï¼šäºŒè¿›åˆ¶çš„æ•°0011 1010 0111 1111 1001 1000 0010 0110ï¼Œå•ç”¨16è¿›åˆ¶è¡¨ç¤ºçš„è¯ï¼Œå°±æ˜¯3A7F 9826åœ¨C++14ä¹‹å‰ï¼Œæ— æ³•ç»™å˜é‡èµ‹ä¸€ä¸ªäºŒè¿›åˆ¶çš„literalï¼Œä½†æ˜¯ï¼Œ16è¿›åˆ¶å¯¹ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæœ‰ç”¨çš„è§£å†³æ–¹æ³•:12345678910111213141516171819#include &lt;iostream&gt; int main()&#123; int bin&#123;&#125;; bin = 0x01; // assign binary 0000 0001 to the variable bin = 0x02; // assign binary 0000 0010 to the variable bin = 0x04; // assign binary 0000 0100 to the variable bin = 0x08; // assign binary 0000 1000 to the variable bin = 0x10; // assign binary 0001 0000 to the variable bin = 0x20; // assign binary 0010 0000 to the variable bin = 0x40; // assign binary 0100 0000 to the variable bin = 0x80; // assign binary 1000 0000 to the variable bin = 0xFF; // assign binary 1111 1111 to the variable bin = 0xB3; // assign binary 1011 0011 to the variable bin = 0xF770; // assign binary 1111 0111 0111 0000 to the variable return 0;&#125;C++14ä¸­ äºŒè¿›åˆ¶çš„literalåœ¨C++14ä¸­ï¼Œä½¿ç”¨æ•°å­—0å’Œå­—æ¯bï¼Œå³â€œ0bâ€ã€‚ç»™å˜é‡åˆ†é…äºŒè¿›åˆ¶çš„literalï¼š12345678910111213141516171819202122#include &lt;iostream&gt; int main()&#123; int bin&#123;&#125;; bin = 0b1; // assign binary 0000 0001 to the variable bin = 0b11; // assign binary 0000 0011 to the variable bin = 0b1010; // assign binary 0000 1010 to the variable bin = 0b11110000; // assign binary 1111 0000 to the variable return 0;&#125;/*ä½†æ˜¯äºŒè¿›åˆ¶æ•°æ¯”è¾ƒé•¿ï¼Œæ‰€ä»¥ç”¨â€œ ' â€æ¥å½“åšåˆ†éš”ç¬¦ï¼Œä¾¿äºè¯»è®¤*/#Include &lt;iostream&gt; int main() &#123; int bin &#123;0b1011'0010&#125;; long value &#123;0'132'673'462&#125;; return 0; &#125;è¾“å‡º åè¿›åˆ¶ã€å…«è¿›åˆ¶ã€åå…­è¿›åˆ¶ã€äºŒè¿›åˆ¶æ•°decimalã€octalã€hexadecimalã€binaryC++é»˜è®¤è¾“å‡ºæ˜¯åè¿›åˆ¶æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è½¬æ¢è¾“å‡ºæ ¼å¼ï¼š123456789101112131415161718#include &lt;iostream&gt;int main()&#123; int x &#123;12&#125;; std::cout &lt;&lt; x &lt;&lt;'\\n'; //é»˜è®¤åè¿›åˆ¶ std::cout &lt;&lt; std::hex&lt;&lt;x &lt;&lt;'\\n'; //16è¿›åˆ¶ std::cout &lt;&lt; x &lt;&lt;'\\n'; //xå˜é‡çš„å€¼ç°åœ¨è¢«è½¬æ¢ä¸º16è¿›åˆ¶äº† std::cout &lt;&lt; std::oct&lt;&lt; x &lt;&lt;'\\n'; //8è¿›åˆ¶ std::cout &lt;&lt; std::dec&lt;&lt; x &lt;&lt;'\\n'; //åè¿›åˆ¶&#125;/*****è¾“å‡º*******/12cc1412è¾“å‡ºäºŒè¿›åˆ¶ï¼šè¾“å‡ºäºŒè¿›åˆ¶æ•°æ¯”è¾ƒéº»çƒ¦ä¸€ç‚¹ã€‚éœ€è¦æ·»åŠ å¤´æ–‡ä»¶ï¼š&lt;bitset&gt;ã€‚std::bitset&lt;num&gt;ï¼šè¡¨ç¤ºæˆ‘ä»¬å­˜å‚¨çš„ä½æ•°ä¸ºnumã€‚å®ƒå¯ä»¥è¢«åˆå§‹åŒ–æˆä¸€ä¸ª æ— ç¬¦å·æ•´æ•°å€¼(å¯ä»¥ä½¿10ï¼Œ8ï¼Œ16ï¼Œ2è¿›åˆ¶çš„å½¢å¼)123456789101112131415161718#include &lt;iostream&gt;#include &lt;bitset&gt; //for std::bitsetint main()&#123; // std::bitset&lt;8&gt; means we want to store 8 bits std::bitset&lt;8&gt; bin1&#123; 0b1100'0101 &#125;; // binary literal for binary 1100 0101 std::bitset&lt;8&gt; bin2&#123; 0xC5 &#125;; // hexadecimal literal for binary 1100 0101 std::cout &lt;&lt; bin1 &lt;&lt; ' ' &lt;&lt; bin2 &lt;&lt; '\\n'; std::cout &lt;&lt; std::bitset&lt;4&gt;&#123; 0b1010 &#125; &lt;&lt; '\\n'; // we can also print from std::bitset directly(è¾“å‡ºå®Œä¹‹åï¼Œè¢«æŠ›å¼ƒ) return 0; &#125;/*è¾“å‡º*/11000101 1100010110104.13 const, constexpr, symbolic constantså¸¸é‡ å˜é‡ï¼šå…¶å€¼ä¸èƒ½è¢«ä¿®æ”¹ï¼Œæƒ…å½¢ä¿®æ”¹ä¼šå‡ºé”™ä½¿ç”¨å…³é”®å­—constï¼Œæ¥è¡¨ç¤ºè¯¥å˜é‡æ˜¯å¸¸é‡ï¼šæ”¾åœ¨å˜é‡ç±»å‹çš„å‰é¢ã€åé¢ éƒ½å¯ä»¥12const double gravity &#123;9.8&#125;; //æ”¾åœ¨ç±»å‹çš„å‰é¢ã€æ¨èã€‘int const sidesInSquare &#123;4&#125;; //æ”¾åœ¨ç±»å‹åé¢ã€ä¸æ¨èã€‘å¸¸é‡å˜é‡(const variable)å¿…é¡»åœ¨å®šä¹‰æ—¶è¦åˆå§‹åŒ–(å³è¦èµ‹å€¼ç»™ä»–ä»¬)ã€‚èµ‹å€¼å®Œæˆï¼Œå®ƒçš„å€¼å°±ä¸èƒ½è¢«æ”¹å˜.123456/******å¸¸é‡å˜é‡çš„å€¼è¢«æ”¹å˜*************/const double a &#123;5.0&#125;;a = 1.0; //ç¼–è¯‘å‡ºé”™ï¼Œå› ä¸ºå¸¸é‡å˜é‡çš„å€¼è¢«æ”¹å˜/*******å¸¸é‡å˜é‡ä¸åˆå§‹åŒ–********/const double a; //compiler error, must be initialized upon definitionruntime VS compile time constantsruntimeï¼šç¨‹åºè¿è¡Œæ—¶ï¼›compile timeï¼šç¼–è¯‘å™¨è¿è¡Œæ—¶ã€‚runtime constantsï¼šåˆå§‹åŒ–å€¼åªèƒ½åœ¨è¿è¡Œæ—¶è§£æçš„å¸¸é‡ï¼›compile-time constantsï¼šåˆå§‹åŒ–å€¼å¯ä»¥åœ¨ç¼–è¯‘æ—¶è§£æçš„ï¼›å½“æ‚¨å£°æ˜ä¸€ä¸ªconstå˜é‡æ—¶ï¼Œç¼–è¯‘å™¨å°†éšå¼åœ°è·Ÿè¸ªå®ƒæ˜¯è¿è¡Œæ—¶å¸¸é‡è¿˜æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚123456789101112131415161718192021#include &lt;iostream&gt;#include &lt;bitset&gt;#include &lt;cstddef&gt; std::size_t getNumberOfBits()&#123; return 3;&#125; int main()&#123; const std::size_t numberOfBits&#123; 3 &#125;; // Compile-time constant std::bitset&lt;numberOfBits&gt; b&#123;&#125;; const std::size_t otherNumberOfBits&#123; getNumberOfBits() &#125;; // Run-time constant std::bitset&lt;otherNumberOfBits&gt; b2&#123;&#125;; // Error[å› ä¸ºæ­¤æ—¶éœ€è¦çš„æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶å¸¸é‡] return 0;&#125;å¸¸é‡è¡¨è¾¾å¼ï¼šconstexprä¸ºäº†æä¾›æ›´å¤šçš„ç‰¹æ€§ï¼Œc++ 11å¼•å…¥äº†æ–°çš„å…³é”®å­—constexprï¼Œå®ƒç¡®ä¿å¸¸é‡å¿…é¡»æ˜¯ â€œç¼–è¯‘æ—¶å¸¸é‡â€:1234567constexpr double gravity &#123;9.8&#125;; //æ­£ç¡®ï¼Œ9.8æ˜¯ç¼–è¯‘æ—¶çš„å­—é¢å¸¸é‡constexpr int sum &#123;4+5&#125;; //æ­£ç¡®ï¼Œ4+5çš„å€¼æ—¶ç¼–è¯‘æ—¶çš„å­—é¢å¸¸é‡std::cout &lt;&lt;\"enter your age:\";int age;std::cin &gt;&gt; age;constexpr int myage &#123;age&#125;; //é”™è¯¯ï¼Œå› ä¸ºâ€œageâ€æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶å¸¸é‡ã€å°ç»“ã€‘ï¼šå¸¸é‡å˜é‡å¿…é¡»åœ¨å®šä¹‰æ—¶ï¼Œå¯¹å®ƒåˆå§‹åŒ–ã€‚å½“ä¸€ä¸ªå˜é‡çš„å€¼éœ€è¦æ˜¯ ç¼–è¯‘æ—¶å¸¸é‡æ—¶ï¼Œæ¨èä½¿ç”¨constexpræ¥å£°æ˜å®ƒã€‚å½“ä¸€ä¸ªå˜é‡çš„å€¼éœ€è¦æ˜¯ è¿è¡Œæ—¶å¸¸é‡æ—¶ï¼Œæ¨èä½¿ç”¨constæ¥å£°æ˜å®ƒã€‚ç¬¦å·å¸¸é‡ï¼šsymbolic constantssymbolic constantï¼šæ˜¯ å­—é¢å¸¸é‡(literal constant)çš„å€¼ çš„åå­—ã€‚ä¸¤ç§æ–¹æ³•å£°æ˜ç¬¦å·å¸¸é‡ï¼šä½¿ç”¨â€œå®(macro)â€å®šä¹‰ï¼šã€ä¸æ¨èã€‘#define identifier substitution_textå¦‚ï¼š#define a 10;ä½¿ç”¨å…³é”®å­—constexprå˜é‡ï¼šã€æ¨èã€‘12constexpr int maxstudentperclass &#123;30&#125;;constexpr int maxnamelength &#123;30&#125;;åœ¨å¤šæ–‡ä»¶ç¨‹åºä¸­ä½¿ç”¨ç¬¦å·å¸¸é‡åœ¨è®¸å¤šåº”ç”¨ç¨‹åºä¸­ï¼Œéœ€è¦åœ¨æ•´ä¸ªä»£ç ä¸­ä½¿ç”¨ç»™å®šçš„ç¬¦å·å¸¸é‡(è€Œä¸ä»…ä»…æ˜¯åœ¨ä¸€ä¸ªä½ç½®)ã€‚è¿™äº›å‚æ•°å¯ä»¥åŒ…æ‹¬ç‰©ç†æˆ–æ•°å­¦å¸¸æ•°(å¦‚piæˆ–é˜¿ä¼ä¼½å¾·ç½—å¸¸æ•°)ï¼Œæˆ–ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„â€œè°ƒä¼˜â€å€¼(å¦‚æ‘©æ“¦ç³»æ•°æˆ–é‡åŠ›ç³»æ•°)ã€‚ä¸å…¶æ¯æ¬¡éœ€è¦æ—¶éƒ½é‡æ–°å®šä¹‰å®ƒä»¬ï¼Œä¸å¦‚åœ¨ä¸­å¿ƒä½ç½®å£°æ˜ä¸€æ¬¡å¹¶åœ¨éœ€è¦çš„åœ°æ–¹ä½¿ç”¨å®ƒä»¬ã€‚è¿™æ ·ï¼Œå¦‚æœä½ éœ€è¦æ”¹å˜å®ƒä»¬ï¼Œä½ åªéœ€è¦åœ¨ä¸€ä¸ªåœ°æ–¹æ”¹å˜å®ƒä»¬ã€‚æœ‰å¾ˆå¤šç§æ–¹æ³•æ¥å®ç°å®ƒï¼Œè¿™é‡Œä½¿ç”¨æ¯”è¾ƒç®€å•çš„ä¸€ç§ï¼šé¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå¤´æ–‡ä»¶æ¥å†™ç›¸å…³çš„å¸¸é‡ï¼›åœ¨è¿™ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œå£°æ˜ä¸€ä¸ªåç§°ç©ºé—´ï¼›å°†ä½ è¦ç”¨åˆ°çš„å¸¸é‡å†™åœ¨è¿™ä¸ªå‘½åç©ºé—´ä¸­ï¼›åœ¨ä½ éœ€è¦è¿™äº›å¸¸é‡çš„æ—¶å€™ï¼Œ#includeè¿™ä¸ªå¤´æ–‡ä»¶ã€‚exampleï¼šconstants.h (C++11/14):12345678910111213#ifndef CONSTANTS_H#define CONSTANTS_H//define your own namespace to hold constanstsnamespace constants&#123; constexpr double pi &#123;3.14159&#125;; constexpr double avogadro &#123;6.0221413e23&#125;; constexpr double my_gravity &#123;9.2&#125;; //.........other related constants&#125;#endifIn C++17, prefer â€œinline constexprâ€ instead:constants.h (C++17 or newer):12345678910111213#ifndef CONSTANTS_H#define CONSTANTS_H// define your own namespace to hold constantsnamespace constants&#123; inline constexpr double pi &#123;3.14159&#125;; inline constexpr double avogadro &#123; 6.0221413e23 &#125;; inline constexpr double my_gravity &#123; 9.2 &#125;; // m/s^2 -- gravity is light on this planet // ... other related constants&#125;#endifä½¿ç”¨â€œä½œç”¨åŸŸè§£æç¬¦::â€,åœ¨å…¶ä»–æ–‡ä»¶è®¿é—®ä½ çš„å¸¸é‡ï¼šmain.cpp1234567891011121314#include \"constants.h\"#include &lt;iostream&gt;int main()&#123; std::cout &lt;&lt; \"enter a radius: \"; int radius&#123;&#125;; std::cin &gt;&gt; radius; double circumference &#123;2.0*radius*constants::pi&#125;; std::cout &lt;&lt;\"the circumference is: \" &lt;&lt;circumference &lt;&lt;'\\n'; return 0;&#125;","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"LearnCpp chapter3","slug":"C&C++/LearnCpp-chapter3","date":"2020-03-30T05:59:58.000Z","updated":"2020-04-19T14:38:29.545Z","comments":true,"path":"archives/5fc07ec4.html","link":"","permalink":"https://longlongqin.github.io/archives/5fc07ec4.html","excerpt":"LearnCpp-chapter3https://www.learncpp.comæœªå®Œå¾…ç»­~~","text":"LearnCpp-chapter3https://www.learncpp.comæœªå®Œå¾…ç»­~~","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://longlongqin.github.io/tags/C-C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"LearnCpp chapter2","slug":"C&C++/LearnCpp-chapter2","date":"2020-03-26T09:07:50.000Z","updated":"2020-04-19T14:38:29.702Z","comments":true,"path":"archives/28c74e52.html","link":"","permalink":"https://longlongqin.github.io/archives/28c74e52.html","excerpt":"LearnCpp chapter2https://www.learncpp.com","text":"LearnCpp chapter2https://www.learncpp.com2.1 å‡½æ•°å½“ä½ è¯»ä¸€æœ¬ä¹¦çš„æ—¶å€™ï¼Œçªç„¶æœ‰äººç»™ä½ æ‰“ç”µè¯ã€‚ç„¶åä½ å°±ç”¨â€œä¹¦ç­¾â€å¤¹åœ¨å½“å‰é˜…è¯»ä½ç½®ï¼Œå»æ¥ç”µè¯ã€‚ç­‰ä½ ç”µè¯æ¥å®Œï¼Œå†å›åˆ°ä½ æ”¾ä¹¦ç­¾çš„é‚£ä¸ªåœ°æ–¹ç»§ç»­è¯»ä¹¦ã€‚å‡½æ•°è°ƒç”¨(function call)æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚å®ƒå‘Šè¯‰CPUä¸­æ–­å½“å‰å‡½æ•°å¹¶åœ¨è¿™é‡Œâ€œæ”¾ä¸€ä¸ªä¹¦ç­¾â€ï¼Œç„¶åæ‰§è¡Œå¦ä¸€ä¸ªå‡½æ•°(å°±æ˜¯å‡½æ•°è°ƒç”¨ä¸­æåŠçš„é‚£ä¸ªå‡½æ•°)ã€‚å½“è°ƒç”¨ç»“æŸåï¼ŒCPUå°±è¿”å›åˆ°â€œä¹¦ç­¾â€çš„ä½ç½®ï¼Œç„¶åå†ç»§ç»­æ‰§è¡Œã€‚callerï¼šå‘èµ·å‡½æ•°è°ƒç”¨çš„å‡½æ•°å«åšcallerï¼›callee(called function)ï¼šè¢«è°ƒç”¨çš„å‡½æ•°å«åšcallee(called function)ã€‚int main()çš„è¿”å›å€¼ï¼šåœ¨int main()å‡½æ•°æœ€åï¼Œä¼šæœ‰è¿”å›å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯è¿”å›åˆ°æ“ä½œç³»ç»Ÿçš„ï¼Œä¸ºäº†è®©æ“ä½œç³»ç»ŸçŸ¥é“è¿™ä¸ªç¨‹åºæ‰§è¡ŒæˆåŠŸä¸å¦ã€‚mainå‡½æ•°çš„è¿”å›å€¼ï¼Œæœ‰ä¸€ä¸ªç‰¹å®šåå­—å«åšï¼šstatus code ï¼ˆçŠ¶æ€ç ï¼‰ä¸€èˆ¬ return 0; è¡¨ç¤ºç¨‹åºæ‰§è¡ŒæˆåŠŸã€‚è¿”å›éé›¶å€¼ï¼Œè¡¨ç¤ºç¨‹åºæ‰§è¡Œé”™è¯¯ã€‚ã€Noteã€‘ï¼šC++è§„å®šï¼Œmainå‡½æ•°å¿…é¡»æ˜¯intå‹çš„ã€‚å³ï¼š int main()2.3 å‡½æ•°çš„å½¢å‚ä¸å®å‚å½¢å‚(parameter)ï¼šæ˜¯æŒ‡å‡½æ•°å®šä¹‰ä¸­å‚æ•°ï¼›(å½¢å‚åˆå§‹åŒ–æ˜¯é€šè¿‡è°ƒç”¨è€…ä¼ æ¥çš„å€¼(å³ï¼Œå®å‚)æ¥åˆå§‹åŒ–çš„ )å®å‚(argument)ï¼šå‡½æ•°è°ƒç”¨æ—¶çš„å®é™…å‚æ•°ï¼š1234567891011121314#include &lt;iostream&gt;void printValues(int x, int y) //å‡½æ•°å®šä¹‰æ—¶çš„å‚æ•°x,yï¼Œå³è¿™é‡Œçš„x,yæ˜¯å½¢å‚&#123; std::cout &lt;&lt; x &lt;&lt; '\\n'; std::cout &lt;&lt; y &lt;&lt; '\\n';&#125; int main()&#123; printValues(6, 7); //è°ƒç”¨å‡½æ•°ã€‚å³ï¼Œ6å’Œ7æ˜¯å®å‚ return 0;&#125;å®å‚ä¸å½¢å‚å¦‚ä½•ä¸€èµ·å·¥ä½œï¼Ÿå½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œå‡½æ•°æ‰€æœ‰çš„parameterséƒ½è¢«åˆ›å»ºä¸ºå˜é‡ï¼Œå¹¶ä¸”æ¯ä¸ªargumentsçš„å€¼éƒ½è¢«å¤åˆ¶åˆ°åŒ¹é…çš„parametersä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºpass by value(æŒ‰å€¼ä¼ é€’)ã€‚å…³äºå‡½æ•°å‚æ•°æ±‚å€¼é¡ºåºçš„è­¦å‘Šåœ¨C++ä¸­ï¼Œæ²¡æœ‰è§„å®šå®å‚åŒ¹é…çš„é¡ºåºï¼ˆé¡ºåºï¼šä»å·¦â†’å³ï¼Œè¿˜æ˜¯ä»å³â†’å·¦ï¼‰ï¼Œå› ä¸ºåŒ¹é…é¡ºåºä¸é‡è¦ã€‚ä½†æ˜¯ï¼Œå¦‚æœå®å‚æ˜¯å‡½æ•°è°ƒç”¨ï¼Œé‚£å°±éœ€è¦æ³¨æ„äº†ï¼š1someFunction(a(), b()); // a() or b() may be called firstæ˜¯ä»å³â†’å·¦ï¼Œè¿˜æ˜¯ä»å³â†’å·¦ï¼šå–å†³äºa()å’Œb()çš„åŠŸèƒ½ã€‚å¦‚æœä½ æƒ³è¦è§„å®šè°å…ˆçš„è¯ï¼Œä½ å¯ä»¥æ˜¾ç¤ºçš„è§„å®šåŒ¹é…é¡ºåºï¼Œå¦‚ï¼š1234int avar&#123; a() &#125;; // a() will always be called firstint bvar&#123; b() &#125;; // b() will always be called second someFunction(avar, bvar); // it doesn't matter whether avar or bvar are copied first because they are just values2.4 å±€éƒ¨èŒƒå›´å±€éƒ¨å˜é‡Local variablesï¼šå‡½æ•°çš„å½¢å‚ï¼Œå’Œå®ƒå†…éƒ¨å®šä¹‰çš„å˜é‡ å±äºâ€œå±€éƒ¨å˜é‡â€ã€‚å¦‚ï¼š123456int add(int x, int y) // function parameters x and y are local variables&#123; int z&#123; x + y &#125;; // z is a local variable too return z;&#125;å±€éƒ¨å˜é‡ç”Ÿå‘½å‘¨æœŸï¼š123456789101112131415161718#include &lt;iostream&gt; int add(int x, int y) // x and y are created and enter scope here&#123; // x and y are visible/usable within this function only return x + y;&#125; // y and x go out of scope and are destroyed here int main()&#123; int a&#123; 5 &#125;; // a is created, initialized, and enters scope here int b&#123; 6 &#125;; // b is created, initialized, and enters scope here // a and b are usable within this function only std::cout &lt;&lt; add(a, b) &lt;&lt; '\\n'; // calls function add() with x=5 and y=6 return 0;&#125; // b and a go out of scope and are destroyed hereæ‰§è¡Œè¿‡ç¨‹ï¼šç¨‹åºå¼€å§‹æ‰§è¡Œäºmain()å‡½æ•°ï¼›main()å‡½æ•°çš„å˜é‡aè¢«åˆ›å»ºå¹¶èµ‹å€¼ä¸º5ï¼›ï¼ˆåˆå§‹åŒ–ï¼‰â˜…main()å‡½æ•°çš„å˜é‡bè¢«åˆ›å»ºå¹¶èµ‹å€¼ä¸º6ï¼›ï¼ˆåˆå§‹åŒ–ï¼‰â˜…å‡½æ•°add()è¢«è°ƒç”¨ï¼Œå¹¶ä¼ å…¥å®å‚5ï¼Œ6ï¼›add()å‡½æ•°çš„å˜é‡xè¢«åˆ›å»ºï¼Œå¹¶åˆå€¼ä¸º5;ï¼ˆåˆå§‹åŒ–ï¼‰â˜…add()å‡½æ•°çš„å˜é‡yè¢«åˆ›å»ºï¼Œå¹¶åˆå€¼ä¸º6;ï¼ˆåˆå§‹åŒ–ï¼‰â˜…æ“ä½œç¬¦â€œ+â€è®¡ç®—è¡¨è¾¾å¼â€x+yâ€ï¼Œäº§ç”Ÿå€¼11ï¼›addå‡½æ•°å°†å€¼11å¤åˆ¶å›è°ƒç”¨è€…main()å‡½æ•°ï¼›addå‡½æ•°çš„xã€yè¢«æ‘§æ¯ï¼›â˜…main()å‡½æ•°åœ¨æ§åˆ¶å°ä¸Šæ‰“å°å‡º11ï¼›main()å‡½æ•°è¿”å›0åˆ°æ“ä½œç³»ç»Ÿï¼›main()å‡½æ•°çš„aã€bè¢«æ‘§æ¯ã€‚â˜…ç”±æ­¤å¯çŸ¥ï¼Œå±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸï¼šæ˜¯ä»ä»–å¼€å§‹è¢«åˆ›å»ºï¼ˆå¦‚ä¸Šè¿°çš„ç¬¬2æ­¥ï¼Œå˜é‡aè¢«åˆ›å»ºï¼‰ä¸€ç›´åˆ°æ‰§è¡Œå®Œè¿™ä¸ªå®ƒæ‰€åœ¨çš„å‡½æ•°ï¼ˆå¦‚ä¸Šè¿°çš„ç¬¬9æ­¥ï¼‰è¢«æ‘§æ¯ã€‚ã€Noteã€‘ï¼šå˜é‡çš„åˆ›å»ºå’Œæ‘§æ¯å‘ç”Ÿåœ¨ç¨‹åºçš„è¿è¡ŒæœŸé—´ï¼ˆruntimeï¼‰ã€‚æ‰€ä»¥ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€ä¸ªruntimeå±æ€§ã€‚å±€éƒ¨èŒƒå›´æ ‡è¯†ç¬¦çš„èŒƒå›´å†³å®šäº†åœ¨æºä»£ç ä¸­æ ‡è¯†ç¬¦å¯ä»¥è¢«è®¿é—®çš„ä½ç½®ã€‚èŒƒå›´æ˜¯ä¸€ä¸ªç¼–è¯‘æœŸé—´(compile-time)çš„å±æ€§ã€‚ï¼ˆå½“ä½¿ç”¨çš„æ ‡è¯†ç¬¦ä¸åœ¨èŒƒå›´å†…æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼‰å±€éƒ¨å˜é‡çš„èŒƒå›´ï¼šå¼€å§‹äºå®ƒçš„å®šä¹‰ï¼Œç»“æŸäºå®šä¹‰å®ƒä»¬çš„èŠ±æ‹¬å·é›†åˆçš„æœ«å°¾ã€‚å¦‚ä¸‹ï¼š123456789101112131415161718#include &lt;iostream&gt; // x is not in scope anywhere in this functionvoid doSomething()&#123; std::cout &lt;&lt; \"Hello!\\n\";&#125; int main()&#123; // x can not be used here because it's not in scope yet int x&#123; 0 &#125;; // x enters scope here and can now be used doSomething(); return 0;&#125; // x goes out of scope here and can no longer be used2.5 ä¸ºä»€ä¹ˆè¦ç”¨å‡½æ•°ä½¿ç”¨å‡½æ•°çš„ä¼˜åŠ¿ï¼šæœ‰ç»„ç»‡æ€§Organizationï¼šéšç€ç¨‹åºè¶Šæ¥è¶Šå¤æ‚ï¼Œè‹¥å°†å…¨éƒ¨çš„ä»£ç éƒ½å†™åœ¨main()å‡½æ•°ä¸­ï¼ŒåŠ¿å¿…ä¼šå¢åŠ å¤æ‚æ€§ã€‚ä¸€ä¸ªå‡½æ•°å°±åƒä¸€ä¸ªå°å‹ç¨‹åºã€‚å°†å®ƒä¸mainå‡½æ•°åˆ†å¼€å†™ï¼Œæˆ‘ä»¬å°±ä¸å¿…å»è€ƒå…¶ä½™ä»£ç ã€‚å¯é‡ç”¨æ€§Reusabilityï¼šä¸€ä¸ªå‡½æ•°å¯ä»¥è¢«è°ƒç”¨æ— æ•°æ¬¡ã€‚å°±å¯ä»¥é¿å…è¿™ç§æƒ…å†µï¼šå¦‚æœå†™åœ¨mainå‡½æ•°ä¸­ï¼Œè¦è°ƒç”¨næ¬¡è¿™ä¸ªåŠŸèƒ½ï¼Œå°±è¦é‡æ–°å†™è¿™ä¸ªåŠŸèƒ½næ¬¡ã€‚ä¾¿äºæµ‹è¯•Testingï¼šå› ä¸ºå‡½æ•°å‡å°‘äº†ä»£ç å†—ä½™ï¼Œæ‰€ä»¥é¦–å…ˆè¦æµ‹è¯•çš„ä»£ç å°±æ›´å°‘äº†ã€‚å¦å¤–ï¼Œå› ä¸ºå‡½æ•°æ˜¯è‡ªåŒ…å«çš„ï¼Œæ‰€ä»¥ä¸€æ—¦æˆ‘ä»¬æµ‹è¯•äº†ä¸€ä¸ªå‡½æ•°ä»¥ç¡®ä¿å®ƒå¯ä»¥å·¥ä½œï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ¬¡æµ‹è¯•å®ƒï¼Œé™¤éæˆ‘ä»¬ä¿®æ”¹å®ƒã€‚è¿™å‡å°‘äº†æˆ‘ä»¬å¿…é¡»ä¸€æ¬¡æµ‹è¯•çš„ä»£ç é‡ï¼Œä½¿å¾—æŸ¥æ‰¾bug(æˆ–è€…åœ¨ç¬¬ä¸€æ—¶é—´é¿å…bug)å˜å¾—æ›´åŠ å®¹æ˜“ã€‚å¯æ‰©å±•æ€§Extensibilityï¼šæŠ½è±¡åŒ–Abstractionï¼šåœ¨æ¯æ¬¡ç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“å®ƒçš„åå­—ã€‚è¾“å…¥å’Œè¾“å‡ºã€‚ä¸å¿…çŸ¥é“å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚å¦‚ä½•é«˜æ•ˆçš„ä½¿ç”¨å‡½æ•°ï¼Ÿåœ¨ä¸€ä¸ªç¨‹åºä¸­å‡ºç°å¤šæ¬¡çš„è¯­å¥é€šå¸¸åº”è¯¥æ„æˆä¸€ä¸ªå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä»¥ç›¸åŒçš„æ–¹å¼å¤šæ¬¡è¯»å–æ¥è‡ªç”¨æˆ·çš„è¾“å…¥ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å‡½æ•°å€™é€‰ã€‚å¦‚æœæˆ‘ä»¬ä»¥ç›¸åŒçš„æ–¹å¼è¾“å‡ºå¤šæ¬¡ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å€™é€‰å‡½æ•°ã€‚ä¸€ä¸ªå‡½æ•°é€šå¸¸åº”è¯¥æ‰§è¡Œä¸€ä¸ª(ä¸”ä»…ä¸€ä¸ª)ä»»åŠ¡ã€‚å½“ä¸€ä¸ªå‡½æ•°å˜å¾—å¤ªé•¿ã€å¤ªå¤æ‚æˆ–éš¾ä»¥ç†è§£æ—¶ï¼Œå¯ä»¥å°†å…¶åˆ†è§£ä¸ºå¤šä¸ªå­å‡½æ•°ã€‚è¿™å°±æ˜¯æ‰€è°“çš„é‡æ„refactoringã€‚2.6 ç©ºç™½ä¸åŸºæœ¬æ ¼å¼ç©ºç™½ç©ºç™½Whitespaceï¼šæ˜¯ä¸€ä¸ªæœ¯è¯­ï¼ŒæŒ‡çš„æ˜¯ç”¨äºæ ¼å¼åŒ–ç›®çš„çš„å­—ç¬¦ã€‚åœ¨c++ä¸­ï¼Œè¿™ä¸»è¦æŒ‡ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦(tab)å’Œæ¢è¡Œã€‚c++ç¼–è¯‘å™¨é€šå¸¸ä¼šå¿½ç•¥ç©ºç™½ï¼Œåªæœ‰å°‘æ•°ä¾‹å¤–(åœ¨å¤„ç†æ–‡æœ¬æ—¶)ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¯´c++æ˜¯ä¸€ç§ä¸ç©ºç™½æ— å…³çš„è¯­è¨€ã€‚123456789/*ä¸‹é¢è¿™ä¸‰ä¸ªéƒ½æ˜¯ä¸€æ ·çš„ä½œç”¨*/std::cout &lt;&lt; \"Hello world!\"; std::cout &lt;&lt; \"Hello world!\"; std::cout &lt;&lt; \"Hello world!\"; std::cout &lt;&lt; \"Hello world!\";ã€æ³¨æ„ã€‘åœ¨æ–‡æœ¬ä¸­ï¼Œä¸å…è®¸æ¢è¡Œï¼š123//è¿™ç§æ˜¯ä¸è¢«å…è®¸çš„std::cout &lt;&lt; \"hello world!\" ;ä½†æ˜¯è¿™ç§æƒ…å†µæ˜¯å¯ä»¥çš„ï¼šæ–‡æœ¬åªæ˜¯è¢«ç©ºç™½(ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦(tab)ã€æ¢è¡Œ)åˆ†ç¦»ï¼Œä»–å°†ä¼šè¢«è¿æ¥ï¼š123//è¿™é‡Œçš„helloä¸worldéƒ½æ˜¯è¢«åŒå¼•å·åŒ…å«èµ·æ¥çš„std::cout &lt;&lt; \"Hello \" \"world!\"; // prints \"Hello world!\"åŸºæœ¬æ ¼å¼ç¼©è¿›(indentation)å¯ä»¥ç”¨ï¼šç©ºæ ¼spacesæˆ–è€…tabsï¼ˆåˆ¶ç¬¦è¡¨ï¼‰ã€‚å¦‚æœç”¨åˆ¶ç¬¦è¡¨ï¼Œå»ºè®®å°†å…¶è°ƒæ•´ä¸º4ä¸ªç©ºæ ¼çš„ç¼©è¿›ï¼Œ3ä¸ªä¹Ÿå¯ä»¥ã€‚å¤§èŠ±æ‹¬å·ï¼ˆbraceï¼‰ï¼šGoogleä¸­çš„C++é£æ ¼ï¼š12int main() &#123;&#125;å¦ä¸€ç§é£æ ¼ï¼šè¿™ä¸€ç§ä¸å®¹æ˜“å‡ºé”™ï¼Œæ›´å®¹æ˜“æ‰¾å‡ºèŠ±æ‹¬å·123int main()&#123;&#125;åœ¨å¤§èŠ±æ‹¬å·ä¸­çš„æ¯æ¡è¯­å¥ï¼Œåº”è¯¥ä»å…¶æ‰€åœ¨èŠ±æ‹¬å·ç®—èµ·éš”å¼€ä¸€ä¸ªtabçš„è·ç¦»ï¼Œå¼€å§‹å†™ï¼š12345int main()&#123; std::cout &lt;&lt; \"Hello world!\\n\"; // tabbed in one tab (4 spaces) std::cout &lt;&lt; \"Nice to meet you.\\n\"; // tabbed in one tab (4 spaces)&#125;æ¯ä¸€è¡Œçš„å­—ç¬¦ä¸è¦è¿‡é•¿ï¼Œä¸€èˆ¬ä¸è¶…è¿‡80ä¸ªå­—ç¬¦å¦‚æœä¸€è¡Œåˆ«æ“ä½œç¬¦(å¦‚ï¼Œ&lt;&lt; ã€+)åˆ†å‰²(split)ã€‚è¿™ä¸ªæ“ä½œç¬¦åº”è¯¥è¢«å¸è½½ä¸‹ä¸€è¡Œçš„å¼€å¤´ï¼š123std::cout &lt;&lt; 3 + 4 + 5 + 6 * 7 * 8;é€šè¿‡å¯¹é½å€¼æˆ–æ³¨é‡Šæˆ–åœ¨ä»£ç å—ä¹‹é—´æ·»åŠ é—´è·ï¼Œä½¿ç”¨ç©ºç™½ä½¿ä»£ç æ›´æ˜“äºé˜…è¯»ã€‚1234567891011//ä¸æ˜“è¯»cost = 57;pricePerItem = 24;value = 5;numberOfItems = 17;//æ˜“è¯»cost = 57;pricePerItem = 24;value = 5;numberOfItems = 17;123456789//ä¸æ˜“è¯»std::cout &lt;&lt; \"Hello world!\\n\"; // cout lives in the iostream librarystd::cout &lt;&lt; \"It is very nice to meet you!\\n\"; // these comments make the code hard to readstd::cout &lt;&lt; \"Yeah!\\n\"; // especially when lines are different lengths//æ˜“è¯»std::cout &lt;&lt; \"Hello world!\\n\"; // cout lives in the iostream librarystd::cout &lt;&lt; \"It is very nice to meet you!\\n\"; // these comments are easier to readstd::cout &lt;&lt; \"Yeah!\\n\"; // especially when all lined up1234567891011121314151617//ä¸æ˜“è¯»// cout lives in the iostream librarystd::cout &lt;&lt; \"Hello world!\\n\";// these comments make the code hard to readstd::cout &lt;&lt; \"It is very nice to meet you!\\n\";// especially when all bunched togetherstd::cout &lt;&lt; \"Yeah!\\n\";//æ˜“è¯»// cout lives in the iostream librarystd::cout &lt;&lt; \"Hello world!\\n\"; // these comments are easier to readstd::cout &lt;&lt; \"It is very nice to meet you!\\n\"; // when separated by whitespacestd::cout &lt;&lt; \"Yeah!\\n\";2.7 æå‰å£°æ˜ä¸å®šä¹‰ä¸€ä¸ªä¾‹å­ï¼š123456789101112#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"The sum of 3 and 4 is: \" &lt;&lt; add(3, 4) &lt;&lt; '\\n'; return 0;&#125; int add(int x, int y)&#123; return x + y;&#125;åœ¨vs 2013ä¸­è¿è¡Œï¼Œä¼šå‡ºç°ï¼šadd.cpp(5) : error C3861: &#39;add&#39;: identifier not foundåŸå› ï¼šå› ä¸ºç¼–è¯‘å™¨æ˜¯æŒ‰ç…§é¡ºåºè¿›è¡Œç¼–è¯‘çš„ã€‚å½“ç¼–è¯‘å™¨åœ¨mainå‡½æ•°çš„ç¬¬5è¡Œä¸­è°ƒç”¨addå‡½æ•°ï¼Œä»–ä¸çŸ¥é“addæ˜¯ä»€ä¹ˆã€‚å› ä¸ºç›®å‰ä¸ºæ­¢è¿˜æ²¡æœ‰å®šä¹‰addå‡½æ•°ï¼ˆå› ä¸ºaddå‡½æ•°çš„å®šä¹‰åœ¨ç¬¬9è¡Œï¼‰å¦‚ä½•è§£å†³å‘¢ï¼Ÿæ³•ä¸€ï¼šè°ƒæ•´ä»£ç é¡ºåºï¼šè®©è¢«è°ƒç”¨çš„å‡½æ•°åœ¨è°ƒç”¨è€…ä¹‹å‰ã€åœ¨å¤æ‚ç¨‹åºä¸­ï¼Œä¸å®ç”¨ã€‘123456789101112#include &lt;iostream&gt; int add(int x, int y)&#123; return x + y;&#125; int main()&#123; std::cout &lt;&lt; \"The sum of 3 and 4 is: \" &lt;&lt; add(3, 4) &lt;&lt; '\\n'; return 0;&#125;å¦‚æœåœ¨ä¸€ä¸ªå¤æ‚çš„ç¨‹åºä¸­ï¼Œä¼šè°ƒç”¨å¾ˆå¤šå‡½æ•°ï¼Œè¿˜æœ‰åµŒå¥—å‹çš„è°ƒç”¨ã€‚å¦‚æœå»ä¸€ä¸ªä¸ªä¸ªå»æ‰¾å‡ºè°ƒç”¨é¡ºåºï¼Œç„¶åå»è°ƒæ•´ä»£ç ã€‚è¿™æ ·æ˜¯å¾ˆä¹å‘³ä½æ•ˆçš„ã€‚æ³•äºŒ[æ¨è]ï¼šæå‰å£°æ˜forward declarationï¼šåœ¨ä½¿ç”¨å‡½æ•°ä¹‹å‰ï¼Œå…ˆå£°æ˜å®ƒã€‚ï¼ˆç„¶åå°±ä¸ç”¨å…³æ³¨ä»£ç å®ç°çš„é¡ºåºäº†ï¼‰æå‰å‘å£°æ˜å…è®¸æˆ‘ä»¬åœ¨å®é™…å®šä¹‰æ ‡è¯†ç¬¦ä¹‹å‰å‘Šè¯‰ç¼–è¯‘å™¨æ ‡è¯†ç¬¦çš„å­˜åœ¨ã€‚ä¸ºäº†ç¼–å†™ä¸€ä¸ªå‡½æ•°çš„æå‰å‘å£°æ˜ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç§°ä¸ºå‡½æ•°åŸå‹(function prototype)çš„å£°æ˜è¯­å¥ã€‚å‡½æ•°åŸå‹åŒ…æ‹¬ï¼šå‡½æ•°çš„ è¿”å›ç±»å‹ã€åå­—ã€å½¢å‚ï¼Œä»¥åˆ†å·(semicolon)ç»“æŸã€‚ä½†æ˜¯ä¸åŒ…å«å‡½æ•°ä¸»ä½“(function body)1234567891011121314#include &lt;iostream&gt; int add(int x, int y); // forward declaration of add() (using a function prototype) int main()&#123; std::cout &lt;&lt; \"The sum of 3 and 4 is: \" &lt;&lt; add(3, 4) &lt;&lt; '\\n'; // this works because we forward declared add() above return 0;&#125; int add(int x, int y) // even though the body of add() isn't defined until here&#123; return x + y;&#125;å¿˜è®°å®šä¹‰å‡½æ•°ä¸»é¢˜å¦‚æœå£°æ˜äº†å‡½æ•°ï¼Œä½†æ²¡å®šä¹‰å‡½æ•°ï¼Œè€Œä¸”è¿™ä¸ªå‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªç¨‹åºå¯ä»¥è¢«ç¼–è¯‘&amp;è¿è¡Œï¼›å¦‚æœå£°æ˜äº†å‡½æ•°ï¼Œä½†æ²¡å®šä¹‰å‡½æ•°ï¼Œè€Œä¸”è€Œä¸”è¿™ä¸ªå‡½æ•°æœ‰è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªç¨‹åºå¯ä»¥è¢«ç¼–è¯‘ï¼Œä½†é“¾æ¥ä¼šå‡ºé”™ã€‚1234567891011#include &lt;iostream&gt; int add(int x, int y); // forward declaration of add() using function prototype int main()&#123; std::cout &lt;&lt; \"The sum of 3 and 4 is: \" &lt;&lt; add(3, 4) &lt;&lt; '\\n'; return 0;&#125; // note: No definition for function addä¸Šé¢ç¨‹åºåœ¨visual studio ä¸­ï¼Œä¼šå‡ºç°ï¼šç¼–è¯‘æˆåŠŸï¼Œé“¾æ¥å¤±è´¥12345Compiling...add.cppLinking...add.obj : error LNK2001: unresolved external symbol &quot;int __cdecl add(int,int)&quot; (?add@@YAHHH@Z)add.exe : fatal error LNK1120: 1 unresolved externalså£°æ˜ VS. å®šä¹‰å®šä¹‰(define)ï¼šå®ç°(å‡½æ•°æˆ–ç±»å‹ï¼‰æˆ–è€…æ˜¯ å®ä¾‹åŒ–(å¯¹äºå˜é‡ï¼‰æ ‡è¯†ç¬¦ã€‚123456int add(int x, int y) // implements function add()&#123; int z&#123; x + y &#125;; // instantiates variable z return z;&#125;å¯¹äºé“¾æ¥å™¨(linker)æ¥è¯´å®šä¹‰ï¼ˆdefineï¼‰æ˜¯å¿…è¦çš„çš„ã€‚å•å®šä¹‰è§„åˆ™å•å®šä¹‰è§„åˆ™ï¼ˆone definition ruleï¼‰ç®€ç§°ï¼šODRï¼šåœ¨C++ä¸­éå¸¸æœ‰åçš„è§„åˆ™ï¼Œä¸»è¦åˆ†ä¸‰éƒ¨åˆ†ï¼šåœ¨ç»™å®šçš„æ–‡ä»¶ä¸­ï¼ˆè¿™é‡Œç¿»è¯‘ä¸å‡†ç¡®ï¼‰ï¼Œæ¯ä¸ªå‡½æ•°ã€å¯¹è±¡ã€ç±»å‹ã€æ¨¡æ¿åªèƒ½æœ‰ä¸€æ¬¡å®šä¹‰ã€‚åœ¨æ•´ä¸ªç¨‹åºä¸­ï¼Œä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°åªèƒ½è¢«å®šä¹‰ä¸€æ¬¡ï¼›ç±»å‹ã€æ¨¡æ¿ã€å†…ç½®å‡½æ•°ã€å˜é‡ è¢«å…è®¸åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­æœ‰ç›¸åŒçš„å®šä¹‰ã€‚è¿èƒŒç¬¬1æ¡ï¼Œå°†ä¼šä½¿ç¼–è¯‘å™¨å‘å‡ºé‡æ–°å®šä¹‰é”™è¯¯ï¼›123456789101112131415int add(int x, int y)&#123; return x + y;&#125; int add(int x, int y) // violation part1 of ODR, we've already defined function add&#123; return x + y;&#125; int main()&#123; int x; int x; // violation of ODR, we've already defined x&#125;åœ¨visual studioä¸­ï¼Œä¼šå‡ºç°ï¼š1234project3.cpp(9): error C2084: function &#39;int add(int,int)&#39; already has a bodyproject3.cpp(3): note: see previous definition of &#39;add&#39;project3.cpp(16): error C2086: &#39;int x&#39;: redefinitionproject3.cpp(15): note: see declaration of &#39;x&#39;è¿èƒŒç¬¬2æ¡ï¼Œå°†ä¼šä½¿è¿æ¥å™¨å‘å‡ºé‡æ–°å®šä¹‰çš„é”™è¯¯ï¼›è¿èƒŒç¬¬3æ¡ï¼Œå°†ä¼šäº§ç”Ÿæœªå®šä¹‰çš„è¡Œä¸ºã€‚å£°æ˜å£°æ˜(declaration)ï¼šæ˜¯ä¸€ä¸ªè¯­å¥ã€‚å®ƒå‘Šè¯‰ç¼–è¯‘å™¨è¿™é‡Œå­˜åœ¨ä¸€ä¸ªæ ‡è¯†ç¬¦å’Œå®ƒçš„ç±»å‹ã€‚12int add(int x, int y); // tells the compiler about a function named \"add\" that takes two int parameters and returns an int. No body!int x; // tells the compiler about an integer variable named xå¯¹ç¼–è¯‘å™¨(complier)è€Œè¨€å£°æ˜(declaeation)æ˜¯å¿…è¦çš„ã€‚åœ¨C++ä¸­ï¼Œæ‰€æœ‰çš„å®šä¹‰ä¹Ÿç”¨ä½œå£°æ˜ã€‚ä¸Šè¿°ä¾‹å­ä¸­çš„int xæ˜¯ å®šä¹‰ï¼Œä¹Ÿæ˜¯å£°æ˜ã€‚å¤šæ•°æƒ…å†µä¸‹ï¼Œå®šä¹‰ç¬¦åˆæˆ‘ä»¬çš„ç›®çš„ï¼Œå› ä¸ºå®šä¹‰èƒ½åŒæ—¶æ»¡è¶³â€œç¼–è¯‘å™¨â€å’Œâ€œé“¾æ¥å™¨â€çš„è¦æ±‚ã€‚ã€æ‰€æœ‰çš„å®šä¹‰éƒ½æ˜¯å£°æ˜ï¼Œä½†æ‰€æœ‰çš„å£°æ˜å¹¶ä¸ä¸€å®šæ˜¯å®šä¹‰ã€‚è¿™äº›ä¸æ˜¯å®šä¹‰çš„å£°æ˜æœ‰ä¸€ä¸ªåå­—ï¼šçº¯å£°æ˜(pure declarations)ã€‘ä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯ï¼šå‡½æ•°åŸå‹(function prototype)ï¼Œå®ƒæ»¡è¶³ç¼–è¯‘å™¨çš„è¦æ±‚ï¼Œä½†ä¸æ»¡è¶³é“¾æ¥å™¨çš„è¦æ±‚ã€‚å…¶ä»–ç±»å‹çš„çº¯å£°æ˜åŒ…å«ï¼šæå‰å£°æ˜å˜é‡ å’Œ ç±»å‹å£°æ˜ã€‚å•å®šä¹‰è§„åˆ™ä¸é€‚ç”¨äºçº¯å£°æ˜ã€‚æ‰€ä»¥ï¼Œä½ å¯ä»¥å¯¹ä¸€äº›æ ‡è¯†ç¬¦å£°æ˜nå¤šæ¬¡éƒ½å¯ä»¥ï¼ˆè™½ç„¶å£°æ˜næ¬¡ï¼Œä¼šæœ‰å¾ˆå¤šæ¬¡æ˜¯å†—ä½™çš„ï¼‰å°ç»“ï¼šåœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œâ€œå£°æ˜â€å°±æ˜¯æŒ‡â€œçº¯å£°æ˜â€ï¼›â€œå®šä¹‰â€å°±æ˜¯æŒ‡â€œå®šä¹‰ä¹Ÿå¯ä»¥ç”¨äºå£°æ˜â€ã€‚æ‰€ä»¥ï¼Œint x;æ˜¯ä¸€ä¸ªå®šä¹‰ï¼ˆè™½ç„¶ä»–æ—¢æ˜¯å®šä¹‰ï¼Œä¹Ÿæ˜¯å£°æ˜ï¼‰2.9 å‘½åå†²çª&amp;å‘½åç©ºé—´å‘½åå†²çªå‘½åå†²çªï¼šnaming collision (or naming conflict).å°†ä¸¤ä¸ªåŒåçš„æ ‡è¯†ç¬¦æ”¾åœ¨åŒä¸€ä¸ªç¨‹åºä¸­ï¼Œç¼–è¯‘å™¨æˆ–è€…é“¾æ¥å™¨æ— æ³•åŒºåˆ†å®ƒä»¬æ—¶ï¼Œå°±ä¼šæŠ¥é”™ã€‚è¿™ç§æƒ…å†µå°±æ˜¯ï¼šå‘½åå†²çªä¾‹å¦‚ï¼ša.cpp123456#include &lt;iostream&gt; void myFcn(int x)&#123; std::cout &lt;&lt; x;&#125;main.cpp1234567891011#include &lt;iostream&gt; void myFcn(int x)&#123; std::cout &lt;&lt; 2 * x;&#125; int main()&#123; return 0;&#125;å½“ç¼–è¯‘å™¨ç¼–è¯‘è¿™ä¸ªç¨‹åºæ—¶ï¼Œå®ƒå°†ä¼šå•ç‹¬çš„ç¼–è¯‘a.cppå’Œmain.cppï¼Œæ¯ä¸ªcppæ–‡ä»¶éƒ½ç¼–è¯‘æˆåŠŸã€‚ä½†æ˜¯ï¼Œå½“é“¾æ¥æ—¶ï¼Œé“¾æ¥å™¨å°†ä¼šé“¾æ¥a.cppå’Œmain.cppä¸­æ‰€æœ‰çš„å®šä¹‰åˆ°ä¸€èµ·ï¼Œæ­¤æ—¶å°±å‘ç°å‡½æ•°myFunå‘½åå†²çªäº†ã€‚ã€æ³¨æ„ï¼Œè™½ç„¶å‡½æ•°myFunæ²¡æœ‰è¢«è°ƒç”¨ï¼Œä½†åœ¨é“¾æ¥æ—¶è¿˜æ˜¯ä¼šå‡ºé”™ã€‘å‘½åå†²çªä¸€èˆ¬å‡ºç°åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼šä¸€ä¸ªå‡½æ•°(æˆ–å…¨å±€å˜é‡)çš„ä¸¤ä¸ª(æˆ–å¤šä¸ª)å®šä¹‰è¢«å¼•å…¥åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œè¿™äº›æ–‡ä»¶è¢«ç¼–è¯‘åˆ°åŒä¸€ä¸ªç¨‹åºä¸­ã€‚è¿™å°†å¯¼è‡´ä¸€ä¸ªé“¾æ¥å™¨é”™è¯¯ï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚ä¸€ä¸ªå‡½æ•°(æˆ–å…¨å±€å˜é‡)çš„ä¸¤ä¸ª(æˆ–å¤šä¸ª)å®šä¹‰è¢«å¼•å…¥åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­(é€šå¸¸é€šè¿‡#include)ã€‚è¿™å°†å¯¼è‡´ç¼–è¯‘å™¨é”™è¯¯ã€‚å¯¹äºå±€éƒ¨å˜é‡ï¼ŒC++æä¾›ä¸€ç§å±€éƒ¨èŒƒå›´çš„æœºåˆ¶ï¼Œå®ƒä½¿å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ä¸ä¼šå†²çªã€‚ä½†è¿™ç§æœºåˆ¶å¯¹äºå‡½æ•°çš„åå­—æ— æ•ˆã€‚å‘½åç©ºé—´å‘½åç©ºé—´ï¼šnamespaceå‘½åç©ºé—´ï¼šä¹‹æ‰€ä»¥å‡ºæ¥è¿™æ ·ä¸€ä¸ªä¸œè¥¿ï¼Œæ˜¯å› ä¸ºäººç±»å¯ç”¨çš„å•è¯æ•°å¤ªå°‘ï¼Œå¹¶ä¸”ä¸åŒçš„äººå†™çš„ç¨‹åºä¸å¯èƒ½æ‰€æœ‰çš„å˜é‡éƒ½æ²¡æœ‰é‡åç°è±¡ï¼Œå¯¹äºåº“æ¥è¯´ï¼Œè¿™ä¸ªé—®é¢˜å°¤å…¶ä¸¥é‡ï¼Œå¦‚æœä¸¤ä¸ªäººå†™çš„åº“æ–‡ä»¶ä¸­å‡ºç°åŒåçš„å˜é‡æˆ–å‡½æ•°(ä¸å¯é¿å…)ï¼Œä½¿ç”¨èµ·æ¥å°±æœ‰é—®é¢˜äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†åå­—ç©ºé—´è¿™ä¸ªæ¦‚å¿µï¼Œé€šè¿‡ä½¿ç”¨ namespace xxxï¼›ä½ æ‰€ä½¿ç”¨çš„åº“å‡½æ•°æˆ–å˜é‡å°±æ˜¯åœ¨è¯¥åå­—ç©ºé—´ä¸­å®šä¹‰çš„ï¼Œè¿™æ ·ä¸€æ¥å°±ä¸ä¼šå¼•èµ·ä¸å¿…è¦çš„å†²çªäº†ã€‚æ³¨æ„ï¼Œåœ¨åŒä¸€å‘½åç©ºé—´ä¸­ï¼Œæ‰€æœ‰çš„åå­—å¿…é¡»æ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚å…¨å±€å‘½åç©ºé—´åœ¨C++ä¸­ï¼Œä»»ä½•æ²¡æœ‰å®šä¹‰åœ¨ ç±»ã€å‡½æ•°ã€æˆ– å‘½åç©ºé—´ çš„åå­—ï¼Œéƒ½è¢«é»˜è®¤çš„å½’ä¸ºâ€œå…¨å±€å‘½åç©ºé—´(global namespace)â€ï¼Œæœ‰æ—¶ä¹Ÿå«â€œå…¨å±€èŒƒå›´(global scope)â€std å‘½åç©ºé—´åœ¨æœ€åˆè®¾è®¡c++æ—¶ï¼Œc++æ ‡å‡†åº“ä¸­çš„æ‰€æœ‰æ ‡è¯†ç¬¦(åŒ…æ‹¬std::cinå’Œstd::cout)éƒ½å¯ä»¥åœ¨æ²¡æœ‰std::å‰ç¼€çš„æƒ…å†µä¸‹ä½¿ç”¨(å®ƒä»¬æ˜¯å…¨å±€å‘½åç©ºé—´çš„ä¸€éƒ¨åˆ†)ã€‚ä½†æ˜¯ï¼Œè¿™æ„å‘³ç€æ ‡å‡†åº“ä¸­çš„ä»»ä½•æ ‡è¯†ç¬¦éƒ½å¯èƒ½ä¸ä½ è‡ªå·±å®šä¹‰çš„æ ‡è¯†ç¬¦çš„åå­—(ä¹Ÿåœ¨å…¨å±€åç§°ç©ºé—´ä¸­å®šä¹‰)å‘ç”Ÿå†²çªã€‚ä¸ºäº†é¿å…è¿™ç§å†²çªï¼ŒC++å°†æ‰€æœ‰æ ‡å‡†åº“ä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½ç§»å…¥ä¸€ä¸ªå«åšâ€œstd(æ˜¯standardçš„ç®€ç§°)â€çš„å‘½åç©ºé—´ï¼Œå³ï¼šstd namespaceæ‰€ä»¥ï¼Œä½ çœ‹åˆ°çš„std::coutï¼Œè¿™å¹¶ä¸æ˜¯å®ƒçš„åå­—ï¼Œå®ƒå®é™…ä¸Šåªæ˜¯coutï¼Œstdåªæ˜¯å‘½åç©ºé—´çš„åå­—ï¼Œè€Œcoutæ˜¯std namespaceä¸­çš„ä¸€éƒ¨åˆ†ã€‚ã€æ³¨ã€‘ï¼šå¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„æ ‡è¯†ç¬¦ï¼Œä½ å¿…é¡»å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¿™ä¸ªæ ‡è¯†ç¬¦æ˜¯åœ¨è¿™ä¸ªå‘½åç©ºé—´å†…ã€‚æ˜¾ç¤ºçš„å‘½åç©ºé—´é™å®šç¬¦ std::æœ€ç›´æ¥çš„æ–¹æ³•æ˜¯ï¼šå‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬ä½¿ç”¨coutæ˜¯æ¥è‡ª stdè¿™ä¸ªnamespace(å‘½åç©ºé—´)çš„ã€‚å¯ä»¥ä½¿ç”¨å‰ç¼€ â€œstd::â€ æ¥å®Œæˆï¼š1234567#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Hello world!\"; // when we say cout, we mean the cout defined in the std namespace return 0;&#125;â€˜::â€™ æ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå«åšâ€œä½œç”¨åŸŸè§£æç¬¦(scope resolution operator)â€ã€‚åœ¨å®ƒå·¦è¾¹çš„æ ‡è¯†ç¬¦è¡¨ç¤ºï¼šæ‰€åœ¨å‘½åç©ºé—´çš„åç§°ï¼›åœ¨å®ƒå³è¾¹çš„æ ‡è¯†ç¬¦è¡¨ç¤ºï¼šè¿™ä¸ªå‘½åç©ºé—´çš„ä¸€ä¸ª æ ‡è¯†ç¬¦ã€‚ã€æ³¨ã€‘å¦‚æœâ€œ::â€çš„å·¦è¾¹æ²¡æœ‰ä¸œè¥¿ï¼Œåˆ™é»˜è®¤ä¸ºå®ƒåœ¨å…¨å±€å‘½åç©ºé—´( global namespace )ä¸­ã€‚std::coutå°±è¡¨ç¤ºcoutæ˜¯åœ¨ std namsoace ä¸­ã€‚using namespace stdå¦ä¸€ç§æ–¹æ³•æ˜¯ï¼šç”¨ä½¿ç”¨æŒ‡ä»¤(using directive)**using namespace stdã€‚123456789#include &lt;iostream&gt; using namespace std; // this is a using directive telling the compiler to check the std namespace when resolving identifiers with no prefix int main()&#123; cout &lt;&lt; \"Hello world!\"; // cout has no prefix, so the compiler will check to see if cout is defined locally or in namespace std return 0;&#125;using directiveï¼šå‘Šè¯‰ç¼–è¯‘å™¨ å½“è¯•å›¾è§£æä¸€ä¸ªæ²¡æœ‰ä½¿ç”¨å‘½åç©ºé—´å‰ç¼€(namespace prefix)çš„æ ‡è¯†ç¬¦æ—¶ï¼Œæ£€æŸ¥ä¸€ä¸ªæŒ‡å®šçš„å‘½åç©ºé—´ã€‚ã€ä¸æ¨èæ­¤æ–¹æ³•ã€‘ï¼š123456789101112131415#include &lt;iostream&gt; // imports the declaration of std::cout using namespace std; // makes std::cout accessible as \"cout\" int cout() // declares our own \"cout\" function&#123; return 5;&#125; int main()&#123; cout &lt;&lt; \"Hello, world!\"; // Compile error! Which cout do we want here? The one in the std namespace or the one we defined above? return 0;&#125;è¿™ç§æƒ…å†µï¼Œå°†ä¸ä¼šè¢«ç¼–è¯‘ã€‚å› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“æˆ‘ä»¬åˆ°åº•æƒ³ç”¨æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„coutå‡½æ•°ï¼Œè¿˜æ˜¯æƒ³ç”¨ stdå‘½åç©ºé—´ ä¸­çš„coutå‡½æ•°ã€‚å¹¶ä¸”ï¼Œè™½ç„¶æ ‡è¯†ç¬¦åç§°ç°åœ¨å¯èƒ½ä¸å†²çªï¼Œä½†åœ¨å°†æ¥çš„è¯­è¨€ä¿®è®¢ä¸­ï¼Œå®ƒå¯èƒ½ä¸æ·»åŠ åˆ°stdåç§°ç©ºé—´çš„æ–°æ ‡è¯†ç¬¦å‘ç”Ÿå†²çªã€‚2.10 é¢„å¤„ç†å™¨åœ¨ç¼–è¯‘ä¹‹å‰ï¼Œä»£ç è¦ç»è¿‡ä¸€ä¸ªé˜¶æ®µï¼Œå«åšâ€œç¿»è¯‘(translation)â€ã€‚åœ¨ç¿»è¯‘é˜¶æ®µä¼šå‘ç”Ÿè®¸å¤šäº‹æƒ…ï¼Œä»¥ä½¿æ‚¨çš„ä»£ç å‡†å¤‡å¥½è¢«ç¼–è¯‘(å¦‚æœæ‚¨æ„Ÿå…´è¶£ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ç¿»è¯‘é˜¶æ®µçš„åˆ—è¡¨)ã€‚åº”ç”¨ç¿»è¯‘çš„ä»£ç æ–‡ä»¶ç§°ä¸ºç¿»è¯‘å•å…ƒ(translation unit)ã€‚æœ€å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šç¿»è¯‘é˜¶æ®µåŒ…å«é¢„å¤„ç†å™¨(preprocessor)ã€‚æœ€å¥½å°†é¢„å¤„ç†å™¨çœ‹ä½œæ˜¯ä¸€ä¸ªå•ç‹¬çš„ç¨‹åºï¼Œå®ƒå¤„ç†æ¯ä¸ªä»£ç æ–‡ä»¶ä¸­çš„æ–‡æœ¬éƒ¨åˆ†ã€‚å½“é¢„å¤„ç†å™¨è¿è¡Œæ—¶ï¼Œå®ƒä»å¤´åˆ°å°¾çš„æ‰«ææºç æ–‡ä»¶ï¼Œå¯»æ‰¾é¢„å¤„ç†ç¨‹åºæŒ‡ä»¤ã€‚é¢„å¤„ç†æŒ‡ä»¤(preprocessor directives)ï¼Œä¹Ÿç§°ä½œdirectivesï¼šæ˜¯ä»¥â€œ#â€ç¬¦å·å¼€å§‹ï¼Œä»¥æ¢è¡Œç¬¦ç»“æŸçš„æŒ‡ä»¤(ä¸æ˜¯åˆ†å·ï¼Œå³ä¸è¦åŠ åˆ†å·)ã€‚â€œä½¿ç”¨æŒ‡ä»¤(using directives)â€ä¸æ˜¯é¢„å¤„ç†æŒ‡ä»¤ï¼Œæ‰€ä»¥ä¸ä¼šè¢«é¢„å¤„ç†å™¨å¤„ç†ã€‚æ‰€ä»¥å½“æèµ·â€œdirectiveâ€ï¼Œé€šå¸¸æŒ‡çš„æ˜¯â€œpreprocessor directiveâ€includeå½“ä½ #include*ä¸€ä¸ªæ–‡ä»¶ï¼Œé¢„å¤„ç†å™¨å°†ä¼šæŠŠ#include*æŒ‡ä»¤ æ›¿æ¢ä¸º include fileçš„å†…å®¹ã€‚ï¼ˆinclude file çš„å†…å®¹å°†ä¼šè¢«é¢„å¤„ç†ï¼Œç„¶åè¢«ç¼–è¯‘ï¼‰1234567#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Hello, world!\"; return 0;&#125;å½“é¢„å¤„ç†å™¨è¿è¡Œæ—¶ï¼Œé¢„å¤„ç†å™¨å°†ä¼šæŠŠ#include &lt;iostream&gt;æ›¿æ¢ä¸º åä¸ºâ€œiostreamâ€çš„æ–‡ä»¶ã€‚å®å®šä¹‰å®å®šä¹‰ï¼šMacro defines#include æŒ‡ä»¤å¯ä»¥ç”¨æ¥åˆ›å»ºå®ã€‚åœ¨C++ä¸­ï¼Œå®æ˜¯å®šä¹‰å¦‚ä½•å°† â€˜è¾“å…¥æ–‡æœ¬â€™ è½¬æ¢ä¸º â€˜æ›¿æ¢è¾“å‡ºæ–‡æœ¬â€™ã€‚å®æœ‰ä¸¤ç§åŸºæœ¬ç±»å‹ï¼š1ï¸âƒ£å¯¹è±¡å¼å®(object-like macros)ã€‚2ï¸âƒ£å‡½æ•°å¼å®( function-like macros)å‡½æ•°å¼å®å‡½æ•°å¼å®çš„ä½œç”¨ç±»ä¼¼äºå‡½æ•°ï¼Œå¹¶å…·æœ‰ç±»ä¼¼çš„ç”¨é€”ã€‚å¯¹è±¡å¼å®å¯ä»¥è¢«å®šä¹‰æˆä»¥ä¸‹ä¸¤ç§å½¢å¼ï¼š#define identifier#define identifier substitution_textæ­¤å¤„ï¼Œidentifierï¼šå®åã€ä¸€èˆ¬æ˜¯å¤§å†™å­—æ¯ï¼Œç”¨ä¸‹åˆ’çº¿è¡¨ç¤ºç©ºæ ¼ã€‘ï¼›substitution_textï¼šæ›¿æ¢æ–‡æœ¬(æ›¿æ¢è¾“å‡ºæ–‡æœ¬)1.å¸¦æœ‰è¾“å‡ºæ–‡æœ¬(substitution_text)ï¼šå½“é¢„å¤„ç†å™¨å¤„ç†æ­¤æ¡æŒ‡ä»¤æ—¶ï¼Œå®å å°†ä¼šè¢«æ›¿æ¢ä¸ºâ€˜è¾“å‡ºæ–‡æœ¬â€™ã€‚123456789101112131415161718#include &lt;iostream&gt; #define MY_NAME \"Alex\" int main()&#123; std::cout &lt;&lt; \"My name is: \" &lt;&lt; MY_NAME; return 0;&#125;//é¢„å¤„ç†ç¨‹åºå°†ä¸Šè¿°è½¬æ¢ä¸ºä»¥ä¸‹å†…å®¹:int main()&#123; std::cout &lt;&lt; \"My name is: \" &lt;&lt; \"Alex\"; return 0;&#125;2.ä¸å¸¦è¾“å‡ºæ–‡æœ¬ï¼š1#define USE_YENå¦‚ä½ æ‰€æƒ³ï¼Œè¿™æ¡å®æŒ‡ä»¤å·¥ä½œæ–¹å¼ï¼šæ ‡è¯†ç¬¦çš„ä»»ä½•è¿›ä¸€æ­¥å‡ºç°éƒ½å°†è¢«åˆ é™¤ï¼Œå¹¶å°†è¢«nothingæ›¿æ¢!æ¡ä»¶ç¼–è¯‘æ¡ä»¶ç¼–è¯‘ï¼šconditional compilationä½¿ç”¨æ¡ä»¶ç¼–è¯‘çš„é¢„å¤„ç†æŒ‡ä»¤å¯ä»¥è®¾ç½®åœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹ç¼–è¯‘ï¼Œä»€ä¹ˆæ¡ä»¶ä¸‹ä¸ç¼–è¯‘ã€‚æ¯”è¾ƒå¸¸è§çš„æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤æœ‰ä»¥ä¸‹ä¸‰ä¸ªï¼š#ifdef*ã€#ifndefã€#endif*#ifdef é¢„å¤„ç†æŒ‡ä»¤å…è®¸é¢„å¤„ç†å™¨æ£€æŸ¥è¿™ä¸ªæ ‡è¯†ç¬¦(identifier)æ˜¯å¦å·²ç»è¢« #define(å®šä¹‰äº†)ã€‚å¦‚æœè¢«å®šä¹‰ï¼Œé‚£ä¹ˆåœ¨#ifdef*å’Œ#endif*ä¹‹é—´çš„ä»£ç å°†ä¼šè¢«ç¼–è¯‘ï¼›å¦‚æœæ²¡è¢«å®šä¹‰ï¼Œè¿™äº›ä»£ç å°†ä¼šè¢«å¿½ç•¥ã€‚12345678910111213141516#include &lt;iostream&gt; #define PRINT_JOE int main()&#123;#ifdef PRINT_JOE std::cout &lt;&lt; \"Joe\\n\"; // if PRINT_JOE is defined, compile this code#endif #ifdef PRINT_BOB std::cout &lt;&lt; \"Bob\\n\"; // if PRINT_BOB is defined, compile this code#endif return 0;&#125;ifndefæŒ‡ä»¤å’Œifdef*æŒ‡ä»¤çš„ä½œç”¨æ˜¯ç›¸åçš„ã€‚å³ï¼Œå¦‚æœè¿™ä¸ªæ ‡è¯†ç¬¦æ²¡æœ‰è¢« #defineï¼Œé‚£ä¹ˆåœ¨#ifndefå’Œ#endif*ä¹‹é—´çš„ä»£ç æ‰ä¼šè¢«ç¼–è¯‘12345678910#include &lt;iostream&gt; int main()&#123;#ifndef PRINT_BOB std::cout &lt;&lt; \"Bob\\n\";#endif return 0;&#125;è¾“å‡ºç»“æœæ˜¯â€œBobâ€,å› ä¸ºPRINT_BOBæ²¡æœ‰è¢« #defineï¼Œæ‰€æœ‰æ‰ä¼šæ‰§è¡Œã€‚#if 0 ï¼šæ¡ä»¶ç¼–è¯‘çš„å¦ä¸€ä¸ªå¸¸è§ç”¨æ³•æ˜¯ä½¿ç”¨#if 0æ¥æ’é™¤æ­£åœ¨ç¼–è¯‘çš„ä»£ç å—(å°±åƒå®ƒåœ¨ä¸€ä¸ªæ³¨é‡Šå—ä¸­ä¸€æ ·):12345678910111213#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Joe\\n\"; #if 0 // Don't compile anything starting here std::cout &lt;&lt; \"Bob\\n\"; std::cout &lt;&lt; \"Steve\\n\";#endif // until this point return 0;&#125;ã€æ³¨ã€‘å¯¹è±¡å¼å®ä¸ä¼šå½±å“é¢„å¤„ç†å™¨çš„å…¶ä»–æŒ‡ä»¤å¦‚ï¼š12345#define FOO 9 // Here's a macro substitution #ifdef FOO // This FOO does not get replaced because itâ€™s part of another preprocessor directive std::cout &lt;&lt; FOO; // This FOO gets replaced with 9 because it's part of the normal code#endifå®å®šä¹‰çš„èŒƒå›´æŒ‡ä»¤åœ¨ç¼–è¯‘ä¹‹å‰ï¼Œä»ä¸Šåˆ°ä¸‹é€ä¸ªæ–‡ä»¶åœ°è§£æã€‚åŒä¸€æ–‡ä»¶ä¸­12345678910111213#include &lt;iostream&gt; void foo()&#123;#define MY_NAME \"Alex\"&#125; int main()&#123; std::cout &lt;&lt; \"My name is: \" &lt;&lt; MY_NAME; return 0;&#125;è™½ç„¶ï¼Œä¸Šé¢çš„ä»£ç è¡¨é¢ä¸Šçœ‹èµ·æ¥ï¼š#define MY_NAME â€œAlexâ€æ˜¯å®šä¹‰åœ¨å‡½æ•°fooå†…éƒ¨çš„ã€‚ä½†æ˜¯é¢„å¤„ç†å™¨å°†ä¸ä¼šæ³¨æ„ï¼Œå› ä¸ºå®ƒä¸æ‡‚C++ä¸­çš„æ¦‚å¿µï¼Œä¾‹å¦‚å‡½æ•°ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªç¨‹åºçš„æ‰§è¡Œæµç¨‹ä¸#define MY_NAME â€œAlexâ€åœ¨å‡½æ•°fooä¹‹å‰æˆ–ä¹‹åå®šä¹‰çš„è¡Œä¸ºç›¸åŒã€‚ä½†æ˜¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹ æƒ¯äºå°† #define identifiersè¿™ç§å®å®šä¹‰æ”¾åœ¨å‡½æ•°çš„å¤–é¢ã€‚åŒä¸€é¡¹ç›®çš„ä¸åŒæ–‡ä»¶ä¸­é¢„å¤„ç†ç¨‹åºå®Œæˆåï¼Œå°†ä¸¢å¼ƒè¯¥æ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰æ ‡è¯†ç¬¦ã€‚è¿™æ„å‘³ç€æŒ‡ä»¤ä»…ä»å®šä¹‰ç‚¹åˆ°å®šä¹‰å®ƒä»¬çš„æ–‡ä»¶æœ«å°¾æœ‰æ•ˆã€‚åœ¨ä¸€ä¸ªä»£ç æ–‡ä»¶ä¸­å®šä¹‰çš„æŒ‡ä»¤ä¸ä¼šå½±å“åŒä¸€é¡¹ç›®ä¸­çš„å…¶ä»–ä»£ç æ–‡ä»¶ã€‚exampleï¼šfunction.cpp:1234567891011#include &lt;iostream&gt; void doSomething()&#123;#ifdef PRINT std::cout &lt;&lt; \"Printing!\";#endif#ifndef PRINT std::cout &lt;&lt; \"Not printing!\";#endif&#125;main.cpp12345678910void doSomething(); // forward declaration for function doSomething() #define PRINT int main()&#123; doSomething(); return 0;&#125;è¿è¡Œçš„ç»“æœæ˜¯ï¼šNot printing!å› ä¸ºæ–‡ä»¶ä¹‹é—´çš„å®å®šä¹‰äº’ä¸å½±å“ã€‚2.11 å¤´æ–‡ä»¶å¤´æ–‡ä»¶ï¼šHeader fileså½“ç¨‹åºå˜å¾—è¶Šæ¥è¶Šå¤§äº†ï¼Œå¯¹æ¯ä¸ªå‡½æ•°éƒ½è¿›è¡Œæå‰å£°æ˜æ˜¯å¾ˆä¹å‘³æ— è¶£çš„ã€‚å¦‚æœèƒ½å¤Ÿå°†æ‰€æœ‰çš„ æå‰å£°æ˜ æ”¾åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œç„¶ååœ¨éœ€è¦æ—¶å¯¼å…¥å®ƒä»¬ï¼Œè¿™ä¸æ˜¯å¾ˆå¥½å—?code filesï¼šæºæ–‡ä»¶(åç¼€ .cpp)ï¼›header filesï¼šå¤´æ–‡ä»¶(åç¼€ .h æˆ– .hpp)å¤´æ–‡ä»¶çš„ä¸»è¦ç”¨é€”å°±æ˜¯ï¼šå°† å£°æ˜ å¼•å…¥ æºæ–‡ä»¶ ä¸­ã€‚ä½¿ç”¨æ ‡å‡†åº“å¤´æ–‡ä»¶1234567#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Hello, world!\"; return 0;&#125;è¿™ä¸ªç¨‹åºä½¿ç”¨std::coutã€‚ä½†æ˜¯è¿™ä¸ªç¨‹åºæ²¡æœ‰æä¾›å…³äºstd::coutçš„å£°æ˜æˆ–è€…å®šä¹‰ï¼Œé‚£ç¼–è¯‘å™¨æ˜¯å¦‚ä½•çŸ¥é“std::coutæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç­”ï¼šå› ä¸ºstd::coutåœ¨å¤´æ–‡ä»¶â€œiostreamâ€ ä¸­ å·²ç»æå‰å£°æ˜è¿‡äº†ã€‚å½“æˆ‘ä»¬#include &lt;iostream&gt;æ—¶ï¼Œæˆ‘ä»¬å°±è¯·æ±‚é¢„å¤„ç†å™¨å°†å¤´æ–‡ä»¶â€œiostreamâ€ä¸­çš„æ‰€æœ‰å†…å®¹(å½“ç„¶ä¹ŸåŒ…å«std::cout)éƒ½å¤åˆ¶è¿‡æ¥ã€‚æ³¨æ„ï¼šå½“#include xxxæ—¶ï¼Œxxxå¤´æ–‡ä»¶çš„æ‰€æœ‰å†…å®¹éƒ½è¢«å¼•å…¥åˆ°å½“å‰æ–‡ä»¶ä¸­ã€‚å¤´æ–‡ä»¶é€šå¸¸åªåŒ…å«ï¼šå‡½æ•°å’Œå¯¹è±¡çš„å£°æ˜ï¼Œä¸åŒ…å«å®ƒä»¬çš„å®šä¹‰ã€‚å¦‚ std::coutåœ¨å¤´æ–‡ä»¶â€œiostreamâ€ä¸­å£°æ˜ï¼Œ ä½† å®šä¹‰ä¸ºc++æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨é“¾æ¥å™¨é˜¶æ®µè‡ªåŠ¨é“¾æ¥åˆ°ç¨‹åºä¸­ã€‚åˆ›å»ºè‡ªå·±çš„å¤´æ–‡ä»¶æ­¥éª¤ï¼šå¤´æ–‡ä»¶ä¿æŠ¤ç¬¦(header guaed)ç„¶åæ·»åŠ å¤´æ–‡ä»¶(åç¼€ .h)è¿›è¡Œå£°æ˜ï¼›ç›¸åº”çš„ä¹Ÿè¦æ·»åŠ æºæ–‡ä»¶(åç¼€ .cpp)è¿›è¡Œå®šä¹‰ã€‚ã€æ³¨æ„å¤´æ–‡ä»¶ã€æºæ–‡ä»¶çš„åå­—è¦ä¸€æ ·ã€‘åˆ›å»ºå®Œä¹‹åï¼šadd.hï¼š1234// 1) We really should have a header guard here, but will omit it for simplicity (we'll cover header guards in the next lesson) // 2) This is the content of the .h file, which is where the declarations goint add(int x, int y); // function prototype for add.h -- don't forget the semicolon!add.cppï¼š1234int add(int x, int y)&#123; return x + y;&#125;main.cppï¼š12345678#include &lt;iostream&gt;#include \"add.h\" // Insert contents of add.h at this point. Note use of double quotes here.ã€ä¸æ˜¯æ ‡å‡†åº“çš„å¤´æ–‡ä»¶ï¼Œä¸€èˆ¬ç”¨åŒå¼•å·\"\"ã€‘ int main()&#123; std::cout &lt;&lt; \"The sum of 3 and 4 is \" &lt;&lt; add(3, 4) &lt;&lt; '\\n'; return 0;&#125;ä¸Šé¢çš„ç¨‹åºçš„ç¼–è¯‘ã€é“¾æ¥è¿‡ç¨‹ï¼šå¤´æ–‡ä»¶çš„&lt;&gt;&amp;â€â€å°–æ‹¬å·ï¼šAngled brackets ï¼Œå³&lt;&gt;ã€‚å°–æ‹¬å·ç”¨æ¥å‘Šè¯‰é¢„å¤„ç†ç¨‹åºæˆ‘ä»¬åŒ…å«äº†ç¼–è¯‘å™¨åŒ…å«çš„å¤´æ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒåº”è¯¥åœ¨ç³»ç»Ÿç›®å½•ä¸­æŸ¥æ‰¾é‚£ä¸ªå¤´æ–‡ä»¶ã€‚åŒå¼•å·ï¼šdouble-quotesï¼Œå³â€œâ€ã€‚åŒå¼•å·å‘Šè¯‰é¢„å¤„ç†å™¨è¿™æ˜¯ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¤´æ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒåº”è¯¥åœ¨å½“å‰ç›®å½•ä¸­å¯»æ‰¾è¿™ä¸ªå¤´æ–‡ä»¶ã€‚å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå®ƒä¼šæ£€æŸ¥å…¶ä»–çš„åŒ…å«è·¯å¾„(å·²æŒ‡å®šä¸ºcompiler/IDEè®¾ç½®çš„ä¸€éƒ¨åˆ†çš„è·¯å¾„)ã€‚å¦‚æœè¿˜æ˜¯å¤±è´¥çš„è¯ï¼Œå®ƒå°†å»ç³»ç»Ÿç›®å½•ä¸­å¯»æ‰¾è¿™ä¸ªå¤´æ–‡ä»¶ã€‚â€œiostreamâ€æ²¡ .h åç¼€ï¼Ÿå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆâ€œiostreamâ€(æˆ–è€…å…¶ä»–æ ‡å‡†åº“å¤´æ–‡ä»¶)æ²¡æœ‰åç¼€ .hï¼Ÿç­”ï¼šå› ä¸ºiostream.hæ˜¯å¦ä¸€ä¸ªå¤´æ–‡ä»¶iostream.hä¸iostreamï¼šåœ¨C++æœ€å¼€å§‹åˆ›å»ºçš„æ—¶å€™ï¼Œæ‰€æœ‰æ ‡å‡†åº“éƒ½æ˜¯æœ‰ .h åç¼€çš„ã€‚ä½†æ˜¯ï¼Œåæ¥ANSIå§”å‘˜ä¼šä¿®æ”¹C++ï¼Œå°†æ‰€æœ‰çš„æ ‡å‡†åº“æ”¾åœ¨ std å‘½åç©ºé—´ ä¸­ï¼Œè¿›è€Œé¿å…ä¸ç”¨æˆ·è‡ªå®šä¹‰çš„æ ‡è¯†ç¬¦ å†²çªã€‚ä½†æ˜¯ä¸ºé¢˜æ¥äº†ï¼Œå°†è¿™äº›æ ‡å‡†åº“ç§»å…¥std å‘½åç©ºé—´ åï¼Œä»¥å‰çš„ç¨‹åºå°†æ— æ³•è¿è¡Œã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ–°çš„å¤´æ–‡ä»¶ï¼šiostreamå‡ºç°ï¼Œè¿™ä¸ªæ–°å¤´æ–‡ä»¶åŒ…å«äº† iostream.hçš„æ‰€æœ‰å†…å®¹ã€‚ç„¶åï¼Œæ—§çš„ç¨‹åºä¾ç„¶å¯ä»¥ç”¨#include &lt;iostream.h&gt;ï¼Œæ–°ç¨‹åºå°±ç”¨#include &lt;iostream&gt;å¤´æ–‡ä»¶è·¯å¾„å»ºè®®12#include \"headers/myHeader.h\"#include \"../moreHeaders/myOtherHeader.h\"è¿™ç§è®¾ç½®æˆè·¯å¾„å½¢å¼çš„å¤´æ–‡ä»¶ï¼Œå‡è®¾ç°åœ¨è·¯å¾„æ²¡é—®é¢˜ã€‚ä½†æ˜¯å¾ˆæœ‰å¯èƒ½åœ¨æŸä¸€å¤©ï¼Œä½ çš„æ–‡ä»¶ä½ç½®å°±ä¸å°å¿ƒçš„è¢«ç§»åŠ¨äº†ï¼Œè¿™æ—¶å€™å°±ç”¨ä¸äº†äº†ã€‚ã€å»ºè®®ã€‘å°†ä½ å¹³å¸¸ä¼šç”¨åˆ°çš„å¾ˆå¤šä¸åŒçš„æ–‡ä»¶æ”¾åœ¨æ¯”è¾ƒå›ºå®šçš„åœ°æ–¹ï¼Œç„¶ååœ¨ä½ çš„ compiler/IDE è¿™ä¸ªå›ºå®šåœ°æ–¹çš„ä½ç½®ã€‚è¿™æ ·å½“å®ƒåœ¨å½“å‰ç›®å½•ä¸­æ‰¾ä¸åˆ°å®ƒä»¬æ—¶ï¼Œå®ƒå°±ä¼šå»ä½ è®¾ç½®çš„å›ºå®šä½ç½®æ‰¾ã€‚è¿™é€šå¸¸å¯ä»¥é€šè¿‡åœ¨IDEé¡¹ç›®è®¾ç½®ä¸­è®¾ç½®åŒ…å«è·¯å¾„æˆ–æœç´¢ç›®å½•æ¥å®ç°ã€‚visual studioè®¾ç½®æ–¹æ³•ï¼šåœ¨â€œè§£å†³æ–¹æ¡ˆâ€ä¸­ï¼Œç‚¹å‡»projectçš„â€œå±æ€§â€ï¼Œç„¶åçœ‹åˆ°â€œVC++ç›®å½•â€ä¸­çš„â€œåŒ…å«ç›®å½•(include directories)â€ï¼Œåœ¨è¿™é‡Œé¢æ·»åŠ ä½ è¦ä½¿ç”¨çš„å¤´æ–‡ä»¶çš„ç›®å½•ã€‚è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼Œå¦‚æœè¦æ›´æ”¹ç›®å½•ç»“æ„ï¼Œåªéœ€æ›´æ”¹å•ä¸ªç¼–è¯‘å™¨æˆ–IDEè®¾ç½®ï¼Œè€Œä¸å¿…æ›´æ”¹æ¯ä¸ªä»£ç æ–‡ä»¶ã€‚2.12 å¤´æ–‡ä»¶ä¿æŠ¤ç¬¦å¤´æ–‡ä»¶ä¿æŠ¤ç¬¦ï¼šheader guardsé‡å¤å®šä¹‰duplicate definitionï¼šé‡å¤å®šä¹‰123456789101112131415161718192021222324252627//å˜é‡é‡å®šä¹‰int main()&#123; int x; // this is a definition for variable x int x; // compile error: duplicate definition return 0;&#125;//å‡½æ•°é‡å®šä¹‰#include &lt;iostream&gt; int foo() // this is a definition for function foo&#123; return 5;&#125; int foo() // compile error: duplicate definition&#123; return 5;&#125; int main()&#123; std::cout &lt;&lt; foo(); return 0;&#125;è¿™ç§æ¯”è¾ƒå®¹æ˜“ä¿®å¤ã€‚ä½†æ˜¯åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œå¾ˆå®¹æ˜“å‡ºç°ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­çš„å®šä¹‰è¢«includeä¸æ­¢ä¸€æ¬¡ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ ä¸€ä¸ªå¤´æ–‡ä»¶ åˆ#include å…¶ä»–å¤´æ–‡ä»¶ï¼šsquare.h:12345//åœ¨å¤´æ–‡ä»¶ä¸­ï¼Œä¸å»ºè®®å‡ºç° å®šä¹‰ï¼›ä½†æ˜¯è¿™é‡Œä¸ºäº†æ–¹ä¾¿ä¸¾ä¾‹int getSquareSides()&#123; return 4;&#125;geometry.h:1#include \"square.h\"main.cpp:1234567#include \"square.h\"#include \"geometry.h\"int main()&#123; return 0;&#125;ä¸Šé¢è¿™ä¸ªç¨‹åºã€‚é¦–å…ˆï¼Œåœ¨main.cppä¸­#include square.h ï¼Œå®ƒ(square.h)å°†getSquareSideså‡½æ•°çš„å®šä¹‰å¤åˆ¶åˆ°main.cppä¸­ã€‚ç„¶åï¼Œmain.cppåˆ#include geometry.h ï¼Œå®ƒ(geometry.h)åˆåŒ…å«äº†square.hï¼Œæ‰€ä»¥ä¹Ÿä¼šå°†square.hä¸­çš„å†…å®¹(åŒ…æ‹¬getSquareSideså‡½æ•°)å¤åˆ¶åˆ°geometry.hï¼Œè¿›è€Œä¹Ÿå°±è¢«å¤åˆ¶åˆ°main.cppä¸­ã€‚æ‰€ä»¥ï¼Œå½“è§£æå®Œæ‰€æœ‰çš„#includeä¹‹åï¼Œmain.cppå°±å˜æˆè¿™æ ·ï¼š1234567891011121314int getSquareSides() // from square.h&#123; return 4;&#125; int getSquareSides() // from geometry.h (via square.h)&#123; return 4;&#125; int main()&#123; return 0;&#125;æ‰€ä»¥ï¼Œå°±ä¼šå‡ºç°é‡å¤å®šä¹‰ï¼Œç¼–è¯‘ä¹Ÿä¼šå‡ºé”™ã€‚æ¯ä¸ªå•ç‹¬çš„æ–‡ä»¶æ²¡é—®é¢˜ï¼Œä½†æ˜¯å› ä¸ºmain.cppæœ€ç»ˆ#includeäº†ä¸¤æ¬¡square.hçš„å†…å®¹ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡åˆ°äº†é—®é¢˜ã€‚å¦‚ä½•è§£å†³å‘¢ï¼Ÿï¼Ÿï¼Ÿç­”ï¼šä½¿ç”¨header guardå¤´æ–‡ä»¶ä¿æŠ¤ç¬¦å¤´æ–‡ä»¶ä¿æŠ¤ç¬¦(header guard)æ˜¯æ¡ä»¶ç¼–è¯‘(conditional compilation)çš„æŒ‡ä»¤ï¼Œå®ƒçš„å½¢å¼å¦‚ä¸‹ï¼š123456#ifndef SOME_UNIQUE_NAME_HERE //SOME_UNIQUE_NAME_HEREï¼šä½ å¯ä»¥ç”¨ä»»ä½•åå­—ä»£æ›¿å®ƒ#define SOME_UNIQUE_NAME_HERE//è¿™é‡Œæ˜¯å†™å…³äº å£°æ˜ çš„ä»£ç #endifå½“è¿™ä¸ªå¤´æ–‡ä»¶è¢«#includedæ—¶ï¼Œé¢„å¤„ç†å™¨æ£€æŸ¥SOME_UNIQUE_NAME_HEREæ˜¯å¦è¢«å®šä¹‰è¿‡ã€‚å¦‚æœè¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡åŒ…å«è¿™ä¸ªå¤´æ–‡ä»¶ï¼ŒSOME_UNIQUE_NAME_HEREè¿˜æ²¡æœ‰è¢«åˆ›å»ºã€‚ç„¶åå°±ä¼šå®šä¹‰SOME_UNIQUE_NAME_HEREï¼Œè€Œä¸”ä¼šåŒ…å«æ–‡ä»¶çš„å†…å®¹ã€‚å¦‚æœè¿™ä¸ªå¤´æ–‡ä»¶ä¹‹å‰å·²ç»è¢«åŒ…å«åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆSOME_UNIQUE_NAME_HEREæ˜¯å·²ç»è¢«å®šä¹‰è¿‡çš„ï¼Œè€Œä¸”å…¶å†…å®¹ä¹Ÿä»¥ç»è¢«åŒ…å«åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚æ‰€ä»¥è¿™ä¸ªå¤´æ–‡ä»¶çš„å†…å®¹å°†ä¼šè¢«å¿½ç•¥ï¼ˆç”±äº#ifndefï¼‰ã€‚æ¯ä¸€ä¸ªå¤´æ–‡ä»¶éƒ½åº”è¯¥è¦æœ‰å¤´æ–‡ä»¶ä¿æŠ¤ç¬¦ã€‚å¥½çš„å¤´æ–‡ä»¶ä¿æŠ¤ç¬¦å‘½åè§„åˆ™ï¼š&lt;PROJECT&gt;_&lt;PATH&gt;_&lt;FILE&gt;_Hæˆ–è€…&lt;FILE&gt;_&lt;LARGE RANDOM NUMBER&gt;_Hæˆ–è€…&lt;FILE&gt;_&lt;CREATION DATE&gt;_Hè¯·æ³¨æ„ï¼Œå¤´æ–‡ä»¶ä¿æŠ¤çš„ç›®æ ‡æ˜¯é˜²æ­¢æºæ–‡ä»¶å¤šæ¬¡æ¥æ”¶åˆ°è¢«ä¿æŠ¤çš„å¤´æ–‡ä»¶ã€‚æ ¹æ®è®¾è®¡ï¼Œå¤´æ–‡ä»¶ä¿æŠ¤ä¸ä¼šé˜»æ­¢å°†ç»™å®šçš„å¤´æ–‡ä»¶(ä¸€æ¬¡)åŒ…å«åˆ°å•ç‹¬çš„æºç æ–‡ä»¶ä¸­ã€‚è¿™ä¹Ÿä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°çš„é—®é¢˜ï¼šsquare.h1234567891011#ifndef SQUARE_H#define SQUARE_H int getSquareSides()&#123; return 4;&#125; int getSquarePerimeter(int sideLength); // forward declaration for getSquarePerimeter #endifsquare.cpp123456#include \"square.h\" // square.h is included once here int getSquarePerimeter(int sideLength)&#123; return sideLength * getSquareSides();&#125;main.cpp12345678910#include &lt;iostream&gt;#include \"square.h\" // square.h is also included once here int main()&#123; std::cout &lt;&lt; \"a square has \" &lt;&lt; getSquareSides() &lt;&lt; \" sides\\n\"; std::cout &lt;&lt; \"a square of length 5 has perimeter length \" &lt;&lt; getSquarePerimeter(5) &lt;&lt; '\\n'; return 0;&#125;æ³¨æ„ï¼Œsquare.håŒ…å«åœ¨main.cppå’Œsquare.cppä¸­ã€‚è¿™æ„å‘³ç€square.hçš„å†…å®¹å°†è¢«åŒ…å«ä¸€æ¬¡åˆ°square.cppä¸­ï¼Œä¸€æ¬¡åˆ°main.cppä¸­ã€‚ç»†èŠ‚ï¼šå½“square.hè¢«åŒ…å«åœ¨square.cppä¸­æ—¶ï¼Œåœ¨square.cppç»“æŸä¹‹å‰ï¼ŒSQUARE_Héƒ½ä¸€ç›´è¢«å®šä¹‰ã€‚ï¼ˆè¿™é˜»æ­¢äº†square.hè¢«å¤šæ¬¡åŒ…å«äºsquare.cppã€‚ä¹ŸçœŸæ˜¯å¤´æ–‡ä»¶ä¿æŠ¤ç¬¦èµ·ä½œç”¨çš„ï¼‰ã€‚ç„¶è€Œï¼Œä¸€æ—¦square.cppç»“æŸåï¼ŒSQUARE_Hå°†ä¸å†è¢«å®šä¹‰ã€‚è¿™å°±æ„å‘³ç€å½“é¢„å¤„ç†å™¨è¿è¡Œmain.cppæ—¶ï¼ŒSQUARE_Håœ¨main.cppä¸­æœ€åˆæ˜¯æ²¡æœ‰å®šä¹‰çš„ã€‚ç»“æœå°±æ˜¯ï¼Œsquare.cppå’Œmain.cppéƒ½å¤åˆ¶äº†getSquareSidesçš„å®šä¹‰ã€‚è¿™ä¸ªç¨‹åºå°†å¯ä»¥è¢«ç¼–è¯‘ï¼Œä½†æ˜¯ä¼šé“¾æ¥å‡ºé”™ï¼ˆé“¾æ¥å™¨ä¼šæŠ±æ€¨ä¸ºä»€ä¹ˆä¼šæœ‰ä¸æ­¢ä¸€ä¸ªçš„getSquareSidesçš„å®šä¹‰ï¼‰æœ€å¥½çš„è§£å†³åŠæ³•å°±æ˜¯ï¼šå°†å‡½æ•°çš„å®šä¹‰æ”¾åœ¨æºæ–‡ä»¶ä¸­(å³ .cppæ–‡ä»¶ä¸­)ï¼Œå¤´æ–‡ä»¶ä¸­åªå«æœ‰å£°æ˜ã€‚#pragma once#program onceçš„ä½œç”¨å’Œå¤´æ–‡ä»¶æ ‡è¯†ç¬¦ç›¸åŒï¼Œä½†æ˜¯å®ƒæ›´åŠ çŸ­ã€‚ä½†æ˜¯ï¼Œ#program onceä¸æ˜¯C++å®˜æ–¹åŸç”Ÿçš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸æ˜¯æ‰€æœ‰çš„ç¼–è¯‘å™¨éƒ½æ”¯æŒå®ƒã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://longlongqin.github.io/tags/C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"Letâ€™s Build A Simple Interpreter-10","slug":"å­¦ä¹ ç¬”è®°/Let's Build A Simple Interpreter/LSBASI-10","date":"2020-03-25T05:21:04.000Z","updated":"2020-04-19T14:38:29.546Z","comments":true,"path":"archives/2f66ae56.html","link":"","permalink":"https://longlongqin.github.io/archives/2f66ae56.html","excerpt":"ä»Šå¤©çš„æ”¹è¿›å†…å®¹ï¼šå¦‚ä½•è¿›è¡Œè¯­æ³•Fenixå’Œè§£é‡ŠPascalçš„ç¨‹åºå¤´éƒ¨ï¼›å¦‚ä½•è¿›è¡Œè¯­æ³•åˆ†æPascalçš„å˜é‡å£°æ˜ï¼›å°†æ›´æ–°è§£é‡Šå™¨ï¼Œç”¨DIVå…³é”®å­—æ¥è¡¨ç¤ºæ•´æ•°çš„å‡ºå‘ã€ç”¨å“â€/â€œæ¥è¡¨ç¤ºæµ®ç‚¹æ•°çš„é™¤æ³•ï¼›æ·»åŠ Pascalè¯­è¨€çš„æ³¨é‡ŠåŠŸèƒ½","text":"ä»Šå¤©çš„æ”¹è¿›å†…å®¹ï¼šå¦‚ä½•è¿›è¡Œè¯­æ³•Fenixå’Œè§£é‡ŠPascalçš„ç¨‹åºå¤´éƒ¨ï¼›å¦‚ä½•è¿›è¡Œè¯­æ³•åˆ†æPascalçš„å˜é‡å£°æ˜ï¼›å°†æ›´æ–°è§£é‡Šå™¨ï¼Œç”¨DIVå…³é”®å­—æ¥è¡¨ç¤ºæ•´æ•°çš„å‡ºå‘ã€ç”¨å“â€/â€œæ¥è¡¨ç¤ºæµ®ç‚¹æ•°çš„é™¤æ³•ï¼›æ·»åŠ Pascalè¯­è¨€çš„æ³¨é‡ŠåŠŸèƒ½æºç ä¸‹è½½åœ¨è¿›è¡Œç»†è‡´çš„è®²è§£ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä¸‹è½½æœ¬èŠ‚çš„è§£é‡Šå™¨çš„æºç ï¼šspy.pyå’Œä¸€ä¸ªç®€å•çš„Pascalè¯­è¨€çš„ç¨‹åºï¼špart10.pasã€‚ç„¶åå†åœ¨å‘½ä»¤æç¤ºç¬¦(Windows10ç³»ç»Ÿ å¯ç›´æ¥åœ¨å·¦ä¸‹è§’æœç´¢æ¡†ä¸­æœç´¢â€œcmdâ€)ä¸­è¿›è¡Œè¾“å…¥ï¼špython spi.py part10.pasï¼šå¥½äº†ã€‚ç°åœ¨æ¥çœ‹çœ‹ä»Šå¤©è¦æ”¹è¿›çš„å†…å®¹ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ï¼šå¦‚ä½•è¿›è¡Œè¯­æ³•Fenixå’Œè§£é‡ŠPascalçš„ç¨‹åºå¤´éƒ¨ï¼›å¦‚ä½•è¿›è¡Œè¯­æ³•åˆ†æPascalçš„å˜é‡å£°æ˜ï¼›å°†æ›´æ–°è§£é‡Šå™¨ï¼Œç”¨DIVå…³é”®å­—æ¥è¡¨ç¤ºæ•´æ•°çš„å‡ºå‘ã€ç”¨å“â€/â€œæ¥è¡¨ç¤ºæµ®ç‚¹æ•°çš„é™¤æ³•ï¼›æ·»åŠ Pascalè¯­è¨€çš„æ³¨é‡ŠåŠŸèƒ½æ›´æ–°åçš„è¯­æ³•è§„åˆ™æ›´æ–°åçš„è¯­æ³•è§„åˆ™ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šè¿™é‡Œç»™å‡ºä¸€ä¸ªç®€å•åœ°Pascalè¯­è¨€çš„ç¨‹åºï¼Œä¾¿äºç†è§£å…¶è¯­æ³•ï¼š12345678910111213141516171819202122PROGRAM Part10;VAR number : INTEGER; a, b, c, x : INTEGER; y : REAL;BEGIN &#123;Part10&#125; BEGIN number := 2; a := number; b := 10 * a + 10 * number DIV 4; c := a - - b END; x := 11; y := 20 / 7 + 3.14; &#123; writeln('a = ', a); &#125; &#123; writeln('b = ', b); &#125; &#123; writeln('c = ', c); &#125; &#123; writeln('number = ', number); &#125; &#123; writeln('x = ', x); &#125; &#123; writeln('y = ', y); &#125;END. &#123;Part10&#125;1. programç¨‹åºå®šä¹‰çš„è¯­æ³•è§„åˆ™ï¼ŒåŒ…æ‹¬ï¼šä¿ç•™å­—â€œPROGRAMâ€ã€ç¨‹åºçš„åå­—ã€ä¸€ä¸ªä»¥ç‚¹â€œ.â€ç»“å°¾çš„blockã€‚å¦‚ï¼š123PROGRAM Part10;BEGINEND.ä¸Šé¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„Pascalç¨‹åº2. blockblockåŒ…å«ï¼šä¸€ä¸ªå£°æ˜è§„åˆ™ã€å¤åˆè¯­å¥ï¼Œå¦‚ï¼š12345678910//ç¤ºä¾‹1VAR number : INTEGER;BEGINEND//ç¤ºä¾‹2BEGINEND3. declarationsPascalçš„å£°æ˜æœ‰å‡ ä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½æ˜¯å¯é€‰çš„ã€‚æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬åªè®¨è®ºå˜é‡å£°æ˜çš„éƒ¨åˆ†ã€‚å˜é‡å£°æ˜è§„åˆ™ï¼šè¦ä¹ˆæœ‰ä¸€ä¸ªå˜é‡å£°æ˜çš„å­è§„åˆ™ï¼Œè¦ä¹ˆæ˜¯ç©ºçš„ã€‚4. VARPascalæ˜¯é™æ€ç±»è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä½¿ç”¨æ¯ä¸€ä¸ªå˜é‡ä¹‹å‰ï¼Œéƒ½éœ€è¦æ˜ç¡®çš„å£°æ˜å®ƒçš„ç±»å‹ã€‚å˜é‡çš„å£°æ˜åœ¨ç¨‹åºä¸­ç”¨VARä¿ç•™å­—ï¼Œå¦‚ï¼š1234VAR number : INTEGER; a, b, c, x : INTEGER; y : REAL;5. type_specåœ¨æœ¬èŠ‚ä¸­ï¼Œæ•°æ®ç±»å‹æ˜¯ä¸¤ç§ï¼šINTEGER å’Œ REAL(float)ï¼Œå¸¸å‡ºç°åœ¨å˜é‡å£°æ˜éƒ¨åˆ†ï¼š123VAR a : INTEGER; b : REAL;æœ¬èŠ‚ä¸­æ²¡æœ‰è¿›è¡Œè®¾è®¡ç±»å‹æ£€æŸ¥ï¼Œè¿™å°†ä¼šåœ¨åç»­æ–‡ç« ä¸­æ·»åŠ 6. termtermè§„åˆ™æ›´æ–°ä¹‹åï¼Œå°†æ•´æ•°ã€æµ®ç‚¹æ•°çš„å‡ºå‘åˆ†å¼€è¡¨ç¤ºï¼šDIVã€/1220 / 7 = 2.85714285714 //æµ®ç‚¹æ•°å‡ºå‘20 DIV 7 = 2 //æ•´æ•°é™¤æ³•7. factoræ›´æ–°ä¹‹åå¯ä»¥å¤„ç†æ•´æ•°ã€æµ®ç‚¹æ•°çš„å¸¸é‡ã€‚ä»¥ä¸‹æ˜¯ä»Šå¤©çš„å®Œæ•´è¯­æ³•ï¼š123456789101112131415161718192021222324252627282930313233343536program : PROGRAM variable SEMI block DOTblock : declarations compound_statementdeclarations : VAR (variable_declaration SEMI)+ | emptyvariable_declaration : ID (COMMA ID)* COLON type_spectype_spec : INTEGER | REALcompound_statement : BEGIN statement_list ENDstatement_list : statement | statement SEMI statement_liststatement : compound_statement | assignment_statement | emptyassignment_statement : variable ASSIGN exprempty :expr : term ((PLUS | MINUS) term)*term : factor ((MUL | INTEGER_DIV | FLOAT_DIV) factor)*factor : PLUS factor | MINUS factor | INTEGER_CONST | REAL_CONST | LPAREN expr RPAREN | variablevariable: IDæ›´æ–°Lexeræ€»ç»“ä¸€ä¸‹ï¼Œlexerçš„æ”¹å˜ï¼šæ–°çš„tokensæ–°çš„ä¿ç•™å­—æ·»åŠ å¤„ç†Pascalè¯­è¨€çš„æ³¨é‡Šï¼Œç”¨skip_commentæ›´æ–°integeræ›´æ–°get_next_token ï¼Œä½¿å…¶èƒ½å¤Ÿè¿”å›æ–°æ·»åŠ çš„tokensè®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä¸€ä¸‹ä¸Šé¢æåˆ°çš„å˜åŒ–:ä¸ºäº†å¤„ç†ç¨‹åºå¤´ã€å˜é‡çš„å£°æ˜ã€æ•´æ•°ä¸æµ®ç‚¹æ•°å¸¸é‡ä»¥åŠå®ƒä»¬çš„é™¤æ³•ã€‚æˆ‘ä»¬éœ€è¦æ·»åŠ æ–°çš„tokensï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ›´æ–°â€œINTEGERâ€çš„å«ä¹‰ï¼šè¡¨ç¤ºä¸€ä¸ªæ•´æ•°ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ•´æ•°å¸¸é‡ã€‚ä¸‹é¢æ˜¯æ›´æ–°åå…¨éƒ¨çš„tokens:PROGRAM (reserved keyword)VAR (reserved keyword)COLON (:)COMMA (,)INTEGER (we change it to mean integer type and not integer constant like 3 or 5)REAL (for Pascal REAL type)INTEGER_CONST (for example, 3 or 5)REAL_CONST (for example, 3.14 and so on)INTEGER_DIV for integer division (the DIV reserved keyword)FLOAT_DIV for float division ( forward slash / )å…¨éƒ¨çš„ä¿ç•™å­—tokenï¼š123456789RESERVED_KEYWORDS = &#123; 'PROGRAM': Token('PROGRAM', 'PROGRAM'), 'VAR': Token('VAR', 'VAR'), 'DIV': Token('INTEGER_DIV', 'DIV'), 'INTEGER': Token('INTEGER', 'INTEGER'), 'REAL': Token('REAL', 'REAL'), 'BEGIN': Token('BEGIN', 'BEGIN'), 'END': Token('END', 'END'),&#125;å¤„ç†æ³¨é‡Šï¼Œæ·»åŠ ä¸€ä¸ªskip_comment å‡½æ•°æ¥å¤„ç†æ³¨é‡Šï¼Œå®ƒçš„åŸç†å°±æ˜¯åœ¨æ‰¾åˆ°å³èŠ±æ‹¬å·â€œï½›â€ä¹‹å‰ï¼Œä¸¢å¼ƒæ‰€æœ‰å­—ç¬¦ï¼š1234def skip_comment(self): while self.current_char != '&#125;': self.advance() self.advance() # the closing curly braceé‡æ–°å‘½åintegerå‡½æ•°ä¸ºnumberå‡½æ•°ï¼Œï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†æ•´å‹å¸¸é‡å’Œæµ®ç‚¹å‹å¸¸é‡ï¼Œå¦‚3å’Œ3.14ï¼š1234567891011121314151617181920212223def number(self): \"\"\"Return a (multidigit) integer or float consumed from the input.\"\"\" result = '' while self.current_char is not None and self.current_char.isdigit(): result += self.current_char self.advance() if self.current_char == '.': result += self.current_char self.advance() while ( self.current_char is not None and self.current_char.isdigit() ): result += self.current_char self.advance() token = Token('REAL_CONST', float(result)) else: token = Token('INTEGER_CONST', int(result)) return tokenæ›´æ–°get_next_tokenå‡½æ•°ï¼Œä½¿å…¶èƒ½å¤Ÿè¿”å›æ–°å¢çš„tokensï¼š1234567891011121314151617181920212223def get_next_token(self): while self.current_char is not None: ... if self.current_char == '&#123;': self.advance() self.skip_comment() continue ... if self.current_char.isdigit(): return self.number() if self.current_char == ':': self.advance() return Token(COLON, ':') if self.current_char == ',': self.advance() return Token(COMMA, ',') ... if self.current_char == '/': self.advance() return Token(FLOAT_DIV, '/') ...æ›´æ–°Parseræ€»ç»“Parserçš„å˜åŒ–ï¼šæ–°çš„æŠ½è±¡è¯­æ³•æ ‘ç»“ç‚¹ï¼ˆAST nodesï¼‰ï¼šProgram, Block, VarDecl, Typeå¯¹åº”æ–°çš„è¯­æ³•è§„åˆ™çš„å‡½æ•°ï¼šblock, declarations, variable_declaration, å’Œ type_spec.æ›´æ–°å·²ç»å­˜åœ¨çš„paeserä¸­çš„æ–¹æ³•ï¼šprogram, term, and factorè®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶ä¸€ä¸‹ä¸Šé¢æåˆ°çš„å˜åŒ–:æ–°çš„AST nodesï¼šProgram AST nodeï¼šè¡¨ç¤ºä¸€ä¸ªç¨‹åºï¼Œä¹Ÿæ˜¯æˆ‘ä»¬çš„æ ¹èŠ‚ç‚¹ï¼š1234class Program(AST): def __init__(self, name, block): self.name = name self.block = blockBlock AST nodeï¼šåŒ…å«å£°æ˜ä¸å¤åˆè¯­å¥ï¼š1234class Block(AST): def __init__(self, declarations, compound_statement): self.declarations = declarations self.compound_statement = compound_statementVarDecl AST nodeï¼šè¡¨ç¤ºä¸€ä¸ªå˜é‡å£°æ˜ï¼Œå®ƒåŒ…å«ä¸€ä¸ªè¾¹æ¢èŠ‚ç‚¹å’Œå˜é‡çš„ç±»å‹ç»“ç‚¹ï¼š1234class VarDecl(AST): def __init__(self, var_node, type_node): self.var_node = var_node self.type_node = type_nodeType AST nodeï¼šè¡¨ç¤ºä¸€ä¸ªå˜é‡ç±»å‹ï¼ˆINTEGER or REALï¼‰ï¼š1234class Type(AST): def __init__(self, token): self.token = token self.value = token.valueå¯¹åº”æ–°å¢çš„è¯­æ³•è§„åˆ™çš„å‡½æ•°(æ–¹æ³•)ï¼šblock, declarations, variable_declaration, å’Œ type_spec.ã€è¿™äº›æ–¹æ³•è´Ÿè´£è§£ææ–°çš„è¯­è¨€ç»“æ„å’Œæ„é€ æ–°çš„AST nodesã€‘ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051def block(self): \"\"\"block : declarations compound_statement\"\"\" declaration_nodes = self.declarations() compound_statement_node = self.compound_statement() node = Block(declaration_nodes, compound_statement_node) return nodedef declarations(self): \"\"\"declarations : VAR (variable_declaration SEMI)+ | empty \"\"\" declarations = [] if self.current_token.type == VAR: self.eat(VAR) while self.current_token.type == ID: var_decl = self.variable_declaration() declarations.extend(var_decl) self.eat(SEMI) return declarationsdef variable_declaration(self): \"\"\"variable_declaration : ID (COMMA ID)* COLON type_spec\"\"\" var_nodes = [Var(self.current_token)] # first ID self.eat(ID) while self.current_token.type == COMMA: self.eat(COMMA) var_nodes.append(Var(self.current_token)) self.eat(ID) self.eat(COLON) type_node = self.type_spec() var_declarations = [ VarDecl(var_node, type_node) for var_node in var_nodes ] return var_declarationsdef type_spec(self): \"\"\"type_spec : INTEGER | REAL \"\"\" token = self.current_token if self.current_token.type == INTEGER: self.eat(INTEGER) else: self.eat(REAL) node = Type(token) return nodeæ›´æ–°å·²æœ‰çš„program, term, å’Œ, factor æ–¹æ³•æ¥é€‚åº”è¯­æ³•çš„æ”¹å˜ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859def program(self): \"\"\"program : PROGRAM variable SEMI block DOT\"\"\" self.eat(PROGRAM) var_node = self.variable() prog_name = var_node.value self.eat(SEMI) block_node = self.block() program_node = Program(prog_name, block_node) self.eat(DOT) return program_nodedef term(self): \"\"\"term : factor ((MUL | INTEGER_DIV | FLOAT_DIV) factor)*\"\"\" node = self.factor() while self.current_token.type in (MUL, INTEGER_DIV, FLOAT_DIV): token = self.current_token if token.type == MUL: self.eat(MUL) elif token.type == INTEGER_DIV: self.eat(INTEGER_DIV) elif token.type == FLOAT_DIV: self.eat(FLOAT_DIV) node = BinOp(left=node, op=token, right=self.factor()) return nodedef factor(self): \"\"\"factor : PLUS factor | MINUS factor | INTEGER_CONST | REAL_CONST | LPAREN expr RPAREN | variable \"\"\" token = self.current_token if token.type == PLUS: self.eat(PLUS) node = UnaryOp(token, self.factor()) return node elif token.type == MINUS: self.eat(MINUS) node = UnaryOp(token, self.factor()) return node elif token.type == INTEGER_CONST: self.eat(INTEGER_CONST) return Num(token) elif token.type == REAL_CONST: self.eat(REAL_CONST) return Num(token) elif token.type == LPAREN: self.eat(LPAREN) node = self.expr() self.eat(RPAREN) return node else: node = self.variable() return nodeç°åœ¨æ¥çœ‹çœ‹æˆ‘ä»¬çš„æŠ½è±¡è¯­æ³•æ ‘Abstract Syntax Treeï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªPascalç¨‹åºï¼š12345678910PROGRAM Part10AST;VAR a, b : INTEGER; y : REAL;BEGIN &#123;Part10AST&#125; a := 2; b := 10 * a + 10 * a DIV 4; y := 20 / 7 + 3.14;END. &#123;Part10AST&#125;å®ƒçš„è§£ææ ‘ä¸ºï¼šåœ¨å›¾ä¸­å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ·»åŠ çš„æ–°èŠ‚ç‚¹ã€‚æ›´æ–°Interpreterç°åœ¨ï¼Œå‰©ä¸‹çš„å°±æ˜¯å‘è§£é‡Šå™¨ç±»æ·»åŠ æ–°çš„è®¿é—®è€…æ–¹æ³•ã€‚ä¸‹é¢æ˜¯å°†è¦æ–°å¢çš„å››ä¸ªè®¿é—®æ–¹æ³•ï¼ˆå¯¹åº”æ–°å¢çš„å››ç§ç»“ç‚¹ï¼‰ï¼švisit_Programvisit_Blockvisit_VarDeclvisit_Typeå…¶ä¸­å¯¹äºVarDeclå’ŒTypeï¼Œè§£é‡Šå™¨å¯¹ä»–ä»¬ä»€ä¹ˆéƒ½ä¸åšï¼š123456789101112131415def visit_Program(self, node): self.visit(node.block)def visit_Block(self, node): for declaration in node.declarations: self.visit(declaration) self.visit(node.compound_statement)def visit_VarDecl(self, node): # Do nothing passdef visit_Type(self, node): # Do nothing passæ›´æ–°visit_BinOp æ–¹æ³•ï¼Œä½¿å…¶èƒ½å¤Ÿå‡†ç¡®çš„è§£é‡Šæ•´æ•°å’Œæµ®ç‚¹æ•°çš„é™¤æ³•ï¼š1234567891011def visit_BinOp(self, node): if node.op.type == PLUS: return self.visit(node.left) + self.visit(node.right) elif node.op.type == MINUS: return self.visit(node.left) - self.visit(node.right) elif node.op.type == MUL: return self.visit(node.left) * self.visit(node.right) elif node.op.type == INTEGER_DIV: return self.visit(node.left) // self.visit(node.right) elif node.op.type == FLOAT_DIV: return float(self.visit(node.left)) / float(self.visit(node.right))æ€»ç»“æ€»ç»“ä¸€ä¸‹ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæ‰©å±•äº†Pascalè§£é‡Šå™¨çš„å“ªäº›éƒ¨åˆ†ï¼šæ·»åŠ æ–°çš„è¯­æ³•è§„åˆ™å’Œæ›´æ–°ç°æœ‰çš„è§„åˆ™ï¼›æ·»åŠ æ–°tokenï¼Œå¹¶ç›¸åº”åœ°æ·»åŠ æ–°æ–¹æ³•å»å¤„ç†è¿™äº›tokensï¼Œæ›´æ–°äº†ç°æœ‰çš„æ–¹æ³•ï¼›parserä¸­ï¼šä¸ºæ–°çš„è¯­æ³•ç»“æ„æ·»åŠ æ–°çš„AST nodesï¼›å‘æˆ‘ä»¬çš„é€’å½’ä¸‹é™è§£æå™¨æ·»åŠ ä¸æ–°è¯­æ³•è§„åˆ™ç›¸å¯¹åº”çš„æ–°æ–¹æ³•ï¼Œå¹¶æ›´æ–°ä¸€äº›ç°æœ‰çš„æ–¹æ³•ï¼›interpreterä¸­æ·»åŠ æ–°çš„è®¿é—®æ–¹æ³•ï¼Œæ›´æ–°äº†ä¸€ä¸ªç°å­˜çš„è®¿é—®æ–¹æ³•æˆ‘ä»¬ä¹Ÿå‡ºå»äº†ä¸€äº›â€œHACKSâ€(part9 ä¸­æåˆ°çš„)ï¼šæœ¬æ–‡çš„è§£é‡Šå™¨å¯ä»¥å¤„ç†ç¨‹åºå¤´éƒ¨(PROGRAM header)å˜é‡å¯ä»¥ç”¨VARå…³é”®å­—æ¥å£°æ˜å°†æ•´æ•°ä¸æµ®ç‚¹æ•°çš„é™¤æ³•åˆ†å¼€æ¥","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Letâ€™s Build A Simple Interpreter","slug":"Letâ€™s-Build-A-Simple-Interpreter","permalink":"https://longlongqin.github.io/tags/Let%E2%80%99s-Build-A-Simple-Interpreter/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"LSBASIæ•´ç†","slug":"å­¦ä¹ ç¬”è®°/Let's Build A Simple Interpreter/1-8æ•´ç†","date":"2020-03-24T05:34:22.000Z","updated":"2020-04-19T14:38:29.546Z","comments":true,"path":"archives/6fc94bb0.html","link":"","permalink":"https://longlongqin.github.io/archives/6fc94bb0.html","excerpt":"æŒç»­æ›´æ–°","text":"æŒç»­æ›´æ–°part 3å®ç°äº†åŠ å‡æ··åˆè¿ç®—ï¼Œå¹¶å¼•å…¥è¯­æ³•å›¾æ¦‚å¿µpart 4å®ç°äº†æ•´æ•°çš„ä¹˜é™¤æ··åˆè¿ç®—ï¼Œå¼•å…¥ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•(context-free-grammars)ï¼Œå³BNFpart 5å®ç°äº†åŠ å‡ä¹˜é™¤æ··åˆè¿ç®—ï¼Œå¼•å…¥ç»“åˆå¾‹(associativity)å’Œä¼˜å…ˆçº§(precedence)part 6æ–°å¢æ‹¬å·è¿ç®—part 7ä»æœ¬å°èŠ‚å¼€å§‹ï¼Œå°†interpreterå’Œparseråˆ†å¼€æ¥å®ç°ã€‚å¹¶å¼•å…¥æŠ½è±¡è¯­æ³•æ ‘(AST)å’Œè§£ææ ‘(parse tree)æ¦‚å¿µpart 8æ–°å¢ä¸€å…ƒæ“ä½œç¬¦(unary operators)ï¼šâ€œ+â€ï¼Œâ€œ-â€part 9æ•´ä½“åˆ†ææ•´ä½“åˆ†æï¼Œä¸ç®¡æ˜¯part xï¼Œéƒ½ä¸€èµ·åˆ†æï¼Œçœ‹çœ‹ä»–çš„æ•´ä½“ç»“æ„ï¼šLexertokenç±»å‹ï¼š12345678910111213141516171819202122INTEGER = 'INTEGER' #ç”¨äºè¡¨ç¤ºæ•´æ•°ç±»å‹REAL = 'REAL' #è¡¨ç¤ºæµ®ç‚¹å‹INTEGER_CONST = 'INTEGER_CONST' #æ•´å‹å¸¸é‡REAL_CONST = 'REAL_CONST' #æµ®ç‚¹å‹å¸¸é‡PLUS = 'PLUS'MINUS = 'MINUS'MUL = 'MUL'INTEGER_DIV = 'INTEGER_DIV' #æ•´å‹æ•°çš„é™¤æ³•FLOAT_DIV = 'FLOAT_DIV' #æµ®ç‚¹æ•°çš„é™¤æ³•LPAREN = 'LPAREN' #å·¦å°æ‹¬å·RPAREN = 'RPAREN' #å³å°æ‹¬å·ID = 'ID' #è¡¨ç¤ºæœ‰æ•ˆçš„æ ‡è¯†ç¬¦ASSIGN = 'ASSIGN' #è¿™ç§tokenè¡¨ç¤ºä¸¤ä¸ªå­—ç¬¦ï¼Œâ€œ:=â€,ç”¨äºèµ‹å€¼è¯­å¥BEGIN = 'BEGIN' END = 'END'SEMI = 'SEMI' # è¡¨ç¤ºåˆ†å·ï¼Œç”¨äºæ ‡è®°å¤åˆè¯­å¥ä¸­çš„ä¸€ä¸ªå¥å­çš„ç»“å°¾DOT = 'DOT' #ç‚¹ï¼Œç”¨äºPascalè¯­è¨€ä¸­programçš„å®šä¹‰PROGRAM = 'PROGRAM' VAR = 'VAR'COLON = 'COLON' #å†’å·COMMA = 'COMMA' #é€—å·EOF = 'EOF'ä¿ç•™å­—123456789RESERVED_KEYWORDS = &#123; 'PROGRAM': Token('PROGRAM', 'PROGRAM'), 'VAR': Token('VAR', 'VAR'), 'DIV': Token('INTEGER_DIV', 'DIV'), 'INTEGER': Token('INTEGER', 'INTEGER'), 'REAL': Token('REAL', 'REAL'), 'BEGIN': Token('BEGIN', 'BEGIN'), 'END': Token('END', 'END'),&#125;è¯æ³•åˆ†æå™¨çš„ç»“æ„ï¼šæœ‰ä¸€ä¸ª___init__çš„å‡½æ•°ï¼Œåœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼›ä¸€ä¸ªæç¤ºé”™è¯¯çš„å‡½æ•°errorï¼›ç„¶åå¼€å§‹å¤„ç†â€œè¯â€ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå‡½æ•°advanceç”¨äºå‘å‰è¿›ä¸€æ­¥(posä¼šâ•1ï¼‰ï¼špeekï¼šä¸ºäº†åœ¨ä»¥ç›¸åŒçš„å­—ç¬¦å¼€å¤´æ—¶ï¼ŒåŒºåˆ†æ˜¯â€œä¿ç•™å­—â€è¿˜æ˜¯â€œæ ‡è¯†ç¬¦â€ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸æ¶ˆè€—ä¸‹ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µä¸‹å»æŸ¥çœ‹ç¼“å†²åŒºï¼šå°±æ˜¯åˆ©ç”¨peek_posç§»åŠ¨æŸ¥çœ‹ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œè€ŒçœŸæ­£çš„posä¸åŠ¨ã€‚skip_commentï¼šå¤„ç†æ³¨é‡Šï¼›skip_whitespaceï¼šå¤„ç†ç©ºæ ¼ï¼›numberï¼šåœ¨part10ä¹‹å‰ï¼Œå«åšintegerï¼Œå› ä¸ºç°åœ¨ä¸ä»…æœ‰æ•´å‹æ•°æ®ï¼Œè¿˜æœ‰æµ®ç‚¹å‹çš„ã€‚æ‰€ä»¥æ”¹åä¸ºnumberã€‚_idï¼šå¤„ç†â€œæ ‡è¯†ç¬¦â€å’Œâ€œä¿ç•™å­—â€get_next_tokenï¼šè¯æ³•åˆ†æå™¨çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå‰é¢çš„éƒ½æ˜¯è®¾è®¡ï¼Œç°åœ¨æ‰å¼€å§‹è¯†åˆ«å‡ºä¸€ä¸ªä¸ªçš„tokenï¼Œä¸‹é¢å°±æ˜¯åˆ—å‡ºè¯†åˆ«tokençš„ç§ç±»ï¼šå…¶å®è¿™é‡Œå«åšï¼šget_token_and_go_nextæ¯”è¾ƒç›´è§‚ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ï¼Œå…ˆè¯†åˆ«å‡ºä¸€ä¸ªtokenï¼Œç„¶åå†ç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ªtokenå·¦æ‹¬å·tokenï¼šâ€œ{â€ä¿ç•™å­—tokenã€æ ‡è¯†ç¬¦tokenã€‚ï¼ˆç”¨å‡½æ•°_id()æ¥å®Œæˆï¼‰æ•´å‹å˜é‡tokenèµ‹å€¼ç¬¦å·â€œ:=â€tokenå†’å·â€œ:â€tokenåˆ†å·â€œ;â€tokené€—å·â€œ,â€tokenåŠ ã€å‡ã€ä¹˜ tokené™¤æ³•tokenæ•´æ•°é™¤æ³•ï¼šâ€œDIVâ€ tokenæµ®ç‚¹æ•°é™¤æ³•ï¼šâ€œ/â€ tokenå·¦å°æ‹¬å·â€œ(â€ token ï¼› &amp; å³å°æ‹¬å·â€œ)â€ tokenç‚¹â€œ.â€ tokenParserâ€‹ è¯­æ³•åˆ†æï¼Œä¸»è¦æ˜¯åˆ†æè¯æ³•åˆ†æå™¨ä¼ è¿‡æ¥çš„ä¸€ä¸ªä¸ªtokenï¼Œåˆ†æå®ƒä»¬ä¹‹é—´çš„è¿ç®—å…³ç³»ï¼Œå³è¯­æ³•ï¼šå®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå³è¯­æ³•ï¼Œç”¨æŠ½è±¡è¯­æ³•æ ‘æ¥è¡¨ç¤ºï¼šä¸€ä¸ªåŸºç±»ï¼šASTã€‚ï¼ˆåé¢çš„ç»§æ‰¿äºå®ƒï¼‰ä¸€ä¸ªäºŒå…ƒæ“ä½œç¬¦ç±»ï¼šBinOp(AST)ï¼ˆè¡¨ç¤ºåŠ å‡ä¹˜é™¤è¿ç®—ï¼‰","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Let's Build A Simple Interpreter","slug":"Let-s-Build-A-Simple-Interpreter","permalink":"https://longlongqin.github.io/tags/Let-s-Build-A-Simple-Interpreter/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"æˆ‘çš„äº‘ä¹¦ç­¾","slug":"èµ„æºæ•´åˆ","date":"2020-03-22T16:05:49.000Z","updated":"2020-04-19T14:38:29.545Z","comments":true,"path":"archives/eaabd222.html","link":"","permalink":"https://longlongqin.github.io/archives/eaabd222.html","excerpt":"æœé›†å­¦ä¹ èµ„æ–™&å¥½ç”¨çš„å·¥å…·","text":"æœé›†å­¦ä¹ èµ„æ–™&å¥½ç”¨çš„å·¥å…·â…  CS å­¦ä¹ 00å…¨ç§‘èµ„æ–™1. é¢è¯•ç¬”è®°é›†åˆèµ„æºæè¿°CS-Notesã€ç½‘é¡µç‰ˆã€ã€å¤‡ç”¨é“¾æ¥ã€‘ğŸ“š æŠ€æœ¯é¢è¯•å¿…å¤‡åŸºç¡€çŸ¥è¯†ã€Leetcodeã€è®¡ç®—æœºæ“ä½œç³»ç»Ÿã€è®¡ç®—æœºç½‘ç»œã€ç³»ç»Ÿè®¾è®¡ã€Javaã€Pythonã€C++å‡†å¤‡ç§‹æ‹›ï¼Œæ¬¢è¿æ¥æ ‘ä¸Šå–æœå®è¿™é‡Œå°†ä»¥æœ€çŸ­çš„ç¯‡å¹…ï¼Œæœ€æ¸…æ™°çš„å±‚çº§ç»“æ„å»æ€»ç»“é‚£äº›å¯¹C++åå°å¼€å‘æœ€ä¸ºæ ¸å¿ƒçš„å†…å®¹ã€‚ã€Šäº’è”ç½‘é¢è¯•ç¬”è®°ã€‹æ”¶é›†å’Œåˆ†æäº’è”ç½‘å¸¸è§é¢è¯•é¢˜ï¼Œå¹¶å°†è¿™äº›é¢è¯•çŸ¥è¯†æ•´ç†æˆæ–‡æ–¹ä¾¿å¤§å®¶æŸ¥é˜…ã€‚ä¸»è¦æ˜¯é¢å‘javaç¨‹åºå‘˜ï¼Œä½†åŸºç¡€çŸ¥è¯†éƒ¨åˆ†ä¸åŒè¯­è¨€ç¨‹åºå‘˜(c,c++,pythonç­‰ï¼‰éƒ½å¯ä»¥å‚è€ƒC/C++ç¬”è®°C/C++ æŠ€æœ¯é¢è¯•åŸºç¡€çŸ¥è¯†æ€»ç»“ï¼ŒåŒ…æ‹¬è¯­è¨€ã€ç¨‹åºåº“ã€æ•°æ®ç»“æ„ã€ç®—æ³•ã€ç³»ç»Ÿã€ç½‘ç»œã€é“¾æ¥è£…è½½åº“ç­‰çŸ¥è¯†åŠé¢è¯•ç»éªŒã€æ‹›è˜ã€å†…æ¨ç­‰ä¿¡æ¯ã€‚ https://interview.huihut.com2. æ•™ç¨‹é›†åˆå­¦ä¹ C &amp; C++å­¦ä¹ C &amp; C++ &amp; python&amp;æ±‡ç¼–è¯­è¨€ LLVMç¼–è¯‘å™¨ æ•°æ®ç»“æ„ ç®—æ³• æ“ä½œç³»ç»Ÿ å•ç‰‡æœº linux é¢è¯•01å®ç”¨ç½‘ç«™geeksforgeeksæ˜¯å°åº¦çš„ä¸€å®¶è‡´åŠ›äºè®¡ç®—æœºç§‘å­¦çš„ç™¾ç§‘å…¨ä¹¦ï¼Œæ ¹æ®ä¸åŒçš„ç”¨æˆ·è®¡ç®—æœºæ°´å¹³è€Œå‘å¸ƒä¸åŒçš„éš¾åº¦ç­‰çº§ï¼Œä»åŸºç¡€åˆ°ä¸“å®¶çº§ï¼Œå†…å®¹æ¶µç›–äº†ç¼–ç¨‹ã€ç®—æ³•ã€é¢è¯•é—®é¢˜ç­‰ã€‚â€‹02é¡¹ç›®ç»ƒä¹ åŸºäºé¡¹ç›®å­¦ä¹ ï¼ˆproject-based-learning)03ç¼–ç¨‹ç›¸å…³ä¹¦ç±è‹±æ–‡ç‰ˆä¸­æ–‡ç‰ˆ04ç§‘ç›®1. æ•°æ®ç»“æ„é€‚åˆå›é¡¾çŸ¥è¯†ç‚¹ï¼šhttps://oi-wiki.org/å­¦ä¹ æ•™ç¨‹æè¿°çŠ¶æ€æ•°æ®ç»“æ„ä¸ç®—æ³•ç³»åˆ—åšå®¢å›­ä¸­çš„ä¸€ä¸ªåšä¸»å†™çš„å†çœ‹ğŸ‘ï¸ç®—æ³•å­¦ä¹ ç¬”è®°è¿™é‡Œçš„å†…å®¹æ˜¯å­¦ä¹ ç®—æ³•è¿‡ç¨‹çš„ä¸€äº›è®°å½•ï¼Œå¸Œæœ›èƒ½ä¸€ç›´åšæŒä¸‹å»ã€‚å¤‡ç”¨å¯è§†åŒ–å·¥å…·æè¿°Visualgoå¯è§†åŒ–çš„è§‚å¯Ÿæ•°æ®ç»“æ„çš„æ“ä½œDavid Galleså¯è§†åŒ–æ¼”ç¤º(JS)æ—§é‡‘å±±å¤§å­¦David Galleså¯è§†åŒ–æ¼”ç¤º(JS)å¯ä»¥ä»ä»£ç ä¸­å¯è§†åŒ–ç®—æ³•ç®—æ³•å¯è§†åŒ–å·¥å…·æ˜¯ä¸€ä¸ªäº¤äº’å¼çš„åœ¨çº¿å¹³å°ï¼Œå¯ä»¥ä»ä»£ç ä¸­å¯è§†åŒ–ç®—æ³•ã€‚æ›´å¤šå¯è§†åŒ–å·¥å…·2. learn OpenGLä¸­æ–‡æ•™å­¦ç½‘å€ï¼šhttps://learnopengl-cn.github.io/intro/3. C/C++Cè¯­è¨€ç›¸å…³ï¼šç¬¨åŠæ³•å­¦Cå®˜æ–¹æ–‡æ¡£cppreferenceç›¸å…³ç½‘ç«™ç½‘ç«™æè¿°Cplusplusè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå­¦ä¹  C++ çš„ä¼˜ç§€ç½‘ç«™ï¼Œé™¤äº†æä¾›ç›¸åº”çš„æ•™ç¨‹ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆæ£’çš„è®ºå›ã€‚å’Œå…¶å®ƒç½‘ç«™ç›¸æ¯”ï¼Œå®ƒçš„ä»·å€¼æ›´å¤šä½“ç°åœ¨å‚è€ƒä¸Šï¼Œå› ä¸ºé‡Œé¢è§£é‡Šäº†è®¸å¤šç¼–ç¨‹æ¦‚å¿µï¼Œå¦‚æœå¯¹æŸä¸ªç‰¹å®šçš„ä¸œè¥¿æ„Ÿåˆ°å›°æƒ‘ï¼Œé‚£ä¹ˆè¿™äº›æ¦‚å¿µå°†ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚TutorialsPointTutorialspoint æ˜¯ä¸€ä¸ªé¡¶çº§ç½‘ç«™ï¼Œä¹‹æ‰€ä»¥è¿™ä¹ˆè¯´ï¼Œæ˜¯å› ä¸ºä½ æƒ³å­¦çš„ä»»ä½•æŠ€æœ¯ï¼ˆåŒ…æ‹¬ C++ï¼‰ï¼Œå®ƒå‡ ä¹éƒ½æä¾›äº†è¯¦ç»†çš„æ•™ç¨‹ã€‚ä¿å­˜å¥½å°±å¯¹äº†ï¼Œè¶…çº§æœ‰ç”¨ã€‚Awesome C++GitHub ä¸Šçš„ Awesome-XXX ç³»åˆ—çš„èµ„æºæ•´ç†ï¼Œawesome-cpp å°±æ˜¯ fffaraz å‘èµ·ç»´æŠ¤çš„ C++ èµ„æºåˆ—è¡¨ï¼Œå†…å®¹åŒ…æ‹¬ï¼šæ ‡å‡†åº“ã€Web åº”ç”¨æ¡†æ¶ã€äººå·¥æ™ºèƒ½ã€æ•°æ®åº“ã€å›¾ç‰‡å¤„ç†ã€æœºå™¨å­¦ä¹ ã€æ—¥å¿—ã€ä»£ç åˆ†æç­‰å­¦ä¹ è·¯çº¿C++å­¦ä¹ è¿›é˜¶(é™ˆçš“)å­¦ä¹ æ•™ç¨‹èµ„æ–™æè¿°LearnCppä¸€ä¸ªå¾ˆå¥½åœ°C++å­¦ä¹ ç½‘ç«™ä½ å¥½ï¼ŒC++è¾…åŠ©å­¦ä¹ æ–‡ç« é˜…è¯»ï¼ˆæœ‰æ—¶é—´å¯ä»¥çœ‹ï¼‰â…¡ å…³æ³¨çš„åšå®¢Linuxé³¥å“¥çš„ Linux ç§æˆ¿èœâ…¢ Githubä¸­çš„èµ„æº[githubä»“åº“æ’å](https://gitstar-ranking.com/repositories)webå¼€å‘äººå‘˜çš„è·¯çº¿å›¾è‡ªå­¦è®¡ç®—æœºè¯¾ç¨‹çš„å‚è€ƒè®¡ç®—æœºæŠ€æœ¯ä¸ç§‘å­¦è‡ªå­¦ä¹‹æ—…(ä¸­æ–‡)å¼€æºç¤¾åŒºå¤§å­¦è®¡ç®—æœºç§‘å­¦è¯¾ç¨‹ä¸­æ–‡é¡¹ç›®ï¼ˆOSSU CS CN)æ—¨åœ¨ä¸ºè‹±è¯­èƒ½åŠ›æœ‰å¾…æé«˜çš„ä¸­æ–‡å­¦ä¹ è€…æä¾›å…¨ä¸­æ–‡çš„åœ¨çº¿æœ¬ç§‘è®¡ç®—æœºç§‘å­¦å­¦ä¹ è¯¾ç¨‹ã€‚æ¶ˆé™¤å­¦ä¹ è€…åœ¨è‡ªå­¦è®¡ç®—æœºè¯¾ç¨‹ä¸­é‡åˆ°çš„è¯­è¨€éšœç¢ã€‚è¯·æ³¨æ„æœ¬è¯¾ç¨‹å¹¶ä¸æ˜¯è‹±æ–‡è¯¾ç¨‹çš„å¯¹ç…§ç¿»è¯‘ï¼Œè€Œæ˜¯åœ¨å…¶åŸºç¡€ä¸Šç»“åˆåœ°åŒºå®é™…æƒ…å†µæä¾›å…¨ä¸­æ–‡çš„åœ¨çº¿æ•™è‚²ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ä»ç„¶æ¨èå­¦æœ‰ä½™åŠ›è€…åœ¨å­¦ä¹ å®Œæœ¬è¯¾ç¨‹åç³»ç»Ÿå­¦ä¹ å’ŒæŒæ¡è‹±è¯­æŠ€èƒ½ã€‚computer-scienceé€šå¾€å…è´¹è‡ªå­¦è®¡ç®—æœºç§‘å­¦æ•™è‚²çš„é“è·¯!â…¡ å·¥å…·01å†™ä½œç›¸å…³ç¼–è¾‘å™¨å…¬ä¼—å·æ’ç‰ˆ(æ”¯æŒMarkdown)ï¼šæ¨èã€åˆ†ä¸ºï¼šGoogleæ’ä»¶ &amp; åœ¨çº¿ç‰ˆã€‘åœ¨çº¿ç‰ˆ135ç¼–è¾‘å™¨ï¼šä¸€æ¬¾å¼ºå¤§çš„å¾®ä¿¡å…¬ä¼—å·æ–‡ç« æ’ç‰ˆæ’ä»¶å£¹ä¼´ï¼šå£¹ä¼´è¿è¥ç¥å™¨_æ–°åª’ä½“å°ç¼–æœ€å–œæ¬¢çš„å¾®ä¿¡æ’ç‰ˆå·¥å…·çŸ­é“¾ç”Ÿæˆå›¾ç‰‡å‹ç¼©RGBåŠå…¶å®ƒç±»å‹é¢œè‰²æŸ¥è¯¢æ— ç‰ˆæƒå›¾ç‰‡Pixabayï¼šPixabayæ˜¯ä¸€ä¸ªæ”¯æŒä¸­æ–‡æœç´¢çš„å…è´¹å¯å•†ç”¨å›¾åº“ã€‚Gratisographyï¼šGratisographyæ˜¯ä¸€ä¸ªå…è´¹é«˜åˆ†è¾¨ç‡æ‘„å½±å›¾ç‰‡åº“ï¼Œæ‰€æœ‰çš„å›¾ç‰‡éƒ½å¯ä»¥ç”¨äºä¸ªäººæˆ–è€…å•†ä¸šç”¨é€”ï¼Œæ¯å‘¨æ›´æ–°å›¾ç‰‡ä½ åªéœ€è¦ç‚¹å‡»å³å¯ä¸‹è½½ã€‚Unsplashï¼šæ¯å¤©æ›´æ–°ä¸€å¼ é«˜è´¨é‡çš„å›¾ç‰‡ç´ æï¼Œå…¨æ˜¯ç”Ÿæ´»ä¸­çš„æ™¯è±¡ä½œå“ï¼Œæ¸…æ–°çš„ç”Ÿæ´»æ°”æ¯å›¾ç‰‡ã€‚Pexelsï¼šæ ¹æ®è‹±æ–‡å…³é”®è¯æœç´¢å›¾ç‰‡ï¼Œè¿˜èƒ½æ ¹æ®ä¸åŒé¢œè‰²åˆ†ç±»æŸ¥æ‰¾ï¼ŒåŒ¹é…çš„å›¾ç‰‡å¤å¤è‡ªå¸¦æ»¤é•œï¼Œé£æ ¼ç®€çº¦ï¼Œå›¾ç‰‡è´¨é‡å¾ˆé«˜ï¼Œç´ æä¸°å¯Œã€‚VisualHuntï¼šå¯ä»¥é€šè¿‡é¢œè‰²æ¥æŸ¥æ‰¾å›¾ç‰‡ã€‚Photockï¼šå¤©ç©ºã€æ°´ã€æ²³ã€æµ·ã€è‰åªã€ç«ã€å±±ã€åŠ¨ç‰©ã€å»ºç­‘ã€å¤œæ™¯ã€æ—¥æœ¬æ™¯ç‚¹ã€æ—¥æœ¬å†å²æ–‡åŒ–å›¾ç‰‡ç­‰ç­‰ã€‚pngimgï¼šå…¨éƒ¨éƒ½æ˜¯æ— èƒŒæ™¯å›¾ç‰‡ï¼Œéå¸¸é€‚åˆé‚£äº›éœ€è¦pngé€æ˜åº•é…å›¾çš„ã€‚è€Œä¸”å®ƒåˆ†ç±»ä¹Ÿå¾ˆç»†ï¼Œæ‰¾èµ·æ¥æ–¹ä¾¿ã€‚Foodiesfeedï¼šä¸“æ³¨äºç¾é£Ÿçš„å›¾ç‰‡ç½‘ç«™ï¼Œé«˜æ¸…æ— æ°´å°ï¼Œæ ¹æ®åˆ†ç±»é€‰æ‹©åŒ¹é…å…³é”®è¯ã€‚Everypixelï¼šEverypixel æ˜¯ä¸€æ¬¾å¸®åŠ©ç”¨æˆ·å¯»æ‰¾å…è´¹å›¾ç‰‡ç´ æçš„æœç´¢å¼•æ“ï¼Œé€‰æ‹©å…è´¹æˆ–ä»˜è´¹ï¼Œåˆ©ç”¨AIå’Œå›¾ç‰‡åˆ†ææŠ€æœ¯ç­›é€‰å›¾ç‰‡ï¼Œå¹¶æŸ¥çœ‹å›¾ç‰‡æ¥æºç½‘ç«™ã€‚https://www.howtostartanllc.org/free-stock-photos/è¿™æ˜¯ä¸€ä¸ªæ±‡æ€»äº†å¾ˆå¤šä¸ªå…è´¹å›¾ç‰‡ç½‘ç«™çš„å¯¼èˆªã€‚02 äº‘åŒæ­¥å¤‡ä»½åŠŸèƒ½åšæœäº‘å¯ä»¥å®ç°æœ¬åœ°ä¸äº‘ç«¯å®æ—¶åŒæ­¥ï¼Œè¿˜å¸¦æœ‰å†å²ç‰ˆæœ¬å›é€€åŠŸèƒ½ã€‚ç¼ºç‚¹ï¼šæ¯æœˆä¸Šä¼ åªæœ‰1Gå®¹é‡ï¼Œåªèƒ½åŒæ­¥ä½“ç§¯è¾ƒå°çš„æ–‡ä»¶ã€‚äº¿æ–¹äº‘ï¼šå¯ä»¥å®ç°æœ¬åœ°ä¸äº‘ç«¯å®æ—¶åŒæ­¥ï¼Œè¿˜å¸¦æœ‰å†å²ç‰ˆæœ¬å›é€€åŠŸèƒ½ã€‚åŠŸèƒ½å’Œåšæœäº‘ç±»ä¼¼ã€‚å…¶ä»–Markdown ç®€å†æ’ç‰ˆ","categories":[],"tags":[{"name":"forme","slug":"forme","permalink":"https://longlongqin.github.io/tags/forme/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"å‡¸åŒ…æ€»ç»“","slug":"å­¦ä¹ ç¬”è®°/è®¡ç®—å‡ ä½•/Convex-Hull/å‡¸åŒ…æ€»ç»“","date":"2020-03-22T08:08:18.000Z","updated":"2020-04-19T14:38:29.547Z","comments":true,"path":"archives/bf113a1c.html","link":"","permalink":"https://longlongqin.github.io/archives/bf113a1c.html","excerpt":"","text":"å‡¸åŒ…çš„ç›¸å…³â€œtestâ€æµ‹è¯•ä¸€äº›å®šä¹‰ï¼šå‡¸åŒ…[Convex Hull]ï¼šç®€å•ç†è§£ä¸ºå°†å¾ˆå¤šé’‰å­å›´ä½çš„â€œçš®ç­‹â€ã€‚æç‚¹(Extreme Point)ï¼šæœ‰ä¸€ä¸ªç‚¹é›†Sã€‚å¦‚æœå­˜åœ¨é€šè¿‡ç‚¹Pçš„ç›´çº¿Lï¼Œä½¿å¾—ç‚¹é›†Sä¸­é™¤äº†ç‚¹Pä¹‹å¤–çš„å…¶ä»–çš„ç‚¹éƒ½åœ¨è¿™ä¸ªç›´çº¿çš„åŒä¸€ä¾§ï¼Œåˆ™è¿™ä¸ªç‚¹På°±æ˜¯æç‚¹(Extreme Points)ã€‚æè¾¹(Extreme Edge)ï¼šä¸¤ä¸ªæç‚¹è¿æˆçš„è¾¹ï¼Œå‰©ä½™çš„æ‰€æœ‰ç‚¹å‡ä¼šåœ¨è¯¥è¾¹çš„ä¸€ä¾§ã€‚To-Left TestTo-Leftæµ‹è¯•æ˜¯ç›¸å¯¹äºå¦å¤–è¿™ä¸¤ä¸ªç‚¹æ‰€ç¡®å®šçš„é‚£æ¡æœ‰å‘ç›´çº¿è€Œè¨€çš„ï¼Œä»»ä½•ä¸€æ¡æœ‰å‘ç›´çº¿ä¸ä»…ä¼šæŠŠå¹³é¢åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çŸ¥é“å“ªä¸€è¾¹æ˜¯å·¦è¾¹ï¼Œå“ªä¸€è¾¹æ˜¯å³è¾¹ã€‚To-Leftï¼Œå…¶å®å°±æ˜¯è¯´è¿™ä¸ªç‚¹ç›¸å¯¹äºåˆšæ‰çš„é‚£æ¡æœ‰å‘çº¿è€Œè¨€åˆ°åº•æ˜¯ä½äºå®ƒçš„å·¦ä¾§(å°±æ˜¯true)ï¼Œè¿˜æ˜¯å³ä¾§(å°±æ˜¯false)ã€‚è¿™é‡Œç”¨åˆ°äº†è¡Œåˆ—å¼æ¥æ±‚ä¸‰è§’å½¢é¢ç§¯ï¼ˆè¯·çœ‹ä¸‹é¢æ‰‹å†™è¯æ˜ï¼‰ã€‚ä¸‹å›¾ä¸­çš„è¿™ä¸ªè¡Œåˆ—å¼å®é™…ä¸Šç®—çš„æ˜¯å®ƒçš„â€é¢ç§¯(æŒ‡ï¼šæœ‰å‘é¢ç§¯ï¼‰â€çš„ä¸¤å€ã€‚12345678910bool ToLeft (Point p, Point q, Point s) //åˆ¤æ–­ç‚¹så¯¹äºçº¿æ®µpqçš„ä½ç½®&#123; return Area2(p,q,s);&#125;int Area2(Point p, Point q, Point s)&#123; return p.x*q.y - p.y*q.x + q.x*s.y - q.y*s.x +s.x * p.y - s.y *p.x;&#125;è¡Œåˆ—å¼æ¥æ±‚ä¸‰è§’å½¢é¢ç§¯çš„è¯æ˜ï¼šå›¾ç‰‡æ¥æºäºï¼šhttps://zhuanlan.zhihu.com/p/35543479In-Trangle Testå…¶å®è¿™ä¸ªç®—æ³•å°±æ˜¯åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨ä¸‰è§’å½¢å†…éƒ¨ã€‚è¿™ä¸ªæµ‹è¯•æœ€ç›´æ¥çš„ç†è§£ä¸ºï¼šä½¿ç”¨äº†ä¸‰æ¬¡To-Left Testï¼Œä¸‰è§’å½¢æœ‰ä¸‰æ¡è¾¹ï¼Œæ‰€ä»¥æ¯ä¸€æ¡è¾¹éƒ½æµ‹è¯•ä¸€æ¬¡ï¼šä¸‰æ¬¡To-Left Testç»“æœç›¸åŒçš„ï¼ˆå‡ä¸ºtrueæˆ–è€…æ˜¯falseï¼‰ï¼Œåˆ™è¯æ˜åœ¨ä¸‰è§’å½¢å†…éƒ¨ã€‚ä¸‰æ¬¡ç»“æœä¸­æœ‰ä¸€æ¬¡ä¸ç›¸åŒï¼Œåˆ™è¯æ˜åœ¨ä¸‰è§’å½¢å¤–éƒ¨ã€‚åˆ¤æ–­æè¾¹123456789101112 //åˆ¤æ–­æè¾¹çš„æ ¸å¿ƒvoid checkEdge(Point S[], int n, int p, int q)&#123; bool lEmpty =TRUE, REmpty = TRUE; for( int k=0; k&lt;n&amp;&amp;(LEmpty||REmpty); k++) &#123; if (k!=p &amp;&amp; k!=q) ToLeft(S[p], S[q], S[k]) ? LEmpty=FALSE: REmpty=FALSE; &#125; if(LEmpty || REmpty) S[p].extreme =S[q].extreme= TRUE;&#125;in-convex-polygon teståˆ¤å®šå¾…å®šç‚¹æ˜¯å¦ä½äºæŸå¤šè¾¹å½¢å†…éƒ¨ï¼ˆin-convex-polygon testï¼‰å®ç°çš„æ–¹æ³•å°±æ˜¯ï¼šæŒ‰ä¸€å®šæ–¹å‘ï¼ˆçº¦å®šä¸ºé€†æ—¶é’ˆï¼‰å‡¸åŒ…çš„æ¯æ¡è¾¹å’Œå¾…å®šç‚¹åšToLeft testï¼Œä¸€æ—¦æœ‰ä¸€æ¬¡testä¸ºfalseå°±è¯´æ˜æ”¹ç‚¹åœ¨å‡¸åŒ…å¤–é¢ã€‚æ„é€ å‡¸åŒ…çš„æ–¹æ³•1 åˆ©ç”¨æç‚¹æ³•123456789101112131415void extremePoint (point S[], int n)&#123; for(int s=0; s&lt;n; s++) S[s].extreme = TRUE; for(int p=0; p&lt;n; p++) for(int q=p+1; q&lt;n; q++) for(int r=q+1; r&lt;n; r++) for(int s=0; s&lt;n; s++) &#123; if(s==p || s==q || s==r ||!S[s].extreme) continue; if(Intriangle(S[p],S[q],S[r],S[s])) S[s].extreme = FALSE; &#125;&#125;æ—¶é—´å¤æ‚åº¦ï¼šO(n^4)2 åˆ©ç”¨æè¾¹æ³•1234567891011121314151617181920void markEEï¼ˆpoint S[], int nï¼‰&#123; for (int k=0;k&lt;n;k++) //å°†æ‰€æœ‰ç‚¹çš„åˆå§‹çŠ¶æ€éƒ½è®¾ç½®æˆï¼šéæç‚¹ S[K].extreme = FALSE; for (int p=0; p&lt;n; p++) //éå†æ¯æ¡è¾¹ï¼Œçœ‹ä»–æ˜¯å¦æ˜¯æè¾¹ for(q=p+1; q&lt;n; q++) checkEdge(S,n,p,q) //åˆ¤æ–­æè¾¹çš„æ ¸å¿ƒ&#125; //åˆ¤æ–­æè¾¹çš„æ ¸å¿ƒvoid checkEdge(Point S[], int n, int p, int q)&#123; bool lEmpty =TRUE, REmpty = TRUE; for( int k=0; k&lt;n&amp;&amp;(LEmpty||REmpty); k++) &#123; if (k!=p &amp;&amp; k!=q) ToLeft(S[p], S[q], S[k]) ? LEmpty=FALSE: REmpty=FALSE; &#125; if(LEmpty || REmpty) S[p].extreme =S[q].extreme= TRUE;&#125;æ—¶é—´å¤æ‚åº¦ï¼šO(n^3)3 incremental constructionï¼ˆå¢é‡æ„é€ ï¼‰è¯¦ç»†è®²è§£ï¼šhttps://www.longlongqin.github.io/archives/7c53.htmlè¯¥ç®—æ³•çš„æ ¸å¿ƒæ­¥éª¤å°±æ˜¯ï¼šå¤æ‚åº¦ O(n^2)åˆ¤å®šæ–°åŠ å…¥ç‚¹ä¸å‡¸åŒ…çš„ä½ç½®å…³ç³»ï¼šç”¨in-convex-polygon testin-convex-polygon teståœ¨ä¸Šé¢æœ‰è®²å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹ï¼šsupport-lineå¦‚ä¸Šé¢çš„ç‚¹xï¼Œå¦‚ä½•æ’å…¥ç°æœ‰å‡¸åŒ…å½“ä¸­å‘¢ï¼Ÿæ’å…¥è¿‡ç¨‹ï¼šæ’å…¥è¿‡ç¨‹å…¶å®å°±æ˜¯å¯»æ‰¾ä¸¤ä¸ªè¿æ¥ç‚¹så’Œtï¼Œç„¶åå°†æ–°ç‚¹xä¸tã€såˆ†åˆ«è¿æ¥å¾—åˆ°æ–°çš„å‡¸åŒ…ã€‚tã€sä¸¤ä¸ªç‚¹å°†åŸå‡¸åŒ…çš„è¾¹ç•Œåˆ†æˆä¸¤éƒ¨åˆ†ï¼šstå’Œtsä¸¤ä¸ªé‚®ç®±çº¿æ®µã€‚æ„é€ æ–°å‡¸åŒ…å°±è¦ä¿ç•™è¿œç«¯stï¼Œèˆå¼ƒè¿‘ç«¯tsã€‚å–ä»£tsçš„æ˜¯xå’Œsã€tçš„è¿æ¥çº¿xtå’Œxsã€‚å…¶ä¸­xtã€xsè¢«ç§°ä¸ºåˆ‡çº¿ï¼ˆtangentï¼‰æˆ–è€…support lineï¼ˆæ”¯æ’‘çº¿ï¼‰ã€‚ï¼ˆé…åˆä¸‹å›¾ç†è§£ï¼‰ç°åœ¨å°±æ˜¯å¦‚ä½•æ‰¾åˆ°tã€sè¿™ä¸¤ä¸ªç‚¹ï¼Ÿåœ¨å‡¸åŒ…ä¸Šä»»å–ä¸€ç‚¹vï¼ŒæŒ‰é€†æ—¶é’ˆæ–¹å‘vç‚¹ä¼šæœ‰ä¸€ä¸ªç›´æ¥å‰é©±ç‚¹å’Œç›´æ¥åç»§ç‚¹ã€‚è€ƒå¯Ÿæœ‰å‘ç›´çº¿xvä¸ç‚¹vç›´æ¥å‰é©±å’Œç›´æ¥åç»§çš„ä½ç½®å…³ç³»ï¼ˆä¸¤æ¬¡to left testï¼‰ï¼Œè®°ä¸ºä¸€ä¸ªpatternè¡¨ã€‚ã€ç»“æœæ— éæ˜¯å››ç§æƒ…å†µï¼švçš„ç›´æ¥å‰é©±å’Œç›´æ¥åç»§ç›¸å¯¹äºæœ‰å‘ç›´çº¿xvçš„ä½ç½®æ˜¯RLï¼ŒLRï¼ŒLLï¼ŒRRã€‚ä¾‹å¦‚ä¸Šå›¾é»„è‰²ç‚¹vï¼Œæ˜¯Rå’ŒLï¼›è“è‰²ç‚¹våˆ†åˆ«æ˜¯Lå’ŒRã€‚å®é™…ä¸Šå‡¸åŒ…è¾¹ç•Œstä¸Šæ‰€æœ‰ç‚¹çš„patternéƒ½ä¸ºRLï¼Œtsä¸Šæ‰€æœ‰ç‚¹çš„patternéƒ½ä¸ºLRã€‚å…³é”®ç‚¹åœ¨äºï¼šç‚¹Sçš„patternæ˜¯LLï¼Œç‚¹tçš„patternä¸ºRRã€‚ã€‘è¯´äº†è¿™ä¹ˆå¤šï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„ä¸¤æ­¥åˆä¸ºä¸€æ­¥ï¼šå¯¹äºæ¯ä¸ªå¾…å®šç‚¹xï¼Œä¸å¿…ç‰¹æ„å»è€ƒè™‘å®ƒä¸å‡¸åŒ…çš„ä½ç½®å…³ç³»ï¼Œè€Œæ˜¯éå†å‡¸åŒ…ä¸Šæ¯ä¸€ä¸ªç‚¹ã€‚å¯¹äºå‡¸åŒ…è¾¹ç•Œä¸Šçš„æ¯ä¸€ä¸ªç‚¹ï¼Œæˆ‘ä»¬éƒ½èƒ½é€šè¿‡ä¸¤æ¬¡to left testè¿…é€Ÿåˆ¤æ–­å‡ºpatternã€‚å¯¹äºxä½äºå‡¸åŒ…å¤–éƒ¨çš„æƒ…å†µï¼Œç»è¿‡éå†å‡¸åŒ…çš„ç‚¹ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å¾—åˆ°så’Œtçš„ä½ç½®ï¼Œå¾—åˆ°ä¸¤æ¡support lineï¼Œä»è€Œæ„é€ å‡ºæ–°çš„å‡¸åŒ…ï¼›è€Œå¯¹äºxä½äºå‡¸åŒ…å†…éƒ¨çš„æƒ…å†µï¼Œå‡¸åŒ…è¾¹ç•Œæ¯ä¸ªç‚¹éƒ½ä¸å¯èƒ½å‡ºç°RRæˆ–LLçš„æƒ…å†µï¼Œç›´æ¥èˆå¼ƒxå³å¯ã€‚4 Jarvis Marchè¯¦ç»†è®²è§£ï¼šhttps://longlongqin.github.io/archives/9c7f.htmlåˆç§°ï¼šGift Wrappingç®—æ³•æ­¥éª¤ï¼šåˆå§‹åŒ–æ‰€æœ‰ç‚¹ï¼Œè®¾ç½®ç‚¹é›†çš„åˆæ€ä¸º éæç‚¹æ‰¾åˆ°å¼€å§‹çš„ç¬¬ä¸€ä¸ªæç‚¹ï¼šç”¨LTLæ–¹æ³•å¯»æ‰¾ä¸‹ä¸€ä¸ªæç‚¹ï¼šç”¨ToLeft testå¯»æ‰¾ä¸‹ä¸€ä¸ªæç‚¹å¾ªç¯æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°æ‰€æœ‰æç‚¹ä¹Ÿå°±æ˜¯ï¼šé¦–å…ˆä»ä»»ä½•ä¸€ä¸ªæç‚¹ï¼ˆç”¨LTLç¡®å®šï¼‰å¼€å§‹ï¼Œç„¶åæ‰¾åˆ°ä¸€æ¡ä»¥è¿™ä¸ªæç‚¹ä¸ºç«¯ç‚¹çš„æè¾¹ã€‚ç„¶åæ²¿ç€è¿™ä¸ªæè¾¹çš„å¦ä¸€ä¸ªç«¯ç‚¹ï¼ˆendpointï¼‰å‡ºå‘ï¼Œå†æ‰¾å‡ºä¸‹ä¸€æ¡æè¾¹ã€‚å¦‚æ­¤åå¤æ“ä½œï¼Œæœ€ç»ˆä¼šæ‰¾åˆ°ä¸€æ¡ä»¥æœ€åˆæç‚¹ä¸ºendpointçš„æè¾¹ï¼Œå¾—åˆ°ä¸€ä¸ªå°é—­çš„ç¯ï¼Œå‡¸åŒ…ä¹Ÿæ„é€ å®Œæˆã€‚123456789101112131415161718192021222324252627282930313233int LTL(Point S[], int n) //å¯»æ‰¾æœ€ä¸‹andæœ€å·¦çš„ç‚¹ä½œä¸ºç¬¬ä¸€ä¸ªæç‚¹&#123; int ltl = 0; for (int k=1; k&lt;n; k++) &#123; if(S[k].y &lt; S[ltl].y || (S[k].y==S[ltl].y &amp;&amp; S[k].x&lt;S[ltl].x) ) ltl = k; &#125; return ltl;&#125;void Javis (Point S[], int n)&#123; for (int k=0; k&lt;n; k++) S[k].extreme=FALSE; //1.å°†æ‰€æœ‰ç‚¹æ ‡è®°ä¸ºéæç‚¹ int ltl = LTL(S, n); //2.æ‰¾åˆ°ltl int k = ltl; do &#123; S[k].extreme = true; int s = -1; //è¦æ‰¾çš„ä¸‹ä¸€ä¸ªæç‚¹ç”¨sè¡¨ç¤º for (int t=0; t&lt;n; t++) &#123; if (t!=k &amp;&amp; t!=s &amp;&amp; ( s==-1 || !ToLeft(S[K],S[s],S[t]) ) ) s = t; &#125; S[k].succ = s; //æ–°çš„æè¾¹ç¡®å®š k = sï¼› //æ›´æ–°kçš„å€¼ï¼Œå˜ä¸ºä¸‹ä¸€æ¬¡æŸ¥æ‰¾çš„è¾¹çš„èµ·ç‚¹ &#125; while(k != ltl) //å¦‚æœå¾ªç¯å›åˆ°äº†åŸæ¥çš„ç‚¹ï¼Œåˆ™ç»“æŸ&#125;å¤æ‚åº¦ï¼šJarvis Marchç®—æ³•ç®—æ³•çš„å¤æ‚åº¦æ›´å‡†ç¡®çš„è¡¨ç¤ºä¸ºO(nh)ã€‚hï¼ˆå‡¸åŒ…è¾¹ç•Œçš„ç‚¹çš„ä¸ªæ•°ï¼‰åˆç”±æœ€ç»ˆè¾“å‡ºç»“æœï¼Œå³å‡¸åŒ…æœ¬èº«æ¥å†³å®šï¼Œè¾“å‡ºç»“æœå†³å®šäº†æ„é€ è¿‡ç¨‹çš„å¤æ‚åº¦ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œè¾“å‡ºæ•æ„Ÿæ€§â€ã€‚è¿™ç§ç±»å‹çš„ç®—æ³•åˆè¢«ç§°ä¸ºoutput sensitive algorithmã€‚è¿™ç§ç‰¹æ€§åœ¨å…¶å®ƒå‡¸åŒ…ç®—æ³•ä¸­ä¹Ÿä¼šä½“ç°ã€‚5 Graham Scanè¯¦ç»†è®²è§£ï¼›https://longlongqin.github.io/archives/3478.htmlç®—æ³•æµç¨‹ï¼šé¢„æ’åº(presorting)ï¼šå³æ‰¾åˆ°æŸä¸ªåŸºå‡†ç‚¹ï¼Œç„¶åå°†å…¶ä½™æ‰€æœ‰çš„ç‚¹æŒ‰ç…§ç›¸å¯¹äºåŸºå‡†ç‚¹çš„æåæ ‡æ’åºã€‚å®ƒä¸»è¦åšäº†ä¸‰ä¸ªäº‹æƒ…ï¼š1ã€æ‰¾å‡ºåŸºå‡†ç‚¹ï¼šç”¨lowest-then-leftmost pointï¼ˆLTLï¼‰ï¼Œç„¶åå¯¹å…¶ä»–ç‚¹æŒ‰ç…§æåæ ‡æ’åºï¼šæ ¹æ®æè§’æ’åºçš„æ–¹æ³•ï¼Œåœ¨ï¼šï¼ˆhttps://longlongqin.github.io/archives/510d.html#è¡¥ï¼šæ ¹æ®æè§’æ’åºï¼‰2ã€æ‰¾å‡ºèµ·å§‹è¾¹ï¼šä»æ’å¥½åºçš„ç‚¹é›†ï¼Œé€‰å–å‰ä¸¤ä¸ªç‚¹ï¼Œå°±æ˜¯èµ·å§‹è¾¹ã€‚3ã€å°†èµ·å§‹è¾¹ ä¸ å‰©ä¸‹çš„n-2æ¡è¾¹åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„æ ˆ(stack)ä¸­ï¼šå¦‚ä¸‹å›¾Scanæ‰«æè¿™ä¸€æ­¥æ˜¯ç®—æ³•çš„æ ¸å¿ƒã€‚scançš„è¿‡ç¨‹ä¸»è¦å…³æ³¨ä¸‰ä¸ªç‚¹ï¼šæ ˆSçš„æ ˆé¡¶ï¼ˆS[0]ï¼‰ã€æ¬¡æ ˆé¡¶ï¼ˆS[1]ï¼‰å’Œæ ˆTçš„æ ˆé¡¶ï¼ˆT[0]ï¼‰ã€‚ä¹Ÿå°±ä¸‹å›¾çº¢è‰²æ ‡æ³¨çš„ä¸‰ä¸ªç‚¹ï¼šå¯ä»¥è§‚å¯Ÿåˆ°ï¼Œæ¯æ¬¡å¾…å¤„ç†çš„S[0]å’ŒS[1]æ„æˆçš„è¾¹ä¸€å®šæ˜¯ä¸€æ¡æè¾¹ï¼ˆå¦‚ä¸Šå›¾ç‚¹1å’Œç‚¹2ï¼‰ï¼Œç®—æ³•å…³é”®æ­¥éª¤å°±æ˜¯å¯¹è¾¹è¿™æ¡æè¾¹å’ŒT[0]åšto left testï¼Œåˆ¤æ–­T[0]ä½äºè¾¹S[0]S[1]çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ã€‚è‹¥åœ¨å·¦è¾¹åˆ™ç»§ç»­æ‹“å±•ï¼Œè‹¥åœ¨å³è¾¹åˆ™å¦å®šæ‰æ­¤å‰è®¤å®šçš„æè¾¹ã€‚æ— è®ºç»“æœå¦‚ä½•ï¼Œæ¯æ¬¡åˆ¤å®šéƒ½ä¼šå°†é—®é¢˜è§„æ¨¡ç¼©å°ä¸€ä¸ªå•å…ƒï¼Œç®—æ³•ç»“æŸæ—¶Tæœ€ç»ˆè‚¯å®šä¸ºç©ºã€‚Tç©ºåï¼ŒSä¸­å­˜ç•™ä¸‹çš„ç‚¹æ­£æ˜¯å‡¸åŒ…çš„æç‚¹ï¼Œè¿™äº›ç‚¹è‡ªåº•è€Œä¸Šæ­£æ˜¯å‡¸åŒ…è¾¹ç•Œç‚¹çš„é€†æ—¶é’ˆéå†ï¼Œä¹Ÿå¾—åˆ°äº†æ•´ä¸ªå‡¸åŒ…æ„é€ é—®é¢˜çš„è§£ã€‚å¤æ‚åº¦ï¼šGraham Scanç®—æ³•å¤æ‚åº¦ç”±ä¸‰éƒ¨åˆ†å†³å®šï¼špersortingï¼Œé‡‡ç”¨ä¸€èˆ¬æ’åºç®—æ³•ï¼Œå¤æ‚åº¦æ˜¯O(nlogn)é€æ­¥è¿­ä»£ï¼ŒO(n)ï¼šç®—æ³•ä¸€æ­¥æ­¥çº³å…¥æ–°ç‚¹ï¼Œä¼šè¿­ä»£næ­¥ã€‚scanï¼ŒO(?)æ‰€ä»¥ç®—æ³•çš„æ€»ä½“å¤æ‚åº¦ï¼šO(nlogn + n * ?) ï¼Œå¯è§scançš„å¤æ‚åº¦å†³å®šäº†ç®—æ³•æ€»ä½“çš„å¤æ‚åº¦ã€‚ç®—æ³•ä¸€æ­¥æ­¥çº³å…¥æ–°ç‚¹ï¼Œä¼šè¿­ä»£næ­¥ã€‚ä½†æ˜¯åœ¨æ¯ä¸ªç‚¹ä¸Šéƒ½æœ‰å¯èƒ½åšå›æº¯æ“ä½œï¼Œæ‰€ä»¥scançš„å¤æ‚åº¦æ˜¯ä¸ç¡®å®šçš„ã€‚æˆ‘ä»¬æ¥ä»¥ä¸Šå›¾æœ€åæƒ…å†µä¸ºä¾‹ï¼Œåˆ°ç¬¬8ä¸ªç‚¹æ—¶åˆ¤å®šä¸ºfalseï¼Œèˆå¼ƒç‚¹7ï¼Œå›æº¯ã€‚ä¸‹ä¸€æ­¥åˆ¤æ–­ä¹Ÿä¸ºfalseï¼Œèˆå¼ƒç‚¹6ï¼Œå›æº¯ã€‚å¦‚æ­¤å›æº¯ç›´åˆ°ç®—æ³•å¼€å§‹çš„ç‚¹2ã€‚è¿™æ¬¡scanå€’é€€äº†é«˜è¾¾O(n)ä¸ªç‚¹ï¼Œå¦‚æœæ¯æ¬¡scanéƒ½æ˜¯å¦‚æ­¤é‚£ä¹ˆç®—æ³•æ•´ä½“å¤æ‚åº¦å°±ä¸ºï¼šO(nlogn + n * n) = O(n^2)äº†ï¼Œé‚£è¿™ç§ç®—æ³•çš„æ„ä¹‰ä¹Ÿå°±ä¸å¤§äº†ã€‚å…¶å®ä¸Šè¿°åˆ†æå¹¶éé”™è¯¯ï¼Œåªæ˜¯ä¸å¤Ÿç²¾ç¡®ã€‚O(n^2)ç¡®å®æ˜¯Graham Scanç®—æ³•çš„ä¸€ä¸ªä¸Šç•Œï¼Œä½†æ˜¯è¿™ä¸ªä¸Šç•Œå¹¶ä¸æ˜¯ç´§çš„ã€‚é—®é¢˜å°±å‡ºåœ¨åˆ†æå‡å®šäº†æ¯æ¬¡éƒ½ä¼šå‡ºç°å›é€€é«˜è¾¾O(n)ä¸ªç‚¹ã€‚ä»£ç éƒ¨åˆ†ï¼šhttps://longlongqin.github.io/archives/d4fa.html6 [Divide And Conquer]è¯¦ç»†è®²è§£ï¼šhttps://longlongqin.github.io/archives/f32f.html","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"å‡¸åŒ…","slug":"å‡¸åŒ…","permalink":"https://longlongqin.github.io/tags/%E5%87%B8%E5%8C%85/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"è¯»ä¹¦ç¬”è®°","slug":"ç¨‹åºå‘˜ç»ƒçº§æ”»ç•¥2018","date":"2020-03-21T17:42:57.000Z","updated":"2020-04-19T14:35:43.395Z","comments":true,"path":"archives/7b67faab.html","link":"","permalink":"https://longlongqin.github.io/archives/7b67faab.html","excerpt":"","text":"é™ˆçš“â€”â€”ç¨‹åºå‘˜ç»ƒçº§æ”»ç•¥æåŠçš„ä¹¦ç±&amp;æ‰‹å†Œç­‰ä¹¦ç±åˆ—è¡¨ï¼šhttps://github.com/git-zjx/programmer_training_strategy","categories":[],"tags":[],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://longlongqin.github.io"}},{"title":"hexoä¸­æ’å…¥pdf","slug":"Hexoåšå®¢æ­å»º/hexoä¸­æ’å…¥pdf","date":"2020-03-20T19:10:35.000Z","updated":"2020-04-19T14:38:29.545Z","comments":true,"path":"archives/448ac7f1.html","link":"","permalink":"https://longlongqin.github.io/archives/448ac7f1.html","excerpt":"æ³•1ï¼šå®‰è£…hexo-pdfæ’ä»¶æ³•2ï¼šåˆ©ç”¨htmlè¯­æ³•ï¼šå¯ä»¥è½»æ¾è®¾å®šå°ºå¯¸","text":"æ³•1ï¼šå®‰è£…hexo-pdfæ’ä»¶æ³•2ï¼šåˆ©ç”¨htmlè¯­æ³•ï¼šå¯ä»¥è½»æ¾è®¾å®šå°ºå¯¸å®‰è£…hexo-pdfæ’ä»¶hexo-pdfHexo tag for embeded pdfInstall1$ npm install --save hexo-pdfNormal PDFpdfé“¾æ¥1&#123;% pdf http:&#x2F;&#x2F;7xov2f.com1.z0.glb.clouddn.com&#x2F;bash_freshman.pdf %&#125;æœ¬åœ°ï¼ˆæˆ‘çš„å¤±è´¥äº†ï¼Œè¿˜æ²¡æ‰¾åˆ°åŸå› ï¼‰1&#123;% pdf .&#x2F;bash_freshman.pdf %&#125;Google drive1&#123;% pdf https:&#x2F;&#x2F;drive.google.com&#x2F;file&#x2F;d&#x2F;0B6qSwdwPxPRdTEliX0dhQ2JfUEU&#x2F;preview %&#125;Slideshare1&#123;% pdf http:&#x2F;&#x2F;www.slideshare.net&#x2F;slideshow&#x2F;embed_code&#x2F;key&#x2F;8Jl0hUt2OKUOOE %&#125;ç¤ºä¾‹ï¼šå›¾ç‰‡æ¥æºäºç½‘ç»œåˆ©ç”¨htmlè¯­æ³•é¦–å…ˆä¿®æ”¹_config.ymlæ–‡ä»¶å°†_config.ymlä¸­çš„post_asset_folderé€‰é¡¹ç½®ä¸ºtrue1post_asset_folder: trueå…³äºè¿™ä¸ªé€‰é¡¹çš„åŠŸèƒ½è¯´æ˜å¦‚ä¸‹:å½“æ‚¨è®¾ç½®post_asset_folderä¸ºtrueå‚æ•°åï¼Œåœ¨å»ºç«‹æ–‡ä»¶æ—¶ï¼ŒHexoä¼šè‡ªåŠ¨å»ºç«‹ä¸€ä¸ªä¸æ–‡ç« åŒåçš„æ–‡ä»¶å¤¹ï¼Œæ‚¨å¯ä»¥æŠŠä¸è¯¥æ–‡ç« ç›¸å…³çš„æ‰€æœ‰èµ„æºéƒ½æ”¾åˆ°é‚£ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œæ‚¨ä¾¿å¯ä»¥æ›´æ–¹ä¾¿çš„ä½¿ç”¨èµ„æºã€‚ç„¶åæ–°å»ºä¸€ç¯‡æ–‡ç« 1$ hexo newç”±äºä¸Šä¸€æ­¥å·²ç»å°†post_asset_folderé€‰é¡¹è®¾ä¸ºäº†trueæ‰€ä»¥è¿™ä¸€æ­¥æ–°å»ºæ–‡ç« æ—¶ä¼šåˆ›å»ºä¸€ä¸ªmdæ–‡ä»¶å’Œä¸€ä¸ªåŒåçš„æ–‡ä»¶å¤¹ä¸ºäº†æ–¹ä¾¿å™è¿°ï¼Œæˆ‘ç”¨testä½œä¸ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹åç¼–è¾‘test.mdç”¨vimæˆ–è€…åˆ«çš„ç¼–è¾‘å™¨æ‰“å¼€test.mdtest.mdæ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç &lt;object data=&quot;./test/test.pdf&quot; type=&quot;application/pdf&quot; width=&quot;100%&quot; height=&quot;100%&quot;&gt;å…³äºè¿™å¥ä»£ç ç®€å•çš„è§£é‡Šdataè¡¨ç¤ºä½ è¦ä¸Šä¼ çš„pdfçš„è·¯å¾„,ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œå°†ä½ è¦ä¸Šä¼ çš„pdfæ”¾å…¥ç¬¬äºŒæ­¥ç”Ÿæˆçš„testæ–‡ ä»¶å¤¹typeå’Œwidthå°±ä¸è¯´äº†ï¼Œè¿™é‡Œæ³¨æ„heightä¸èƒ½è®¾æˆ100%ï¼Œä¸ç„¶å¤ªçŸ®äº†ï¼Œæ˜¾ç¤ºæ•ˆæœä¸å¥½å¯ä»¥ç”¨æµè§ˆå™¨é¢„è§ˆï¼Œé€šè¿‡F12é¢„ä¼°ä¸€ä¸‹é«˜åº¦ã€‚æˆ‘æœ€åä»£ç å¦‚ä¸‹ï¼Œä¾›å‚è€ƒ&lt;object data=&quot;https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/PDF/Google_Cpp_Style_guide_CN.pdf &quot; type=&quot;application/pdf&quot; width=&quot;100%&quot; height=&quot;877px&quot;&gt;è¿™é‡Œä¸ä¸€å®šéç”¨objectæ ‡ç­¾ï¼Œembedã€iframeæ ‡ç­¾ä¹Ÿä¸€æ ·å…·ä½“å‚è€ƒ:ç½‘é¡µé“¾æ¥æ³¨æ„ï¼šç”¨htmlæ–¹æ³•ï¼Œåœ¨æˆ‘çš„ä¸»é¢˜ä¸­ï¼Œå¦‚æœå®ƒåé¢æœ‰æ–‡å­—ï¼Œä¼šæ˜¾ç¤ºä¸å‡ºæ¥ï¼ŒåŸå› ä¸è¯¦ã€‚æ‰€ä»¥å®ä¾‹æˆ‘æ”¾åœ¨æ–‡ç« åº•éƒ¨å±•ç¤ºäº†å‚è€ƒæ–‡ç« hexo-pdfå®˜æ–¹æ•™ç¨‹hexoä¸­æ’å…¥pdfè§£å†³æ–¹æ³•ç›¸å…³æ–‡ç« theme-hexo-pdfä½¿ç”¨æŠ€å·§â€”-è§£å†³hexo-pdfæ–‡ä»¶æ˜¾ç¤ºä¸å…¨çš„é—®é¢˜","categories":[{"name":"hexoåšå®¢æ­å»º","slug":"hexoåšå®¢æ­å»º","permalink":"https://longlongqin.github.io/categories/hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"}],"tags":[{"name":"hexoæ˜¾ç¤ºpdf","slug":"hexoæ˜¾ç¤ºpdf","permalink":"https://longlongqin.github.io/tags/hexo%E6%98%BE%E7%A4%BApdf/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"LearnCpp chapter1","slug":"C&C++/LearnCpp-chapter1","date":"2020-03-18T15:35:37.000Z","updated":"2020-04-19T14:38:29.545Z","comments":true,"path":"archives/a0a78e77.html","link":"","permalink":"https://longlongqin.github.io/archives/a0a78e77.html","excerpt":"LearnCpp-chapter1https://www.learncpp.com","text":"LearnCpp-chapter1https://www.learncpp.com0.5 ä»‹ç»compiler, linker, and librariesStep 4: Compiling your source codeä¸ºäº†ç¼–è¯‘C++ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç¼–è¯‘å™¨ã€‚ç¼–è¯‘å™¨ä¸»è¦æ˜¯å¯¹æ¯ä¸€ä¸ª.cppæ–‡ä»¶åšä¸¤ä»¶äº‹æƒ…ï¼šå®ƒæ£€æŸ¥ä½ çš„ä»£ç æ˜¯å¦ç¬¦åˆC++çš„è§„åˆ™ã€‚å¦‚æœä¸ç¬¦åˆï¼Œå°±ä¼šæŠ¥é”™ï¼ˆåŒæ—¶è¿”å›ç›¸åº”çš„è¡Œå·ï¼‰æ¥å¸®åŠ©ä½ ç¡®å®šä»€ä¹ˆéœ€è¦ä¿®æ”¹ï¼ŒåŒæ—¶åœæ­¢ç¼–è¯‘å®ƒå°†C++æºä»£ç ç¿»è¯‘æˆæœºå™¨ä»£ç æ–‡ä»¶ï¼ˆå«åšï¼šobject fileï¼‰ã€‚object fileçš„åå­—é€šå¸¸æ˜¯è¿™ç§å½¢å¼ï¼šname*.o* æˆ–è€… *name.obj***ï¼ˆå…¶ä¸­nameä¸.cppæ–‡ä»¶çš„nameæ˜¯å¯¹åº”çš„ï¼‰ã€‚ä¾‹å¦‚ï¼šä¸‹é¢çš„ä¸‰ä¸ª.cppçš„æºæ–‡ä»¶ï¼Œç¼–è¯‘ä¹‹åå½¢æˆï¼šStep 5: Linking object files and librariesç¼–è¯‘å™¨compiler **ç¼–è¯‘å®Œæˆåï¼Œç”Ÿæˆè‹¥å¹²çš„ object filesã€‚æ¥ä¸‹æ¥å°±éœ€è¦é“¾æ¥å™¨Linker**å‡ºé©¬äº†ã€‚linkerçš„å·¥ä½œä¸»è¦æœ‰ä¸‰æ–¹é¢ï¼šå°†æ‰€æœ‰çš„object filesï¼ˆç¼–è¯‘ä¹‹åç”Ÿæˆçš„ï¼‰åˆå¹¶æˆä¸ºä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºexecutable programæ­¤å¤–ï¼Œlinkerè¿˜å¯ä»¥é“¾æ¥åº“æ–‡ä»¶library filesï¼ˆlibrary filesæ˜¯ä¸€ä¸ªå·²ç»é¢„ç¼–è¯‘å¥½çš„ä»£ç ç»è¿‡â€œæ‰“åŒ…â€ï¼Œåœ¨å…¶ä»–ç¨‹åºä¸­é‡ç”¨ï¼‰C++æœ‰æœ‰ä¸€ä¸ªæ‰©å……çš„åº“ï¼Œå«åšï¼šæ ‡å‡†åº“C++ Standard Libraryã€‚å®ƒæä¾›é¢å¤–çš„åŠŸèƒ½æ€§åº“ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„iostream libraryä½ å¯ä»¥æœ‰é€‰æ‹©æ€§çš„å»é“¾æ¥å…¶ä»–åº“ï¼Œæ¯”å¦‚å½“ä½ æƒ³å†™ä¸€ä¸ªæ’­æ”¾å£°éŸ³çš„ç¨‹åºã€‚ä½ è‚¯å®šä¸æƒ³ä»å¤´åˆ°å°¾çš„å»å†™å¦‚ä½•å»è¯»å–æ–‡ä»¶ã€æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æœ‰æ•ˆâ€¦.. è¿™æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸‹è½½ç›¸å…³çš„åº“è¿›è¡Œåˆ©ç”¨å°±æ–¹ä¾¿å¾ˆå¤šäº†ã€‚è¿æ¥å™¨ä¼šç¡®ä¿æ‰€æœ‰çš„è·¨æ–‡ä»¶ä¾èµ–é¡¹éƒ½æ­£ç¡®çš„è§£æäº†ã€‚ä¾‹å¦‚ï¼šå¦‚æœä½ åœ¨ä¸€ä¸ª.cppæ–‡ä»¶ä¸­å®šä¹‰äº†â€Aâ€ï¼Œç„¶ååœ¨å¦ä¸€ä¸ª.cppæ–‡ä»¶ä¸­å»ä½¿ç”¨â€Aâ€ã€‚linkerå°±ä¼šå°†è¿™ä¸¤ä¸ªæ–‡ä»¶è”ç³»èµ·æ¥ã€‚å¦‚æœé“¾æ¥ä¸æˆåŠŸï¼Œå°±ä¼šæŠ¥é”™å¹¶ä¸”è¿æ¥ç»ˆæ­¢åªè¦linkeræˆåŠŸçš„å®Œæˆæ‰€æœ‰çš„â€œobject files å’Œ libraries â€çš„é“¾æ¥å·¥ä½œï¼Œä½ å°±ä¼šå¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶åä½ å°±å¯ä»¥è¿è¡Œå®ƒã€‚Makefileã€æ³¨ã€‘æœ‰äº›å¼€å‘ç¯å¢ƒä½¿ç”¨Makefileï¼Œå®ƒæ˜¯ä¸€ä¸ªæè¿°å¦‚ä½•æ„å»ºä¸€ä¸ªç¨‹åºçš„æ–‡ä»¶ï¼ˆå“ªä¸€ä¸ªæ–‡ä»¶è¦ç¼–è¯‘&amp;é“¾æ¥ï¼Œæˆ–è€…ä»¥ä¸åŒæ–¹å¼å¤„ç†ï¼‰å®ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ã€‚ä½†æ˜¯åœ¨æœ¬ç³»åˆ—è¯¾ç¨‹æˆ‘ä»¬ä¸å›å»è®²è§£å®ƒã€‚Steps 6 &amp; 7: Testing and Debuggingå¦‚æœä½ çš„å¯æ‰§è¡Œç¨‹åºæ²¡æœ‰æŒ‰ç…§é¢„æœŸçš„å·¥ä½œï¼Œé‚£ä¹ˆä½ å°±éœ€è¦è°ƒè¯•ã€‚Integrated development environments (IDEs)ã€noteã€‘step3ã€4ã€5ã€7ï¼ˆeditor, compiler, linker, debuggerï¼‰éƒ½æ˜¯éœ€è¦è½¯ä»¶çš„ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥æ¯ä¸€éƒ¨åˆ†éƒ½æ˜¯ç”¨ç‹¬ç«‹çš„è½¯ä»¶ï¼Œä½†æ˜¯æœ‰è¿™æ ·çš„ä¸€ä¸ªè½¯ä»¶åŒ…ï¼šintegrated development environment (IDE)é›†æˆå¼€å‘ç¯å¢ƒ å°†ä¸Šé¢å››æ­¥ä¸€ä½“åŒ–ã€‚0.6 compling your first programConsole projectsæ§åˆ¶å°é¡¹ç›®æ²¡æœ‰graphical user interface (GUI)å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼Œå®ƒåœ¨æ§åˆ¶å°ä¸­æ‰“å°textï¼Œä»è¾“å…¥è®¾å¤‡é”®ç›˜è¯»å–ä¿¡æ¯ã€‚å¹¶ä¸”è¢«ç¼–è¯‘æˆç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚Workspaces / solutionså½“åˆ›å»ºä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œè®¸å¤šIDEä¼šè‡ªåŠ¨ç»™è¿™ä¸ªé¡¹ç›®åˆ›å»ºä¸€ä¸ª â€œworkspaceâ€ æˆ– â€œsolutionâ€ ã€‚workspace or solutionï¼šæ˜¯ä¸€ä¸ªå¯ä»¥å®¹çº³å¤šä¸ªç›¸å…³çš„é¡¹ç›®çš„containerã€‚ï¼ˆä¾‹å¦‚ï¼Œä½ æ­£åœ¨å†™ä¸€ä¸ªæ¸¸æˆï¼Œä½ æƒ³æœ‰ä¸€ä¸ªå•äºº ä¸ å¤šäººåˆ†å¼€çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‚£å°±éœ€è¦åˆ›å»ºä¸¤ä¸ªé¡¹ç›®ã€‚ä½†æ˜¯å°†è¿™ä¸¤ä¸ªé¡¹ç›®åˆ†å¼€å§‹æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºå®ƒä»¬å±äºåŒä¸€ä¸ªæ¸¸æˆçš„ã€‚æ‰€ä»¥ï¼Œæœ€å¥½çš„å°±æ˜¯æ¯ä¸€ä¸ªéƒ½è¢«é…ç½®ä¸ºå•ä¸ªå·¥ä½œç©ºé—´/è§£å†³æ–¹æ¡ˆä¸­çš„ ä¸€ä¸ªå•ç‹¬é¡¹ç›®ã€‚ï¼‰0.8 C++ä¸­å¸¸è§é—®é¢˜General run-time issueså½“æ‰§è¡Œç¨‹åºæ—¶ï¼Œæ§åˆ¶å°çª—å£é—ªçƒï¼Œç„¶åç«‹å³å…³é—­ï¼Ÿ1ã€é¦–å…ˆç¡®ä¿ä¸‹é¢çš„è¿™å‡ è¡Œåœ¨ä½ çš„æºç¨‹åºçš„æœ€ä¸Šéƒ¨ï¼ˆvisio studio ç”¨æˆ·ï¼Œè¯·ç¡®è®¤å¦‚æœæœ‰ #include â€œpch.hâ€ or #include â€œstdafx.hâ€ ï¼Œé‚£ä¹ˆè®©å®ƒåœ¨æœ€é¡¶é¡¶é¡¶éƒ¨çš„ï¼‰12#include &lt;iostream&gt;#include &lt;limits&gt;2ã€åœ¨main()å‡½æ•°ä¸­çš„ç»“æŸéƒ¨åˆ†ï¼ˆä½†è¦åœ¨return è¯­å¥ä¹‹å‰ï¼‰æ·»åŠ å¦‚ä¸‹ï¼š12345std::cin.clear(); // reset any error flagsstd::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n'); // ignore any characters in the input buffer until we find an enter characterstd::cin.get(); // get one more char from the useré¿å…ä½¿ç”¨ï¼šsystem(&quot;pause&quot;) å› ä¸ºå®ƒåªèƒ½åœ¨ç‰¹å®šçš„æ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨è¿è¡Œç¨‹åºï¼Œå¾—åˆ°çª—å£ï¼Œä½†æ²¡æœ‰è¾“å‡ºï¼Ÿæœ‰å¯èƒ½æ˜¯ä½ çš„xxå®‰å…¨ç®¡å®¶ç­‰æ‹¦æˆªçš„ã€‚è¯•ç€å…³é—­å®ƒä»¬ï¼Œç„¶åé‡æ–°è¿è¡Œç¨‹åºç¼–è¯‘æˆåŠŸï¼Œä½†æ˜¯æ²¡æœ‰æ­£ç¡®å·¥ä½œï¼Ÿå»debugå®ƒGeneral compile-time issueså½“ç¼–è¯‘ç¨‹åºæ—¶ï¼Œå¾—åˆ°ä¸€ä¸ªæœªè§£æçš„å¤–éƒ¨ç¬¦å·ï¼š_main or _WinMain@16 ï¼Ÿè¯´æ˜ä½ çš„ç¼–è¯‘å™¨æ‰¾ä¸åˆ°main()å‡½æ•°ã€‚Visual Studio issuesä½¿ç”¨Microsoft Visual c++è¿›è¡Œç¼–è¯‘æ—¶ï¼Œå¾—åˆ°C1010 fatal errorï¼Œå¹¶ä¸”ä¼´éšç€æç¤ºä¿¡æ¯ï¼Œå¦‚ï¼šâ€c:\\vcprojects\\test.cpp(263) :fatal error C1010: unexpected end of file while looking for precompiled header directiveâ€ç­”ï¼šè¿™ç§é—®é¢˜å‡ºç°åœ¨ï¼šå½“microsoft visual c++ç¼–è¯‘å™¨è¢«è®¾ç½®ä¸ºä½¿ç”¨é¢„ç¼–è¯‘å¤´æ–‡ä»¶ï¼Œä½†æ‚¨çš„c++ä»£ç æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ª(æˆ–å¤šä¸ª)æ²¡æœ‰å°†#include â€œstdafx.hâ€ or #include â€œpch.hâ€ä½œä¸ºä»£ç æ–‡ä»¶çš„ç¬¬ä¸€è¡Œã€‚å»ºè®®ï¼šåœ¨åˆ›å»ºé¡¹ç›®æ—¶ï¼Œå°†é¢„ç¼–è¯‘å¤´ precompiled headersé€‰é¡¹å…³é—­ã€‚å¦‚æœæ‚¨å¸Œæœ›ä¿æŒæ‰“å¼€é¢„ç¼–è¯‘å¤´æ–‡ä»¶ï¼Œè¦ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€æ‰¾åˆ°äº§ç”Ÿé”™è¯¯çš„æ–‡ä»¶(åœ¨ä¸Šé¢çš„é”™è¯¯ä¸­ï¼Œtest.cppæ˜¯ç½ªé­ç¥¸é¦–)ï¼Œå¹¶åœ¨æ–‡ä»¶çš„æœ€é¡¶éƒ¨æ·»åŠ ä»¥ä¸‹è¡Œ:#include â€œpch.hâ€æˆ–è€…#include â€œstdafx.hâ€ã€è€ç‰ˆæœ¬çš„VSä½¿ç”¨â€œstdafx.hâ€ ï¼Œå½“å…¶ä¸­ä¸€ä¸ªä¸èµ·ä½œç”¨ï¼Œå¯ä»¥æ¢æˆå¦å¤–ä¸€ä¸ªã€‘æ³¨æ„ï¼Œæ¯ä¸€ä¸ªC++æ–‡ä»¶éƒ½æ˜¯ä»è¿™ä¸€è¡Œå¼€å§‹çš„ã€‚å¦‚æœä¸æƒ³ä»è¿™ä¸€è¡Œå¼€å§‹ï¼Œé‚£å°±åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™å…³é—­â€œé¢„ç¼–è¯‘å¤´æ–‡ä»¶â€é€‰é¡¹å‡ºç°é”™è¯¯ï¼šâ€œ1MSVCRTD.lib(exe_winmain.obj) : error LNK2019: unresolved external symbol _WinMain@16 referenced in function â€œint __cdecl invoke_main(void)â€ (?invoke_main@@YAHXZ)â€ç­”ï¼šæ‚¨å¯èƒ½å·²ç»åˆ›å»ºäº†ä¸€ä¸ªWindowså›¾å½¢åŒ–åº”ç”¨ç¨‹åºï¼Œè€Œä¸æ˜¯æ§åˆ¶å°åº”ç”¨ç¨‹åºã€‚é‡æ–°åˆ›å»ºé¡¹ç›®ï¼Œå¹¶ç¡®ä¿å°†å…¶åˆ›å»ºä¸ºWindows(æˆ–Win32)æ§åˆ¶å°é¡¹ç›®ã€‚0.9 é…ç½®ç¼–è¯‘å™¨:â€œç”Ÿæˆï¼ˆbuildï¼‰â€é…ç½®debug configuration ï¼šå¯ä»¥å¸®åŠ©ä½ è°ƒè¯•ä½ çš„ç¨‹åºï¼Œè€Œä¸”ä¹Ÿæ˜¯IDEé»˜è®¤çš„ã€‚ä½†æ˜¯å®ƒä¼šå…³æ‰æ‰€æœ‰çš„ä¼˜åŒ–ï¼ŒåŒ…å«è°ƒè¯•ä¿¡æ¯ï¼ˆè¿™ä¼šè®©ä½ çš„é¡¹ç›®å˜å¾—å¾ˆå¤§ã€å¾ˆæ…¢ï¼‰ã€‚release configurationï¼šå½“ä½ å°†ä½ çš„ç¨‹åºå‘å¸ƒç»™å…¬ä¼—çš„æ—¶å€™ä½¿ç”¨releaseæ¨¡å¼ã€‚è¿™ä¸ªæ¨¡å¼ä¼šä¼˜åŒ–é¡¹ç›®çš„å¤§å°å’Œå®ƒçš„æ€§èƒ½ï¼Œè€Œä¸”ä¸ä¼šåŒ…å«é¢å¤–çš„è°ƒè¯•ä¿¡æ¯ã€‚æ‰€ä»¥è¿™ç§æ¨¡å¼é€‚ç”¨äºï¼šæµ‹è¯•ä½ çš„ä»£ç çš„æ€§èƒ½.0.10 é…ç½®ç¼–è¯‘å™¨:ç¼–è¯‘å™¨æ‰©å±•c++æ ‡å‡†å®šä¹‰äº†å…³äºç¨‹åºåœ¨ç‰¹å®šç¯å¢ƒä¸‹åº”è¯¥å¦‚ä½•è¡¨ç°çš„è§„åˆ™ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å°†éµå¾ªè¿™äº›è§„åˆ™ã€‚ç„¶è€Œï¼Œè®¸å¤šç¼–è¯‘å™¨å®ç°è‡ªå·±å¯¹è¯­è¨€çš„æ›´æ”¹ï¼Œé€šå¸¸æ˜¯ä¸ºäº†å¢å¼ºä¸è¯¥è¯­è¨€çš„å…¶ä»–ç‰ˆæœ¬(ä¾‹å¦‚C99)çš„å…¼å®¹æ€§ï¼Œæˆ–è€…æ˜¯å‡ºäºå†å²åŸå› ã€‚è¿™äº›ç‰¹å®šäºç¼–è¯‘å™¨çš„è¡Œä¸ºç§°ä¸ºç¼–è¯‘å™¨æ‰©å±•ï¼ˆCompiler extensionsï¼‰ã€‚ç¼–å†™ä½¿ç”¨ç¼–è¯‘å™¨æ‰©å±•çš„ç¨‹åºå…è®¸ä½ ç¼–å†™ä¸c++æ ‡å‡†ä¸å…¼å®¹çš„ç¨‹åºã€‚ä½¿ç”¨éæ ‡å‡†æ‰©å±•çš„ç¨‹åºé€šå¸¸æ— æ³•åœ¨å…¶ä»–ç¼–è¯‘å™¨ä¸Šç¼–è¯‘(è¿™äº›ç¼–è¯‘å™¨ä¸æ”¯æŒç›¸åŒçš„æ‰©å±•)ï¼Œæˆ–è€…å³ä½¿å®ƒä»¬æ”¯æŒï¼Œä¹Ÿå¯èƒ½æ— æ³•æ­£ç¡®è¿è¡Œã€‚æ³¨æ„ï¼Œç¼–è¯‘å™¨æ‰©å±•é€šå¸¸æ˜¯é»˜è®¤å¯ç”¨çš„ï¼Œè¿™å¯¹åˆå­¦è€…æ˜¯ä¸å‹å¥½çš„ï¼Œå› ä¸ºå®ƒä¼šè®©åˆå­¦è€…è§‰å¾—æŸäº›è¡Œä¸ºæ˜¯ç¬¦åˆå®˜æ–¹C++çš„æ ‡å‡†ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯å› ä¸ºç¼–è¯‘å™¨åªæ˜¯è¿‡äºå®½æ¾ã€‚å› ä¸ºï¼Œç¼–è¯‘å™¨æ‰©å±•ä»æ¥éƒ½ä¸æ˜¯å¿…é¡»çš„ï¼Œå¦‚æœå¼€å¯å¯èƒ½è®©ä½ è¯¯ä»¥ä¸ºä½ å†™çš„ä»£ç æ˜¯ç¬¦åˆC++æ ‡å‡†çš„ã€‚æ‰€ä»¥ï¼Œå»ºè®®ï¼Œå»ºè®®å…³é—­ç¼–è¯‘å™¨æ‰©å±•ã€‚0.11 é…ç½®ç¼–è¯‘å™¨:warningå’Œerrorå‡ºç°erroræç¤ºï¼šè¯´æ˜ä½ å†™çš„ä»£ç å¯èƒ½ä¸ç¬¦åˆC++è¯­è¨€çš„æ ‡å‡†ã€‚å‡ºç°warningæç¤ºï¼šè¯´æ˜ç¼–è¯‘å™¨è®¤ä¸ºä½ çš„ä»£ç çš„æŸäº›åœ°æ–¹å¯èƒ½æœ‰äº›é”™è¯¯ï¼Œä½†æ˜¯ç¼–è¯‘å™¨ä¸èƒ½ç™¾åˆ†ç™¾ç¡®å®šã€‚å¥½ä¹ æƒ¯ï¼šä¸è¦è®©warningæç¤ºå †ç§¯ï¼Œè¦å°½ä½ æ‰€èƒ½çš„å»è§£å†³warningæç¤ºã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å‡ºç°çš„warningæ˜¯éœ€è¦æˆ‘ä»¬å°½é‡å»è§£å†³çš„ã€‚ä½†åœ¨æå°‘æ•°æƒ…å†µçš„warningæç¤ºï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦äº§ç”Ÿè¿™ä¸ªè­¦å‘Šã€‚C++å®˜æ–¹ä¸æ”¯æŒè¿™æ ·ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šå•ç‹¬çš„ç¼–è¯‘å™¨ï¼ˆå¦‚ï¼švisio studio xx å’ŒGCCï¼‰ä¼šæä¾›è§£å†³æ–¹æ¡ˆï¼šåˆ©ç”¨ä¸å¯ç§»æ¤ # pragma æŒ‡ä»¤ æ¥æš‚æ—¶çš„å…³é—­è¿™ä¸ªè­¦å‘Šã€‚å¥½ä¹ æƒ¯ï¼šå°†ä½ çš„ç»é«˜çº§åˆ«è°ƒåˆ°æœ€å¤§ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½ å­¦ä¹ çš„æ—¶å€™ï¼Œä»–ä¼šå¸®ä½ è¯†åˆ«æ½œåœ¨çš„é—®é¢˜ã€‚å°†warningsè§†ä¸ºerrorså¦‚æœåœ¨ä½ å­¦ä¹ çš„æ—¶å€™ï¼Œæœ€å¥½å‘Šè¯‰ç¼–è¯‘å™¨è®©å®ƒæŠŠwarningå½“åšerrorå¯¹å¾…ï¼Œç„¶åä½ å°±ä¸å¾—ä¸å»è§£å†³å‡ºç°çš„warningäº†ã€‚0.12 é…ç½®ç¼–è¯‘å™¨: é€‰æ‹©ä¸€ä¸ªC++æ ‡å‡†C++çš„æ ‡å‡†æœ‰å¾ˆå¤šï¼Œå¦‚ï¼šC++98, C++03, C++11, C++14, C++17, ç­‰. é€šå¸¸æƒ…å†µï¼Œç¼–è¯‘å™¨çš„æ ‡å‡†éƒ½æ˜¯é»˜è®¤çš„ï¼Œè€Œä¸æ˜¯æœ€æ–°çš„C++æ ‡å‡†ã€‚å¦‚æœä½ æƒ³ä½¿ç”¨æŒ‡å®šçš„æ ‡å‡†ç‰ˆæœ¬ï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½®ã€‚æ­£åœ¨åˆ¶å®šä¸­çš„æ ‡å‡†çš„åå­—æœ‰ä¸€äº›è¯­è¨€æ ‡å‡†æ˜¯æŒ‰ç…§ä»–æœ€ç»ˆå®šæ¡ˆæ—¶å€™çš„å¹´ä»½ï¼ˆå¦‚ï¼ŒC++17æ˜¯åœ¨2017å¹´å®Œæˆçš„ï¼‰ã€‚ä½†æ˜¯ï¼Œå½“ä¸€ä¸ªæ–°çš„è¯­è¨€æ ‡å‡†æ­£åœ¨åˆ¶å®šingçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸èƒ½ç¡®å®šå®ƒæœ€ç»ˆå®Œæˆçš„æ—¶é—´ã€‚è¿™ä¸ªæ—¶å€™è¿™ä¸ªè¯­è¨€æ ‡å‡†çš„åå­— å°†ä¼šè¢«æœ€ç»ˆå®Œæˆæ—¶å€™çš„åå­—æ›¿ä»£ï¼Œï¼ˆå¦‚ï¼ŒC++11åœ¨åˆ¶ä½œingæ—¶ï¼Œåå­—ä¸ºC++1xï¼Œå½“æœ€ç»ˆå®Œæˆçš„æ—¶å€™â€œC++1xâ€å°±ä¼šè¢«æ›¿æ¢ï¼‰ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¸€äº›ï¼šc++1x = C++11c++1y = C++14c++1z = C++17c++2a = C++20æ‰€ä»¥ï¼Œå¦‚æœä½ çœ‹è§C++1Zï¼Œè¿™å°±ä»£è¡¨C++17ã€æ³¨æ„ã€‘ï¼šåœ¨VS xxxxç³»åˆ—çš„IDEä¸­ï¼Œæ˜¯ä¸èƒ½è®¾ç½®å…¨å±€çš„è¯­è¨€æ ‡å‡†çš„ï¼Œä½ åªèƒ½ä¸€ä¸ªä¸€ä¸ªé¡¹ç›®çš„å»è®¾ç½®1.1 è¯­å¥ä¸ç¨‹åºç»“æ„Statements and the structure of a programè¯­å¥è¯­å¥(Statements)æ˜¯ä¸€ç§æŒ‡ä»¤ç±»å‹ï¼Œå®ƒä½¿ç¨‹åºæ‰§è¡ŒæŸäº›æ“ä½œã€‚å®ƒæ˜¯æœ€å°çš„ç‹¬ç«‹è®¡ç®—å•å…ƒã€‚åœ¨C++ä¸­ï¼Œä¸€ä¸ªå•ç‹¬çš„è¯­å¥å°±å¯èƒ½ä¼šè¢«ç¼–è¯‘æˆå¾ˆå¤šæœºå™¨è¯­è¨€æŒ‡ä»¤ã€‚ä¸‹é¢åˆ—å‡ºäº†å¾ˆå¤šç§è¯­å¥ï¼šDeclaration statements(å£°æ˜è¯­å¥)Jump statementsï¼ˆå¾ªç¯è¯­å¥ï¼‰Expression statementsï¼ˆè¡¨è¾¾å¼è¯­å¥ï¼‰Compound statementsï¼ˆå¤åˆè¯­å¥ï¼‰Selection statements (conditionals) (æ¡ä»¶è¯­å¥)Iteration statements (loops) ï¼ˆå¾ªç¯è¯­å¥ï¼‰Try blockså‡½æ•°ä¸mainå‡½æ•°å‡½æ•°æ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œçš„è¯­å¥é›†åˆã€‚æ¯ä¸€ä¸ªC++ç¨‹åºéƒ½å¿…é¡»è¦æœ‰ä¸€ä¸ªmainå‡½æ•°ã€‚ä¸€ä¸ªç¨‹åºå¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œå¼€å§‹äºmainå‡½æ•°ä¸­çš„ç¬¬ä¸€æ¡è¯­å¥ï¼Œç„¶åæŒ‰ç…§é¡ºåºæ‰§è¡Œä½™ä¸‹è¯­å¥ã€‚è¯´åˆ°å‡½æ•°ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°main() æˆ–è€… doSomething()ï¼Œåé¢çš„æ‹¬å·å…¶å®èµ·äº†ä¸€ä¸ªè¯´æ˜ä½œç”¨ã€‚è¿™ä¸ªæ‹¬å·å°±è¯´æ˜ä»–å‰é¢çš„é‚£ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªå‡½æ•°çš„åå­—ã€‚åˆ†æâ€œhello worldâ€1234567#include &lt;iostream&gt; int main()&#123; std::cout &lt;&lt; \"Hello world!\" return 0;&#125;ç¬¬ä¸€è¡Œï¼šä¸€ä¸ªé¢„å¤„ç†æŒ‡ä»¤ã€‚è¿™ä¸ªé¢„å¤„ç†å™¨æŒ‡ä»¤æŒ‡ç¤ºï¼Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨iostreamåº“çš„å†…å®¹ï¼Œå®ƒæ˜¯c++æ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œå…è®¸æˆ‘ä»¬ä»æ§åˆ¶å°ä¸Šè¯»å†™æ–‡æœ¬ã€‚æˆ‘ä»¬éœ€è¦è¿™ä¸€è¡Œä»¥ä¾¿åœ¨ç¬¬5è¡Œä¸Šä½¿ç”¨std::coutã€‚æ’é™¤è¿™ä¸€è¡Œå°†å¯¼è‡´ç¬¬5è¡Œå‡ºç°ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“std::coutæ˜¯ä»€ä¹ˆã€‚ç¬¬2è¡Œæ˜¯ç©ºçš„ï¼Œç¼–è¯‘å™¨ä¼šå¿½ç•¥å®ƒã€‚è¿™ä¸€è¡Œçš„å­˜åœ¨åªæ˜¯ä¸ºäº†å¸®åŠ©ä½¿ç¨‹åºå¯¹äººç±»æ›´å…·å¯è¯»æ€§(é€šè¿‡åˆ†éš”#includeé¢„å¤„ç†æŒ‡ä»¤å’Œç¨‹åºçš„åç»­éƒ¨åˆ†)ã€‚ç¬¬3è¡Œå‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬è¦ç¼–å†™(å®šä¹‰)ä¸€ä¸ªåä¸ºmainçš„å‡½æ•°ã€‚æ¯ä¸ªc++ç¨‹åºå¿…é¡»æœ‰ä¸€ä¸ªä¸»å‡½æ•°ï¼Œå¦åˆ™å®ƒå°†æ— æ³•ç¼–è¯‘ã€‚ç¬¬4è¡Œå’Œç¬¬7è¡Œå‘Šè¯‰ç¼–è¯‘å™¨å“ªäº›è¡Œæ˜¯ä¸»å‡½æ•°çš„ä¸€éƒ¨åˆ†ã€‚ç¬¬4è¡Œä¸Šçš„å·¦å¤§æ‹¬å·å’Œç¬¬7è¡Œä¸Šçš„å³å¤§æ‹¬å·ä¹‹é—´çš„æ‰€æœ‰å†…å®¹éƒ½è¢«è®¤ä¸ºæ˜¯ä¸»å‡½æ•°çš„ä¸€éƒ¨åˆ†ã€‚è¿™å«åšå‡½æ•°ä½“ç¬¬5è¡Œæ˜¯mainå‡½æ•°ä¸­çš„ç¬¬ä¸€ä¸ªè¯­å¥ï¼Œä¹Ÿæ˜¯è¿è¡Œç¨‹åºæ—¶æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªè¯­å¥ã€‚cout(ä»£è¡¨â€œå­—ç¬¦è¾“å‡ºâ€)å’Œ&lt;&lt;æ“ä½œç¬¦å…è®¸æˆ‘ä»¬å°†å­—æ¯æˆ–æ•°å­—å‘é€åˆ°è¦è¾“å‡ºçš„æ§åˆ¶å°ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘å®ƒå‘é€æ–‡æœ¬â€œHello world!â€ï¼Œå°†è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚æ­¤è¯­å¥åˆ›å»ºç¨‹åºçš„å¯è§è¾“å‡ºã€‚ç¬¬6è¡Œæ˜¯ä¸€ä¸ªè¿”å›è¯­å¥ã€‚å½“å¯æ‰§è¡Œç¨‹åºå®Œæˆè¿è¡Œæ—¶ï¼Œç¨‹åºå°†ä¸€ä¸ªå€¼å‘é€å›æ“ä½œç³»ç»Ÿï¼Œä»¥æŒ‡ç¤ºå®ƒæ˜¯å¦æˆåŠŸè¿è¡Œã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œè¿™ä¸ªç‰¹æ®Šçš„returnè¯­å¥å°†0çš„å€¼è¿”å›ç»™æ“ä½œç³»ç»Ÿï¼Œè¿™æ„å‘³ç€â€œä¸€åˆ‡æ­£å¸¸!â€è¿™æ˜¯æ‰§è¡Œçš„ç¨‹åºä¸­çš„æœ€åä¸€æ¡è¯­å¥ã€‚ç»“å°¾ï¼Œä»€ä¹ˆæ˜¯C++ æ ‡å‡†åº“ï¼Ÿç­”ï¼šä¸€ä¸ªæ ‡å‡†åº“æ–‡ä»¶æ˜¯ä¸€ä¸ª é¢„ç¼–è¯‘ä»£ç çš„é›†åˆï¼Œå®ƒè¢«â€œæ‰“åŒ…â€èµ·æ¥ï¼Œä»¥ä¾›å…¶ä»–ç¨‹åºé‡ç”¨ã€‚1.2 æ³¨é‡Šæ­£ç¡®çš„æ³¨é‡Šï¼šAt the library, program, or function level, use comments to describe what.Inside the library, program, or function, use comments to describe how.At the statement level, use comments to describe why.1.3 â€” Introduction to variablesdataï¼šæ•°æ®dataå°±æ˜¯å¯ä»¥è¢«ç”µè„‘ç§»åŠ¨ã€å­˜å‚¨ã€å¤„ç†çš„ä»»ä½•ä¿¡æ¯ã€‚è®¡ç®—æœºä¸Šçš„æ•°æ®é€šå¸¸ä»¥ä¸€ç§ä¾¿äºå­˜å‚¨æˆ–å¤„ç†çš„æ ¼å¼å­˜å‚¨(å› æ­¤äººç±»æ— æ³•è¯»æ‡‚)ï¼Œè¿™ç§æ ¼å¼å°±æ˜¯ï¼šäºŒè¿›åˆ¶ï¼ˆbinaryï¼‰Objects and variablesï¼šå¯¹è±¡å’Œæ•°æ®RAM(random access memory)ï¼šéšæœºå­˜å–å­˜å‚¨å™¨ã€‚åœ¨ç¨‹åºä¸­ï¼Œä½ å¯ä»¥æŠŠRAMçœ‹ä½œä¸€åˆ—é‚®ç®±ï¼Œå®ƒå¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶å­˜å‚¨æ•°æ®ã€‚å­˜å‚¨åœ¨å†…å­˜ä¸­çš„å•ä¸ªæ•°æ®ï¼Œç§°ä¸ºvalueåœ¨C++ä¸­ï¼Œä¸å…è®¸ç›´æ¥è®¿é—®å†…å­˜ã€‚ä½†å¯ä»¥é€šè¿‡objectæ¥è®¿é—®å†…å­˜ã€‚ä¸€æ—¦åˆ›å»ºobjectï¼Œç¼–è¯‘å™¨å°±è‡ªåŠ¨çš„å†³å®šè¿™ä¸ªobjectå­˜æ”¾åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚objectï¼šæ˜¯å…·æœ‰valueå’Œå…¶ä»–ç›¸å…³å±æ€§çš„å­˜å‚¨åŒºåŸŸã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¯´ï¼Œè·å–è¿™ä¸ªobjectçš„valueï¼Œç¼–è¯‘å™¨ç›´åˆ°è¿™ä¸ªvalueå­˜å‚¨åœ¨å†…å­˜çš„å…·ä½“ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åªå…³æ³¨ä½¿ç”¨object(å¯¹è±¡)æ¥å­˜å‚¨å’Œæ£€ç´¢valueï¼Œè€Œä¸”ä¸ç”¨æ‹…å¿ƒå®ƒåœ¨å†…å­˜ä¸­çš„å­˜å‚¨ä½ç½®ã€‚object(å¯¹è±¡)å¯ä»¥å‘½åä¹Ÿå¯ä»¥ä¸å‘½åã€‚æœ‰åå­—çš„objectå«åšï¼švariable(å˜é‡)ã€‚è¿™ä¸ªobjectçš„åå­—ï¼Œå«åšï¼šæ ‡è¯†ç¬¦(identifier)ã€‚åœ¨ä¸€èˆ¬ç¼–ç¨‹ä¸­ï¼Œå¯¹è±¡é€šå¸¸æŒ‡å†…å­˜ä¸­çš„å˜é‡ã€æ•°æ®ç»“æ„æˆ–å‡½æ•°ã€‚åœ¨c++ä¸­ï¼Œâ€œå¯¹è±¡â€çš„å®šä¹‰è¾ƒçª„ï¼Œå°†å‡½æ•°æ’é™¤åœ¨å¤–ã€‚Variable instantiationï¼šå˜é‡å®ä¾‹åŒ–ä¸ºäº†åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œéœ€è¦ç”¨ä¸€ç§ç‰¹æ®Šçš„å£°æ˜ï¼šå®šä¹‰1int x; // define a variable named x, of type intåœ¨ç¼–è¯‘æ—¶ï¼Œå½“ç¼–è¯‘å™¨çœ‹åˆ°è¿™ä¸ªè¯­å¥ï¼Œå®ƒä¼šå‘Šè¯‰è‡ªå·±æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œå˜é‡åå­—å«xï¼Œç±»å‹ä¸ºintã€‚ä»æ­¤ä¹‹åï¼Œåªè¦ç¼–è¯‘å™¨çœ‹åˆ°æ ‡è¯†ç¬¦xï¼Œå®ƒå°±çŸ¥é“æˆ‘ä»¬åœ¨å¼•ç”¨è¿™ä¸ªå˜é‡ã€‚ç¨‹åºè¿è¡Œæ—¶(ç§°ä¸ºï¼šruntime)ï¼Œè¯¥å˜é‡å°†ä¼šè¢«å®ä¾‹åŒ–ã€‚å˜é‡åœ¨ç”¨æ¥å­˜å‚¨valuesä¹‹å‰ï¼Œå¿…é¡»è¦å…ˆå®ä¾‹åŒ–ã€‚å®ä¾‹åŒ–ï¼šå¯¹è±¡(object)å°†ä¼šè¢«åˆ›å»ºï¼Œå¹¶ä¸”ä¼šåˆ†é…ä¸€ä¸ªå†…å­˜åœ°å€ã€‚ä¸ºäº†ä¾¿äºä¸¾ä¾‹ï¼Œå‡è®¾å˜é‡xæ˜¯åœ¨å†…å­˜ä½ç½®140å¤„å®ä¾‹åŒ–çš„ã€‚å½“ç¨‹åºä½¿ç”¨å˜é‡xæ—¶ï¼Œå®ƒå°†è®¿é—®å†…å­˜ä½ç½®140ä¸­çš„å€¼ã€‚å®ä¾‹åŒ–çš„å¯¹è±¡æœ‰æ—¶ä¹Ÿç§°ä¸ºå®ä¾‹ã€‚Data typesï¼šæ•°æ®ç±»å‹Data types(æ›´é€šç”¨çš„ç§°å‘¼ï¼štype)ï¼šå®ƒå‘Šè¯‰ç¼–è¯‘å™¨å˜é‡å°†ä¼šå­˜å‚¨ä»€ä¹ˆç±»å‹çš„valueåœ¨c++ä¸­ï¼Œå˜é‡çš„ç±»å‹å¿…é¡»åœ¨ç¼–è¯‘æ—¶(å½“ç¨‹åºè¢«ç¼–è¯‘æ—¶)å·²çŸ¥ï¼Œå¦‚æœä¸é‡æ–°ç¼–è¯‘ç¨‹åºï¼Œå°±ä¸èƒ½æ›´æ”¹è¯¥ç±»å‹ã€‚è¿™æ„å‘³ç€ä¸€ä¸ªæ•´å‹å˜é‡åªèƒ½åŒ…å«æ•´å‹å€¼ã€‚å¦‚æœå¸Œæœ›å­˜å‚¨å…¶ä»–ç±»å‹çš„å€¼ï¼Œåˆ™éœ€è¦ä½¿ç”¨ä¸åŒçš„å˜é‡ã€‚SummaryData is any sequence of symbols (numbers, letters, etcâ€¦) that can be interpreted to mean something.A value is a single piece of data stored in memory.ã€å€¼æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„å•ä¸ªæ•°æ®å—ã€‚ã€‘A variable is a named region of memory.ã€å˜é‡æ˜¯ä¸€ä¸ªå‘½åçš„å†…å­˜åŒºåŸŸã€‚ã€‘An identifier is the name that a variable is accessed by.ã€æ ‡è¯†ç¬¦æ˜¯å˜é‡è¢«è®¿é—®çš„åç§°ã€‘A type tells the program how to interpret a value in memory.ã€ç±»å‹æ˜¯å‘Šè¯‰ç¨‹åºå¦‚ä½•è§£é‡Šå†…å­˜ä¸­çš„å€¼ã€‘1.4 å˜é‡èµ‹å€¼ä¸åˆå§‹åŒ–å®šä¹‰å˜é‡ï¼š12int x; // define an integer variable named xint y, z; // define two integer variables, named y and zå˜é‡èµ‹å€¼ï¼š12int width; // define an integer variable named widthwidth = 5; // copy assignment of value 5 into variable widthåˆå§‹åŒ–å˜é‡ï¼š(å®šä¹‰&amp;èµ‹å€¼åŒæ—¶è¿›è¡Œ)1int a = 1; //åˆå§‹åŒ–å˜é‡aä¸º1C++åˆå§‹åŒ–å˜é‡çš„å½¢å¼æœ‰ä¸‰ç§ï¼šä½¿ç”¨â€œ=â€ copy initialization1int width = 5; // copy initialization of value 5 into variable widthä½¿ç”¨æ‹¬å·â€œ()â€ direct initialization ã€è¿™ç§åœ¨ä¸€äº›é«˜çº§æ•°æ®ç±»å‹ä¸Šï¼Œæ€§èƒ½è¾ƒå¥½ã€‘1int width(5); // direct brace initialization of value 5 into variable width (preferred)ä½¿ç”¨å¤§æ‹¬å·â€œ{}â€ Brace initialization(uniform initialization)[æ¨èè¿™ç§]è¿™ç§å¯ä»¥ç”¨äºå¯¹è±¡åˆå§‹åŒ–ä¸€ç³»åˆ—çš„æ•°æ®123/*æ¨èç¬¬ä¸€ç§å½¢å¼*/int width&#123; 5 &#125;; // direct brace initialization of value 5 into variable width (preferred)int height = &#123; 6 &#125;; // copy brace initialization of value 6 into variable heightå¦å¤–ï¼Œç©ºåˆå§‹åŒ–ï¼šç”¨ç©ºçš„èŠ±æ‹¬å·å¯¹æ•°æ®è¿›è¡ŒZero initializationã€‚å®ƒè¡¨ç¤ºå¯¹è¯¥å˜é‡åˆå§‹åŒ–ä¸º0ï¼Œæˆ–è€…ä¸ºç©ºã€‚1int width&#123;&#125;; //zero initialization to value 0å¯¹äºä¸Šè¿°ä¸‰ç§åˆå§‹åŒ–æ–¹æ³•ï¼Œçœ‹ä¸€ä¸‹ä¸‹é¢çš„ä¾‹å­ï¼š1234567891011121314#include &lt;iostream&gt;using namespace std;int main()&#123; int a = 1.2; int b(2.8); int c&#123; 3.1 &#125;; cout &lt;&lt; a &lt;&lt; b &lt;&lt; c &lt;&lt; endl; cin.clear(); cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n'); cin.get();&#125;è¿è¡Œç»“æœï¼šä»è¿è¡Œç»“æœå¯ä»¥çœ‹å‡ºï¼Œç¬¬1å’Œ2ç§æ–¹æ³•åªä¼šåŸºäºâ€œè­¦å‘Šâ€ï¼Œå®ƒä»¬è¿è¡Œç»“æœå°±æ˜¯åªæŠŠæ•´æ•°éƒ¨åˆ†åˆå§‹åŒ–ç»™å“åº”å˜é‡ï¼›è€Œç¬¬ä¸‰ç§å°±ç›´æ¥æç¤ºâ€œå‡ºé”™â€ã€‚å˜é‡åˆå§‹åŒ–æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚å¦‚æœä¸åˆå§‹åŒ–ï¼Œç¼–è¯‘å™¨å¯èƒ½æŠ¥é”™çš„ãƒ¾(â‰§Oâ‰¦)ã€ƒå—·~1.5ä»‹ç»è¾“å…¥è¾“å‡ºæµï¼šcout cin endlstd::endl ä¸ â€˜\\nâ€™ä½¿ç”¨â€™\\nâ€™çš„æ•ˆç‡æ¯”std::endlé«˜ã€‚å› ä¸ºï¼šstd::endlåšä¸¤ä»¶äº‹ï¼š1ã€å°†å…‰æ ‡ä¸€åˆ€ä¸‹ä¸€è¡Œï¼›2ã€å®ƒâ€œåˆ·æ–°â€è¾“å‡º(ç¡®ä¿å®ƒç«‹å³æ˜¾ç¤ºåœ¨å±å¹•ä¸Š)â€˜\\nâ€™åªåšä¸€ä»¶äº‹ï¼š1ã€å°†å…‰æ ‡ä¸€åˆ€ä¸‹ä¸€è¡Œï¼›&lt;&lt; ã€&gt;&gt;&lt;&lt;ï¼š insertion operator (&lt;&lt;)&gt;&gt;ï¼š extraction operator (&gt;&gt;)1.6 æœªåˆå§‹åŒ–&amp;æœªå®šä¹‰åˆå§‹åŒ–ã€èµ‹å€¼ã€æœªåˆå§‹åŒ–ï¼šä¸åƒå…¶ä»–è¯­è¨€ï¼ŒC/C++åœ¨å®šä¹‰çš„æ—¶å€™ï¼Œä¸ä¼šè‡ªåŠ¨çš„ç»™å˜é‡èµ‹å€¼(æ¯”å¦‚è¯´ 0)ã€‚æ‰€ä»¥è¯´ï¼Œå¦‚æœä¸€ä¸ªå˜é‡è¢«ç¼–è¯‘å™¨åˆ†é…åˆ°ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œå¦‚æœä»–æ²¡æœ‰è¢«äººä¸ºçš„èµ‹å€¼ï¼Œå®ƒé»˜è®¤çš„å€¼å°±æ˜¯è¿™ä¸ªå†…å­˜åœ°å€åŸæ¥å­˜å‚¨çš„å€¼ï¼ˆä¹Ÿå«â€œåƒåœ¾å€¼â€ï¼‰ã€‚Initialization = åœ¨å¯¹è±¡è¢«å®šä¹‰çš„åŒæ—¶ç»™å®ƒèµ‹å€¼ï¼›Assignment = åœ¨å¯¹è±¡è¢«å®šä¹‰ä¹‹åï¼Œå†èµ‹å€¼ç»™å®ƒï¼›Uninitialized = å¯¹è±¡åªæ˜¯è¢«å®šä¹‰ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è¢«èµ‹å€¼ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥è®°ä½è¦åˆå§‹åŒ–å¯¹è±¡ï¼ˆå› ä¸ºç°åœ¨ï¼Œåˆå§‹åŒ–å¯¹è±¡çš„æˆæœ¬ä¸å¸¦æ¥çš„å¥½å¤„ç›¸æ¯”ï¼Œæˆæœ¬ä¸å€¼ä¸€æï¼‰ã€‚ä¸åˆå§‹åŒ–å¯¹è±¡ï¼Œå¯èƒ½ä¼šå‡ºç°æ— æ³•é¢„æ–™çš„é”™è¯¯ã€‚æœªåˆå§‹åŒ–è¡Œä¸ºï¼Œå¯èƒ½å¸¦æ¥ä»¥ä¸‹ç—‡çŠ¶ï¼šç¨‹åºæ¯æ¬¡è¿è¡Œéƒ½ä¼šæœ‰ä¸åŒçš„ç»“æœï¼›ç¨‹åºæ¯æ¬¡è¿è¡Œéƒ½ä¼šå‡ºç°ä¸€ä¸ªç›¸åŒçš„é”™è¯¯ç»“æœï¼›ç¨‹åºç»“æœä¸ç¨³å®šï¼šæœ‰æ—¶ç»“æœæ­£ç¡®ï¼Œæœ‰æ—¶ç»“æœæ˜¯é”™è¯¯çš„ï¼›ç¨‹åºä¼¼ä¹å·¥ä½œï¼Œä½†æ˜¯ç¨åçš„ç»“æœä¸æ­£ç¡®ï¼›ç¨‹åºå´©æºƒï¼›ç¨‹åºå¯ä»¥åœ¨ä¸€äº›ç¼–è¯‘å™¨ä¸Šè¿è¡Œï¼Œä½†åœ¨å…¶ä»–ç¼–è¯‘å™¨ä¸­ä¸èƒ½è¿è¡Œï¼›1.7 å…³é”®å­—&amp;æ ‡è¯†ç¬¦å…³é”®å­—ï¼šC++17ä¸­çš„å…³é”®å­—ï¼ˆkeywords æˆ–è€… reserved wordsï¼‰æœ‰84ä¸ªå…³é”®å­—ã€‚æ ‡è¯†ç¬¦ï¼šå˜é‡ã€å‡½æ•°ã€ç±»ã€æ¨¡å—ã€æˆ–ä»»ä½•å…¶ä»–ç”¨æˆ·è‡ªå®šä¹‰é¡¹ç›®çš„ çš„åå­— å«åšï¼šæ ‡è¯†ç¬¦ã€‚å‘½åè§„åˆ™ï¼šæ ‡è¯†ç¬¦åå­—ä¸èƒ½å’Œä¿ç•™å­—é‡åï¼›æ ‡è¯†ç¬¦åªèƒ½ç”±å­—æ¯ã€ä¸‹åˆ’çº¿ã€æ•°å­—ï¼›æ ‡è¯†ç¬¦å¿…é¡»ä»¥ å­—æ¯ æˆ– æ•°å­— å¼€å¤´ï¼ˆâ€œä»¥ä¸‹åˆ’çº¿å¼€å¤´â€çš„ä¸€èˆ¬éƒ½æ˜¯æ“ä½œç³»ç»Ÿçš„ä¿ç•™å­—ï¼›åº“ï¼Œæˆ–è€…æ˜¯ç¼–è¯‘å™¨ä½¿ç”¨çš„ï¼‰ï¼›C++å¯¹å¤§å°å†™æ•æ„Ÿï¼Œæ‰€ä»¥waå’ŒWAå’ŒWaå’ŒwAäº’ä¸ç›¸åŒã€‚1.8 å¸¸é‡&amp;æ“ä½œç¬¦å¸¸é‡(literalï¼Œliteral constant)ï¼šæ˜¯ä¸€ä¸ªå·²ç›´æ¥æ’å…¥æºä»£ç çš„å›ºå®šå€¼ã€‚å¸¸é‡ä¸å˜é‡éƒ½æœ‰ä¸€ä¸ªvalueï¼ˆå’Œä¸€ä¸ªtypeï¼‰ã€‚ä½†æ˜¯ï¼Œå¸¸é‡çš„å€¼ä¸å¯æ›´æ”¹ã€‚æ“ä½œç¬¦(Operators)ï¼šåœ¨æ•°å­¦ä¸­ï¼Œæ“ä½œæ˜¯ä¸€ç§æ•°å­¦è®¡ç®—ï¼ŒåŒ…æ‹¬0ä¸ªæˆ–å¤šä¸ªè¾“å…¥å€¼(ç§°ä¸ºæ“ä½œæ•°operands)ï¼Œå®ƒä»¬äº§ç”Ÿä¸€ä¸ªæ–°å€¼(ç§°ä¸ºè¾“å‡ºå€¼)ã€‚è¦æ‰§è¡Œçš„ç‰¹å®šæ“ä½œç”±ä¸€ä¸ªç§°ä¸ºæ“ä½œç¬¦çš„ç»“æ„(é€šå¸¸æ˜¯ä¸€ä¸ªç¬¦å·æˆ–ä¸€å¯¹ç¬¦å·)è¡¨ç¤ºã€‚æ“ä½œç¬¦åˆ†ä¸ºä¸‰ç±»ï¼šä¸€å…ƒæ“ä½œç¬¦(Unary operators)ï¼šåªæœ‰ä¸€ä¸ªæ“ä½œæ•°ï¼›äºŒå…ƒæ“ä½œç¬¦(Binary operators)ï¼šæœ‰ä¸¤ä¸ªæ“ä½œæ•°ï¼ˆå·¦è¾¹ã€å³è¾¹å„ä¸€ä¸ªï¼‰ï¼›ä¸‰å…ƒæ“ä½œç¬¦(Ternary operators)ï¼šæœ‰ä¸‰ä¸ªæ“ä½œæ•°ã€‚åœ¨C++ä¸­åªæœ‰ä¸€ä¸ªä¸‰å…ƒæ“ä½œç¬¦ã€‚1.9 è¡¨è¾¾å¼è¡¨è¾¾å¼ä¸è¯­å¥çš„åŒºåˆ«ï¼Ÿå½“æˆ‘ä»¬éœ€è¦ç¨‹åºæ‰§è¡ŒæŸä¸ªæ“ä½œæ—¶ï¼Œä½¿ç”¨è¯­å¥ï¼›å½“æˆ‘ä»¬éœ€è¦ç¨‹åºè®¡ç®—æœ‰ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œä½¿ç”¨è¡¨è¾¾å¼ã€‚è¡¨è¾¾å¼ã€è¯­å¥ã€è¡¨è¾¾å¼è¯­å¥ï¼Ÿ123int x; //è¯­å¥ä¸å«è¡¨è¾¾å¼int x=5; //è¯­å¥åŒ…å«è¡¨è¾¾å¼x=5; //è¡¨è¾¾å¼è¯­å¥æ€»ç»“chapter 1è¯­å¥(statement)ï¼šæ˜¯ä¸€ç§æŒ‡ä»¤ï¼Œå®ƒé€šå¸¸ä½¿ç¨‹åºæ‰§è¡ŒæŸäº›æ“ä½œï¼Œè¯­å¥ä»¥åˆ†å·ï¼ˆsemicolonï¼‰ç»“å°¾ã€‚é¢„å¤„ç†æŒ‡ä»¤(Preprocessor directives)ï¼šå‘Šè¯‰ç¼–è¯‘å™¨æ‰§è¡Œä¸€ç§ç‰¹æ®Šä»»åŠ¡ã€‚åœ¨æœ¬ç« ä¸­ï¼Œç”¨åˆ°çš„æ˜¯â€#include &lt;iostream&gt;â€œ","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"C/C++","slug":"å­¦ä¹ ç¬”è®°/C-C","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/"}],"tags":[{"name":"C++","slug":"C","permalink":"https://longlongqin.github.io/tags/C/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"Letâ€™s Build A Simple Interpreter-9","slug":"å­¦ä¹ ç¬”è®°/Let's Build A Simple Interpreter/LSBASI-9","date":"2020-03-18T06:44:30.000Z","updated":"2020-04-19T14:38:29.702Z","comments":true,"path":"archives/8632918.html","link":"","permalink":"https://longlongqin.github.io/archives/8632918.html","excerpt":"ä»Šå¤©è¦å­¦ä¹ çš„å†…å®¹ï¼šå¦‚ä½•parse and interpret ä¸€ä¸ªPascalç¨‹åºçš„å®šä¹‰ definitionå¦‚ä½•parse and interpret å¤åˆè¯­å¥compound statementså¦‚ä½•parse and interpret èµ‹å€¼è¯­å¥(åŒ…æ‹¬å˜é‡)assignment statements, including variables.ä»‹ç»ç¬¦å·è¡¨ï¼Œä»¥åŠå¦‚ä½•å­˜å‚¨å’ŒæŸ¥æ‰¾å˜é‡ã€‚","text":"ä»Šå¤©è¦å­¦ä¹ çš„å†…å®¹ï¼šå¦‚ä½•parse and interpret ä¸€ä¸ªPascalç¨‹åºçš„å®šä¹‰ definitionå¦‚ä½•parse and interpret å¤åˆè¯­å¥compound statementså¦‚ä½•parse and interpret èµ‹å€¼è¯­å¥(åŒ…æ‹¬å˜é‡)assignment statements, including variables.ä»‹ç»ç¬¦å·è¡¨ï¼Œä»¥åŠå¦‚ä½•å­˜å‚¨å’ŒæŸ¥æ‰¾å˜é‡ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://ruslanspivak.com/lsbasi-part9/æœ¬èŠ‚æºä»£ç ï¼šhttps://github.com/rspivak/lsbasi/tree/master/part9/pythonä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ Pascalç¨‹åºï¼Œæ¥ä»‹ç»æ–°æ¦‚å¿µï¼š123456789BEGIN BEGIN number := 2; a := number; b := 10 * a + 10 * number / 4; c := a - - b END; x := 11;END.ä»Šå¤©æ‰€å­¦å†…å®¹ä¸å‰é¢çš„part1~8ç›¸æ¯”æœ‰äº†å¾ˆå¤§çš„é£è·ƒï¼Œç°åœ¨ä¸å†æ˜¯åƒä»¥å‰ä¸€æ ·åªæ˜¯ä¸€ä¸ªè®¡ç®—å™¨äº†ã€‚æˆ‘ä»¬è¦æå‡ä¸€ä¸‹æ¡£æ¬¡äº†ğŸ˜Šæ–°çš„è¯­æ³•æ ‘åŠè§„åˆ™ç°åœ¨ï¼Œæ¥çœ‹çœ‹æ–°è¯­è¨€ç»“æ„çš„è¯­æ³•æ ‘syntax diagrams ä»¥åŠå…¶å¯¹åº”çš„è¯­æ³•è§„åˆ™grammar rules)pascalè¯­æ³•ä¸€ä¸ªPascalè¯­æ³•ç”±ä¸€ä¸‹ç»„æˆ&lt;è¿™ä¸æ˜¯å®Œæ•´çš„å®šä¹‰ï¼Œä¼šåœ¨åé¢æ–‡ç« æ…¢æ…¢æ‰©å±•&gt;ï¼šBEGINå¼€å¤´ä¸­é—´æ˜¯å¤åˆè¯­å¥compound statementä¸€ä¸ªç‚¹(dot) â€œ.â€ç»“æŸcompound statementcompound statementæ˜¯ä¸€ä¸ªblock(åŒºå—)ï¼šå®ƒæ ‡æœ‰BEGIN å’Œ END ï¼Œä¸­é—´å¯èƒ½(ä¹Ÿå¯èƒ½æ²¡æœ‰)åŒ…å«æœ‰ä¸€æ®µè¯­å¥æˆ–å…¶ä»–çš„å¤åˆè¯­å¥compound statementæ‰€æœ‰åµŒå…¥åœ¨å¤åˆè¯­å¥ä¸­çš„å¥å­ï¼Œé™¤äº†æœ€åä¸€ä¸ªï¼Œå…¶ä»–çš„éƒ½è¦ä»¥åˆ†å·â€œ;â€ç»“å°¾åœ¨blockä¸­çš„æœ€åä¸€ä¸ªå¥å­(last statement)å¯èƒ½æˆ–å¯èƒ½æ²¡æœ‰ ä¸­æ–­åˆ†å·â€œ;â€å¦‚ä¸‹é¢æ‰€ç¤ºï¼š1234â€œBEGIN ENDâ€â€œBEGIN a := 5; x := 11 ENDâ€â€œBEGIN a := 5; x := 11; ENDâ€â€œBEGIN BEGIN a := 5 END; x := 11 ENDâ€statement listä¸€ä¸ªstatement list å«æœ‰0ä¸ªæˆ–å¤šä¸ªè¯­å¥ï¼Œå…¶ä½äºcompound statementå†…ã€‚å¦‚ä¸Šé¢çš„ä¾‹å­statementä¸€ä¸ªstatementå¯ä»¥æ˜¯ä¸€ä¸ª *compound statementï¼Œ ä¸€ä¸ªèµ‹å€¼è¯­å¥assignment statementï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç©ºè¯­å¥*empty statementã€‚assignment statementä¸€ä¸ªèµ‹å€¼è¯­å¥çš„ç»„æˆï¼šä¸€ä¸ªå˜é‡ åé¢è·Ÿç€ ä¸€ä¸ªæŒ‡å®šçš„tokenï¼ˆtwo characters, â€˜:â€™ and â€˜=â€™ï¼‰ åé¢è·Ÿç€ ä¸€ä¸ªè¡¨è¾¾å¼ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š12â€œa := 11â€â€œb := a + 9 - 5 * 2â€varibleä¸€ä¸ª å˜é‡variableæ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦identifierã€‚æˆ‘ä»¬å°†ç”¨ID tokenæ¥è¡¨ç¤ºvariablesï¼Œè¿™ä¸ªtokençš„valueæ˜¯å˜é‡çš„åå­—(å¦‚ï¼Œâ€˜aâ€™ã€â€˜numberâ€™ã€â€˜xâ€™â€¦..)ã€‚åœ¨ä¸‹é¢çš„ä¸€ä¸ªblockçš„ä»£ç ä¸­çš„â€˜aâ€™ã€â€˜bâ€™å°±æ˜¯å˜é‡ï¼š1â€œBEGIN a := 11; b := a + 9 - 5 * 2 ENDâ€empty statementä¸€ä¸ªç©ºè¯­å¥è¡¨ç¤ºä¸€ä¸ªè¯­æ³•è§„åˆ™ï¼Œè¿™ä¸ªè¯­æ³•è§„åˆ™æ²¡æœ‰æ›´æ·±å±‚çš„äº§ç”Ÿå¼productionsã€‚æˆ‘ä»¬ä½¿ç”¨empty_statementè¯­æ³•è§„åˆ™æ¥æè¿°è¯­æ³•åˆ†æä¸­æœ«å°¾çš„statement_list ï¼›åŒæ—¶ä¹Ÿå…è®¸ä¸€ä¸ªç©ºçš„å¤åˆè¯­å¥compound statementsè¡¨ç¤ºä¸ºï¼šâ€˜BEGIN ENDâ€™factorfactorçš„è§„åˆ™æ›´æ–°ä¸ºå¤„ç†å˜é‡ã€‚å®Œæ•´çš„è¯­æ³•1234567891011121314151617181920212223242526program : compound_statement DOTcompound_statement : BEGIN statement_list ENDstatement_list : statement | statement SEMI statement_liststatement : compound_statement | assignment_statement | emptyassignment_statement : variable ASSIGN exprempty :expr: term ((PLUS | MINUS) term)*term: factor ((MUL | DIV) factor)*factor : PLUS factor | MINUS factor | INTEGER | LPAREN expr RPAREN | variablevariable: IDä¸Šé¢çš„è¯­æ³•ä¸­ï¼Œåœ¨compound_statement rule ä¸­æ²¡æœ‰ç”¨â€œ*â€æ¥è¡¨ç¤ºé‡å¤ï¼ˆ0æˆ–å¤šæ¬¡ï¼‰ï¼Œè€Œæ˜¯æ˜ç¡®çš„åˆ¶å®šäº† statement_list ruleã€‚è¿™æ˜¯å¦ä¸€ç§æ–¹æ³•æ¥è¡¨ç¤ºâ€œ0æˆ–å¤šæ¬¡â€çš„æ“ä½œã€‚è¿™åœ¨åé¢çš„è¯­æ³•åˆ†æå™¨ï¼ˆå¦‚PLYï¼‰ä¼šæ´¾ä¸Šç”¨åœºã€‚æˆ‘è¿˜å°†è§„åˆ™ï¼šâ€œ(PLUS | MINUS) factorâ€ä¹Ÿç»†åˆ†æˆä¸¤ä¸ªè§„åˆ™ã€‚ä¿®æ”¹lexer,parser,interpreterä¸ºäº†æ”¯æŒæ›´æ–°åçš„è¯­æ³•ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹æˆ‘ä»¬çš„æ­¤ç•ªåˆ†æå™¨ã€è¯­æ³•åˆ†æå™¨å’Œè§£é‡Šå™¨ã€‚lexerçš„æ”¹å˜ä¸‹é¢æ˜¯æˆ‘ä»¬æ­¤ç•ªåˆ†æå™¨æœ‰æ”¹åŠ¨çš„åœ°æ–¹ï¼šä¸ºäº†æ”¯æŒPascalç¨‹åºçš„å®šä¹‰ã€å¤åˆè¯­å¥ã€èµ‹å€¼è¯­å¥ã€å˜é‡ã€‚æˆ‘ä»¬éœ€è¦æ–°çš„tokenç±»å‹ï¼šï¼ˆPascal programâ€™s definition, compound statements, assignment statements, and variablesï¼‰BEGIN (æ ‡è®°å¤åˆè¯­å¥çš„å¼€å§‹)END (æ ‡è®°å¤åˆè¯­å¥çš„ç»“æŸ)DOT (ä¸€ä¸ªtokenè¡¨ç¤º ç‚¹ï¼Œç”¨äºPascalç¨‹åºçš„å®šä¹‰)ASSIGN (ä¸€ä¸ªtokenè¡¨ç¤ºä¸¤ä¸ªå­—ç¬¦ï¼Œ â€˜:=â€™)åœ¨Pascalä¸­ï¼Œèµ‹å€¼æ“ä½œç¬¦ä¸åŒäºå…¶ä»–è¯­è¨€ï¼ˆå¦‚Cè¯­è¨€ç”¨ â€œ=â€ï¼‰SEMI (ä¸€ä¸ªtokenè¡¨ç¤ºåˆ†å·â€˜ ; â€™ ã€‚ç”¨æ¥æ ‡è®°åœ¨å¤åˆè¯­å¥ä¸­çš„ä¸€ä¸ªå¥å­çš„ç»“å°¾)IDï¼ˆä¸€ä¸ªtokenè¡¨ç¤º æœ‰æ•ˆçš„æ ‡è¯†ç¬¦ã€‚ï¼‰æœ‰æ—¶å€™ï¼Œä¸ºäº†åŒºåˆ†ä¸åŒtokenï¼ˆå®ƒä»¬éƒ½ä»¥ç›¸åŒçš„å­—ç¬¦ä¸ºå¼€å¤´ï¼Œå¦‚ï¼šâ€˜:â€™ vs â€˜:=â€™ or â€˜==â€™ vs â€˜=&gt;â€™ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸æ¶ˆè€—ä¸‹ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µä¸‹å»æŸ¥çœ‹è¾“å…¥ç¼“å†²åŒºã€‚ä¸ºäº†è¿™ä¸ªç‰¹æ®Šçš„ç›®çš„ï¼Œæˆ‘ä»‹ç»ä¸€ç§æŸ¥çœ‹æ–¹æ³•peek methodï¼Œè¿™ç§æ–¹æ³•å°†å¸®åŠ©æˆ‘ä»¬æ ‡è®°èµ‹å€¼è¯­å¥ã€‚è¿™ä¸ªæ–¹æ³•ä¸æ˜¯å¿…è¦çš„ï¼Œä½†æ˜¯è¿˜æ˜¯æƒ³æ—©ä¸€ç‚¹ä»‹ç»ä¸€ä¸‹ï¼Œå¹¶ä¸”å®ƒä¹Ÿä½¿å¾—get_next_tokenå‡½æ•°ç®€æ´ä¸€äº›ã€‚å®ƒæ‰€åšçš„ç›®çš„å°±æ˜¯ï¼šä»æ–‡æœ¬ç¼“å†²åŒºè¿”å›ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œä½†ä¸å¢åŠ self.posçš„å€¼ã€‚ä¸‹é¢æ˜¯è¿™ä¸ªæ–¹æ³•çš„ä»£ç ï¼š123456def peek(self): peek_pos = self.pos + 1 if peek_pos &gt; len(self.text) - 1: return None else: return self.text[peek_pos]å› ä¸ºpascalä¸­çš„ å˜é‡ å’Œ ä¿ç•™å­— éƒ½æ˜¯ æ ‡è¯†ç¬¦ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªæ–¹æ³•æ¥åŒºåˆ†å®ƒä»¬ï¼Œæ–¹æ³•ä¸ºï¼š_idã€‚å®ƒå·¥ä½œçš„åŸç†ï¼šè¯æ³•åˆ†æå™¨å¯¹è¿™ä¸ªå­—æ¯ã€æ•°å­—åºåˆ—è¿›è¡Œæ£€æŸ¥ï¼Œçœ‹è¿™ä¸ªåºåˆ—æ˜¯å¦æ˜¯ä¿ç•™å­—reserved keywordï¼Œå¦‚æœæ˜¯ï¼Œå°±è¿”å›ä¸€ä¸ªé¢„å…ˆæ„é€ çš„tokenæ¥è¡¨ç¤ºè¿™ä¸ªä¿ç•™å­—ï¼›å¦‚æœä¸æ˜¯ï¼Œå°±è¿”å›ä¸€ä¸ªæ–°çš„ID tokenï¼ˆå®ƒçš„å€¼å°±æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²ï¼‰ï¼ˆlexemeï¼‰.ä¸‹é¢æ˜¯å®ƒçš„ä»£ç ï¼š1234567891011121314RESERVED_KEYWORDS = &#123; 'BEGIN': Token('BEGIN', 'BEGIN'), 'END': Token('END', 'END'),&#125;def _id(self): \"\"\"Handle identifiers and reserved keywords\"\"\" result = '' while self.current_char is not None and self.current_char.isalnum(): result += self.current_char self.advance() token = RESERVED_KEYWORDS.get(result, Token(ID, result)) return tokenè¯æ³•åˆ†æå™¨çš„å‡½æ•°get_next_tokençš„æ”¹å˜:12345678910111213141516171819def get_next_token(self): while self.current_char is not None: ... if self.current_char.isalpha(): return self._id() if self.current_char == ':' and self.peek() == '=': self.advance() self.advance() return Token(ASSIGN, ':=') if self.current_char == ';': self.advance() return Token(SEMI, ';') if self.current_char == '.': self.advance() return Token(DOT, '.') ...parserçš„æ”¹å˜ä¸‹é¢æ˜¯å®ƒçš„æ€»çš„å˜åŒ–ï¼šæ–°çš„ASTç»“ç‚¹ï¼šCompound AST nodeï¼šè¡¨ç¤ºä¸€ä¸ªå¤åˆè¯­å¥ï¼Œåœ¨å®ƒçš„å­©å­çš„å˜é‡ä¸­åŒ…å«ç€è¯­å¥èŠ‚ç‚¹çš„åˆ—è¡¨ï¼›1234class Compound(AST): \"\"\"Represents a 'BEGIN ... END' block\"\"\" def __init__(self): self.children = []Assign AST nodeï¼šè¡¨ç¤ºèµ‹å€¼è¯­å¥ã€‚å®ƒçš„å·¦å­©å­çš„å€¼æ˜¯Var nodeï¼Œå³å­©å­ç»“ç‚¹å­˜å‚¨ç€ç”±exprè§£æå™¨è¿”å›çš„ç»“ç‚¹ã€‚12345class Assign(AST): def __init__(self, left, op, right): self.left = left self.token = self.op = op self.right = rightVar AST nodeï¼šè¡¨ç¤ºä¸€ä¸ªå˜é‡ï¼Œå®ƒçš„valueå°±æ˜¯ç€è¿™ä¸ªå˜é‡çš„åå­—12345class Var(AST): \"\"\"The Var node is constructed out of ID token.\"\"\" def __init__(self, token): self.token = token self.value = token.valueNoOp nodeï¼šç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç©ºè¯­å¥ã€‚å¦‚â€˜BEGIN ENDâ€™ æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å¤åˆè¯­å¥ä½†æ²¡æœ‰å¥å­ã€‚12class NoOp(AST): passæˆ‘ä»¬ä¹‹å‰è®²è¿‡ï¼Œåœ¨æˆ‘ä»¬çš„é€’å½’çš„è¯­æ³•åˆ†æå™¨ä¸­æ¯ä¸€ä¸ªè¯­æ³•çš„è§„åˆ™éƒ½æœ‰ç›¸åº”çš„å‡½æ•°(method)ã€‚è¿™æ¬¡å°†å¢åŠ 7ä¸ªæ–°çš„å‡½æ•°ã€‚è¿™äº›å‡½æ•°éƒ½æ˜¯ç”¨äºè¯­æ³•åˆ†æä¸­æ–°çš„è¯­æ³•å’Œæ–°çš„ASTç»“ç‚¹ã€‚ä¸‹é¢å°±æ˜¯ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374def program(self): \"\"\"program : compound_statement DOT\"\"\" node = self.compound_statement() self.eat(DOT) return nodedef compound_statement(self): \"\"\" compound_statement: BEGIN statement_list END \"\"\" self.eat(BEGIN) nodes = self.statement_list() self.eat(END) root = Compound() for node in nodes: root.children.append(node) return rootdef statement_list(self): \"\"\" statement_list : statement | statement SEMI statement_list \"\"\" node = self.statement() results = [node] while self.current_token.type == SEMI: self.eat(SEMI) results.append(self.statement()) if self.current_token.type == ID: self.error() return resultsdef statement(self): \"\"\" statement : compound_statement | assignment_statement | empty \"\"\" if self.current_token.type == BEGIN: node = self.compound_statement() elif self.current_token.type == ID: node = self.assignment_statement() else: node = self.empty() return nodedef assignment_statement(self): \"\"\" assignment_statement : variable ASSIGN expr \"\"\" left = self.variable() token = self.current_token self.eat(ASSIGN) right = self.expr() node = Assign(left, token, right) return nodedef variable(self): \"\"\" variable : ID \"\"\" node = Var(self.current_token) self.eat(ID) return nodedef empty(self): \"\"\"An empty production\"\"\" return NoOp()factor å‡½æ•°çš„ä¿®æ”¹ï¼š12345678910111213141516def factor(self): \"\"\"factor : PLUS factor | MINUS factor | INTEGER | LPAREN expr RPAREN | variable \"\"\" token = self.current_token if token.type == PLUS: self.eat(PLUS) node = UnaryOp(token, self.factor()) return node ... else: node = self.variable() return nodeparse ï¼šæ›´æ–°ä¹‹åï¼Œå®ƒä»ç¨‹åºçš„å®šä¹‰å¼€å§‹è¯­æ³•çš„åˆ†æï¼š123456def parse(self): node = self.program() if self.current_token.type != EOF: self.error() return nodeä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼š123456789BEGIN BEGIN number := 2; a := number; b := 10 * a + 10 * number / 4; c := a - - b END; x := 11;END.å®ƒçš„è§£ææ ‘ä¸ºï¼ˆä¸ºäº†ç®€æ´ï¼Œä¸‹é¢çš„æ ‘ä¸­å˜é‡çš„åå­—æ‰€åœ¨ç»“ç‚¹å°±æ˜¯Var nodeï¼Œ Assign nodeèµ‹å€¼ç»“ç‚¹è¡¨ç¤ºä¸º â€˜:=â€™ ï¼‰ï¼šinterpreterçš„æ”¹å˜ä¸ºäº†è§£é‡Šæ–°çš„ASTç»“ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨interpreterä¸­æ·»åŠ ç›¸åº”çš„visitor å‡½æ•°ï¼švisit_Compoundvisit_Assignvisit_Varvisit_NoOpå…¶ä¸­ï¼Œvisit_Compoundï¼šéå†å®ƒçš„å­©å­èŠ‚ç‚¹ï¼Œvisit_NoOpï¼šä»€ä¹ˆéƒ½ä¸åšã€‚123456def visit_Compound(self, node): for child in node.children: self.visit(child)def visit_NoOp(self, node): passvisit_Assignï¼šå½“æˆ‘ä»¬ç»™å˜é‡èµ‹å€¼æ—¶ï¼Œéœ€è¦å°†è¯¥å˜é‡çš„å€¼å­˜åˆ°æŸä¸ªåœ°æ–¹ï¼Œå¾…ç”¨ã€‚è¿™ä¹Ÿå°±æ˜¯æ­¤å‡½æ•°çš„åŠŸèƒ½ï¼š123def visit_Assign(self, node): var_name = node.left.value self.GLOBAL_SCOPE[var_name] = self.visit(node.right)è¿™ä¸ªå‡½æ•°å­˜å‚¨äº†ä¸€ä¸ªé”®-å€¼å¯¹key-value pairï¼ˆä¸€ä¸ªå˜é‡åã€ä¸€ä¸ªå˜é‡çš„å€¼ï¼‰ï¼Œå­˜å‚¨åœ¨symbol table GLOBAL_SCOPEã€‚what is symbol table?symbol tableæ˜¯ä¸€ä¸ªæŠ½è±¡æ•°æ®ç±»å‹ï¼ˆabstract data type (ADT)ï¼‰ï¼Œç”¨äºè·Ÿè¸ªæºç ä¸­å„ç§ç¬¦å·ã€‚ç›®å‰çš„ç¬¦å·ç±»å‹è¿˜åªæœ‰å˜é‡ï¼Œæˆ‘ä»¬ç”¨Pythonå­—å…¸è¶‹åŠ¿çº¿ç¬¦å·è¡¨çš„ADTã€‚ï¼ˆåœ¨è¿™é‡Œç”¨ç¬¦å·å­—è¡¨ å®ç°çš„ç¬¨æ‹™ï¼šå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ªå¸¦æœ‰ç‰¹æ®Šæ–¹æ³•çš„ç‹¬ç«‹ç±»ï¼Œè€Œæ˜¯ä¸€ä¸ªç®€å•çš„Pythonå­—å…¸ï¼Œè€Œä¸”å®ƒçš„å¦å¤–èŒè´£æ˜¯ å†…å­˜ç©ºé—´ã€‚åœ¨åé¢çš„æ–‡ç« ä¸­ï¼ŒåŸä½œè€…å°†ä¼šå¸¦æˆ‘ä»¬äº†è§£symbol tablesçš„ç»†èŠ‚ï¼‰è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹â€œa := 3;â€ çš„ASTï¼Œå’Œå®ƒçš„ symbol table ï¼ˆvisit_Assign å‡½æ•°å¤„ç†å‰å’Œå¤„ç†åçš„ï¼‰ï¼šç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¥å­ï¼šâ€œb := a + 7;â€çš„ASTï¼švisit_Varï¼šå¯ä»¥çœ‹å‡ºï¼Œèµ‹å€¼è¯­å¥å¾—åˆ°å³åŠéƒ¨åˆ†ï¼šâ€œa + 7â€ æåŠå˜é‡aï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆçŸ¥é“å˜é‡açš„valueï¼Œè¿™å°±æ˜¯visit_Varå‡½æ•°è¦å¹²çš„äº‹æƒ…ï¼š1234567def visit_Var(self, node): var_name = node.value val = self.GLOBAL_SCOPE.get(var_name) if val is None: raise NameError(repr(var_name)) else: return valvisit ä¸€ä¸ª Var ç»“ç‚¹ï¼šå®ƒé¦–å…ˆå¾—åˆ°å˜é‡çš„åå­—ï¼›ç„¶åè¿™ä¸ªå˜é‡åå­—ä½œä¸ºè¿›å…¥GLOBAL_SCOPE dictionaryçš„keyğŸ”‘å»å¯»æ‰¾å˜é‡çš„valueï¼Œå¦‚æœæ‰¾åˆ°äº† å°±è¿”å›å˜é‡åœ°å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±NameErrorå‡½æ•°ä¼ºå€™ã€‚ä¸‹é¢æ˜¯â€œb := a + 7;â€çš„ASTå’Œç¬¦å·è¡¨ï¼ˆèµ‹å€¼å‰å’Œå¤åˆ¶åï¼‰ä¸Šé¢å°±æ˜¯ä»Šå¤©æ‰€æœ‰éœ€è¦è¿›è¡Œçš„updateäº†ã€‚At the end of the main program, we simply print the contents of the symbol table GLOBAL_SCOPE to standard output.Letâ€™s take our updated interpreter for a drive both from a Python interactive shell and from the command line. Make sure that you downloaded both the source code for the interpreter and the assignments.txt file before testing:Launch your Python shell:123456789101112131415161718192021$ python&gt;&gt;&gt; from spi import Lexer, Parser, Interpreter&gt;&gt;&gt; text &#x3D; &quot;&quot;&quot;\\... BEGIN...... BEGIN... number :&#x3D; 2;... a :&#x3D; number;... b :&#x3D; 10 * a + 10 * number &#x2F; 4;... c :&#x3D; a - - b... END;...... x :&#x3D; 11;... END.... &quot;&quot;&quot;&gt;&gt;&gt; lexer &#x3D; Lexer(text)&gt;&gt;&gt; parser &#x3D; Parser(lexer)&gt;&gt;&gt; interpreter &#x3D; Interpreter(parser)&gt;&gt;&gt; interpreter.interpret()&gt;&gt;&gt; print(interpreter.GLOBAL_SCOPE)&#123;&#39;a&#39;: 2, &#39;x&#39;: 11, &#39;c&#39;: 27, &#39;b&#39;: 25, &#39;number&#39;: 2&#125;And from the command line, using a source file as input to our interpreter:12$ python spi.py assignments.txt&#123;&#39;a&#39;: 2, &#39;x&#39;: 11, &#39;c&#39;: 27, &#39;b&#39;: 25, &#39;number&#39;: 2&#125;If you havenâ€™t tried it yet, try it now and see for yourself that the interpreter is doing its job properly.summaryè®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ï¼Œä½ ä»Šå¤©æ‰©å±•äº†Pascalè§£é‡Šå™¨çš„å“ªäº›éƒ¨åˆ†ï¼šæ·»åŠ æ–°çš„è¯­æ³•è§„åˆ™æ·»åŠ æ–°çš„tokenï¼Œå’Œå®ƒå¯¹åº”è¯æ³•åˆ†æå™¨ä¸­çš„æ–¹æ³•ï¼ˆä¹Ÿæ›´æ–°äº†get_next_tokenï¼‰åœ¨ parser ä¸­ä¸ºæ–°çš„è¯­æ³•ç»“æ„æ·»åŠ æ–°çš„ASTç»“ç‚¹åœ¨ï¼ˆé€’å½’ä¸‹é™çš„ï¼‰è¯­æ³•åˆ†æä¸­ æ·»åŠ ç›¸åº”å¯¹åº”æ–°è¯­æ³•è§„åˆ™çš„æ–°å‡½æ•°ï¼Œåœ¨interpreterä¸­å¢æ·»äº†æ–°çš„visitorå‡½æ•°æ–°å¢ ç”¨äºå­˜å‚¨å’ŒæŸ¥æ‰¾å˜é‡çš„å­—å…¸HACKSç°åœ¨è¦ä»‹ç»ä¸€ä¸‹â€œhacksâ€ï¼ˆä¸å®Œå–„çš„åœ°æ–¹ï¼‰ï¼Œå¹¶ä¸”éšç€ç³»åˆ—æ–‡ç« çš„æ·±å…¥ï¼Œæˆ‘ä»¬è¿˜å°†ä¸€æ­¥æ­¥è§£å†³è¿™äº›å†…å®¹ï¼šä¸Šå›¾ä¸­çš„ä¸å®Œå–„çš„åœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯è¿™äº›ï¼šprogram è¯­æ³•è§„åˆ™ç›®å‰ä¸å®Œå–„ï¼Œåœ¨åç»­æ–‡ç« ä¼šæ‰©å±•ï¼›Pascalè¯­è¨€æ˜¯ä¸€ä¸ªé™æ€ç±»å‹è¯­è¨€ï¼Œåœ¨ä½¿ç”¨å˜é‡ä¹‹å‰å¿…é¡»è¦å…ˆå£°æ˜ï¼›æ²¡æœ‰ç±»å‹æ£€æµ‹ï¼Œç›®å‰è¿˜ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ã€‚ä½†å½“æœ‰æ›´å¤šç±»å‹çš„æ—¶å€™ï¼Œå°±éœ€è¦ç±»å‹æ£€æµ‹ï¼›ç¬¦å·è¡¨ç›®å‰ä¸ºæ­¢ï¼Œéƒ½æ˜¯ç”¨â€œ/â€æ¥è¡¨ç¤ºé™¤æ³•ã€‚ä½†åœ¨Pascalè¯­è¨€ä¸­ï¼Œå¿…é¡»è¦ç”¨å…³é”®å­—â€œdivâ€æ¥è¡¨ç¤ºæ•´æ•°é™¤æ³•ï¼›åœ¨Pascalè¯­è¨€ä¸­ï¼Œæ ‡è¯†ç¬¦ å’Œ ä¿ç•™å­— æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„(case insensitive)ã€‚ä½†æ˜¯åœ¨ç›®å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æŠŠå®ƒè®¾è®¡æˆäº†åŒºåˆ†å¤§å°å†™ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Let's Build A Simple Interpreter","slug":"Let-s-Build-A-Simple-Interpreter","permalink":"https://longlongqin.github.io/tags/Let-s-Build-A-Simple-Interpreter/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"Front-matterçš„è§„åˆ™","slug":"Hexoåšå®¢æ­å»º/Front-matterçš„è§„åˆ™","date":"2020-03-16T14:08:32.497Z","updated":"2020-03-17T08:15:54.491Z","comments":true,"path":"archives/138a.html","link":"","permalink":"https://longlongqin.github.io/archives/138a.html","excerpt":"æ–‡ç« å†™ä½œæ—¶ï¼Œçš„front matter çš„å‚æ•°","text":"æ–‡ç« å†™ä½œæ—¶ï¼Œçš„front matter çš„å‚æ•°å‚æ•°æè¿°layoutå¸ƒå±€titleæ ‡é¢˜dateå»ºç«‹æ—¥æœŸupdatedæ›´æ–°æ—¥æœŸcommentså¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½tagsæ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰categoriesåˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰permalinkè¦†ç›–æ–‡ç« ç½‘å€å…¶ä¸­ï¼Œåˆ†ç±»å’Œæ ‡ç­¾éœ€è¦åŒºåˆ«ä¸€ä¸‹ï¼Œåˆ†ç±»å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´Fooï¼ŒBarä¸ç­‰äºBarï¼ŒFooï¼›è€Œæ ‡ç­¾æ²¡æœ‰é¡ºåºå’Œå±‚æ¬¡ã€‚æ³¨æ„ï¼šæ¯ä¸ªå†’å·åé¢æ˜¯æœ‰ä¸€ä¸ªç©ºæ ¼çš„ã€‚1234567891011121314151617title: æ–‡ç« çš„front-matterè§„åˆ™ // ä½ çš„åšå®¢åå­— date: 2019-08-10 21:44:44 //æ–‡ç« åˆ›å»ºçš„æ—¥æœŸauthor: longlongqin //ä½œè€…åå­—img: /medias/banner/6.jpg //æ–‡ç« çš„æ˜¾ç¤ºçš„æ—¶å€™çš„èƒŒæ™¯coverImg: /medias/banner/6.jpg top: truecover: truetoc: truepassword: mathjax: truesummary: è¿™æ˜¯ä½ è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦tags:- Hexo- Github- åšå®¢categories:- è½¯ä»¶å®‰è£…ä¸é…ç½®é…ç½®é€‰é¡¹é»˜è®¤å€¼æè¿°titleMarkdown çš„æ–‡ä»¶æ ‡é¢˜æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹dateæ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€authoræ ¹ _config.ymlä¸­çš„ authoræ–‡ç« ä½œè€…imgfeatureImagesä¸­çš„æŸä¸ªå€¼æ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: http://xxx.com/xxx.jpgtoptrueæ¨èæ–‡ç« ï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ top å€¼ä¸º trueï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µæ¨èæ–‡ç« coverfalsev1.0.2ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­coverImgæ— v1.0.2ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡passwordæ— æ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® password çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ SHA256 åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ config.yml ä¸­æ¿€æ´»äº† verifyPassword é€‰é¡¹toctrueæ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ config.yml ä¸­æ¿€æ´»äº† toc é€‰é¡¹mathjaxfalseæ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ mathjaxï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ _config.yml æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œsummaryæ— æ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦categoriesæ— æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»tagsæ— æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾reprintPolicycc_byæ–‡ç« è½¬è½½è§„åˆ™ï¼Œ å¯ä»¥æ˜¯ cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint æˆ– pay ä¸­çš„ä¸€ä¸ªæ³¨æ„:å¦‚æœ img å±æ€§ä¸å¡«å†™çš„è¯ï¼Œæ–‡ç« ç‰¹è‰²å›¾ä¼šæ ¹æ®æ–‡ç« æ ‡é¢˜çš„ hashcode çš„å€¼å–ä½™ï¼Œç„¶åé€‰å–ä¸»é¢˜ä¸­å¯¹åº”çš„ç‰¹è‰²å›¾ç‰‡ï¼Œä»è€Œè¾¾åˆ°è®©æ‰€æœ‰æ–‡ç« éƒ½çš„ç‰¹è‰²å›¾å„æœ‰ç‰¹è‰²ã€‚date çš„å€¼å°½é‡ä¿è¯æ¯ç¯‡æ–‡ç« æ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºæœ¬ä¸»é¢˜ä¸­ Gitalk å’Œ Gitment è¯†åˆ« id æ˜¯é€šè¿‡ date çš„å€¼æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„ã€‚å¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„åŠŸèƒ½ï¼Œä¸ä»…è¦åœ¨ Front-matter ä¸­è®¾ç½®é‡‡ç”¨äº† SHA256 åŠ å¯†çš„ password çš„å€¼ï¼Œè¿˜éœ€è¦åœ¨ä¸»é¢˜çš„ _config.yml ä¸­æ¿€æ´»äº†é…ç½®ã€‚æœ‰äº›åœ¨çº¿çš„ SHA256 åŠ å¯†çš„åœ°å€ï¼Œå¯ä¾›ä½ ä½¿ç”¨ï¼šå¼€æºä¸­å›½åœ¨çº¿å·¥å…·ã€chahuoã€ç«™é•¿å·¥å…·ã€‚","categories":[{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"https://longlongqin.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"}],"tags":[{"name":"front-matteré…ç½®","slug":"front-matteré…ç½®","permalink":"https://longlongqin.github.io/tags/front-matter%E9%85%8D%E7%BD%AE/"}]},{"title":"Letâ€™s Build A Simple Interpreter-8","slug":"å­¦ä¹ ç¬”è®°/Let's Build A Simple Interpreter/LSBASI-8","date":"2020-03-15T10:04:49.000Z","updated":"2020-03-18T06:21:29.606Z","comments":true,"path":"archives/ae12.html","link":"","permalink":"https://longlongqin.github.io/archives/ae12.html","excerpt":"ä»Šå¤©ï¼Œå°†è¦åœ¨å‰é¢çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ ä¸€å…ƒæ“ä½œç¬¦unary operatorsï¼šunary plus (+) and unary minus (-) operatorsã€‚","text":"ä»Šå¤©ï¼Œå°†è¦åœ¨å‰é¢çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ ä¸€å…ƒæ“ä½œç¬¦unary operatorsï¼šunary plus (+) and unary minus (-) operatorsã€‚ä»Šå¤©å°†è¦å®Œæˆçš„ä»»åŠ¡ï¼šæ‰©å±•è¯­æ³•ï¼Œèƒ½å¤Ÿå¤„ç†â€œ+â€ã€â€œ-â€ä¸€å…ƒæ“ä½œç¬¦ï¼›æ·»åŠ ä¸€ä¸ªæ–°çš„ç»“ç‚¹ç±»ï¼šUnaryOp AST node classï¼›æ‰©å±•è¯­æ³•åˆ†æå™¨parserï¼Œç”Ÿæˆå«æœ‰UnaryOp nodesç»“ç‚¹çš„æŠ½è±¡è¯­æ³•æ ‘ï¼›æ‰©å±•è§£é‡Šå™¨interpreterã€‚å¹¶ä¸”å¢æ·»ä¸€ä¸ªæ–°çš„visit_UnaryOp methodå‡½æ•°ï¼Œå®ƒå¯ä»¥è§£æä¸€å…ƒæ“ä½œç¬¦ç°åœ¨ï¼Œå¼€å§‹å§ã€‚ä¸€å…ƒæ“ä½œç¬¦ä¸€å…ƒæ“ä½œç¬¦æ˜¯ä»€ä¹ˆï¼ŸäºŒå…ƒæ“ä½œç¬¦ï¼šä¹‹å‰ï¼Œæˆ‘ä»¬çš„è®¡ç®—å™¨éƒ½æ˜¯å›´ç»•ç€è¿™äº›äºŒå…ƒæ“ä½œç¬¦ (+, -, *, /)åœ¨å·¥ä½œï¼Œè¿™äº›æ“ä½œç¬¦æ“ä½œä¸¤ä¸ªæ“ä½œæ•°ï¼ˆthe operators that operate on two operands.ï¼‰ã€‚ä¸€å…ƒæ“ä½œç¬¦unary operator ï¼šé‚£ä¹ˆï¼Œæˆ‘ä»¬å°±èƒ½çŸ¥é“ä¸€å…ƒæ“ä½œç¬¦æ˜¯ï¼šä¸€ä¸ªæ“ä½œç¬¦åªæ“ä½œä¸€ä¸ªæ“ä½œæ•°ã€‚ï¼ˆA unary operator is an operator that operates on one operand only.ï¼‰ä¸€å…ƒæ“ä½œç¬¦çš„è§„åˆ™ä¸‹é¢æ˜¯ä¸€å…ƒæ“ä½œç¬¦â€œ+ã€-â€çš„è§„åˆ™ï¼šä¸€å…ƒæ“ä½œç¬¦-ï¼šå®ƒä¼šä½¿å®ƒçš„æ“ä½œæ•°å–åï¼ˆnegationï¼‰ä¸€å…ƒæ“ä½œç¬¦+ï¼šä»–å¯¹äºå®ƒçš„æ“ä½œæ•°æ²¡å½±å“ï¼Œå³ï¼Œå®ƒçš„æ“ä½œæ•°ä¸æ”¹å˜ä»€ä¹ˆä¸€å…ƒæ“ä½œç¬¦æ¯”äºŒå…ƒæ“ä½œç¬¦ï¼ˆ+, -, *, and /ï¼‰æœ‰ç€æ›´é«˜çš„ä¼˜å…ˆçº§ï¼ˆprecedenceï¼‰ä¾‹å­ï¼šâ€œ+ - 3â€å…¶ä¸­ï¼Œè¿™ç¬¬ä¸€ä¸ªä½ç½®çš„â€œ+â€è¡¨ç¤ºä¸€å…ƒæ“ä½œç¬¦åŠ å·æ“ä½œï¼›ç¬¬äºŒä¸ªä½ç½®çš„â€œ-â€è¡¨ç¤ºä¸€å…ƒæ“ä½œç¬¦å‡å·æ“ä½œã€‚æ‰€ä»¥ï¼Œâ€œ+ - 3â€å°±ç›¸å½“äºâ€œ+ (- (3))â€ï¼Œå³ï¼Œç­‰äº-3ã€‚ã€æ³¨ã€‘ï¼šè¿™é‡Œçš„-3å¹³å¸¸æƒ…å†µè¯´å®ƒæ˜¯ä¸€ä¸ªè´Ÿæ•´æ•°ï¼ˆnegative integerï¼‰ï¼Œä½†æ˜¯åœ¨è¿™é‡Œæˆ‘ä»¬ç§°å®ƒæ˜¯ï¼šä¸€ä¸ªä¸€å…ƒæ“ä½œç¬¦â€œ-â€ï¼Œå®ƒçš„æ“ä½œæ•°æ˜¯3ã€‚â€œ5 - - 2â€åœ¨è¿™ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œç¬¬ä¸€ä¸ªâ€œ-â€è¡¨ç¤ºä¸€ä¸ªäºŒå…ƒæ“ä½œç¬¦ï¼šå‡æ³•ã€‚ç¬¬äºŒä¸ªâ€œ-â€è¡¨ç¤ºä¸€ä¸ªä¸€å…ƒæ“ä½œç¬¦ï¼šå–åã€‚æ¯”å¦‚ä¸‹é¢çš„ä¸€äº›ä¾‹å­ï¼Œä¹Ÿæ˜¯è¿™ä¸ªæ ·å­ï¼šå¼€å§‹ä¿®æ”¹å°†ä¸€å…ƒæ“ä½œç¬¦æ·»åŠ å…¥è¯­æ³•ä¿®æ”¹factorå› ä¸ºï¼Œä¸€å…ƒæ“ä½œç¬¦çš„ä¼˜å…ˆçº§é«˜äºäºŒå…ƒæ“ä½œç¬¦ã€‚æ‰€ä»¥ï¼Œå‡½æ•°factoréœ€è¦éœ€æ”¹ã€‚å®ƒä¹‹å‰çš„è§„åˆ™ä¸ºï¼šæ›´æ–°åçš„ï¼Œè§„åˆ™ä¸ºï¼šä»æ›´æ–°åçš„factorå‡½æ•°çš„è§„åˆ™ï¼Œå¯çŸ¥ï¼šå®ƒæ‰©å±•ä¹‹åèƒ½å¤Ÿå¼•ç”¨å®ƒæœ¬èº«ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿå†™å‡ºç±»ä¼¼äºï¼š- - - + - 3â€è¿™æ ·çš„å¼å­ï¼Œè¿™æ˜¯åˆæ³•çš„å¸¦æœ‰å¾ˆå¤šä¸€å…ƒæ“ä½œç¬¦çš„è¡¨è¾¾å¼ã€‚å…¶å®ï¼Œè¿™é‡Œä¿®æ”¹è¯­æ³•ï¼Œåªç”¨ä¿®æ”¹factorå‡½æ•°çš„äº§ç”Ÿå¼ï¼Œå…¶ä»–çš„exprã€termäº§ç”Ÿå¼ä¸å˜ï¼šæ‰©å±•æŠ½è±¡è¯­æ³•æ ‘çš„ç»“ç‚¹ç±»ä¸‹ä¸€æ­¥å°±æ˜¯è¦æ·»åŠ ä¸€ä¸ªAST node classï¼Œæ¥è¡¨ç¤ºä¸€å…ƒæ“ä½œç¬¦ï¼š1234class UnaryOp(AST): def __init__(self, op, expr): self.token = self.op = op self.expr = exprè¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼šopã€exprï¼šopï¼šä»£è¡¨ä¸€å…ƒæ“ä½œç¬¦çš„tokenï¼ˆ+æˆ–-ï¼‰exprï¼šè¡¨ç¤ºä¸€ä¸ªASTçš„ç»“ç‚¹ï¼ˆè¦ä¸exprå‡½æ•°åŒºåˆ†ï¼Œè¿™ä¸¤ä¸ªçŸ¥è¯†åå­—ä¸€æ ·ï¼Œä½†æ˜¯ä»£è¡¨çš„ä¸œè¥¿ä¸ä¸€æ ·ï¼‰æ‰©å±•è¯­æ³•åˆ†æå™¨parserä¹‹å‰æˆ‘ä»¬ä¿®æ”¹äº†è¯­æ³•è§„åˆ™ï¼Œå½“ä¸­çš„factorå‡½æ•°çš„äº§ç”Ÿå¼ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬å°†è¦ä¿®æ”¹ä»£ç ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†äº§ç”Ÿå¼ä¸­çš„ â€œ(PLUS | MINUS) factorâ€ å­è§„åˆ™ï¼š1234567891011121314151617181920def factor(self): \"\"\"factor : (PLUS | MINUS) factor | INTEGER | LPAREN expr RPAREN\"\"\" token = self.current_token if token.type == PLUS: self.eat(PLUS) node = unaryop(token, self.factor()) return node elif token.type == MINUS: self.eat(MINUS) node = unaryop(token, self.facot()) return node elif token.type == INTEGER: self.eat(INTEGER) node = NUM(token) return node elif token.type == LPAREN: self.eat(LPAREN) node = self.expr() self.eat(RPAREN) return nodeæ‰©å±•è§£é‡Šå™¨Interpreterç°åœ¨æˆ‘ä»¬è¿˜éœ€è¦æ‰©å±•è§£é‡Šå™¨ç±»Interpreter class ï¼Œå‘å…¶ä¸­æ·»åŠ visit_UnaryOp å‡½æ•°ï¼Œæ¥è§£é‡Šä¸€å…ƒæ“ä½œç¬¦ç»“ç‚¹ï¼š123456def visit_UnaryOp(self, node) op = node.op.type #tokençš„ç±»å‹ if op == PLUS: return +self.visit(node.expr) elif op == MINUS: return -self.visit(node.expr)ä¾‹å­è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œè¡¨è¾¾å¼ â€œ5 - - - 2â€ ï¼Œé€šè¿‡æˆ‘ä»¬çš„è§£æå™¨æ¥è¯å®è¿™ä¸ªæ–°çš„visit_UnaryOpå‡½æ•°ç¡®å®èµ·ä½œç”¨äº†ã€‚ä¸‹é¢æ˜¯å¦‚ä½•ä»Python shellä¸­å®ç°:12345678910111213&gt;&gt;&gt; from spi import BinOp, UnaryOp, Num, MINUS, INTEGER, Token&gt;&gt;&gt; five_tok = Token(INTEGER, 5)&gt;&gt;&gt; two_tok = Token(INTEGER, 2)&gt;&gt;&gt; minus_tok = Token(MINUS, '-')&gt;&gt;&gt; expr_node = BinOp(... Num(five_tok),... minus_tok,... UnaryOp(minus_token, UnaryOp(minus_token, Num(two_tok)))... )&gt;&gt;&gt; from spi import Interpreter&gt;&gt;&gt; inter = Interpreter(None)&gt;&gt;&gt; inter.visit(expr_node)3ä¸Šé¢çš„ASTæ ‘çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Let's Build A Simple Interpreter","slug":"Let-s-Build-A-Simple-Interpreter","permalink":"https://longlongqin.github.io/tags/Let-s-Build-A-Simple-Interpreter/"}]},{"title":"æ„é€ å‡¸åŒ…â€”â€”Divide And Conquer","slug":"å­¦ä¹ ç¬”è®°/è®¡ç®—å‡ ä½•/Convex-Hull/Divide-And-Conquererer","date":"2020-03-15T08:12:57.000Z","updated":"2020-03-22T06:58:07.022Z","comments":true,"path":"archives/f32f.html","link":"","permalink":"https://longlongqin.github.io/archives/f32f.html","excerpt":"Graham Scanç®—æ³•è¯´æ˜äº†å‡¸åŒ…æ„é€ é—®é¢˜çš„ä¸‹ç•ŒO(nlogn)æ˜¯å¯ä»¥è¾¾åˆ°çš„ã€‚å…¶å®O(nlogn)çš„ç®—æ³•è¿œä¸æ­¢è¿™ä¸€ç§ï¼Œåˆ†æ²»æ³•å°±æ˜¯ä¸€ç§èƒ½è¾¾åˆ°O(nlogn)å¤æ‚åº¦çš„æ€æƒ³ã€‚åœ¨æ­¤å¼•å…¥è¿ç”¨åˆ†æ²»æ€æƒ³çš„ä¸¤ç§ç®—æ³•æ¥æ„é€ å‡¸åŒ…ã€‚","text":"Graham Scanç®—æ³•è¯´æ˜äº†å‡¸åŒ…æ„é€ é—®é¢˜çš„ä¸‹ç•ŒO(nlogn)æ˜¯å¯ä»¥è¾¾åˆ°çš„ã€‚å…¶å®O(nlogn)çš„ç®—æ³•è¿œä¸æ­¢è¿™ä¸€ç§ï¼Œåˆ†æ²»æ³•å°±æ˜¯ä¸€ç§èƒ½è¾¾åˆ°O(nlogn)å¤æ‚åº¦çš„æ€æƒ³ã€‚åœ¨æ­¤å¼•å…¥è¿ç”¨åˆ†æ²»æ€æƒ³çš„ä¸¤ç§ç®—æ³•æ¥æ„é€ å‡¸åŒ…ã€‚å½’å¹¶æ’åºä¸åˆ†æ²»æ€æƒ³å¼•å…¥æ–°ç®—æ³•ä¹‹å‰ä¾æ—§å…ˆæ¥å›é¡¾ä¸€ä¸ªç»å…¸æ’åºç®—æ³•ï¼šå½’å¹¶æ’åºï¼ˆmerge sortï¼‰ã€‚å½’å¹¶æ’åºçš„åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼šç®—æ³•åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šåˆ†ï¼ˆdivideï¼‰å’Œå½’å¹¶ï¼ˆmergeï¼‰ã€‚åˆ†çš„é˜¶æ®µå°†å¾…æ’åºåˆ—å‡åˆ†åˆ°ä¸€ä¸ªä¸ªå­åºåˆ—ï¼ˆå¦‚å›¾ä¸­åˆ’åˆ†åˆ°å•ä¸ªå…ƒç´ ï¼‰ã€‚å½’å¹¶é˜¶æ®µå°†åˆ†å¥½çš„å­åºåˆ—ä¸¤ä¸¤åˆå¹¶æˆæœ‰åºåºåˆ—ï¼Œé‡å¤åˆå¹¶çš„è¿‡ç¨‹ç›´åˆ°æ•´ä½“å½’ä¸ºä¸€ä¸ªåºåˆ—ã€‚å½’å¹¶è¿‡ç¨‹å…±lognæ­¥ï¼Œæ¯æ­¥è€—è´¹nçš„æ—¶é—´ï¼Œæ€»ä½“å¤æ‚åº¦ä¸ºO(nlogn)ã€‚å½’å¹¶æ’åºçš„è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ†æ²»ï¼ˆdivide-and-conquerï¼‰ç­–ç•¥ã€‚å‡¸åŒ…æ„é€ é—®é¢˜ä¹Ÿå¯ä»¥å¥—ç”¨è¿™ç§ç­–ç•¥æ¥åˆ†è€Œæ²»ä¹‹ï¼Œé€æ­¥æ±‚è§£ã€‚æˆ‘ä»¬å¯ä»¥å°†å¾…å¤„ç†ç‚¹é›†Såˆ†ä¸ºåŒç­‰è§„æ¨¡çš„ä¸¤ä¸ªå­ç‚¹é›†ï¼Œå¹¶åˆ†åˆ«å¯¹å…¶æ±‚å‡¸åŒ…ã€‚æœ‰äº†ä¸¤ä¸ªå­è§£åï¼Œé—®é¢˜å°±å˜æˆäº†å¦‚ä½•é€‚å½“åŠ ä¸€äº›è¾¹ï¼Œå°†ä¸¤ä¸ªå­å‡¸åŒ…mergeæˆæ•´ä½“è§£ã€‚åˆ†æ²»æ³•æ ¸å¿ƒçš„ä»»åŠ¡å°±æ˜¯å¦‚ä½•mergeã€‚Divide And Conquerï¼ˆ1ï¼‰é¢„å¤„ç†ä¸ºstar-shaped polygonåˆ†æ²»æ³•è§£å†³é—®é¢˜çš„è¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šå¤§äº‹åŒ–å°ï¼Œå°äº‹åŒ–äº†ã€‚å°±æ˜¯é¦–å…ˆå°†é—®é¢˜åˆ’åˆ†ä¸ºæ˜“æ±‚è§£çš„å­é—®é¢˜ï¼Œå­é—®é¢˜å¥—ç”¨å·²çŸ¥æ–¹æ³•è§£ç­”å³å¯ã€‚ä¾‹å¦‚å­å‡¸åŒ…çš„æ„é€ å°±èƒ½ç”¨Graham Scanæ¥è§£å†³ã€‚Graham Scanè§£å†³é—®é¢˜çš„å‰ææ˜¯ï¼šå‚ç…§åŸºå‡†ç‚¹ï¼Œå…¶ä»–ç‚¹æŒ‰æè§’æœ‰åºæ’åˆ—ï¼Œä¹Ÿå°±æ˜¯æ„æˆäº†ä¸€ä¸ªæœ‰åºçš„æ˜Ÿå½¢å¤šè¾¹å½¢ï¼ˆstar-shaped polygonï¼‰ã€‚é¦–å…ˆè¦åšçš„å°±æ˜¯å°†ä¸¤ä¸ªå­å‡¸åŒ…é¢„å¤„ç†æˆä¸¤ä¸ªstar-shaped polygonã€‚star-shaped polygonæ˜Ÿå½¢å¤šè¾¹å½¢æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å°±æ˜¯åœ¨å¤šè¾¹å½¢å†…éƒ¨å­˜åœ¨ä¸€ä¸ªç‚¹Aï¼Œè¿™ä¸ªç‚¹ä¸å¤šè¾¹å½¢å†…ä»»æ„ä¸€ç‚¹çš„è¿çº¿éƒ½åœ¨å¤šè¾¹å½¢å†…éƒ¨ï¼Œå°±å«åšæ˜Ÿå½¢å¤šè¾¹å½¢ï¼Œè¿™ä¸€ä¸ªç‚¹Aå°±å«åšå¤šè¾¹å½¢çš„å†…æ ¸ã€‚ç”±äºä»»ä½•ä¸€ä¸ªå‡¸å¤šè¾¹å½¢éƒ½æ˜¯star-shaped polygonï¼Œå®ƒå¿…ç„¶æœ‰ä¸€ä¸ªæ ¸ï¼Œå…¶ä»–ç‚¹æŒ‰æè§’æœ‰åºæ’åˆ—ã€‚é—®é¢˜åœ¨äºå¦‚ä½•æ‰¾åˆ°ä¸€ä¸ªå…¬å…±æ ¸ï¼Œä½¿å¾—ä¸¤ä¸ªå­å‡¸åŒ…åŒæ—¶å…³äºè¿™ä¸ªæ ¸æ˜¯æè§’æœ‰åºæ’åˆ—çš„ã€‚ä¹Ÿå°±æ˜¯å…¬å…±æ ¸å¤„äºä¸¤ä¸ªå‡¸åŒ…çš„äº¤éƒ¨åˆ†ï¼Œè¿™æ ·æ˜¯æœ€å¥½å¤„ç†çš„æƒ…å†µï¼ˆå¦‚ä¸‹å·¦å›¾ï¼‰ã€‚ä¸è¿‡è¿˜æœ‰å¯èƒ½æœ‰å…¶ä»–æƒ…å†µï¼Œä¸èƒ½æ‰¾åˆ°å…¬å…±æ ¸ï¼ˆå¦‚ä¸‹ä¸­å›¾ï¼‰ï¼Œç”šè‡³ä¸¤ä¸ªå‡¸åŒ…æ ¹æœ¬ä¸ç›¸äº¤ï¼ˆå¦‚ä¸‹å³å›¾ï¼‰ï¼šè¿™å°±è¦å°†åˆ†æ²»ç­–ç•¥åˆ†ä¸åŒæƒ…å†µæ¥å®ç°ï¼šä¸¤ä¸ªå­å‡¸åŒ…æœ‰å…¬å…±æ ¸ï¼šå…ˆæ‰¾å…¶ä¸­ä¸€ä¸ªå­å‡¸åŒ…çš„æ ¸ï¼šæˆ‘ä»¬å¯ä»¥ä»»å–è¯¥å­å‡¸åŒ…ä¸Šçš„ä¸‰ç‚¹æ„æˆä¸‰è§’å½¢ï¼Œæ±‚ä¸‰è§’å½¢é‡å¿ƒä½œä¸ºæ ¸ã€‚ç„¶ååˆ¤æ–­è¿™ä¸ªæ ¸æ˜¯å¦ä¹Ÿåœ¨å¦ä¸€ä¸ªå­å‡¸åŒ…å†…éƒ¨ï¼Œè‹¥åˆ¤å®šä¸ºçœŸï¼Œå°±æ˜¯æœ‰å…¬å…±æ ¸çš„æœ€ç®€å•æƒ…å†µã€‚åˆ¤å®šæ–¹æ³•ä¹Ÿå°±æ˜¯ä¹‹å‰æè¿‡çš„in convex polygon testï¼Œå¯¹å‡¸åŒ…æ¯æ¡è¾¹åšto left testå³å¯ï¼Œåœ¨çº¿æ€§æ—¶é—´å†…å¯ä»¥åˆ¤å®šã€‚æ‰¾åˆ°å…¬å…±æ ¸ä¹‹åï¼Œè¿›è¡Œå‡¸åŒ…å½¢æˆï¼šâ€”-ç”¨äºŒè·¯å½’å¹¶ç›¸å¯¹äºå…¬å…±æ ¸ï¼Œä¸¤ä¸ªå­å‡¸åŒ…çš„å„è‡ªæœ‰åºæ’åˆ—ï¼Œç›¸äº’äº¤é”™ã€‚è¦åšçš„å°±æ˜¯å°†äºŒè€…ç‚¹åºåˆ—åˆå¹¶ï¼Œæ–¹æ³•æ­£æ˜¯ç»å…¸çš„äºŒè·¯å½’å¹¶ï¼Œçº¿æ€§æ—¶é—´å¯ä»¥å®Œæˆã€‚æœ€åè¿›è¡ŒGraham Scanå³å¯å¾—åˆ°å¤§å‡¸åŒ…ã€‚ä¸€ä¸ªå­å‡¸åŒ…çš„æ ¸è½åœ¨å¦ä¸€ä¸ªå­å‡¸åŒ…å¤–éƒ¨ï¼šå­˜åœ¨å…¬å…±æ ¸çš„æƒ…å†µå¤„ç†æ˜¯å¾ˆç®€å•çš„ï¼Œå†çœ‹ç¬¬ä¸€ä¸ªå­å‡¸åŒ…çš„æ ¸è½åœ¨ç¬¬äºŒä¸ªå­å‡¸åŒ…å¤–éƒ¨çš„æƒ…å†µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šè¿™ä¸­æƒ…å†µä¸å¢é‡æ„é€ æ³•çš„æƒ…å†µå¾ˆç›¸ä¼¼ï¼ŒP1çš„æ ¸xç›¸å¯¹äºP2å°±æ˜¯ä¸€ä¸ªæ–°åŠ å…¥çš„ç‚¹ã€‚åšå‡ºä¸¤æ¡support lineï¼šxâ†’tå’Œxâ†’sï¼Œèˆå¼ƒP2ä¸Štâ†’sè·¯å¾„çš„ç‚¹å³å¯ã€‚è¿™æ ·P2ä¸­å‰©ä½™ç‚¹ä¸xæ„æˆäº†ä¸€ä¸ªæ˜Ÿå½¢å¤šè¾¹å½¢ï¼Œxä¹Ÿæˆä¸ºäº†P2çš„æ ¸ã€‚è¿™å°±è½¬åŒ–æˆäº†ç¬¬ä¸€ç§æœ‰å…¬å…±æ ¸çš„æƒ…å†µã€‚Divide And Conquerï¼ˆ2ï¼‰ä¸Šè¿°åˆ†æ²»ç­–ç•¥çš„ç®—æ³•è¿‡äºå¤æ‚ï¼Œæ‰€ä»¥å¼•å…¥ä¸€ç§æ›´åŠ ç®€æ˜çš„åˆ†æ²»ç­–ç•¥ã€‚è¿™ç§åˆ†æ²»ç­–ç•¥ä¹Ÿä¼šä¸ºä¸‰è§’å‰–åˆ†ç­‰é—®é¢˜æä¾›æ€è·¯ã€‚é¦–å…ˆè§„å®šä¸€ç§ç‚¹é›†åˆ’åˆ†çš„ç­–ç•¥ã€‚å‡è®¾å¾…åˆå¹¶çš„ä¸¤ä¸ªå­å‡¸åŒ…æ˜¯æ²¿ç€æŸæ–¹å‘æ˜¯åˆ†ç¦»çš„ï¼ŒäºŒè€…ä¸ç›¸äº¤ï¼ˆDivide And Conquerï¼ˆ1ï¼‰ä¸­æ˜¯æœ‰ç›¸äº¤çš„ï¼‰ã€‚ä¾‹å¦‚ä¸‹å›¾å‡¸åŒ…P1å’ŒP2å°±æ˜¯ç›¸äº’åˆ†ç¦»çš„ï¼šè¿™æ ·åˆ’åˆ†ä¼šä½¿å¾—åˆå¹¶æ›´åŠ ç®€æ˜ï¼Œä¸å¿…åŒºåˆ†å¤šç§å¤æ‚æƒ…å†µã€‚é¢„å¤„ç†ä¸ºäº†æ»¡è¶³è¿™ç§åˆ’åˆ†ç­–ç•¥ï¼Œéœ€è¦å¼•å…¥ä¸€ç§é¢„å¤„ç†ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªxæ–¹å‘çš„æ’åºè¿‡ç¨‹ï¼ˆX-sortingï¼‰ã€‚æ’åºåå°±å¯å–ç‚¹xåæ ‡çš„ä¸­å€¼ï¼Œå°†ç‚¹é›†åˆ’åˆ†ä¸ºè§„æ¨¡ç›¸å½“çš„å·¦å³ä¸¤ä¸ªå­é›†ã€‚æ¯ä¸ªå‡¸åŒ…éƒ½æœ‰å…¶æœ€å·¦ç‚¹lå’Œæœ€å³ç‚¹rï¼Œå¦‚ä¸Šå›¾ã€‚mergeæ“ä½œç°åœ¨mergeæ“ä½œå°±æ˜¯å°†ä¸¤ä¸ªå·¦å³ç›¸ç¦»çš„ä¸¤ä¸ªå­å‡¸åŒ…åˆå¹¶ä¸ºä¸€ä¸ªå¤§å‡¸åŒ…çš„è¿‡ç¨‹äº†ã€‚è¿ç®—çš„å…³æ³¨çš„æ­£æ˜¯ä¸¤å¯¹lå’Œrç‚¹ã€‚å…ˆç›´è§‚æ„Ÿå—ä¸€ä¸‹mergeæ“ä½œè¦æ·»åŠ çš„æ–°æè¾¹ï¼šä¸Šä¸‹ä¸¤æ¡ç´«è‰²è¾¹æ­£æ˜¯è¦æ±‚çš„æ–°è¾¹ï¼Œåˆç§°æ”¯æ’‘è¾¹ï¼ˆsupport lineï¼‰ï¼Œå¹¶ä¸”æ¯æ¬¡mergeåªä¼šå¢åŠ ä¸¤æ¡æ–°è¾¹ã€‚ä¸¤æ¡è¾¹ç±»ä¼¼ä¸¤ä¸ªåœ†çš„å…¬åˆ‡çº¿ï¼ˆcommon tangentï¼‰ï¼Œå°†äºŒè€…è¿æ¥èµ·æ¥ã€‚æ³¨æ„ï¼Œæ³¨æ„ï¼Œæ³¨æ„ï¼šçœ¼ç›å¯èƒ½ä¼šæ¬ºéª—ä½ ç›´è§‚ä¸Šæ„Ÿè§‰ï¼Œä¸¤æ¡support lineæ­£æ˜¯ä¸¤ä¸ªå­å‡¸åŒ…çš„æœ€é«˜ç‚¹tå’Œæœ€ä½ç‚¹bç›¸äº’è¿æ¥å¾—åˆ°çš„ï¼Œè¿™äº›ç‚¹åªéœ€çº¿æ€§æ—¶é—´å°±èƒ½æ‰¾åˆ°ã€‚å½“çœŸå¦‚æ­¤çš„è¯å‡¸åŒ…æ„é€ çš„ä¸‹ç•Œå°±æˆäº†O(n)ï¼Œæ˜¾ç„¶ç›´è§‰æ˜¯é”™è¯¯çš„ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¸¤ç§æƒ…å†µï¼Œsupport lineå°±å’Œbã€tä¸¤ç‚¹æ²¡æœ‰ç›´æ¥å…³ç³»äº†ï¼š)æ„é€ support lineçš„è¿‡ç¨‹éœ€è¦ç¼œå¯†çš„åˆ†æï¼Œå¹¶éå‡­ç›´è§‰èƒ½å¾—åˆ°çš„ã€‚ç¼åˆï¼ˆstitchï¼‰â€”æ„é€ support lineå°†ä¸¤ä¸ªå­å‡¸åŒ…è¿æ¥çš„è¿‡ç¨‹æ›´åƒå¤ä»£å¦‡å¥³ç”¨é’ˆå°†ä¸¤å—å¸ƒç¼åˆåœ¨ä¸€èµ·ï¼ˆä½†æ˜¯è¿™é‡Œçš„ä¸¤ä¸ªå‡¸åŒ…çš„é—´è·æ˜¯ä¸èƒ½å˜çš„ï¼Œä»…ä»…æ˜¯ç”¨çº¿å°†å…¶è¿æ¥åœ¨ä¸€èµ·ã€‚è€Œä¸”è¿™é‡Œè¿æ¥åªéœ€è¦æœ€åæ‰¾å‡ºæ¥çš„é‚£ä¸¤æ¡çº¿ï¼Œå…¶ä½™å‰©ä¸‹çš„ä¸­é—´â€œå·¥å…·çº¿â€éƒ½è¦èˆå»ï¼‰ã€‚æ„é€ è¿‡ç¨‹é¦–å…ˆä»å·¦å‡¸åŒ…çš„rç‚¹å’Œå³å‡¸åŒ…çš„lç‚¹è¿çº¿å¼€å§‹ï¼Œä»¥è¿™æ¡çº¿ä¸ºåŸºç¡€é€æ­¥å¾—åˆ°support lineã€‚æ³¨æ„ä¸€ä¸ªç»†èŠ‚é—®é¢˜ï¼šå¦‚ä½•å¾—åˆ°å„å­å‡¸åŒ…çš„lç‚¹å’Œrç‚¹ã€‚æ¯æ¬¡åˆå¹¶éƒ½ä¼šäº§ç”Ÿæ–°çš„å‡¸åŒ…ï¼Œæ‰€ä»¥å‡¸åŒ…æ˜¯ä¸€ä¸ªåŠ¨æ€çš„ç»“æ„ã€‚å½“ç„¶å¯ä»¥æ¯æ¬¡è®¡ç®—å‡ºæœ€å·¦ç‚¹å’Œæœ€å³ç‚¹ï¼Œåªéœ€è¦çº¿æ€§æ—¶é—´ã€‚ä½†æ˜¯è¿™å¹¶ä¸æ˜¯æœ€ä¼˜çš„æ–¹å¼ã€‚è€ƒè™‘åˆ†æ²»çš„æ€æƒ³ï¼Œå°±æ•´ä¸ªmergeæµç¨‹æ¥è®²ï¼Œæ˜¯è‡ªåº•å‘ä¸Šå°†å­å‡¸åŒ…ä¸¤ä¸¤åˆå¹¶çš„è¿‡ç¨‹ã€‚å› æ­¤åªè¦åœ¨æœ€åº•å±‚ä¸Šæœ€å°çš„å­å‡¸åŒ…ä¸­è®°å½•æœ€å·¦ç‚¹å’Œæœ€å³ç‚¹ï¼Œæ¯æ¬¡mergeæ›´æ–°ä¸€ä¸‹è¿™ä¸¤ä¸ªå˜é‡å³å¯ï¼Œåªéœ€è¦O(1)çš„å¸¸æ•°æ—¶é—´ï¼è¿™ç§ä¼˜åŒ–å¯¹æ•´ä½“çš„å¤æ‚åº¦ä¸Šçº¿nlognè™½ç„¶æ²¡æœ‰å½±å“ï¼Œä¹Ÿèƒ½ä¸ºç¨‹åºèŠ‚çœä¸€éƒ¨åˆ†çš„å¼€é”€ã€‚ç¼åˆä¸ŠåŠéƒ¨åˆ†å†çœ‹å¦‚ä½•å°†æœ€åˆçš„r-lçº¿å˜æˆsupport lineï¼Œåœ¨æ­¤ä»¥å¯»æ‰¾upper support lineä¸ºä¾‹ï¼ˆä¸Šåˆ‡çº¿ï¼Œç›¸åº”çš„è¿˜éœ€è¦è®¡ç®—ä¸‹åˆ‡çº¿ï¼‰ã€‚ç®—æ³•çš„æ ¸å¿ƒä¾ç„¶æ˜¯to left testã€‚é¦–å…ˆçœ‹lç‚¹ï¼Œä»r-lçº¿å‡ºå‘ï¼Œå¯ä»¥å‘ç°ç›¸å¯¹äºå¯¹äºrâ†’læ—¶ï¼Œlçš„å‰é©±ã€åç»§æ˜¯LRå‹çš„ã€‚è€Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯RRå‹çš„ã€‚æ‰€ä»¥å¿…é¡»è¦æ‰¾lçš„å‰é©±ã€‚ç›´åˆ°åœ¨æŸä¸€ä¸ªæ—¶åˆ»ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†lçš„ä¸€ä¸ªå‰é©±ç‚¹æ»¡è¶³RRå‹ï¼šå†çœ‹rç‚¹ï¼ŒåŒæ ·çš„ï¼Œä»æ­¤æ—¶çš„çŠ¶æ€ï¼Œæ¥è§‚å¯Ÿrçš„ç±»å‹ï¼šæ˜¯RLå‹çš„ã€‚è¦æƒ³æˆä¸ºLLå‹ï¼Œrå¿…é¡»è¦æ‰¾å®ƒçš„åé©±ã€‚åœ¨æŸä¸€æ—¶åˆ»ï¼Œræ‰¾åˆ°rçš„åç»§ï¼ˆå°±æ˜¯è¯¥å‡¸åŒ…ç‚¹tï¼‰ä½¿å…¶æ»¡è¶³LLå‹ï¼šåè¿‡æ¥ç»§ç»­çœ‹lï¼Œæ­¤æ—¶ï¼Œå…·ä½“çš„è¯´åº”è¯¥æ˜¯æ£€æµ‹lçš„å‰é©±ç‚¹l&#39;ï¼Œç»æ£€æµ‹ï¼Œl&#39;å·²ç»ä¸å†æ»¡è¶³RRå‹äº†ï¼Œç¼–ç¨‹äº†LRå‹ï¼Œæ‰€ä»¥è¿˜è¦ç»§ç»­å¯»æ‰¾å®ƒçš„å‰é©±ç‚¹ï¼Œä½¿å…¶å†æ¬¡æ»¡è¶³RRå‹ã€‚æŸä¸€æ—¶åˆ»ï¼Œæ‰¾åˆ°å®ƒçš„å‰é©±ï¼ˆå°±æ˜¯è¯¥å‡¸åŒ…çš„ç‚¹tï¼‰ï¼Œä½¿å…¶æˆä¸ºRRå‹ã€‚åè¿‡æ¥ç»§ç»­çœ‹rï¼Œæ­¤æ—¶ï¼Œæ›´å‡†ç¡®çš„åº”è¯¥è¯´æ˜¯åœ¨çœ‹r&#39;ï¼Œç»æ£€æµ‹ï¼Œè¯¥åº—ç¬¦åˆLLå‹ã€‚è‡³æ­¤ï¼Œæ‰€è°“çš„rå’Œléƒ½å·²ç»ç¬¦åˆRRæˆ–LLå‹äº†ã€‚ä»è€Œå·²ç»æ‰¾åˆ°upper support lineäº†ã€‚ç»“æŸä¸ŠåŠéƒ¨åˆ†ã€‚å›é¡¾ç”±r-lçº¿é€æ­¥æ¨è¿›å¾—åˆ°support lineçš„è¿‡ç¨‹ï¼Œæ¯æ¬¡æ“ä½œä¸€ä¸ªç«¯ç‚¹ï¼Œå¾—åˆ°æ˜¯ä¸€ç§â€œZâ€å­—å½¢ï¼ˆzig-zagï¼‰çš„æ¨è¿›è½¨è¿¹ã€‚æ“ä½œç‚¹çš„åˆ‡æ¢ç”±å¦ä¸€ç‚¹æ»¡è¶³è¦æ±‚å†³å®šï¼Œè€Œç®—æ³•åœæ­¢çš„ä¾æ®æ˜¯ä¸¤ä¸ªç«¯ç‚¹åŒæ—¶æ»¡è¶³äº†è¦æ±‚ã€‚è¿™ç§æ–¹å¼ç±»ä¼¼å¿«é€Ÿæ’åºæ„é€ è½´ç‚¹çš„è¿‡ç¨‹ï¼Œå·¦å³ä¸¤è½´ç‚¹äº¤æ›¿æ“ä½œï¼Œç›´åˆ°äºŒè€…éƒ½æ»¡è¶³è¦æ±‚æ—¶ç®—æ³•åœæ­¢ã€‚ç¼åˆä¸‹åŠéƒ¨åˆ†ç¼åˆä¸‹åŠéƒ¨åˆ†çš„æµç¨‹ä¸ï¼Œä¸ŠåŠéƒ¨åˆ†æµç¨‹ä¸€æ ·ã€‚æ—¶é—´å¤æ‚åº¦åˆ†æä¸€ä¸‹ç®—æ³•æ—¶é—´å¤æ‚åº¦ã€‚ç®—æ³•é¦–å…ˆè¦æŒ‰ç…§xåæ ‡æ’åºï¼Œæ’åºå¤æ‚åº¦ä¸ºO(nlogn)ã€‚å†çœ‹mergeè¿‡ç¨‹ï¼Œæ— è®ºæ˜¯å·¦ä¾§å­å‡¸åŒ…è¿˜æ˜¯å³ä¾§å­å‡¸åŒ…ï¼Œå¯¹äºå…¶æ¯ä¸ªç‚¹çš„æ“ä½œè‡³å¤šåªæœ‰ä»¥æ­¤ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡å½’å¹¶æ˜¯çº¿æ€§æ—¶é—´ã€‚å½’å¹¶å…±lognæ¬¡ï¼Œç®—æ³•çš„æ€»ä½“å¤æ‚åº¦å°±æ˜¯O(nlogn)äº†ã€‚æ›´å¤šçš„è€ƒè™‘åœ¨è¿™äº›ç®—æ³•è®²è§£ä¸­ï¼Œé€šå¸¸éƒ½æ˜¯ä¸è€ƒè™‘é€€åŒ–çš„æƒ…å†µï¼Œå¦‚ï¼Œä¸‰ç‚¹å…±çº¿â€¦â€¦æœ€åæ€»ç»“ä¸€ä¸‹ç¬¬äºŒç§åˆ†æ²»æ³•çš„ç‰¹ç‚¹ã€‚æ­¤å‰Jarvis Marchç®—æ³•è™½ç„¶ä»¥å¹³æ–¹å¤æ‚åº¦ä¸ºä¸Šç•Œï¼Œä½†å…¶â€è¾“å‡ºæ•æ„Ÿæ€§â€œä½¿å¾—å®é™…å¤æ‚åº¦ä¸ºO(hn)ï¼Œæœ€å¥½æƒ…å†µä¸‹ä»…ç”šè‡³ä¸ºçº¿æ€§ã€‚ä¾‹å¦‚å¦‚ä¸‹æƒ…å†µï¼šJarvis Marchç®—æ³•çš„å¤æ‚åº¦å˜ä¸ºäº†O(4n)ï¼Œè€Œæ­¤æ—¶åˆ†æ²»æ³•ä¾æ—§ä¼šç»å†æŒ‰éƒ¨å°±ç­çš„X-sortingï¼Œä¸€ä¸Šæ¥å°±æ³¨å®šäº†O(nlogn)çš„å¤æ‚åº¦ï¼Œç„¶åç»å†åŒæ ·O(nlogn)çš„mergeè¿‡ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ç§åˆ†æ²»æ³•åœ¨å„ç§æƒ…å†µä¸‹çš„è¡¨ç°éƒ½æ˜¯å¾ˆå‡åŒ€çš„ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"è®¡ç®—å‡ ä½•","slug":"è®¡ç®—å‡ ä½•","permalink":"https://longlongqin.github.io/tags/%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95/"}]},{"title":"æ„é€ å‡¸åŒ…-Graham Scanæ³•","slug":"å­¦ä¹ ç¬”è®°/è®¡ç®—å‡ ä½•/Convex-Hull/Graham-Scan","date":"2020-03-14T09:40:32.000Z","updated":"2020-03-22T15:09:59.625Z","comments":true,"path":"archives/3478.html","link":"","permalink":"https://longlongqin.github.io/archives/3478.html","excerpt":"","text":"Graham Scanç®—æ³•çš„æµç¨‹å‡è®¾å¾…å¤„ç†ç‚¹é›†Så…±æœ‰nä¸ªç‚¹ã€‚1ã€é¢„å¤„ç†é¢„æ’åº(presortingï¼‰Graham Scané¦–å…ˆè¦åšçš„æ˜¯ä¸€ä¸ªé¢„å¤„ç†æ’åºæ“ä½œï¼ˆpresortingï¼‰ã€‚å³æ‰¾åˆ°æŸä¸ªåŸºå‡†ç‚¹ï¼Œç„¶åå°†å…¶ä½™æ‰€æœ‰çš„ç‚¹æŒ‰ç…§ç›¸å¯¹äºåŸºå‡†ç‚¹çš„æåæ ‡æ’åºã€‚å¦‚ä¸‹å›¾ï¼šç‚¹çš„æ’åºå¯ä»¥å¥—ç”¨ä»»æ„æ’åºç®—æ³•çš„æ¡†æ¶ï¼Œåªæ˜¯å°†æ’åºå¯¹è±¡ç”±æ•°å€¼å˜ä¸ºäº†å¹³é¢ä¸Šçš„ç‚¹ï¼Œè€Œæ¯”è¾ƒå™¨æ”¹ä¸ºto left testå®ç°ã€‚å¦‚ä½•æ‰¾å‡ºç¬¬ä¸€ä¸ªç‚¹ï¼šç‚¹1ï¼Ÿä»¥ç‚¹1ä¸ºåŸºå‡†ç‚¹ï¼Œå…¶ä½™ç‚¹æŒ‰ç…§ç›¸å½“äºç‚¹1çš„æè§’ä¾æ¬¡æ’åºä¸º2ã€3ã€4â€¦â€¦ç†è®ºä¸Šè®²ä»»ä½•ä¸€ä¸ªç‚¹éƒ½èƒ½å½“ç¬¬ä¸€ä¸ªåŸºå‡†ç‚¹ï¼Œä¸ºäº†ç®€åŒ–ç®—æ³•é€šå¸¸é€‰æ‹©lowest-then-leftmost pointï¼ˆLTLï¼‰ä½œä¸ºåŸºå‡†ç‚¹ã€‚æ‰¾å‡ºèµ·å§‹è¾¹å¯¹äºä¸åŸºå‡†ç‚¹1æè§’æœ€å°çš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­ç‚¹2ï¼ˆå‡è®¾æ²¡æœ‰ä¸‰ç‚¹å…±çº¿çš„æƒ…å†µï¼‰ã€‚å°†ç‚¹1å’Œç‚¹2ä½œä¸ºç®—æ³•çš„èµ·å§‹ç‚¹ã€‚å°†èµ·å§‹è¾¹ ä¸ å‰©ä¸‹çš„n-2æ¡è¾¹åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„æ ˆ(stack)ä¸­ï¼šç®—æ³•å¼€å§‹å‰å…ˆå°†èµ·å§‹ç‚¹1å’Œ2å…¥æ ˆSï¼Œå…¶ä»–çš„n-2ä¸ªç‚¹å…¥æ ˆTï¼Œå¦‚ä¸‹å›¾ã€‚æ³¨æ„Så’ŒTä¸­å…ƒç´ çš„å…¥æ ˆé¡ºåºã€‚è‡³æ­¤é¢„å¤„ç†å·²ç»å®Œæˆã€‚Graham Scanç”¨åˆ°çš„æ•°æ®ç»“æ„ã€‚æ•´ä¸ªç®—æ³•éå¸¸ç®€æ˜ï¼Œæ ¸å¿ƒæ•°æ®ç»“æ„åªæœ‰ä¸¤ä¸ªæ ˆï¼Œåˆ†åˆ«è®°ä½œæ ˆSå’Œæ ˆTã€‚ä¾¿äºç†è§£æˆ‘ä»¬å°†Så’ŒTç”»æˆå¼€å£ç›¸å¯¹çš„å½¢å¼ï¼Œå¦‚ä¸Šå›¾ã€‚2ã€scanæ“ä½œ(æ­¤å¤„ä¸ºé€†æ—¶é’ˆæ‰«æ)å®Œæˆé¢„å¤„ç†ä¹‹åï¼Œå°±èƒ½å¼€å§‹ç®—æ³•çš„æ ¸å¿ƒï¼šscanæ“ä½œã€‚scançš„è¿‡ç¨‹ä¸»è¦å…³æ³¨ä¸‰ä¸ªç‚¹ï¼šæ ˆSçš„æ ˆé¡¶ï¼ˆS[0]ï¼‰ã€æ¬¡æ ˆé¡¶ï¼ˆS[1]ï¼‰å’Œæ ˆTçš„æ ˆé¡¶ï¼ˆT[0]ï¼‰ã€‚ä¹Ÿå°±ä¸‹å›¾çº¢è‰²æ ‡æ³¨çš„ä¸‰ä¸ªç‚¹ï¼šå¯¹è¿™ä¸‰ä¸ªå…³æ³¨çš„ç‚¹ï¼Œè¿›è¡Œæ£€æµ‹ï¼Œæ£€æµ‹çš„æ¡†æ¶ä¸ºï¼šå¯ä»¥è§‚å¯Ÿåˆ°ï¼Œæ¯æ¬¡å¾…å¤„ç†çš„S[0]å’ŒS[1]æ„æˆçš„è¾¹ä¸€å®šæ˜¯ä¸€æ¡æè¾¹ï¼ˆå¦‚ä¸Šå›¾ç‚¹1å’Œç‚¹2ï¼‰ï¼Œç®—æ³•å…³é”®æ­¥éª¤å°±æ˜¯å¯¹è¾¹è¿™æ¡æè¾¹å’ŒT[0]åšto left testï¼Œåˆ¤æ–­T[0]ä½äºè¾¹S[0]S[1]çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ã€‚è‹¥åœ¨å·¦è¾¹åˆ™ç»§ç»­æ‹“å±•ï¼Œè‹¥åœ¨å³è¾¹åˆ™å¦å®šæ‰æ­¤å‰è®¤å®šçš„æè¾¹ã€‚æ— è®ºç»“æœå¦‚ä½•ï¼Œæ¯æ¬¡åˆ¤å®šéƒ½ä¼šå°†é—®é¢˜è§„æ¨¡ç¼©å°ä¸€ä¸ªå•å…ƒï¼Œç®—æ³•ç»“æŸæ—¶Tæœ€ç»ˆè‚¯å®šä¸ºç©ºã€‚Tç©ºåï¼ŒSä¸­å­˜ç•™ä¸‹çš„ç‚¹æ­£æ˜¯å‡¸åŒ…çš„æç‚¹ï¼Œè¿™äº›ç‚¹è‡ªåº•è€Œä¸Šæ­£æ˜¯å‡¸åŒ…è¾¹ç•Œç‚¹çš„é€†æ—¶é’ˆéå†ï¼Œä¹Ÿå¾—åˆ°äº†æ•´ä¸ªå‡¸åŒ…æ„é€ é—®é¢˜çš„è§£ã€‚ä¸¾ä¾‹1ã€å…ˆæ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œå³ç‚¹é›†Sä¸­æ‰€æœ‰çš„ç‚¹éƒ½åœ¨å‡¸åŒ…è¾¹ç•Œä¸Šã€‚å¦‚ä¸‹å›¾ï¼šå…ˆæ‰¾åˆ°LTLï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­ç‚¹1ã€‚ç„¶ååŸºäºç‚¹1å¯¹å…¶ä½™ç‚¹æŒ‰æè§’æ’åºä¸ºç‚¹2ã€3ã€4â€¦â€¦ï¼ˆå®é™…ä¸Šä»¥ä¸€ä¸ªç‚¹ä¸ºä¸­å¿ƒçš„æœ‰åºçš„ç‚¹é›†ï¼Œæ„æˆäº†æ‰€è°“çš„æ˜Ÿå½¢å¤šè¾¹å½¢ï¼ˆstar-shaped polygonï¼‰ï¼Œä¸­å¿ƒç‚¹æ­£æ˜¯æ˜Ÿå½¢å¤šè¾¹å½¢æ ¸ï¼ˆkernelï¼‰çš„ä¸€éƒ¨åˆ†ã€‚å‡¸å¤šè¾¹å½¢å¿…ç„¶æ˜¯æ˜Ÿå½¢å¤šè¾¹å½¢ï¼Œåä¹‹åˆ™ä¸ç„¶ã€‚ï¼‰ç„¶åæ‰¾åˆ°ç‚¹1çš„åç»§2ï¼Œç‚¹1å’Œç‚¹2æ„æˆç¬¬ä¸€æ¡æè¾¹ã€‚åˆå§‹åŒ–æ ˆSå’Œæ ˆTã€‚ç°åœ¨è¦å…³å¿ƒS[1], S[0]å’ŒT[0]ï¼Œå°±æ˜¯ç‚¹1ï¼Œ2å’Œ3ã€‚ç‚¹3ä½äºè¾¹12å·¦ä¾§ï¼Œto leftå…³ç³»ä¸ºtrueï¼ŒS.push ( T.pop() )ï¼Œå‘å‰æ‹“å±•äº†ä¸€æ¡æš‚å®šæè¾¹ã€‚æ¥ä¸‹æ¥é‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚è€ƒè™‘ç‚¹2ï¼Œ3å’Œ4ã€‚to leftå…³ç³»ä¸ºtrueï¼ŒS.push( T.pop() )â€¦â€¦æœ€ç»ˆæ ˆTç©ºï¼Œç®—æ³•ç»“æŸï¼Œå‡¸åŒ…ç”±æ ˆSè‡ªåº•å‘ä¸Šå¾—åˆ°ã€‚Så’ŒTçš„å˜åŒ–è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š2ã€ä¸Šé¢åˆ—ä¸¾äº†æœ€ç®€å•çš„æƒ…å†µä¸‹Graham Scançš„è¿‡ç¨‹ï¼Œæ¥ä¸‹æ¥åˆ—ä¸¾ä¸€ä¸ªæ›´æœ‰ä»£è¡¨æ€§çš„å®ä¾‹æ·±å…¥ç®—æ³•çš„ç»†èŠ‚ã€‚è¾“å…¥çš„ç‚¹é›†Sï¼Œå¹¶è¿›è¡Œé¢„å¤„ç†æ’åºï¼Œå¹¶åˆå§‹åŒ–æ ˆSã€Tï¼Œå¦‚ä¸‹å›¾ï¼šæ¥ä¸‹æ¥å¯¹ç‚¹1ï¼Œ2å’Œ3è¿›è¡Œto leftæµ‹è¯•ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯åˆ¤æ–­è¾¹2â†’3ï¼ˆå›¾ä¸­é»„è‰²è¾¹ï¼‰èƒ½å¦è¢«æš‚æ—¶é‡‡çº³ã€‚æµ‹è¯•ç»“æœä¸ºtrueï¼Œæš‚æ—¶é‡‡çº³è¾¹2â†’3ï¼ŒS.push( T.pop() )ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæ³¨æ„å›¾ä¸­è“è‰²è¾¹è¡¨ç¤ºå·²ç»è¢«æš‚æ—¶æ¥çº³çš„è¾¹ï¼Œä¹Ÿå°±æ˜¯ç®—æ³•æš‚æ—¶è®¤å®šçš„æè¾¹ã€‚ä¸Šä¸€æ¬¡æ“ä½œå°†è“è‰²è¾¹æ¨è¿›ä¸€ä¸ªå•å…ƒæ¥ä¸‹æ¥å…³æ³¨ç‚¹2ï¼Œ3å’Œ4ï¼Œæ¥åˆ¤æ–­ä¸‹ä¸€æ¡é»„è‰²è¾¹3â†’4èƒ½å¦è¢«æ¥çº³ã€‚to leftæµ‹è¯•ä¸ºtrueï¼ŒS.push( T.pop() )ï¼Œæ¥çº³è¾¹3â†’4ã€‚å¦‚ä¸‹å›¾å³ä¾§æ‰€ç¤ºï¼šç„¶ååˆ¤æ–­ç‚¹3ï¼Œ4å’Œ5ã€‚ç‚¹5åœ¨è¾¹3â†’4çš„å³ä¾§ï¼Œå³to leftæµ‹è¯•ä¸ºfalseã€‚S.pop()ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­å‡ºç‚¹4ä¸å¯èƒ½ä¸ºæç‚¹ï¼Œä¸¢å¼ƒ4ã€‚å› æ­¤ç®—æ³•å›æº¯åˆ°ç‚¹3ï¼Œåˆ¤æ–­ç‚¹2ï¼Œ3å’Œ5çš„å…³ç³»ã€‚5åœ¨2â†’3çš„å·¦ä¾§ï¼Œæš‚æ—¶æ¥çº³è¾¹3â†’5ï¼ŒS.push( T.pop() )ã€‚å¦‚ä¸‹å›¾ï¼šç®—æ³•ç»å†äº†æ— æ•ˆæ“ä½œï¼Œè¿›è¡Œäº†å›æº¯ï¼Œå¾—åˆ°äº†ç›®å‰æ¥è¯´æœ€ä¼˜çš„â€œæè¾¹â€ã€‚è™½ç„¶è¿™äº›â€æè¾¹â€œä¸ä¸€å®šèƒ½æœ€ç»ˆä¿ç•™ï¼Œä½†é—®é¢˜çš„è§„æ¨¡å¾—åˆ°äº†å‰Šå‡ã€‚ä¸‹ä¸€æ¬¡scanè€ƒå¯Ÿçš„å°±æ˜¯3ï¼Œ5å’Œ6äº†ã€‚3ï¼Œ5å’Œ6çš„to leftæµ‹è¯•ä¸ºfalseï¼ŒS.pop()ï¼Œèˆå¼ƒç‚¹5ã€‚ç„¶åè€ƒå¯Ÿç‚¹2ï¼Œ3å’Œ6ï¼Œto leftæµ‹è¯•ä¸ºfalseï¼ŒS.pop()èˆå¼ƒç‚¹3ã€‚å¦‚ä¸‹å›¾ï¼šâ€¦â€¦..â€¦â€¦â€¦ç›´éå†å®Œå‰©ä¸‹å…¶ä»–ç‚¹ï¼Œå‡¸åŒ…å°±æ„é€ å®Œæˆã€‚éªŒè¯ç®—æ³•çš„æ­£ç¡®æ€§æ€è·¯ä¸Šçš„æ­£ç¡®æ€§äº†è§£äº†ç®—æ³•çš„æ•´ä½“æµç¨‹ä¹‹åï¼Œæˆ‘ä»¬å†æ¥è®ºè¯ä¸€ä¸‹ç®—æ³•çš„æ­£ç¡®æ€§ã€‚è¯æ˜ä¸€ä¸ªç®—æ³•æ­£ç¡®æ€§çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œåœ¨æ­¤é€‰ç”¨æ•°å­¦å½’çº³æ³•ã€‚æ•°å­¦å½’çº³æ³•çš„æ€æƒ³å¯ç”¨å¤šç±³è¯ºéª¨ç‰Œç±»æ¯”ï¼Œè¦åšçš„æ— éæ˜¯ä¸¤ä»¶äº‹ï¼šè¯æ˜ç¬¬1å¼ éª¨ç‰Œä¼šå€’ï¼›è¯æ˜å¦‚æœç¬¬nå¼ éª¨ç‰Œä¼šå€’åˆ™ç¬¬n+1å¼ éª¨ç‰Œä¹Ÿä¼šå€’ä¸‹ã€‚Graham Scanè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªä¸ªå¼•å…¥ç‚¹çš„è¿‡ç¨‹ã€‚æ¯å½“æˆ‘ä»¬å¾—åˆ°ç¬¬kä¸ªç‚¹çš„æ—¶å€™ï¼Œç®—æ³•æ‰€å¾—åˆ°çš„å°±æ˜¯å‰kä¸ªç‚¹å¯¹åº”çš„â€œæœ€å¥½çš„å‡¸åŒ…â€ã€‚å› æ­¤å½“k = næ—¶å¾—åˆ°çš„æ˜¯æ•´ä½“çš„å‡¸åŒ…ã€‚å½’çº³çš„ç¬¬ä¸€æ­¥å°±æ˜¯è¯æ˜k = 3æ—¶å¾—åˆ°çš„æ˜¯å½“å‰ç‚¹é›†Sâ€˜ = {1ï¼Œ2ï¼Œ3}ä¸­çš„æè¾¹â€”â€”ä¹Ÿå°±æ˜¯è¯æ˜ç¬¬1å¼ éª¨ç‰Œä¼šå€’ã€‚æ˜¾ç„¶è¾¹1â†’2æ˜¯Sâ€™çš„ä¸€æ¡æè¾¹ã€‚è€Œæ ¹æ®é¢„å¤„ç†çš„æ–¹å¼ï¼Œ3ç›¸è¾ƒäº1çš„æè§’ä¸€å®šå¤§äº2ï¼Œå› æ­¤ç‚¹3ä¸€å®šåœ¨è¾¹1â†’2çš„å·¦ä¾§ï¼Œå› æ­¤è¾¹2â†’3ä¼šå¾—åˆ°ä¿ç•™ã€‚å¯¹äºè¿™ä¸‰ä¸ªç‚¹æ¥è¯´ï¼Œä»»æ„ä¸¤æ¡è¾¹ä¸€å®šéƒ½æ˜¯æè¾¹ï¼Œ2â†’3ä¹Ÿæ˜¯ä¸€æ¡æè¾¹ã€‚ç„¶åè¯æ˜ï¼šå‡è®¾å·²ç»å¤„ç†åˆ°ç¬¬kä¸ªç‚¹ï¼Œå¾—åˆ°çš„æ˜¯å‰ç‚¹é›†Sâ€™ = {1ï¼Œ2ï¼Œ3ï¼Œâ€¦ï¼Œk}ä¸­æ‰€è°“â€œæœ€å¥½çš„å‡¸åŒ…â€ã€‚æ ¹æ®ç®—æ³•å¤„ç†æ–¹å¼ï¼Œæ¥ä¸‹æ¥ä»Sâ€™â€™ = {1ï¼Œ2ï¼Œ3ï¼Œâ€¦ï¼Œkï¼Œk+1}å¾—åˆ°çš„ç»“æœæ˜¯å¦ä¹Ÿæ˜¯æ­£ç¡®çš„â€”â€”ä¹Ÿå°±æ˜¯è¯æ˜ç¬¬nå¼ éª¨ç‰Œä¼šå€’ï¼Œåˆ™ç¬¬n+1å¼ éª¨ç‰Œä¹Ÿä¼šå€’ä¸‹ã€‚é¢„å¤„ç†çš„æ–¹å¼æ˜¯å¯¹2~næ‰€æœ‰ç‚¹ç›¸è¾ƒäºç‚¹1æŒ‰æè§’æ’åºï¼Œå› æ­¤ä¸‹ä¸€ä¸ªè¦å¤„ç†ç‚¹k+1ä¸€å®šå‡ºç°åœ¨çº¿1â†’kçš„å·¦ä¾§ï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾è“è‰²åŒºåŸŸå’Œç»¿è‰²åŒºåŸŸï¼ˆå‡è®¾k = 9ï¼‰ï¼šè€Œæ ¹æ®ç›®å‰æ¥çº³çš„æœ€åä¸€æ¡æè¾¹( k-1)â†’k ï¼ˆä¾‹å¦‚å›¾ä¸­8â†’9ï¼‰æ¥åˆ’åˆ†ï¼Œç‚¹k+1å¯èƒ½å‡ºç°çš„åŒºåŸŸåˆåˆ†ä¸ºä¸¤å—ï¼Œå³è¯¥æè¾¹çš„å·¦ä¾§ï¼ˆç»¿è‰²åŒºåŸŸï¼‰å’Œå³ä¾§ï¼ˆè“è‰²åŒºåŸŸï¼‰ã€‚è¿™ä¹Ÿæ­£å¯¹åº”äºç®—æ³•åˆ¤å®šçš„ä¸¤ä¸ªåˆ†æ”¯ã€‚å·¦ä¾§ï¼šå·¦ä¾§çš„æƒ…å†µå¾ˆç®€å•ï¼Œç‚¹k+1æ˜¾ç„¶ä¼šæ˜¯ä¸€ä¸ªæ–°çš„æç‚¹ã€‚Graham Scanè¦åšçš„æ­£æ˜¯æš‚æ—¶æ¥çº³è¾¹kâ†’k+1ï¼Œæ‹“å±•äº†ä¸€ä¸ªæ–°çš„å•ä½ã€‚å³ä¾§ï¼šå†çœ‹k+1è½åœ¨å³ä¾§çš„æƒ…å†µã€‚å¦‚ä¸‹å›¾ç‚¹10ï¼šGraham Scanè¦åšçš„æ˜¯ä¸¢å¼ƒç‚¹kï¼ˆå›¾ä¸­ç‚¹9ï¼‰ï¼Œä¹Ÿå°±æ˜¯åˆ¤å®šå‡ºç‚¹kä¸å¯èƒ½æ˜¯æç‚¹ã€‚è¿™æ ·åšçš„åŸå› ï¼šæ˜¯å¼•å…¥ç‚¹k+1åï¼Œç‚¹kä¸€å®šä¼šè¢«åŒ…å«åœ¨ä¸‰è§’å½¢(1, k-1, k+1)å†…éƒ¨ã€‚å¦‚å›¾ä¸­ç‚¹9ä¸€å®šåŒ…å«äºä¸‰è§’å½¢(1, 8, 10)å†…éƒ¨ã€‚æ­£å¦‚æç‚¹æ³•ä¸­æ’é™¤éæç‚¹çš„åšæ³•ï¼Œç‚¹kè¢«æ’é™¤æ˜¯æ­£ç¡®çš„åšæ³•ã€‚æ¥ä¸‹æ¥ç‚¹k-1ï¼Œk-2ç­‰ï¼ˆå¦‚å›¾ä¸­ç‚¹8ï¼Œç‚¹7ç­‰ï¼‰ä¹Ÿå¯èƒ½æ˜¯éæç‚¹ï¼ŒæŒ‰ç…§ç®—æ³•çš„æµç¨‹ï¼Œå®ƒä»¬æ€»ä¼šè¢«åˆ¤å®šåœ¨æŸä¸ªä¸‰è§’å½¢çš„å†…éƒ¨ï¼ˆä¾‹å¦‚ç‚¹7åœ¨ä¸‰è§’å½¢(1, 5, 10)å†…éƒ¨ï¼‰è€Œè¢«æ’é™¤ï¼Œç›´åˆ°left testä¸ºtrueï¼Œå›æº¯åœæ­¢ã€‚æ¢ä¸ªè§’åº¦è€ƒè™‘ï¼Œå›æº¯åœæ­¢æ—¶å¾—åˆ°çš„æ–°è¾¹æ­£æ˜¯å¢é‡æ„é€ æ³•ä¸­æ¯æ­¥å¾—åˆ°çš„support lineï¼Œå³åˆ‡çº¿ã€‚ä¾‹å¦‚å›¾ä¸­çº¿5â†’10æ­£æ˜¯ç®—æ³•å½“å‰ä¿ç•™çš„â€å‡¸åŒ…â€œçš„åˆ‡çº¿ã€‚è¿™ä¹Ÿèƒ½è®ºè¯Graham Scanå¤„ç†æ–¹å¼çš„æ­£ç¡®æ€§ã€‚è‡³æ­¤ï¼Œç®—æ³•æ€è·¯ä¸Šçš„æ­£ç¡®æ€§å·²ç»è¯æ˜å®Œæ¯•ã€‚è¡¨è¿°æ–¹å¼çš„æ­£ç¡®æ€§æ¥ä¸‹æ¥è¿˜è¦è€ƒè™‘ç®—æ³•çš„è¡¨è¿°æ–¹å¼æ˜¯å¦æœ‰æ¼æ´ï¼šä»£ç ä¸­æ¯æ¬¡to left testä¹‹å‰å¹¶æ²¡æœ‰åˆ¤æ–­Sæ ˆä¸­æ˜¯å¦æœ‰â‰¥2ä¸ªå…ƒç´ ã€‚è¿™ä¹Ÿå¯ä»¥ç”±é¢„å¤„ç†çš„æ–¹å¼æ¥è®ºè¯ã€‚ç‚¹1é€‰å–çš„æ˜¯LTLï¼Œè€Œç‚¹2æ˜¯ç›¸å¯¹äºç‚¹1æè§’æœ€å°çš„ç‚¹ï¼Œè¿™æ ·çš„åšæ³•ä¿è¯äº†é™¤äº†ç‚¹1å’Œç‚¹2ä¹‹å¤–æ‰€æœ‰çš„ç‚¹ä¸€å®šæ˜¯åœ¨è¾¹1â†’2å·¦ä¾§çš„ã€‚å› æ­¤ç®—æ³•å›æº¯æœ€å¤šåˆ°ç‚¹2ï¼Œæ°¸è¿œä¸å¯èƒ½æŠŠç‚¹2ä¸¢å¼ƒï¼ŒSä¸­å…ƒç´ ä»»ä½•æ—¶å€™è‡³å°‘æœ‰ä¸¤ä¸ªã€‚Graham Scanç®—æ³•çš„æ­£ç¡®æ€§è®ºè¯å®Œæ¯•ã€‚é¢„å¤„ç†æ“ä½œçš„å¿…è¦æ€§æœ€åæ¥æ€è€ƒä¸€ä¸‹é¢„å¤„ç†æ“ä½œï¼špresortingã€‚ä»”ç»†å›é¡¾ä¸Šè¿°è®ºè¯è¿‡ç¨‹ä¼šå‘ç°ï¼Œæ¯ä¸€æ­¥çš„æ­£ç¡®æ€§éƒ½æ˜¯å»ºç«‹åœ¨æœ€åˆçš„æ’åºä¸Šçš„ã€‚é‚£ä¹ˆè¿™ä¸ªé¢„å¤„ç†æ’åºçœŸçš„æ˜¯å¿…è¦çš„å—ï¼Ÿå¯ä»¥æ¥ä¸¾æç«¯çš„åä¾‹ï¼Œæ¯æ¬¡é€‰å–ä¸‹ä¸€ä¸ªç‚¹éƒ½æ˜¯éšæœºçš„ï¼Œä¾‹å¦‚ä¸‹å›¾çš„è·¯å¾„ï¼šä¸Šå›¾ä¸­ä»ç‚¹1å¼€å§‹å‡ºå‘è¿›è¡Œto leftæµ‹è¯•ï¼Œå¯ä»¥å‘ç°ï¼Œæ¯æ¬¡åˆ¤å®šç»“æœéƒ½ä¸ºtrueï¼Œæœ€ç»ˆæ‰€æœ‰çš„ç‚¹éƒ½è¢«ä¿ç•™äº†ä¸‹äº†ï¼Œè€Œæ˜¾ç„¶è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå‡¸åŒ…ã€‚å› æ­¤presortingæ˜¯æ•´ä¸ªç®—æ³•æˆç«‹çš„åŸºç¡€ã€‚åˆ†æå¤æ‚åº¦ä¸Šé¢è¯æ˜äº†Graham Scanç®—æ³•çš„æ­£ç¡®æ€§ï¼Œæ¥ä¸‹æ¥åˆ†æå…¶å¤æ‚åº¦æ˜¯å¦æ»¡è¶³O(nlogn)ï¼Œå®ç°æ‰€è°“çš„æœ€ä¼˜ç®—æ³•ã€‚ç›´è§‚ä¸Šæ— æ³•æ–­å®šGraham Scanæ˜¯ä¸€ä¸ªæœ€ä¼˜çš„ç®—æ³•ï¼Œå°¤å…¶æ˜¯ä»¥ä¸‹æç«¯æƒ…å†µä»¤äººè´¨ç–‘å…¶æ•ˆç‡ï¼šGraham Scanç®—æ³•å¤æ‚åº¦ç”±ä¸‰éƒ¨åˆ†å†³å®šï¼špersortingï¼Œé‡‡ç”¨ä¸€èˆ¬æ’åºç®—æ³•ï¼Œå¤æ‚åº¦æ˜¯O(nlogn)é€æ­¥è¿­ä»£ï¼ŒO(n)ï¼šç®—æ³•ä¸€æ­¥æ­¥çº³å…¥æ–°ç‚¹ï¼Œä¼šè¿­ä»£næ­¥ã€‚scanï¼ŒO(?)æ‰€ä»¥ç®—æ³•çš„æ€»ä½“å¤æ‚åº¦ï¼šO(nlogn + n * ?) ï¼Œå¯è§scançš„å¤æ‚åº¦å†³å®šäº†ç®—æ³•æ€»ä½“çš„å¤æ‚åº¦ã€‚ç®—æ³•ä¸€æ­¥æ­¥çº³å…¥æ–°ç‚¹ï¼Œä¼šè¿­ä»£næ­¥ã€‚ä½†æ˜¯åœ¨æ¯ä¸ªç‚¹ä¸Šéƒ½æœ‰å¯èƒ½åšå›æº¯æ“ä½œï¼Œæ‰€ä»¥scançš„å¤æ‚åº¦æ˜¯ä¸ç¡®å®šçš„ã€‚æˆ‘ä»¬æ¥ä»¥ä¸Šå›¾æœ€åæƒ…å†µä¸ºä¾‹ï¼Œåˆ°ç¬¬8ä¸ªç‚¹æ—¶åˆ¤å®šä¸ºfalseï¼Œèˆå¼ƒç‚¹7ï¼Œå›æº¯ã€‚ä¸‹ä¸€æ­¥åˆ¤æ–­ä¹Ÿä¸ºfalseï¼Œèˆå¼ƒç‚¹6ï¼Œå›æº¯ã€‚å¦‚æ­¤å›æº¯ç›´åˆ°ç®—æ³•å¼€å§‹çš„ç‚¹2ã€‚è¿™æ¬¡scanå€’é€€äº†é«˜è¾¾O(n)ä¸ªç‚¹ï¼Œå¦‚æœæ¯æ¬¡scanéƒ½æ˜¯å¦‚æ­¤é‚£ä¹ˆç®—æ³•æ•´ä½“å¤æ‚åº¦å°±ä¸ºï¼šO(nlogn + n * n) = O(n^2)äº†ï¼Œé‚£è¿™ç§ç®—æ³•çš„æ„ä¹‰ä¹Ÿå°±ä¸å¤§äº†ã€‚å…¶å®ä¸Šè¿°åˆ†æå¹¶éé”™è¯¯ï¼Œåªæ˜¯ä¸å¤Ÿç²¾ç¡®ã€‚O(n^2)ç¡®å®æ˜¯Graham Scanç®—æ³•çš„ä¸€ä¸ªä¸Šç•Œï¼Œä½†æ˜¯è¿™ä¸ªä¸Šç•Œå¹¶ä¸æ˜¯ç´§çš„ã€‚é—®é¢˜å°±å‡ºåœ¨åˆ†æå‡å®šäº†æ¯æ¬¡éƒ½ä¼šå‡ºç°å›é€€é«˜è¾¾O(n)ä¸ªç‚¹ã€‚ä¸‹å›¾å±•ç¤ºäº†æ•´ä¸ªGraham Scançš„æµç¨‹ï¼šå›¾ä¸­é»„è‰²è¾¹æ˜¯æ²¡æœ‰é‡‡çº³çš„ï¼Œå°±æ˜¯to leftæµ‹è¯•åˆ¤å®šä¸ºfalseåç›´æ¥èˆå»çš„ã€‚ç´«è‰²è¾¹åˆ™æ˜¯æ›¾ç»è¢«è®¤ä¸ºæ˜¯æè¾¹è€Œæ¥çº³çš„ï¼Œåæ¥ç»è¿‡å›æº¯åˆèˆå»äº†ã€‚æ— è®ºæ˜¯é»„è¾¹è¿˜æ˜¯ç´«è¾¹ï¼Œåœ¨å…¶ä¸Šè€—è´¹çš„éƒ½æ˜¯å¸¸æ•°æ—¶é—´ï¼Œå…³é”®å°±åœ¨äºé»„è‰²è¾¹å’Œç´«è‰²è¾¹çš„æ•°ç›®äº†ã€‚é€šè¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œä»å›¾è®ºçš„è§’åº¦çœ‹ï¼Œæ‰€æœ‰çš„é»„è‰²è¾¹å’Œç´«è‰²è¾¹è¿åœ¨ä¸€èµ·æ„æˆäº†ä¸€å¼ å¹³é¢å›¾ï¼Œä¹Ÿå°±æ˜¯å®ƒä»¬äº’ç›¸æ˜¯ä¸å¯èƒ½å†…éƒ¨ç›¸äº¤çš„ã€‚å¹³é¢å›¾çš„ä¸€ä¸ªé‡è¦æ€§è´¨ï¼šå¹³é¢å›¾ä¸­æ‰€æœ‰è¾¹çš„æ•°ç›®å’Œé¡¶ç‚¹æ•°ç›®ä¿æŒåŒé˜¶è¿™ä¸ªæ€§è´¨æ¥è‡ªæ¬§æ‹‰å…¬å¼ï¼šæœ‰nä¸ªç‚¹çš„å¹³é¢å›¾ï¼Œè¾¹çš„æ•°ç›®ä¸Šé™æ˜¯3nï¼Œä¹Ÿå°±æ˜¯O(3n)ã€‚å›æº¯ï¼ˆbacktrackï¼‰å¯èƒ½ä¼šå€’é€€çš„è¾¹æ•°ï¼šåœ¨0~nä¹‹é—´ã€‚ã€ä½†æ˜¯æ³¨æ„ï¼Œä¸æ˜¯æ¯æ¬¡å›æº¯éƒ½èƒ½å›é€€åˆ°nï¼Œå› ä¸ºç”±ä¸Šé¢å¯çŸ¥ï¼Œç‚¹é›†è¾¹æ•°æœ€å¤šä¸º3nï¼Œè€Œè¿™é‡Œé¢çš„æ¯ä¸€ä¸ªè¾¹ï¼Œä¼šè¢«å›é€€0æ¬¡ï¼ˆæè¾¹ï¼‰ï¼Œæˆ–è€…1æ¬¡ï¼ˆéæè¾¹ï¼‰ã€‚æ‰€ä»¥ï¼ŒæŸæ¡è¾¹ä¸€æ—¦è¢«å›é€€è¿‡ï¼Œä¹‹åå°±ä¸å¯èƒ½å†è¢«å›é€€äº†ã€‘æ ¹æ®è¿™ä¸ªæ€§è´¨ï¼Œåœ¨persortingä¹‹åçš„æ•´ä¸ªæµç¨‹ä¸­ï¼ŒGraham Scanæ‰€èƒ½èµ°è¿‡çš„æ‰€æœ‰è¾¹ä¸ä»…ä¸ä¼šåˆ°è¾¾n^2ï¼Œè€Œé¡¶å¤šåˆ°è¾¾å’ŒnåŒé˜¶çš„ä¸€ä¸ªçº¿æ€§æ•°ç›®ã€‚å› æ­¤æ•´ä¸ªç®—æ³•çš„å¤æ‚åº¦ä¹Ÿå°±å–å†³äºpersortingçš„O(nlogn)äº†ã€‚ç®—æ³•æ¨å¹¿Graham Scanç®—æ³•ä¸ä»…å¯ä»¥ç”¨äºå‡¸åŒ…æ„é€ é—®é¢˜ï¼Œåœ¨å…¶ä»–è®¸å¤šåœºæ™¯ä¸‹ä¸­ä¹Ÿååˆ†æœ‰æ•ˆã€‚ä¸ºäº†æ¨å¹¿Graham Scanç®—æ³•ï¼Œé¦–å…ˆå¯ä»¥å¯¹å…¶åšç®€åŒ–ï¼Œä»¥æ–¹ä¾¿åˆ©ç”¨åœ¨å…¶ä»–é—®é¢˜ã€‚é¦–å…ˆå†æ¥å›é¡¾ä¸€ä¸‹é¢„å¤„ç†æ’åºï¼Œè¿™æ˜¯ç®—æ³•æˆç«‹å¿…ä¸å¯å°‘çš„ä¸€æ­¥ã€‚æ’åºç®—æ³•å¥—ç”¨æˆç†Ÿçš„æ–¹æ³•å³å¯ï¼Œåˆ©ç”¨æ•°å­¦æ–¹æ³•è®¡ç®—åè§’ä¸ä»…å¤æ‚è€Œä¸”å¼•å…¥äº†è¯¯å·®ï¼Œæ‰€ä»¥è¦é‡‡ç”¨to left testã€‚è¦åšçš„å°±æ˜¯ä¸¤ç‚¹ï¼šå¥—ç”¨æˆç†Ÿçš„æ’åºç®—æ³•ï¼Œå°†å¾…æ’åºå…ƒç´ ç”±æ•°å€¼å˜ä¸ºç‚¹å°†æ’åºç®—æ³•çš„æ¯”è¾ƒå™¨æ”¹ä¸ºto left testå®ç°æŒ‰ç…§è¿™æ ·çš„æµç¨‹å°±èƒ½é—´æ¥åœ°å®ç°persortingã€‚1ã€åŸå§‹ç‚¹é›†å·²ç»æœ‰æŸç§æ¬¡åºæœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸æ˜¯ä»é›¶å¼€å§‹æ„é€ å‡¸åŒ…ï¼Œä¾‹å¦‚å¾—åˆ°çš„å¾…å¤„ç†ç‚¹é›†å·²ç»æ˜¯æœ‰æŸç§æ¬¡åºçš„ï¼ˆæ¯”å¦‚å·²ç»æŒ‰xåæ ‡å¤§å°æ’åºï¼Œå¦‚ä¸‹å›¾ï¼‰ã€‚è¿™ç§æƒ…å†µä¹Ÿä¸ä¸€å®šéå¾—è¿›è¡Œpersortingæ„é€ æ–°çš„æ¬¡åºï¼Œé€šå¸¸æ”¹å˜è§‚å¯Ÿçš„è§’åº¦ï¼Œæ¢ä¸€ç§ç†è§£æ–¹å¼å°±èƒ½å…å»é¢„å¤„ç†è€Œç›´æ¥è¿›è¡Œåé¢çš„çº¿æ€§çš„scanæ“ä½œäº†ã€‚ä¸ŠåŠéƒ¨åˆ†å‡¸åŒ…ï¼šè€ƒè™‘yè½´è´Ÿæ–¹å‘æ— ç©·è¿œä¸€ä¸ªç‚¹ï¼Œæ‰€æœ‰çš„ç‚¹ç›¸å¯¹äºè¿™ä¸ªç‚¹çš„æè§’æ’åºæ°å¥½å°±æ˜¯å„ç‚¹çš„xåæ ‡åºï¼ä¹Ÿå°±æ˜¯å°†æ— ç©·è¿œçš„ç‚¹çœ‹ä½œèµ·å§‹ç‚¹â‘ ï¼Œæœ€å³ä¾§ç‚¹ï¼ˆå›¾ä¸­ç‚¹8ï¼‰çœ‹ä½œç‚¹â‘¡ï¼Œè¿›è¡Œscanè¿‡ç¨‹ç›´åˆ°æœ€å·¦è¾¹çš„ç‚¹ï¼ˆå›¾ä¸­ç‚¹1ï¼‰ç»“æŸï¼Œå°±å¾—åˆ°äº†å‡¸åŒ…çš„ä¸ŠåŠéƒ¨åˆ†ï¼ˆupper hullï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾çš„8â†’7â†’2â†’1ï¼šæ³¨ï¼šå¯¹ â€œè€ƒè™‘yè½´è´Ÿæ–¹å‘æ— ç©·è¿œä¸€ä¸ªç‚¹ï¼Œæ‰€æœ‰çš„ç‚¹ç›¸å¯¹äºè¿™ä¸ªç‚¹çš„æè§’æ’åºæ°å¥½å°±æ˜¯å„ç‚¹çš„xåæ ‡åºï¼â€ è¿™å¥è¯çš„ç†è§£ï¼šå°±åƒå¤ªé˜³å…‰ç…§åœ¨åœ°çƒä¸Šçš„é“ç†æ˜¯ä¸€æ ·çš„ï¼Œå¤ªé˜³ç¦»åœ°çƒè¶³å¤Ÿçš„è¿œï¼Œé‚£ä¹ˆå®ƒçš„å…‰åˆ°è¾¾åœ°çƒä¸Šçš„æ—¶å€™ï¼Œå°±è¿‘ä¼¼çš„æ˜¯å¹³è¡Œçš„ã€‚ä¸‹åŠéƒ¨åˆ†å‡¸åŒ…ï¼ˆlower hullï¼‰çš„æ„é€ ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è€ƒè™‘ä¸€ä¸ªåœ¨yè½´æ­£æ–¹å‘æ— ç©·è¿œçš„ä¸€ä¸ªç‚¹ï¼Œä»¥æ­¤ä¸ºèµ·ç‚¹è¿›è¡Œscanï¼Œæœ€ç»ˆå¾—åˆ°lower hullï¼š1â†’4â†’7ã€‚æœ€åå°†ä¸¤ä¸ªå‡¸åŒ…åˆäºŒä¸ºä¸€å³å¯ã€‚ä»£ç å®ç°","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"å‡¸åŒ…","slug":"å‡¸åŒ…","permalink":"https://longlongqin.github.io/tags/%E5%87%B8%E5%8C%85/"}]},{"title":"Lower Bound","slug":"å­¦ä¹ ç¬”è®°/è®¡ç®—å‡ ä½•/Convex-Hull/Lower-Bound","date":"2020-03-14T09:29:23.000Z","updated":"2020-03-22T14:50:08.237Z","comments":true,"path":"archives/ba04.html","link":"","permalink":"https://longlongqin.github.io/archives/ba04.html","excerpt":"","text":"Lower Boundä»æç‚¹æ³•çš„O(n^4^)å¤æ‚åº¦ï¼Œåˆ°æè¾¹æ³•çš„O(n^3^)ï¼Œå†åˆ°å¢é‡æ„é€ æ³•å’ŒJarvis Marchçš„O(n^2^)ï¼Œæˆ‘ä»¬ç»å†äº†å°†ç‰¹å®šé—®é¢˜ç®—æ³•ä¸æ–­ä¼˜åŒ–ã€é™ä½å¤æ‚åº¦çš„è¿‡ç¨‹ã€‚é‚£ä¹ˆè¿˜æœ‰æ¯”O(n^2^)æ›´é«˜æ•ˆçš„ç®—æ³•å—ï¼Ÿå‡¸åŒ…æ„é€ ç®—æ³•çš„ä¸‹ç•Œæ˜¯ä»€ä¹ˆï¼Ÿæ¨å¹¿åˆ°ä¸€èˆ¬æƒ…å†µï¼Œåœ¨è®¡ç®—æ¨¡å‹å›ºå®šçš„æƒ…å†µä¸‹ç‰¹å®šé—®é¢˜çš„å¤æ‚åº¦ä¸‹ç•Œåˆæ˜¯å¦‚ä½•ç¡®å®šçš„ï¼Ÿåœ¨è®¡ç®—æ¨¡å‹å›ºå®šçš„æƒ…å†µä¸‹ç‰¹å®šé—®é¢˜çš„å¤æ‚åº¦ä¸‹ç•Œï¼ˆlower boundï¼‰æ˜¯ç¡®å®šçš„ã€‚ä¸¥è°¨è€ƒè™‘ï¼Œåœ¨è®¾è®¡ç®—æ³•å‰åº”è¯¥å…ˆç¡®å®šä¸‹ç•Œæ˜¯å¤šå°‘ã€‚å¯¹äºæŸä¸ªé—®é¢˜çš„ç‰¹å®šç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ—¶é—´å¤æ‚åº¦æ¥è¯„ä»·ç®—æ³•çš„å¥½åã€‚ç®—æ³•èƒ½è¾¾åˆ°çš„ä¸‹ç•Œä¹Ÿå°±æ˜¯æ‰€è°“é—®é¢˜çš„éš¾åº¦ã€‚å½“ç„¶è¿™ç§è¯„ä»·é€šå¸¸æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæœ‰æ—¶å€™ç”šè‡³æ˜¯ä¸å¯è¡Œçš„ã€‚è¿™å°±è¦å¼•å…¥æ–°çš„çš„æ–¹å¼æ¥è¡¡é‡ä¸€ä¸ªç®—æ³•çš„å¥½åã€‚è§„çº¦ï¼ˆreductionï¼‰æˆ‘ä»¬å¼•å…¥è§„çº¦ï¼ˆreductionï¼‰çš„æ–¹æ³•æ¥é—´æ¥è¡¡é‡ä¸€ä¸ªç®—æ³•ã€‚è§„çº¦ç®€å•æ¥è®²å°±æ˜¯ç”¨ä¸€ä¸ªâ€œå‚ç…§ç‰©â€å¯¹æ¯”å¾…è¯„ç®—æ³•ï¼Œå¾—åˆ°ç®—æ³•çš„å¤æ‚åº¦ã€‚è§„çº¦çš„ä¸€èˆ¬æ–¹æ³•å¦‚å›¾ï¼šå·¦ä¾§æ˜¯å·²çŸ¥çš„é—®é¢˜Aï¼Œå·²ç»æ˜ç¡®å®ƒçš„éš¾åº¦ï¼Œå³ä¾§æ˜¯å¾…åˆ†æé—®é¢˜Bï¼Œå¤æ‚åº¦æœªçŸ¥ã€‚æˆ‘ä»¬åœ¨äºŒè€…ä¹‹é—´å»ºç«‹èµ·ä¸€ç§åŸºæœ¬reductionå…³ç³»ï¼šlinear-time reductionã€‚linear-time reductionå…·ä½“è¡¨è¿°ä¸ºï¼šä»»ä½•ä¸€ä¸ªAçš„è¾“å…¥ï¼ˆinput of Aï¼‰ï¼Œéƒ½å¯ä»¥åœ¨O(n)å¤æ‚åº¦è½¬åŒ–ä¸ºä¸€ä¸ªBçš„è¾“å…¥ï¼ˆinput of Bï¼‰ï¼Œç„¶åé€šè¿‡Bçš„æŸç§ç®—æ³•ï¼ˆany algorithmï¼‰è®¡ç®—å‡ºç»“æœï¼ˆoutput of Bï¼‰;è€Œå¯¹äºoutput of Båˆéƒ½å¯ä»¥åœ¨åœ¨O(n)å¤æ‚åº¦è½¬åŒ–ä¸ºAé—®é¢˜çš„ç»“æœï¼ˆoutput of Aï¼‰ã€‚ä¸¤æ¬¡è½¬æ¢çš„å¤æ‚åº¦ä¸èƒ½è¶…è¿‡çº¿æ€§ï¼Œä¹Ÿå°±æ˜¯linear-timeï¼ˆçº¿æ€§æ—¶é—´ï¼‰ã€‚èƒ½å¤Ÿè¿›è¡Œä¸Šè¿°æ“ä½œï¼Œå°±ç§°ä¸ºï¼šAé—®é¢˜å¯ä»¥è§„çº¦åˆ°Bé—®é¢˜ï¼ˆproblem A is linear-time reducible to problem Bï¼‰ã€‚æ³¨æ„è¡¨è¿°æ–¹å¼é˜²æ­¢ææ··Aå’ŒBçš„ä½ç½®ã€‚æ›¹å†²ç§°è±¡å¯ä»¥é€šè¿‡æ›¹å†²ç§°è±¡çš„æ•…äº‹æ¥å¸®åŠ©ç†è§£è§„çº¦çš„æ€æƒ³ã€‚è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼šæ²¡æœ‰ç§¤èƒ½ç›´æ¥ç§°é‡å¤§è±¡é‡é‡ï¼ˆé—®é¢˜Bçš„éš¾åº¦æ— æ³•ç›´æ¥è¡¡é‡ï¼‰ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ï¼šåˆ©ç”¨èˆ¹å’ŒçŸ³å—é—´æ¥ç§°é‡ã€‚çŸ³å¤´å—çš„é‡é‡æ˜¯å¯ä»¥ç›´æ¥ç§°é‡çš„ï¼ˆé—®é¢˜Açš„éš¾åº¦æ˜¯å·²çŸ¥çš„ï¼‰ï¼Œåˆ©ç”¨èˆ¹å’Œæ°´æ¥è½¬æ¢çŸ³å¤´å’Œå¤§è±¡çš„é‡é‡æ˜¯å¯æ“ä½œçš„ï¼ˆè§„çº¦çš„æ–¹æ³•æ˜¯å¯æ“ä½œçš„ï¼‰ã€‚ã€è¿™é‡Œçš„è§„çº¦å…³ç³»(Reduction relationship)æ˜¯æŒ‡æ›¹å†²æˆåƒæ—¶çš„èˆ¹å’Œæ°´ã€‘è§„çº¦è®°å·å¼•å…¥è§„çº¦è®°å·ï¼Œproblem A is linear-time reducible to problem Bè¡¨ç¤ºä¸ºï¼š$$Aâ‰¤_NB$$å°†é—®é¢˜Aã€Bçš„éš¾åº¦åˆ†åˆ«è¡¨ç¤ºä¸º|A|ï¼Œ|B|ã€‚è§„çº¦è®°å·çš„æ„æ€ç›¸å½“äº|A|â‰¤|B|ï¼ŒAçš„ä¸‹ç•Œå¿…ç„¶å°±æ˜¯Bçš„ä¸‹ç•Œã€‚è§„çº¦çš„è¿‡ç¨‹ï¼šå°†Açš„è¾“å…¥è½¬åŒ–ä¸ºBçš„è¾“å…¥ç»è¿‡Bçš„æŸç§ç®—æ³•è·å¾—è§£ååˆè½¬åŒ–ä¸ºAçš„è§£ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªç®—æ³•ä¹Ÿæ˜¯è§£å†³Aé—®é¢˜çš„ç®—æ³•ã€‚å·²çŸ¥Aé—®é¢˜çš„ä¸‹ç•Œï¼Œé‚£ä¹ˆè¿™ä¸ªç®—æ³•å¿…ç„¶ä¸ä¼šä½äºAçš„è¿™ä¸ªä¸‹ç•Œã€‚æ„é€ å‡¸åŒ…çš„ä¸‹ç•ŒæŒ‰ç…§â€œæ›¹å†²ç§°è±¡â€çš„è§„çº¦æ€æƒ³ï¼Œåˆ†æé—®é¢˜çš„éš¾åº¦ï¼Œæœ€é‡è¦çš„åœ¨äºæ‰¾åˆ°â€œçŸ³å¤´â€ï¼Œè€Œèˆ¹å°±æ˜¯è§„çº¦è¿™ç§æ–¹æ³•ã€‚ä»¥äºŒç»´å‡¸åŒ…ï¼ˆ2d-CHï¼‰æ¥åˆ†æï¼Œé¦–å…ˆå°†å¾…è§£å†³çš„é—®é¢˜æ”¾åˆ°è§„çº¦è®°å·å³è¾¹ï¼Œè€Œå·¦è¾¹çš„â€œçŸ³å¤´â€å°±æ˜¯æ’åºç®—æ³•ã€‚$$Sortingâ‰¤_N2D-CH$$æ’åºæ˜¯çº¯ç²¹çš„æ•°å€¼è®¡ç®—é—®é¢˜ï¼Œè€Œå‡¸åŒ…æ˜¯å…¸å‹çš„å‡ ä½•é—®é¢˜ï¼ŒäºŒè€…æ˜¯å¦‚ä½•è”ç³»åœ¨ä¸€èµ·çš„å‘¢ï¼Ÿå‰é¢å¢é‡æ„é€ æ³•å’ŒJarvis Marchç®—æ³•æ­£æ˜¯åˆ†åˆ«ç”±ä¸¤ç§æ’åºç®—æ³•æ¥ç±»æ¯”å¼•å…¥çš„ï¼Œå¯è§æ’åºå’Œå‡¸åŒ…ä¹‹é—´æœ‰æ·±åˆ»çš„å†…åœ¨è”ç³»ã€‚äºŒè€…ä¹‹é—´çš„è”ç³»å¯ä»¥é€šè¿‡ä¸‹å›¾è¡¨ç¤ºï¼šé¦–å…ˆæ¸…ç‚¹è¦åšçš„ä»»åŠ¡ï¼šå¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…ï¼Œå°†æ’åºé—®é¢˜çš„è¾“å…¥è½¬åŒ–ä¸ºå‡¸åŒ…é—®é¢˜çš„è¾“å…¥æ’åºé—®é¢˜çš„è¾“å…¥å¯ä»¥è¡¨ç¤ºä¸ºxè½´ä¸Šçš„ä¸€ç³»åˆ—çš„ç‚¹ï¼ˆå›¾ä¸­è“è‰²ç‚¹ï¼‰ã€‚ç„¶åå°†è¿™äº›ç‚¹è½¬åŒ–ä¸ºå‡¸åŒ…é—®é¢˜çš„è¾“å…¥ï¼Œå°±æ˜¯å°†è¿™äº›å¾…æ’åºçš„æ•°è½¬åŒ–ä¸ºå¹³é¢ä¸Šçš„ç‚¹ã€‚å¼•å…¥è¾…åŠ©çº¿â€”â€”ä¸€æ¡æŠ›ç‰©çº¿ï¼Œä¾‹å¦‚å›¾ä¸­è“è‰²è™šçº¿ã€‚æ¥ä¸‹æ¥è¦å¯¹è“è‰²ç‚¹åšåˆ°æŠ›ç‰©çº¿ä¸Šçš„æ˜ å°„ï¼ˆO(n)ï¼‰ï¼Œæ˜ å°„åœ¨æŠ›ç‰©çº¿ä¸Šçš„ç‚¹ç”¨ç»¿è‰²æ ‡å‡ºã€‚è¿™æ ·å°±å®Œæˆäº†å°†å¾…æ’åºæ•°å­—è½¬åŒ–ä¸ºå¹³é¢ä¸Šç‚¹çš„æ“ä½œã€‚æ¥ä¸‹æ¥å°±å¯ä»¥ç”¨æŸç§ç®—æ³•å°†ç»¿è‰²ç‚¹æ„é€ ä¸ºå‡¸åŒ…ï¼Œå³å›¾ä¸­CH(P)ã€‚å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…ï¼Œå°†å‡¸åŒ…é—®é¢˜çš„ç»“æœè½¬åŒ–ä¸ºæ’åºé—®é¢˜çš„ç»“æœå‡¸åŒ…CH(P)å°±æ˜¯é—®é¢˜Bçš„è§£ï¼Œå¦‚ä½•å°†Bçš„è§£è½¬åŒ–ä¸ºAçš„è§£ï¼Ÿæ³¨æ„æœ€å·¦å’Œæœ€å³è¾¹ä¸¤ç‚¹çš„è¿çº¿ï¼Œå³å›¾ä¸­1å’Œ4çš„è¿çº¿4â†’1ã€‚é™¤å»è¿™æ¡è¿çº¿ä¹‹å¤–ï¼Œå…¶ä»–é¦–å°¾ç›¸æ¥çš„è¿çº¿ï¼š1â†’2ï¼Œ2â†’3å’Œ3â†’4éƒ½æ˜¯â€œæ²¿ç€xæ–¹å‘å•è°ƒçš„â€ï¼Œéå†è¿™äº›é¦–å°¾ç›¸è¿çš„è¾¹ï¼ˆO(n)ï¼‰å°±èƒ½å¾—åˆ°ä¸€ç³»åˆ—çš„æ•°å€¼ï¼Œå¹¶ä¸”å·²ç»æ˜¯æœ‰åºçš„äº†ã€‚è¿™æ ·å°±å°†å‡¸åŒ…é—®é¢˜çš„è§£â€”â€”å‡¸åŒ…CH(P) è½¬åŒ–ä¸ºäº†æ’åºé—®é¢˜çš„è§£â€”â€”æœ‰åºæ•°å€¼åºåˆ—ã€‚ä¸¤æ¬¡è½¬åŒ–è¯´æ˜è§„çº¦æ˜¯å¯è¡Œçš„ï¼Œå› æ­¤2d-CHé—®é¢˜çš„ä¸‹ç•Œå¯ç”±sortingçš„ä¸‹ç•Œç¡®å®šã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæ’åºé—®é¢˜çš„éš¾åº¦æ˜¯ç¡®å®šçš„ï¼šO(nlogn)ã€‚2d-CHé—®é¢˜çš„ä¸‹ç•Œä¹Ÿå°±æ˜¯ï¼š$$O(nlogn)$$æ›´é«˜ç»´çš„å‡¸åŒ…é—®é¢˜ä¸‹ç•Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚å¢é‡æ„é€ æ³•å’ŒJarvis Marchçš„O(n^2^)åˆ°O(nlogn)ä¹‹é—´çš„é¸¿æ²Ÿèƒ½å¦è·¨è¶Šå‘¢ï¼Ÿæ˜¯å¦å­˜åœ¨O(nlogn)å¤æ‚åº¦çš„å‡¸åŒ…æ„é€ ç®—æ³•ï¼Ÿåç»­æ–‡ç« ä¼šæœ‰å›ç­”ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"å‡¸åŒ…","slug":"å‡¸åŒ…","permalink":"https://longlongqin.github.io/tags/%E5%87%B8%E5%8C%85/"}]},{"title":"æ„é€ å‡¸åŒ…-Jarvis March(Gift Wrapping)ç®—æ³•","slug":"å­¦ä¹ ç¬”è®°/è®¡ç®—å‡ ä½•/Convex-Hull/Jarvis-March","date":"2020-03-14T09:23:45.000Z","updated":"2020-03-22T13:53:01.986Z","comments":true,"path":"archives/9c7f.html","link":"","permalink":"https://longlongqin.github.io/archives/9c7f.html","excerpt":"å›é¡¾å‡¸åŒ…æ„é€ ç®—æ³•ï¼šæç‚¹æ³•ã€æè¾¹æ³•å’Œå¢é‡æ„é€ æ³•ï¼Œå…¶å¤æ‚åº¦åˆ†åˆ«ä¸ºO(n^4^)ã€O(n^3^)å’ŒO(n^2^)ï¼Œæ•ˆç‡ç»è¿‡ä¼˜åŒ–å·²ç»å¤§å¤§æé«˜äº†ã€‚æ¥ä¸‹æ¥å¼•å…¥ä¸€ç§æ–°çš„ç®—æ³•â€”â€”Jarvis Marchï¼Œå…¶å¤æ‚åº¦ä¹Ÿæ˜¯O(n^2^)ï¼Œä½†æ˜¯ç›¸è¾ƒäºå¢é‡æ„é€ åœ¨æœ€å¥½æƒ…å†µä¸‹æ•ˆç‡æ˜¯è¾ƒé«˜çš„ã€‚","text":"å›é¡¾å‡¸åŒ…æ„é€ ç®—æ³•ï¼šæç‚¹æ³•ã€æè¾¹æ³•å’Œå¢é‡æ„é€ æ³•ï¼Œå…¶å¤æ‚åº¦åˆ†åˆ«ä¸ºO(n^4^)ã€O(n^3^)å’ŒO(n^2^)ï¼Œæ•ˆç‡ç»è¿‡ä¼˜åŒ–å·²ç»å¤§å¤§æé«˜äº†ã€‚æ¥ä¸‹æ¥å¼•å…¥ä¸€ç§æ–°çš„ç®—æ³•â€”â€”Jarvis Marchï¼Œå…¶å¤æ‚åº¦ä¹Ÿæ˜¯O(n^2^)ï¼Œä½†æ˜¯ç›¸è¾ƒäºå¢é‡æ„é€ åœ¨æœ€å¥½æƒ…å†µä¸‹æ•ˆç‡æ˜¯è¾ƒé«˜çš„ã€‚å®ç°ç­–ç•¥å…ˆæƒ³ä¸€ä¸‹ä¸ºä½•æè¾¹æ³•å¤æ‚åº¦é«˜è¾¾O(n^3^)ã€‚å®é™…ä¸Šæˆ‘ä»¬è¦å¯¹ç‚¹é›†ä¸­æ‰€æœ‰è¾¹è¿›è¡Œéå†ï¼Œè¿™éœ€è¦n^2^å¤æ‚åº¦ï¼Œç„¶åå¯¹æ¯ä¸ªè¾¹è¿›è¡Œé‰´åˆ«ï¼Œåˆéœ€è¦nå¤æ‚åº¦ï¼Œå› æ­¤æ€»ä½“å¤æ‚åº¦é«˜è¾¾O(n^3^)ã€‚é‚£ä¹ˆè¯¥å¦‚ä½•æ”¹è¿›å‘¢ï¼Ÿè¿™å°±å¯ä»¥è¿ç”¨é€‰æ‹©æ’åºçš„æ€æƒ³ï¼šå°†ä¸‹ä¸€ä¸ªè¦æŸ¥æ‰¾çš„è¾¹ç¼©å°åˆ°ä¸€ä¸ªå°èŒƒå›´ï¼Œè€Œééå†æ‰€æœ‰è¾¹ã€‚é€‰æ‹©æ’åºæ¯æ¬¡é€‰å–å‡ºçš„unsortedæœ€å¤§å…ƒç´ æ”¾åœ¨sorted éƒ¨åˆ†çš„é¦–éƒ¨ï¼Œä¹Ÿå°±æ„å‘³ç€æ•´ä¸ªunsortedéƒ¨åˆ†å¿…ç„¶ä¸ä¼šè¶…è¿‡sortedéƒ¨åˆ†ã€‚ä»ç®—æ³•æ•´ä½“æ¡†æ¶è€ƒè™‘ï¼Œæ¯æ¬¡æˆ‘ä»¬éƒ½æ˜¯ç»´æŠ¤ä¸€ä¸ªå±€éƒ¨è§£ï¼ˆä¹Ÿå°±æ˜¯sortedéƒ¨åˆ†ï¼‰ï¼Œç„¶åä»å°šæœªå¤„ç†çš„éƒ¨åˆ†ï¼ˆä¹Ÿå°±æ˜¯unsortedéƒ¨åˆ†ï¼‰æ‰¾åˆ°ä¸€ä¸ªä¸å½“å‰å±€éƒ¨è§£â€œç´§å¯†ç›¸å…³çš„å…ƒç´ â€ï¼ˆç›¸å½“äºé€‰å–çš„æœ€å¤§å…ƒç´ ï¼‰ã€‚è¿™ä¸ªæ€æƒ³ä¸ºè§£å†³å‡¸åŒ…é—®é¢˜å¸¦æ¥äº†æ–°æ€è·¯ã€‚å¯¹ç®—æ³•çš„å¤§è‡´è¿‡ç¨‹è¿›è¡Œæè¿°(æ ‡è¯†ä¸ºï¼šå·²æ‰¾åˆ°æè¾¹æ•°/æ‰€æœ‰æè¾¹æ•°)ï¼šé¦–å…ˆä»ä»»ä½•ä¸€ä¸ªæç‚¹ï¼ˆåé¢è¯´æ˜å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªç‚¹ï¼‰å¼€å§‹ï¼ˆå›¾ä¸­0/5ï¼‰ï¼Œç„¶åæ‰¾åˆ°ä¸€æ¡ä»¥è¿™ä¸ªæç‚¹ä¸ºç«¯ç‚¹çš„æè¾¹ï¼ˆ1/5ï¼‰ã€‚æ¥ç€æ²¿ç€æè¾¹å¦ä¸€ä¸ªç«¯ç‚¹ï¼ˆendpointï¼‰å‡ºå‘ï¼Œå†æ‰¾å‡ºä¸‹ä¸€æ¡æè¾¹ï¼ˆ2/5ï¼‰ã€‚å¦‚æ­¤åå¤æ“ä½œï¼Œæœ€ç»ˆä¼šæ‰¾åˆ°ä¸€æ¡ä»¥æœ€åˆæç‚¹ä¸ºendpointçš„æè¾¹ï¼Œå¾—åˆ°ä¸€ä¸ªå°é—­çš„ç¯ï¼Œå‡¸åŒ…ä¹Ÿæ„é€ å®Œæˆã€‚å‡¸åŒ…æ„é€ è¿‡ç¨‹ç±»ä¼¼äºé€‰æ‹©æ’åºä¸­sortedä¸æ–­å‘å‰æ‰©å±•ä¸€æ ·ï¼Œä¸æ–­æ‰©å±•å±€éƒ¨è§£ï¼Œæœ€åå¾—åˆ°é—®é¢˜æœ€ç»ˆè§£ã€‚å‡¸åŒ…æ„é€ çš„é—®é¢˜ç”±æ­¤åˆ†è§£ä¸ºä¸€ä¸ªä¸ªå­é—®é¢˜ï¼šå¦‚ä½•ä»endpointå‡ºå‘æ‰¾åˆ°ä¸‹ä¸€æ¡æè¾¹ã€‚ç”¨to left testæ‰¾åˆ°ä¸‹ä¸€æ¡æè¾¹ç°åˆ†æå¦‚ä½•ä»endpointæ‰¾åˆ°ä¸‹ä¸€æ¡æè¾¹ã€‚è€ƒè™‘ä¸€ä¸‹çš„ä¸€èˆ¬æƒ…å†µï¼šæˆ‘ä»¬ä»æç‚¹oå¼€å§‹å¯»æ‰¾æè¾¹ï¼Œå‡è®¾å½“å‰æ‰¾åˆ°çš„æè¾¹æ˜¯ikï¼Œæ¥ä¸‹æ¥è¦åšçš„å·¥ä½œæ˜¯æ‰¾åˆ°ä»kå‡ºå‘çš„å¦ä¸€æ¡æè¾¹ksï¼Œå³æ‰¾åˆ°æç‚¹sã€‚æ˜¾ç„¶ï¼Œsæ¥è‡ªäºå…¶ä»–é‚£äº›å°šæœªå¤„ç†çš„ç‚¹ä¸­ï¼Œé‚£ä¹ˆsä¸å…¶ä»–ç‚¹ç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿè§‚å¯Ÿå‘ç°ï¼Œikä½œä¸ºä¸€æ¡æè¾¹ï¼Œå®ƒçš„å³ä¾§è‚¯å®šéƒ½æ˜¯ç©ºçš„ï¼Œæ‰€æœ‰å…¶ä»–ç‚¹éƒ½åœ¨ikå·¦ä¾§ã€‚ç”»å‡ºkä¸å…¶ä»–å€™é€‰ç‚¹çš„æœ‰å‘ç›´çº¿ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­çš„ksï¼Œktï¼šæ³¨æ„å›¾ä¸­çº¢è‰²æ ‡å‡ºçš„è§’åº¦ï¼Œå¯ä»¥çœ‹å‡ºksä¸ikçš„å¤¹è§’æ¯”ktå°ï¼Œä¹Ÿå°±æ˜¯ksæ¯”ktç›¸è¾ƒäºikåå·¦çš„è§’åº¦æ›´å°ã€‚å®é™…ä¸Šksåå·¦çš„è§’åº¦æ¯”å…¶ä»–ä»»ä½•ä»kå‡ºå‘çš„è¾¹éƒ½å°ï¼Œè¿™å°±æ˜¯sç‚¹çš„åˆ¤å®šä¾æ®ã€‚è¿™æ ·å°±æ‰¾åˆ°äº†ä»å…¶ä½™ç‚¹ä¸­é€‰æ‹©sç‚¹çš„æ€è·¯ï¼šä»»é€‰ä¸¤ä¸ªç‚¹ï¼Œä»kå‡ºå‘è¿‡è¿™ä¸¤ç‚¹åšæœ‰å‘è¾¹ï¼Œçœ‹å“ªä¸ªåå·¦çš„è§’åº¦æ›´å°å°±ç•™ä¸‹ï¼Œå¦ä¸€ç‚¹ä¸¢å¼ƒã€‚ç„¶åå†æ‹¿ä¸€ç‚¹ä¸ç•™ä¸‹çš„ç‚¹æ¯”è¾ƒï¼Œåå¤è¿™ä¸ªè¿‡ç¨‹ï¼Œæœ€ç»ˆç•™ä¸‹çš„å°±æ˜¯è¦æ‰¾çš„sç‚¹ã€‚é—®é¢˜è‡³æ­¤è½¬åŒ–ä¸ºï¼šå¦‚ä½•æ¯”è¾ƒä¸¤æ¡æœ‰å‘è¾¹ï¼ˆä¾‹å¦‚kså’Œktï¼‰ç›¸è¾ƒäºå¦ä¸€æœ‰å‘ç›´çº¿ï¼ˆä¾‹å¦‚ikï¼‰è°åå·¦çš„è§’åº¦æ›´å°ã€‚å½“ç„¶å¯ä»¥é€šè¿‡è®¡ç®—ä¸‰è§’å‡½æ•°çš„æ–¹æ³•æ¥æ¯”è¾ƒï¼Œè¿™æ˜¯æœ€ç›´è§‚çš„æ•°å­¦æ€ç»´ã€‚ä½†æ˜¯è¿™æ ·è®¡ç®—ååˆ†å¤æ‚ï¼Œæ›´é‡è¦çš„æ˜¯å¼•å…¥äº†è¯¯å·®ã€‚è¿™æ—¶å€™åˆè¦ä½¿ç”¨to left testè¿™ä¸ªåŸºç¡€æ–¹æ³•æ¥è§£å†³é—®é¢˜äº†å…·ä½“åšæ³•å°±æ˜¯ä»¥åœ¨kså’Œktä¸­ä»¥ä»»æ„ä¸ªä¸ºåŸºå‡†ï¼ˆå¦‚ä»¥ksä¸ºåŸºå‡†ï¼‰ï¼Œå¯¹å¦ä¸€ç‚¹ï¼ˆå¦‚tï¼‰åšto left testã€‚ä¸Šå›¾ç‚¹tå’Œæœ‰å‘è¾¹ksçš„to left testç»“æœä¸ºtrueï¼Œtåœ¨kså·¦è¾¹ï¼Œå› æ­¤ksåå·¦çš„è§’åº¦æ›´å°ï¼Œèˆå¼ƒç‚¹tã€‚ç±»æ¯”é€‰æ‹©æ’åºæ¥ç†è§£:å·²å¾—åˆ°çš„æè¾¹ï¼ˆä»æç‚¹oå¼€å§‹åˆ°ikçš„é¦–å°¾ç›¸è¿çš„æè¾¹ï¼‰â€”â€”ç›¸å½“äº sortedéƒ¨åˆ†å…¶ä½™ç‚¹â€”â€”ç›¸å½“äº unsortedéƒ¨åˆ†æ‰¾åˆ°ç‚¹sï¼ˆèƒ½æ„æˆæœ€å°åè§’çš„ç‚¹ï¼‰â€”â€”ç›¸å½“äº ä»unsortedéƒ¨åˆ†å–å‡ºæå¤§å€¼é€‰æ‹©æ’åºä¸­çš„é€‰æ‹©è¿‡ç¨‹éœ€è¦æ¯”è¾ƒå…ƒç´ å¤§å°ï¼Œå°±è¦ç”±ä¸€ç§æ¯”è¾ƒå™¨å®Œæˆï¼Œè€Œä¸Šè¿°æ¯”è¾ƒåè§’çš„è¿‡ç¨‹ä¹Ÿå¯ä»¥æŠ½è±¡ä¸ºä¸€ç§æ¯”è¾ƒå™¨çš„æ“ä½œã€‚æ„é€ å‡¸åŒ…çš„ç®—æ³•æ¡†æ¶ä¸é€‰æ‹©æ’åºç›¸åŒï¼Œåªæ˜¯æ¯”è¾ƒå™¨æ›¿æ¢ä¸ºto left testè€Œå·²ã€‚æ­¤å¤„åªæ˜¯è€ƒè™‘ä¸€èˆ¬æƒ…å†µï¼Œä¸€äº›ç‰¹æ®Šç»†èŠ‚æœªè¿›è¡Œå¤„ç†ã€‚ä¾‹å¦‚åœ¨stä¸Šæœ‰så’Œsâ€™ä¸¤ç‚¹ï¼Œè¿™ä¸¤ç‚¹çš„å–èˆé—®é¢˜æœªè€ƒè™‘ã€‚å½“ç„¶ä¸ºäº†ç†è§£ç®—æ³•æ•´ä½“æ¡†æ¶å¿½ç•¥ç‰¹æ®Šæƒ…å†µæ˜¯å¾ˆå¿…è¦çš„ã€‚ç¡®å®šç¬¬ä¸€ä¸ªæç‚¹ä¸€ä¸ªç»†èŠ‚ï¼šä¸Šæ–‡ä¸€å¼€å§‹æåˆ°çš„ç®—æ³•çš„æœ€å¼€å§‹çš„ç¬¬ä¸€ä¸ªæç‚¹å¦‚ä½•ç¡®å®šï¼Ÿä»»ä½•ä¸€ä¸ªæç‚¹éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæˆ‘ä»¬æ²¡å¿…è¦å»è®¡ç®—å‡ºå“ªä¸ªç‚¹æ˜¯æç‚¹ã€‚å¯ä»¥é€‰å–yåæ ‡æœ€å°çš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯æœ€ä½ç‚¹ï¼Œåœ¨æ²¡æœ‰é€€åŒ–çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç‚¹ä¸€å®šæ˜¯ä¸€ä¸ªæç‚¹ã€‚å¦‚æœæƒ…å†µé€€åŒ–ï¼Œæœ‰å¤šä¸ªæœ€ä½ç‚¹ï¼ˆå¦‚ä¾‹å›¾ä¸­æ‰€ç¤ºï¼‰ï¼Œæˆ‘ä»¬å°±å»é€‰xåæ ‡æœ€å°çš„é‚£ä¸ªç‚¹ï¼Œä¹Ÿå°±æ˜¯æœ€å·¦è¾¹çš„ç‚¹å³å¯ã€‚è¿™ç§æ–¹æ³•é€‰å‡ºçš„ç‚¹ç§°ä¸ºlowest-then-leftmost pointï¼ˆLTLï¼‰ã€‚æ³¨æ„é€‰å–çš„è§„åˆ™çš„å…ˆåé¡ºåºï¼Œå…ˆé€‰lowestï¼Œè‹¥ç‚¹ä¸å”¯ä¸€å†é€‰leftmostã€‚Jarvis Marchç±»æ¯”é€‰æ‹©æ’åºçš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¾—åˆ°çš„å‡¸åŒ…æ„é€ ç®—æ³•å°±æ˜¯Jarvis Marchç®—æ³•ï¼Œåˆç§°gift wrappingç®—æ³•ï¼ˆç®—æ³•è¿‡ç¨‹å¦‚åŒ…è£…ç¤¼ç‰©ä¸€æ ·ï¼‰ã€‚æ¥ä¸‹æ¥çœ‹ç®—æ³•å…·ä½“å®ç°æ–¹æ³•ã€‚12345678910111213141516171819202122232425262728293031323334353637383940bool ToLeft(Point P, Point q, Point s)&#123; int area2 = p.x*q.y - p.y*q.x + q.x*s.y -q.y*s.x + s.x*p.y - s.y*p.x; return area2 &gt;0 ; //å·¦ä¾§ä¸ºçœŸ&#125;int LTL (Point S[], int n)&#123; int ltl = 0; //the lowest-then-leftmost point for(int k=1; k&lt;n;k++)&#123; if(S[k].y &lt; S[ltl].y || (S[k].y==S[ltl].y &amp;&amp; S[k].x&lt;S[ltl].x)) ltl =k; &#125; return ltl;&#125;void Javis(Point S[], int n)&#123; for (int k=0; k&lt;n; k++) S[k].extreme =FALSE; //é¦–å…ˆå°†æ‰€æœ‰ç‚¹æ ‡è®°ä¸ºéæç‚¹ int ltl=LTL(S, n); //æ‰¾åˆ°LTL int k=ltl; //å°†LTLä½œä¸ºç¬¬ä¸€ä¸ªæç‚¹ do &#123; S[k].extrem = true; int s =-1; //sæ˜¯è¦æ‰¾çš„ä¸‹ä¸€ä¸ªæç‚¹ï¼Œç”¨tå»å¾ªç¯æ‰¾ for (int t=0; t&lt;n; t++) &#123; if(t != k &amp;&amp;t != s &amp;&amp; ( s == -1 || !ToLeft(S[K],S[s],S[t]) ) ) s = t; //å¦‚æœtåœ¨pqçš„å³ä¾§ï¼Œåˆ™æ›´æ–°s &#125; S[k].succ = s; k = s; //æ–°çš„æè¾¹pqç¡®å®š k = s; //æ›´æ–°kçš„å€¼ï¼Œå˜ä¸ºä¸‹ä¸€æ¬¡æŸ¥æ‰¾çš„èµ·ç‚¹ &#125;while(ltl != k) //å¦‚æœå¾ªç¯å›åˆ°äº†åŸæ¥çš„ç‚¹ï¼Œåˆ™ç»“æŸ&#125;æ¢³ç†é¦–å…ˆï¼Œåˆå§‹åŒ–å°†æ‰€æœ‰ç‚¹éƒ½è®¾ä¸ºï¼šéæç‚¹ç„¶åï¼Œå¼€å§‹æ‰¾åˆ°ç¬¬ä¸€ä¸ªæç‚¹ï¼ˆç”¨LTLæ–¹æ³•ï¼‰ï¼Œæ‰¾åˆ°ä¹‹åèµ‹å€¼ç»™kæ¥ä¸‹æ¥ï¼Œå¼€å§‹æ‰¾ä¸‹ä¸€ä¸ªæç‚¹sï¼šä¸»è¦ç”¨ToLeft Testæ¥æ‰¾å‡ºä¸‹ä¸€ä¸ªæç‚¹å¾ªç¯ç¬¬3æ­¥éª¤ï¼Œç›´åˆ°æ‰¾åˆ°æ‰€æœ‰æç‚¹å°ç»“æœ€ååˆ†æJarvis Marchç®—æ³•ç›¸è¾ƒäºå¢é‡æ„é€ æ³•çš„ä¼˜åŠ¿ã€‚äºŒè€…éƒ½æ˜¯O(n^2^)çš„å¤æ‚åº¦ï¼ŒJarvis Marchç®—æ³•çš„ä¼˜åŠ¿åœ¨äºå…¶çš„â€œè¾“å‡ºæ•æ„Ÿæ€§ï¼ˆoutput sensitiveï¼‰â€ã€‚è€ƒè™‘ç‚¹é›†Sï¼Œå…±æœ‰nä¸ªç‚¹ï¼Œæ¥æ„é€ Sä¸Šçš„å‡¸åŒ…ã€‚ä½•ä¸ºâ€œè¾“å‡ºæ•æ„Ÿæ€§â€ï¼ŸJarvis Marchç®—æ³•æ¯æ¬¡æ–°åŠ å…¥ä¸€æ¡è¾¹éƒ½ä¼šè€—è´¹nçš„å¤æ‚åº¦ï¼Œä½†æ˜¯æ„é€ è¿‡ç¨‹ä¸€å…±ä¼šåŠ å…¥çš„è¾¹æ•°å¾€å¾€æ¯”nå°‘ã€‚å¦‚ä¸‹å›¾ï¼ˆè®¾n = 7ï¼‰ï¼šåœ¨éé€€åŒ–ä¸ºå…±çº¿çš„å‰æä¸‹ï¼Œæœ€å¥½æƒ…å†µä¸ºåªåŠ å…¥3æ¡è¾¹ï¼ˆå¤æ‚åº¦ä¸ºO(3n)ï¼‰ï¼Œæœ€åæƒ…å†µä¸ºæ‰€æœ‰ç‚¹éƒ½æ˜¯æç‚¹ï¼ŒåŠ å…¥n-1æ¡è¾¹ï¼ˆå¤æ‚åº¦ä¸ºO(n^2^)ï¼‰ã€‚å®é™…æƒ…å†µä¸­æœ€åæƒ…å†µå‡ºç°çš„å‡ ç‡å¾ˆå°ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæŒ‡æ ‡hæ¥è¡¡é‡å‡¸åŒ…çš„æè¾¹æ•°ï¼ˆthe size of convex hullï¼‰ï¼š$$h = |CH(S)|$$Jarvis Marchç®—æ³•ç®—æ³•çš„å¤æ‚åº¦æ›´å‡†ç¡®çš„è¡¨ç¤ºä¸ºO(nh)ã€‚håˆç”±æœ€ç»ˆè¾“å‡ºç»“æœï¼Œå³å‡¸åŒ…æœ¬èº«æ¥å†³å®šï¼Œè¾“å‡ºç»“æœå†³å®šäº†æ„é€ è¿‡ç¨‹çš„å¤æ‚åº¦ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œè¾“å‡ºæ•æ„Ÿæ€§â€ã€‚è¿™ç§ç±»å‹çš„ç®—æ³•åˆè¢«ç§°ä¸ºoutput sensitive algorithmã€‚è¿™ç§ç‰¹æ€§åœ¨å…¶å®ƒå‡¸åŒ…ç®—æ³•ä¸­ä¹Ÿä¼šä½“ç°ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"å‡¸åŒ…","slug":"å‡¸åŒ…","permalink":"https://longlongqin.github.io/tags/%E5%87%B8%E5%8C%85/"}]},{"title":"Convex Hull(å‡¸åŒ…)","slug":"å­¦ä¹ ç¬”è®°/è®¡ç®—å‡ ä½•/Convex-Hull/Convex-Hull-å‡¸åŒ…","date":"2020-03-14T09:15:07.000Z","updated":"2020-03-22T14:23:34.120Z","comments":true,"path":"archives/510d.html","link":"","permalink":"https://longlongqin.github.io/archives/510d.html","excerpt":"è¿™å±±ä¹‹é«˜ï¼Œå°±å«å‡¸ç¢§ï¼›å±±ä¹‹ä½æ´¼è¿‘æ°´å¤„ï¼Œå°±å«ä½œå‡¹æ™¶ã€‚è¿™å‡¸ã€å‡¹äºŒå­—ï¼Œå†æ¥ç”¨çš„äººæœ€å°‘ï¼Œå¦‚ä»Šç›´ç”¨åšè½©é¦†ä¹‹åï¼Œæ›´è§‰æ–°é²œï¼Œä¸è½çª è‡¼ã€‚","text":"è¿™å±±ä¹‹é«˜ï¼Œå°±å«å‡¸ç¢§ï¼›å±±ä¹‹ä½æ´¼è¿‘æ°´å¤„ï¼Œå°±å«ä½œå‡¹æ™¶ã€‚è¿™å‡¸ã€å‡¹äºŒå­—ï¼Œå†æ¥ç”¨çš„äººæœ€å°‘ï¼Œå¦‚ä»Šç›´ç”¨åšè½©é¦†ä¹‹åï¼Œæ›´è§‰æ–°é²œï¼Œä¸è½çª è‡¼ã€‚æ¬§æ‹‰å…¬å¼ç®€å•ä»‹ç»ä¸€ä¸‹æ¬§æ‹‰å…¬å¼ï¼šè™šæ•°ä¸­ï¼ši^2^=-1 ; i=âˆš(-1)å…¶ä¸­Î¸ä¸ºå®æ•°ï¼Œiè¡¨ç¤ºè™šæ•°ä¸­çš„è™šæ•°å•ä½ iï¼›æ¬§æ‹‰æ’ç­‰å¼ï¼šå½“Î¸=Ï€æ—¶ï¼›å‡ ä½•å­¦ä¸­çš„æ¬§æ‹‰å…¬å¼ï¼šV-E+F=2 ã€vï¼šå‡ ä½•ä½“çš„é¡¶ç‚¹æ•°ï¼›Eï¼šè¾¹æ•°ï¼›Fï¼šé¢æ•°ã€‘å‡¸åŒ…å‡¸åŒ…ï¼šæ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šå¾ˆå¤šé’‰å­é’‰åœ¨æœ¨æ¿ä¸Šé¢ï¼Œç„¶åç”¨ä¸€ä¸ªçš®ç­‹å°†è¿™äº›é’‰å­åŒ…å›´èµ·æ¥ï¼Œå½“æˆ‘ä»¬æ¾æ‰‹åï¼Œçš®ç­‹å°±æŠŠè¿™äº›å®šåœ¨å…¨éƒ½åŒ…å›´èµ·æ¥ã€‚æ­¤æ—¶ï¼Œè¿™ä¸ªçš®ç­‹æ‰€å½¢æˆçš„å‡¸å¤šè¾¹å½¢å°±å«å‡¸åŒ…ã€‚å¦‚ä¸‹å›¾çš„è“è‰²çš„å¤šè¾¹å½¢å°±æ˜¯å‡¸åŒ…ã€‚å‡¸æ€§(Convexity)ä¸‹å›¾ä¸­ï¼Œå‡è®¾x,y,zæ˜¯ä¸‰ç§é¢œè‰²ï¼Œå¦‚æœä»…ä»¥x,yå°±èƒ½è°ƒå‡ºæ¥çš„é¢œè‰²ï¼Œé‚£ä¹ˆå¦‚uæ‰€ç¤ºå®ƒä¸€å®šä¼šè½åœ¨x,yä¸­ï¼›è‹¥éœ€è¦x,y,zä¸‰ç§ ä¸€èµ·ï¼Œé‚£ä¹ˆå¦‚væ‰€ç¤ºä¼šè½åœ¨ä»¥x,y,zä¸‰ç‚¹è¿æˆçš„ä¸‰è§’å½¢å†…éƒ¨ã€‚æç‚¹(Extreme Point)æœ‰ä¸€ä¸ªç‚¹é›†Sã€‚å¦‚æœå­˜åœ¨é€šè¿‡ç‚¹Pçš„ç›´çº¿Lï¼Œä½¿å¾—ç‚¹é›†Sä¸­é™¤äº†ç‚¹Pä¹‹å¤–çš„å…¶ä»–çš„ç‚¹éƒ½åœ¨è¿™ä¸ªç›´çº¿çš„åŒä¸€ä¾§ï¼Œåˆ™è¿™ä¸ªç‚¹På°±æ˜¯æç‚¹(Extreme Points)ã€‚åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦ä¸ºæç‚¹ï¼šè¯¥ç‚¹Pæ˜¯å¦ä¼šè¢«åŒ…å«åœ¨å…¶ä»–ç‚¹ä¸­ä»»æ„ä¸‰ä¸ªç‚¹å½¢æˆçš„ä¸‰è§’å½¢ä¸­ï¼Œå¦‚æœç‚¹Pä¸åœ¨ä»»ä½•ä¸‰è§’å½¢å†…éƒ¨ï¼Œåˆ™è¯´æ˜ç‚¹Pæ˜¯æç‚¹ã€‚åä¹‹ï¼Œåˆ™ä¸æ˜¯æç‚¹ã€‚å¦‚ä¸‹å›¾ï¼šä¸‹å›¾ä¸­ï¼ŒSå°±ä¸æ˜¯æç‚¹ï¼Œå› ä¸ºä»–åœ¨ä¸‰è§’å½¢å†…éƒ¨ã€‚åˆ¤æ–­æç‚¹çš„ç®—æ³•In-Trangle Testç®—æ³•æè¿°ä¼ªä»£ç ï¼šå…¶å®è¿™ä¸ªç®—æ³•å°±æ˜¯åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨ä¸‰è§’å½¢å†…éƒ¨ã€‚ä»£ç å®ç°ï¼š123456789101112131415void extremePoint (point S[], int n)&#123; for(int s=0; s&lt;n; s++) S[s].extreme = TRUE; for(int p=0; p&lt;n; p++) for(int q=p+1; q&lt;n; q++) for(int r=q+1; r&lt;n; r++) for(int s=0; s&lt;n; s++) &#123; if(s==p || s==q || s==r ||!S[s].extreme) continue; if(Intriangle(S[p],S[q],S[r],S[s])) S[s].extreme = FALSE; &#125;&#125;å¯çŸ¥ï¼Œè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n^4^)ï¼Œå…¶å®æŒºå¤§çš„ï¼Œåœ¨åé¢æˆ‘ä»¬ä¼šè¿›ä¸€æ­¥æ”¹å–„ã€‚è¿™æ ·åŸºäºæç‚¹çš„å‡¸åŒ…ç®—æ³•è™½ç„¶æ•ˆç‡ä¸é«˜ï¼Œä½†æ˜¯å®ƒä¼šå¼•å‡ºä¸€ä¸ªéå¸¸é‡è¦çš„æ“ä½œæˆ‘ä»¬ç§°ä¹‹ä¸ºTo-Left Teståœ¨åé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªæµ‹è¯•å‡ ä¹æ˜¯è´¯ç©¿äºæˆ‘ä»¬è®¡ç®—å‡ ä½•è¿™ä¸ªè¯¾ç¨‹çš„å§‹ç»ˆçš„ã€‚å¦‚æœè¯´æˆ‘ä»¬åˆšæ‰æ‰€ç»™å‡ºçš„é‚£ä¸ªç®—æ³•è¿˜æœ‰ä»€ä¹ˆéœ€è¦è¡¥å……çš„è¯å…¶å®æœ€é‡è¦çš„ä¹Ÿå°±æ˜¯é‚£æ ·çš„ä¸€ä¸ªç»†èŠ‚ä¹Ÿå°±æ˜¯æ‰€è°“çš„In-Triangle testã€‚To-Left Testæˆ‘ä»¬å°†åˆšæ‰è¿™ä¸ªIn-Triangle Testè½¬åŒ–ä¸ºä¸‰æ¬¡To-Leftæµ‹è¯•ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç‚¹å¦‚æœç¡®å®è½åœ¨æŸä¸€ä¸ªä¸‰è§’å½¢çš„å†…éƒ¨çš„è¯é‚£ä¹ˆç›¸å¯¹äºè¿™ä¸ªä¸‰è§’å½¢çš„ä¸‰æ¡è¾¹æ‰€åšçš„è¿™ä¸ªTo-Leftæµ‹è¯•éƒ½ä¼šç»Ÿä¸€çš„è¿”å›trueæˆ–è€…ç»Ÿä¸€åœ°è¿”å›falseã€‚1234567bool InTriangle(Point p, Point q, Point r, Point s)&#123; bool pqLeft = ToLeft(p, q, s); bool qrLeft = ToLeft(q, r, s); bool rpLeft = ToLeft(r, p, s); return (pdLeft == qrLeft) &amp;&amp; (qrLeft == rqLeft);&#125;To-Leftæµ‹è¯•æ˜¯ç›¸å¯¹äºå¦å¤–è¿™ä¸¤ä¸ªç‚¹æ‰€ç¡®å®šçš„é‚£æ¡æœ‰å‘ç›´çº¿è€Œè¨€çš„ï¼Œä»»ä½•ä¸€æ¡æœ‰å‘ç›´çº¿ä¸ä»…ä¼šæŠŠå¹³é¢åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çŸ¥é“å“ªä¸€è¾¹æ˜¯å·¦è¾¹ï¼Œå“ªä¸€è¾¹æ˜¯å³è¾¹ã€‚To-Leftï¼Œå…¶å®å°±æ˜¯è¯´è¿™ä¸ªç‚¹ç›¸å¯¹äºåˆšæ‰çš„é‚£æ¡æœ‰å‘çº¿è€Œè¨€åˆ°åº•æ˜¯ä½äºå®ƒçš„å·¦ä¾§ï¼Œè¿˜æ˜¯å³ä¾§ã€‚å¦‚æœæ˜¯å‰è€…å°±æ˜¯trueï¼Œå¦åˆ™çš„è¯å°±æ˜¯falseã€‚å› ä¸ºä¸‰è§’å½¢æœ‰ä¸‰æ¡è¾¹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨ä¸‰æ¬¡To-Left Testã€‚To-Left Testå…·ä½“å®ç°ï¼šè¿™é‡Œç”¨åˆ°äº†è¡Œåˆ—å¼æ¥æ±‚ä¸‰è§’å½¢é¢ç§¯ï¼ˆè‡³äºåŸç†ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼‰ã€‚ä¸‹å›¾ä¸­çš„è¿™ä¸ªè¡Œåˆ—å¼å®é™…ä¸Šç®—çš„é¦–å…ˆæ˜¯å®ƒçš„é¢ç§¯çš„ä¸¤å€ã€‚123456789101112bool ToLeft(Point p, Point q, Point s)&#123; return Area2(p, q, s) &gt; 0; &#125;int Area2(Point p, Point q, Point s)&#123; return p.x * q.y - p.y * q.x +q.x * s.y - q.y * s.x +s.x * p.y - s.y *p.x;&#125;æ³¨æ„ï¼šè¿™é‡Œçš„é¢ç§¯å…¶å®æ˜¯â€œæœ‰å‘é¢ç§¯â€ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œçš„é¢ç§¯åˆ†æ­£è´Ÿï¼ˆç›¸å¯¹äºè¿™æ ·ä¸€ä¸ªé€†æ—¶é’ˆçš„ä¸€ä¸ªç¼–å·pqsçš„è¿™æ ·çš„ä¸€ä¸ªé¢ç§¯ ä¸ såœ¨å³ä¾§ä¹Ÿå°±æ˜¯æŒ‰ç…§é¡ºæ—¶é’ˆçš„pqsæ‰€æ„æˆçš„é¢ç§¯è™½ç„¶æœ‰å¯èƒ½å¤§å°æ˜¯ä¸€æ ·å®Œå…¨å¯¹ç§°ä½†æ˜¯å®ƒä»¬çš„ç¬¦å·æ˜¯ç›¸åçš„ï¼‰ã€‚æ•´ä¸ªè¿™ä¸ªTo-Leftçš„æµ‹è¯•çš„åˆ¤æ–­çš„ä¾æ®ä¹Ÿå°±åœ¨äºè¿™ä¸ªç¬¦å·ã€‚è¿™ä¸ªè¡Œåˆ—å¼å–æ­£æ¡ä»¶ä¸ºï¼šå½“ä¸”ä»…å½“sä½äºpqæ‰€ç¡®å®šçš„è¿™æ¡æœ‰å‘ç›´çº¿çš„å·¦ä¾§ã€‚å…¶ä¸­è½¬æ¢æˆä»£ç ä¹Ÿæ˜¯éå¸¸ç®€æ˜çš„ï¼Œä»£ç å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚è‡³æ­¤ï¼ŒTo-Left Testå®ç°å®Œæˆã€‚æè¾¹(Extreme Edge)æè¾¹ï¼šä¸¤ä¸ªæç‚¹è¿æˆçš„è¾¹ï¼Œå‰©ä½™çš„æ‰€æœ‰ç‚¹å‡ä¼šåœ¨è¯¥è¾¹çš„ä¸€ä¾§ã€‚åˆ¤æ–­æ˜¯å¦ä¸ºæè¾¹ï¼šä»£ç å®ç°ï¼š12345678void markEE(point S[], int n)&#123; for (int k=0; k&lt;n; k++) S[k].extreme = FALSE; for (int p=0; p&lt;n; p++) //test for(int q=p+1; q&lt;n; q++) //æ£€éªŒæ¯ä¸€æ¡è¾¹ checkEdge(S,n,p,q) //æœ‰å‘è¾¹pq&#125;1234567891011void checkEdge(Point S[], int n, int p, int q)&#123; bool LEmpty =TRUE, REmpty =TRUE; for (int k=0; k&lt;n &amp;&amp; (LEmpty || REmpty); k++) &#123; if (k != p &amp;&amp; k != q) ToLeft(S[p], S[q], S[k]) ? LEmpty=FALSE : REmpty=FALSE; &#125; if(LEmpty || REmpty) S[p].extreme=S[q].extreme=TRUE;&#125;å®ç°çš„æ­¥éª¤ï¼šåˆå§‹æ—¶ï¼Œå…ˆå‡è®¾æ‰€æœ‰çš„ç‚¹éƒ½ä¸æ˜¯æç‚¹ã€‚å¼€å§‹éç‚¹é›†Sä¸­çš„ç‚¹ï¼Œå®ƒä»¬ä¸¤ä¸¤ç»„åˆæˆä¸€ä¸ªçº¿æ®µï¼Œç„¶åè¿›è¡ŒcheckEdge(æ£€æŸ¥è¿™äº›çº¿æ®µæ˜¯å¦æ˜¯æè¾¹)ã€‚æ£€æŸ¥çš„æ–¹æ³•checkEdgeï¼šåˆ©ç”¨ToLeftæµ‹è¯•ï¼Œæ¯æ¬¡éƒ½å°†å½“å‰çš„çº¿æ®µä¸å…¶ä»–ç‚¹ï¼ˆå³ï¼Œé™¤äº†è¿™ä¸¤ä¸ªç‚¹ä¹‹å¤–çš„ç‚¹ï¼‰è¿›è¡ŒToLeftæµ‹è¯•ï¼Œå¦‚æœæµ‹è¯•ç»“æœä¸­ï¼šLEmptyã€REmpty å…¶ä¸­ä¹‹ä¸€ä¸ºtrueï¼Œå°±è¡¨æ˜è¿™ä¸¤ä¸ªç‚¹æ„æˆçš„çº¿æ®µä¸º*æè¾¹*ï¼Œè€Œä¸”åŒæ—¶ä¹Ÿæ£€æµ‹å‡ºè¿™ä¸¤ä¸ªç‚¹æ˜¯*æç‚¹*ã€‚ï¼ˆå…¶å®ä¸¤ä¸ªç‚¹ç»„æˆçš„çº¿æ®µè¿›è¡ŒcheckEdgeçš„ç»“æœä¸­çš„LEmptyã€REmptyæœ€å¤šåªæœ‰ä¸€ä¸ªæ˜¯true,å› ä¸ºè¿™é‡Œä¸å­˜åœ¨ä¸€æ¡è¾¹çš„ä¸¤ä¾§éƒ½æ²¡æœ‰å…¶ä»–ç‚¹çš„æƒ…å†µï¼‰12345678910111213141516171819202122void markEE(Point S[], int n) //n&gt;2&#123; for(int k = 0; k &lt;n; k ++) S[k].extreme = False; //å…ˆå‡è®¾æ‰€æœ‰çš„ç‚¹éƒ½ä¸æ˜¯æç‚¹ for(int p = 0; p &lt; n; p ++) for(int q = p + 1; q &lt; n; q ++) checkEdge(S, n, p, q);&#125;void checkEdge(Point S[], int n, int p, int q)&#123; //LEmptyã€REmptyè¡¨ç¤ºæ”¹è¾¹çš„å·¦ä¾§ã€å³ä¾§ï¼Œç­‰äºTrueæ—¶è¡¨ç¤ºè¯¥ä¾§æ˜¯æ²¡æœ‰ç‚¹çš„ã€‚ bool LEmpty = True, REmpty = True; for(int k = 0; k &lt; n &amp;&amp; (LEmpty || REmpty); k ++) &#123; if(k != p &amp;&amp; k != q) &#123; ToLeft(S[p], S[q], S[k]) ? LEmpty = False : REmpty = False; &#125; &#125; if(LEmpty || REmpty) S[p].extreme = S[q].extreme = True;&#125;åŒæ ·å¯åˆ©ç”¨æ­¤æ¥åˆ¤æ–­æ˜¯å¦æ˜¯æç‚¹ï¼ˆå¤æ‚åº¦ä¸ºO(n^3)ï¼‰ã€‚è¡¥ï¼šæ ¹æ®æè§’æ’åºå®šä¹‰ï¼šæˆ‘ä»¬å¹³å¸¸æ‰€ä½¿ç”¨çš„åæ ‡ç³»éƒ½æ˜¯ç›´è§’åæ ‡ç³»ï¼Œè€Œæè§’æ’åºæ˜¯åœ¨æåæ ‡ç³»ä¸‹è¿›è¡Œçš„ã€‚è¿™é‡Œé¦–å…ˆè¦é€‰å–ä¸€ä¸ªç‚¹ï¼Œç„¶åå…¶å®ƒç‚¹æ ¹æ®ä¸å‚è€ƒç‚¹çš„è¿çº¿ä¸xè½´æ‰€æˆçš„å¤¹è§’çš„å¤§å°è¿›è¡Œæ’åºçš„ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸ºç»•ç€ä¸€ä¸ªç‚¹é€†æ—¶é’ˆè½¬åœˆè®¿é—®ã€‚ä»£ç ï¼šåœ¨è®²å…·ä½“å®ç°æ–¹æ³•ä¹‹å‰ï¼Œå…ˆç»™å‡ºç”¨åˆ°çš„å‡½æ•°å’Œç»“æ„ä½“ï¼š1234567891011121314struct point//å­˜å‚¨ç‚¹&#123; double x,y;&#125;;double cross(double x1,double y1,double x2,double y2) //è®¡ç®—å‰ç§¯&#123; return (x1*y2-x2*y1);&#125;double compare(point a,point b,point c)//è®¡ç®—æè§’&#123; return cross((b.x-a.x),(b.y-a.y),(c.x-a.x),(c.y-a.y));&#125;åˆ©ç”¨å‰ç§¯çš„æ­£è´Ÿæ¥æ’åº å…³äºå‰ç§¯ï¼šå‰ç§¯=0æ˜¯æŒ‡ä¸¤å‘é‡å¹³è¡Œï¼ˆé‡åˆï¼‰ï¼›å‰ç§¯&gt;0ï¼Œåˆ™å‘é‡aåœ¨å‘é‡bçš„é¡ºæ—¶é’ˆæ–¹å‘ï¼ˆç²—ç•¥çš„ç†è§£ä¸ºåœ¨aåœ¨bçš„ä¸‹æ–¹ï¼‰ï¼›å‰ç§¯&lt;0ï¼Œåˆ™å‘é‡aåœ¨å‘é‡bçš„é€†æ—¶é’ˆæ–¹å‘ï¼ˆç²—ç•¥çš„ç†è§£ä¸ºåœ¨aåœ¨bçš„ä¸Šæ–¹ï¼‰123456789bool cmp(point a,point b) &#123; point c;//åŸç‚¹ c.x = 0; c.y = 0; if(compare(c,a,b)==0)//è®¡ç®—å‰ç§¯ï¼Œå‡½æ•°åœ¨ä¸Šé¢æœ‰ä»‹ç»ï¼Œå¦‚æœå‰ç§¯ç›¸ç­‰ï¼ŒæŒ‰ç…§Xä»å°åˆ°å¤§æ’åº return a.x&lt;b.x; else return compare(c,a,b)&gt;0;&#125;ç”¨ complex çš„å†…å»ºå‡½æ•°ï¼Œç®—å‡ºæè§’å¤§å°ã€‚12345678910#include &lt;complex&gt;#define x real()#define y imag()#include &lt;algorithm&gt;using namespace std;bool cmp(const Point&amp; p1, const Point&amp; p2)&#123; return arg(p1) &lt; arg(p2);&#125;ç”¨ arctan è®¡ç®—æè§’å¤§å°ã€‚æ³¨æ„è§’çš„å¤§å°èŒƒå›´æ˜¯(-180Â°, +180Â°]ã€‚å¼§åº¦è¡¨ç¤ºã€‚è¿™é‡Œç”¨ arctan2 å‡½æ•°åº”è¯¥æ˜¯ä¸ºäº†æé«˜ç²¾åº¦ã€‚å…³äºatan2()å‡½æ•°ï¼šåœ¨Cè¯­è¨€çš„math.hæˆ–C++ä¸­çš„cmathä¸­æœ‰ä¸¤ä¸ªæ±‚åæ­£åˆ‡çš„å‡½æ•°atan(double x)ä¸atan2(double y,double x) ä»–ä»¬è¿”å›çš„å€¼æ˜¯å¼§åº¦è¦è½¬åŒ–ä¸ºè§’åº¦å†è‡ªå·±å¤„ç†ä¸‹ã€‚å‰è€…æ¥å—çš„æ˜¯ä¸€ä¸ªæ­£åˆ‡å€¼ï¼ˆç›´çº¿çš„æ–œç‡ï¼‰å¾—åˆ°å¤¹è§’ï¼Œä½†æ˜¯ç”±äºæ­£åˆ‡çš„è§„å¾‹æ€§æœ¬å¯ä»¥æœ‰ä¸¤ä¸ªè§’åº¦çš„ä½†å®ƒå´åªè¿”å›ä¸€ä¸ªï¼Œå› ä¸ºatançš„å€¼åŸŸæ˜¯ä»-90Â°~90Â° ä¹Ÿå°±æ˜¯å®ƒåªå¤„ç†ä¸€å››è±¡é™ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ç”¨å®ƒã€‚æ¨èè¿™ä¸ªï¼šç¬¬äºŒä¸ªatan2(double y,double x) å…¶ä¸­yä»£è¡¨å·²çŸ¥ç‚¹çš„Yåæ ‡ï¼ŒåŒç†x ,è¿”å›å€¼æ˜¯æ­¤ç‚¹ä¸è¿œç‚¹è¿çº¿ä¸xè½´æ­£æ–¹å‘çš„å¤¹è§’ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥å¤„ç†å››ä¸ªè±¡é™çš„ä»»æ„æƒ…å†µäº†ï¼Œå®ƒçš„å€¼åŸŸç›¸åº”çš„ä¹Ÿå°±æ˜¯-180~180äº†1234bool cmp1(const Point&amp; p1, const Point&amp; p2)&#123; return atan2(p1.y, p1.x) &lt; atan2(p2.y, p2.x);&#125;å…ˆåˆ¤æ–­è±¡é™ï¼Œå†ç”¨å¤–ç§¯åˆ¤æ–­é¡ºåºï¼Œæœ€åæ ¹æ®é•¿åº¦æ’åºã€‚123456789101112131415int Quadrant(point a) //è±¡é™æ’åºï¼Œæ³¨æ„åŒ…å«å››ä¸ªåæ ‡è½´&#123; if(a.x&gt;0&amp;&amp;a.y&gt;=0) return 1; if(a.x&lt;=0&amp;&amp;a.y&gt;0) return 2; if(a.x&lt;0&amp;&amp;a.y&lt;=0) return 3; if(a.x&gt;=0&amp;&amp;a.y&lt;0) return 4;&#125;bool cmp3(point a,point b) //å…ˆæŒ‰è±¡é™ä»å°åˆ°å¤§æ’åº å†æŒ‰æè§’ä»å°åˆ°å¤§æ’åº&#123; if(Quadrant(a)==Quadrant(b))//è¿”å›å€¼å°±æ˜¯è±¡é™ return cmp1(a,b); else Quadrant(a)&lt;Quadrant(b);&#125;å‘é‡çš„ç‚¹ä¹˜ä¸å‰ä¹˜çš„å‡ ä½•æ„ä¹‰å‘é‡çš„ç‚¹ä¹˜ï¼ˆå†…ç§¯ï¼‰ï¼š$$\\vec{a} \\cdot \\vec{b}=|\\vec{a}| \\cdot |\\vec{b}|\\cdot cos\\theta$$ç‚¹ä¹˜çš„å‡ ä½•æ„ä¹‰æ˜¯å¯ä»¥ç”¨æ¥è¡¨å¾æˆ–è®¡ç®—ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„å¤¹è§’ï¼Œä»¥åŠåœ¨bå‘é‡åœ¨aå‘é‡æ–¹å‘ä¸Šçš„æŠ•å½±å‘é‡çš„å‰ä¹˜ï¼ˆå¤–ç§¯ï¼‰ï¼š$$\\vec{a} \\times \\vec{b}=|\\vec{a}| \\cdot |\\vec{b}|\\cdot sin\\theta$$å‘é‡ç§¯è¢«å®šä¹‰ä¸ºï¼šæ¨¡é•¿ï¼šï¼ˆåœ¨è¿™é‡ŒÎ¸è¡¨ç¤ºä¸¤å‘é‡ä¹‹é—´çš„å¤¹è§’(å…±èµ·ç‚¹çš„å‰æä¸‹)ï¼ˆ0Â° â‰¤ Î¸ â‰¤ 180Â°ï¼‰ï¼Œå®ƒä½äºè¿™ä¸¤ä¸ªçŸ¢é‡æ‰€å®šä¹‰çš„å¹³é¢ä¸Šã€‚ï¼‰æ–¹å‘ï¼šaå‘é‡ä¸bå‘é‡çš„å‘é‡ç§¯çš„æ–¹å‘ä¸è¿™ä¸¤ä¸ªå‘é‡æ‰€åœ¨å¹³é¢å‚ç›´ï¼Œä¸”éµå®ˆå³æ‰‹å®šåˆ™ã€‚ï¼ˆä¸€ä¸ªç®€å•çš„ç¡®å®šæ»¡è¶³â€œå³æ‰‹å®šåˆ™â€çš„ç»“æœå‘é‡çš„æ–¹å‘çš„æ–¹æ³•æ˜¯è¿™æ ·çš„ï¼šè‹¥åæ ‡ç³»æ˜¯æ»¡è¶³å³æ‰‹å®šåˆ™çš„ï¼Œå½“å³æ‰‹çš„å››æŒ‡ä»aä»¥ä¸è¶…è¿‡180åº¦çš„è½¬è§’è½¬å‘bæ—¶ï¼Œç«–èµ·çš„å¤§æ‹‡æŒ‡æŒ‡å‘æ˜¯cçš„æ–¹å‘ã€‚c = a âˆ§ bï¼‰ç‰¹åˆ«çš„ï¼Œåœ¨äºŒç»´ä¸­ï¼Œä¸¤ä¸ªå‘é‡çš„å‘é‡ç§¯çš„æ¨¡çš„ç»å¯¹å€¼ç­‰äºç”±è¿™ä¸¤å¤©å‘é‡ç»„æˆçš„å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ã€‚å‘é‡çš„å‰ä¹˜ï¼Œå³æ±‚åŒæ—¶å‚ç›´ä¸¤ä¸ªå‘é‡çš„å‘é‡ï¼Œå³cå‚ç›´äºaï¼ŒåŒæ—¶cå‚ç›´äºbï¼ˆaä¸cçš„å¤¹è§’ä¸º90Â°ï¼Œbä¸cçš„å¤¹è§’ä¸º90Â°ï¼‰å‚è€ƒæ–‡çŒ®æè§’æ’åºï¼šhttps://sumygg.com/2013/07/30/Sorting-Points-by-Polar-Angle/å…³äºæè§’æ’åºï¼šhttps://www.cnblogs.com/aiguona/p/7248311.html","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"å‡¸åŒ…","slug":"å‡¸åŒ…","permalink":"https://longlongqin.github.io/tags/%E5%87%B8%E5%8C%85/"}]},{"title":"æ„é€ å‡¸åŒ…-å¢é‡æ„é€ æ³•","slug":"å­¦ä¹ ç¬”è®°/è®¡ç®—å‡ ä½•/Convex-Hull/å¢é‡æ„é€ ","date":"2020-03-14T09:15:07.000Z","updated":"2020-03-22T15:43:30.666Z","comments":true,"path":"archives/7c53.html","link":"","permalink":"https://longlongqin.github.io/archives/7c53.html","excerpt":"","text":"åœ¨å¼•å…¥æ–°ç®—æ³•ä¹‹å‰é¦–å…ˆæ¥å›é¡¾ä¸€ä¸‹ç»å…¸çš„ç®—æ³•æ€æƒ³ï¼šå‡æ²»ï¼ˆdecrease and conquerï¼‰ï¼Œæ³¨æ„ä¸æ˜¯åˆ†æ²»ï¼ˆdivided and conquerï¼‰ï¼ŒäºŒè€…ç¨æœ‰åŒºåˆ«ã€‚ç®€å•æ¥è®²å°±æ˜¯å°†é—®é¢˜åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªç®€å•çš„å°é—®é¢˜ï¼Œå‡è€Œæ²»ä¹‹ï¼Œé€ä¸ªæ±‚è§£ï¼Œæœ€ç»ˆå°±èƒ½å¾—åˆ°æ•´ä¸ªé—®é¢˜çš„è§£ã€‚å‡æ²»æ³•çš„ç»å…¸ä¾‹å­å°±æ˜¯æ’å…¥æ’åºï¼ˆinsertion sortï¼‰ã€‚æ’å…¥æ’åºçš„è¿‡ç¨‹å¯ä»¥å½’ç»“æˆä¸‹å›¾ï¼šæ’åºçš„è¿‡ç¨‹ä¸­å°†åºåˆ—åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå·²æ’åºéƒ¨åˆ†ï¼ˆsortedï¼‰å’Œæœªæ’åºéƒ¨åˆ†ï¼ˆunsortedï¼‰ã€‚æ¯æ¬¡æ’åºéƒ½æ˜¯ä»unsortedä¸­æ‹¿å‡ºä¸€ä¸ªå…ƒç´ ï¼Œé€šè¿‡ä¸€æ¬¡é¡ºåºæŸ¥æ‰¾è¿‡ç¨‹åœ¨sortedéƒ¨åˆ†ä¸­æ‰¾åˆ°ä½ç½®å¹¶æ’å…¥å…¶ä¸­ã€‚æ•´ä¸ªæ’å…¥æ’åºçš„è¿‡ç¨‹å°±æ˜¯é€ä¸ªå…ƒç´ çš„å»â€œèš•é£Ÿâ€unsortedéƒ¨åˆ†çš„è¿‡ç¨‹ï¼Œè¿ç»­çš„è¿›è¡Œè¿™ä¸ªæ“ä½œå°±ä¼šå°†æ•´ä¸ªé—®é¢˜è§£å†³ã€‚è¿™ç§å°†å¤§é—®é¢˜åˆ†è§£æˆå°é—®é¢˜çš„å‡æ²»è¿‡ç¨‹ï¼Œåˆè¢«çœ‹æˆä¸€ç§é€’å¢çš„ã€å¢é‡å¼çš„ç­–ç•¥ï¼ˆincremental strategyï¼‰ã€‚è¿™ç§æ€æƒ³ä¸ºè§£å†³å‡¸åŒ…é—®é¢˜æä¾›äº†æ–°çš„æ€è·¯ï¼šä»é€ä¸ªæ’å…¥æ–°ç‚¹çš„è§’åº¦æ„é€ å‡¸åŒ…ã€‚å…¸å‹æµç¨‹å¦‚ä¸‹å›¾ï¼ˆæ ‡è¯†ä¸ºï¼šæç‚¹/æ•´ä½“è§„æ¨¡ï¼‰ï¼šæ’å…¥æ–°çš„ç‚¹å¯èƒ½çš„æƒ…å†µæœ‰ï¼šæ–°ç‚¹å¯¹å‡¸åŒ…æœ‰â€œè´¡çŒ®â€ï¼Œä¾‹å¦‚5/5â†’6/6ï¼Œ6/6â†’7/7ï¼›æ–°ç‚¹ä¹Ÿæœ‰å¯èƒ½æ²¡æœ‰â€œè´¡çŒ®â€ï¼Œä¾‹å¦‚7/7â†’7/8ï¼›è¿˜æœ‰å¯èƒ½ä½¿åŸå…ˆæœ‰â€œè´¡çŒ®â€çš„ç‚¹å¤±æ•ˆï¼Œæç‚¹æ•°é‡å‡å°‘ï¼Œä¾‹å¦‚7/8â†’6/9ã€‚é‚£ä¹ˆå¦‚ä½•å¯¹ä¸åŒæƒ…å†µè¿›è¡Œå¤„ç†å‘¢ï¼Ÿç¡®å®šæ–°ç‚¹ä¸ç°æœ‰å‡¸åŒ…çš„å…³ç³»~in-convex-polygon testæ„é€ è¿‡ç¨‹çš„æ ¸å¿ƒç®—æ³•åº”è¯¥æ˜¯ï¼šåˆ¤å®šå¾…å®šç‚¹æ˜¯å¦ä½äºæŸå¤šè¾¹å½¢å†…éƒ¨ï¼ˆin-convex-polygon testï¼‰ã€‚å†çœ‹ä¸Šå›¾æµç¨‹ï¼Œå®é™…ä¸Šæ¯æ­¥çš„æ ¸å¿ƒå°±æ˜¯åˆ¤æ–­ç‚¹ä½äºå¤šè¾¹å½¢å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ï¼Œè‹¥è½åœ¨å¤–éƒ¨ï¼Œåˆ™æ–°æ’å…¥çš„ç‚¹å°±æ˜¯ä¸‹ä¸€ä¸ªæç‚¹ï¼Œå¦åˆ™èˆå¼ƒã€‚è€ƒè™‘åŸºæœ¬æƒ…å†µï¼Œç»™å®šä¸€ä¸ªç‚¹å’Œä¸€ä¸ªå¤šè¾¹å½¢ï¼Œå¦‚ä½•é«˜æ•ˆåˆ¤æ–­è¯¥ç‚¹ä¸å¤šè¾¹å½¢çš„ä½ç½®å…³ç³»å‘¢ï¼Ÿä¸€ç§æ€è·¯æ˜¯ï¼šæˆ‘ä»¬å¯ä»¥å…ˆå¯¹å¤šè¾¹å½¢è¿›è¡Œä¸€ä¸ªâ€œé¢„å¤„ç†â€ï¼Œç»™æ¯ä¸ªç‚¹æŒ‰åºç¼–å·ï¼Œç±»æ¯”æœ‰åºå‘é‡äºŒåˆ†æŸ¥æ‰¾çš„æ€æƒ³ï¼Œæ¥é€æ­¥ç¼©å°è§„æ¨¡ã€‚å¦‚ä¸‹å›¾ï¼šé¦–å…ˆä»»é€‰ä¸€ç‚¹ä¸ºåŸºå‡†ç‚¹ï¼ˆè“è‰²ç‚¹ï¼‰ï¼Œç„¶åç”¨äºŒåˆ†æ³•é€‰å–å…¶ä½™ç‚¹çš„â€œä¸­ç‚¹â€œï¼ˆé¢„å¤„ç†å·²ç»ä¸ºæ‰€æœ‰ç‚¹æ’äº†åºï¼‰ï¼Œç„¶ååˆ¤æ–­åŸºå‡†ç‚¹åˆ°ç»ˆç‚¹çš„æœ‰å‘ç›´çº¿ä¸å¾…å®šç‚¹çš„ä½ç½®å…³ç³»ï¼ˆto-left testï¼‰ã€‚ç„¶åå¯å°†æœç´¢èŒƒå›´å‡åŠï¼Œåå¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æœ€åé€€åŒ–ä¸ºå¹³å‡¡æƒ…å†µï¼šä¸‰è§’å½¢ä¸ç‚¹çš„ä½ç½®å…³ç³»ï¼ˆin-triangle testï¼‰ã€‚åˆ†æä¸€ä¸‹ç®—æ³•çš„æ•´ä½“å¤æ‚åº¦ï¼šæ•´ä¸ªç®—æ³•å…±log(n)æ­¥ï¼Œæ¯æ­¥çš„to-left testæˆ–in-triangle testéƒ½ä¸ºå¸¸æ•°æˆæœ¬ï¼Œåˆ™æ•´ä½“å¤æ‚åº¦ä¸ºlog(n)ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬ä¼¼ä¹å¾—åˆ°äº†ä¸€ä¸ªlog(n)çš„â€œé«˜æ•ˆâ€ç®—æ³•ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•çœŸçš„å¯è¡Œå—ï¼Ÿæ³¨æ„ï¼Œæ¯æ­¥éƒ½ä¼šå°†åŸå‡¸åŒ…è§„æ¨¡å‡åŠï¼Œä¹Ÿå°±æ˜¯è¯´å‡¸åŒ…æ˜¯åŠ¨æ€çš„ï¼Œéšæ—¶å¯èƒ½å˜åŒ–ã€‚è¿™ç§æ–¹æ³•å’Œæç‚¹æ³•æˆ–æè¾¹æ³•ä¸­é™æ€æŸ¥æ‰¾çš„æƒ…å†µæ˜¯å®Œå…¨ä¸åŒçš„ã€‚ç±»æ¯”æ’å…¥æ’åºçš„è¿‡ç¨‹æ¥è§£é‡Šè¿™ä¸ªé—®é¢˜ã€‚ä¸ºä½•æ’å…¥æ’åºçš„å¤æ‚åº¦æ˜¯n^2^è€Œénlog(n)ï¼Ÿæ¯æ¬¡æ’å…¥æ—¶ï¼Œæ—¢ç„¶sortedéƒ¨åˆ†å·²ç»æœ‰åºï¼Œä¸ºä½•ä¸ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥å–ä»£é¡ºåºæŸ¥æ‰¾ï¼ˆå¤æ‚åº¦ç”±nå˜ä¸ºlog(n)ï¼‰ï¼Ÿè¿™ä¸å¾—ä¸è€ƒè™‘sortedéƒ¨åˆ†çš„åŠ¨æ€æ€§ï¼Œæ¯æ¬¡æ’å…¥åå®ƒçš„ç»“æ„éƒ½ä¼šæ”¹å˜ï¼Œè€ŒäºŒåˆ†æŸ¥æ‰¾å¿…é¡»åœ¨é™æ€ç»“æ„ä¸­å®ç°ã€‚å½“ç„¶å¯ä»¥ä½¿ç”¨std::vectorè¿™ç±»æ”¯æŒæŒ‰ç§©è®¿é—®ï¼ˆcall by rankï¼‰çš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯æ’å…¥æ—¶ç»´æŠ¤vectorçš„æˆæœ¬ä¾æ—§æ˜¯çº¿æ€§å¤æ‚åº¦ã€‚å› æ­¤æ’å…¥æ’åºçš„æ€»ä½“å¤æ‚åº¦æ˜¯n^2^ã€‚è¦å¤„ç†çš„å‡¸åŒ…ä¸æ’å…¥æ’åºä¸­sortedéƒ¨åˆ†æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œå®ƒä»¬éƒ½ä¸æ˜¯é™æ€ä¸å˜çš„ç»“æ„ï¼Œè€Œè¦éšç€ç®—æ³•æ‰§è¡Œè€Œä¸æ–­å˜åŒ–ã€‚è‹¥è¦æ¯æ¬¡åœ¨log(n)æˆæœ¬ä¸‹å®Œæˆå¾…å®šç‚¹çš„in-convex-polygon testï¼Œå¿…é¡»å°†å‡¸åŒ…å­˜å‚¨ä¸ºç±»ä¼¼vectorçš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯æ¯æ¬¡å‘è¿™ç§æ•°æ®ç»“æ„æ’å…¥æ–°ç‚¹çš„æˆæœ¬ä¾æ—§æ˜¯çº¿æ€§çš„ã€‚å› æ­¤å¯¹å‡¸åŒ…è¿›è¡Œçš„æ‰€è°“â€œé¢„å¤„ç†â€æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œè¿™ç§å‡æ²»ç­–ç•¥ç®—æ³•å¤æ‚åº¦æœ€ä½åº”è¯¥ä¸ºO(n^2^)ã€‚åˆ°ç°åœ¨é—®é¢˜ä¾æ—§æ²¡æœ‰è§£å†³ï¼Œç©¶ç«Ÿå¦‚ä½•ç”¨è¿™ç§å¢é‡å¼çš„ç­–ç•¥æ¥æ„é€ å‡¸åŒ…ï¼Ÿå…¶å®å¤æ‚é—®é¢˜ä¸­æœ€æœ´ç´ ã€æœ€åŸºæœ¬çš„æ–¹æ³•åè€Œæ˜¯æœ€æœ‰æ•ˆçš„ã€‚in-convex-polygon testæœ€åŸºæœ¬çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿå°±æ˜¯æŒ‰ä¸€å®šæ–¹å‘ï¼ˆçº¦å®šä¸ºé€†æ—¶é’ˆï¼‰å‡¸åŒ…çš„æ¯æ¡è¾¹å’Œå¾…å®šç‚¹åšto-left testï¼Œä¸€æ—¦æœ‰ä¸€æ¬¡testä¸ºfalseå°±èƒ½æ–­å®šç‚¹åœ¨å‡¸åŒ…å¤–é¢ã€‚è¿™å®é™…ä¸Šå°±æ˜¯å°†in-triangle testæ¨å¹¿å¤šè¾¹å½¢çš„æƒ…å†µã€‚å› æ­¤æ¯æ¬¡in-convex-polygon testçš„æˆæœ¬å°±ä¼šå˜æˆå½“å‰å‡¸åŒ…çš„è§„æ¨¡ï¼Œä¹Ÿå°±æ˜¯nã€‚å¯¹äºæ¯ä¸ªæ–°ç‚¹åšä¸€æ¬¡in-convex-polygon testï¼Œæ„é€ ç®—æ³•çš„æ•´ä½“å¤æ‚åº¦å°±æ˜¯O(n^2^)ã€‚ç®—æ³•çš„å¤æ‚åº¦ä»æè¾¹æ³•çš„O(n^3^)åˆä¸‹é™äº†ä¸€ä¸ªæ•°é‡çº§ã€‚å…¶å®å¢é‡ç®—æ³•çš„æ•´ä¸ªæ€è·¯å¯ä»¥åˆ†æˆä¸¤å—ï¼š1ã€å¦‚ä½•åˆ¤æ–­å‡¸åŒ…ä¸æ–°ç‚¹çš„ä½ç½®å…³ç³»ï¼ˆin-convex-polygon testï¼‰2ã€å¦‚ä½•å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹ä¸Šé¢çš„æ–¹æ³•å·²ç»è§£å†³äº†ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚ç¬¬äºŒä¸ªé—®é¢˜çœ‹ä¸‹é¢éƒ¨åˆ†ï¼šå¦‚ä½•å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹~support-lineç°åœ¨æ¥è®¨è®ºå¦‚ä½•å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹ï¼šæ¯”å¦‚ä¸‹é¢è¿™ä¸ªç‚¹ï¼Œåº”è¯¥å¦‚ä½•æ’å…¥å‡¸åŒ…ä¹‹ä¸­å‘¢ï¼Ÿæ’å…¥è¿‡ç¨‹ï¼šå°†æ–°ç‚¹xæ’å…¥åŸå‡¸åŒ…çš„è¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å¯»æ‰¾ä¸¤ä¸ªè¿æ¥ç‚¹så’Œtï¼Œå°†xå’Œtã€såˆ†åˆ«è¿æ¥å¾—åˆ°æ–°çš„å‡¸åŒ…ã€‚æ³¨æ„tå’Œsä¸¤ç‚¹å°†æ•´ä¸ªåŸå‡¸åŒ…è¾¹ç•Œåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šstå’Œtsä¸¤ä¸ªæœ‰å‘æ®µã€‚æ„é€ æ–°å‡¸åŒ…å°±è¦ä¿ç•™è¿œç«¯stã€èˆå¼ƒè¿‘ç«¯tsã€‚å–ä»£è¿‘ç«¯tsçš„ä¸¤æ¡çº¿å°±æ˜¯xå’Œtçš„è¿çº¿xtå’Œxsï¼Œè¢«ç§°ä¸ºåˆ‡çº¿ï¼ˆtangentï¼‰æˆ–è€…support lineï¼ˆæ”¯æ’‘çº¿ï¼‰ã€‚é‚£å¦‚ä½•æŸ¥æ‰¾tã€sè¿™ä¸¤ä¸ªç‚¹å‘¢ï¼Ÿæˆ‘ä»¬åœ¨å‡¸åŒ…ä¸Šä»»å–ä¸€ç‚¹vï¼ŒæŒ‰é€†æ—¶é’ˆæ–¹å‘vç‚¹ä¼šæœ‰ä¸€ä¸ªç›´æ¥å‰é©±ç‚¹å’Œç›´æ¥åç»§ç‚¹ã€‚è€ƒå¯Ÿæœ‰å‘ç›´çº¿xvä¸ç‚¹vç›´æ¥å‰é©±å’Œç›´æ¥åç»§çš„ä½ç½®å…³ç³»ï¼ˆä¸¤æ¬¡to left testï¼‰ï¼Œè®°å½•ä¸ºä¸€ä¸ªpatternè¡¨ã€‚ç»“æœæ— éæ˜¯å››ç§æƒ…å†µï¼švçš„ç›´æ¥å‰é©±å’Œç›´æ¥åç»§ç›¸å¯¹äºæœ‰å‘ç›´çº¿xvçš„ä½ç½®æ˜¯RLï¼ŒLRï¼ŒLLï¼ŒRRã€‚ä¾‹å¦‚ä¸Šå›¾é»„è‰²ç‚¹vï¼Œæ˜¯Rå’ŒLï¼›è“è‰²ç‚¹våˆ†åˆ«æ˜¯Lå’ŒRã€‚å®é™…ä¸Šå‡¸åŒ…è¾¹ç•Œstä¸Šæ‰€æœ‰ç‚¹çš„patternéƒ½ä¸ºRLï¼Œtsä¸Šæ‰€æœ‰ç‚¹çš„patternéƒ½ä¸ºLRã€‚å…³é”®ç‚¹åœ¨äºï¼šç‚¹Sçš„patternæ˜¯LLï¼Œç‚¹tçš„patternä¸ºRRã€‚å› æ­¤å¯¹å‡¸åŒ…è¾¹ç•Œæ¯ä¸ªç‚¹åšä¸¤æ¬¡to left testï¼Œåˆ¤æ–­å…¶patternå°±å¯æ‰¾å‡ºså’Œtï¼ŒèŠ±è´¹æ—¶é—´æˆæœ¬ä¸ºå¸¸æ•°ã€‚incremental constructionå†æ¥å›é¡¾æ•´ä¸ªå‡¸åŒ…æ„é€ ç®—æ³•çš„ä¸¤å¤§é—®é¢˜ï¼šin-convex-polygon testå’Œæ’å…¥æ–°ç‚¹ã€‚åˆ†å¼€è€ƒè™‘åªæ˜¯ä¸ºäº†å°†æ€è·¯ç®€åŒ–ï¼Œå®é™…ä¸Šè¿™ä¸¤ä¸ªé—®é¢˜å¯ä»¥å¥—ç”¨ä¸€ä¸ªç®—æ³•ï¼ŒåŒæ—¶æ¥è§£å†³ã€‚å…·ä½“åšæ³•å°±æ˜¯ï¼šå¯¹äºæ¯ä¸ªå¾…å®šç‚¹xï¼Œä¸å¿…ç‰¹æ„å»è€ƒè™‘å®ƒä¸å‡¸åŒ…çš„ä½ç½®å…³ç³»ï¼Œè€Œæ˜¯éå†å‡¸åŒ…ä¸Šæ¯ä¸€ä¸ªç‚¹ã€‚å¯¹äºå‡¸åŒ…è¾¹ç•Œä¸Šçš„æ¯ä¸€ä¸ªç‚¹ï¼Œæˆ‘ä»¬éƒ½èƒ½é€šè¿‡ä¸¤æ¬¡to left testè¿…é€Ÿåˆ¤æ–­å‡ºpatternã€‚å¯¹äºxä½äºå‡¸åŒ…å¤–éƒ¨çš„æƒ…å†µï¼Œç»è¿‡éå†å‡¸åŒ…çš„ç‚¹ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å¾—åˆ°så’Œtçš„ä½ç½®ï¼Œå¾—åˆ°ä¸¤æ¡support lineï¼Œä»è€Œæ„é€ å‡ºæ–°çš„å‡¸åŒ…ï¼›è€Œå¯¹äºxä½äºå‡¸åŒ…å†…éƒ¨çš„æƒ…å†µï¼Œå‡¸åŒ…è¾¹ç•Œæ¯ä¸ªç‚¹éƒ½ä¸å¯èƒ½å‡ºç°RRæˆ–LLçš„æƒ…å†µï¼Œç›´æ¥èˆå¼ƒxå³å¯ã€‚æ¯æ¬¡éå†å‡¸åŒ…è¾¹ç•Œç‚¹çš„å¤æ‚åº¦ä¸ºO(n)ï¼Œæ•´ä¸ªæ„é€ è¿‡ç¨‹è¦å¢é‡å¼çš„é€ç‚¹è€ƒå¯Ÿï¼Œè‡ªç„¶å¾—åˆ°äº†ä¸€ä¸ªO(n^2^)çš„incremental constructionç®—æ³•ã€‚è¿™å°±æ˜¯æ‰€è°“å¢é‡æ„é€ æ³•æ¥æ„é€ å‡¸åŒ…çš„è¿‡ç¨‹ã€‚æ„é€ è¿‡ç¨‹å·§å¦™çš„é¿å¼€äº†ç‰¹æ®Šå¤„ç†è¯¸å¦‚5/5â†’6/6ã€7/7â†’7/8ã€7/8â†’6/9ç­‰å¤æ‚æƒ…å†µï¼Œé‡‡ç”¨ä¸€è‡´çš„æ€è·¯é€ä¸ªè€ƒå¯Ÿâ€œæ–°ç‚¹â€ï¼Œæœ€ç»ˆå®Œæˆå‡¸åŒ…çš„æ„é€ ã€‚ä»£ç éƒ¨åˆ†å¾…å†™â€¦â€¦..å°ç»“ï¼šå…¶å®å¢é‡ç®—æ³•çš„æ•´ä¸ªæ€è·¯å¯ä»¥åˆ†æˆä¸¤å—ï¼š1ã€å¦‚ä½•åˆ¤æ–­å‡¸åŒ…ä¸æ–°ç‚¹çš„ä½ç½®å…³ç³»ï¼ˆin-convex-polygon testï¼‰2ã€å¦‚ä½•å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"å‡¸åŒ…","slug":"å‡¸åŒ…","permalink":"https://longlongqin.github.io/tags/%E5%87%B8%E5%8C%85/"}]},{"title":"Letâ€™s Build A Simple Interpreter 7","slug":"å­¦ä¹ ç¬”è®°/Let's Build A Simple Interpreter/LSBASI-7","date":"2020-03-13T13:55:47.000Z","updated":"2020-03-25T14:12:11.797Z","comments":true,"path":"archives/5a757a52.html","link":"","permalink":"https://longlongqin.github.io/archives/5a757a52.html","excerpt":"","text":"å‰è¨€åŸæ–‡é“¾æ¥ï¼šhttps://ruslanspivak.com/lsbasi-part7/ä¹‹å‰çš„é‚£å‡ å°ç»“ï¼Œæˆ‘ä»¬éƒ½æ˜¯æŠŠinterpreterçš„ä»£ç å’Œparserçš„ä»£ç æ··åœ¨ä¸€èµ·ï¼Œè€Œä¸”interpreteråœ¨parserè¯†åˆ«å‡ºä¸€ä¸ªå¦‚åŠ å‡ä¹˜é™¤ä¹‹ç±» çš„ç‰¹å®šçš„è¯­è¨€ç»“æ„(language construct)åï¼Œå°±ä¼šç«‹åˆ»å¯¹å®ƒè¿›è¡Œæ±‚å€¼ã€‚è¿™ç§ interpreter è¢«ç§°ä¸º è¯­æ³•å¯¼å‘è§£é‡Šå™¨(syntax-directed interpreter)ã€‚ä»–ä»¬é€šå¸¸åœ¨è¾“ å…¥ä¸Šåšä¸€ä¸ª pass ä¸”åªé€‚åˆåŸºç¡€çš„è¯­è¨€åº”ç”¨ã€‚ä¸ºäº†åˆ†ææ›´å¤æ‚çš„ç¼–ç¨‹è¯­è¨€ Pascal çš„ç»“æ„ï¼Œ æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ª ä¸­é—´è¡¨ç¤º (intermediate representation, IR)ã€‚parser ä¼š è´Ÿè´£æ„å»º IRinterpreter ä¼šç”¨æ¥è§£é‡Šç”± IR æ‰€ä»£è¡¨çš„è¾“å…¥ã€‚äº‹å®è¯æ˜æ ‘æ˜¯ä¸€ä¸ªè¡¨ç¤º IR éå¸¸åˆé€‚çš„æ•°æ®ç»“æ„ã€‚å…³äºæ•°çš„ä¸€äº›æœ¯è¯­terminologyï¼šæ ‘æ˜¯ä¸€ä¸ªåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç»“ç‚¹ç»„æˆçš„å±‚æ¬¡æ•°æ®ç»“æ„ã€‚æ ‘æœ‰ä¸€ä¸ªæ ¹ç»“ç‚¹ï¼Œå°±æ˜¯é¡¶éƒ¨ç»“ç‚¹ã€‚é™¤æ ¹ç»“ç‚¹å¤–çš„æ‰€æœ‰ç»“ç‚¹æœ‰å”¯ä¸€ ä¸€ä¸ªçˆ¶ç»“ç‚¹ã€‚ä¸‹å›¾ä¸­ç»“ç‚¹ä¸º*çš„æ˜¯ä¸€ä¸ªçˆ¶ç»“ç‚¹ã€‚ç»“ç‚¹ä¸º 2 å’Œ 7 çš„æ˜¯å®ƒçš„å­ç»“ç‚¹ï¼›å­ç»“ç‚¹ä»å·¦åˆ°å³æ’åºã€‚æ²¡æœ‰å­ç»“ç‚¹çš„ç»“ç‚¹ç§°ä¸ºå¶å­ç»“ç‚¹ã€‚æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå­ç»“ç‚¹çš„éæ ¹ç»“ç‚¹è¢«ç§°ä¸ºä¸­é—´ç»“ç‚¹ã€‚å­ç»“ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®Œå…¨å­æ ‘ã€‚ä¸‹å›¾ä¸­ç»“ç‚¹ï¼‹çš„å·¦å­æ ‘ï¼ˆç»“ç‚¹ä¸º*ï¼‰å°±æ˜¯ä¸€ä¸ªæœ‰è‡ªå·±å­ç»“ç‚¹çš„ å®Œå…¨å­æ ‘ã€‚åœ¨è®¡ç®—æœºç§‘å­¦ä¸­æˆ‘ä»¬æŠŠæ ‘å€’è¿‡æ¥ç”»ï¼Œæ ¹ç»“ç‚¹åœ¨æœ€ä¸Šè¾¹ï¼Œåˆ†æå‘ä¸‹ç”Ÿé•¿ã€‚ä¸‹é¢æ˜¯è¡¨è¾¾å¼ 2 * 7 + 3 çš„å¸¦æœ‰è§£é‡Šçš„æ ‘å½¢è¡¨ç¤ºï¼šæœ¬ç³»åˆ—ä¸­æˆ‘ä»¬ä¼šç”¨åˆ°çš„ IR è¢«ç§°ä¸º æŠ½è±¡è¯­æ³•æ ‘ (abstract-syntax tree, AST)ã€‚ä½†åœ¨æ·± å…¥äº†è§£ AST ä¹‹å‰è®©æˆ‘ä»¬ç®€å•èŠèŠ è§£ææ ‘ (parse tree)ã€‚å°½ç®¡æˆ‘ä»¬ä¸ä¼šåœ¨è§£é‡Šå™¨å’Œç¼–è¯‘ å™¨ä¸­ç”¨åˆ°è§£ææ ‘ï¼Œä½†å®ƒä¼šé€šè¿‡å¯è§†åŒ– parser æ‰§è¡Œè½¨è¿¹çš„æ–¹æ³•ï¼ŒåŠ æ·±ä½ å¯¹ parser å¦‚ä½•è§£é‡Š è¾“å…¥çš„ç†è§£ã€‚æˆ‘ä»¬ä¹Ÿä¼šå°†å®ƒå’Œ AST åšæ¯”è¾ƒï¼Œæ¥è¡¨æ˜ä¸ºä»€ä¹ˆ AST æ¯”è§£ææ ‘æ›´é€‚åˆç”¨æ¥åš IRã€‚é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯è§£ææ ‘å‘¢ï¼Ÿè§£ææ ‘ï¼ˆæœ‰æ—¶å«åš å…·ä½“è¯­æ³•æ ‘concrete syntax tree ï¼‰æ˜¯ä¸€ä¸ªæ ¹æ®æˆ‘ä»¬çš„è¯­æ³•å®šä¹‰æ¥ è¡¨ç¤ºä¸€é—¨è¯­è¨€çš„å¥æ³•ç»“æ„çš„æ ‘å½¢ç»“æ„ã€‚å®ƒåŸºæœ¬ä¸Šå±•ç¤ºäº†ä½ çš„ parser å¦‚ä½•è¯†åˆ«è¯­è¨€ç»“æ„æˆ–è€…ï¼Œ æ¢å¥è¯è¯´ï¼Œå®ƒå±•ç¤ºäº†ä½ è¯­æ³•çš„å¼€å§‹ç¬¦å·æ€ä¹ˆæ´¾ç”Ÿå‡ºè¯¥ç¼–ç¨‹è¯­è¨€ä¸­ä¸€ä¸ªç‰¹å®šçš„å­—ç¬¦ä¸²çš„ã€‚parser çš„è°ƒç”¨æ ˆéšå¼åœ°ä»£è¡¨äº†ä¸€ä¸ªè§£ææ ‘ï¼Œä¸”å½“parser åœ¨è¯•å›¾è¯†åˆ«ä¸€ä¸ªç‰¹å®šçš„è¯­è¨€ç»“æ„æ—¶ï¼Œè§£ææ ‘ å°±ä¼šè‡ªåŠ¨åœ°åœ¨å†…å­˜ä¸­æ„å»ºå‡ºæ¥ã€‚ä¸‹é¢æ˜¯è¡¨è¾¾å¼ 2 * 7 + 3 çš„è§£ææ ‘ï¼šåœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­å¯ä»¥çœ‹åˆ°ï¼šè§£ææ ‘è®°å½•äº† parser ç”¨æ¥è¯†åˆ«è¾“å…¥çš„ä¸€ç³»åˆ—è§„åˆ™ã€‚è§£ææ ‘çš„æ ¹ç»“ç‚¹çš„æ ‡ç­¾æ˜¯è¯­æ³•çš„å¼€å§‹ç¬¦å·(start symbol)ã€‚æ¯ä¸ªä¸­é—´ç»“ç‚¹è¡¨ç¤ºä¸€ä¸ªéç»ˆç»“ç¬¦(non-terminal)ï¼Œä»£è¡¨åº”ç”¨äº†ä¸€æ¡è¯­æ³•è§„åˆ™ï¼Œåƒæˆ‘ä»¬çš„æƒ…å†µé‡Œçš„ expr, termå’Œ factor.æ¯ä¸ªå¶å­ç»“ç‚¹ä»£è¡¨äº†ä¸€ä¸ª token.æˆ‘ä»¬ä¸ä¼šæ‰‹åŠ¨æ„å»ºè§£ææ ‘ä¸”åœ¨æˆ‘ä»¬çš„è§£é‡Šå™¨ä¸­ç”¨åˆ°å®ƒï¼Œä½†è§£ææ ‘å¯ä»¥é€šè¿‡å¯è§†åŒ– è°ƒç”¨è¿‡ç¨‹å¸®åŠ©æˆ‘ä»¬ç†è§£ parser æ€ä¹ˆè§£é‡Šè¾“å…¥ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåä¸º genptdot.py çš„å°åº”ç”¨ï¼ˆæˆ‘å¾ˆå¿«å†™å®Œç”¨æ¥å¸®åŠ©ä½ çš„ï¼‰ï¼Œæ¥æŸ¥çœ‹ä¸åŒçš„ ç®—æœ¯è¡¨è¾¾å¼çœ‹èµ·æ¥ä»€ä¹ˆæ ·ã€‚è¦ä½¿ç”¨è¿™ä¸ªåº”ç”¨ä½ é¦–å…ˆéœ€è¦å®‰è£… GraphvizåŒ…ï¼Œç„¶åè¿è¡Œä¸‹é¢çš„ å‘½ä»¤ï¼Œä½ å¯ä»¥æ‰“å¼€ç”Ÿæˆçš„å›¾ç‰‡æ–‡ä»¶ parsetree.png æŸ¥çœ‹ä½ ä»å‘½ä»¤è¡Œä¼ å…¥çš„è¡¨è¾¾å¼çš„è§£ææ ‘ï¼š12$ python genptdot.py \"14 + 2 * 3 - 6 / 2\" &gt; \\ parsetree.dot &amp;&amp; dot -Tpng -o parsetree.png parsetree.dotä¸‹é¢æ˜¯ç”±è¡¨è¾¾å¼ 14 + 2 * 3 - 6 / 2 ç”Ÿæˆçš„å›¾ç‰‡ parsetree.png:parseræŠ½è±¡è¯­æ³•æ ‘(AST)ç°åœ¨æˆ‘ä»¬æ¥èŠèŠæŠ½è±¡è¯­æ³•æ ‘(AST)ã€‚å®ƒæ˜¯åœ¨ä½™ä¸‹çš„æ–‡ç« ä¸­ä¼šå¤§é‡ç”¨åˆ°çš„ä¸­é—´è¡¨ç¤º(IR)ã€‚å®ƒæ˜¯æˆ‘ä»¬çš„è§£é‡Šå™¨å’Œæœªæ¥ç¼–è¯‘å™¨é¡¹ç›®çš„æ ¸å¿ƒæ•°æ®ç»“æ„ã€‚è®©æˆ‘ä»¬ä»¥æŠŠè¡¨è¾¾å¼ 2 * 7 + 3 çš„ AST å’Œè§£ææ ‘æ”¾åœ¨ä¸€èµ·çœ‹æ¥å¼€å§‹æˆ‘ä»¬çš„è®¨è®ºï¼šä»ä¸Šé¢çš„å›¾ç‰‡ä¸­å¯ä»¥çœ‹å‡ºï¼ŒASTæŠ“ä½äº†è¾“å…¥çš„ç²¾é«“ä¸”æ›´å°ã€‚AST å’Œè§£ææ ‘æœ€ä¸»è¦çš„åŒºåˆ«æœ‰ï¼šAST ä½¿ç”¨æ“ä½œç¬¦/æ“ä½œ(operators/operations )ä½œä¸ºæ ¹ç»“ç‚¹ï¼Œæ“ä½œæ•°(operands)ä½œä¸ºå®ƒä»¬çš„å­ç»“ç‚¹ã€‚ä¸åƒè§£ææ ‘ï¼ŒAST ä¸ä½¿ç”¨ä¸­é—´ç»“ç‚¹æ¥è¡¨ç¤ºè¯­æ³•è§„åˆ™ã€‚AST å¹¶ä¸æŠŠçœŸå®å¥æ³•ä¸­çš„æ‰€æœ‰ç»“èŠ‚éƒ½è¡¨ç¤ºå‡ºæ¥ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒæ˜¯æŠ½è±¡çš„ï¼‰â”€â”€ä¾‹å¦‚ï¼Œæ²¡æœ‰ è§„åˆ™ç»“ç‚¹å’Œæ‹¬å·ã€‚å¯¹äºç›¸åŒçš„è¯­è¨€ç»“æ„æ¥è¯´ï¼ŒAST ç›¸æ¯”äºè§£ææ ‘æ›´ç´§å‡‘ã€‚æŠ½è±¡è¯­æ³•æ ‘æ˜¯ä»€ä¹ˆï¼ŸæŠ½è±¡è¯­æ³•æ ‘(AST)æ˜¯è¡¨ç¤ºä¸€ä¸ªè¯­è¨€ç»“æ„çš„æŠ½è±¡å¥æ³•ç»“æ„çš„æ ‘å½¢è¡¨ç¤ºï¼Œå®ƒçš„ä¸­é—´ç»“ç‚¹å’Œæ ¹ç»“ç‚¹ä»£è¡¨äº†ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå­ç»“ç‚¹ä»£è¡¨äº†è¯¥æ“ä½œç¬¦çš„æ“ä½œæ•°ã€‚çœ‹ä¸€ä¸‹ASTä¸è§£ææ ‘å¯¹æ¯”ï¼Œæ˜¾ç°ä»–çš„ç´§å‡‘æ€§ï¼šå¦‚ä½•å°†æ“ä½œç¬¦çš„ä¼˜å…ˆçº§(precedence)ç¼–ç è¿› AST å‘¢ï¼Ÿä¸ºäº†æŠŠæ“ä½œç¬¦ä¼˜å…ˆçº§ç¼–ç è¿› ASTï¼Œå³ï¼Œä¸ºäº†è¡¨ç¤ºâ€œX åœ¨ Y ä¹‹å‰å‘ç”Ÿâ€ä½ åªéœ€è¦åœ¨æ ‘ä¸­æŠŠ X æ”¾åœ¨ä½äº Y çš„ä½ç½®ã€‚ä½ åœ¨å‰é¢ çš„å›¾ç‰‡ä¸­å·²ç»è§è¿‡åˆ°äº†ã€‚ã€ä¾‹å­ã€‘ï¼šåœ¨ä¸‹é¢çš„å›¾ç‰‡ä¸­ï¼Œå·¦è¾¹æ˜¯è¡¨è¾¾å¼ 2 * 7 + 3 çš„ ASTã€‚è®©æˆ‘ä»¬ç”¨æ‹¬å·æŠŠ 7 + 3 å›´èµ·æ¥ä»¥æ”¹å˜ å®ƒçš„ä¼˜å…ˆçº§ã€‚åœ¨å³è¾¹æ˜¯ä¿®æ”¹åçš„è¡¨è¾¾å¼ 2 * (7 + 3) çš„ ASTï¼šä»£ç å®ç°ASTå¥½äº†ï¼Œè®©æˆ‘ä»¬å†™äº›ä»£ç æ¥å®ç°ä¸åŒçš„ AST ç»“ç‚¹ç±» å¹¶ä¿®æ”¹æˆ‘ä»¬çš„ parser æ¥ç”ŸæˆåŒ…å«è¿™äº›ç»“ç‚¹çš„ AST æ ‘ï¼šé¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªåŸºæœ¬ç»“ç‚¹ç±»å«åš ASTï¼Œå…¶ä»–ç±»ä¼šä»å®ƒç»§æ‰¿ï¼š12class AST(): pass #pass ä¸åšä»»ä½•äº‹æƒ…ï¼Œä¸€èˆ¬ç”¨åšå ä½è¯­å¥ã€‚å› ä¸ºå¦‚æœå®šä¹‰ä¸€ä¸ªç©ºå‡½æ•°ç¨‹åºä¼šæŠ¥é”™ï¼Œå½“ä½ æ²¡æœ‰æƒ³å¥½å‡½æ•°çš„å†…å®¹æ˜¯å¯ä»¥ç”¨ pass å¡«å……ï¼Œä½¿ç¨‹åºå¯ä»¥æ­£å¸¸è¿è¡Œã€‚å›å¿†ä¸€ä¸‹ AST è¡¨ç¤ºäº†æ“ä½œç¬¦-æ“ä½œæ•°æ¨¡å‹ã€‚åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬æœ‰4ä¸ªæ“ä½œç¬¦å’Œæ•´å‹æ“ä½œæ•°ã€‚æ“ä½œç¬¦æœ‰åŠ ã€å‡ã€ä¹˜ã€é™¤ã€‚æˆ‘ä»¬åŸæœ¬å¯ä»¥æ–°å»ºå•ç‹¬çš„ç±»æ¥è¡¨ç¤ºæ¯ä¸ªæ“ä½œç¬¦å¦‚ AddNode, SubNode, MulNode å’Œ DivNodeï¼Œç›¸åæˆ‘ä»¬åªä¼šæ–°å»ºä¸€ä¸ª BinOp ç±»æ¥è¡¨ç¤ºæ‰€æœ‰ 4 ä¸ªäºŒå…ƒæ“ä½œç¬¦*binary operator* ï¼ˆäºŒå…ƒæ“ä½œç¬¦å°±æ˜¯ä½œç”¨åœ¨ä¸¤ä¸ªæ“ä½œæ•°çš„æ“ä½œç¬¦ï¼‰ï¼š12345class BinOp(AST): def __init__(self, left, op, right): self.left = left self.token = self.op = op self.right = rightæ„é€ å‡½æ•°çš„å‚æ•°æ˜¯ left, op, å’Œ right, å…¶ä¸­ left å’Œ right åˆ†åˆ«æŒ‡å‘äº†è¡¨ç¤º å·¦æ“ä½œæ•°å’Œå³æ“ä½œæ•°çš„ç»“ç‚¹ã€‚ op ä¿å­˜äº†æŒ‡å‘æ“ä½œç¬¦æœ¬èº«çš„ token: Token(PLUS, &#39;+&#39;) è¡¨ç¤ºåŠ æ“ä½œç¬¦ï¼Œ Token(MINUS, &#39;-&#39;) è¡¨ç¤ºå‡æ“ä½œç¬¦ï¼Œç­‰ç­‰ã€‚ä¸ºäº†åœ¨ AST ä¸­è¡¨ç¤ºæ•´æ•°ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Num ç±»ï¼Œå®ƒå°†ä¿å­˜ä¸€ä¸ª INTEGER token å’Œè¯¥ token çš„å€¼ï¼š1234class Num(AST): def __init__(self, token): self.token = token self.value = token.valueå’Œä½ æ³¨æ„åˆ°çš„ä¸€æ ·ï¼Œæ‰€æœ‰çš„noteä¿å­˜ token ä»è€Œåˆ™åˆ›å»ºnote(all nodes store the token used to create the node)ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œå°†æ¥ä¼šæ´¾ä¸Šç”¨åœºã€‚å›å¿†ä¸€ä¸‹è¡¨è¾¾å¼ 2 * 7 + 3 çš„ ASTã€‚æˆ‘ä»¬ä¼šåœ¨ä»£ç ä¸­æ‰‹å·¥åˆ›å»ºè¯¥è¡¨è¾¾å¼ï¼š1234567891011121314&gt;&gt;&gt; from spi import Token, MUL, PLUS, INTEGER, Num, BinOp&gt;&gt;&gt;&gt;&gt;&gt; mul_token = Token(MUL, '*')&gt;&gt;&gt; plus_token = Token(PLUS, '+')&gt;&gt;&gt; mul_node = BinOp(... left=Num(Token(INTEGER, 2)),... op=mul_token,... right=Num(Token(INTEGER, 7))... )&gt;&gt;&gt; add_node = BinOp(... left=mul_node,... op=plus_token,... right=Num(Token(INTEGER, 3))... )ä»¥ä¸‹æ˜¯åœ¨æ–°å®šä¹‰çš„ç»“ç‚¹ç±»ä¸‹ AST çš„æ ·å­ã€‚ä¸‹é¢çš„å›¾ç‰‡ä¹Ÿéµå¾ªäº†ä¸Šé¢æ‰‹å·¥åˆ›å»ºçš„è¿‡ç¨‹ï¼šparser ä»£ç ä¸‹é¢æ˜¯æˆ‘ä»¬ä¿®æ”¹è¿‡çš„ parser ä»£ç ï¼Œåœ¨è¯†åˆ«è¾“å…¥ï¼ˆç®—æœ¯è¡¨è¾¾å¼ï¼‰æ—¶å»ºç«‹å’Œè¿”å›ä¸€ä¸ª AST:1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980class AST(): passclass BinOp(AST): def __init__(self, left, op, right): self.left = left self.token = self.op = op self.right = rightclass Num(AST): def __init__(self, token): self.token = token self.value = token.valueclass Parser(): def __init__(self, lexer): self.lexer = lexer # set current token to the first token from the input self.current_token = self.lexer.get_next_token() def error(self): raise Exception('Invalid syntax') def eat(self, token_type): # compare the current token type with the passed token # type and if they match then \"eat\" the current token # and assign the next token to the self.current_token, # otherwise raise an exception. if self.current_token.type == token_type: self.current_token = self.lexer.get_next_token() else: self.error() def factor(self): \"\"\"factor : INTEGER | LPAREN expr RPAREN\"\"\" token = self.current_token if token.type == INTEGER: return Num(token) elif token.type == LPAREN: self.eat(LPAREN) node = self.expr() self.eat(RPAREN) return node def term(self): \"\"\"term : factor ((MUL | DIV) factor)*\"\"\" node = self.factor() while self.current_token.type in (MUL, DIV): token = self.current_token if token.type == MUL: self.eat(MUL) elif token.type == DIV: self.eat(DIV) node = BinOp(left=node, op=token, right=self.factor()) return node def expr(self): \"\"\" expr : term ((PLUS | MINUS) term)* term : factor ((MUL | DIV) factor)* factor : INTEGER | LPAREN expr RPAREN \"\"\" node = self.term() while self.current_token.type in (PLUS, MINUS): token = self.current_token if token.type == PLUS: self.eat(PLUS) elif token.type == MINUS: self.eat(MINUS) node = BinOp(left=node, op=token, right=self.term()) return node def parse(self): return self.expr()è®©æˆ‘ä»¬çœ‹ä¸€äº›ç®—æœ¯è¡¨è¾¾å¼çš„ AST çš„æ„å»ºè¿‡ç¨‹ã€‚å¦‚æœä½ çœ‹äº†ä¸Šé¢çš„ parser ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå»ºç«‹ä¸€ä¸ª AST ä¸­çš„ç»“ç‚¹çš„æ—¶ï¼ŒæŠŠå˜é‡ node çš„å½“å‰å€¼åšä¸º BinOp ç»“ç‚¹çš„å·¦å­ç»“ç‚¹ï¼ŒæŠŠå¯¹ term æˆ– factor è°ƒç”¨çš„è¿”å›ç»“æœåšä¸ºå®ƒ çš„å³å­ç»“ç‚¹ï¼Œè¿™å®é™…ä¸Šå°±æ˜¯æŠŠç»“ç‚¹æ¨å‘å·¦è¾¹ï¼Œä¸‹é¢è¡¨è¾¾å¼ 1 +2 + 3 + 4 + 5 çš„æ ‘ç»“æ„å°±æ˜¯ è¿™ç§æƒ…å†µçš„ä¸€ä¸ªå¥½ä¾‹å­ã€‚ä¸‹é¢æ˜¯ parser å¦‚ä½•ä¸€æ­¥æ­¥åœ°æ„å»ºè¡¨è¾¾å¼ 1 + 2 + 3 + 4 + 5 çš„ AST çš„å›¾å½¢è¡¨ç¤ºï¼šéå†å¥½äº†ï¼Œä¸‹é¢æ˜¯è¡¨è¾¾å¼ 2 * 7 + 3 çš„ ASTï¼šä½ æ€ä¹ˆéå†è¿™ä¸ªæ ‘å¹¶æ°å½“åœ°å¯¹å®ƒæ‰€ä»£è¡¨çš„è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼å‘¢ï¼Ÿä½ å¯ä»¥ä½¿ç”¨ååºéå†*postorder traversal* (æ·±åº¦ä¼˜å…ˆéå†depth-first traversal çš„ä¸€ä¸ªç‰¹ä¾‹) ã€‚è¿™ç§æ–¹å¼ç”±æ ¹ç»“ç‚¹å¼€å§‹ï¼Œé€’å½’ç”±å·¦è‡³å³è®¿é—®æ¯ä¸ªç»“ç‚¹çš„å­ç»“ç‚¹ã€‚ååºéå†ä»æ ¹ç»“ç‚¹å¼€å§‹å°½å¯èƒ½å¿«åœ°è®¿é—®ç¦»æ ¹ç»“ç‚¹è¿œçš„ç»“ç‚¹(The postorder traversal visits nodes as far away from the root as fast as it can)ã€‚ä¸‹é¢æ˜¯ååºéå†çš„ä¼ªä»£ç ï¼Œå…¶ä¸­ &lt;&lt; postorder actions &gt;&gt;æ˜¯ä¸€äº›æ“ä½œçš„å ä½ç¬¦ï¼Œå¦‚ BinOp ç»“ç‚¹çš„åŠ å‡ä¹˜é™¤æ“ä½œæˆ– Num ç»“ç‚¹è¿”å›æ•´æ•°çš„ç®€å•æ“ä½œï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨åç»­éå†å‘¢ï¼Ÿç¬¬ä¸€ï¼Œæˆ‘ä»¬éœ€è¦å¯¹åœ¨æ ‘ä¸­æ›´ä½çš„ä¸­é—´ç»“ç‚¹è¿›è¡Œæ±‚å€¼ï¼Œ å› ä¸ºå®ƒä»¬ä»£è¡¨äº†ä¼˜å…ˆçº§æ›´é«˜çš„æ“ä½œç¬¦ï¼Œç¬¬äºŒï¼Œæˆ‘ä»¬åœ¨å¯¹æ“ä½œæ•° å‚ä¸ å¯¹åº”æ“ä½œç¬¦ çš„è¿ç®— ä¹‹å‰éœ€è¦å¯¹æ“ä½œæ•°è¿›è¡Œæ±‚å€¼ã€‚åœ¨ä¸‹é¢çš„å›¾ç‰‡ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨ååºéå†æ—¶æˆ‘ä»¬ä¼šé¦–å…ˆå¯¹è¡¨è¾¾å¼ 2*7 è¿›è¡Œ æ±‚å€¼ï¼Œè€Œåªæœ‰åœ¨å¯¹ 14 + 3 æ±‚å€¼ä¹‹åï¼Œæˆ‘ä»¬æ‰ä¼šå¾—åˆ°æ­£ç¡®ç­”æ¡ˆ 17:ä¸‰ç§æ·±åº¦ä¼˜å…ˆéå†ï¼šä¸ºäº†å®Œæ•´èµ·è§ï¼Œä¸‰ç§æ·±åº¦ä¼˜å…ˆéå†çš„æ–¹å¼ï¼šå…ˆåºéå†ï¼Œä¸­åºéå†å’Œååºéå†ã€‚è¿™ äº›éå†æ–¹å¼åå­—çš„æ¥è‡ªäºéå†ä»£ç ä¸­æ“ä½œçš„ä½ç½®ï¼šæœ‰æ—¶ä½ å¯èƒ½éœ€è¦åœ¨æ‰€æœ‰åœ°æ–¹ï¼ˆå…ˆåºï¼Œä¸­åºå’Œååºï¼‰éƒ½æ‰§è¡Œä¸€äº›æ“ä½œã€‚ä½ ä¼šåœ¨æœ¬æ–‡çš„æºä»£ç ä»“ åº“ä¸­æ‰¾åˆ°ä¸€äº›ä¾‹å­ã€‚å…ˆåºéå†preorder traversal,åœ¨å…ˆåºéå†ä¸­ï¼Œæˆ‘ä»¬å…ˆè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œç„¶åé€’å½’ä½¿ç”¨å…ˆåºéå†è®¿é—®å·¦å­æ ‘ï¼Œå†é€’å½’ä½¿ç”¨å…ˆåºéå†è®¿é—®å³å­æ ‘ï¼Œå³ï¼šæ ¹èŠ‚ç‚¹-&gt;å·¦å­æ ‘-&gt;å³å­æ ‘ä¸­åºéå†inorder traversal,åœ¨ä¸­åºéå†ä¸­ï¼Œæˆ‘ä»¬é€’å½’ä½¿ç”¨ä¸­åºéå†è®¿é—®å·¦å­æ ‘ï¼Œç„¶åè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œæœ€åå†é€’å½’ä½¿ç”¨ä¸­åºéå†è®¿é—®å³å­æ ‘ï¼Œå³ï¼šå·¦å­æ ‘-&gt;æ ¹èŠ‚ç‚¹-&gt;å³å­æ ‘ååºéå† postorder traversal.åœ¨ååºéå†ä¸­ï¼Œæˆ‘ä»¬å…ˆé€’å½’ä½¿ç”¨ååºéå†è®¿é—®å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œæœ€åè®¿é—®æ ¹èŠ‚ç‚¹ã€‚ å³ï¼šå·¦å­æ ‘-&gt;å³å­æ ‘-&gt;æ ¹èŠ‚ç‚¹Interpreterç”¨ä»£ç æ¥éå†å’Œè§£é‡Šç”± parser å»ºç«‹çš„æŠ½è±¡è¯­æ³•æ ‘ï¼šå¥½äº†ï¼Œè®©æˆ‘ä»¬å†™ä¸€äº›ä»£ç æ¥éå†å’Œè§£é‡Šç”± parser å»ºç«‹çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œå¥½å—ï¼Ÿä¸‹é¢æ˜¯å®ç°äº†è®¿é—®è€…æ¨¡å¼çš„æºä»£ç ï¼š12345678class NodeVisitor(): def visit(self, node): method_name = 'visit_' + type(node).__name__ visitor = getattr(self, method_name, self.generic_visit) return visitor(node)#generic_visit æ˜¯ä¸€ä¸ªå¤‡ç”¨å‡½æ•°ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸æ¥è¡¨ç¤ºå®ƒé‡åˆ°äº†ä¸€ä¸ªå®ç°ç±»ä¸­æ²¡æœ‰ç›¸ åº” #visit_NodeType æ–¹æ³•çš„ç»“ç‚¹ã€‚ def generic_visit(self, node): raise Exception('No visit_&#123;&#125; method'.format(type(node).__name__))NodeVisitorä¸€ä¸ªç»“ç‚¹è®¿é—®å™¨çš„åŸºç±»ï¼šå®ƒéå†æŠ½è±¡è¯­æ³•æ ‘å¹¶ä¸ºæ‰¾åˆ°çš„æ¯ä¸ªèŠ‚ç‚¹è°ƒç”¨ä¸€ä¸ªè®¿é—®å™¨å‡½æ•°ã€‚ï¼ˆè¿™ä¸ªå‡½æ•°å¯èƒ½ä¼šè¿”å›ä¸€ä¸ªç”±visit()æ–¹æ³•è½¬å‘ çš„å€¼ï¼‰ã€‚This class is meant to be subclassed, with the subclass adding visitor methods.æˆå‘˜å‡½æ•°ï¼š1ï¸âƒ£ visit(node)ï¼šè®¿é—®ä¸€ä¸ªç»“ç‚¹ã€‚å®ƒé»˜è®¤è°ƒç”¨self.visit_classnameï¼ˆå…¶ä¸­çš„classnameæ˜¯ç»“ç‚¹ç±»çš„åå­—ï¼Œæˆ–è€…å¦‚æœè¿™ä¸ªæ–¹æ³•ä¸å­˜åœ¨æ—¶ï¼Œclassnameå°±æ˜¯ generic_visit() ï¼‰çš„æ–¹æ³•ã€‚2ï¸âƒ£ generic_visit(node)ï¼šè¿™ä¸ªè®¿é—®å™¨(visitor)å¯¹ç»“ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹è°ƒç”¨visit()ã€‚ã€æ³¨æ„ï¼šåªæœ‰è¿™ä¸ªè®¿é—®å™¨è°ƒç”¨generic_visit() æˆ–è€…è®¿é—®å®ƒæœ¬èº«ï¼Œå¦åˆ™è‡ªå®šä¹‰è®¿é—®å™¨çš„ç»“ç‚¹çš„å­èŠ‚ç‚¹å°†ä¸ä¼šè¢«è®¿é—®ã€‘1getattr(object, name[, default])å®˜æ–¹æ–‡æ¡£ä¸­è¯´è¿™ä¸ªå‡½æ•°ä½œç”¨æ˜¯è¿”å›å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡å®ä¾‹obj,nameæ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯å¯¹è±¡çš„æˆå‘˜å‡½æ•°åå­—æˆ–è€…æˆå‘˜å˜é‡ï¼Œdefaultå½“å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±ç›¸çš„æ—¶å€™å°±è¿”å›é»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰æä¾›é»˜è®¤å€¼å°±è¿”å›å¼‚å¸¸ã€‚å¦‚ï¼šæä¾›ä¸é»˜è®¤å†™æ³•ï¼š1234567891011121314&gt;&gt;&gt; class Test(object):... def func(self):... print 'I am a test'...&gt;&gt;&gt; test = Test() # å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡&gt;&gt;&gt; func = getattr(test, 'func') # ä½¿ç”¨getattrå‡½æ•°è·å–funcçš„å€¼&gt;&gt;&gt; func()I am a test&gt;&gt;&gt; func = getattr(test, 'f') # ä½¿ç”¨å¯¹è±¡æ²¡æœ‰çš„å±æ€§ï¼Œåˆ™ä¼šå‡ºç°å¼‚å¸¸Traceback (most recent call last): File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;AttributeError: 'Test' object has no attribute 'f'&gt;&gt;&gt;æä¾›é»˜è®¤å†™æ³•å¦‚æœå¯¹è±¡æ²¡æœ‰è¯¥å±æ€§å¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼ã€‚1234&gt;&gt;&gt; func = getattr(test, 'f', None)&gt;&gt;&gt; print funcNone&gt;&gt;&gt;Interpreter ç±»çš„æºä»£ç ä¸‹é¢æ˜¯ Interpreter ç±»çš„æºä»£ç ï¼Œå®ƒç»§æ‰¿è‡ª NodeVisitor ç±»ä¸”å®ç°äº†å½¢å¼ä¸º visit_NodeType çš„ä¸åŒæ–¹æ³•ï¼Œå…¶ä¸­ NodeType ä¼šè¢«å¦‚ BinOp, Num ç­‰ç±»åæ›¿æ¢ï¼š12345678910111213141516class Interpreter(NodeVisitor): def __init__(self, parser): self.parser = parser def visit_BinOp(self, node): if node.op.type == PLUS: return self.visit(node.left) + self.visit(node.right) elif node.op.type == MINUS: return self.visit(node.left) - self.visit(node.right) elif node.op.type == MUL: return self.visit(node.left) * self.visit(node.right) elif node.op.type == DIV: return self.visit(node.left) / self.visit(node.right) def visit_Num(self, node): return node.valueå…³äºä»¥ä¸Šä»£ç æœ‰ä¸¤ç‚¹å€¼å¾—åœ¨è¿™é‡Œæä¸€ä¸‹ï¼šç¬¬ä¸€ï¼Œæ“ä½œ AST ç»“ç‚¹çš„è®¿é—®å™¨(ä¹Ÿå°±æ˜¯å¯¹ASTæ•°æ®çš„æ“ä½œ)çš„ä»£ç  å’Œ AST ç»“ç‚¹(å³ï¼ŒASTçš„æ•°æ®ç»“æ„)æœ¬èº« åˆ†ç¦»ï¼ˆè§£è€¦äº†ï¼‰ã€‚å¯ä»¥çœ‹åˆ° AST ç»“ç‚¹ç±»(BinOp å’Œ Num)æ²¡æœ‰æä¾›ä»»ä½•ä»£ç æ¥æ“ä½œå­˜å‚¨åœ¨è¿™äº›ç»“ç‚¹ä¸­çš„æ•°æ®ï¼Œè¯¥é€»è¾‘è¢«å°è£…åœ¨äº†å®ç° NodeVisitor çš„ Interpreter ç±»ä¸­ã€‚ï¼ˆä¹Ÿå°±æ˜¯å¯¹æ•°æ®çš„æ“ä½œåœ¨NodeVisitor çš„ Interpreter ç±»ä¸­ï¼‰ã€‚ç¬¬äºŒï¼Œåœ¨NodeVisitorçš„è®¿é—®å‡½æ•°ä¸­ï¼Œä¸åƒè¿™æ ·ä½¿ç”¨ä¸€ä¸ªå·¨å¤§çš„ifè¯­å¥:123456789101112131415def visit(node): node_type = type(node).__name__ if node_type == 'BinOp': return self.visit_BinOp(node) elif node_type == 'Num': return self.visit_Num(node) elif ... # ...#####æˆ–è€…##########def visit(node): if isinstance(node, BinOp): return self.visit_BinOp(node) elif isinstance(node, Num): return self.visit_Num(node) elif ...NodeVisitor çš„ visit æ–¹æ³•éå¸¸é€šç”¨ï¼Œèƒ½æ ¹æ®ä¼ å…¥çš„ç»“ç‚¹ç±»å‹æ¥è°ƒåº¦é€‚å½“çš„æ–¹æ³•ã€‚æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œä¸ºäº†åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬çš„è§£é‡Šå™¨ç»§æ‰¿äº† NodeVisitor ç±»å¹¶å®ç°äº†å¿…è¦çš„æ–¹æ³•ã€‚ å› æ­¤ï¼šå¦‚æœä¼ é€’ç»™ visit å‡½æ•°çš„ç»“ç‚¹æ˜¯ BinOpï¼Œé‚£ä¹ˆvisit å‡½æ•°å°±ä¼šè°ƒç”¨ visit_BinOp æ–¹æ³•ã€‚å¦‚æœä¼ é€’ç»™ visitå‡½æ•°çš„ç»“ç‚¹æ˜¯ Num,é‚£ä¹ˆ visit å‡½æ•°å°±ä¼šè°ƒç”¨visit_Num æ–¹ æ³•ï¼Œç­‰ç­‰ã€‚èŠ±æ­¤æ—¶é—´ç ”ç©¶ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼ˆPython çš„æ ‡å‡†æ¨¡å— ast ä¹Ÿä½¿ç”¨äº†ç›¸åŒçš„æœºåˆ¶æ¥éå†ç»“ç‚¹ï¼‰ï¼Œ å› ä¸ºæˆ‘ä»¬å°†æ¥ä¼šç”¨å¾ˆå¤šæ–°çš„ visit_NodeType æ–¹æ³•æ¥æ‰©å±•æˆ‘ä»¬çš„è§£é‡Šå™¨ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ‰‹å·¥ä¸ºè¡¨è¾¾å¼ 2 * 7 + 3 å»ºç«‹ä¸€ä¸ª AST å¹¶æŠŠå®ƒä¼ é€’ç»™è§£é‡Šå™¨ï¼Œé€šè¿‡å¯¹è¯¥è¡¨è¾¾å¼æ±‚å€¼çœ‹çœ‹è¿è¡Œä¸­çš„ visit æ–¹æ³•ã€‚ä¸‹é¢æ˜¯ä½ ä» Python shell ä¸­å°è¯•çš„æ–¹æ³•ï¼š123456789101112131415161718&gt;&gt;&gt; from spi import Token, MUL, PLUS, INTEGER, Num, BinOp&gt;&gt;&gt;&gt;&gt;&gt; mul_token = Token(MUL, '*')&gt;&gt;&gt; plus_token = Token(PLUS, '+')&gt;&gt;&gt; mul_node = BinOp(... left=Num(Token(INTEGER, 2)),... op=mul_token,... right=Num(Token(INTEGER, 7))... )&gt;&gt;&gt; add_node = BinOp(... left=mul_node,... op=plus_token,... right=Num(Token(INTEGER, 3))... )&gt;&gt;&gt; from spi import Interpreter&gt;&gt;&gt; inter = Interpreter(None)&gt;&gt;&gt; inter.visit(add_node)17å¦‚ä½ æ‰€è§ï¼Œæˆ‘æŠŠè¡¨è¾¾å¼æ ‘çš„æ ¹ç»“ç‚¹ä¼ é€’ç»™äº† visit æ–¹æ³•ï¼Œè¿™ä¸€è¡Œä¸ºè§¦å‘äº†æ ‘çš„éå†ï¼Œéå†è°ƒç”¨äº† Interpreter ç±»æ­£ç¡®çš„æ–¹æ³•(visit_BinOp å’Œ visit_Num)å¹¶ç”Ÿæˆäº†ç»“æœã€‚å®Œæ•´ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264\"\"\" SPI - Simple Pascal Interpreter \"\"\"# Token types## EOF (end-of-file) token is used to indicate that# there is no more input left for lexical analysisINTEGER, PLUS, MINUS, MUL, DIV, LPAREN, RPAREN, EOF = ( 'INTEGER', 'PLUS', 'MINUS', 'MUL', 'DIV', '(', ')', 'EOF')class Token(object): def __init__(self, type, value): self.type = type self.value = value def __str__(self): \"\"\"String representation of the class instance. Examples: Token(INTEGER, 3) Token(PLUS, '+') Token(MUL, '*') \"\"\" return 'Token(&#123;type&#125;, &#123;value&#125;)'.format( type=self.type, value=repr(self.value) ) def __repr__(self): return self.__str__()################################################################################ ## LEXER ## ################################################################################class Lexer(object): def __init__(self, text): # client string input, e.g. \"4 + 2 * 3 - 6 / 2\" self.text = text # self.pos is an index into self.text self.pos = 0 self.current_char = self.text[self.pos] def error(self): raise Exception('Invalid character') def advance(self): \"\"\"Advance the `pos` pointer and set the `current_char` variable.\"\"\" self.pos += 1 if self.pos &gt; len(self.text) - 1: self.current_char = None # Indicates end of input else: self.current_char = self.text[self.pos] def skip_whitespace(self): while self.current_char is not None and self.current_char.isspace(): self.advance() def integer(self): \"\"\"Return a (multidigit) integer consumed from the input.\"\"\" result = '' while self.current_char is not None and self.current_char.isdigit(): result += self.current_char self.advance() return int(result) def get_next_token(self): \"\"\"Lexical analyzer (also known as scanner or tokenizer) This method is responsible for breaking a sentence apart into tokens. One token at a time. \"\"\" while self.current_char is not None: if self.current_char.isspace(): self.skip_whitespace() continue if self.current_char.isdigit(): return Token(INTEGER, self.integer()) if self.current_char == '+': self.advance() return Token(PLUS, '+') if self.current_char == '-': self.advance() return Token(MINUS, '-') if self.current_char == '*': self.advance() return Token(MUL, '*') if self.current_char == '/': self.advance() return Token(DIV, '/') if self.current_char == '(': self.advance() return Token(LPAREN, '(') if self.current_char == ')': self.advance() return Token(RPAREN, ')') self.error() return Token(EOF, None)################################################################################ ## PARSER ## ################################################################################class AST(object): pass # è¡¨ç¤ºå®šä¹‰ç•™ç©ºclass BinOp(AST): def __init__(self, left, op, right): self.left = left self.token = self.op = op self.right = rightclass Num(AST): def __init__(self, token): self.token = token self.value = token.valueclass Parser(object): def __init__(self, lexer): self.lexer = lexer # set current token to the first token taken from the input self.current_token = self.lexer.get_next_token() def error(self): raise Exception('Invalid syntax') def eat(self, token_type): # compare the current token type with the passed token # type and if they match then \"eat\" the current token # and assign the next token to the self.current_token, # otherwise raise an exception. if self.current_token.type == token_type: self.current_token = self.lexer.get_next_token() else: self.error() def factor(self): \"\"\"factor : INTEGER | LPAREN expr RPAREN\"\"\" token = self.current_token if token.type == INTEGER: self.eat(INTEGER) return Num(token) elif token.type == LPAREN: self.eat(LPAREN) node = self.expr() self.eat(RPAREN) return node def term(self): \"\"\"term : factor ((MUL | DIV) factor)*\"\"\" node = self.factor() while self.current_token.type in (MUL, DIV): token = self.current_token if token.type == MUL: self.eat(MUL) elif token.type == DIV: self.eat(DIV) node = BinOp(left=node, op=token, right=self.factor()) return node def expr(self): \"\"\" expr : term ((PLUS | MINUS) term)* term : factor ((MUL | DIV) factor)* factor : INTEGER | LPAREN expr RPAREN \"\"\" node = self.term() while self.current_token.type in (PLUS, MINUS): token = self.current_token if token.type == PLUS: self.eat(PLUS) elif token.type == MINUS: self.eat(MINUS) node = BinOp(left=node, op=token, right=self.term()) return node def parse(self): return self.expr()################################################################################ ## INTERPRETER ## ################################################################################class NodeVisitor(object): def visit(self, node): method_name = 'visit_' + type(node).__name__ visitor = getattr(self, method_name, self.generic_visit) return visitor(node) def generic_visit(self, node): raise Exception('No visit_&#123;&#125; method'.format(type(node).__name__))class Interpreter(NodeVisitor): def __init__(self, parser): self.parser = parser def visit_BinOp(self, node): if node.op.type == PLUS: return self.visit(node.left) + self.visit(node.right) elif node.op.type == MINUS: return self.visit(node.left) - self.visit(node.right) elif node.op.type == MUL: return self.visit(node.left) * self.visit(node.right) elif node.op.type == DIV: return self.visit(node.left) / self.visit(node.right) def visit_Num(self, node): return node.value def interpret(self): tree = self.parser.parse() return self.visit(tree)def main(): while True: try: try: text = raw_input('spi&gt; ') except NameError: # Python3 text = input('spi&gt; ') except EOFError: break if not text: continue lexer = Lexer(text) parser = Parser(lexer) interpreter = Interpreter(parser) result = interpreter.interpret() print(result)if __name__ == '__main__': main()å°†ä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º spi.py çš„æ–‡ä»¶ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» GitHub ä¸‹è½½ã€‚è‡ªå·±è¯•ä¸€è¯•ï¼Œç¡®è®¤ ä½ çš„æ–°çš„åŸºäºæ ‘çš„è§£é‡Šå™¨å¯ä»¥æ­£ç¡®åœ°å¯¹ç®—æœ¯è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ã€‚ä¸‹é¢æ˜¯æŸæ¬¡è¿è¡Œè¿‡ç¨‹ï¼š1234567$ python spi.pyspi&gt; 7 + 3 * (10 / (12 / (3 + 1) - 1))22spi&gt; 7 + 3 * (10 / (12 / (3 + 1) - 1)) / (2 + 3) - 5 - 3 + (8)10spi&gt; 7 + (((3 + 2)))12å°ç»“ä»Šå¤©ä½ å­¦ä¹ äº†å…³äºè§£ææ ‘å’Œ ASTï¼Œå¦‚ä½•æ„å»º AST ä»¥åŠéå†è¡¨ç¤ºè¾“å…¥çš„ AST å¹¶è§£é‡Šæ‰§è¡Œã€‚ä½ è¿˜ä¿®æ”¹äº† parser å’Œ interpreter å¹¶å°†è¿™ä¸¤éƒ¨åˆ†è§£å¼€äº†ã€‚ç°åœ¨ lexer, parser å’Œ interpreter ä¹‹é—´çš„æ¥å£çœ‹èµ·æ¥åƒè¿™æ ·ï¼šä½ å¯ä»¥æŠŠå®ƒè¯»ä½œâ€œparser ä» lexer ä¸­ å¾—åˆ° token ç„¶åè¿”å›ç”Ÿæˆçš„ AST ç»™ Interpreter è¿›è¡Œéå†å¹¶è§£é‡Šæ‰§è¡Œæ‰€ç»™è¾“å…¥â€ã€‚é€’å½’è¿™å°±æ˜¯ä»Šå¤©çš„æ‰€æœ‰å†…å®¹ï¼Œä½†åœ¨æ€»ç»“ä¹‹å‰æˆ‘è¿˜æƒ³ç®€å•åœ°èŠä¸€èŠé€’å½’ä¸‹é™ (recursive-descent) parserï¼Œå³æ˜¯ä»…ä»…ç»™å‡ºå®ƒçš„å®šä¹‰ã€‚å®šä¹‰å°±æ˜¯ï¼šä¸€ä¸ª é€’å½’ä¸‹é™parser å°± æ˜¯ä¸€ä¸ªè‡ªé¡¶å‘ä¸‹çš„ parserï¼Œå®ƒä½¿ç”¨ä¸€ç»„é€’å½’è¿‡ç¨‹æ¥å¤„ç†è¾“å…¥ã€‚è‡ªé¡¶å‘ä¸‹åæ˜ äº† parser ä» æ„å»ºè§£ææ ‘çš„é¡¶éƒ¨ç»“ç‚¹å¼€å§‹é€æ¸æ„å»ºæ›´ä½çš„ç»“ç‚¹è¿™ä¸€äº‹å®ã€‚æ¢³ç†æœ¬èŠ‚ä¸part6ç›¸æ¯”ä¸»è¦æ·»åŠ äº†ASTï¼šLexerä¸part6ä¸­çš„æ˜¯ä¸€æ ·çš„ï¼Œè¿˜æ˜¯å°†è¾“å…¥çš„textåˆ†æè½¬æ¢ä¸ºtokenã€‚(è¿™ä¹Ÿæ˜¯è¯æ³•åˆ†æå™¨çš„åŠŸèƒ½)Parserç›¸æ¯”part6ï¼Œå®ƒæ·»åŠ äº†æ„é€ ASTçš„å†…å®¹ï¼šæ·»åŠ äº†ä¸‰ä¸ªç±»ï¼šAST()ï¼šæ˜¯ä¸€ä¸ªåŸºç±»BinOp(AST)ï¼šç»§æ‰¿äºAST()ï¼Œä¸»è¦åŠŸèƒ½æ˜¯å®ç°äºŒå…ƒæ“ä½œç¬¦binary operator ã€‚ï¼ˆè¿™é‡Œåªæœ‰å››ç§ï¼šåŠ ã€å‡ã€ä¹˜ã€é™¤æ³•ï¼‰Num(AST)ï¼šç»§æ‰¿äºAST()ï¼Œå®ƒä¸»è¦æ˜¯è¡¨ç¤ºASTä¸­çš„æ•´æ•°integer tokenï¼ˆå®ƒå°†ä¿å­˜ä¸€ä¸ª INTEGER token å’Œè¯¥ token çš„å€¼ï¼‰ç¬¬äºŒä¸ªå˜åŒ–å°±æ˜¯å®ç°è¯­æ³•è§£æçš„è¿™ä¸‰ä¸ªå‡½æ•°termã€factorã€exprä¸­çš„è¿”å›çš„ä¸åœ¨æ˜¯resultå˜é‡äº†ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªç»“ç‚¹nodeã€‚Interpreterï¼šé€šè¿‡è¯æ³•åˆ†æã€è¯­æ³•åˆ†æä¹‹åï¼Œå¼€å§‹è§£é‡Šè¯­æ³•åˆ†æä¹‹åçš„ç®—å¼ï¼Œè®¡ç®—å‡ºå®ƒçš„ç»“æœï¼Œç”¨Interpreteræ¥è§£é‡Šï¼šå¢æ·»äº†è®¿é—®è€…æ¨¡å¼ï¼šå°† å¯¹æ•°æ®çš„æ“ä½œ(å¯¹æ•°æ®çš„æ“ä½œåœ¨interpreterä¸­å®Œæˆï¼šè®¿é—®ã€è§£é‡Š) å’Œ æ•°æ®ç»“æ„(æ•°æ®ç»“æ„ åœ¨parserä¸­çš„ä¸‰ä¸ªç±»ä¸­æ„å»º) è¿›è¡Œåˆ†ç¦»ï¼ˆè§£è€¦åˆï¼‰ã€‚ä½¿å¾—æ“ä½œé›†åˆå¯ç›¸å¯¹è‡ªç”±åœ°æ¼”åŒ–ã€‚è¿™é‡Œé€šè¿‡åˆ›å»º NodeVisitor()ç±» å®ç°è®¿é—®è€…æ¨¡å¼ã€‚å®ç°äº†é€šè¿‡ä»€ä¹ˆæ–¹å¼å»è®¿é—®ç”Ÿæˆçš„ASTåˆé€šè¿‡Interpreterï¼ˆç»§æ‰¿äº NodeVisitor()ç±»ï¼‰æ¥å®ç°è§£é‡Šç”Ÿæˆçš„ASTæœ€åï¼Œå†æ¬¡æé†’ä¸€ä¸‹ï¼šä¹‹å‰çš„é‚£å‡ å°ç»“ï¼Œæˆ‘ä»¬éƒ½æ˜¯æŠŠinterpreterçš„ä»£ç å’Œparserçš„ä»£ç æ··åœ¨ä¸€èµ·ï¼Œä½†è¿™ä¸€å°èŠ‚æˆ‘ä»¬æŠŠinterpreterçš„ä»£ç å’Œparserçš„ä»£ç åˆ†å¼€äº†ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Let's Build A Simple Interpreter","slug":"Let-s-Build-A-Simple-Interpreter","permalink":"https://longlongqin.github.io/tags/Let-s-Build-A-Simple-Interpreter/"}]},{"title":"Letâ€™s Build A Simple Interpreter 6","slug":"å­¦ä¹ ç¬”è®°/Let's Build A Simple Interpreter/LSBASI-6","date":"2020-03-12T04:55:57.000Z","updated":"2020-03-17T09:40:01.085Z","comments":true,"path":"archives/167c.html","link":"","permalink":"https://longlongqin.github.io/archives/167c.html","excerpt":"æ–°å¢äº†æ‹¬å·è¿ç®—(parenthesized expressions)","text":"æ–°å¢äº†æ‹¬å·è¿ç®—(parenthesized expressions)åŸæ–‡é“¾æ¥ï¼šhttps://ruslanspivak.com/lsbasi-part6/æœ¬æ–‡åœ¨å‰é¢çš„åŸºç¡€ä¸Šï¼Œæ–°å¢äº†æ‹¬å·è¿ç®—(parenthesized expressions)ï¼Œå¦‚ï¼š 7 + 3 * (10 / (12 / (3 + 1) - 1))æ‰€ä»¥éœ€è¦åœ¨part5ä¸­çš„è¯­æ³•åŸºç¡€ä¸Šï¼Œè¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹åçš„è¯­æ³•å¦‚ä¸‹å›¾ï¼šä»ä¸Šé¢çš„å›¾å¯ä»¥çœ‹å‡ºæ¥,åœ¨part6ä¸­ï¼Œexprå’Œtermå’Œpart5ä¸­ä¸€æ ·ï¼Œå”¯ä¸€å˜çš„æ˜¯factorçš„äº§ç”Ÿå¼ (production)ã€‚å®ƒæ–°æ·»åŠ äº†ä¸¤ä¸ª terminal ï¼šLPARENï¼šè¡¨ç¤ºä¸€ä¸ªå·¦æ‹¬å· left parenthesis â€˜( â€˜RPARENï¼šè¡¨ç¤ºä¸€ä¸ªå³æ‹¬å· right parenthesis â€˜)â€™è¿˜æ–°æ·»åŠ äº†ä¸€ä¸ªéç»ˆç«¯ç¬¦ï¼šexprexpræ·»åŠ åœ¨ä¸¤ä¸ªæ‹¬å·ä¹‹é—´ä¸‹é¢æ˜¯factorçš„è¯­æ³•å›¾ï¼šï¼ˆè¿™é‡Œç”¨åˆ°äº†é€’å½’ï¼‰ç„¶åï¼Œå†æ”¾ä¸€ä¸‹æ²¡æœ‰æ”¹å˜çš„ï¼ˆä¸part5ç›¸åŒï¼‰exprã€termçš„è¯­æ³•å›¾ï¼šç°åœ¨çœ‹ä¸€ä¸‹ç®—å¼ï¼š2 * (7 + 3) çš„åˆ†è§£è¿‡ç¨‹å§ï¼šç°åœ¨æŠŠè¯­æ³•è½¬æ¢æˆä»£ç ã€‚ä¸‹é¢è¿™ä¸¤æ¡æ˜¯ä»£ç ä¸­ä¸»è¦æ”¹å˜çš„éƒ¨åˆ†ï¼šLexerè¢«ä¿®æ”¹ï¼Œä½¿å…¶åœ¨åŸæ¥çš„åŸºç¡€ä¸Šå¯ä»¥è¿”å›å¦å¤–ä¸¤ä¸ªtokenï¼šå·¦æ‹¬å·LPAREN ã€å³æ‹¬å·RPARENInterpreterç±»çš„factorè¢«ä¿®æ”¹ï¼Œä¿®æ”¹ä¹‹åä¸ä»…å¯ä»¥è§£ææ•´æ•°integerï¼Œè¿˜å¯ä»¥è§£ææ‹¬å·è¡¨è¾¾å¼(parenthesized expressions)ä¸‹é¢å°±æ˜¯æœ¬å°èŠ‚çš„ä»£ç éƒ¨åˆ†ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194# Token types## EOF (end-of-file) token is used to indicate that# there is no more input left for lexical analysisINTEGER, PLUS, MINUS, MUL, DIV, LPAREN, RPAREN, EOF = ( 'INTEGER', 'PLUS', 'MINUS', 'MUL', 'DIV', '(', ')', 'EOF')class Token(object): def __init__(self, type, value): self.type = type self.value = value def __str__(self): \"\"\"String representation of the class instance. Examples: Token(INTEGER, 3) Token(PLUS, '+') Token(MUL, '*') \"\"\" return 'Token(&#123;type&#125;, &#123;value&#125;)'.format( type=self.type, value=repr(self.value) ) def __repr__(self): return self.__str__()class Lexer(object): def __init__(self, text): # client string input, e.g. \"4 + 2 * 3 - 6 / 2\" self.text = text # self.pos is an index into self.text self.pos = 0 self.current_char = self.text[self.pos] def error(self): raise Exception('Invalid character') def advance(self): \"\"\"Advance the `pos` pointer and set the `current_char` variable.\"\"\" self.pos += 1 if self.pos &gt; len(self.text) - 1: self.current_char = None # Indicates end of input else: self.current_char = self.text[self.pos] def skip_whitespace(self): while self.current_char is not None and self.current_char.isspace(): self.advance() def integer(self): \"\"\"Return a (multidigit) integer consumed from the input.\"\"\" result = '' while self.current_char is not None and self.current_char.isdigit(): result += self.current_char self.advance() return int(result) def get_next_token(self): \"\"\"Lexical analyzer (also known as scanner or tokenizer) This method is responsible for breaking a sentence apart into tokens. One token at a time. \"\"\" while self.current_char is not None: if self.current_char.isspace(): self.skip_whitespace() continue if self.current_char.isdigit(): return Token(INTEGER, self.integer()) if self.current_char == '+': self.advance() return Token(PLUS, '+') if self.current_char == '-': self.advance() return Token(MINUS, '-') if self.current_char == '*': self.advance() return Token(MUL, '*') if self.current_char == '/': self.advance() return Token(DIV, '/') if self.current_char == '(': self.advance() return Token(LPAREN, '(') if self.current_char == ')': self.advance() return Token(RPAREN, ')') self.error() return Token(EOF, None)class Interpreter(object): def __init__(self, lexer): self.lexer = lexer # set current token to the first token taken from the input self.current_token = self.lexer.get_next_token() def error(self): raise Exception('Invalid syntax') def eat(self, token_type): # compare the current token type with the passed token # type and if they match then \"eat\" the current token # and assign the next token to the self.current_token, # otherwise raise an exception. if self.current_token.type == token_type: self.current_token = self.lexer.get_next_token() else: self.error() def factor(self): \"\"\"factor : INTEGER | LPAREN expr RPAREN\"\"\" token = self.current_token if token.type == INTEGER: self.eat(INTEGER) return token.value elif token.type == LPAREN: self.eat(LPAREN) result = self.expr() self.eat(RPAREN) return result def term(self): \"\"\"term : factor ((MUL | DIV) factor)*\"\"\" result = self.factor() while self.current_token.type in (MUL, DIV): token = self.current_token if token.type == MUL: self.eat(MUL) result = result * self.factor() elif token.type == DIV: self.eat(DIV) result = result / self.factor() return result def expr(self): \"\"\"Arithmetic expression parser / interpreter. calc&gt; 7 + 3 * (10 / (12 / (3 + 1) - 1)) 22 expr : term ((PLUS | MINUS) term)* term : factor ((MUL | DIV) factor)* factor : INTEGER | LPAREN expr RPAREN \"\"\" result = self.term() while self.current_token.type in (PLUS, MINUS): token = self.current_token if token.type == PLUS: self.eat(PLUS) result = result + self.term() elif token.type == MINUS: self.eat(MINUS) result = result - self.term() return resultdef main(): while True: try: # To run under Python3 replace 'raw_input' call # with 'input' text = raw_input('calc&gt; ') except EOFError: break if not text: continue lexer = Lexer(text) interpreter = Interpreter(lexer) result = interpreter.expr() print(result)if __name__ == '__main__': main()","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Let's Build A Simple Interpreter","slug":"Let-s-Build-A-Simple-Interpreter","permalink":"https://longlongqin.github.io/tags/Let-s-Build-A-Simple-Interpreter/"}]},{"title":"Letâ€™s Build A Simple Interpreter 5","slug":"å­¦ä¹ ç¬”è®°/Let's Build A Simple Interpreter/LSBASI-5","date":"2020-03-11T09:45:49.000Z","updated":"2020-04-03T14:51:52.352Z","comments":true,"path":"archives/173c.html","link":"","permalink":"https://longlongqin.github.io/archives/173c.html","excerpt":"æœ¬æ–‡ä¸ºè¿™ä¸€ç³»åˆ—çš„part5ï¼Œç¬¬äº”å°èŠ‚ã€‚è¿™æ¬¡å°†å†™ä¸€ä¸ªå¯ç§»æ¤æ€§åŠ å‡ä¹˜é™¤æ··åˆè¿ç®—çš„è§£é‡Šå™¨ã€‚","text":"æœ¬æ–‡ä¸ºè¿™ä¸€ç³»åˆ—çš„part5ï¼Œç¬¬äº”å°èŠ‚ã€‚è¿™æ¬¡å°†å†™ä¸€ä¸ªå¯ç§»æ¤æ€§åŠ å‡ä¹˜é™¤æ··åˆè¿ç®—çš„è§£é‡Šå™¨ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://ruslanspivak.com/lsbasi-part5/æœ¬æ–‡ä¸ºè¿™ä¸€ç³»åˆ—çš„part5ï¼Œç¬¬äº”å°èŠ‚ã€‚è¿™æ¬¡å°†å†™ä¸€ä¸ªå¯ç§»æ¤æ€§åŠ å‡ä¹˜é™¤æ··åˆè¿ç®—çš„è§£é‡Šå™¨ã€‚åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸€äº›ï¼Œæ¯”å¦‚ï¼šç»“åˆå¾‹ã€æ“ä½œç¬¦(operator)çš„ä¼˜å…ˆçº§(precedence)ç»“åˆå¾‹(associativity)æ¯”å¦‚ï¼Œ7+3+1ç­‰åŒäº(7+3)+1 ï¼Œ7 - 3 - 1 ç­‰åŒäº (7 - 3) - 1ã€‚è¿™æ²¡æœ‰ä»€ä¹ˆå¥‡æ€ªçš„ã€‚ä½†æ˜¯å†æ¯”å¦‚ï¼š 7 - 3 - 1 ä¸ 7 - (3 - 1) çš„ç»“æœå°±ä¸ä¸€æ ·äº†ã€‚å…¶å®ï¼šåŠ ã€å‡ã€ä¹˜ã€é™¤ è¿™äº›æ“ä½œç¬¦(operator)æ˜¯å·¦ç»“åˆ(left-associative)ã€‚æ¯”å¦‚ï¼Œ 7 + 3 + 1 ä¸­çš„ æ“ä½œæ•°(operand) 3ï¼Œå®ƒçš„å·¦å³éƒ½æ˜¯ åŠ å· ï¼Œä½†æ˜¯è¿™ä¸ªæ“ä½œæ•°3æ˜¯ä¸å®ƒå·¦è¾¹çš„åŠ å·â€œ+â€ç»“åˆçš„ï¼Œ æ‰€ä»¥åŠ æ³•æ˜¯å·¦ç»“åˆã€‚é‚£åŠ å‡ä¹˜é™¤æ··åˆæ—¶ï¼Œå¦‚ 7 + 5 * 2 æ˜¯å¦è¿˜æ˜¯éµå¾ªå·¦ç»“åˆå¾‹å‘¢ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œä¸éµå¾ªï¼Œå› ä¸º (7 + 5) * 2 ä¸ç­‰äº 7 + 5 * 2 ã€‚ç”±æ­¤å¯çŸ¥ï¼šâ€‹ åŠ æ³•å’Œå‡æ³•æ˜¯ä¸€ç±»ï¼Œæ‰€ä»¥å®ƒä»¬åœ¨ä¸€èµ·ç»„æˆçš„è¿ç®—æ˜¯å·¦ç»“åˆï¼›ä¹˜æ³•å’Œé™¤æ³•æ˜¯ä¸€ç±»ï¼Œæ‰€ä»¥ä»–ä»¬åœ¨ä¸€èµ·ç»„æˆçš„è¿ç®—æ˜¯å·¦ç»“åˆã€‚ï¼ˆå³ï¼Œå·¦ç»“åˆå¾‹åªé€‚ç”¨äºåŒä¸€ç±»çš„æ“ä½œç¬¦(operator)ï¼‰ä¼˜å…ˆçº§(precedence)é‚£æˆ‘ä»¬å¦‚ä½•è§„å®šè¿™ç§åŠ å‡ä¹˜é™¤ï¼ˆè¿™ä¸¤ç±»æ“ä½œç¬¦(operator)ï¼‰åŒæ—¶å‡ºç°æ—¶çš„è¿ç®—è§„åˆ™å‘¢ï¼Ÿï¼ˆå®é™…ä¸Šæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯ä¸ºå®ç°ä»£ç æ¥åšå‡ºä¸€ç§è¿ç®—è§„åˆ™ï¼‰åœ¨ 7 + 5 * 2ä¸­ï¼Œå¦‚æœæ“ä½œç¬¦â€œâ€èƒ½å…ˆæ¯”æ“ä½œç¬¦â€œ+â€åˆ°ä»–çš„æ“ä½œæ•°5ï¼Œå°±è¯´ï¼Œæ“ä½œç¬¦â€œâ€æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§(higher precedence)ã€‚åœ¨å®é™…ä¸­æˆ‘ä»¬ä¹Ÿåœ¨ç”¨ï¼Œä¹ŸçŸ¥é“ã€‚ä¹˜é™¤çš„ä¼˜å…ˆçº§è¦é«˜äºåŠ å‡æ³•ã€‚å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å¼€å§‹ç”¨è¡¨æ ¼æ¥è¡¨ç¤ºæ“ä½œç¬¦çš„ç»“åˆå¾‹ä¸ä¼˜å…ˆçº§ï¼šç”±ä¸Šè¡¨å¯çŸ¥ï¼š+ and - æ˜¯ä¼˜å…ˆçº§ç›¸åŒï¼Œéƒ½æ˜¯å·¦ç»“åˆï¼›* and / ä¼˜å…ˆçº§ç›¸åŒï¼Œä¹Ÿéƒ½æ˜¯å·¦ç»“åˆï¼›æˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®ä¸Šé¢çš„ä¼˜å…ˆçº§è¡¨æ ¼æ¥åˆ¶å®šä¸€ä¸ªè¯­æ³•è§„åˆ™ï¼šä¼˜å…ˆçº§ç›¸åŒçš„æ¯ä¸€çº§éƒ½å®šä¹‰ä¸€ä¸ªéç»ˆç«¯ç¬¦(non-terminal)ã€‚å…¶ä¸­æ¯ä¸ªäº§ç”Ÿå¼(production)çš„bodyä¸­åº”è¯¥åŒ…å«:ç®—æ•°è¿ç®—ç¬¦(arithmetic operators) &amp; éç»ˆç«¯ç¬¦(è¿™é‡Œçš„éç»ˆç«¯åˆå‚ä¸æ„æˆä¸‹ä¸€è¾ƒé«˜çš„ä¼˜å…ˆçº§çš„è§„åˆ™(äº§ç”Ÿå¼)çš„ä¸€éƒ¨åˆ†)åˆ›å»ºä¸€ä¸ªè¡¨ç¤º åŸºæœ¬è¡¨è¾¾å¼çš„éç»ˆç«¯ç¬¦factorï¼Œæœ¬æ–‡ä¸­æŒ‡integerã€‚ä¸€èˆ¬çš„è§„åˆ™æ˜¯ï¼šå¦‚æœä½ æœ‰Nä¸ªä¼˜å…ˆçº§ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦N+1ä¸ªéç»ˆç«¯ç¬¦ï¼ˆä¸€ç±»æ˜¯æ¯ä¸€å±‚ä¼˜å…ˆçº§çš„ä¸€ä¸ªéç»ˆç«¯ç¬¦ï¼Œä¸€ç±»æ˜¯è¡¨ç¤ºåŸºæœ¬è¡¨è¾¾å¼å•å…ƒï¼‰æ„å»ºè¯­æ³•(grammars)ç°åœ¨æ ¹æ®ä¸Šé¢çš„è§„åˆ™æ¥æ„å»ºè¯­æ³•ï¼šç”±è§„åˆ™1ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸¤ä¸ªéç»ˆç»“ç¬¦(non-terminal)ï¼Œä¸€ä¸ªæ˜¯leve1çš„non-terminalå«åšexprï¼Œå¦ä¸€ä¸ªæ˜¯level2çš„non-terminalå«åštermã€‚ç„¶åæ ¹æ®è§„åˆ™2ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå«åšfactorçš„non-terminalæ¥ä½œä¸ºä¸€ä¸ªåŸºæœ¬çš„è¡¨è¾¾å¼å•å…ƒï¼Œintegersã€‚è¿™ä¸ªè¯­æ³•çš„å¼€å§‹ç¬¦å·ï¼ˆstart symbol ï¼‰å«åšexprã€‚å®ƒçš„äº§ç”Ÿå¼(production)çš„bodyå«æœ‰ï¼š1ï¸âƒ£è¡¨ç¤ºlevel2çš„æ“ä½œç¬¦(åœ¨è¿™æŒ‡çš„æ˜¯+ and - )ï¼Œ2ï¸âƒ£å’Œä¸€ä¸ªéç»ˆç«¯ç¬¦term(è¿™ä¸ªtermæ˜¯ä¸‹ä¸€å±‚ä¼˜å…ˆçº§ï¼ˆæ›´é«˜çš„ï¼‰level1 çš„ä¸€ä¸ªäº§ç”Ÿå¼)å¼€å§‹ç¬¦å·ï¼ˆSï¼‰ï¼šæœ€å¤§çš„è¯­æ³•å•ä½ æˆ– æœ€é‡è¦çš„è¯­æ³•å•ä½ã€‚ï¼ˆå¦‚ä¸Šé¢çš„é‚£ä¸ªè‹±æ–‡å¥å­ä¸­çš„ï¼Œæœ€å¤§çš„è¯­æ³•å•ä½æ˜¯ï¼šå¥å­ã€‚ï¼‰éç»ˆç«¯ç¬¦termçš„production(äº§ç”Ÿå¼)çš„bodyåŒ…å«:1ï¸âƒ£è¡¨ç¤ºlevel1çš„æ“ä½œç¬¦(åœ¨è¿™æŒ‡çš„æ˜¯ * and /)ã€‚2ï¸âƒ£è¿˜æœ‰ä¸€ä¸ªéç»ˆç«¯ç¬¦factoræ¥è¡¨ç¤ºåŸºæœ¬çš„è¡¨è¾¾å¼å•å…ƒï¼Œintegerséç»ˆç«¯ç¬¦factoråŒ…å«ï¼š1ï¸âƒ£ä¸€ä¸ªintegerä¸Šé¢çš„ä¸‰å¹…å›¾æ˜¯è¯­æ³•ã€è¯­æ³•å›¾çš„ä¸€éƒ¨åˆ†ï¼Œè¿™åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ä¹Ÿå‡ºç°è¿‡ã€‚ä½†ç°åœ¨éœ€è¦å°†ä¸Šé¢çš„ä¸‰å¹…å›¾ç»“åˆåœ¨ä¸€èµ·æ¥è€ƒè™‘ç»“åˆå¾‹å’Œä¼˜å…ˆçº§ï¼ˆ associativity and precedence ï¼‰ä¸‹é¢æ˜¯æœ¬æ–‡çš„è¯­æ³•å¯¹åº”çš„è¯­æ³•å›¾ï¼šä¸Šé¢è¯­æ³•å›¾çš„æ¯ä¸€ä¸ªå°æ–¹æ¡†éƒ½æ˜¯å…¶ä»–è¯­æ³•å›¾çš„ï¼šå‡½æ•°è°ƒç”¨ï¼ˆâ€œmethod callâ€ï¼‰ã€‚å¦‚æœä½ ä»¥è¡¨è¾¾å¼ 7 + 5 * 2 ä¸ºä¾‹å¹¶ä»é¡¶ å±‚å›¾ expr å¼€å§‹é€æ­¥åˆ†è§£åˆ°æœ€åº•å±‚çš„å›¾ factor, ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ä½äºä¸­é—´çš„å›¾çš„é«˜ä¼˜ å…ˆçº§æ“ä½œç¬¦*å’Œ/ä¼šæ¯”ä¸Šé¢çš„å›¾çš„æ“ä½œç¬¦+å’Œ-å…ˆæ‰§è¡Œã€‚ä¸ºäº†è§£é‡Šæ¸…æ¥šè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨ä¸Šé¢è¯­æ³•å’Œå¥æ³•å›¾æ¥åˆ†è§£ç›¸åŒç®—æœ¯è¡¨è¾¾å¼ 7 + 5 * 2 çš„è¿‡ç¨‹ã€‚è¿™åªæ˜¯å¦ä¸€ç§å±•ç¤ºé«˜ä¼˜å…ˆçº§è¿ç®—ç¬¦ å…ˆäº ä½ä¼˜å…ˆçº§è¿ç®—ç¬¦æ‰§è¡Œè¿™ä¸ªäº‹å®çš„ æ–¹å¼ã€‚è¯­æ³•è½¬æ¢æˆä»£ç è®©æˆ‘ä»¬ä½¿ç”¨part 4ä¸­çš„å‡†åˆ™æŠŠè¯¥è¯­æ³•è½¬åŒ–æˆä»£ç ï¼Œçœ‹çœ‹å®ƒæ€ä¹ˆå·¥ä½œï¼Œå…ˆçœ‹ä¸€å¼ ä¸Šé¢æ”¾è¿‡çš„è¯­æ³•å›¾ï¼šä¸‹é¢æ˜¯èƒ½å¤„ç†å¯ä»¥åŒ…å«ä»»æ„æ•°é‡åŠ å‡ä¹˜é™¤æ“ä½œç¬¦çš„ç®—æœ¯è¡¨è¾¾å¼çš„è®¡ç®—å™¨çš„å®Œæ•´ä»£ç ã€‚ç›¸æ¯”äºpart 4ä»£ç çš„ä¸»è¦å˜åŒ–æœ‰ï¼šLexer ç±»ç°åœ¨å¯ä»¥æŠŠ+,-,*å’Œ/éƒ½ token åŒ–äº†ï¼ˆæ²¡ä»€ä¹ˆæ–°æ–¹æ³•ï¼Œæˆ‘ä»¬åªæ˜¯æŠŠå‰é¢æ–‡ç« ä¸­ çš„ä»£ç åˆå¹¶åˆ°ä¸€ä¸ªç±»ä¸­æ¥æ”¯æŒæ‰€æœ‰è¿™äº› tokenï¼‰å›æƒ³è¯­æ³•ä¸­çš„æ¯æ¡è§„åˆ™ï¼ˆäº§ç”Ÿå¼ï¼‰Réƒ½è¦å˜æˆä¸€ä¸ªåŒåçš„æ–¹æ³•ï¼Œä¸”å¯¹è¯¥è§„åˆ™çš„å¼•ç”¨éƒ½è¦å˜ æˆä¸€ä¸ªæ–¹æ³•è°ƒç”¨ R() è¿™ä¸€ç‚¹ã€‚ç°åœ¨ Interpreter ç±»æœ‰äº†ä¸‰ä¸ªæ–¹æ³•æ¥å¯¹åº”è¯­æ³•ä¸­çš„é ç»ˆç»“ç¬¦ï¼š expr, term, factor.123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182# Token types## EOF (end-of-file) token is used to indicate that# there is no more input left for lexical analysisINTEGER, PLUS, MINUS, MUL, DIV, EOF = ( 'INTEGER', 'PLUS', 'MINUS', 'MUL', 'DIV', 'EOF')class Token(object): def __init__(self, type, value): # token type: INTEGER, PLUS, MINUS, MUL, DIV, or EOF self.type = type # token value: non-negative integer value, '+', '-', '*', '/', or None self.value = value def __str__(self): \"\"\"String representation of the class instance. Examples: Token(INTEGER, 3) Token(PLUS, '+') Token(MUL, '*') \"\"\" return 'Token(&#123;type&#125;, &#123;value&#125;)'.format( type=self.type, value=repr(self.value) ) def __repr__(self): return self.__str__()class Lexer(object): def __init__(self, text): # client string input, e.g. \"3 * 5\", \"12 / 3 * 4\", etc self.text = text # self.pos is an index into self.text self.pos = 0 self.current_char = self.text[self.pos] def error(self): raise Exception('Invalid character') def advance(self): \"\"\"Advance the `pos` pointer and set the `current_char` variable.\"\"\" self.pos += 1 if self.pos &gt; len(self.text) - 1: self.current_char = None # Indicates end of input else: self.current_char = self.text[self.pos] def skip_whitespace(self): while self.current_char is not None and self.current_char.isspace(): self.advance() def integer(self): \"\"\"Return a (multidigit) integer consumed from the input.\"\"\" result = '' while self.current_char is not None and self.current_char.isdigit(): result += self.current_char self.advance() return int(result) def get_next_token(self): \"\"\"Lexical analyzer (also known as scanner or tokenizer) This method is responsible for breaking a sentence apart into tokens. One token at a time. \"\"\" while self.current_char is not None: if self.current_char.isspace(): self.skip_whitespace() continue if self.current_char.isdigit(): return Token(INTEGER, self.integer()) if self.current_char == '+': self.advance() return Token(PLUS, '+') if self.current_char == '-': self.advance() return Token(MINUS, '-') if self.current_char == '*': self.advance() return Token(MUL, '*') if self.current_char == '/': self.advance() return Token(DIV, '/') self.error() return Token(EOF, None)class Interpreter(object): def __init__(self, lexer): self.lexer = lexer # set current token to the first token taken from the input self.current_token = self.lexer.get_next_token() def error(self): raise Exception('Invalid syntax') def eat(self, token_type): # compare the current token type with the passed token # type and if they match then \"eat\" the current token # and assign the next token to the self.current_token, # otherwise raise an exception. if self.current_token.type == token_type: self.current_token = self.lexer.get_next_token() else: self.error() def factor(self): \"\"\"factor : INTEGER\"\"\" token = self.current_token self.eat(INTEGER) return token.value def term(self): \"\"\"term : factor ((MUL | DIV) factor)*\"\"\" result = self.factor() while self.current_token.type in (MUL, DIV): token = self.current_token if token.type == MUL: self.eat(MUL) result = result * self.factor() elif token.type == DIV: self.eat(DIV) result = result / self.factor() return result def expr(self): \"\"\"Arithmetic expression parser / interpreter. calc&gt; 14 + 2 * 3 - 6 / 2 17 expr : term ((PLUS | MINUS) term)* term : factor ((MUL | DIV) factor)* factor : INTEGER \"\"\" result = self.term() while self.current_token.type in (PLUS, MINUS): token = self.current_token if token.type == PLUS: self.eat(PLUS) result = result + self.term() elif token.type == MINUS: self.eat(MINUS) result = result - self.term() return resultdef main(): while True: try: # To run under Python3 replace 'raw_input' call # with 'input' text = raw_input('calc&gt; ') except EOFError: break if not text: continue lexer = Lexer(text) interpreter = Interpreter(lexer) result = interpreter.expr() print(result)if __name__ == '__main__': main()å°†ä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º calc5.py ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» GitHub ä¸Šä¸‹è½½ã€‚å’Œä»¥å¾€ä¸€æ ·ï¼Œè‡ªå·±å° è¯•ä¸€ä¸‹ï¼Œç¡®è®¤è§£é‡Šå™¨å¯ä»¥å¯¹åŒ…å«ä¸åŒä¼˜å…ˆçº§æ“ä½œç¬¦çš„ç®—æœ¯è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ã€‚æ¢³ç†ä»£ç ä¸­æœ‰ä¸‰ä¸ªç±»(class)ï¼Œä»–ä»¬ä¸­çš„å‡½æ•°åŠä½œç”¨ï¼šTokenï¼š__init__ï¼šåˆå§‹åŒ–å®ä¾‹__str__ï¼šå­—ç¬¦ä¸²å½¢å¼__repr__ï¼šå­—ç¬¦ä¸²å½¢å¼åœ¨Pythonä¸­ï¼Œæ‰€æœ‰ä»¥â€œ_â€åŒä¸‹åˆ’çº¿åŒ…èµ·æ¥çš„æ–¹æ³•ï¼Œéƒ½ç»Ÿç§°ä¸ºâ€œMagic Methodâ€ï¼ˆé­”æœ¯æ–¹æ³•ï¼‰,ä¾‹å¦‚ç±»çš„åˆå§‹åŒ–æ–¹æ³• __init_repr(self)å®šä¹‰å½“è¢« repr() è°ƒç”¨æ—¶çš„è¡Œä¸ºstr(self)å®šä¹‰å½“è¢« str() è°ƒç”¨æ—¶çš„è¡Œä¸ºLexerç”¨äºè¯æ³•åˆ†æï¼š__init__ï¼šåˆå§‹åŒ–å®ä¾‹errorï¼šé”™è¯¯æç¤ºadvanceï¼šä½¿poså‰è¿›ä¸€ä¸ªä½ç½®skip_whitespaceï¼šç•¥è¿‡ç©ºæ ¼integerï¼šè¯†åˆ«æ•´æ•°ï¼ˆå¯ä»¥è¯†åˆ«å¤šä½æ•°ï¼‰get_next_tokenï¼šè·å¾—ä¸€ä¸ªtokenï¼ˆå…¶å®æˆ‘è§‰å¾—å«åšï¼šget_token_and_to_nextæ›´åˆé€‚ï¼‰Interpreterç”¨äºè¯­æ³•åˆ†æï¼š__init__ï¼šåˆå§‹åŒ–å®ä¾‹errorï¼šé”™è¯¯æç¤ºeatï¼šè´Ÿè´£æ£€æµ‹å½“å‰çš„token.typeä¸ä¼ å…¥çš„token_typeæ˜¯å¦ç›¸åŒã€‚è‹¥ç›¸åŒï¼Œåˆ™å°†å½“å‰çš„tokenâ€œåƒäº†â€ï¼Œç„¶åæŠŠå½“å‰tokençš„ä¸‹ä¸€ä¸ªtokenåˆ†é…ç»™current_tokenã€‚ä¸‹é¢å°±æ˜¯è¯­æ³•åˆ†æçš„æ ¸å¿ƒäº†ï¼Œç”±ä¸Šé¢çš„åˆ†æç›´åˆ°ï¼Œå®ƒç”±ï¼šexprã€termã€factoræ„æˆã€‚æ¢³ç†å®Œæ¯•ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Let's Build A Simple Interpreter","slug":"Let-s-Build-A-Simple-Interpreter","permalink":"https://longlongqin.github.io/tags/Let-s-Build-A-Simple-Interpreter/"}]},{"title":"Letâ€™s Build A Simple Interpreter 4","slug":"å­¦ä¹ ç¬”è®°/Let's Build A Simple Interpreter/LSBASI-4","date":"2020-03-10T09:27:30.000Z","updated":"2020-03-24T07:56:38.973Z","comments":true,"path":"archives/3b16.html","link":"","permalink":"https://longlongqin.github.io/archives/3b16.html","excerpt":"","text":"åŸæ–‡é“¾æ¥ï¼šhttps://ruslanspivak.com/lsbasi-part4/åœ¨å‰é¢çš„æ–‡ç« ä¸­ä½ å­¦ä¼šäº†æ€æ ·è¯†åˆ«å’Œè§£é‡ŠåŒ…å«ä»»æ„æ•°é‡çš„åŠ å‡æ“ä½œçš„ç®—æœ¯è¡¨è¾¾å¼ï¼Œä¾‹å¦‚â€œ7 - 3 + 2 - 1â€ã€‚è¿˜å­¦ä¼šäº†å¥æ³•å›¾ä»¥åŠå®ƒä»¬å¦‚ä½•è¢«ç”¨æ¥è¡¨ç¤ºä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•ã€‚ä»Šå¤©ä½ å°†ä¼šå­¦ä¹ è§£æ(parse)å’Œè§£é‡Š(interpret)åŒ…å«ä»»æ„ä¹˜é™¤æ“ä½œçš„ç®—æœ¯è¡¨è¾¾å¼ï¼Œä¾‹å¦‚â€œ7 * 4 / 2 * 3â€ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä½¿ç”¨çš„æ˜¯æ•´æ•°é™¤æ³•ï¼Œæ‰€ä»¥å¯¹äºè¡¨è¾¾å¼â€œ9 / 4â€æ¥è¯´ï¼Œç»“æœæ˜¯ä¸€ä¸ª æ•´æ•°ï¼š2ã€‚æˆ‘ä»Šå¤©ä¼šè®²å¾ˆå¤šå¦ä¸€ä¸ªè¡¨ç¤ºç¼–ç¨‹è¯­è¨€å¥æ³•çš„å¹¿æ³›ä½¿ç”¨çš„è¡¨ç¤ºæ³•ï¼Œå« ä¸Šä¸‹æ–‡æ— å…³è¯­æ³• (context-free grammars, ç®€è®°ä¸º grammars)æˆ– BNF (Backus-Naur Form)ã€‚ä¸ºäº†è¿™ç¯‡æ–‡ç« çš„ç›®çš„ï¼Œæˆ‘ä¸ä¼šä½¿ç”¨çº¯ BNF è®°æ³•ï¼Œè€Œæ›´åƒæ˜¯ä¸€ä¸ªä¿®æ”¹è¿‡çš„ EBNF è®°æ³•ã€‚æ–‡æ³•(è¯­æ³•)ï¼šæè¿°è¯­è¨€çš„è¯­æ³•ç»“æ„çš„å½¢å¼è§„åˆ™ã€‚ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•å°±æ˜¯è¯´è¿™ä¸ªæ–‡æ³•ä¸­æ‰€æœ‰çš„äº§ç”Ÿå¼å·¦è¾¹åªæœ‰ä¸€ä¸ªéç»ˆç»“ç¬¦ï¼Œæ¯”å¦‚ï¼šS -&gt; aSbS -&gt; abè¿™ä¸ªæ–‡æ³•æœ‰ä¸¤ä¸ªäº§ç”Ÿå¼ï¼Œæ¯ä¸ªäº§ç”Ÿå¼å·¦è¾¹åªæœ‰ä¸€ä¸ªéç»ˆç»“ç¬¦Sï¼Œè¿™å°±æ˜¯ä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼Œå› ä¸ºä½ åªè¦æ‰¾åˆ°ç¬¦åˆäº§ç”Ÿå¼å³è¾¹çš„ä¸²ï¼Œå°±å¯ä»¥æŠŠå®ƒå½’çº¦ä¸ºå¯¹åº”çš„éç»ˆç»“ç¬¦ã€‚æ¯”å¦‚ï¼šaSb -&gt; aaSbbS -&gt; abè¿™å°±æ˜¯ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•ï¼Œå› ä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªäº§ç”Ÿå¼å·¦è¾¹æœ‰ä¸æ­¢ä¸€ä¸ªç¬¦å·ï¼Œæ‰€ä»¥ä½ åœ¨åŒ¹é…è¿™ä¸ªäº§ç”Ÿå¼ä¸­çš„Sçš„æ—¶å€™å¿…éœ€ç¡®ä¿è¿™ä¸ªSæœ‰æ­£ç¡®çš„â€œä¸Šä¸‹æ–‡â€ï¼Œä¹Ÿå°±æ˜¯å·¦è¾¹çš„aå’Œå³è¾¹çš„bï¼Œæ‰€ä»¥å«ä¸Šä¸‹æ–‡ç›¸å…³æ–‡æ³•ã€‚ä½œè€…ï¼šå¾è¾°é“¾æ¥ï¼šhttps://www.zhihu.com/question/21833944/answer/40689967æ¥æºï¼šçŸ¥ä¹è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨è¯­æ³•çš„åŸå› ï¼šè¯­æ³•ä½¿ç”¨äº†ä¸€ç§ç®€æ˜çš„æ–¹å¼æ¥æè¿°ä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„å¥æ³•ã€‚ä¸åƒè¯­æ³•å›¾ï¼Œè¯­æ³•éå¸¸ç´§å‡‘ã€‚ åœ¨ä»¥åçš„æ–‡ç« ä¸­ï¼Œä½ ä¼šçœ‹åˆ°æˆ‘è¶Šæ¥è¶Šå¤šåœ°ä½¿ç”¨è¯­æ³•ã€‚è¯­æ³•å¯ä»¥åšä¸ºæ–‡æ¡£ä¿å­˜ã€‚å³ä½¿å¯¹ä»å¤´å¼€å§‹å†™è§£æå™¨(parser)æ¥è¯´ï¼Œè¯­æ³•ä¹Ÿæ˜¯ä¸€ä¸ªå¥½çš„å…¥æ‰‹ç‚¹ã€‚å¾ˆå¤šæ—¶å€™é€šè¿‡éµå¾ª ä¸€å¥—ç®€å•çš„è§„åˆ™ä½ å°±å¯ä»¥æŠŠè¯­æ³•è½¬åŒ–æˆä»£ç ã€‚æœ‰ä¸€å¥—å·¥å…·ï¼Œå«è§£æå™¨ç”Ÿæˆå™¨(parser generator)ï¼Œå¯ä»¥æŠŠè¯­æ³•åšä¸ºè¾“å…¥å¹¶è‡ªåŠ¨æ ¹æ®å®ƒä¸ºä½ ç”Ÿæˆä¸€ä¸ªè§£æå™¨ã€‚æˆ‘ä¼šä»¥ååœ¨è¿™ä¸ªç³»åˆ—ä¸­è°ˆåˆ°è¿™äº›å·¥å…·ã€‚è¯­æ³•æœºåˆ¶ç°åœ¨ï¼Œæˆ‘ä»¬æ¥èŠèŠè¯­æ³•çš„æœºåˆ¶æ–¹é¢ï¼šä¸‹é¢çš„è¯­æ³•æè¿°äº†ç®—æœ¯è¡¨è¾¾å¼ï¼Œåƒâ€œ7 * 4 / 2 * 3â€è¿™æ ·çš„ï¼ˆè¿™åªæ˜¯è¯¥è¯­æ³•å¯ä»¥ç”Ÿæˆçš„è®¸å¤šè¡¨è¾¾å¼ä¹‹ä¸€ï¼‰ï¼šè¯­æ³•æ˜¯ç”±ä¸€ç³»åˆ—è§„åˆ™ç»„æˆçš„ï¼Œä¹Ÿè¢«ç§°ä¸ºäº§ç”Ÿå¼(production)ã€‚æˆ‘ä»¬çš„è¯­æ³•ä¸­æœ‰ä¸¤æ¡è§„åˆ™(äº§ç”Ÿå¼)ï¼š1ã€ä¸€æ¡è§„åˆ™ç”±ï¼šä¸€ä¸ªéç»ˆç»“ç¬¦(å«åš headæˆ–ç”Ÿæˆå¼çš„å·¦è¾¹) + ä¸€ä¸ªåˆ†å·ï¼ˆ:ï¼‰+ ä¸€ç³»åˆ—ç»ˆç»“ç¬¦ å’Œ/æˆ– éç»ˆç»“ç¬¦(å«åš body æˆ– å³è¾¹)ï¼š2ã€åœ¨ä¸Šé¢å±•ç¤ºçš„è¯­æ³•ä¸­ï¼Œåƒ MUL, DIV, æˆ– INTEGER è¿™æ ·çš„ token è¢«ç§°ä¸º ç»ˆç»“ç¬¦(terminals), expr factor è¿™æ ·çš„å˜é‡è¢«ç§°ä¸º éç»ˆç»“ç¬¦(not-terminals).ç¬¬ä¸€æ¡è§„åˆ™å·¦è¾¹çš„éç»ˆç»“ç¬¦è¢«å«åš å¼€å§‹ç¬¦å·(start symbol). åœ¨æˆ‘ä»¬çš„è¯­æ³•ä¸­ï¼Œå¼€å§‹ç¬¦å·æ˜¯ expr:ä½ å¯ä»¥è¿™ä¹ˆç†è§£ expr è¿™æ¡è§„åˆ™ï¼šâ€œexpr æ˜¯ä¸€ä¸ª factor åé¢å¯é€‰åœ°è·Ÿä¸€ä¸ªä¹˜æˆ–é™¤è¿ç®—ç¬¦å†è·Ÿ å¦ä¸€ä¸ª factorï¼Œåé¢ä¹Ÿç›¸åº”å¯é€‰åœ°è·Ÿä¸€ä¸ªä¹˜æˆ–é™¤è¿ç®—ç¬¦å†è·Ÿå¦ä¸€ä¸ª factorï¼Œå¦‚æ­¤é‡å¤â€ã€‚factor æ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºæœ¬æ–‡æ¥è¯´ factor å°±æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚è¯­æ³•ä¸­çš„ç¬¦å·è®©æˆ‘ä»¬å¿«é€Ÿåœ°è¿‡ä¸€éè¯­æ³•ä¸­çš„ç¬¦å·åŠå®ƒä»¬çš„æ„ä¹‰ã€‚|å¤šé€‰ä¸€ã€‚ç«–çº¿è¡¨ç¤ºâ€œæˆ–â€ã€‚æ‰€ä»¥ (MUL | DIV) è¡¨ç¤º MUL æˆ– DIV(...)è¢«æ‹¬å·åŒ…å›´è¡¨ç¤ºæŠŠç»ˆç»“ç¬¦ å’Œ/æˆ– éç»ˆç»“ç¬¦ç»„æˆä¸€ç»„ï¼Œå°±åƒ (MUL | DIV)(...)*åˆ†ç»„ä¸­çš„å†…å®¹è¢«åŒ¹é… 0 æˆ– å¤šæ¬¡ã€‚è¯­æ³•é€šè¿‡è§£é‡Šå¯ä»¥ç»„æˆä»€ä¹ˆæ ·çš„å¥å­æ¥å®šä¹‰ä¸€é—¨è¯­è¨€ã€‚é€šè¿‡è¯­æ³•æ´¾ç”Ÿå‡ºç®—æœ¯è¡¨è¾¾å¼çš„æ–¹å¼ä¸ºï¼šé¦–å…ˆä»å¼€å§‹ç¬¦å· expr å¼€å§‹ï¼Œç„¶ååå¤åœ°ä½¿ç”¨æ‰€åŒ…å«çš„éç»ˆç»“ç¬¦çš„è§„åˆ™æ›¿æ¢è¯¥éç»ˆç»“ç¬¦ï¼Œ ç›´åˆ°ç”Ÿæˆä¸€ä¸ªåªåŒ…å«ç»ˆç»“ç¬¦çš„å¥å­ã€‚è¯­æ³•èƒ½ç»„æˆçš„å¥å­æ„æˆäº†ä¸€é—¨è¯­è¨€ã€‚ä¸‹é¢ä¸¾ä¾‹è¯´æ˜ï¼šä¾‹1ï¼Œä¸‹é¢æ˜¯è¯­æ³•å¦‚ä½•æ´¾ç”Ÿå‡ºè¡¨è¾¾å¼ 3:ä¾‹2ï¼Œä¸‹é¢æ˜¯è¯­æ³•å¦‚ä½•æ´¾ç”Ÿå‡ºè¡¨è¾¾å¼ 3 * 7:ä¾‹3ï¼Œä¸‹é¢æ˜¯è¯­æ³•å¦‚ä½•æ´¾ç”Ÿå‡ºè¡¨è¾¾å¼ 3 * 7 / 2:å°†è¯­æ³•å˜æˆä»£ç ä¸‹é¢æ˜¯ä¸€äº›æˆ‘ä»¬åœ¨æŠŠè¯­æ³•è½¬åŒ–æˆæºä»£ç æ—¶ä¼šç”¨åˆ°çš„==å››ä¸ªå‡†åˆ™==ã€‚æŒ‰ç…§è¿™äº›å‡†åˆ™ï¼Œä½ çœŸçš„å°±å¯ä»¥æŠŠè¯­æ³•ç¿»è¯‘æˆä¸€ä¸ªå¯å·¥ä½œçš„ parser:å¯¹äºè¯­æ³•ä¸­å®šä¹‰çš„æ¯ä¸ªè§„åˆ™ Rï¼Œå°†å®ƒåšæˆä¸€ä¸ªæœ‰ç›¸åŒåå­—çš„æ–¹æ³•ï¼Œå¯¹è¯¥è§„åˆ™çš„å¼•ç”¨å°±å˜æˆäº†ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼šR()ã€‚è¯¥æ–¹æ³•çš„æ–¹æ³•ä½“éµå¾ªè¯¥è§„åˆ™çš„æ­¥éª¤ï¼Œè¿‡ç¨‹ä¸­ä½¿ç”¨ç›¸åŒçš„å‡†åˆ™ã€‚å¤šé€‰ä¸€ (a1|a2|aN) å˜æˆ if-elif-else è¯­å¥å¯é€‰ç»„ (...)* å˜æˆä¸€ä¸ªå¯ä»¥æ‰§è¡Œ 0 æˆ–å¤šæ¬¡çš„ while å¾ªç¯ï¼ˆcan loop over zero or more timesï¼‰æ¯ä¸ª Token è®°ä¸º T å˜æˆä¸€ä¸ª eat æ–¹æ³•è°ƒç”¨: eat(T). eat æ–¹æ³•çš„å·¥ä½œæ˜¯ å½“å®ƒåŒ¹é…åˆ°å½“å‰çš„å‘å‰çœ‹ (lookahead) token å°±æ¶ˆè€—æ‰å®ƒï¼Œç„¶åä» lexer ä¸­å¾—åˆ°ä¸€ä¸ªæ–° token å¹¶å°†å®ƒèµ‹å€¼ç»™å†…éƒ¨å˜é‡ current_token.è¿™äº›å‡†åˆ™çœ‹ä¸Šå»åƒè¿™æ ·ï¼šè®©æˆ‘ä»¬ç»§ç»­å¹¶éµå¾ªä¸Šè¿°å‡†åˆ™æŠŠæˆ‘ä»¬çš„è¯­æ³•è½¬åŒ–ä¸ºä»£ç ã€‚æˆ‘ä»¬çš„è¯­æ³•ä¸­æœ‰ä¸¤æ¡è§„åˆ™ï¼š expr å’Œ factor. æˆ‘ä»¬ä» factor è§„åˆ™ï¼ˆç”Ÿæˆå¼ï¼‰å¼€å§‹ã€‚ æ ¹æ®å‡†åˆ™ï¼Œéœ€è¦æ–°å»ºä¸€ä¸ªåä¸º factor çš„æ–¹æ³•ï¼ˆå‡†åˆ™1)ï¼Œå®ƒè°ƒç”¨äº†ä¸€æ¬¡ eat æ–¹æ³•æ¥æ¶ˆè€—INTEGER token ï¼ˆå‡†åˆ™4)ï¼š12def factor(self): #factorå°±æ˜¯æŒ‡çš„integerå‹æ•°å€¼ self.eat(INTEGER)expr è§„åˆ™å˜æˆäº† expr æ–¹æ³•ï¼ˆè¿˜æ˜¯å‡†åˆ™1ï¼‰ã€‚è§„åˆ™ä½“(body)å¼€å§‹çš„ factor å¼•ç”¨ å˜æˆäº†å¯¹ factor() æ–¹æ³•çš„è°ƒç”¨ã€‚å¯è¡Œç»„ (...)* å˜æˆäº†ä¸€ä¸ª while å¾ªç¯ï¼Œå¤šé€‰ä¸€ (MUL|DIV) å˜æˆäº†ä¸€ä¸ª if-elif-else è¯­å¥ã€‚æŠŠè¿™äº›ç‰‡æ®µåˆå¹¶åœ¨ä¸€èµ·å°±å¾—åˆ°äº†ä¸‹é¢çš„expr æ–¹æ³•ï¼š1234567891011def expr(self): self.factor() #è¯­æ³•å‡†åˆ™ä¸­çš„ç¬¬ä¸€ä¸ªfactor while self.current_token.type in (MUL, DIV): token = self.current_token if token.type == MUL: self.eat(MUL) self.factor() elif token.type == DIV: self.eat(DIV) self.factor()åŸä½œè€…å°†æœ¬æ–‡çš„ä»£ç æ”¾åœ¨äº†æ–‡ä»¶ parser.py ä¸­ï¼Œå®ƒåŒ…å«äº† lexer å’Œ parser ä½†æ²¡æœ‰interpreterã€‚ä½ å¯ä»¥ç›´æ¥ä» GitHubä¸‹è½½å¹¶å°è¯•ä¸€ä¸‹ã€‚å®ƒåŒ…å«æœ‰ä¸€ä¸ª interpreter æç¤ºç¬¦ï¼Œä½ å¯ä»¥è¾“å…¥è¡¨è¾¾å¼æ¥æŸ¥çœ‹å®ƒæ˜¯å¦åˆæ³•ï¼Œå³æŸ¥çœ‹æ ¹æ®è¯­æ³•å»ºç«‹çš„ parser æ˜¯å¦å¯ä»¥è¯†åˆ«å‡ºè¡¨è¾¾å¼ã€‚ä¸‹é¢æ˜¯åœ¨æˆ‘ç¬”è®°æœ¬ä¸Šçš„ä¸€æ¬¡å°è¯•ï¼š123456789101112131415161718192021$ python parser.pycalc&gt; 3calc&gt; 3 * 7calc&gt; 3 * 7 / 2calc&gt; 3 *Traceback (most recent call last): File \"parser.py\", line 155, in &lt;module&gt; main() File \"parser.py\", line 151, in main parser.parse() File \"parser.py\", line 136, in parse self.expr() File \"parser.py\", line 130, in expr self.factor() File \"parser.py\", line 114, in factor self.eat(INTEGER) File \"parser.py\", line 107, in eat self.error() File \"parser.py\", line 97, in error raise Exception('Invalid syntax')Exception: Invalid syntaxè¿™é‡Œå†æ¬¡æèµ·è¯­æ³•å›¾ã€‚è¿™æ˜¯ç›¸åŒçš„ expr è§„åˆ™ï¼ˆä¹Ÿå«ï¼Œäº§ç”Ÿå¼(production)ï¼‰å¯¹åº”çš„å¥æ³•å›¾ï¼šä¸‹é¢æ˜¯åŸä½œè€…çš„å…³äºæœ¬æ–‡çš„æºç ã€‚ä¸‹é¢æ˜¯å¯ä»¥å¤„ç†åŒ…å«ä»»æ„æ•°é‡æ•´æ•° ä¹˜é™¤ï¼ˆæ•´æ•°é™¤æ³•ï¼‰æ“ä½œçš„åˆæ³•çš„ç®—æœ¯è¡¨è¾¾å¼çš„è®¡ç®—å™¨ä»£ç ã€‚è¿™é‡ŒæŠŠè¯æ³•åˆ†æå™¨é‡æ„ åˆ°äº†ä¸€ä¸ªå•ç‹¬çš„ç±» Lexer ä¸­ï¼Œå¹¶è®© Interpreter ç±»ä½¿ç”¨ Lexer å®ä¾‹åšä¸ºå‚æ•°ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156# Token types## EOF (end-of-file) token is used to indicate that# there is no more input left for lexical analysisINTEGER, MUL, DIV, EOF = 'INTEGER', 'MUL', 'DIV', 'EOF'class Token(object): def __init__(self, type, value): # token type: INTEGER, MUL, DIV, or EOF self.type = type # token value: non-negative integer value, '*', '/', or None self.value = value def __str__(self): \"\"\"String representation of the class instance. Examples: Token(INTEGER, 3) Token(MUL, '*') \"\"\" return 'Token(&#123;type&#125;, &#123;value&#125;)'.format( type=self.type, value=repr(self.value) ) def __repr__(self): return self.__str__()#è¯æ³•åˆ†æclass Lexer(object): def __init__(self, text): # client string input, e.g. \"3 * 5\", \"12 / 3 * 4\", etc self.text = text # self.pos is an index into self.text self.pos = 0 self.current_char = self.text[self.pos] def error(self): raise Exception('Invalid character') def advance(self): \"\"\"Advance the `pos` pointer and set the `current_char` variable.\"\"\" self.pos += 1 if self.pos &gt; len(self.text) - 1: self.current_char = None # Indicates end of input else: self.current_char = self.text[self.pos] def skip_whitespace(self): while self.current_char is not None and self.current_char.isspace(): self.advance() def integer(self): \"\"\"Return a (multidigit) integer consumed from the input.\"\"\" result = '' while self.current_char is not None and self.current_char.isdigit(): result += self.current_char self.advance() return int(result) #ä¸å¦‚å«åšï¼šget_token_and_next def get_next_token(self): \"\"\"Lexical analyzer (also known as scanner or tokenizer) This method is responsible for breaking a sentence apart into tokens. One token at a time. \"\"\" while self.current_char is not None: if self.current_char.isspace(): self.skip_whitespace() continue if self.current_char.isdigit(): return Token(INTEGER, self.integer()) if self.current_char == '*': self.advance() return Token(MUL, '*') if self.current_char == '/': self.advance() return Token(DIV, '/') self.error() return Token(EOF, None)class Interpreter(object): def __init__(self, lexer): self.lexer = lexer # set current token to the first token taken from the input self.current_token = self.lexer.get_next_token() def error(self): raise Exception('Invalid syntax') def eat(self, token_type): # compare the current token type with the passed token # type and if they match then \"eat\" the current token # and assign the next token to the self.current_token, # otherwise raise an exception. if self.current_token.type == token_type: self.current_token = self.lexer.get_next_token() else: self.error() def factor(self): \"\"\"Return an INTEGER token value. factor : INTEGER \"\"\" token = self.current_token self.eat(INTEGER) return token.value def expr(self): \"\"\"Arithmetic expression parser / interpreter. expr : factor ((MUL | DIV) factor)* factor : INTEGER \"\"\" result = self.factor() while self.current_token.type in (MUL, DIV): token = self.current_token if token.type == MUL: self.eat(MUL) result = result * self.factor() elif token.type == DIV: self.eat(DIV) result = result / self.factor() return resultdef main(): while True: try: # To run under Python3 replace 'raw_input' call # with 'input' text = raw_input('calc&gt; ') except EOFError: break if not text: continue lexer = Lexer(text) interpreter = Interpreter(lexer) result = interpreter.expr() print(result)if __name__ == '__main__': main()å°†ä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º calc4.py ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» GitHub ä¸Šä¸‹è½½ã€‚å’Œä»¥å¾€ä¸€æ ·ï¼Œè‡ªå·±å° è¯•ä¸€ä¸‹ï¼Œç¡®è®¤å®ƒèƒ½å·¥ä½œã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Let's Build A Simple Interpreter","slug":"Let-s-Build-A-Simple-Interpreter","permalink":"https://longlongqin.github.io/tags/Let-s-Build-A-Simple-Interpreter/"}]},{"title":"Letâ€™s Build A Simple Interpreter 3","slug":"å­¦ä¹ ç¬”è®°/Let's Build A Simple Interpreter/LSBASI-3","date":"2020-03-10T06:28:09.000Z","updated":"2020-03-24T05:48:57.917Z","comments":true,"path":"archives/f957.html","link":"","permalink":"https://longlongqin.github.io/archives/f957.html","excerpt":"","text":"åŸæ–‡é“¾æ¥ï¼šhttps://ruslanspivak.com/lsbasi-part3/ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»å­¦ä¹ äº†å¦‚ä½•è§£é‡Šæ•´æ•°ç›¸åŠ æˆ–ç›¸å‡çš„ç®—æœ¯è¡¨è¾¾å¼å¦‚â€œ7+3â€æˆ–â€œ12-9â€ã€‚ä»Šå¤©æˆ‘ ä¼šèŠä¸€èŠæ€æ ·è§£æï¼ˆè¯†åˆ«ï¼‰å¹¶è§£é‡ŠåŒ…å«å¤šä½æ•´æ•°çš„åŠ å‡æ³•çš„ç®—æœ¯è¡¨è¾¾å¼ï¼Œå¦‚â€œ7 - 3 + 2 - 1â€ã€‚è¯­æ³•å›¾æœ¬æ–‡ä¸­çš„ç®—æœ¯è¡¨è¾¾å¼å¯ä»¥ç”¨å¦‚ä¸‹çš„è¯­æ³•å›¾(syntax diagram)è¡¨ç¤ºï¼šè¯­æ³•å›¾(syntax diagram)ï¼šå°±æ˜¯ç¨‹åºè¯­è¨€å¥æ³•è§„åˆ™çš„å›¾å½¢è¡¨ç¤ºã€‚åŸºæœ¬ä¸Šï¼Œè¯­æ³•å›¾ä»è§†è§‰ä¸Šå‘ä½ å±•ç¤ºäº†åœ¨ä½ çš„ç¨‹åºè¯­è¨€ä¸­å“ªäº›è¯­å¥æ˜¯å…è®¸çš„å“ªäº›æ˜¯ä¸å…è®¸çš„ã€‚å¥æ³•å›¾å¾ˆå®¹æ˜“é˜…è¯»ï¼šåªéœ€è·Ÿéšç®­å¤´æ‰€æŒ‡ç¤ºçš„è·¯å¾„å³å¯ã€‚ä¸€äº›è·¯å¾„è¡¨ç¤ºé€‰æ‹©ï¼Œä¸€äº›è·¯å¾„è¡¨ç¤ºå¾ªç¯ã€‚ä½ å¯ä»¥è¿™æ ·é˜…è¯»ä¸Šé¢çš„å¥æ³•å›¾ï¼šä¸€ä¸ª term åé¢å¯ä»¥è·Ÿä¸€ä¸ªåŠ å·æˆ–å‡å·ï¼Œåé¢åˆè·Ÿå¦ä¸€ä¸ª termï¼Œ ç›¸åº”åœ°å®ƒåé¢åˆå¯ä»¥è·Ÿä¸€ä¸ªåŠ å·æˆ–å‡å·ï¼Œåé¢åˆè·Ÿå¦ä¸€ä¸ª termï¼Œå¦‚æ­¤å¾ªç¯ã€‚ä½ å·²ç»è¯»æ‡‚äº† è¿™å¹…å›¾ç‰‡ï¼ŒçœŸçš„ã€‚ä½ å¯èƒ½ä¼šç–‘æƒ‘ä»€ä¹ˆæ˜¯â€œtermâ€ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­â€œtermâ€å°±æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚è¯­æ³•å›¾çš„ç”¨é€”æœ¬æ–‡ä¸­çš„è¯­æ³•å›¾ä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼šä»å›¾å½¢ä¸Šè¡¨ç¤ºä¸€ä¸ªç¼–ç¨‹è¯­è¨€çš„æ ‡å‡†ï¼ˆè¯­æ³•ï¼‰ã€‚ç”¨æ¥å¸®åŠ©ä½ ç¼–å†™parser(è¯­æ³•åˆ†æå™¨)ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢ç®€å•çš„è§„åˆ™å°†å›¾æ˜ å°„åˆ°ä»£ç ã€‚è¯­æ³•åˆ†æå™¨ä½ å·²ç»å­¦è¿‡äº†ä» token æµä¸­è¯†åˆ«ç»„åˆçš„è¿‡ç¨‹å« parsing. ä¸”è§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ä¸­æ‰§è¡Œè¿™éƒ¨åˆ†ä»»åŠ¡çš„å« parser. parsingä¹Ÿè¢«ç§°ä¸º è¯­æ³•åˆ†æ (syntax analysis)ï¼Œparserä¹Ÿç›¸åº”åœ°è¢«ç§°ä¸ºè¯­æ³•åˆ†æå™¨(syntax analyzer)ï¼Œä½ åº”è¯¥ä¹ŸçŒœåˆ°è¿™ç‚¹äº†ã€‚æ ¹æ®ä¸Šé¢çš„å¥æ³•å›¾ï¼Œä¸‹é¢æ‰€æœ‰çš„ç®—æœ¯è¡¨è¾¾å¼éƒ½æ˜¯åˆæ³•çš„ï¼š33 + 47 - 3 + 2 - 1å› ä¸ºåœ¨ä¸åŒçš„ç¨‹åºè¯­è¨€ä¸­ç®—æœ¯è¡¨è¾¾å¼çš„å¥æ³•è§„åˆ™éƒ½ç›¸ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Python shell æ¥ â€œæµ‹è¯•â€æˆ‘ä»¬çš„å¥æ³•å›¾ã€‚å¯åŠ¨ Python shell è‡ªå·±è¯•ä¸€ä¸‹ï¼š123456&gt;&gt;&gt; 33&gt;&gt;&gt; 3 + 47&gt;&gt;&gt; 7 - 3 + 2 - 15ä¸€åˆ‡æ­£å¸¸ã€‚ä½†è¡¨è¾¾å¼â€œ3+â€å°±ä¸æ˜¯åˆæ³•çš„ç®—æœ¯è¡¨è¾¾å¼ï¼Œå› ä¸ºæ ¹æ®å¥æ³•å›¾åŠ å·åé¢å¿…é¡»è·Ÿä¸€ä¸ª termï¼ˆæ•´æ•°ï¼‰ï¼Œ å¦åˆ™å°±æ˜¯å¥æ³•é”™è¯¯ã€‚ä¸¤æ¬¡å¯åŠ¨ Python shell è‡ªå·±æŸ¥çœ‹ç»“æœï¼š12345&gt;&gt;&gt; 3 + File \"&lt;stdin&gt;\", line 1 3 + ^SyntaxError: invalid syntaxä½¿ç”¨ Python shell æ¥åšæµ‹è¯•æ˜¯æŒºä¸é”™çš„ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜æ˜¯æŠŠä¸Šé¢çš„å¥æ³•å›¾æ˜ å°„åˆ°ä»£ç ï¼Œç”¨æˆ‘ ä»¬è‡ªå·±çš„è§£é‡Šå™¨æ¥æµ‹è¯•ï¼Œæ˜¯å§ï¼Ÿä»å‰é¢çš„æ–‡ç« ï¼ˆç¬¬ä¸€éƒ¨åˆ†å’Œç¬¬äºŒéƒ¨åˆ†ï¼‰ä½ çŸ¥é“äº† parser å’Œ interpreter éƒ½åœ¨ expr æ–¹ æ³•ä¸­ã€‚å†é‡å¤ä¸€ä¸‹ï¼Œparseråªæ˜¯è¯†åˆ«å‡ºç»“æ„å¹¶ä¿è¯å®ƒç¬¦åˆæŸäº›è§„èŒƒï¼Œinterpreteråœ¨parseræˆåŠŸè¯†åˆ«åå¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µå±•ç¤ºäº†ä¸å¥è¯­æ³•å›¾ç›¸å¯¹åº”çš„ parser çš„ä»£ç ã€‚è¯­æ³•å›¾ä¸­çš„çŸ©å½¢ç›’å­å˜æˆäº†è§£æä¸€ä¸ªæ•´æ•°çš„ term æ–¹æ³•ï¼Œ expr æ–¹æ³•åˆ™åªæ˜¯è·Ÿéšäº†è¯­æ³•å›¾çš„æŒ‡ç¤ºï¼š123456789101112131415def term(self): self.eat(INTEGER)def expr(self): # set current token to the first token taken from the input self.current_token = self.get_next_token() self.term() while self.current_token.type in (PLUS, MINUS): token = self.current_token if token.type == PLUS: self.eat(PLUS) self.term() elif token.type == MINUS: self.eat(MINUS) self.term()å¯ä»¥çœ‹åˆ° expr æ–¹æ³•é¦–å…ˆè°ƒç”¨äº† term æ–¹æ³•ã€‚ç„¶åæ˜¯ä¸€ä¸ªå¯èƒ½æ‰§è¡Œ 0 æˆ–å¤šæ¬¡çš„å¾ªç¯ã€‚ åœ¨å¾ªç¯ä¸­ï¼Œparser æ ¹æ® token ï¼ˆæ˜¯åŠ å·è¿˜æ˜¯å‡å·ï¼‰æ¥åšé€‰æ‹©ã€‚Parser æœ¬èº«å¹¶ä¸è§£é‡Šä»»ä½•äº‹ï¼šå¦‚æœè¯†åˆ«åˆ°ä¸€ä¸ªè¡¨è¾¾å¼å®ƒå°±æ²‰é»˜ï¼Œå¦åˆ™å°±æŠ›å‡ºä¸€ä¸ªå¥æ³•é”™è¯¯ã€‚ è®©æˆ‘ä»¬ä¿®æ”¹ expr æ–¹æ³•æ¥æ·»åŠ  interpreter ä»£ç ï¼š12345678910111213141516171819202122def term(self): \"\"\"Return an INTEGER token value\"\"\" token = self.current_token self.eat(INTEGER) return token.valuedef expr(self): \"\"\"Parser / Interpreter\"\"\" # set current token to the first token taken from the input self.current_token = self.get_next_token() result = self.term() while self.current_token.type in (PLUS, MINUS): token = self.current_token if token.type == PLUS: self.eat(PLUS) result = result += self.term() elif token.type == MINUS: self.eat(MINUS) result = result - self.term() return resultå› ä¸º interpreter éœ€è¦å¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œæ‰€ä»¥ term æ–¹æ³•è¢«ä¿®æ”¹ä¸ºè¿”å›ä¸€ä¸ªæ•´æ•°å€¼ï¼Œ expr æ–¹æ³•è¢«ä¿®æ”¹ä¸ºåœ¨é€‚å½“çš„åœ°æ–¹æ‰§è¡ŒåŠ å‡æ³•å¹¶è¿”å›è§£é‡Šçš„ç»“æœã€‚è®©æˆ‘ä»¬ç»§ç»­å‰è¿›ï¼Œæ¥çœ‹ä¸€ä¸‹ç°åœ¨è§£é‡Šå™¨çš„å®Œæ•´ä»£ç æ€ä¹ˆæ ·ï¼Ÿä¸‹é¢æ˜¯ä½ æ–°ç‰ˆè®¡ç®—å™¨çš„æºä»£ç ï¼Œå®ƒå¯ä»¥å¤„ç†åŒ…å«ä»»æ„å¤šä¸ªæ•´æ•°çš„åŠ å‡æ“ä½œçš„åˆæ³•ç®—æœ¯è¡¨è¾¾å¼ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128# Tokençš„ç±»å‹ï¼š'INTEGER', 'PLUS', 'MINUS', 'EOF'# Tokençš„å€¼(value)ï¼šæ•´æ•°ï¼Œ'+', '-', or NoneINTEGER, PLUS, MINUS, EOF = 'INTEGER', 'PLUS', 'MINUS', 'EOF'#å®šä¹‰Tokenç±»class Token(object): def __init__(self, type, value): self.type = type self.value = value def __str__(self): return 'Token( &#123;type&#125;, &#123;value&#125; ) ' .format( type = self.type , value = repr(self.value) #reprä¸ä¸‹é¢çš„__repr__ä¸ä¸€æ ·ï¼Œä¸‹é¢çš„æ˜¯é‡æ„çš„ã€‚ ) def __repr__(self): return self.__str__()class Interpreter(object): def __init__(self, text): self.text = text self.pos = 0 self.currrent_token = None #æ­¤æ—¶è¿˜æ²¡æœ‰tokenå®ä¾‹æ‰€ä»¥æ˜¯None self.current_char =self.text[self.pos] ########################################################## # Lexer code # ########################################################## def error(self): raise Exception('Invalid syntax') def advance(self): self.pos += 1 if self.pos &gt; len(self.text) -1 : self.current_char =None else: self.current_char = self.text[self.pos] def skip_whitespace(self): while self.current_char is not None and self.current_char.isspace(): self.advance() def integer(self): result = '' while self.current_char is not None and self.current_char.isdigit(): result += self.current_char self.advance() return int(result) #è¯æ³•åˆ†æ(åˆ†æä¹‹åå½¢æˆä¸€ä¸ªä¸ªçš„token) def get_next_token(self): while self.current_char is not None: if self.current_char.isspace(): self.skip_whitespace() continue #è¯†åˆ«æ•´æ•° if self.current_char.isdigit(): return Token(INTEGER, self.integer() ) # è¯†åˆ«æ˜¯å¦ä¸º+ - è¿ç®—ç¬¦å· if self.current_char == '+': self.advance() return Token(PLUS, '+') if self.current_char == '-': self.advance() return Token(MINUS, '-') self.error() return Token(EOF, None) ########################################################## # Parser / Interpreter code # ########################################################## #æ¯”è¾ƒå½“å‰çš„tokençš„ç±»å‹ä¸ä¼ æ¥çš„ç±»å‹æ˜¯å¦ç›¸åŒ def eat(self, token_type): if self.currrent_token.type == token_type: self.currrent_token = self.get_next_token() else: self.error() #è¿”å›ä¸€ä¸ªæ•´å‹çš„tokençš„value def term(self): token = self.currrent_token self.eat(INTEGER) return token.value def expr(self): self.currrent_token = self.get_next_token() result = self.term() while self.currrent_token.type in (PLUS , MINUS): #å¾ªç¯æ˜¯ä¸ºäº†ç®—ä¸æ­¢ä¸€æ¬¡çš„åŠ orå‡æ³•ï¼Œä»è€Œè¾¾åˆ°æ··åˆè¿ç®—çš„ç›®çš„ token = self.currrent_token if token.type == PLUS: self.eat(PLUS) result = result + self.term() elif token.type == MINUS: self.eat(MINUS) result = result - self.term() return result def main(): while True: try: # To run under Python3 replace 'raw_input' call # with 'input' text = input('calc&gt; ') except EOFError: break if not text: continue interpreter = Interpreter(text) result = interpreter.expr() print(result)if __name__ == '__main__': main()å°†ä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º calc3.py ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» GitHub ä¸Šä¸‹è½½ã€‚è¯•ä¸€è¯•ã€‚äº²çœ¼çœ‹ä¸€ä¸‹ å®ƒå¯ä»¥å¤„ç†ä¹‹å‰å±•ç¤ºç»™ä½ çš„å¥æ³•å›¾ä¸­åŒ…å«çš„ç®—æœ¯è¡¨è¾¾å¼è§„åˆ™ã€‚æ¢³ç†è¾“å…¥å­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼ˆå¦‚â€œ2+8-6+1â€)ï¼Œå­˜å…¥å˜é‡textä¸­å°†textè¿›è¡Œè¯æ³•åˆ†æï¼Œæ‰§è¡Œæ­¤åŠŸèƒ½çš„æ˜¯get_next_token()å‡½æ•°ï¼Œè¯æ³•åˆ†æä¼šç”Ÿæˆä¸€ä¸ªä¸ªçš„tokenç„¶åå¯¹è¯æ³•åˆ†æä¹‹åçš„tokenæŒ‰ç…§è§„å®šçš„è¯­æ³•ï¼Œè¿›è¡Œè¯­æ³•åˆ†æï¼Œç›¸åº”å‡½æ•°ä¸ºexpr()æœ€åè¾“å‡ºç»“æœ","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Let's Build A Simple Interpreter","slug":"Let-s-Build-A-Simple-Interpreter","permalink":"https://longlongqin.github.io/tags/Let-s-Build-A-Simple-Interpreter/"}]},{"title":"3ã€å¸ƒå°”é€»è¾‘å’Œé€»è¾‘é—¨","slug":"å­¦ä¹ ç¬”è®°/ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹ç¬”è®°/3ã€å¸ƒå°”é€»è¾‘å’Œé€»è¾‘é—¨","date":"2020-03-09T17:01:26.000Z","updated":"2020-03-17T08:46:49.337Z","comments":true,"path":"archives/87ef.html","link":"","permalink":"https://longlongqin.github.io/archives/87ef.html","excerpt":"è®¡ç®—æœºæœ€æ—©çš„æ˜¯æœºç”µè®¾å¤‡ï¼Œä¸€èˆ¬ä½¿ç”¨åè¿›åˆ¶è®¡æ•°ï¼Œæ¯”å¦‚ç”¨é½¿è½®æ•°æ¥ä»£è¡¨åè¿›åˆ¶ã€‚ä½†æ˜¯å…¶å®åªç”¨å¼€/å…³ä¸¤ç§çŠ¶æ€å·²ç»è¶³å¤Ÿè¡¨ç¤ºä¿¡æ¯äº†ï¼Œå°†å…¶ç§°ä¸ºäºŒè¿›åˆ¶ï¼ˆBinaryï¼‰ã€‚","text":"è®¡ç®—æœºæœ€æ—©çš„æ˜¯æœºç”µè®¾å¤‡ï¼Œä¸€èˆ¬ä½¿ç”¨åè¿›åˆ¶è®¡æ•°ï¼Œæ¯”å¦‚ç”¨é½¿è½®æ•°æ¥ä»£è¡¨åè¿›åˆ¶ã€‚ä½†æ˜¯å…¶å®åªç”¨å¼€/å…³ä¸¤ç§çŠ¶æ€å·²ç»è¶³å¤Ÿè¡¨ç¤ºä¿¡æ¯äº†ï¼Œå°†å…¶ç§°ä¸ºäºŒè¿›åˆ¶ï¼ˆBinaryï¼‰ã€‚åœ¨è®¡ç®—æœºä¸­ï¼Œå½“ç”µæµæµè¿‡æ—¶ï¼Œä¸ºé—­åˆçŠ¶æ€ï¼Œè¡¨ç¤ºtrueï¼ˆ1ï¼‰ï¼Œå½“æ²¡æœ‰ç”µæµæµè¿‡æ—¶ï¼Œä¸ºæ–­å¼€çŠ¶æ€ï¼Œè¡¨ç¤ºfalseï¼ˆ0ï¼‰ã€‚ä½†æ˜¯å…¶å®æ™¶ä½“ç®¡å¯ä»¥ä¸åªæ˜¯å¼€/å…³çŠ¶æ€ï¼Œè¿˜å¯ä»¥è®©ä¸åŒå¤§å°çš„ç”µæµé€šè¿‡ï¼Œä¸€äº›æ—©æœŸç”µå­è®¡ç®—æœºï¼Œé€šè¿‡å¯¹ä¸åŒç”µæµå¤§å°è¿›è¡Œåˆ’åˆ†ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰è¿›åˆ¶ã€äº”è¿›åˆ¶ç­‰ç­‰ã€‚ä½†é—®é¢˜æ˜¯ï¼ŒçŠ¶æ€è¶Šå¤šå°±è¶Šéš¾åŒºåˆ†ä¿¡å·ï¼Œå¦‚æœå­˜åœ¨ç”µå™ªéŸ³ï¼Œå¯èƒ½å°±ä¼šä½¿çŠ¶æ€ååˆ†æ··ä¹±ã€‚æ‰€ä»¥ä¸ºäº†è®©ä¿¡å·æ›´åŠ æ¸…æ™°ï¼Œå¯ä»¥åªä½¿ç”¨â€œå¼€â€å’Œâ€œå…³â€ä¸¤ç§çŠ¶æ€ã€‚å¦ä¸€ä¸ªä½¿ç”¨äºŒè¿›åˆ¶çš„åŸå› æ˜¯ï¼Œæœ‰ä¸€æ•´ä¸ªæ•°å­¦åˆ†æ”¯ä¸“é—¨å¤„ç†â€œçœŸâ€å’Œâ€œå‡â€ï¼Œå®ƒå·²è§£å†³äº†æ‰€æœ‰æ³•åˆ™å’Œè¿ç®—ï¼Œå³å¸ƒå°”ä»£æ•°ï¼ˆBoolean Algebraï¼‰ã€‚å¸ƒå°”ä»£æ•°ï¼ˆBoolean Algebraï¼‰ä¸é€»è¾‘é—¨åœ¨å¸ƒå°”ä»£æ•°ä¸­ï¼Œå˜é‡çš„å€¼æ˜¯trueå’Œfalseï¼Œèƒ½å¤Ÿå¯¹å…¶è¿›è¡Œé€»è¾‘æ“ä½œã€‚å¸ƒå°”ä»£æ•°ä¸­æœ‰ä¸‰ä¸ªåŸºæœ¬æ“ä½œï¼šNOTã€ANDå’ŒORã€‚NOT GATENOTï¼šæŠŠè¾“å‡ºç«¯ï¼ˆå°±åƒæ°´é¾™å¤´å·¦è¾¹éƒ¨åˆ†é€æ°´ï¼Œå®ƒé€ç”µï¼‰æ¥åœ¨ä¸Šé¢çš„ç”µæï¼Œå¦‚æœæ‰“å¼€è¾“å‡ºï¼Œç”µæµå°±å¯ä»¥æµè¿‡ï¼Œç„¶åâ€œæ¥åœ°â€ï¼Œè¾“å‡ºå°±æ²¡æœ‰ç”µæµï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯offã€‚å½“è¾“å…¥å…³é—­æ—¶ï¼Œç”µæµæ²¡æ³•æ¥åœ°ï¼Œå°±æµè¿‡äº†è¾“å‡ºï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯onã€‚å°±åƒæ˜¯æ°´é¾™å¤´ä¸€æ ·ï¼šâ€‹â€‹ NOTæ“ä½œï¼šæŠŠå¸ƒå°”å€¼è¿›è¡Œç¿»è½¬ï¼Œæ‰€ä»¥NOTæ“ä½œçš„çœŸå€¼è¡¨ä¸ºAND GATEANDï¼šä¸ºäº†å®ç°â€œAND é—¨â€ï¼Œæˆ‘ä»¬éœ€è¦2ä¸ªæ™¶ä½“ç®¡è¿æ¥åœ¨ä¸€èµ·ï¼Œè¿™æ ·æœ‰2ä¸ªè¾“å…¥å’Œ1ä¸ªè¾“å‡ºã€‚å¦‚æœåªæ‰“å¼€Aï¼Œä¸æ‰“å¼€Bï¼Œç”µæµæ— æ³•ç•™åˆ°outputï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯falseï¼›å¦‚æœåªæ‰“å¼€Bï¼Œä¸æ‰“å¼€Aï¼Œä¹Ÿä¸€æ ·ï¼Œç”µæµæ— æ³•ç•™åˆ°outputï¼›åªæœ‰å½“Aã€Béƒ½æ‰“å¼€äº†ï¼Œoutputæ‰æœ‰ç”µæµã€‚OR GATEORï¼šå®ç°OR é—¨é™¤äº†æ™¶ä½“ç®¡è¿˜éœ€è¦é¢å¤–çš„çº¿å°†ä¸¤ä¸ªæ™¶ä½“ç®¡(transistor)å¹¶è”èµ·æ¥ï¼Œå³å¾—åˆ°OR GATEå·¦ä¾§ç”µæä¸ºç”µæºï¼Œä¸‹æ–¹ä¸¤ä¸ªç”µæåˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªè¾“å…¥ï¼Œå³ä¾§ç”µæä¸ºè¾“å‡ºã€‚åªè¦ä»»æ„ä¸€ä¸ªè¾“å…¥å¼€å¯ï¼Œå°±èƒ½ä½¿å¾—ç”µæºå’Œè¾“å‡ºç”µææ¥é€šï¼Œä½¿å¾—è¾“å‡ºå¼€å¯ï¼›å½“ä¸¤ä¸ªè¾“å…¥éƒ½å…³é—­æ—¶ï¼Œå°±ä½¿å¾—ç”µæºå’Œè¾“å‡ºç”µæä¿æŒæ–­å¼€çŠ¶æ€ï¼Œä½¿å¾—è¾“å‡ºä¿æŒå…³é—­ã€‚ç”±æ­¤é€šè¿‡ä¸Šæ–¹çš„ä¸‰ä¸ªç»„ä»¶ï¼ˆNOTé—¨ã€ANDé—¨å’ŒORé—¨ï¼‰å¯ä»¥æ„å»ºå‡ºæ›´åŠ å¤æ‚çš„ç»„ä»¶ã€‚å¦ä¸€ä¸ªå¸¸è§çš„å¸ƒå°”æ“ä½œå«åšå¼‚æˆ–æ“ä½œã€‚XOR(å¼‚æˆ–)æˆ‘ä»¬æœ‰ä¸¤ä¸ªè¾“å…¥ï¼ŒAå’ŒBï¼Œè¿˜æœ‰ä¸€ä¸ªè¾“å‡ºã€‚å…ˆæ”¾ä¸€ä¸ªORé—¨ã€‚å› ä¸ºORå’ŒXORçš„é€»è¾‘è¡¨å¾ˆåƒï¼Œåªæœ‰ä¸€ä¸ªä¸åŒç‚¹å°±æ˜¯ï¼šå½“ä¸¤ä¸ªè¾“å…¥éƒ½ä¸ºtrueæ—¶ï¼ŒXORè¾“å‡ºfalseï¼Œè€ŒORè¾“å‡ºtrueã€‚é€šè¿‡å¯¹ANDæ“ä½œçœŸå€¼è¡¨å–åï¼Œå†å’ŒORæ“ä½œçœŸå€¼è¡¨è¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥å‘ç°ï¼Œç¬¬äºŒä¸‰è¡Œéƒ½ä¸ºtrueï¼Œè€Œç¬¬ä¸€å››è¡Œç»“æœä¸åŒï¼Œå› æ­¤åªè¦åœ¨è¿™ä¸¤ä¸ªç»“æœåé¢åŠ ä¸ªANDå°±èƒ½å¾—åˆ°XORçš„çœŸå€¼è¡¨ã€‚å°ç»“æ“ä½œçœŸå€¼è¡¨ï¼šå¯¹åº”çš„ç½—åŸºæœ¬è¡¨ç¤ºï¼š","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"è®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾","slug":"è®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾","permalink":"https://longlongqin.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E9%80%9F%E6%88%90%E8%AF%BE/"},{"name":"å¸ƒå°”é€»è¾‘å’Œé€»è¾‘é—¨","slug":"å¸ƒå°”é€»è¾‘å’Œé€»è¾‘é—¨","permalink":"https://longlongqin.github.io/tags/%E5%B8%83%E5%B0%94%E9%80%BB%E8%BE%91%E5%92%8C%E9%80%BB%E8%BE%91%E9%97%A8/"}]},{"title":"Letâ€™s Build A Simple Interpreter 2","slug":"å­¦ä¹ ç¬”è®°/Let's Build A Simple Interpreter/LSBASI-2","date":"2020-03-09T13:55:47.000Z","updated":"2020-03-23T09:50:36.594Z","comments":true,"path":"archives/d57d.html","link":"","permalink":"https://longlongqin.github.io/archives/d57d.html","excerpt":"If you learn only methods, youâ€™ll be tied to your methods. But if you learnprinciples, you can devise your own methods.","text":"If you learn only methods, youâ€™ll be tied to your methods. But if you learnprinciples, you can devise your own methods.åŸæ–‡åœ°å€ï¼šhttps://ruslanspivak.com/lsbasi-part2/è¿™æ˜¯ç¬¬äºŒä¸ªç‰ˆæœ¬V2.0ï¼Œç¬¬äºŒä¸ªç‰ˆæœ¬è¾ƒç¬¬ä¸€ä¸ªç‰ˆV1.0ï¼Œå®ƒå¯ä»¥åšåˆ°ï¼šå¤„ç†è¾“å…¥å­—ç¬¦ä¸²ä¸­ä»»ä½•ä½ç½®çš„ç©ºç™½ç¬¦å¤„ç†è¾“å…¥ä¸­çš„å¤šä½æ•°ä¸¤ä¸ªæ•´æ•°ç›¸å‡ï¼ˆç‰ˆæœ¬V1.0ä¸­åªæœ‰åŠ æ³•ï¼‰ä¸‹é¢å…ˆç»™å‡ºV2.0çš„æ–°ç‰ˆè®¡ç®—å™¨çš„æºç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152# Token types# EOF (end-of-file) token is used to indicate that# there is no more input left for lexical analysisINTEGER, PLUS, MINUS, EOF = 'INTEGER', 'PLUS', 'MINUS', 'EOF'class Token(): def __init__(self, type, value): # token type: 'INTEGER', 'PLUS', 'MINUS', or 'EOF' self.type = type # token value: non-negative integer value, '+', '-', or None self.value = value def __str__(self): \"\"\"String representation of class instance Examples: Token(INTEGER, 3) Token(PLUS, '+') \"\"\" return f'Token(&#123;self.type&#125;, &#123;self.value&#125;)' def __repr__(self): return self.__str__()##__repr__() ä¸ __str__() çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå‰è€…åœ¨äº¤äº’å¼æ­¥éª¤ä¸­æ˜¾ç¤ºç»“æœï¼Œåè€…åœ¨ print å‡½æ•°ä¸­æ˜¾ç¤ºç»“æœã€‚ class Interpreter(): def __init__(self, text): # client string input, e.g. \"3 + 5\", \"12 - 5\", etc self.text = text # self.pos is an index into self.text self.pos = 0 # current token instance self.current_token = None self.current_char = self.text[self.pos] def error(self): raise Exception('Error parsing input') ########æ–°å¢####### def advance(self): \"\"\"Advance the 'pos' pointer and set the 'current_char' variable.\"\"\" self.pos += 1 if self.pos &gt;= len(self.text): self.current_char = None # Indicates end of input else: self.current_char = self.text[self.pos] def skip_whitespace(self): while self.current_char is not None and self.current_char.isspace(): self.advance() def integer(self): \"\"\"Return a (multidigit) integer consumed from the input.\"\"\" result = '' while self.current_char is not None and self.current_char.isdigit(): result += self.current_char self.advance() return int(result) ##æ–°å¢ å®Œæ¯•##### def get_next_token(self): \"\"\"Lexical analyzer (also known as scanner or tokenizer) This method is responsible for breaking a sentence apart into tokens. \"\"\" while self.current_char is not None: if self.current_char.isspace(): self.skip_whitespace() continue if self.current_char.isdigit(): return Token(INTEGER, self.integer()) if self.current_char == '+': self.advance() return Token(PLUS, '+') if self.current_char == '-': self.advance() return Token(MINUS, '-') self.error() return Token(EOF, None) def eat(self, token_type): # compare the current token type with the passed token # type and if they match then \"eat\" the current token # and assign the next token to the self.current_token, # otherwise raise an exception. if self.current_token.type == token_type: self.current_token = self.get_next_token() else: self.error() def expr(self): \"\"\"Parser / Interpreter expr -&gt; INTEGER PLUS INTEGER expr -&gt; INTEGER MINUS INTEGER \"\"\" # set current token to the first token from the input self.current_token = self.get_next_token() # we expect the current token to be an integer left = self.current_token self.eat(INTEGER) # we expect the current token to be either a '+' or '-' op = self.current_token if op.type == PLUS: self.eat(PLUS) elif op.type == MINUS: self.eat(MINUS) else: self.error() # we expect the current token to be an integer right = self.current_token self.eat(INTEGER) # after the above call the self.current_token is set to # EOF token # at this point either the INTEGER PLUS INTEGER or # the INTEGER MINUS INTEGER sequence of tokens # has been successfully found and the method can just # return the result of adding or subtracting two integers, # thus effectively interpreting client input if op.type == PLUS: result = left.value + right.value elif op.type == MINUS: result = left.value - right.value else: self.error() return resultdef main(): while True: try: # To run under Python3 replace 'raw_input' call with 'input' text = input('calc&gt; ') except EOFError: break if not text: continue interpreter = Interpreter(text) result = interpreter.expr() print(result)if __name__ == '__main__': main()æŠŠä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º calc2.py ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» GitHub ä¸Šä¸‹è½½ã€‚è¯•ä¸€è¯•ã€‚äº²çœ¼çœ‹ä¸€ä¸‹ å®ƒå¯ä»¥æŒ‰é¢„æœŸè¿è¡Œï¼šå®ƒå¯ä»¥å¤„ç†è¾“å…¥ä¸­çš„ä»»ä½•ä½ç½®çš„ç©ºç™½ç¬¦ï¼›å®ƒæ¥å—å¤šä½æ•´æ•°ï¼Œé™¤äº†æ•´æ•°ç›¸ åŠ è¿˜å¯ä»¥å¤„ç†æ•´æ•°ç›¸å‡ã€‚ä¸‹é¢å¯ä»¥å†ç¬”è®°æœ¬ä¸Šæ¬¡å°è¯•ï¼š123456$ python calc2.pycalc&gt; 27 + 330calc&gt; 27 - 720calc&gt;ä¸ç¬¬ä¸€éƒ¨åˆ†ç›¸æ¯”ä»£ç çš„ä¸»è¦å˜åŒ–æœ‰ï¼šget_next_token æ–¹æ³•åšäº†ä¸€ç‚¹é‡æ„ã€‚å¢åŠ æŒ‡é’ˆ pos çš„é€»è¾‘è¢«é‡æ„åˆ°äº†æ–¹æ³• advance ä¸­ã€‚å¢åŠ äº†ä¸¤ä¸ªæ–¹æ³•ï¼š skip_whitespace ç”¨æ¥å¿½ç•¥ç©ºç™½ç¬¦ï¼Œ integer ç”¨æ¥å¤„ç†è¾“å…¥ä¸­çš„å¤šä½æ•´æ•°ã€‚expr æ–¹æ³•åœ¨ä¿®æ”¹åï¼Œé™¤äº†å¯ä»¥è¯†åˆ« INTEGER -&gt; PLUS -&gt; INTEGER è¿™ä¸ªç»„åˆ(phrase) ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¯†åˆ«INTEGER -&gt; MINUS -&gt; INTEGERã€‚è€Œä¸”åœ¨æˆåŠŸè¯†åˆ«ç›¸åº”çš„ç»„åˆåï¼Œä¹Ÿå¯ä»¥è¿›è¡Œç›¸åº”çš„åŠ å‡æ“ä½œã€‚åœ¨ç¬¬ä¸€éƒ¨åˆ†ä½ å°åˆ°äº†ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå³ token å’Œ è¯æ³•åˆ†æå™¨ ã€‚ä»Šå¤©æˆ‘æƒ³èŠä¸€èŠ lexeme ã€ parsing å’Œ parser ã€‚ä½ å·²ç»çŸ¥é“ token äº†ã€‚ä½†ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œéœ€è¦ä»‹ç»ä¸€ä¸‹ lexemeã€‚ä»€ä¹ˆæ˜¯ lexemeï¼Ÿ lexeme æ˜¯ç»„æˆ token çš„ä¸€ä¸ªå­—ç¬¦åºåˆ—ã€‚åœ¨ä¸‹é¢çš„å›¾ç‰‡ä¸­æ˜¯ä¸€äº› token å’Œ lexeme çš„ä¾‹å­ï¼Œ å¸Œæœ›å®ƒèƒ½æŠŠä¸¤è€…ä¹‹é—´çš„å…³ç³»è¡¨è¾¾æ¸…æ¥šï¼šç°åœ¨è¿˜è®°å¾— expr æ–¹æ³•å—ï¼Ÿæˆ‘ä»¥å‰è¯´è¿‡è¿™æ˜¯çœŸæ­£è§£é‡Šç®—æœ¯è¡¨è¾¾å¼çš„åœ°æ–¹ã€‚ä½†åœ¨è§£é‡Šä¸€ä¸ªè¡¨è¾¾å¼ä¹‹å‰ï¼Œä½ éœ€è¦çŸ¥é“å®ƒæ˜¯å“ªç§ç»„åˆï¼Œæ¯”å¦‚ç›¸åŠ æˆ–ç›¸å‡ã€‚è¿™æ˜¯ expr æ–¹æ³•æœ¬è´¨ä¸Šåšçš„äº‹ï¼š å®ƒä» get_next_token æ–¹æ³•å¾—åˆ°çš„ token æµä¸­æ‰¾åˆ°ç»“æ„ï¼Œç„¶åè§£é‡Šå®ƒè¯†åˆ«å‡ºçš„ç»„åˆï¼Œäº§ ç”Ÿç®—æœ¯è¡¨è¾¾å¼çš„ç»“æœã€‚åˆåˆ°äº†åšç»ƒä¹ çš„æ—¶é—´äº†ã€‚æ‰©å±•è®¡ç®—å™¨ä»¥å¤„ç†ä¸¤ä¸ªæ•´æ•°ç›¸ä¹˜æ‰©å±•è®¡ç®—å™¨ä»¥å¤„ç†ä¸¤ä¸ªæ•´æ•°ç›¸é™¤ä¿®æ”¹ä»£ç ä»¥ä½¿å®ƒå¯ä»¥è§£é‡ŠåŒ…å«ä»»æ„ä¸ªæ•°å­—çš„åŠ å‡æ“ä½œï¼Œå¦‚â€œ9 - 5 + 3 + 11â€æœ¬èŠ‚æ£€æµ‹ï¼šä»€ä¹ˆæ˜¯ lexemeï¼Ÿåœ¨ token æµä¸­æ‰¾åˆ°ç»“æ„çš„è¿‡ç¨‹å«ä»€ä¹ˆï¼Ÿæˆ–è€…è¿™ä¹ˆé—®ï¼Œåœ¨ token æµä¸­è¯†åˆ«å‡ºç‰¹å®šç»„åˆçš„è¿‡ç¨‹å«ä»€ä¹ˆï¼Ÿè§£é‡Šå™¨ï¼ˆç¼–è¯‘å™¨ï¼‰åš parsing å·¥ä½œçš„éƒ¨åˆ†å«ä»€ä¹ˆï¼Ÿæ¢³ç†ï¼šé¦–å…ˆè¾“å…¥ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¦‚â€œ3+9â€ï¼Œé€ç»™è§£é‡Šå™¨Interpreterå¼€å§‹å¯¹è¿™ä¸ªè¡¨è¾¾å¼æ‹†åˆ†æˆä¸€ä¸ªä¸ªçš„tokenï¼Œè¿™ä¸€æ­¥å«åšè¯æ³•åˆ†æï¼Œç”±è¯æ³•åˆ†æå™¨(lexical analyzer)æ¥å®Œæˆã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œå‡½æ•°get_next_tokenå°±ç›¸å½“äºè¯æ³•åˆ†æå™¨ã€‚è¯æ³•åˆ†æå™¨get_next_tokenå¤„ç†å®Œä¹‹åçš„æ˜¯ä¸€ä¸ªä¸ªçš„token(type , value)ç„¶åå¼€å§‹è¿›è¡Œè¯­æ³•åˆ†æï¼ˆç”±äºæœ¬æ–‡ä¸­åªå®ç°äº†åŠ æ³•ã€å‡æ³•ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œçš„è¯­æ³•åˆ†æå°±æ˜¯åˆ†æï¼šåŠ ã€å‡æ³•çš„è¡¨è¾¾å¼ã€‚æ‰§è¡Œè¿™ä¸ªæ­¥éª¤çš„æ˜¯exprå‡½æ•°ï¼Œå…¶ä¸­expr æ–¹æ³•ä½¿ç”¨äº†è¾…åŠ©æ–¹æ³•eatæ¥éªŒè¯ä¼ ç»™tokençš„ç±»å‹ä¸å½“å‰ç±»å‹æ˜¯å¦ç›¸åŒ¹é…ã€‚ä¸ç°æœ‰è¯­æ³•è§„åˆ™ï¼ˆå³ï¼ŒåŠ æ³•è§„åˆ™å’Œå‡æ³•è§„åˆ™ï¼‰ä¸åŒ¹é…ï¼Œeatå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è¯­æ³•åˆ†æå®Œæˆä¹‹åï¼Œå°±ç›´æ¥å¾—å‡ºç®—å¼çš„ç»“æœã€‚ï¼ˆè¿™ä¹Ÿå¾ˆç¬¦åˆè§£é‡Šå™¨çš„ç‰¹æ€§å˜›ï¼šè¾¹è§£é‡Šè¾¹æ‰§è¡Œï¼Œä¸ä¼šç”Ÿæˆç›®æ ‡ä»£ç ï¼‰å…¶ä»–çš„å‡½æ•°ï¼šInterpretererror(self)ï¼šå½“æœ‰é”™è¯¯çš„æ—¶å€™ï¼Œå°±è°ƒç”¨å®ƒadvance(self)ï¼šå¢åŠ æŒ‡é’ˆposçš„ä½œç”¨ï¼Œå³ï¼Œå°†æŒ‡å‘ä¸‹ä¸€ä¸ªtokenskip_whitespace(self)ï¼šè·³è¿‡ç©ºæ ¼ï¼ŒV2.0æ–°å¢åŠ çš„åŠŸèƒ½integer(self)ï¼šä¸ºäº†å¯ä»¥ç®—å¤šä½æ•°çš„åŠ å‡æ³•ã€‚è¿™é‡Œè¦æ³¨æ„ï¼šå¦‚3å’Œ233æ˜¯ä¸¤ä¸ªæ•´æ•°ç±»å‹çš„tokenï¼Œä½†æ˜¯å€¼å¾—æ³¨æ„çš„æ˜¯è¿™ç¯‡æ–‡ç« ä¸­çš„tokenæ˜¯æŒ‰ç…§è¾“å…¥çš„ä¸€ä¸²å­—ç¬¦ä¸²ï¼ˆå¦‚â€œ3+155â€ï¼‰æ¯ä¸€ä¸ªéƒ½å½“æˆä¸€ä¸ªtokenã€‚ä¹Ÿå°±æ˜¯è¯´æœ¬æ¥155æ˜¯ä¸€ä¸ªtokenï¼Œä½†æ˜¯ä»ç»†èŠ‚ä¸Šçœ‹ï¼Œåœ¨ä»£ç å®ç°ä¸­155æ˜¯è¢«å½“æˆäº†ä¸‰æ¬¡â€œtokenâ€ç„¶åç»è¿‡integerå‡½æ•°æ‰å½¢æˆäº†æœ€ç»ˆå½¢ä½“155è¿™ä¸ªtokenã€‚åœ¨æœ¬ç³»åˆ—çš„ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ä½ ä¼šæ‰©å±•ä½ çš„è®¡ç®—å™¨æ¥å¤„ç†æ›´å¤æ‚çš„ç®—æœ¯è¡¨è¾¾å¼ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Letâ€™s Build A Simple Interpreter","slug":"Letâ€™s-Build-A-Simple-Interpreter","permalink":"https://longlongqin.github.io/tags/Let%E2%80%99s-Build-A-Simple-Interpreter/"}]},{"title":"Letâ€™s Build A Simple Interpreter 1","slug":"å­¦ä¹ ç¬”è®°/Let's Build A Simple Interpreter/LSBASI-1","date":"2020-03-08T09:26:27.000Z","updated":"2020-04-19T14:38:29.546Z","comments":true,"path":"archives/427485bf.html","link":"","permalink":"https://longlongqin.github.io/archives/427485bf.html","excerpt":"ä¸ºä»€ä¹ˆè¦ä½ å­¦è§£é‡Šå™¨å’Œç¼–è¯‘å™¨ï¼Ÿè¿™é‡Œæœ‰ä¸‰æ¡ç†ç”±ã€‚","text":"ä¸ºä»€ä¹ˆè¦ä½ å­¦è§£é‡Šå™¨å’Œç¼–è¯‘å™¨ï¼Ÿè¿™é‡Œæœ‰ä¸‰æ¡ç†ç”±ã€‚è¦å†™ä¸€ä¸ªè§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ï¼Œä½ å¿…é¡»åŒæ—¶ç”¨åˆ°å¾ˆå¤šæŠ€æœ¯ã€‚ç¼–å†™ä¸€ä¸ªè§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ä¼šå¸®åŠ© ä½ æé«˜è¿™äº›æŠ€èƒ½å¹¶ä¸”æˆä¸ºä¸€ä¸ªæ›´å¥½çš„è½¯ä»¶å¼€å‘è€…ã€‚è€Œä¸”ï¼Œä½ å°†å­¦åˆ°çš„è¿™äº›æŠ€èƒ½åœ¨å¼€å‘ä»» ä½•è½¯ä»¶æ—¶éƒ½æœ‰å¯èƒ½ç”¨åˆ°ï¼Œè€Œä¸ä»…ä»…æ˜¯è§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ã€‚ä½ ç¡®å®æƒ³è¦çŸ¥é“è®¡ç®—æœºå¦‚ä½•å·¥ä½œã€‚ä¸€èˆ¬è§£é‡Šå™¨å’Œç¼–è¯‘å™¨çœ‹ä¸Šå»éƒ½åƒé­”æ³•ä¸€æ ·ã€‚ä½†ä½ ä¸åº” è¯¥å¯¹è¿™äº›é­”æ³•æ„Ÿåˆ°èˆ’æœã€‚ä½ æƒ³è¦æ­å¼€è§£é‡Šå™¨å’Œç¼–è¯‘å™¨çš„ç¥ç§˜é¢çº±ï¼Œç†è§£å®ƒä»¬å¦‚ä½•å·¥ä½œå¹¶ æ§åˆ¶æ‰€æœ‰ä¸€åˆ‡ã€‚ä½ æƒ³è¦åˆ›é€ è‡ªå·±çš„ç¼–ç¨‹è¯­è¨€æˆ–è€…é¢†åŸŸç‰¹å®šè¯­è¨€ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œä½ å°±éœ€è¦ä¸ºè¿™ä¸ªè¯­è¨€åˆ›å»º ä¸€ä¸ªè§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ã€‚æœ€è¿‘ï¼Œåˆ›å»ºæ–°è¯­è¨€å†åº¦å…´èµ·ã€‚ä½ å‡ ä¹æ¯å¤©éƒ½å¯ä»¥çœ‹åˆ°ä¸€é—¨æ–°è¯­è¨€ çš„è¯ç”Ÿï¼šElixir, Go, Rust ç­‰ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://ruslanspivak.com/lsbasi-part1/å¥½äº†ï¼Œä½†ä»€ä¹ˆæ˜¯è§£é‡Šå™¨å’Œç¼–è¯‘å™¨å‘¢ï¼Ÿè§£é‡Šå™¨ä¸ç¼–è¯‘å™¨è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨éƒ½æ˜¯â€œé«˜çº§è¯­è¨€ä¸æœºå™¨ä¹‹é—´çš„ç¿»è¯‘å®˜â€ã€‚éƒ½æ˜¯å°†ä»£ç ç¿»è¯‘æˆæœºå™¨å¯ä»¥æ‰§è¡Œçš„äºŒè¿›åˆ¶æœºå™¨ç ï¼Œåªä¸è¿‡åœ¨è¿è¡ŒåŸç†å’Œç¿»è¯‘è¿‡ç¨‹ä¸åŒã€‚é‚£å®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼šç¼–è¯‘å™¨ï¼šå…ˆæ•´ä½“ç¼–è¯‘å®Œï¼Œç„¶åä¸€æ¬¡æ€§æ‰§è¡Œã€‚æ¯”å¦‚ï¼šCè¯­è¨€ä»£ç è¢«ç¼–è¯‘æˆäºŒè¿›åˆ¶ä»£ç ï¼ˆexeç¨‹åºï¼‰ï¼Œåœ¨windowså¹³å°ä¸Šæ‰§è¡Œã€‚è§£é‡Šå™¨ï¼šè§£é‡Šä¸€å¥åå°±æäº¤è®¡ç®—æœºæ‰§è¡Œä¸€å¥ï¼Œå³è¾¹è§£é‡Šè¾¹æ‰§è¡Œã€‚æ¯”å¦‚phpï¼Œpostscritpï¼Œjavascriptå°±æ˜¯å…¸å‹çš„è§£é‡Šæ€§è¯­è¨€ã€‚ç”¨ä¸€ä¸ªé€šä¿—çš„ä¾‹å­æ¥è®²ï¼šæˆ‘ä»¬å»é¥­é¦†åƒé¥­ï¼Œç‚¹äº†å…«èœä¸€æ±¤ã€‚ç¼–è¯‘å™¨çš„æ–¹å¼å°±æ˜¯å¨å¸ˆæŠŠæ‰€æœ‰çš„èœç»™ä½ å…¨åšå¥½äº†ï¼Œä¸€èµ·ç»™ä½ ç«¯ä¸Šæ¥ï¼Œè‡³äºä½ åœ¨å“ªåƒï¼Œæ€ä¹ˆåƒï¼Œéšä¾¿ã€‚è§£é‡Šå™¨çš„æ–¹å¼å°±æ˜¯å¨å¸ˆåšå¥½ä¸€ä¸ªèœç»™ä½ ä¸Šä¸€ä¸ªèœï¼Œä½ å°±åƒè¿™ä¸ªèœï¼Œè€Œä¸”å¿…é¡»åœ¨é¥­åº—é‡Œåƒã€‚ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨çš„å·¥ä½œæµç¨‹çš„å·®åˆ«ï¼šç¼–è¯‘å™¨ä¸è§£é‡Šå™¨çš„å„è‡ªçš„ç‰¹ç‚¹ï¼šæ„é€ è§£é‡Šå™¨V1.0è¯¥ç³»åˆ—æ–‡ç« çš„ä½œè€…ä½¿ç”¨ Python ç¼–å†™Pascalè¯­è¨€çš„è§£é‡Šå™¨ã€‚ç¬¬ä¸€ç‰ˆV1.0ï¼Œæ„é€ çš„è®¡ç®—å™¨æœ‰è¯¸å¤šé™åˆ¶ã€‚å¦‚ï¼šåªè¾“å…¥ä¸€ä½çš„æ•°å­—ç°é˜¶æ®µä»…æ”¯æŒåŠ æ³•æ“ä½œè¾“å…¥ä¸­ä¸å…è®¸æœ‰ç©ºç™½ç¬¦è¿™äº›çº¦æŸä½¿å¾—æ„å»ºä¸€ä¸ªè®¡ç®—å™¨å¾ˆç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125# Token typesï¼š# EOF (end-of-file) token is used to indicate that# there is no more input left for lexical analysisINTEGER, PLUS, EOF = 'INTEGER', 'PLUS', 'EOF'class Token(object): def __init__(self, type, value): # token type: INTEGER, PLUS, or EOF self.type = type # token value: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, '+', or None self.value = value def __str__(self): \"\"\"String representation of the class instance. Examples: Token(INTEGER, 3) Token(PLUS, '+') \"\"\" return 'Token(&#123;type&#125;, &#123;value&#125;)'.format( type=self.type, value=repr(self.value) ) def __repr__(self): return self.__str__()class Interpreter(object): def __init__(self, text): # client string input, e.g. \"3+5\" self.text = text # self.pos is an index into self.text self.pos = 0 # current token instance self.current_token = None def error(self): raise Exception('Error parsing input') def get_next_token(self): \"\"\"Lexical analyzer (also known as scanner or tokenizer) This method is responsible for breaking a sentence apart into tokens. One token at a time. \"\"\" text = self.text # is self.pos index past the end of the self.text ? # if so, then return EOF token because there no more # input left to convert into tokens if self.pos &gt; len(text) - 1: return Token(EOF, None) # get a character at the position self.pos and decide # what token to create based on the single character current_char = text[self.pos] # if the character is a digit then convert it to # integer, create an INTEGER token, increment self.pos # index to point to the next character after the digit, # and return the INTEGER token if current_char.isdigit(): token = Token(INTEGER, int(current_char)) self.pos += 1 return token if current_char == '+': token = Token(PLUS, current_char) self.pos += 1 return token self.error() def eat(self, token_type): # compare the current token type with the passed token # type and if they match then \"eat\" the current token # and assign the next token to the self.current_token, # otherwise raise an exception. if self.current_token.type == token_type: self.current_token = self.get_next_token() else: self.error() def expr(self): \"\"\"expr -&gt; INTEGER PLUS INTEGER\"\"\" # set current token to the first token taken from the input self.current_token = self.get_next_token() # we expect the current token to be a single-digit integer left = self.current_token self.eat(INTEGER) # we expect the current token to be a '+' token op = self.current_token self.eat(PLUS) # we expect the current token to be a single-digit integer right = self.current_token self.eat(INTEGER) # after the above call the self.current_token is set to # EOF token # at this point INTEGER PLUS INTEGER sequence of tokens # has been successfully found and the method can just # return the result of adding two integers, thus # effectively interpreting client input result = left.value + right.value return resultdef main(): while True: try: # To run under Python3 replace 'raw_input' call with 'input' text = input('calc&gt; ') except EOFError: break if not text: continue interpreter = Interpreter(text) result = interpreter.expr() print(result)if __name__ == '__main__': main()æŠŠä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º calc1.py ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» GitHub ä¸Šä¸‹è½½ã€‚åœ¨ä½ å¼€å§‹ä»”ç»†ç ”ç©¶ä»£ ç ä¹‹å‰ï¼Œåœ¨å‘½ä»¤è¡Œä¸Šè¿è¡Œè¿™ä¸ªè®¡ç®—å™¨å¹¶çœ‹å®ƒå®ç°è¿è¡Œã€‚æŠŠç©ä¸€ä¸‹ï¼ä¸‹é¢æ˜¯åœ¨æˆ‘ç¬”è®°æœ¬ä¸Šçš„ä¸€ æ¬¡å°è¯•ï¼ˆå¦‚æœä½ æƒ³åœ¨ Python3 ä¸‹è¿è¡Œï¼Œå°±éœ€è¦æŠŠ raw_input æ›¿æ¢ä¸º inputï¼‰ï¼š12345678$ python calc1.pycalc&gt; 3+47calc&gt; 3+58calc&gt; 3+912calc&gt;ä»£ç åˆ†æå‡è®¾æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œè¾“å…¥ä¸€ä¸ªè¡¨è¾¾å¼â€œ3+5â€ã€‚ä½ çš„è§£é‡Šå™¨å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸² â€œ3+5â€ã€‚ä¸ºäº†ä½¿è§£é‡Šå™¨çœŸæ­£ç†è§£å¦‚ä½•å¤„ç†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œéœ€è¦å…ˆæŠŠè¾“å…¥çš„ â€œ3+5â€ æ‹†åˆ†æˆè¢«å«åš token çš„éƒ¨ä»¶ã€‚è¯æ³•åˆ†æï¼šï¼ˆlexical analysisï¼Œç®€ç§°lexerï¼Œäº¦ç§°scanner æˆ– tokenizerï¼‰â€‹ è¯æ³•åˆ†æä¹Ÿç§°ä¸º åˆ†è¯ ï¼Œæ­¤é˜¶æ®µç¼–è¯‘å™¨ä»å·¦å‘å³æ‰«ææºæ–‡ä»¶ï¼Œå°†å…¶å­—ç¬¦æµåˆ†å‰²æˆä¸€ä¸ªä¸ªçš„ è¯ ï¼ˆ token ã€ è®°å· ï¼Œåæ–‡ä¸­å°†ç§°ä¸º token ï¼‰ã€‚Tokenï¼šâ€‹ æ‰€è°“ token ï¼Œå°±æ˜¯æºæ–‡ä»¶ä¸­ä¸å¯å†è¿›ä¸€æ­¥åˆ†å‰²çš„ä¸€ä¸²å­—ç¬¦ï¼Œç±»ä¼¼äºè‹±è¯­ä¸­å•è¯ï¼Œæˆ–æ±‰è¯­ä¸­çš„è¯ã€‚è¿™é‡Œçš„ token å°±æ˜¯ä¸€ä¸ªæœ‰ç±»å‹çš„å€¼çš„å¯¹è±¡ï¼ˆå³ï¼Œtokenè¿˜å­˜ç€å€¼çš„ç±»å‹ï¼‰ã€‚ä¾‹å¦‚å¯¹äºå­—ç¬¦ä¸²â€œ3â€æ¥è¯´ï¼Œtoken ç±»å‹ä¸º INTEGER ï¼Œ ç›¸åº”çš„å€¼æ˜¯æ•´æ•° 3 ã€‚è§£é‡Šå™¨Interpreterè¦åšçš„ç¬¬ä¸€æ­¥å°±æ˜¯è¯»å–è¾“å…¥çš„å­—ç¬¦ä¸²å¹¶æŠŠä»–è½¬åŒ–æˆ token æµã€‚è§£é‡Šå™¨ä¸­åšè¿™ä¸ªå·¥ä½œçš„éƒ¨åˆ†è¢«ç§°ä¸º è¯æ³•åˆ†æå™¨(lexical analyzer)ï¼Œç®€ç§° lexer ã€‚ä¹Ÿå¯ä»¥ç§°å®ƒä¸ºï¼š scanner æˆ– tokenizer ã€‚ä»–ä»¬çš„å«ä¹‰æ˜¯ä¸€æ ·çš„ï¼šè¡¨ç¤ºè§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ä¸­å°†è¾“å…¥çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸º token æµçš„éƒ¨åˆ†ã€‚é‚£æ˜¯å¦‚ä½•è½¬åŒ–ä¸ºtokenæµå‘¢ï¼Ÿè§£é‡Šå™¨ Interpreterä¸­çš„ get_next_token æ–¹æ³•å°±æ˜¯ä½ çš„è¯æ³•åˆ†æå™¨ã€‚ä½ æ¯æ¬¡è°ƒç”¨å®ƒï¼Œå°±ä¼šä»è¾“å…¥åˆ°è§£é‡Šå™¨çš„å­—ç¬¦æµä¸­å¾—åˆ°ä¸‹ä¸€ä¸ª tokenã€‚è®©æˆ‘ä»¬ä»”ç»†çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼Œçœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆæŠŠå­—ç¬¦è½¬åŒ– ä¸º token çš„ã€‚è¾“å…¥è¢«å­˜æ”¾åœ¨å˜é‡ text ä¸­ï¼Œå®ƒä¿å­˜äº†è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œ pos æ˜¯æŒ‡å‘è¯¥å­—ç¬¦ä¸²çš„ä¸€ä¸ªç´¢å¼•ï¼ˆæŠŠå­—ç¬¦ä¸²çœ‹ä½œæ˜¯ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼‰ã€‚ pos çš„åˆå€¼è¢«è®¾ä¸º 0, æŒ‡å‘å­—ç¬¦â€˜3â€™ã€‚ è¯¥æ–¹æ³•é¦–å…ˆæ£€æŸ¥è¯¥å­—ç¬¦æ˜¯ä¸æ˜¯æ•°å­—ï¼Œè‹¥æ˜¯æ•°å­—ï¼Œå°±é€’å¢ pos å¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º INTEGER å€¼ ä¸ºæ•´æ•° 3 çš„ tokenï¼šç°åœ¨ pos æŒ‡å‘äº† text ä¸­çš„å­—ç¬¦â€˜+â€™ï¼Œä¸‹æ¬¡ä½ è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå®ƒä¼šå…ˆæµ‹è¯• pos ä½ ç½®çš„å­—ç¬¦æ˜¯å¦æ˜¯æ•°å­—ï¼Œç„¶åå†æµ‹è¯•å®ƒæ˜¯å¦æ˜¯åŠ å·ï¼Œæ­¤æ—¶å®ƒæ˜¯åŠ å·ã€‚è¿™æ ·è¯¥æ–¹æ³•å°±é€’å¢ pos å¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º PLUS å€¼ä¸ºâ€˜+â€™çš„ tokenï¼šç°åœ¨ pos æŒ‡å‘äº†å­—ç¬¦â€˜5â€™ã€‚å½“ä½ å†æ¬¡è°ƒç”¨ get_next_token æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥ pos ä½ç½® æ˜¯å¦æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ­¤æ—¶æ˜¯çš„ï¼Œå› æ­¤å®ƒé€’å¢ pos å¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º INTEGER å€¼ä¸ºâ€˜5â€™çš„ tokenï¼šç°åœ¨ç´¢å¼• pos è¶Šè¿‡äº†å­—ç¬¦ä¸²â€œ3+5â€çš„æœ«å°¾ï¼Œæ¥ä¸‹æ¥æ¯æ¬¡è°ƒç”¨ get_next_token æ–¹æ³•éƒ½ä¼š è¿”å› EOF tokenï¼šè‡ªå·±åŠ¨æ‰‹è¯•è¯•çœ‹çœ‹ä½ çš„è®¡ç®—å™¨çš„ lexer ç»„ä»¶æ€ä¹ˆå·¥ä½œçš„ï¼š123456789101112131415&gt;&gt;&gt; from calc1 import Interpreter&gt;&gt;&gt;&gt;&gt;&gt; interpreter = Interpreter('3+5')&gt;&gt;&gt; interpreter.get_next_token()Token(INTEGER, 3)&gt;&gt;&gt;&gt;&gt;&gt; interpreter.get_next_token()Token(PLUS, '+')&gt;&gt;&gt;&gt;&gt;&gt; interpreter.get_next_token()Token(INTEGER, 5)&gt;&gt;&gt;&gt;&gt;&gt; interpreter.get_next_token()Token(EOF, None)&gt;&gt;&gt;æ­¤æ—¶ä½ çš„è§£é‡Šå™¨å·²ç»å¯ä»¥ä»è¾“å…¥çš„å­—ç¬¦æµä¸­è·å¾— token æµäº†ï¼Œè§£é‡Šå™¨éœ€è¦å¯¹å®ƒåšç‚¹ä»€ä¹ˆï¼š å®ƒéœ€è¦ä»ä½¿ç”¨ lexer get_next_token å¾—åˆ°çš„å­—ç¬¦æµä¸­æ‰¾åˆ°ç»“æ„ã€‚ä½ çš„è§£é‡Šå™¨æœŸæœ›ä» æµä¸­æ‰¾åˆ°å¦‚ä¸‹çš„ç»“æ„ï¼š INTEGER -&gt; PLUS -&gt; INTEGER. å³ï¼Œå®ƒè¯•ç€æ‰¾åˆ°è¿™æ ·ä¸€ä¸ª token åº åˆ—ï¼šæ•´æ•°åè·Ÿä¸€ä¸ªåŠ å·å†è·Ÿä¸€ä¸ªæ•´æ•°ã€‚è´Ÿè´£æŸ¥æ‰¾å’Œè§£é‡Šè¿™ä¸ªç»“æ„çš„æ–¹æ³•æ˜¯ expr. è¿™ä¸ªæ–¹æ³•éªŒè¯ä¸€ä¸ª token åºåˆ—æ˜¯å¦éµä»æœŸæœ›çš„ token åºåˆ—ï¼Œå³ INTEGER -&gt; PLUS -&gt; INTEGER. å½“ç¡®å®šéµä»è¿™ä¸ªç»“æ„åï¼Œå®ƒå°±æŠŠ PLUS å·¦ è¾¹å’Œå³è¾¹ token çš„å€¼ç›¸åŠ æ¥ç”Ÿæˆç»“æœï¼Œä»è€ŒæˆåŠŸåœ°è§£é‡Šäº†ä½ ä¼ ç»™è§£é‡Šå™¨çš„ç®—æœ¯è¡¨è¾¾å¼ã€‚expr æ–¹æ³•ä½¿ç”¨äº†è¾…åŠ©æ–¹æ³• eat æ¥éªŒè¯ä¼ ç»™ eat çš„ token ç±»å‹ä¸å½“å‰çš„ token ç±» å‹ç›¸åŒ¹é…ã€‚åœ¨åŒ¹é…åˆ°ä¼ å…¥çš„ token ç±»å‹åï¼Œ eat æ–¹æ³•ä¼šå–å¾—ä¸‹ä¸€ä¸ª token å¹¶æŠŠå®ƒèµ‹å€¼ ç»™å˜é‡ current_token, è¿™æ ·å®é™…ä¸Šæ˜¯â€œåƒæ‰â€äº†å½“å‰åŒ¹é…çš„ token å¹¶æŠŠæƒ³è±¡ä¸­çš„ token æµä¸­çš„æŒ‡é’ˆå‘å‰ç§»åŠ¨äº†ã€‚å¦‚æœ token æµä¸­çš„ç»“æ„ä¸éµä»æœŸæœ›çš„ INTEGER PLUS INTEGER åº åˆ—ï¼Œ eat æ–¹æ³•å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚å°ç»“å›é¡¾ä¸€ä¸‹ä½ çš„è§£é‡Šå™¨ä¸ºäº†å¯¹ä¸€ä¸ªç®—æœ¯è¡¨è¾¾å¼æ±‚å€¼éƒ½åšäº†ä»€ä¹ˆï¼šè§£é‡Šå™¨æ¥Interpreteræ”¶ä¸€ä¸ªè¾“å…¥å­—ç¬¦ä¸²ï¼Œå‡è®¾ä¸ºâ€œ3+5â€è§£é‡Šå™¨è°ƒç”¨äº† expr æ–¹æ³•æ¥ä»è¯æ³•è§£æå™¨ get_next_token è¿”å›çš„ token æµä¸­å¯»æ‰¾ä¸€ä¸ªç»“æ„ã€‚è¿™ä¸ªç»“æ„å°±æ˜¯ä¸€ä¸ª INTEGER PLUS INTEGER çš„å½¢å¼ã€‚å½“ç¡®è®¤äº†è¿™ä¸ªç»“æ„ä»¥åï¼Œå®ƒå°±ä½¿ç”¨æŠŠä¸¤ä¸ª INTEGER token ç›¸åŠ çš„æ–¹å¼æ¥è§£é‡Šè¿™ä¸ªè¾“å…¥ï¼Œå› ä¸ºæ­¤æ—¶è§£é‡Šå™¨å·²ç»æ¸…æ¥š åœ°çŸ¥é“å®ƒè¦åšçš„å°±æ˜¯æŠŠ 3 å’Œ 5 ä¸¤ä¸ªæ•´æ•°ç›¸åŠ ã€‚ç¥è´ºä½ ã€‚ä½ åˆšåˆšå­¦ä¼šäº†æ€ä¹ˆæ„é€ ä½ çš„ç¬¬ä¸€ä¸ªè§£é‡Šå™¨ï¼ç°åœ¨æ˜¯æ—¶å€™åšæ­¤ç»ƒä¹ äº†ã€‚ä½ ä¸ä¼šè§‰å¾—ä½ åˆšåˆšè¯»äº†è¿™ç¯‡æ–‡ç« å°±è¶³å¤Ÿäº†ï¼Œæ˜¯å§ï¼Ÿå¥½äº†ï¼Œè‡ªå·±åŠ¨æ‰‹åšä¸‹é¢çš„ç»ƒä¹ ï¼šä¿®æ”¹ä»£ç ä½¿å¾—å…è®¸è¾“å…¥å¤šä½æ•´æ•°ï¼Œä¾‹å¦‚â€œ12+3â€å¢åŠ ä¸€ä¸ªè·³è¿‡ç©ºç™½ç¬¦çš„æ–¹æ³•ï¼Œä½¿ä½ çš„è®¡ç®—å™¨å¯ä»¥å¤„ç†åŒ…å«ç©ºç™½ç¬¦çš„è¾“å…¥å¦‚ â€œ 12 + 3â€ä¿®æ”¹ä»£ç ä½¿å¾—å®ƒå¯ä»¥å¤„ç†â€˜-â€™è€Œéâ€˜+â€™çš„æƒ…å†µæ£€æŸ¥ä½ çš„ç†è§£ã€‚ä»€ä¹ˆæ˜¯è§£é‡Šå™¨ï¼Ÿä»€ä¹ˆæ˜¯ç¼–è¯‘å™¨ï¼Ÿè§£é‡Šå™¨å’Œç¼–è¯‘å™¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯ tokenï¼Ÿå°†è¾“å…¥æ‹†åˆ†æˆ token çš„è¿‡ç¨‹å«ä»€ä¹ˆï¼Ÿè§£é‡Šå™¨ä¸­åšè¯æ³•åˆ†æçš„éƒ¨åˆ†å«ä»€ä¹ˆï¼Ÿè§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨çš„è¿™ä¸ªéƒ¨åˆ†è¿˜æœ‰ä»€ä¹ˆå…¶ä»–å¸¸è§çš„åå­—ï¼Ÿç›¸å…³æ–‡ç« é“¾æ¥ï¼šç¼–è¯‘å™¨ä¸è§£é‡Šå™¨ï¼šhttps://www.liujiangblog.com/course/python/9Letâ€™s Build A Simple Interpreter. Part 1ï¼šhttps://feng-qi.github.io/2018/01/23/lets-build-a-simple-interpreter-part-01/","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Letâ€™s Build A Simple Interpreter","slug":"Letâ€™s-Build-A-Simple-Interpreter","permalink":"https://longlongqin.github.io/tags/Let%E2%80%99s-Build-A-Simple-Interpreter/"}],"author":{"name":"longlongqin","avatar":"https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg","url":"https://www.longlongqin.github.io"}},{"title":"2ã€ç”µå­è®¡ç®—æœº","slug":"å­¦ä¹ ç¬”è®°/ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹ç¬”è®°/2ã€ç”µå­è®¡ç®—æœº","date":"2020-03-07T19:02:53.000Z","updated":"2020-03-17T09:03:42.618Z","comments":true,"path":"archives/d84f.html","link":"","permalink":"https://longlongqin.github.io/archives/d84f.html","excerpt":"è¿™ä¸ªç³»åˆ—çš„è¯¾ç¨‹è¿˜æ˜¯å€¼å¾—å¤§å®¶å»çœ‹ä¸€çœ‹çš„ã€‚è¿™ä¸ªç³»åˆ—çš„è§†é¢‘å«ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹ã€‚è™½ç„¶å«é€Ÿæˆè¯¾ï¼Œæˆ‘ä»¬ä¹Ÿè¦åšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œå®ƒè‚¯å®šä¸æ˜¯è®©ä½ çœ‹äº†è¿™äº›å†…å®¹ä½ å°±ä»€ä¹ˆéƒ½çŸ¥é“äº†ã€‚è¿™æ˜¯ç§‘æ™®æ€§çš„è§†é¢‘ã€‚è¿™ä¸ªè§†é¢‘éƒ½æ˜¯è¢«ç¿»è¯‘å¥½çš„ï¼Œå†æ¬¡æ„Ÿè°¢è¿™äº›ç¿»è¯‘è€…ã€‚","text":"è¿™ä¸ªç³»åˆ—çš„è¯¾ç¨‹è¿˜æ˜¯å€¼å¾—å¤§å®¶å»çœ‹ä¸€çœ‹çš„ã€‚è¿™ä¸ªç³»åˆ—çš„è§†é¢‘å«ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹ã€‚è™½ç„¶å«é€Ÿæˆè¯¾ï¼Œæˆ‘ä»¬ä¹Ÿè¦åšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œå®ƒè‚¯å®šä¸æ˜¯è®©ä½ çœ‹äº†è¿™äº›å†…å®¹ä½ å°±ä»€ä¹ˆéƒ½çŸ¥é“äº†ã€‚è¿™æ˜¯ç§‘æ™®æ€§çš„è§†é¢‘ã€‚è¿™ä¸ªè§†é¢‘éƒ½æ˜¯è¢«ç¿»è¯‘å¥½çš„ï¼Œå†æ¬¡æ„Ÿè°¢è¿™äº›ç¿»è¯‘è€…ã€‚å‰è¨€è§†é¢‘åœ¨Bç«™ä¸Šéƒ½æœ‰å…¨é›†çš„ï¼Œä¼ é€é—¨ï¼šhttps://www.bilibili.com/video/av21376839åœ¨GitHubä¸Šçš„åœ°å€ï¼šhttps://github.com/1c7/crash-course-computer-science-chineseè¿™é—¨è¯¾æ€»å…±æœ‰40èŠ‚ï¼Œæ¯èŠ‚è¯¾çš„æ ‡é¢˜ä¸ºï¼šè®¡ç®—æœºæ—©æœŸå†å²ç”µå­è®¡ç®—å¸ƒå°”é€»è¾‘ä¸é€»è¾‘ç”µè·¯äºŒè¿›åˆ¶ç®—æœ¯é€»è¾‘å•å…ƒå¯„å­˜å™¨ &amp; å†…å­˜ä¸­å¤®å¤„ç†å™¨æŒ‡ä»¤å’Œç¨‹åºé«˜çº§ CPU è®¾è®¡ç¼–ç¨‹å²è¯ç¼–ç¨‹è¯­è¨€ç¼–ç¨‹åŸç†ï¼šè¯­å¥å’Œå‡½æ•°ç®—æ³•åˆæ­¥æ•°æ®ç»“æ„é˜¿å…°Â·å›¾çµè½¯ä»¶å·¥ç¨‹é›†æˆç”µè·¯ã€æ‘©å°”å®šå¾‹æ“ä½œç³»ç»Ÿå†…å­˜ &amp; å‚¨å­˜ä»‹è´¨æ–‡ä»¶ç³»ç»Ÿå‹ç¼©å‘½ä»¤è¡Œç•Œé¢å±å¹• &amp; 2D å›¾å½¢æ˜¾ç¤ºå†·æˆ˜å’Œæ¶ˆè´¹ä¸»ä¹‰ä¸ªäººè®¡ç®—æœºé©å‘½å›¾å½¢ç”¨æˆ·ç•Œé¢3D å›¾å½¢è®¡ç®—æœºç½‘ç»œäº’è”ç½‘ä¸‡ç»´ç½‘ç½‘ç»œå®‰å…¨é»‘å®¢ä¸æ”»å‡»åŠ å¯†æœºå™¨å­¦ä¹ ä¸äººå·¥æ™ºèƒ½è®¡ç®—æœºè§†è§‰è‡ªç„¶è¯­è¨€å¤„ç†æœºå™¨äººè®¡ç®—æœºä¸­çš„å¿ƒç†å­¦æ•™è‚²å‹ç§‘æŠ€å¥‡ç‚¹ï¼Œå¤©ç½‘ï¼Œè®¡ç®—æœºçš„æœªæ¥è®¡ç®—æœºæ—©æœŸå†å²è¿™ä¸€å¼ å›¾å¤§è‡´è¯´æ˜äº†è®¡ç®—æœºæ—©æœŸå‘å±•çš„å†å²ã€‚å›¾ç‰‡æ¥æºï¼šè¯·æŸ¥çœ‹å›¾ç‰‡æœ¬èº«é“¾æ¥ã€‚åé¢çš„è¯¾ä¼šè¾ƒè¯¦ç»†çš„è®²è§£ã€‚ç”µå­è®¡ç®—æœºç»§ç”µå™¨åœ¨1937å¹´æœ€å¤§çš„æœºç”µè®¡ç®—æœºä¹‹ä¸€æ˜¯å“ˆä½›çš„é©¬å…‹ä¸€å·(Harvard Mark â… )ï¼Œæ˜¯IBMåœ¨1944å¹´ç»™äºŒæˆ˜çš„åŒç›Ÿå›½å»ºé€ çš„ã€‚è¯¥æœºå™¨çš„å¤§è„‘(CPUçš„åŸºç¡€å™¨ä»¶)æ˜¯â€œç»§ç”µå™¨â€ã€‚ç»§ç”µå™¨ï¼šæ˜¯ç”¨ç”µæ§åˆ¶çš„æœºæ¢°å¼€å…³ï¼Œç»§ç”µå™¨é‡Œæœ‰æ ¹â€œæ§åˆ¶çº¿è·¯â€æ§åˆ¶ç€ç”µè·¯çš„å¼€å…³ï¼Œâ€œæ§åˆ¶çº¿è·¯â€è¿ç€ä¸€ä¸ªçº¿åœˆï¼Œå½“çº¿åœˆé€šç”µæ—¶ï¼Œä¼šäº§ç”Ÿæ„Ÿåº”ç£åœºï¼Œç”±æ­¤ç”±æ­¤èƒ½å¤Ÿå¸å¼•ä¸Šæ–¹çš„é‡‘å±è‡‚ï¼Œä»è€Œé—­åˆç”µè·¯ï¼Œå¾—åˆ°é«˜ç”µå¹³ã€‚å®ƒçš„æ€§èƒ½ï¼š1940å¹´ä¸€ä¸ªå¥½çš„ç»§ç”µå™¨1ç§’èƒ½ç¿»è½¬50æ¬¡ã€‚å“ˆä½›é©¬å…‹ä¸€å·1ç§’èƒ½åš3æ¬¡åŠ å‡æ³•è¿ç®—ï¼Œä¸€æ¬¡ä¹˜æ³•éœ€è¦6ç§’ï¼Œé™¤æ³•éœ€è¦15ç§’ï¼Œä¸‰è§’å‡½æ•°éœ€è¦ä¸€åˆ†é’Ÿä»¥ä¸Šã€‚å®ƒçš„ç¼ºç‚¹ï¼šæ§åˆ¶å¼€å…³çš„é‡‘å±è‡‚æ˜¯â€œæœ‰è´¨é‡çš„â€ï¼Œå› æ­¤æ— æ³•å¿«é€Ÿå¼€å…³ã€‚å¹¶ä¸”é‡‘å±è‡‚çš„åå¤ç§»åŠ¨å°±ä¼šå­˜åœ¨ç£¨æŸï¼ˆä»»ä½•ä¼šåŠ¨çš„æœºæ¢°éƒ½ä¼šéšæ—¶é—´ç£¨æŸï¼‰ï¼Œå“ˆä½›é©¬å…‹ä¸€å·å¹³å‡æ¯å¤©éœ€è¦æ›´æ¢ä¸€ä¸ªæ•…éšœç»§ç”µå™¨ã€‚çœŸç©ºç®¡åœ¨1904å¹´ï¼Œè‹±å›½ç‰©ç†å­¦å®¶John Ambrose Flemingå¼€å‘äº†æ–°çš„ç”µå­ç»„ä»¶â€”â€”çƒ­ç”µå­ç®¡ï¼ˆThermionic valveï¼‰ã€‚çƒ­ç”µå­ç®¡ï¼šæŠŠä¸¤ä¸ªç”µæè£…åœ¨ä¸€ä¸ªæ°”å¯†çš„çœŸç©ºç»ç’ƒç¯æ³¡ä¸­ã€‚å…¶ä¸­ä¸€ä¸ªç‚¹å‡»Aå¯ä»¥åŠ çƒ­ï¼Œä»è€Œå‘å°„ç”µå­ï¼Œç§°ä¸ºçƒ­ç”µå­å‘å°„ï¼ˆThermionic emissionï¼‰ï¼›å¦ä¸€ä¸ªç”µæBä¼šå¸å¼•ç”µå­ï¼Œæ¥å½¢æˆç”µæµã€‚ä½†åªæœ‰å½“ç”µæBå¸¦æ­£ç”µæ—¶æ‰èƒ½å¸å¼•ç”µå­ï¼Œå¦åˆ™å½“ç”µæBå¸¦è´Ÿç”µè·æˆ–è€…ä¸­æ€§ç”µè·æ—¶ï¼Œç”µå­å°±æ— æ³•è·¨è¶ŠçœŸç©ºåŒºã€‚ç¾å›½å‘æ˜å®¶Lee de Foreståœ¨æ­¤åŸºç¡€ä¸ŠåŠ å…¥äº†ç¬¬ä¸‰ä¸ªæ§åˆ¶ç”µæã€‚é€šè¿‡å‘æ§åˆ¶ç”µææ–½åŠ æ­£ç”µè·ï¼Œå°±èƒ½å¸å¼•ç”µå­ï¼Œä»è€Œé—­åˆç”µè·¯ï¼›è€Œé€šè¿‡æ–½åŠ è´Ÿç”µè·ï¼Œå°±èƒ½é—­åˆç”µè·¯ã€‚ç‰¹ç‚¹ï¼šæ¯ç§’å¯å¼€é—­æ•°åƒæ¬¡ã€‚å’Œç»§ç”µå™¨ç›¸åŒçš„æ˜¯ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªæ§åˆ¶çº¿è·¯æ¥æ§åˆ¶æ–­å¼€æˆ–é—­åˆç”µè·¯ï¼Œå¹¶ä¸”çœŸç©ºç®¡å†…æ²¡æœ‰ä¼šåŠ¨çš„ç»„ä»¶ï¼Œå› æ­¤å­˜åœ¨æ›´å°‘çš„ç£¨æŸã€‚æ¯”è¾ƒè„†å¼±ï¼Œä¼šåƒç¯æ³¡ä¸€æ ·çƒ§åï¼Œå¹¶ä¸”ä½“ç§¯æ¯”è¾ƒå¤§ã€‚çœŸç©ºç®¡çš„å‡ºç°ï¼Œæ ‡å¿—ç€è®¡ç®—æœºä»æœºç”µè½¬å‘ç”µå­ï¼Œç”µå­æ•°å€¼ç§¯åˆ†è®¡ç®—æœºENIACï¼Œåœ¨1946å¹´äºå®¾å¤•æ³•å°¼äºšå¤§å­¦è®¾è®¡åˆ¶é€ ï¼Œè¿™æ˜¯ä¸–ä¸Šç¬¬ä¸€ä¸ªçœŸæ­£çš„é€šç”¨å¯ç¼–ç¨‹ç”µå­è®¡ç®—æœºï¼Œæ¯ç§’å¯æ‰§è¡Œ5000æ¬¡åä½åŠ å‡æ³•ã€‚ä½†æ˜¯ç”±äºå­˜åœ¨å¤§é‡çš„çœŸç©ºç®¡ï¼Œå› æ­¤ENIACè¿è¡ŒåŠå¤©å·¦å³å°±ä¼šå‡ºç°ä¸€æ¬¡æ•…éšœã€‚æ™¶ä½“ç®¡æ™¶ä½“ç®¡ï¼šç±»ä¼¼äºç»§ç”µå™¨å’ŒçœŸç©ºç®¡ï¼Œæ™¶ä½“ç®¡ä¹Ÿæ˜¯ä¸€ä¸ªç”¨äºæ§åˆ¶ç”µè·¯é—­åˆæ–­å¼€çš„å¼€å…³ã€‚æ™¶ä½“ç®¡æœ‰ä¸¤ä¸ªç”µæï¼Œè¿™ä¸¤ä¸ªç”µæä¹‹é—´é€šè¿‡åŠå¯¼ä½“ææ–™éš”å¼€ã€‚æ§åˆ¶çº¿è¿æ¥åˆ°ä¸€ä¸ªâ€œé—¨â€ç”µæï¼Œé€šè¿‡æ”¹â€œé—¨â€çš„ç”µè·ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶åŠå¯¼ä½“çš„å¯¼ç”µæ€§ï¼Œç”±æ­¤æ¥æ§åˆ¶ç”µæµæ˜¯å¦æµåŠ¨ã€‚å½“æ§åˆ¶çº¿è·¯é€šç”µæ—¶ï¼Œä¸¤ä¸ªç”µææ¥é€šï¼Œå¦åˆ™ä¸¤ä¸ªç”µææ–­å¼€ã€‚ç‰¹ç‚¹ï¼šæ¯ç§’å¯å¼€å…³10000æ¬¡ã€‚ç›¸æ¯”ç»ç’ƒåˆ¶æˆçš„çœŸç©ºç®¡ï¼Œæ™¶ä½“ç®¡æ˜¯å›ºä½“çš„ï¼Œå¹¶ä¸”ä½“ç§¯è¿œå°äºç»§ç”µå™¨å’ŒçœŸç©ºç®¡ã€‚ç¬¬ä¸€ä¸ªæ¶ˆè´¹è€…å¯è´­ä¹°çš„ï¼Œå®Œå…¨ç”±æ™¶ä½“ç®¡æ„æˆçš„è®¡ç®—æœºæ˜¯1957å¹´å‘å¸ƒçš„IBM 608ï¼Œå®ƒæœ‰3000ä¸ªæ™¶ä½“ç®¡ï¼Œæ¯ç§’æ‰§è¡Œ4500æ¬¡åŠ å‡æ³•ï¼Œæˆ–80æ¬¡å·¦å³çš„ä¹˜é™¤æ³•ã€‚å¦‚ä»Šï¼Œè®¡ç®—æœºé‡Œçš„æ™¶ä½“ç®¡å°äº50nmï¼Œå¹¶ä¸”æ¯ç§’å¯åˆ‡æ¢ä¸Šç™¾ä¸‡æ¬¡ï¼Œå·¥ä½œå‡ åå¹´ã€‚å¾ˆå¤šæ™¶ä½“ç®¡å’ŒåŠå¯¼ä½“å¼€å‘åœ¨åœ£å…‹æ‹‰æ‹‰è°·ï¼Œä½äºæ—§é‡‘å±±å’Œåœ£æ²³è¥¿ä¹‹é—´ï¼Œç”±äºåˆ¶é€ åŠå¯¼ä½“æœ€å¸¸è§çš„ææ–™æ˜¯ç¡…ï¼Œç”±æ­¤è¿™ä¸ªåœ°æ–¹è¢«ç§°ä¸ºâ€œç¡…è°·â€ã€‚å¹¶ä¸”William Shockleyæ¬è¿‡å»åˆ›å»ºäº†è‚–å…‹åˆ©åŠå¯¼ä½“ï¼Œé‡Œé¢çš„å‘˜å·¥åæ¥æˆç«‹äº†ä»™ç«¥åŠå¯¼ä½“ï¼Œè€Œè¿™é‡Œé¢çš„å‘˜å·¥åæ¥åˆ›ç«‹äº†è‹±ç‰¹å°”ã€‚æ‰€ä»¥ï¼Œè®¡ç®—æœºçš„å¤§è„‘åŸºç¡€å•å…ƒçš„å‘å±•è·¯å¾„ï¼Œå¯æ¦‚æ‹¬ä¸ºï¼šç»§ç”µå™¨-&gt;ç”µå­ç®¡-&gt;æ™¶ä½“ç®¡","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹","slug":"ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹","permalink":"https://longlongqin.github.io/tags/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E9%80%9F%E6%88%90%E8%AF%BE%E3%80%8B/"}]},{"title":"Hexoä¹‹ Yiliaä¸»é¢˜é…ç½®","slug":"Hexoåšå®¢æ­å»º/hexoä¹‹Yliaä¸»é¢˜é…ç½®","date":"2020-03-06T14:50:08.000Z","updated":"2020-03-18T08:51:47.606Z","comments":true,"path":"archives/460671de.html","link":"","permalink":"https://longlongqin.github.io/archives/460671de.html","excerpt":"Yiliaä¸»é¢˜é…ç½®","text":"Yiliaä¸»é¢˜é…ç½®åœ¨å·¦ä¾§æ˜¾ç¤ºæ€»æ–‡ç« æ•°å°†themes\\yilia\\layout_partial\\left-col.ejsæ–‡ä»¶çš„1234567&lt;nav class=\"header-menu\"&gt; &lt;ul&gt; &lt;% for (var i in theme.menu)&#123; %&gt; &lt;li&gt;&lt;a href=\"&lt;%- url_for(theme.menu[i]) %&gt;\"&gt;&lt;%= i %&gt;&lt;/a&gt;&lt;/li&gt; &lt;%&#125;%&gt; &lt;/ul&gt;&lt;/nav&gt;åé¢åŠ ä¸Š123&lt;nav&gt; æ€»æ–‡ç« æ•° &lt;%=site.posts.length%&gt;&lt;/nav&gt;å­—æ•°ã€é˜…è¯»æ—¶é•¿æ·»åŠ é¦–å…ˆå®‰è£… hexo-wordcountä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š1npm i --save hexo-wordcount #å¦‚æœå®‰è£…äº†cnpmï¼Œå¯æ¢ä¸ºcnpmå®‰è£…Node ç‰ˆæœ¬7.6.0ä¹‹å‰,è¯·å®‰è£… 2.x ç‰ˆæœ¬ (Node.js v7.6.0 and previous)1Copynpm install hexo-wordcount@2 --saveç„¶ååœ¨ themes\\yilia\\layout\\_partial\\left-col.ejsä¸­æ·»åŠ ï¼š123Copy&lt;nav&gt; æ€»å­—æ•° &lt;span class&#x3D;&quot;post-count&quot;&gt;&lt;%&#x3D; totalcount(site, &#39;0,0.0a&#39;) %&gt;&lt;&#x2F;span&gt;&lt;&#x2F;nav&gt;æ·»åŠ ä½ç½®åœ¨å¦‚ä¸‹ä»£ç çš„ä¸‹é¢ï¼š123Copy&lt;nav&gt; æ€»æ–‡ç« æ•° &lt;%&#x3D;site.posts.length%&gt;&lt;&#x2F;nav&gt;ç¼–è¾‘ themes\\yilia\\layout\\_partial\\article.ejsåœ¨headerä¸‹é¢åŠ å…¥ï¼š123&lt;div align&#x3D;&quot;left&quot; class&#x3D;&quot;post-count&quot;&gt; &lt;!--å…¶ä¸­alignå¯ä»¥åœ¨ï¼šrightã€centerã€left--&gt; å­—æ•°ï¼š&lt;%&#x3D; wordcount(post.content) %&gt;å­— | é¢„è®¡é˜…è¯»æ—¶é•¿ï¼š&lt;%&#x3D; min2read(post.content) %&gt;åˆ†é’Ÿ&lt;&#x2F;div&gt;å³å¯æ˜¾ç¤ºå•ç¯‡å­—æ•°å’Œé¢„è®¡é˜…è¯»æ—¶é•¿ã€‚ç½®é¡¶æ–‡ç« å®‰è£…æ’ä»¶12npm uninstall hexo-generator-index --savenpm install hexo-generator-index-pin-top --saveé…ç½®ç½®é¡¶æ ‡å‡†æ‰“å¼€ï¼š/themes/*/layoutï¼ˆ/_macroï¼‰/post.ejs ç›´æ¥åœ¨æœ€å‰é¢åŠ å…¥ä»¥ä¸‹ä»£ç å³å¯12345&lt;% if (page.top) &#123; %&gt; &lt;i class=\"fa fa-thumb-tack\"&gt;&lt;/i&gt; &lt;font color=7D26CD&gt;ç½®é¡¶&lt;/font&gt; &lt;span class=\"post-meta-divider\"&gt;|&lt;/span&gt;&lt;% &#125; %&gt;é…ç½®æ–‡ç« ç„¶ååœ¨éœ€è¦ç½®é¡¶çš„æ–‡ç« çš„Front-matterä¸­åŠ ä¸Štopé€‰é¡¹å³å¯ topåé¢çš„æ•°å­—è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜12345---title: 2019date: 2019-02-14 16:10:03top: 5---å¢åŠ ä¸è’œå­ç»Ÿè®¡åˆ©ç”¨è¿™ä¸ªç»Ÿè®¡ï¼Œå¯ä»¥çŸ¥é“ä½ åšå®¢çš„è®¿é—®é‡ã€‚å®‰è£…ä¸è’œå­è„šæœ¬ï¼šåœ¨themes\\yilia\\layout\\ _partial\\after-footer.ejsæœ€åæ·»åŠ ï¼š1&lt;script async src=\"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\"&gt;&lt;/script&gt;å•ç¯‡æ–‡ç« ç‚¹å‡»é‡ï¼šåœ¨themes/yilia/layout/_partial/article.ejsä¸­ åœ¨1&lt;%- partial(&#39;post&#x2F;title&#39;, &#123;class_name: &#39;article-title&#39;&#125;) %&gt;åé¢æ’å…¥å¦‚ä¸‹ä»£ç 1234567891011&lt;!--æ˜¾ç¤ºé˜…è¯»æ¬¡æ•°--&gt;&lt;% if (!index &amp;&amp; post.comments)&#123; %&gt; &lt;br/&gt; &lt;a class=\"cloud-tie-join-count\" href=\"javascript:void(0);\" style=\"color:gray;font-size:14px;\"&gt; &lt;span class=\"icon-sort\"&gt;&lt;/span&gt; &lt;span id=\"busuanzi_container_page_pv\" style=\"color:#ef7522;font-size:14px;\"&gt; é˜…è¯»æ•°: &lt;span id=\"busuanzi_value_page_pv\"&gt;&lt;/span&gt;æ¬¡ &amp;nbsp;&amp;nbsp; &lt;/span&gt; &lt;/a&gt;&lt;% &#125; %&gt;&lt;!--æ˜¾ç¤ºé˜…è¯»æ¬¡æ•°å®Œæ¯•--&gt;å¢åŠ ç‰ˆæƒå£°æ˜é…ç½®yiliaï¼šåœ¨themes/yilia/layout/_partial/article.ejsä¸­ï¼Œæ ‡æ³¨çš„ä½ç½®æ·»åŠ ä»£ç ï¼š1234567891011121314&lt;div class=\"article-entry\" itemprop=\"articleBody\"&gt; &lt;% if (post.excerpt &amp;&amp; index)&#123; %&gt; &lt;%- post.excerpt %&gt; &lt;% if (theme.excerpt_link) &#123; %&gt; &lt;a class=\"article-more-a\" href=\"&lt;%- url_for(post.path) %&gt;#more\"&gt;&lt;%= theme.excerpt_link %&gt; &gt;&gt;&lt;/a&gt; &lt;% &#125; %&gt; &lt;% &#125; else &#123; %&gt; &lt;%- post.content %&gt; &lt;% &#125; %&gt; &lt;-- åœ¨æ­¤å¤„æ·»åŠ ä»£ç --&gt; &lt;-- åœ¨æ­¤å¤„æ·»åŠ ä»£ç --&gt; &lt;-- åœ¨æ­¤å¤„æ·»åŠ ä»£ç --&gt; &lt;-- åœ¨æ­¤å¤„æ·»åŠ ä»£ç --&gt; &lt;% if ((theme.reward_type === 2 || (theme.reward_type === 1 &amp;&amp; post.reward)) &amp;&amp; !index)&#123; %&gt; &lt;div class=\"page-reward\"&gt; &lt;a href=\"javascript:;\" class=\"page-reward-btn tooltip-top\"&gt; &lt;div class=\"tooltip tooltip-east\"&gt;åœ¨ç›®å½•ï¼šthemes/yilia/source-src/cssä¸­åˆ›å»ºæ–°æ–‡ä»¶ï¼šdeclare.scssï¼Œå¹¶æ·»åŠ å¦‚ä¸‹CSSä»£ç ï¼š123456.declare &#123; background-color: #eaeaea; margin-top: 2em; border-left: 3px solid #ff1700; padding: .5em 1em;&#125;ç„¶åï¼Œä¸ºthemes/yilia/source-src/css/main.scssï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š1@import \"./declare\";é…ç½®æ˜¾ç¤ºï¼šç°åœ¨è¯¥è®©å…¶æ˜¾ç¤ºå‡ºæ¥ï¼Œåœ¨themes/yilia/_config.ymlï¼Œä¸­åŠ å…¥ï¼š123456789#ç‰ˆæƒåŸºç¡€è®¾å®šï¼š0-å…³é—­å£°æ˜ï¼› 1-æ–‡ç« å¯¹åº”çš„mdæ–‡ä»¶é‡Œæœ‰declare: trueå±æ€§ï¼Œæ‰æœ‰ç‰ˆæƒå£°æ˜ï¼› 2-æ‰€æœ‰æ–‡ç« å‡æœ‰ç‰ˆæƒå£°æ˜#å½“å‰åº”ç”¨çš„ç‰ˆæƒåè®®åœ°å€ã€‚#ç‰ˆæƒåè®®çš„åç§°#ç‰ˆæƒåè®®çš„Logodeclare_type: 1licensee_url: https:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-nc-sa&#x2F;4.0&#x2F;licensee_name: &#39;çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®&#39;licensee_img: https:&#x2F;&#x2F;i.creativecommons.org&#x2F;l&#x2F;by-nc-sa&#x2F;4.0&#x2F;88x31.pngç„¶ååœ¨éœ€è¦è¿›è¡Œç‰ˆæƒå£°æ˜çš„æ–‡ç« çš„mdæ–‡ä»¶å¤´éƒ¨ï¼Œè®¾ç½®å±æ€§1declare:trueå³å¯ã€‚åœ¨ä¸»é¡µæ—¶æ–‡ç« æ˜¾ç¤ºæ‘˜è¦åœ¨ä½  MD æ ¼å¼æ–‡ç« æ­£æ–‡æ’å…¥ &lt;!-- more --&gt; å³å¯ï¼Œåªä¼šæ˜¾ç¤ºå®ƒä¹‹å‰çš„ï¼Œæ­¤åçš„å°±ä¸æ˜¾ç¤ºï¼Œç‚¹å‡»æ–‡ç« æ ‡é¢˜ï¼Œï¼Œæˆ–è€…ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ï¼Œå³å¯è¿›å…¥å…¨æ–‡ã€‚å¦‚ï¼šæ–‡ç« æ˜¾ç¤ºç›®å½•å¢åŠ æ–‡ç« ç›®å½• TOC ( table of content )ï¼Œæ–¹ä¾¿é˜…è¯»æ–‡ç« ï¼Œåœ¨ themes/yilia/_config.yml ä¸­è¿›è¡Œé…ç½® toc: 2 å³å¯ï¼Œå®ƒä¼šå°†ä½  Markdown è¯­æ³•çš„æ ‡é¢˜ï¼Œç”Ÿæˆç›®å½•ï¼Œç›®å½•æŸ¥çœ‹åœ¨å³ä¸‹è§’ã€‚å¤´åƒè®¾ç½®è®¾ç½®å­˜æ”¾ä½ç½®ï¼šå¤´åƒ/å›¾æ ‡å›¾ç‰‡çš„å­˜æ”¾ä½ç½®æ˜¯/themes/yilia/source/ä¸‹ä»»æ„ä½ç½®ï¼Œå¯ä»¥è‡ªå·±æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å­˜æ”¾ï¼Œæˆ‘å­˜æ”¾åœ¨assetsæ–‡ä»¶å¤¹ä¸‹ã€‚ï¼ˆæˆ‘ä¹‹å‰æ”¾åœ¨imgä¸­ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå®ƒå°±æ˜¾ç¤ºä¸å‡ºæ¥ï¼‰é…ç½®ä¿®æ”¹ï¼šé…ç½®æ–‡ä»¶ä¸º/themes/yilia/_config.ymlã€‚è®¾ç½®å¤´åƒä¸ºé…ç½®æ–‡ä»¶ä¸­avatarä¸€é¡¹ï¼Œè®¾ç½®å›¾æ ‡ä¸ºé…ç½®æ–‡ä»¶ä¸­faviconä¸€é¡¹ï¼Œè®¾ç½®è·¯å¾„çš„æ ¹ç›®å½•ä¸º/themes/yilia/source/ã€‚ä¾‹å¦‚ï¼Œæˆ‘çš„å¤´åƒå­˜æ”¾çš„åœ°å€æ˜¯/themes/yilia/source/assets/me.pngï¼Œè®¾ç½®åˆ™ä¸ºavatar: /assets/me.pngã€‚ï¼ˆå›¾æ ‡åŒç†ï¼‰æäº¤ç½‘é¡µsitemapæ–¹å¼æäº¤ç½‘é¡µåœ¨ Hexo æ ¹ç›®å½•æ‰“å¼€å‘½ä»¤è¡Œå·¥å…·ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š123npm install hexo-generator-sitemap --savehexo cleanhexo gæŸ¥çœ‹1&#123;your_hexo_path&#125;&#x2F;publicæ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°æ–‡ä»¶ï¼š1sitemap.xmlsitemap çš„åˆè¡·æ˜¯ç»™æœç´¢å¼•æ“çœ‹çš„ï¼Œä¸ºäº†æé«˜æœç´¢å¼•æ“å¯¹è‡ªå·±ç«™ç‚¹çš„æ”¶å½•æ•ˆæœï¼Œæˆ‘ä»¬æœ€å¥½æ‰‹åŠ¨åˆ° google å’Œç™¾åº¦ç­‰æœç´¢å¼•æ“æäº¤ sitemap.xmlã€‚baiduæäº¤ç½‘å€ï¼šhttps://ziyuan.baidu.com/?castk=LTE%3Dç™¾åº¦è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤ç½‘é¡µåœ¨æœ¬æœº1&lt;åšå®¢æ ¹ç›®å½•&gt;&#x2F;themes&#x2F;yilia&#x2F;layout&#x2F;_partialç›®å½•ä¸‹æ‰“å¼€article.ejsæ–‡ä»¶ï¼Œå®šä½åˆ°å¦‚ä¸‹è¿™æ®µä»£ç ï¼š1234&lt;% var sUrl &#x3D; url.replace(&#x2F;index\\.html$&#x2F;, &#39;&#39;); sUrl &#x3D; &#x2F;^(http:|https:)\\&#x2F;\\&#x2F;&#x2F;.test(sUrl) ? sUrl : &#39;https:&#39; + sUrl; %&gt;åœ¨å®ƒå‰é¢åŠ ä¸Šï¼š123456789101112131415161718&lt;!- ç™¾åº¦è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤ --&gt;&lt;% if (1)&#123; %&gt; &lt;script&gt; (function()&#123; var bp &#x3D; document.createElement(&#39;script&#39;); var curProtocol &#x3D; window.location.protocol.split(&#39;:&#39;)[0]; if (curProtocol &#x3D;&#x3D;&#x3D; &#39;https&#39;) &#123; bp.src &#x3D; &#39;https:&#x2F;&#x2F;zz.bdstatic.com&#x2F;linksubmit&#x2F;push.js&#39;; &#125; else &#123; bp.src &#x3D; &#39;http:&#x2F;&#x2F;push.zhanzhang.baidu.com&#x2F;push.js&#39;; &#125; var s &#x3D; document.getElementsByTagName(&quot;script&quot;)[0]; s.parentNode.insertBefore(bp, s); &#125;)(); &lt;&#x2F;script&gt;&lt;% &#125; %&gt;&lt;!- ç™¾åº¦è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤ç»“æŸ --&gt;å³å®Œæˆäº†æ–°å¢åšå®¢æ–‡ç« é¡µé¢ï¼ˆä¸åŒ…æ‹¬å…¶ä»–é¡µé¢ï¼‰çš„è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤ã€‚é“¾æ¥æäº¤ç™¾åº¦ç«™é•¿å¹³å°çš„é“¾æ¥æäº¤æ–¹å¼åˆ†ä¸ºè‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤ä¸¤ç§ï¼Œæ­¤å¤„åªè®²è‡ªåŠ¨æäº¤ï¼Œæ‰‹åŠ¨æäº¤æŒ‰ç…§è¦æ±‚æ“ä½œå³å¯ã€‚ä¸»åŠ¨æ¨é€è®¾ç½®ä¸»åŠ¨æ¨é€æœ€ä¸ºå¿«é€Ÿçš„æäº¤æ–¹å¼ï¼Œæ˜¯è¢«ç™¾åº¦æ”¶å½•æœ€å¿«çš„æ¨é€æ–¹å¼ã€‚ä¸»åŠ¨æ¨é€å¯ä»¥é€šè¿‡å®‰è£…æ’ä»¶å®ç°ï¼šé¦–å…ˆå®‰è£…æ’ä»¶ï¼š1npm install hexo-baidu-url-submit --saveä¿®æ”¹ç«™ç‚¹æ ¹ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶_config.ymlï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š12345baidu_url_submit: count: 20 ## æäº¤æœ€æ–°çš„20ä¸ªé“¾æ¥ host: www.dongshuyan.com ## ç™¾åº¦ç«™é•¿å¹³å°ä¸­æ³¨å†Œçš„åŸŸå token: ## 16ä½å‡†å…¥ç§˜é’¥ path: baidu_urls.txt ## æ–‡æœ¬æ–‡æ¡£çš„åœ°å€ï¼Œ æ–°é“¾æ¥ä¼šä¿å­˜åœ¨æ­¤æ–‡æœ¬æ–‡æ¡£é‡Œå‡†å…¥ç§˜é’¥è·å–:åœ¨å¦‚ä¸‹å›¾çš„ç½‘å€ä¸­ï¼šä¸‹æ‹‰ï¼Œæ‰¾åˆ°è¿™é‡Œï¼šç‚¹å‡»è¿›å»å°±æ˜¯å‡†å…¥ç§˜é’¥ã€‚æ£€æŸ¥:å…¶æ¬¡ï¼Œè®°å¾—æŸ¥çœ‹æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ä¸­urlçš„å€¼ï¼Œ å¿…é¡»åŒ…å«æ˜¯ç™¾åº¦ç«™é•¿å¹³å°æ³¨å†Œçš„åŸŸåï¼Œ æ¯”å¦‚:123456# URL## If your site is put in a subdirectory, set url as &#39;http:&#x2F;&#x2F;yoursite.com&#x2F;child&#39; and root as &#39;&#x2F;child&#x2F;&#39;url: http:&#x2F;&#x2F;dongshuyan.comroot: &#x2F;permalink: :year&#x2F;:month&#x2F;:day&#x2F;:title&#x2F;permalink_defaults:æœ€åï¼ŒåŠ å…¥æ–°çš„deployeræœ€åï¼ŒåŠ å…¥æ–°çš„deployer:12345deploy:- type: git ## è¿™æ˜¯æˆ‘åŸæ¥çš„deployer repo: branch:- type: baidu_url_submitter ## æ·»åŠ è¿™é‡Œå†…å®¹å³å¯è¿™é‡Œçš„â€-â€œ,å¿…ä¸å¯å°‘ï¼ å¦åˆ™æŠ¥é”™ã€‚ä½¿ç”¨å…¶ä¸»åŠ¨æ¨é€çš„å®ç°åŸç†å¦‚ä¸‹ï¼šæ–°é“¾æ¥çš„äº§ç”Ÿï¼Œ hexo generate ä¼šäº§ç”Ÿä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«æœ€æ–°çš„é“¾æ¥æ–°é“¾æ¥çš„æäº¤ï¼Œ hexo deploy ä¼šä»ä¸Šè¿°æ–‡ä»¶ä¸­è¯»å–é“¾æ¥ï¼Œæäº¤è‡³ç™¾åº¦æœç´¢å¼•æ“è‡ªåŠ¨æ¨é€è£…è‡ªåŠ¨æ¨é€JSä»£ç çš„ç½‘é¡µï¼Œåœ¨é¡µé¢è¢«è®¿é—®æ—¶ï¼Œé¡µé¢URLå°†ç«‹å³è¢«æ¨é€ç»™ç™¾åº¦ã€‚ä¿®æ”¹ä¸»é¢˜ç›®å½•ä¸‹çš„layout/post.ejsæ–‡ä»¶ï¼Œæœ«å°¾æ·»åŠ è‡ªåŠ¨æ¨é€ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š1234567891011121314&lt;script&gt;(function()&#123; var bp &#x3D; document.createElement(&#39;script&#39;); var curProtocol &#x3D; window.location.protocol.split(&#39;:&#39;)[0]; if (curProtocol &#x3D;&#x3D;&#x3D; &#39;https&#39;) &#123; bp.src &#x3D; &#39;https:&#x2F;&#x2F;zz.bdstatic.com&#x2F;linksubmit&#x2F;push.js&#39;; &#125; else &#123; bp.src &#x3D; &#39;http:&#x2F;&#x2F;push.zhanzhang.baidu.com&#x2F;push.js&#39;; &#125; var s &#x3D; document.getElementsByTagName(&quot;script&quot;)[0]; s.parentNode.insertBefore(bp, s);&#125;)();&lt;&#x2F;script&gt;å‡ºå¤„ï¼š(http://dongshuyan.com/2019/05/24/hexoåšå®¢æ³¨æ„äº‹é¡¹/#14-Hexoæ·»åŠ ç™¾åº¦ç»Ÿè®¡)æ·»åŠ ç™¾åº¦ç»Ÿè®¡å’Œè°·æ­Œç»Ÿè®¡ä»£ç ç™¾åº¦ç»Ÿè®¡é¦–å…ˆæ‰“å¼€ç™¾åº¦ç«™é•¿å¹³å°ï¼Œæ³¨å†Œè´¦æˆ·ã€‚ç„¶åç™»é™† ç™¾åº¦ç»Ÿè®¡ã€‹ç®¡ç†ã€‹æ–°å¢ç«™ç‚¹ã€‚ç„¶åå¤åˆ¶ç”Ÿæˆçš„ä»£ç ï¼š123456789&lt;script&gt;var _hmt = _hmt || [];(function() &#123; var hm = document.createElement(\"script\"); hm.src = \"https://hm.baidu.com/hm.js?è¿™é‡Œæ˜¯ä½ çš„ä¸“å±å­—ç¬¦ä¸²\"; var s = document.getElementsByTagName(\"script\")[0]; s.parentNode.insertBefore(hm, s);&#125;)();&lt;/script&gt;è¿™ä¸€æ®µä»£ç ï¼Œæœ€é‡è¦çš„å°±æ˜¯ä½ é‚£æ®µä¸“å±çš„å­—ç¬¦ä¸²ã€‚å¼€å§‹é…ç½®ï¼šé¦–å…ˆï¼Œæ‰“å¼€1themes&#x2F;yilia&#x2F;_config.ymlé‡Œé¢1baidu_analytics: ''æ”¹ä¸º1baidu_analytics: trueç„¶åï¼Œæ‰“å¼€ï¼š1themes/yilia/layout/_partial/baidu-analytics.ejsä½ ä¼šçœ‹åˆ°ï¼š1234567891011&lt;% if (theme.baidu_analytics)&#123; %&gt;&lt;script&gt;var _hmt &#x3D; _hmt || [];(function() &#123; var hm &#x3D; document.createElement(&quot;script&quot;); hm.src &#x3D; &quot;https:&#x2F;&#x2F;hm.baidu.com&#x2F;hm.js?&lt;%&#x3D; theme.baidu_analytics %&gt;&quot;; var s &#x3D; document.getElementsByTagName(&quot;script&quot;)[0]; s.parentNode.insertBefore(hm, s);&#125;)();&lt;&#x2F;script&gt;&lt;% &#125; %&gt;è¿™é‡Œï¼Œæˆ‘ä»¬ç›´æ¥ç”¨ä½ çš„ä¸“å±å­—ç¬¦ä¸²å»æ›¿æ¢&lt;%= theme.baidu_analytics %&gt;å°±è¡Œäº†ã€‚æ›¿æ¢åä¸ºï¼š1234567891011&lt;% if (theme.baidu_analytics)&#123; %&gt;&lt;script&gt;var _hmt &#x3D; _hmt || [];(function() &#123; var hm &#x3D; document.createElement(&quot;script&quot;); hm.src &#x3D; &quot;https:&#x2F;&#x2F;hm.baidu.com&#x2F;hm.js?ä½ çš„ä¸“å±å­—ç¬¦ä¸²&quot;; var s &#x3D; document.getElementsByTagName(&quot;script&quot;)[0]; s.parentNode.insertBefore(hm, s);&#125;)();&lt;&#x2F;script&gt;&lt;% &#125; %&gt;è°·æ­Œç»Ÿè®¡å‚è€ƒï¼šhttp://yansheng836.coding.me/article/eda67a25.html","categories":[{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"https://longlongqin.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"}],"tags":[{"name":"Yiliaä¸»é¢˜é…ç½®","slug":"Yiliaä¸»é¢˜é…ç½®","permalink":"https://longlongqin.github.io/tags/Yilia%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"}]},{"title":"Hexoä¹‹Materyä¸»é¢˜é…ç½®","slug":"Hexoåšå®¢æ­å»º/Hexoä¹‹Materyä¸»é¢˜é…ç½®","date":"2020-03-05T09:29:38.000Z","updated":"2020-03-17T08:27:59.163Z","comments":true,"path":"archives/514b.html","link":"","permalink":"https://longlongqin.github.io/archives/514b.html","excerpt":"æœ€è¿‘çš„ä¸‰å¤©ä¸€ç›´åœ¨æŠ˜è…¾hexoæ¡†æ¶çš„åšå®¢ï¼Œå…ˆæ˜¯ä½¿ç”¨yiliaä¸»é¢˜ï¼Œä½†æ˜¯ç”¨æ¥ä¸€å¤©è§‰å¾—æˆ‘ä¸é€‚åˆè¿™ä¸ªä¸»é¢˜ï¼Œéšå³çœ‹åˆ°äº†materyä¸»é¢˜ã€‚","text":"æœ€è¿‘çš„ä¸‰å¤©ä¸€ç›´åœ¨æŠ˜è…¾hexoæ¡†æ¶çš„åšå®¢ï¼Œå…ˆæ˜¯ä½¿ç”¨yiliaä¸»é¢˜ï¼Œä½†æ˜¯ç”¨æ¥ä¸€å¤©è§‰å¾—æˆ‘ä¸é€‚åˆè¿™ä¸ªä¸»é¢˜ï¼Œéšå³çœ‹åˆ°äº†materyä¸»é¢˜ã€‚å‰è¨€ä»Šå¤©åˆæŠ˜è…¾äº†ç™½å¤©ä¸€å¤©æ—¶é—´ï¼Œæˆ‘è¿™ä¸ªæ˜¯ç›´æ¥å…‹éš†çš„hongweiã®åšå®¢ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤§ä½¬å‘€ï¼Œè¿˜è¦å¤šå¤šå‘ä»–å­¦ä¹ ã€‚ç„¶åï¼ŒåªæŠŠä¸€äº›ç®€å•çš„é…ç½®å¼„å¥½äº†ã€‚ç°åœ¨æ¢³ç†ä¸€ä¸‹ï¼šå·²å®Œæˆçš„é…ç½®ï¼š404é¡µé¢ç®€å†å»ºç«™æ—¶é—´è®¾ç½®ä¸ªäººåŸŸåï¼ˆå·²è´­ä¹°åŸŸåï¼Œå•è¿˜éœ€è¦å®¡æ ¸ï¼Œæ˜å¤©å†å»å¼„ã€‚ï¼‰ä¸è’œå­è®¾ç½® æ·»åŠ è¯„è®ºæ’ä»¶ ç½‘ç«™SEOä¼˜åŒ– ç™¾åº¦æ”¶å½•ç«™ç‚¹ 1.éªŒè¯ç½‘ç«™æ‰€æœ‰æƒ è°·æ­Œæ”¶å½•ç«™ç‚¹ ä¼˜åŒ–ä½ çš„URL æ·»åŠ ä»£ç å—å¤åˆ¶åŠŸèƒ½ æ·»åŠ æ–‡ç« æ›´æ–°æ—¶é—´åŠŸèƒ½éå¿…è¦é…ç½®ï¼ˆå·²ç»å–æ¶ˆï¼‰ï¼šæ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹BGMæ·»åŠ é¼ æ ‡ç‚¹å‡»çƒŸèŠ±çˆ†ç‚¸æ•ˆæœæ·»åŠ é¡µé¢æ¨±èŠ±é£˜è½æ•ˆæœæ·»åŠ é¼ æ ‡ç‚¹å‡»æ–‡å­—ç‰¹æ•ˆæ·»åŠ é¡µé¢é›ªèŠ±é£˜è½åŠ¨æ•ˆä¼˜åŒ–ç½‘ç«™åŠ è½½é€Ÿåº¦æ•°å­¦å…¬å¼æ¸²æŸ“å’Œä»£ç é«˜äº®å…¶ä»–æœç´¢å¼•æ“æ”¶å½•ä½ çš„ç«™ç‚¹æ·»åŠ åŠ¨æ¼«äººç‰©å¢åŠ emojiæ”¯æŒæ·»åŠ åšå®¢åŠ¨æ€æ ‡ç­¾æ·»åŠ åšå®¢å¤©æ°”æ’ä»¶GitHub&amp;coding pagesåŒéƒ¨ç½²ä¿®å¤Valineè¯„è®ºçš„å¤´åƒä¸æ˜¾ç¤ºé—®é¢˜é…ç½®ä»£ç é«˜äº®ç”±äº Hexo è‡ªå¸¦çš„ä»£ç é«˜äº®ä¸»é¢˜æ˜¾ç¤ºä¸å¥½çœ‹ï¼Œæ‰€ä»¥ä¸»é¢˜ä¸­ä½¿ç”¨åˆ°äº† hexo-prism-plugin çš„ Hexo æ’ä»¶æ¥åšä»£ç é«˜äº®ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š1npm i -S hexo-prism-pluginç„¶åï¼Œä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹ _config.yml æ–‡ä»¶ä¸­ highlight.enable çš„å€¼ä¸º falseï¼Œå¹¶æ–°å¢ prism æ’ä»¶ç›¸å…³çš„é…ç½®ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š12345678highlight: enable: falseprism_plugin: mode: 'preprocess' # realtime/preprocess theme: 'tomorrow' line_number: false # default false custom_css:é‡åˆ°çš„é—®é¢˜1ã€Cannot set property &#39;lastIndex&#39; of undefinedè¿è¡Œhexo gå‡ºç°Cannot set property â€˜lastIndexâ€™ of undefinedè§£å†³æ–¹æ³•ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶çš„ _config.ymlï¼Œæ³¨æ„ä¸æ˜¯ä¸»é¢˜é‡Œé¢çš„é…ç½®æ–‡ä»¶ï¼ŒæŠŠ auto_detect è®¾ç½®ä¸ºfalse å³å¯ã€‚2ã€ä»£ç æ˜¾ç¤ºå¼‚å¸¸è§£å†³æ–¹æ³•ï¼šé¦–å…ˆï¼Œä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹ _config.yml æ–‡ä»¶ä¸­ highlight.enable çš„å€¼ä¸º falseã€‚ç„¶åhexo clean&amp; hexo g&amp; hexo så¥½äº†ã€‚æ³¨ï¼šä½œè€…ç»™çš„è§£å†³æ–¹æ¡ˆæ¯”æˆ‘è¿™ä¸ªè¦å¤šä¸€æ­¥ï¼Œæˆ‘åœ¨è¿™é‡Œè´´å‡ºæ¥ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚3ã€ç›®å½•å®šä½å†…å®¹æœ‰åå·®æˆ‘åå¤çš„å»æµ‹è¯•ï¼Œåæ¥å‘ç°ï¼Œå¯èƒ½æœ‰ä¸¤ä¸ªåŸå› ä¼šå¯¼è‡´è¿™ä¸ªé—®é¢˜çš„å‡ºç°ï¼šç½‘é¡µæ²¡æœ‰åˆ·æ–°å®Œå…¨çš„æ—¶å€™ï¼Œç‚¹å‡»ç›®å½•ä»–æœ‰å¯èƒ½ä¸ä¼šè·³è½¬ã€‚è§£å†³æ–¹æ³•ï¼šæ³•ä¸€ï¼šç­‰å¾…ç½‘é¡µåˆ·æ–°å®Œå…¨ã€‚æ³•äºŒï¼šæ‰‹åŠ¨çš„å»åœæ­¢ç½‘é¡µçš„åˆ·æ–°ï¼ˆè¿™ä¸ªæ¥çš„æ¯”è¾ƒå¿«ä¸€ç‚¹ï¼Œå“ˆå“ˆï¼‰ä½ çš„æ–‡ç« çš„æ ‡é¢˜æ ¼å¼æœ‰é—®é¢˜ï¼Œæ¯”å¦‚ï¼Œæˆ‘ç”¨Typoraè½¯ä»¶æ¥å†™æ–‡ç« ï¼Œè¿™ä¸ªè½¯ä»¶å°±æ˜¯æ‰€å†™å³æ‰€å¾—ã€‚ä½†æ˜¯è¿™æ ·ä½ å°±ä¸å®¹æ˜“å‘ç°æ ¼å¼ç»†èŠ‚å¤„çš„é”™è¯¯ã€‚é”™è¯¯ç¤ºèŒƒï¼šæˆ‘å…ˆå†™äº†ä¸€ä¸ªä¸€çº§æ ‡é¢˜ï¼Œç„¶åï¼Œæˆ‘åˆç‚¹å‡»å¼•ç”¨ï¼Œå°±å˜æˆè¿™æ ·äº†ï¼šè¿™ç§å†™æ³•åœ¨Typoraä¸­ï¼Œæ˜¯ä¸ä¼šè®¤ä¸ºå®ƒæ˜¯ä¸€çº§æ ‡é¢˜çš„ã€‚æˆ‘ä»¬æ‰“å¼€æºç æŸ¥çœ‹ä»–çš„æ ¼å¼ï¼š&gt; # é…ç½®ã€‚ä»–çš„æ ¼å¼æ˜¯è¿™æ ·çš„ã€‚å°±æ˜¯è¿™é‡Œå‡ºé”™äº†ï¼Œåœ¨materyä¸»é¢˜ä¸­è¿™æ ·å†™å®ƒä»ç„¶ä¼šè¯†åˆ«æˆæ ‡é¢˜ï¼Œç„¶åå°±å¯¼è‡´ä»è¿™ä¸ªæ ‡é¢˜å¼€å§‹åé¢çš„æ ‡é¢˜ï¼Œåœ¨ä½ ç‚¹å‡»è¿™äº›æ ‡é¢˜çš„æ—¶å€™ï¼Œå®ƒä¼šå®šä½é”™è¯¯ã€‚è§£å†³æ–¹æ³•ï¼šæˆ‘ä»¬ä¸€å®šè¦éµå¾ªMarkdownæ ¼å¼çš„è¯­æ³•ï¼Œä¸€å®šè¦ï¼Œä¸€å®šè¦ã€‚","categories":[{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"https://longlongqin.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"}],"tags":[{"name":"materyä¸»é¢˜é…ç½®","slug":"materyä¸»é¢˜é…ç½®","permalink":"https://longlongqin.github.io/tags/matery%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"}]},{"title":"Tsinghua_Online_Judge_ç»ƒä¹ ","slug":"Tsinghua-Online-Judge-ç»ƒä¹ ","date":"2020-03-04T09:23:29.000Z","updated":"2020-04-13T10:24:02.448Z","comments":true,"path":"archives/d4fa.html","link":"","permalink":"https://longlongqin.github.io/archives/d4fa.html","excerpt":"","text":"CG2017 PA1-1 Convex Hull (å‡¸åŒ…)é¢˜ç›®Description (æè¿°)After learning Chapter 1, you must have mastered the convex hull very well. Yes, convex hull is at the kernel of computational geometry and serves as a fundamental geometric structure. Thatâ€™s why you are asked to implement such an algorithm as your first programming assignments.Specifically, given a set of points in the plane, please construct the convex hull and output an encoded description of all the extreme points.ç»è¿‡äº†ç¬¬ä¸€ç« çš„å­¦ä¹ ï¼Œæƒ³å¿…ä½ å¯¹äºå‡¸åŒ…çš„è®¤è¯†å·²ç»éå¸¸æ·±åˆ»ã€‚æ˜¯çš„ï¼Œå‡¸åŒ…æ˜¯è®¡ç®—å‡ ä½•çš„æ ¸å¿ƒé—®é¢˜ï¼Œä¹Ÿæ˜¯ä¸€ç§åŸºç¡€æ€§çš„å‡ ä½•ç»“æ„ã€‚å› æ­¤ä½ çš„ç¬¬ä¸€é¡¹ç¼–ç¨‹ä»»åŠ¡ï¼Œå°±æ˜¯æ¥å®ç°è¿™æ ·çš„ä¸€ä¸ªç®—æ³•ã€‚å…·ä½“åœ°ï¼Œå¯¹äºå¹³é¢ä¸Šçš„ä»»æ„ä¸€ç»„ç‚¹ï¼Œè¯·æ„é€ å‡ºå¯¹åº”çš„å‡¸åŒ…ï¼Œå¹¶åœ¨ç»è¿‡ç¼–ç è½¬æ¢ä¹‹åè¾“å‡ºæ‰€æœ‰æç‚¹çš„ä¿¡æ¯ã€‚Input (è¾“å…¥)The first line is an integer n &gt; 0, i.e., the total number of input points.The k-th of the following n lines gives the k-th point:pk = (xk, yk), k = 1, 2, â€¦, nBoth xk and yk here are integers and they are delimited by a space.ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ­£æ•´æ•°é¦–è¡Œä¸ºä¸€ä¸ªæ­£æ•´æ•°n &gt; 0ï¼Œå³è¾“å…¥ç‚¹çš„æ€»æ•°ã€‚éšånè¡Œä¸­çš„ç¬¬kè¡Œç»™å‡ºç¬¬kä¸ªç‚¹ï¼špk = (xk, yk), k = 1, 2, â€¦, nè¿™é‡Œï¼Œxkä¸ykå‡ä¸ºæ•´æ•°ï¼Œä¸”äºŒè€…ä¹‹é—´ä»¥ç©ºæ ¼åˆ†éš”ã€‚Output (è¾“å‡º)Let { s1, s2, â€¦, sh } be the indices of all the extreme points, h â‰¤ n. Output the following integer as your solution:( s1 * s2 * s3 * â€¦ * sh * h ) mod (n + 1)è‹¥ { s1, s2, â€¦, sh } ä¸ºæ‰€æœ‰æç‚¹çš„ç¼–å·, h â‰¤ nï¼Œåˆ™ä½œä¸ºä½ çš„è§£ç­”ï¼Œè¯·è¾“å‡ºä»¥ä¸‹æ•´æ•°ï¼š( s1 * s2 * s3 * â€¦ * sh * h ) mod (n + 1)Sample Input (è¾“å…¥æ ·ä¾‹)12345678910111213141516171819202122231234567891011107 9-8 -1-3 -11 4-3 96 -47 56 6-6 100 8Sample Output (è¾“å‡ºæ ·ä¾‹)12317 &#x2F;&#x2F; ( 9 x 2 x 6 x 7 x 1 x 5 ) % (10 + 1)Limitation (é™åˆ¶)3 â‰¤ n â‰¤ 10^5Each coordinate of the points is an integer from (-10^5, 10^5). There are no duplicated points. Each point is selected uniformly randomly in (-10^5, 10^5) x (-10^5, 10^5).All points on extreme edges are regarded as extreme points and hence should be included in your solution.Time Limit: 2 secSpace Limit: 512 MB3 â‰¤ n â‰¤ 10^5æ‰€æœ‰ç‚¹çš„åæ ‡å‡ä¸ºèŒƒå›´(-10^5, 10^5)å†…çš„æ•´æ•°ï¼Œä¸”æ²¡æœ‰é‡åˆç‚¹ã€‚æ¯ä¸ªç‚¹åœ¨(-10^5, 10^5) x (-10^5, 10^5)èŒƒå›´å†…å‡åŒ€éšæœºé€‰å–æè¾¹ä¸Šçš„æ‰€æœ‰ç‚¹å‡è¢«è§†ä½œæç‚¹ï¼Œæ•…åœ¨è¾“å‡ºæ—¶äº¦ä¸å¾—é—æ¼æ—¶é—´é™åˆ¶ï¼š2 secç©ºé—´é™åˆ¶ï¼š512 MBHint (æç¤º)Use the CH algorithms presented in the lectures.è¯¾ç¨‹ä¸­è®²è§£è¿‡çš„å‡¸åŒ…ç®—æ³•è§£ç­”ï¼šGraham Scanç®—æ³•1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283#include&lt;iostream&gt;#include&lt;string&gt;#include&lt;algorithm&gt;#include&lt;vector&gt;using namespace std;struct point &#123; long long x, y, id; point() :x(0), y(0) &#123;&#125; point(long long x, long long y) :x(x), y(y) &#123;&#125; bool operator ==(const point&amp; p) const &#123; return x == p.x &amp;&amp; y == p.y; &#125;&#125;PP; //PP: Polar Pointvector&lt;point&gt; points;long long area2(point p, point q, point s) &#123; /* |p.x p.y 1| |q.x q.y 1| == 2*DirectedTriangleArea(p,q,s) |s.x s.y 1| */ return p.x * q.y - s.x * q.y + q.x * s.y - q.x * p.y + s.x * p.y - p.x * s.y;&#125;bool toLeftTest(point p, point q, point s) &#123; //When return value large than 0, S is on the left side of ray PQ return area2(p, q, s) &gt; 0;&#125;bool toLeftTest2(point p, point q, point s) &#123; //When return value large than 0, S is on the left side of ray PQ return area2(p, q, s) &gt;= 0;&#125;bool cmp(const point&amp; p1, const point&amp; p2) &#123; // Sort according to polar angle return PP == p1 || !(PP == p2) &amp;&amp; toLeftTest(PP, p1, p2);&#125;point LTL(vector&lt;point&gt;&amp; points) &#123; //Lowest then leftmost point ltl = points[0]; for (int i = 1; i &lt; points.size(); i++) &#123; if (points[i].y &lt; ltl.y || points[i].y == ltl.y &amp;&amp; points[i].x &lt; ltl.x) ltl = points[i]; &#125; return ltl;&#125;vector&lt;point&gt; grahamScan() &#123; PP = LTL(points); sort(points.begin(), points.end(), cmp); vector&lt;point&gt; S, T; S.push_back(points[0]); S.push_back(points[1]); for (int i = points.size() - 1; i &gt; 1; i--)T.push_back(points[i]); while (!T.empty()) &#123; if (toLeftTest2(S[S.size() - 2], S[S.size() - 1], T[T.size() - 1])) &#123; S.push_back(T[T.size() - 1]); T.pop_back(); &#125; else S.pop_back(); &#125; return S;&#125;int main() &#123; ios::sync_with_stdio(false); long long n; cin &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; point tmp; cin &gt;&gt; tmp.x &gt;&gt; tmp.y; tmp.id = i; points.push_back(tmp); &#125; vector&lt;point&gt; result; if (points.size() &gt; 2)result = grahamScan(); else result = points; long long res = 1; for (int i = 0; i &lt; result.size(); i++) &#123; //cout &lt;&lt; result[i].id &lt;&lt; endl;//debug res = ((res % (n + 1)) * (result[i].id % (n + 1))) % (n + 1); &#125; res = ((res % (n + 1)) * (result.size() % (n + 1))) % (n + 1); cout &lt;&lt; res; system(\"pause\"); return 0;&#125;åˆ†æ•°ï¼š92.5ä½¿ç”¨Graham Scanç®—æ³•ã€‚å‡¸åŒ…æ¿å­é¢˜ã€‚","categories":[{"name":"OJ","slug":"OJ","permalink":"https://longlongqin.github.io/categories/OJ/"}],"tags":[{"name":"OJ","slug":"OJ","permalink":"https://longlongqin.github.io/tags/OJ/"}]},{"title":"32ã€é»‘å®¢&æ”»å‡»","slug":"å­¦ä¹ ç¬”è®°/ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹ç¬”è®°/32ã€é»‘å®¢&æ”»å‡»","date":"2020-03-04T08:59:43.000Z","updated":"2020-04-01T02:29:03.700Z","comments":true,"path":"archives/622.html","link":"","permalink":"https://longlongqin.github.io/archives/622.html","excerpt":"é»‘å®¢å…¥ä¾µæœ€å¸¸è§çš„æ–¹å¼ä¸æ˜¯é€šè¿‡æŠ€æœ¯ï¼Œè€Œæ˜¯æ¬ºéª—åˆ«äººï¼Œè¿™ä¸ªç§°ä¸ºç¤¾ä¼šå·¥ç¨‹å­¦ï¼ˆSocial Engineeringï¼‰ï¼Œé€šè¿‡æ¬ºéª—åˆ«äººæ¥è®©äººæ³„éœ²ç§˜å¯†ï¼Œæˆ–è®©äººé…ç½®ç”µè„‘ç³»ç»Ÿæ¥å˜å¾—æ˜“äºæ”»å‡»ã€‚æœ€å¸¸è§çš„æ”»å‡»æ˜¯ç½‘ç»œé’“é±¼ï¼ˆPhishingï¼‰ï¼Œå…¶æ¬¡è¿˜æœ‰å‡æ‰˜ï¼ˆPretextingï¼‰ï¼Œæ”»å‡»è€…ç»™æŸä¸ªå…¬å¸æ‰“ç”µè¯ï¼Œå‡è£…æ˜¯ITéƒ¨é—¨çš„äººï¼Œæ”»å‡»è€…çš„ç¬¬ä¸€é€šç”µè¯ä¸€èˆ¬ä¼šå«äººè½¬æ¥ï¼Œè¿™æ ·å¦ä¸€ä¸ªæ¥çš„æ—¶å€™ï¼Œç”µè¯çœ‹èµ·æ¥å°±åƒå†…éƒ¨çš„ï¼Œç„¶åè®©åˆ«äººæŠŠç”µè„‘é…ç½®å¾—æ˜“äºå…¥ä¾µï¼Œæˆ–è€…è®©ä»–ä»¬æ³„éœ²æœºå¯†ä¿¡æ¯ï¼Œæ¯”å¦‚å¯†ç æˆ–ç½‘ç»œé…ç½®ã€‚","text":"é»‘å®¢å…¥ä¾µæœ€å¸¸è§çš„æ–¹å¼ä¸æ˜¯é€šè¿‡æŠ€æœ¯ï¼Œè€Œæ˜¯æ¬ºéª—åˆ«äººï¼Œè¿™ä¸ªç§°ä¸ºç¤¾ä¼šå·¥ç¨‹å­¦ï¼ˆSocial Engineeringï¼‰ï¼Œé€šè¿‡æ¬ºéª—åˆ«äººæ¥è®©äººæ³„éœ²ç§˜å¯†ï¼Œæˆ–è®©äººé…ç½®ç”µè„‘ç³»ç»Ÿæ¥å˜å¾—æ˜“äºæ”»å‡»ã€‚æœ€å¸¸è§çš„æ”»å‡»æ˜¯ç½‘ç»œé’“é±¼ï¼ˆPhishingï¼‰ï¼Œå…¶æ¬¡è¿˜æœ‰å‡æ‰˜ï¼ˆPretextingï¼‰ï¼Œæ”»å‡»è€…ç»™æŸä¸ªå…¬å¸æ‰“ç”µè¯ï¼Œå‡è£…æ˜¯ITéƒ¨é—¨çš„äººï¼Œæ”»å‡»è€…çš„ç¬¬ä¸€é€šç”µè¯ä¸€èˆ¬ä¼šå«äººè½¬æ¥ï¼Œè¿™æ ·å¦ä¸€ä¸ªæ¥çš„æ—¶å€™ï¼Œç”µè¯çœ‹èµ·æ¥å°±åƒå†…éƒ¨çš„ï¼Œç„¶åè®©åˆ«äººæŠŠç”µè„‘é…ç½®å¾—æ˜“äºå…¥ä¾µï¼Œæˆ–è€…è®©ä»–ä»¬æ³„éœ²æœºå¯†ä¿¡æ¯ï¼Œæ¯”å¦‚å¯†ç æˆ–ç½‘ç»œé…ç½®ã€‚é‚®ä»¶é‡Œå¸¦æœ¨é©¬ï¼ˆtrojan horseï¼‰ä¹Ÿæ˜¯å¸¸è§æ‰‹æ®µï¼Œæœ¨é©¬é€šå¸¸ä¼šä¼ªè£…æˆæ— å®³çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ç…§ç‰‡æˆ–å‘ç¥¨ï¼Œä½†å®é™…ä¸Šæ˜¯æ¶æ„è½¯ä»¶ï¼Œæœ‰çš„ä¼šå·æ•°æ®ï¼Œæœ‰çš„ä¼šåŠ å¯†æ–‡ä»¶ã€‚å¦‚æœæ”»å‡»è€…æ— æ³•ç”¨æœ¨é©¬æˆ–ç”µè¯æ¬ºéª—ï¼Œæ”»å‡»è€…åªèƒ½è¢«è¿«ä½¿ç”¨å…¶ä»–æ‰‹æ®µï¼Œæ–¹æ³•ä¹‹ä¸€å°±æ˜¯æš´åŠ›ç ´è§£ï¼Œå°è¯•æ‰€æœ‰å¯èƒ½çš„å¯†ç ï¼Œç›´åˆ°è¿›å…¥ç³»ç»Ÿï¼Œå¤§å¤šæ•°ç°ä»£ç³»ç»Ÿä¼šåŠ é•¿ç­‰å¾…æ—¶é—´æ¥æŠµå¾¡è¿™ç§æ”»å‡»ï¼Œæ¯æ¬¡å¤±è´¥å°±åŠ é•¿ç­‰å¾…æ—¶é—´ï¼Œç”šè‡³è¶…è¿‡ä¸€å®šæ¬¡æ•°åï¼Œå®Œå…¨å°é”ã€‚ç°åœ¨å‡ºç°äº†ä¸€ç§æ”»ç ´æ–¹æ³•ç§°ä¸ºNANDé•œåƒï¼Œå¦‚æœèƒ½ç‰©ç†æ¥è§¦åˆ°ç”µè„‘ï¼Œå¯ä»¥å¾€å†…å­˜ä¸Šæ¥å‡ æ ¹çº¿ï¼Œå¤åˆ¶æ•´ä¸ªå†…å­˜ï¼Œç„¶åæš´åŠ›å°è¯•å¯†ç ï¼Œç›´åˆ°è®¾å¤‡è®©ä½ ç­‰å¾…ã€‚è¿™æ—¶åªè¦æŠŠå¤åˆ¶çš„å†…å®¹è¦†ç›–æ‰å†…å­˜ï¼Œæœ¬è´¨ä¸Šé‡ç½®äº†å†…å­˜ï¼Œå°±ä¸ç”¨ç­‰å¾…ï¼Œå¯ä»¥ç»§ç»­å°è¯•å¯†ç ã€‚å¦‚æœæ— æ³•ç‰©ç†æ¥è§¦åˆ°è®¾å¤‡ï¼Œå°±éœ€è¦è¿œç¨‹æ”»å‡»ï¼Œæ¯”å¦‚é€šè¿‡äº’è”ç½‘ï¼Œè¿™ä¸€èˆ¬éœ€è¦æ”»å‡»è€…åˆ©ç”¨ç³»ç»Ÿæ¼æ´ï¼Œæ¥è·å¾—æŸäº›èƒ½åŠ›æˆ–è®¿é—®æƒé™ï¼Œç§°ä¸ºæ¼æ´åˆ©ç”¨ï¼ˆExploitï¼‰ã€‚ä¸€ç§å¸¸è§çš„æ¼æ´åˆ©ç”¨å«ç¼“å†²åŒºæº¢å‡ºï¼ˆBuffer Overflowï¼‰ï¼Œè¿™é‡Œçš„ç¼“å†²åŒºæ˜¯æŒ‡é¢„ç•™çš„ä¸€å—å†…å­˜ç©ºé—´ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ç³»ç»Ÿç™»å½•ç•Œé¢è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œè€Œç³»ç»Ÿæ˜¯ç”¨ç¼“å†²åŒºæ¥å­˜å‚¨è¾“å…¥å€¼çš„ï¼Œå‡è®¾ç¼“å†²åŒºå¤§å°ä¸º10ï¼Œå¹¶ä¸”ç¼“å†²åŒºå‰åè‚¯å®šè¿˜æœ‰å…¶ä»–æ•°æ®ï¼Œå½“ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç æ—¶ï¼Œè¿™äº›å€¼å°±ä¼šè¢«å¤åˆ¶åˆ°ç¼“å†²åŒºä¸­æ¥è¿›è¡ŒéªŒè¯ï¼Œè€Œè¯¥æ–¹æ³•ä¼šæº¢å‡ºç¼“å†²åŒºï¼Œæ¯”å¦‚è¾“å…¥è¶…è¿‡10ä¸ªå­—ç¬¦çš„å¯†ç ï¼Œä¼šè¦†ç›–æ‰ç›¸é‚»çš„æ•°æ®ï¼Œæœ‰æ—¶ä¼šè®©ç¨‹åºæˆ–ç³»ç»Ÿå´©æºƒï¼Œå› ä¸ºé‡è¦å€¼è¢«åƒåœ¾æ•°æ®è¦†ç›–æ‰äº†ã€‚è¿™é‡Œåªæ˜¯è®©ç³»ç»Ÿå´©æºƒï¼Œä½†æ˜¯æ”»å‡»è€…å¯ä»¥è¾“å…¥æœ‰æ„ä¹‰çš„æ–°å€¼åˆ°ç¨‹åºçš„å†…å­˜ä¸­ï¼Œæ¯”å¦‚æŠŠis_adminæ ‡å¿—ä½çš„å€¼æ”¹ä¸ºtrueï¼Œæœ‰äº†ä»»æ„ä¿®æ”¹å†…å­˜çš„èƒ½åŠ›ï¼Œé»‘å®¢å°±å¯ä»¥ç»•è¿‡ç™»å½•è¿™ç±»ä¸œè¥¿ï¼Œç”šè‡³ä½¿ç”¨é‚£ä¸ªç¨‹åºåŠ«æŒæ•´ä¸ªç³»ç»Ÿã€‚æœ‰è®¸å¤šæ–¹æ³•é˜»æ­¢ç¼“å†²åŒºæº¢å‡ºï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å¤åˆ¶åˆ°å†…å­˜ä¹‹å‰å…ˆæ£€æŸ¥é•¿åº¦ï¼Œç§°ä¸ºè¾¹ç•Œæ£€æŸ¥ï¼ˆBounds checkingï¼‰ï¼Œè®¸å¤šç°ä»£ç¼–ç¨‹è¯­è¨€éƒ½è‡ªå¸¦è¾¹ç•Œæ£€æŸ¥ï¼Œç¨‹åºä¹Ÿä¼šéšæœºå­˜æ”¾å˜é‡åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼Œè¿™æ ·é»‘å®¢å°±ä¸çŸ¥é“åº”è¯¥è¦†ç›–å†…å­˜çš„å“ªéƒ¨åˆ†ï¼Œä½¿å¾—æ›´å®¹æ˜“è®©ç¨‹åºå´©æºƒï¼Œè€Œä¸æ˜¯è·å¾—è®¿é—®æƒé™ã€‚ç¨‹åºä¹Ÿå¯ä»¥åœ¨ç¼“å†²åŒºåï¼Œé¢„ç•™ä¸€äº›ä¸ç”¨çš„ç©ºé—´ï¼Œç„¶åè·Ÿè¸ªé‡Œé¢çš„å€¼ï¼Œçœ‹æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œæ¥åˆ¤æ–­æ˜¯å¦æœ‰æ”»å‡»ï¼Œè¿™äº›ä¸ç”¨çš„å†…å­˜ç©ºé—´ç§°ä¸ºé‡‘ä¸é›€ï¼ˆCanariesï¼‰ã€‚å¦ä¸€ç§ç»å…¸æ‰‹æ®µæ˜¯ä»£ç æ³¨å…¥ï¼ˆCode Injectionï¼‰ï¼Œæœ€å¸¸ç”¨äºæ”»å‡»ç”¨æ•°æ®åº“çš„ç½‘ç«™ã€‚å‡è®¾ç½‘é¡µä¸Šæœ‰ç™»å½•æç¤ºï¼Œå½“ç”¨æˆ·ç‚¹å‡»â€œç™»å½•â€ï¼Œè¾“å…¥æ–‡æœ¬å°±ä¼šå‘é€æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å°±ä¼šè¿è¡Œä»£ç ï¼Œæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±çœ‹å¯†ç æ˜¯å¦åŒ¹é…ã€‚ä¸ºæ­¤æœåŠ¡å™¨ä¼šæ‰§è¡Œä¸€æ®µsqlæŸ¥è¯¢ä»£ç ï¼Œæ¯”å¦‚1SELECT password FROM users WHERE username='___';è¿™é‡Œè¯­å¥å°±æ˜¯è¦ä»usersè¡¨ä¸­æŸ¥æ‰¾usernameä¸º___çš„å¯†ç passwordã€‚ è¿™é‡Œçš„___å°±æ˜¯ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åã€‚ç”±æ­¤æ”»å‡»è€…å°±èƒ½æŠŠsqlå‘½ä»¤è¾“å…¥åˆ°ç”¨æˆ·åä¸­ï¼Œæ¯”å¦‚whatever&#39;;DROP TABLE users;&#39;ï¼Œè¿™æ—¶ä¸Šé¢çš„æŸ¥è¯¢è¯­å¥å°±ä¼šå˜æˆ1SELECT password FROM users WHERE username='whatever';DROP TABLE users;';å¦‚æœæœåŠ¡å™¨å­˜åœ¨ç”¨æˆ·åwhareverï¼Œæ•°æ®åº“å°±ä¼šè¿”å›å¯†ç ï¼Œ å½“ç„¶æˆ‘ä»¬æ— æ³•å¾—çŸ¥å¯†ç æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥æœåŠ¡å™¨ä¼šæ‹’ç»æˆ‘ä»¬ï¼›å¦‚æœä¸å­˜åœ¨ç”¨æˆ·åwhareverï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ç©ºå¯†ç æˆ–è€…ç›´æ¥é”™è¯¯ï¼ŒæœåŠ¡å™¨ä¹Ÿä¼šæ‹’ç»æˆ‘ä»¬ã€‚ ä½†æ˜¯æˆ‘ä»¬å…³å¿ƒçš„æ˜¯åé¢çš„ä»£ç DROP TABLE users;è¿™ä¸ªæ˜¯æˆ‘ä»¬æ³¨å…¥çš„å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯åˆ æ‰usersè¿™å¼ è¡¨ã€‚å¦‚ä»Šå‡ ä¹æ‰€æœ‰æœåŠ¡å™¨éƒ½ä¼šé˜²å¾¡è¿™ç§æ‰‹æ®µã€‚ç¨‹åºå‘˜éœ€è¦è®¤è¯†åˆ°ä»å¤–ç•Œè¾“å…¥çš„ä¿¡æ¯éƒ½æ˜¯å±é™©çš„ï¼Œå¿…é¡»è¦å¥½å¥½æ£€æŸ¥ï¼Œå¾ˆå¤šç”¨æˆ·åå’Œå¯†ç è¡¨å•ï¼Œä¸ä¼šè®©ä½ ç›´æ¥è¾“å…¥ç‰¹æ®Šç¬¦å·ï¼Œæ¯”å¦‚åˆ†å·æˆ–æ‹¬å·ï¼Œæ¥ä½œä¸ºç¬¬ä¸€é“é˜²å¾¡ã€‚å¥½çš„æœåŠ¡å™¨ä¹Ÿä¼šæ¸…ç†è¾“å…¥ï¼Œæ¯”å¦‚ä¿®æ”¹æˆ–åˆ é™¤ç‰¹æ®Šå­—ç¬¦ï¼Œç„¶åæ‰æ”¾åˆ°æ•°æ®åº“æŸ¥è¯¢è¯­å¥ä¸­ã€‚å½“è½¯ä»¶åˆ¶é€ è€…ä¸çŸ¥é“çš„æ–°æ¼æ´è¢«å‘ç°æ—¶ï¼Œç§°ä¸º0dayæ¼æ´ï¼ˆZero Day Vulnerabilityï¼‰ï¼Œé»‘å®¢å°±ä¼šæŠ¢åœ¨ç™½å¸½ç¨‹åºå‘˜åšå‡ºè¡¥ä¸ä¹‹å‰å°½å¯èƒ½åˆ©ç”¨æ¼æ´ã€‚å¦‚æœæœ‰è¶³å¤Ÿå¤šçš„ç”µè„‘æœ‰æ¼æ´ï¼Œè®©æ¶æ„ç¨‹åºå¯ä»¥è‡ªåŠ¨åœ°åœ¨ç”µè„‘ä¹‹é—´äº’ç›¸ä¼ æ’­ï¼Œç§°ä¸ºè •è™«ï¼ˆWormï¼‰ã€‚å¦‚æœé»‘å®¢æ‹¿ä¸‹å¤§é‡ç”µè„‘ï¼Œè¿™äº›ç”µè„‘å¯ä»¥ç»„æˆåƒµå°¸ç½‘ç»œï¼ˆBotnetï¼‰ï¼Œå¯ä»¥ç”¨äºå¾ˆå¤šç›®çš„ï¼Œæ¯”å¦‚å‘å¤§é‡åƒåœ¾é‚®ä»¶ç­‰ï¼Œç”¨åˆ«äººç”µè„‘çš„è®¡ç®—èƒ½åŠ›æ¥æŒ–æ¯”ç‰¹å¸ï¼Œæˆ–å‘èµ·DDOSæ¥æ”»å‡»æœåŠ¡å™¨ã€‚DDOSå°±æ˜¯åƒµå°¸ç½‘ç»œé‡Œçš„æ‰€æœ‰ç”µè„‘å‘ä¸€å¤§å †åƒåœ¾ä¿¡æ¯åˆ°æœåŠ¡å™¨ä¸Šï¼Œé€ æˆæœåŠ¡å™¨çš„é˜»å¡ã€‚å®Œ~~~","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://longlongqin.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹","slug":"ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹","permalink":"https://longlongqin.github.io/tags/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E9%80%9F%E6%88%90%E8%AF%BE%E3%80%8B/"}]},{"title":"Hexo åšå®¢æ¡†æ¶æ­å»º","slug":"Hexoåšå®¢æ­å»º/Hexoåšå®¢æ¡†æ¶æ­å»º","date":"2020-03-01T13:27:52.000Z","updated":"2020-03-17T08:12:17.477Z","comments":true,"path":"archives/7f7e.html","link":"","permalink":"https://longlongqin.github.io/archives/7f7e.html","excerpt":"æ­å»ºè¿™ä¸ªåšå®¢èµ·å› æ˜¯2020å¹´çš„äºŒæœˆæœ«çš„æŸä¸€å¤©æ™šä¸Šï¼Œæ— èŠé€›Bç«™ï¼Œç„¶åå°±çœ‹åˆ°äº†ä¸€ä¸ªåšå®¢æ­å»ºæ•™ç¨‹ï¼Œéšæœºå°±æœ‰äº†è¿™ä¸€ç³»åˆ—çš„æ–‡ç« äº†ã€‚","text":"æ­å»ºè¿™ä¸ªåšå®¢èµ·å› æ˜¯2020å¹´çš„äºŒæœˆæœ«çš„æŸä¸€å¤©æ™šä¸Šï¼Œæ— èŠé€›Bç«™ï¼Œç„¶åå°±çœ‹åˆ°äº†ä¸€ä¸ªåšå®¢æ­å»ºæ•™ç¨‹ï¼Œéšæœºå°±æœ‰äº†è¿™ä¸€ç³»åˆ—çš„æ–‡ç« äº†ã€‚å‰è¨€æˆ‘çš„æ˜¯åœ¨windowsæ“ä½œç³»ç»Ÿä¸Šé¢ï¼Œåœ¨å…¶ä»–çš„ç³»ç»Ÿä¸Šé¢å¤§åŒå°å¼‚ã€‚ä¹Ÿå‚è€ƒäº†å¾ˆå¤šæ–‡ç« åŠè§†é¢‘æ•™ç¨‹ã€‚ä¸»è¦å‚è€ƒçš„æ˜¯ï¼šç¨‹åºç¾Šçš„è§†é¢‘ï¼šhttps://www.bilibili.com/video/av44544186?from=search&amp;seid=12981624311298276946æ–‡ç« ï¼šhttps://ouwen666.gitee.io/2020/01/29/Hexo+Giteeæ­å»ºä¸ªäººåšå®¢ä½œè€…éƒ¨ç½²çš„æ˜¯giteehttps://godweiyang.com/2018/04/13/hexo-blog/#toc-heading-6å«æœ‰ä¸ªæ€§åŒ–é…ç½®æ³¨ï¼šæ–‡ä¸­çš„æŒ‡ä»¤éƒ½æ˜¯åœ¨cmdï¼ˆWindowsä¸­çš„å‘½ä»¤æç¤ºç¬¦ï¼‰ä¸­å®Œæˆçš„ã€‚å¦‚æœåœ¨è¿™ä¹‹å‰ç”µè„‘ä¸Šå°±å·²ç»å®‰è£…äº†Git bashï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥åœ¨Git bashä¸­è¿è¡ŒæŒ‡ä»¤ã€‚ä¸‹é¢ä¼šç”¨å¾—åˆ°çš„å‘½ä»¤npm install=npm iã€‚åœ¨git cloneé¡¹ç›®çš„æ—¶å€™ï¼Œé¡¹ç›®æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰ node_modulesæ–‡ä»¶å¤¹ï¼Œé¡¹ç›®çš„ä¾èµ–æ–‡ä»¶å¯èƒ½å¾ˆå¤§ã€‚ç›´æ¥æ‰§è¡Œï¼Œnpmä¼šæ ¹æ®package.jsoné…ç½®æ–‡ä»¶ä¸­çš„ä¾èµ–é…ç½®ä¸‹è½½å®‰è£…ã€‚-global=-gï¼Œå…¨å±€å®‰è£…ï¼Œå®‰è£…åçš„åŒ…ä½äºç³»ç»Ÿé¢„è®¾ç›®å½•ä¸‹--save=-Sï¼Œå®‰è£…çš„åŒ…å°†å†™å…¥package.jsoné‡Œé¢çš„dependenciesï¼Œdependenciesï¼šç”Ÿäº§ç¯å¢ƒéœ€è¦ä¾èµ–çš„åº“å¼€å§‹é…ç½®å®‰è£…Node.jsåšå®¢æ¡†æ¶Hexoæ˜¯åŸºäºNode.jsåˆ¶ä½œçš„é™æ€åšå®¢ï¼Œæˆ‘ä»¬å¾…ä¼šè¦ç”¨åˆ°Node.jsé‡Œé¢çš„npm(node package manager)åŒ…ç®¡ç†å™¨æ¥å®‰è£…æ’ä»¶ã€‚å¯ä»¥ç‚¹å‡»è¿™é‡Œè¿›å…¥å…¶å®˜ç½‘ã€‚è¿›å…¥ä¹‹åï¼ŒæŒ‰ç…§æ“ä½œç³»ç»Ÿè¿›è¡Œä¸‹è½½å®‰è£…ã€‚å¦‚ä¸Šå›¾æ˜¯Windowsç³»ç»Ÿ64ä½çš„ç‰ˆæœ¬ï¼Œä¸Šé¢å®˜æ–¹æ¨èä¸‹è½½çš„ç‰ˆæœ¬ã€‚å®‰è£…é€‰é¡¹å°±æŒ‰é»˜è®¤çš„ï¼Œä¸€ç›´ç‚¹å‡»Nextã€‚ç„¶åï¼Œæ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸï¼šç”¨Win+Rå‘½ä»¤æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥node -v å’Œnpm -v ï¼Œå‡ºç°ç‰ˆæœ¬å·ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚æ·»åŠ cnpmæ³¨ï¼šå› ä¸ºnpmå®‰è£…æ’ä»¶æ˜¯ä»å›½å¤–æœåŠ¡å™¨ä¸‹è½½ï¼Œå—ç½‘ç»œå½±å“å¤§ï¼Œå¯èƒ½å‡ºç°å¼‚å¸¸ï¼Œå¦‚æœnpmçš„æœåŠ¡å™¨åœ¨ä¸­å›½å°±å¥½äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹äºåˆ†äº«çš„æ·˜å®å›¢é˜Ÿå¹²äº†è¿™äº‹ã€‚æ¥è‡ªå®˜ç½‘ï¼šâ€œè¿™æ˜¯ä¸€ä¸ªå®Œæ•´ npmjs.org é•œåƒï¼Œä½ å¯ä»¥ç”¨æ­¤ä»£æ›¿å®˜æ–¹ç‰ˆæœ¬(åªè¯»)ï¼ŒåŒæ­¥é¢‘ç‡ç›®å‰ä¸º 10åˆ†é’Ÿ ä¸€æ¬¡ä»¥ä¿è¯å°½é‡ä¸å®˜æ–¹æœåŠ¡åŒæ­¥ã€‚â€æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨npmå®‰è£…cnpmï¼Œå†cmdä¸­è¾“å…¥ï¼š1npm install cnpm -g â€“registry=https://registry.npm.taobao.orgå†è¾“å…¥ï¼šcnpm -væ¥æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸã€‚æ­¤æ—¶ï¼Œå‡è®¾æˆ‘ä»¬Node.jså®‰è£…æˆåŠŸã€‚å®‰è£…Hexoæ¡†æ¶æˆ‘ä»¬è¦åˆ©ç”¨Hexoæ¡†æ¶æ¨¡å‹æ¥æ­å»ºæˆ‘ä»¬çš„åšå®¢ã€‚ç‚¹å‡»è¿™é‡Œå¯ä»¥è¿›å…¥å…¶å®˜ç½‘ã€‚ä¸‹è½½è¯¥æ¡†æ¶ä¹Ÿä»ç„¶æ˜¯åœ¨cmdï¼ˆWindowsä¸­çš„â€œå‘½ä»¤æç¤ºç¬¦â€ï¼‰ä¸­è¾“å…¥æŒ‡ä»¤å®Œæˆçš„ã€‚åœ¨ä¸Šä¸€æ­¥æˆ‘ä»¬å®‰è£…äº†cnpmï¼Œç°åœ¨æˆ‘ä»¬è¦ç”¨å®ƒæ¥å®‰è£…hexoï¼Œç”¨cnpmå®‰è£…çš„é€Ÿåº¦æ›´å¿«ä¸€äº›ï¼Œä¹Ÿå¯ä»¥ç”¨npmï¼š1cnpm install -g hexo-cliæ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸï¼Œå½“è¿è¡Œä¹‹åå‡ºç°ç‰ˆæœ¬å·åˆ™å®‰è£…æˆåŠŸï¼š1hexo -vç°åœ¨ï¼Œæˆ‘ä»¬çš„Hexoæ¡†æ¶å·²ç»å®‰è£…æˆåŠŸäº†ã€‚åˆå§‹åŒ–Hexoæƒ³è¦çœ‹åˆ°åšå®¢è¿è¡Œèµ·æ¥ï¼Œæˆ‘ä»¬ç°åœ¨è¿˜éœ€è¦å¯¹Hexoæ¡†æ¶è¿›è¡Œåˆå§‹åŒ–ã€‚åœ¨ä½ çš„ç”µè„‘ä¸Šæ‰¾ä¸€ä¸ªåˆé€‚çš„ä½ç½®ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåå­—å¯ä»¥éšä¾¿å–ï¼Œå¯ä»¥ç”¨Blogç­‰ç­‰çš„åå­—ï¼Œéšä¸ªäººå–œå¥½å–åã€‚ä¸ºäº†ä¾¿äºæ¼”ç¤ºï¼Œå‡è®¾ä½ å–çš„åå­—å«åšï¼šblogæ³¨æ„ï¼Œåˆå§‹åŒ–æ˜¯åœ¨æˆ‘ä»¬åˆ›å»ºçš„è¿™ä¸ªblogæ–‡ä»¶å¤¹ä¸­åˆå§‹åŒ–çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬çš„å‘½ä»¤æç¤ºç¬¦ï¼ˆcmdï¼‰å·¦è¾¹çš„è·¯å¾„è¦åœ¨è¿™ä¸ªblogæ–‡ä»¶å¤¹ä¸­ã€‚è¿›å…¥åˆšåˆšåˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸­ç„¶åï¼Œåœ¨è¾“å…¥æŒ‡ä»¤ ï¼š1hexo initåˆå§‹åŒ–å®Œæˆåï¼Œæˆ‘ä»¬çš„blogæ–‡ä»¶å¤¹ä¸­ï¼Œå°±ä¼šç”Ÿæˆè¿™äº›æ–‡ä»¶ï¼šnode_modules: ä¾èµ–åŒ…publicï¼šå­˜æ”¾ç”Ÿæˆçš„é¡µé¢scaffoldsï¼šç”Ÿæˆæ–‡ç« çš„ä¸€äº›æ¨¡æ¿sourceï¼šç”¨æ¥å­˜æ”¾ä½ çš„æ–‡ç« themesï¼šä¸»é¢˜_config.yml: åšå®¢çš„é…ç½®æ–‡ä»¶åœ¨å®‰è£…ä¸€äº›å¿…è¦çš„åŒ…ï¼š1npm installåˆå§‹åŒ–å®Œæˆï¼Œåœ¨æ‰“å¼€hexoæœåŠ¡å™¨ï¼š123$ hexo sINFO Start processingINFO Hexo is running at http://localhost:4000 . Press Ctrl+C to stop.æˆ‘ä»¬ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ï¼šlocalhost:4000ï¼Œå°±å¯ä»¥çœ‹åˆ°ä½ çš„åšå®¢çš„é›å½¢å·²ç»å¥½äº†ã€‚æ›´æ¢ä¸»é¢˜åŠ å…¥ä½ è§‰å¾—è¿™ä¸ªä¸»é¢˜ä½ ä¸å–œæ¬¢ï¼Œæƒ³è¦æ‰¾ä¸€ä¸ªå…¶ä»–çš„ä¸»é¢˜ï¼Œä½ å¯ä»¥è¿›å…¥Hexoçš„å®˜ç½‘çš„ä¸»é¢˜æ¿å—ï¼Œæ¥é€‰æ‹©ä½ å–œæ¬¢çš„ä¸»é¢˜ï¼šå‡å¦‚ï¼Œä½ æƒ³æ›´æ¢ä¸º3-hexoï¼Œé‚£å°±ç‚¹å‡»å®ƒï¼Œä¼šè·³è½¬åˆ°è¯¥ä¸»é¢˜çš„åˆ›ä½œè€…çš„GitHubä¸Šï¼šå®‰è£…3-hexoä¸»é¢˜ï¼Œå…¶ä¸­å‘½ä»¤çš„themes/3-hexoæŒ‡çš„æ˜¯è¯¥ä¸»é¢˜çš„å®‰è£…ä½ç½®ï¼š1git clone https://github.com/yelog/hexo-theme-3-hexo.git themes/3-hexoå®‰è£…å®Œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è¿è¡Œï¼š123$ hexo clean # æ¸…é™¤æ‰€æœ‰è®°å½• $ hexo generate # ç”Ÿæˆé™æ€ç½‘é¡µ ç®€å†™ï¼šhexo g$ hexo server # å¯åŠ¨æœåŠ¡ ç®€å†™ï¼šhexo sç„¶åï¼Œæˆ‘ä»¬å°±èƒ½åœ¨æœ¬åœ°localhost:4000ä¸­ï¼ŒæŸ¥çœ‹ä¿®æ”¹å¥½çš„ä¸»é¢˜äº†ã€‚å®‰è£…Gitå¦‚æœä½ ä¸æƒ³åªåœ¨æœ¬åœ°ä¸ŠæŸ¥çœ‹ä½ çš„åšå®¢ï¼Œä¹Ÿæƒ³æœ‰è‡ªå·±çš„åšå®¢ç½‘å€é“¾æ¥ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä¸‹è½½Gitï¼ŒæŠŠåšå®¢å†…å®¹éƒ¨ç½²åˆ°GitHubæˆ–è€…giteeä¸Šé¢ã€‚æˆ‘ä»¬è¿™é‡Œä»¥GitHubä¸ºä¾‹ã€‚Gitçš„å®˜ç½‘ç‚¹å‡»è¿™é‡Œã€‚ç„¶åæŒ‰ç…§ä½ çš„ç”µè„‘çš„æ“ä½œç³»ç»Ÿä¸‹è½½ç›¸åº”çš„ç‰ˆæœ¬ã€‚å®‰è£…é€‰é¡¹è¿˜æ˜¯å…¨éƒ¨é»˜è®¤ï¼Œåªä¸è¿‡æœ€åä¸€æ­¥æ·»åŠ è·¯å¾„æ—¶é€‰æ‹©Use Git from the Windows Command Promptï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤æç¤ºç¬¦é‡Œæ‰“å¼€gitäº†ã€‚å®‰è£…å®Œæˆååœ¨å‘½ä»¤æç¤ºç¬¦ä¸­è¾“å…¥git --versionéªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸã€‚GitHubè´¦å·å¦‚æœä½ æ²¡æœ‰GitHubè´¦å·ï¼Œæˆ‘ä»¬ç°åœ¨å»åˆ›å»ºä¸€ä¸ªå§ã€‚ç‚¹å‡»è¿™é‡Œåˆ›å»ºã€‚åˆ›å»ºå®Œæˆä¹‹åï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªgithubä»“åº“ï¼šæ³¨æ„ä½ çš„ä»“åº“åå­—ä¸è¦éšä¾¿èµ·ï¼Œå¾…ä¼šæˆ‘ä»¬è¦ç”¨åˆ°ã€‚åŠ å…¥ä½ GitHubåå­—å«â€œAAAâ€ï¼Œé‚£ä¹ˆä»“åº“ä¸ªåå­—å°±ä¸€å®šæ˜¯ï¼šAAA.github.ioï¼šéƒ¨ç½²åšå®¢å°†åšå®¢éƒ¨ç½²åœ¨githubä¸­ç›®å‰ï¼Œè¿˜ä¸èƒ½éƒ¨ç½²åˆ°GitHubä¸Šã€‚è¿˜éœ€è¦ä¸‹è½½hexo-deployer-gitæ’ä»¶ï¼š1cnpm install hexo-deployer-git --save #é€šè¿‡cpnmå®‰è£…gitæ’ä»¶å¦‚æœï¼Œä½ æ˜¯åˆšåˆšæ‰ä¸‹è½½çš„Gitï¼Œåˆ™è¿˜éœ€è¦è®¾ç½®ä½ çš„å§“åå’Œé‚®ç®±ï¼š12git config --global user.name \"Firstname Lastname\" // åå­—ä½¿ç”¨è‹±æ–‡è¾“å…¥git config --global user.email \"your_email@example.com\"è¿˜æœ‰ä½ çš„SSH Keyï¼Œåˆ›å»ºå…¬å¼€å¯†é’¥ï¼š1ssh-keygen -t rsa -C &quot;your_email@example.com&quot;â€‹ æŠŠç”Ÿæˆçš„å¯†é’¥æ·»åŠ åˆ°GitHubä¸­å»ï¼šæ‰¾åˆ°ç”Ÿæˆçš„å¯†é’¥ï¼šå¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•é‡Œæ‰¾åˆ°.sshç›®å½•ï¼Œæˆ‘çš„åœ¨ï¼šC:\\Users\\xxxx\\.sshï¼ˆxxxxæ˜¯æˆ‘çš„ä¸€ä¸ªç›®å½•ï¼‰ã€‚é‡Œé¢æœ‰id_rsaå’Œid_rsa.pubä¸¤ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªå°±æ˜¯SSH Keyçš„ç§˜é’¥å¯¹ï¼Œid_rsaæ˜¯ç§é’¥ï¼Œä¸èƒ½æ³„éœ²å‡ºå»ï¼Œid_rsa.pubæ˜¯å…¬é’¥ï¼Œå¯ä»¥æ”¾å¿ƒåœ°å‘Šè¯‰ä»»ä½•äººã€‚åœ¨å¤´åƒä¸‹é¢ç‚¹å‡»settingsï¼Œå†ç‚¹å‡»SSH and GPG keysï¼Œæ–°å»ºä¸€ä¸ªSSHï¼Œåå­—éšä¾¿ï¼ŒæŠŠå…¬é’¥å¤åˆ¶è¿›å»ã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„gitä¸è¿œç¨‹çš„GitHubå·²ç»å»ºç«‹èµ·å…³ç³»äº†ã€‚æˆ‘ä»¬è¿˜éœ€è¦æŠŠblogæ–‡ä»¶å¤¹ä¸­çš„è®¾ç½®æ–‡ä»¶ï¼Œå³ï¼š_config.ymlï¼Œå°†æœ€åä¸€è¡Œè¿›è¡Œä¿®æ”¹,ï¼š1234deploy: type: git repository: https://github.com/longlongqin/longlongqin.github.io.git branch: masterâ€‹ repositoryä¿®æ”¹ä¸ºä½ è‡ªå·±çš„githubé¡¹ç›®åœ°å€ï¼Œåœ¨å®é™…æ“ä½œè¿‡ç¨‹ä¸­ï¼Œrepository: git@github.com:longlongqin/longlongqin.github.io.git,ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä¿®æ”¹ä¹‹åï¼Œæˆ‘ä»¬æ‰èƒ½éƒ¨ç½²åˆ°GitHubä¸Šï¼š12$ hexo deployer## åˆæ¬¡ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œéœ€è¦è¾“å…¥githubçš„ç”¨æˆ·åusernameå’Œå¯†ç passwordâ€‹ è¿™é‡Œï¼Œå°±æ˜¯åˆ©ç”¨åˆšä¸‹è½½çš„æ’ä»¶ï¼šhexo-deployer-gitç°åœ¨æˆ‘ä»¬å¯ä»¥è®¿é—®æˆ‘ä»¬åœ¨githubæœåŠ¡å™¨ä¸Šçš„åšå®¢ç½‘å€ï¼Œç½‘å€å°±æ˜¯æˆ‘ä»¬åˆšåˆšåˆ›å»ºä»“åº“çš„åå­—ï¼Œæ¯”å¦‚æˆ‘çš„ä»“åº“åæ˜¯ï¼šlonglongqin.github.ioï¼Œæˆ‘ä»¬å¤åˆ¶ç²˜è´´å®ƒåˆ°æµè§ˆå™¨ï¼Œç„¶åä½ å°±å¯ä»¥çœ‹åˆ°ä½ çš„åšå®¢å†…å®¹äº†ã€‚ğŸ˜ŠGitæäº¤åˆ°å¤šä¸ªä»“åº“https://yuxiang.ren/2017/08/25/hexo%E5%8D%9A%E5%AE%A2%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E5%88%B0%E5%A4%9A%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/éƒ¨ç½²åœ¨giteeéƒ¨ç½²åœ¨giteeä¸Šçš„å‘åœ¨giteeä¸Šé¢ï¼Œå’Œåœ¨GitHubä¸Šé¢éƒ¨ç½²å·®ä¸å¤šï¼Œä½†æ˜¯æœ‰äº›åœ°æ–¹æˆ‘ä»¬è¿˜æ˜¯è¦æ³¨æ„çš„ã€‚ä»“åº“å‘½åé—®é¢˜åœ¨åˆ›å»ºgiteeä»“åº“æ—¶ï¼Œæœ€å¥½ä¹Ÿæ˜¯å°†ä»“åº“åå­—å‘½åä¸ºä½ çš„è´¦å·çš„ç”¨æˆ·åï¼Œæ¯”å¦‚æˆ‘çš„ï¼šâ€‹ å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å‘½åä¸ºå…¶ä»–åå­—ï¼Œä½†æ˜¯æ¢æˆå…¶ä»–åå­—ä¹‹åï¼Œå¯èƒ½ä¼šå¸¦æ¥ä¸€ç³»åˆ—å…¶ä»–çš„é—®é¢˜ï¼Œæ¯”å¦‚å›¾ç‰‡æ— æ³•æ˜¾ç¤ºã€‚å…¶å®æˆ‘ä¹‹å‰å‘½åæˆå…¶ä»–åå­—ï¼Œå°±å‡ºç°äº†å¾ˆå¤§çš„é—®é¢˜ï¼šè¿™ç§æƒ…å†µæ˜¯å› ä¸ºï¼Œä»–æ‰¾ä¸åˆ°èµ„æºï¼ŒåŠ è½½é”™è¯¯ï¼šç†¬äº†ä¸€ä¸ªæ™šä¸Šï¼Œç»ˆäºå‘ç°äº†ã€‚åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æœ‰ï¼šç½‘ç«™åœ¨å­ç›®å½•çš„æƒ…å†µå¦‚æœä½ çš„ç½‘ç«™åœ¨ä¸€ä¸ªå­ç›®å½•ï¼ˆä¾‹å¦‚http://example.org/blogï¼‰ è®¾ç½®urlä¸ºhttp://example.org/blogå¹¶ä¸”è®¾ç½®rootä¸º/blog/è¯´æ¥ä¹Ÿå¥‡æ€ªï¼Œåœ¨GitHubä¸Šé¢ï¼Œå’Œæœ¬åœ°è¿è¡Œçš„æ—¶å€™éƒ½æ˜¯å¥½å¥½çš„ã€‚å°±æ˜¯åœ¨giteeä¸Šé¢å‡ºé”™äº†ã€‚o(ï¸¶ï¸¿ï¸¶)o å”‰è§£å†³å®ƒçš„åŠæ³•å°±æ˜¯ï¼šâ€‹ å°†rootæ·»åŠ ä¸Šç¼ºå°‘çš„é‚£ä¸€çº§ç›®å½•ï¼Œå³å¯1234567891011121314151617# URL## If your site is put in a subdirectory, set url as'http://yoursite.com/child' and root as '/child/'url: http://yoursite.com/childroot: /blog/permalink: :year/:month/:day/:post_title/permalink_defaults:pretty_urls: trailing_index: false # Set to false to remove trailing 'index.html' from permalinks trailing_html: true # Set to false to remove trailing '.html' from permalinksè¿™ä¸€ç¯‡å¸–å­é‡Œé¢ä¹Ÿæœ‰äººé‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œæœ€åä¹Ÿæ˜¯é€šè¿‡rootçš„ä¿®æ”¹è§£å†³çš„ã€‚ï¼šhttps://gitee.com/oschina/git-osc/issues/IFVWV?from=project-issuegitee pagesåˆ·æ–°é™¤äº†ä»“åº“åå­—éœ€è¦æ³¨æ„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„ï¼Œgiteeä¸ªäººç‰ˆä¼¼ä¹ä¸èƒ½è‡ªåŠ¨åˆ·æ–°ï¼Œæ‰€ä»¥ä½ æ¯æ¬¡hexo dä¹‹åï¼Œéœ€è¦æ‰‹åŠ¨çš„åˆ·æ–°gitee pagesï¼Œæ‰èƒ½æ˜¾ç¤ºä½ æ–°æäº¤çš„å†…å®¹ã€‚å†™æ–‡ç« ç¼–è¾‘å™¨æ¨èæ¨èä½¿ç”¨Typoraè¿™æ¬¾è½¯ä»¶ï¼Œç‚¹å‡»è¿™é‡Œè¿›å…¥å®˜ç½‘ï¼Œä»–å¯ä»¥å†™Markdownæ ¼å¼çš„å†…å®¹ï¼Œè¿™ä¸ªè½¯ä»¶çš„æ–¹ä¾¿ä¹‹å¤„åœ¨äºç›´æ¥å°†markdownè¯­æ³•å‘ˆç°å‡ºå…¶æ•ˆæœï¼Œå¹¶ä¸”å·²ç»é›†æˆäº†å¾ˆå¤šæ–¹ä¾¿çš„åŠŸèƒ½ï¼Œä½ æ— éœ€è®°ä½æ’å…¥ä»£ç çš„è¯­æ³•æ ¼å¼ï¼Œæ— éœ€è®°ä½æ’å…¥å›¾ç‰‡çš„è¯­æ³•æ ¼å¼ï¼Œè¿™ä½¿å¾—æˆ‘å¯ä»¥ä¸“å¿ƒå†™åšå®¢è€Œæ— æ³•å…³å¿ƒå­¦ä¹ markdownè¯­æ³•ã€‚æœ‰å¾ˆå¤šmdç¼–è¾‘å™¨ï¼Œä»–ä»¬åˆ†æˆä¸¤ä¸ªç•Œé¢ï¼Œä¸€ä¸ªç•Œé¢æ˜¯mdæºä»£ç ï¼Œå¦å¤–ä¸€ä¸ªç•Œé¢å®æ—¶æ›´æ–°æ˜¾ç¤ºå…¶æ•ˆæœï¼Œè€ŒTyporaæ˜¯æµ‘ç„¶ä¸€ä½“çš„ï¼ŒçœŸæ­£æ‰€è§å³æ‰€å¾—ï¼Œå°±è·Ÿåœ¨ä½¿ç”¨wordä¸€æ ·æ–¹ä¾¿ã€‚ä¸ä»…å¦‚æ­¤ï¼Œå®ƒè¿˜å¯ä»¥å¯¼å‡ºPDFã€Wordã€HTMLã€å›¾ç‰‡ç­‰æ ¼å¼ã€‚å¾…ç»­â€¦â€¦å›¾ç‰‡é—®é¢˜http://etrd.org/2017/01/23/hexo%E4%B8%AD%E5%AE%8C%E7%BE%8E%E6%8F%92%E5%85%A5%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87/Hexoçš„æ“ä½œæŒ‡ä»¤æˆ‘ä»¬åˆšå¼€å§‹ï¼Œå¯¹äºHexoçš„æŒ‡ä»¤ä¸å¤ªç†Ÿæ‚‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»–çš„å®˜ç½‘ä¸Šå»æŸ¥æ‰¾ç›¸åº”çš„æ“ä½œæŒ‡ä»¤ã€‚æ–‡ç« çš„front-matterFront-matter é€‰é¡¹è¯¦è§£Front-matter é€‰é¡¹ä¸­çš„æ‰€æœ‰å†…å®¹å‡ä¸ºéå¿…å¡«çš„ã€‚ä½†æˆ‘ä»ç„¶å»ºè®®è‡³å°‘å¡«å†™ title å’Œ dateçš„å€¼ã€‚é…ç½®é€‰é¡¹é»˜è®¤å€¼æè¿°titleMarkdown çš„æ–‡æ¡£æ ‡é¢˜æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹dateæ–‡æ¡£åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€authoræ ¹ _config.ymlä¸­çš„ authoræ–‡ç« ä½œè€…imgfeatureImagesä¸­çš„æŸä¸ªå€¼æ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: http://xxx.com/xxx.jpgtoptrueï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ top å€¼ä¸º trueï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µpasswordæ— æ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® password çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ SHA256 åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ config.yml ä¸­æ¿€æ´»äº† verifyPassword é€‰é¡¹toctrueæ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ config.yml ä¸­æ¿€æ´»äº† toc é€‰é¡¹mathjaxfalseæ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ mathjaxï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ _config.yml æ–‡æ¡£ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œsummaryæ— æ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™è¿›ç¨‹ä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦categoriesæ— æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»tagsæ— æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾Front-matter æ˜¯æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ --- åˆ†éš”çš„åŒºåŸŸï¼Œç”¨äºæŒ‡å®šä¸ªåˆ«æ–‡ä»¶çš„å˜é‡ï¼Œä¸¾ä¾‹æ¥è¯´ï¼š1234---title: Hello Worlddate: 2013/7/13 20:46:25---åˆ†ç±»å’Œæ ‡ç­¾åªæœ‰æ–‡ç« æ”¯æŒåˆ†ç±»å’Œæ ‡ç­¾ï¼Œæ‚¨å¯ä»¥åœ¨ Front-matter ä¸­è®¾ç½®ã€‚åœ¨å…¶ä»–ç³»ç»Ÿä¸­ï¼Œåˆ†ç±»å’Œæ ‡ç­¾å¬èµ·æ¥å¾ˆæ¥è¿‘ï¼Œä½†æ˜¯åœ¨ Hexo ä¸­ä¸¤è€…æœ‰ç€æ˜æ˜¾çš„å·®åˆ«ï¼šåˆ†ç±»å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ Foo, Bar ä¸ç­‰äº Bar, Fooï¼›è€Œæ ‡ç­¾æ²¡æœ‰é¡ºåºå’Œå±‚æ¬¡ã€‚12345categories:- Diarytags:- PS3- Gamesåˆ†ç±»æ–¹æ³•çš„åˆ†æ­§å¦‚æœæ‚¨æœ‰è¿‡ä½¿ç”¨ WordPress çš„ç»éªŒï¼Œå°±å¾ˆå®¹æ˜“è¯¯è§£ Hexo çš„åˆ†ç±»æ–¹å¼ã€‚WordPress æ”¯æŒå¯¹ä¸€ç¯‡æ–‡ç« è®¾ç½®å¤šä¸ªåˆ†ç±»ï¼Œè€Œä¸”è¿™äº›åˆ†ç±»å¯ä»¥æ˜¯åŒçº§çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯çˆ¶å­åˆ†ç±»ã€‚ä½†æ˜¯ Hexo ä¸æ”¯æŒæŒ‡å®šå¤šä¸ªåŒçº§åˆ†ç±»ã€‚ä¸‹é¢çš„æŒ‡å®šæ–¹æ³•ï¼š123categories: - Diary - Lifeä¼šä½¿åˆ†ç±»Lifeæˆä¸ºDiaryçš„å­åˆ†ç±»ï¼Œè€Œä¸æ˜¯å¹¶åˆ—åˆ†ç±»ã€‚å› æ­¤ï¼Œæœ‰å¿…è¦ä¸ºæ‚¨çš„æ–‡ç« é€‰æ‹©å°½å¯èƒ½å‡†ç¡®çš„åˆ†ç±»ã€‚å¦‚æœä½ éœ€è¦ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹ list ä¸­çš„æ–¹æ³•ã€‚1234categories:- [Diary, PlayStation]- [Diary, Games]- [Life]æ­¤æ—¶è¿™ç¯‡æ–‡ç« åŒæ—¶åŒ…æ‹¬ä¸‰ä¸ªåˆ†ç±»ï¼š PlayStation å’Œ Games åˆ†åˆ«éƒ½æ˜¯çˆ¶åˆ†ç±» Diary çš„å­åˆ†ç±»ï¼ŒåŒæ—¶ Life æ˜¯ä¸€ä¸ªæ²¡æœ‰å­åˆ†ç±»çš„åˆ†ç±»ã€‚JSON Front-matteré™¤äº† YAML å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ JSON æ¥ç¼–å†™ Front-matterï¼Œåªè¦å°† --- ä»£æ¢æˆ ;;; å³å¯ã€‚123&quot;title&quot;: &quot;Hello World&quot;,&quot;date&quot;: &quot;2013&#x2F;7&#x2F;13 20:46:25&quot;;;;é…ç½®è¿‡ç¨‹é‡åˆ°çš„é—®é¢˜Hexoåšå®¢ä¸­æ–‡ç« å›¾ç‰‡ä¸æ˜¾ç¤ºçš„å‘è¿™ä¸ªæ˜¯çœŸçš„å‘ï¼Œæäº†å¥½ä¹…ï¼Œç»ˆäºçœ‹åˆ°ä¸€ç¯‡åšæ–‡ï¼Œæ‰è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚æ”¾ä¸€ä¸‹è¿™ç¯‡æ–‡ç« çš„ä¼ é€é—¨ã€‚åœ¨codingä¸­SSLè¯ä¹¦ç”³è¯·å¤±è´¥çš„å‘åœ¨æ­å»ºåˆ°codingä¸­æ­¥éª¤å…¶å®å’Œåœ¨githubä¸­æ¯”è¾ƒç›¸ä¼¼ï¼Œå°±æ˜¯ç»™ä»“åº“å‘½ååŸåˆ™çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œå°½é‡è®©ä»“åº“åå­—ä¸ä½ çš„ç”¨æˆ·åç›¸åŒï¼Œå³å’Œåœ¨githubä¸­å‘½åè§„åˆ™ç›¸ä¼¼ã€‚å¦‚æœä½ ä¹‹å‰éƒ½å¾ˆé¡ºåˆ©ï¼Œé‚£ä¹ˆåœ¨SSLè¯ä¹¦ç”³è¯·æ—¶ï¼Œéœ€è¦æ³¨æ„äº†ï¼šä½ ä¼šé‡åˆ°è¯ä¹¦ç”³è¯·ä¸€ç›´å¤±è´¥çš„æƒ…å†µã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ˜¯è¿™æ ·çš„ï¼šç¬¬ä¸€æ¬¡å°è¯•ï¼ŒæŸ¥èµ„æ–™è¯´æ˜¯å¦‚æœä¹‹å‰ä½ å·²ç»åœ¨github oagesä¸Šéƒ¨ç½²äº†ï¼Œä½ è‡ªå·±ä¹°çš„åŸŸåä¹Ÿå·²ç»è§£æè¿‡äº†ã€‚æ­¤æ—¶ç›´æ¥åœ¨coding pagesä¸­ç”³è¯·sslçš„è¯ï¼Œä¼šå¤±è´¥ã€‚è§£å†³çš„åŠæ³•å°±æ˜¯ï¼šå…ˆæŠŠç”¨äºè§£ægithub pagesçš„é‚£ä¸¤æ¡æš‚åœäº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šç„¶åï¼Œæˆ‘å†è¯•è¯•ï¼Œè¿˜æ˜¯ç”³è¯·å¤±è´¥ã€‚å‡ºç°ç±»ä¼¼äºä¸‹é¢çš„é”™è¯¯ï¼šç»§ç»­å»æŸ¥ã€‚å—¯ï¼Œæ‰¾åˆ°äº†ï¼Œç”³è¯·å¤±è´¥æ˜¯å› ä¸ºæˆ‘çš„åŸŸååœ¨å›½å¤–æ— æ³•è§£æï¼Œè¿™æ˜¯æˆ‘çš„DNSè®¾ç½®å¯¼è‡´çš„ã€‚è§£å†³åŠæ³•ï¼šåœ¨è§£æçš„æ—¶å€™ï¼Œéœ€è¦å°†çº¿è·¯ç±»å‹æ”¹æˆé»˜è®¤ã€‚å»è¯•ä¸€è¯•ï¼Œç­‰å¾…ä¸€å°ä¼šå“‡ï¼Œç»ˆäºç”³è¯·æˆåŠŸäº†ã€‚#Hexoåšå®¢å¤‡ä»½æœ‰æ—¶å€™æˆ‘ä»¬å¤–å‡ºï¼Œè‡ªå·±çš„ç”µè„‘æ²¡æœ‰å¸¦ï¼Œè¿™æ—¶å€™æƒ³å†™åšå®¢æ€ä¹ˆåŠã€‚è¿™ä¹Ÿæ˜¯æœ‰åŠæ³•çš„ï¼Œå°±æ˜¯æˆ‘ä»¬è¦å…ˆå¤‡ä»½æˆ‘ä»¬çš„åšå®¢ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥å¤‡ä»½åˆ°githubæˆ–è€…gitee.æ‹¿githubä¸¾ä¾‹ï¼šé¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè¦åœ¨GitHubä¸Šé¢å»ºç«‹ä¸€ä¸ªä»“åº“ï¼Œä»“åº“åå­—è‡ªå–ï¼Œä»“åº“æ˜¯publicè¿˜æ˜¯privateï¼ŒæŒ‰ç…§è‡ªå·±çš„å¿ƒæƒ…æ¥å°±å¥½äº†ã€‚ç„¶åï¼Œæˆ‘ä»¬è¦åœ¨æœ¬åœ°å…³è”è¿œç¨‹ä»“åº“ï¼šæˆ‘ä»¬è¿›å…¥ä½ çš„æœ¬åœ°åšå®¢æ‰€åœ¨çš„ç›®å½•ï¼Œæ¯”å¦‚æˆ‘çš„åœ¨D:\\Blogï¼Œç„¶åï¼Œæ‰“å¼€ä½ çš„Git bashï¼ŒæŒ‰é¡ºåºè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š12git init #åˆå§‹åŒ–æœ¬åœ°ä»“åº“git remote add origin &lt;ä½ çš„è¿œç¨‹ä»“åº“çš„SSHæˆ–HTTPSé“¾æ¥&gt; #å…³è”è¿œç¨‹ä»“åº“ï¼ˆsshçš„é“¾æ¥æ¯”è¾ƒå¿«ä¸€ç‚¹ï¼‰å…³è”å®Œæˆï¼Œç„¶åæˆ‘ä»¬è¿˜éœ€è¦ï¼Œå°†æœ¬åœ°çš„æ¨é€åˆ°è¿œç«¯ï¼ŒåŒæ ·ï¼ŒæŒ‰é¡ºåºè¾“å…¥ä¸€ä¸‹å‘½ä»¤ï¼š123git add . #è¿™ä¸ªâ€˜.â€™è¡¨ç¤ºå°†æ•´ä¸ªæ–‡ä»¶å¤¹éƒ½ä¸€èµ·æ·»åŠ åˆ°æš‚å­˜åŒºï¼ˆä¸ç„¶è¿˜è¦ä¸€ä¸ªä¸ªè¾“å…¥æ–‡ä»¶åï¼‰git commit -m \"è¾“å…¥ä½ è¿™æ¬¡æäº¤çš„è¯´æ˜\" git push origin master #æ¨é€åˆ°è¿œç¨‹ä»“åº“å¥½äº†ï¼Œè®°å¾—æŒ‰æ—¶å°†æœ¬åœ°çš„å¤‡ä»½åˆ°è¿œç¨‹ä»“åº“ã€‚è‡³æ­¤ï¼Œæœ¬åœ°å¤‡ä»½å·²ç»å®Œæˆã€‚å¦‚æœä½ æƒ³åŒæ—¶å¤‡ä»½åˆ°giteeå’Œgithubä¸Šé¢ï¼Œä½ å¯ä»¥å‚è€ƒè¿™é‡Œã€‚åœ¨å¦å¤–ä¸€å°ç”µè„‘ä¸Šå†™åšå®¢å‰ææ˜¯æˆ‘ä»¬æŠŠåšå®¢å¤‡ä»½åœ¨githubã€giteeç­‰ä¸Šé¢ã€‚ç„¶ååœ¨æ–°ç”µè„‘ä¸Šé¢ï¼šå®‰è£… Gitã€nodejsæŠŠä½ è¿œç¨‹çš„åšå®¢å¤‡ä»½ï¼Œcloneä¸‹æ¥åˆ°ä¸€ä¸ªæŒ‡å®šçš„ä½ç½®ï¼ˆä½ç½®è‡ªå·±å®šï¼‰åœ¨æœ¬åœ°çš„åšå®¢ä»“åº“è¿è¡Œï¼šnpm installï¼Œæ¥ å®‰è£…ä¾èµ–åŒ…å¥½äº†ï¼Œä½ å¯å¼€å§‹å†™åšå®¢äº†ã€‚ä¼˜åŒ–æŠ€å·§ä¼˜åŒ–æ–‡ç« URLseoæœç´¢å¼•æ“ä¼˜åŒ–è®¤ä¸ºï¼Œç½‘ç«™çš„æœ€ä½³ç»“æ„æ˜¯ç”¨æˆ·ä»é¦–é¡µç‚¹å‡»ä¸‰æ¬¡å°±å¯ä»¥åˆ°è¾¾ä»»ä½•ä¸€ä¸ªé¡µé¢ï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨hexoç¼–è¯‘çš„ç«™ç‚¹æ‰“å¼€æ–‡ç« çš„urlæ˜¯ï¼šsitename/year/mounth/day/titleå››å±‚çš„ç»“æ„ï¼Œè¿™æ ·çš„urlç»“æ„å¾ˆä¸åˆ©äºseoï¼Œçˆ¬è™«å°±ä¼šç»å¸¸çˆ¬ä¸åˆ°æˆ‘ä»¬çš„æ–‡ç« ï¼Œäºæ˜¯ï¼Œæˆ‘ä»¬éœ€è¦ä¼˜åŒ–ä¸€ä¸‹ç½‘ç«™æ–‡ç« urlæ–¹æ¡ˆä¸€ï¼šæˆ‘ä»¬å¯ä»¥å°†urlç›´æ¥æ”¹æˆsitename/titleçš„å½¢å¼ï¼Œå¹¶ä¸”titleæœ€å¥½æ˜¯ç”¨è‹±æ–‡ï¼Œåœ¨æ ¹ç›®å½•çš„é…ç½®æ–‡ä»¶ä¸‹ä¿®æ”¹permalinkå¦‚ä¸‹ï¼š1234url: https://sunhwee.comroot: /permalink: :title.htmlpermalink_defaults:æ–¹æ¡ˆäºŒï¼šä½¿ç”¨æ’ä»¶ä¼˜åŒ–urlæ’ä»¶hexo-abbrlinkå®ç°äº†è¿™ä¸ªåŠŸèƒ½ï¼Œå®ƒå°†åŸæ¥çš„URLåœ°å€é‡æ–°è¿›è¡Œäº†è¿›åˆ¶è½¬æ¢å’Œå†ç¼–ç ã€‚å®‰è£…hexo-abbrlinkã€‚1npm install hexo-abbrlink --saveé…ç½®åšå®¢æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ã€‚12345# permalink: :title/permalink: archives/:abbrlink.htmlabbrlink: alg: crc32 # ç®—æ³•ï¼šcrc16(default) and crc32 rep: hex # è¿›åˆ¶ï¼šdec(default) and hexè¿è¡Œhexo cleanå’Œhexo gå‘½ä»¤æ¥é‡æ–°ç”Ÿæˆæ–‡ä»¶çœ‹çœ‹ï¼Œå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼ŒURLç»“æ„æˆåŠŸå˜ä¸ºäº†3å±‚ã€‚æ¥æº: æ´ªå«ã®åšå®¢ä½œè€…: æ´ªå«æ–‡ç« é“¾æ¥: https://sunhwee.com/posts/6e8839eb.html#toc-heading-59æœ¬æ–‡ç« è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½éƒ½è¯·æ³¨æ˜å‡ºå¤„ã€‚å…¶ä»–å‚è€ƒæ–‡ç« åˆ—è¡¨ï¼šhttp://dongshuyan.com/2019/05/24/hexo%E5%8D%9A%E5%AE%A2%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/#14-Hexoæ·»åŠ ç™¾åº¦ç»Ÿè®¡ç½‘ç»œç¼–ç¨‹ç³»åˆ— Hexo + Githubæ­å»ºä¸ªäººåšå®¢ Â· èŠ±ç”°åŠäº©","categories":[{"name":"åšå®¢æ­å»º","slug":"åšå®¢æ­å»º","permalink":"https://longlongqin.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"}],"tags":[{"name":"Hexoä¸»é¢˜","slug":"Hexoä¸»é¢˜","permalink":"https://longlongqin.github.io/tags/Hexo%E4%B8%BB%E9%A2%98/"}]}]}