<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>é¾™é¾™â€˜S BLOG</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.longlongqin.top/"/>
  <updated>2020-03-18T16:41:39.616Z</updated>
  <id>https://www.longlongqin.top/</id>
  
  <author>
    <name>longlongqin</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>LearnCpp Note</title>
    <link href="https://www.longlongqin.top/archives/a0a78e77.html"/>
    <id>https://www.longlongqin.top/archives/a0a78e77.html</id>
    <published>2020-03-18T15:35:37.000Z</published>
    <updated>2020-03-18T16:41:39.616Z</updated>
    
    <content type="html"><![CDATA[<center><p center large><red>LearnCpp</red></p></center><center><red>https://www.learncpp.com</red></center><a id="more"></a><h1 id="0-5-ä»‹ç»compiler-linker-and-libraries"><a href="#0-5-ä»‹ç»compiler-linker-and-libraries" class="headerlink" title="0.5 ä»‹ç»compiler, linker, and libraries"></a>0.5 ä»‹ç»compiler, linker, and libraries</h1><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LearnCpp-Note/Development-min.png" alt="Development-min"></p><h2 id="Step-4-Compiling-your-source-code"><a href="#Step-4-Compiling-your-source-code" class="headerlink" title="Step 4: Compiling your source code"></a>Step 4: Compiling your source code</h2><p>ä¸ºäº†ç¼–è¯‘C++ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç¼–è¯‘å™¨ã€‚ç¼–è¯‘å™¨ä¸»è¦æ˜¯å¯¹æ¯ä¸€ä¸ª<code>.cpp</code>æ–‡ä»¶åšä¸¤ä»¶äº‹æƒ…ï¼š</p><ol><li>å®ƒæ£€æŸ¥ä½ çš„ä»£ç æ˜¯å¦ç¬¦åˆC++çš„è§„åˆ™ã€‚å¦‚æœä¸ç¬¦åˆï¼Œå°±ä¼šæŠ¥é”™ï¼ˆåŒæ—¶è¿”å›ç›¸åº”çš„è¡Œå·ï¼‰æ¥å¸®åŠ©ä½ ç¡®å®šä»€ä¹ˆéœ€è¦ä¿®æ”¹ï¼ŒåŒæ—¶åœæ­¢ç¼–è¯‘</li><li>å®ƒå°†C++æºä»£ç ç¿»è¯‘æˆæœºå™¨ä»£ç æ–‡ä»¶ï¼ˆå«åšï¼š<red><strong>object file</strong></red>ï¼‰ã€‚<strong>object file</strong>çš„åå­—é€šå¸¸æ˜¯è¿™ç§å½¢å¼ï¼š<u><em>name.o</em></u> æˆ–è€… <u><em>name.obj</em></u>ï¼ˆå…¶ä¸­nameä¸<code>.cpp</code>æ–‡ä»¶çš„nameæ˜¯å¯¹åº”çš„ï¼‰ã€‚</li></ol><p>ä¾‹å¦‚ï¼šä¸‹é¢çš„ä¸‰ä¸ª.cppçš„æºæ–‡ä»¶ï¼Œç¼–è¯‘ä¹‹åå½¢æˆï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LearnCpp-Note/CompileSource-min.png" alt="The compilation process"></p><hr><h2 id="Step-5-Linking-object-files-and-libraries"><a href="#Step-5-Linking-object-files-and-libraries" class="headerlink" title="Step 5: Linking object files and libraries"></a>Step 5: Linking object files and libraries</h2><p><strong>ç¼–è¯‘å™¨compiler **ç¼–è¯‘å®Œæˆåï¼Œç”Ÿæˆè‹¥å¹²çš„ object filesã€‚æ¥ä¸‹æ¥å°±éœ€è¦</strong>é“¾æ¥å™¨Linker**å‡ºé©¬äº†ã€‚linkerçš„å·¥ä½œä¸»è¦æœ‰ä¸‰æ–¹é¢ï¼š</p><ol><li><p>å°†æ‰€æœ‰çš„object filesï¼ˆç¼–è¯‘ä¹‹åç”Ÿæˆçš„ï¼‰åˆå¹¶æˆä¸ºä¸€ä¸ª<em>å¯æ‰§è¡Œç¨‹åºexecutable program</em></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LearnCpp-Note/LinkingObjects-min.png" alt="LinkingObjects-min"></p></li><li><p>æ­¤å¤–ï¼Œlinkerè¿˜å¯ä»¥é“¾æ¥<strong>åº“æ–‡ä»¶library files</strong>ï¼ˆlibrary filesæ˜¯ä¸€ä¸ªå·²ç»é¢„ç¼–è¯‘å¥½çš„ä»£ç ç»è¿‡â€œæ‰“åŒ…â€ï¼Œåœ¨å…¶ä»–ç¨‹åºä¸­é‡ç”¨ï¼‰</p><blockquote><p>C++æœ‰æœ‰ä¸€ä¸ªæ‰©å……çš„åº“ï¼Œå«åšï¼šæ ‡å‡†åº“<strong>C++ Standard Library</strong>ã€‚å®ƒæä¾›é¢å¤–çš„åŠŸèƒ½æ€§åº“ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„<em>iostream library</em></p><p>ä½ å¯ä»¥æœ‰é€‰æ‹©æ€§çš„å»é“¾æ¥å…¶ä»–åº“ï¼Œæ¯”å¦‚å½“ä½ æƒ³å†™ä¸€ä¸ªæ’­æ”¾å£°éŸ³çš„ç¨‹åºã€‚ä½ è‚¯å®šä¸æƒ³ä»å¤´åˆ°å°¾çš„å»å†™å¦‚ä½•å»è¯»å–æ–‡ä»¶ã€æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æœ‰æ•ˆâ€¦.. è¿™æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸‹è½½ç›¸å…³çš„åº“è¿›è¡Œåˆ©ç”¨å°±æ–¹ä¾¿å¾ˆå¤šäº†ã€‚</p></blockquote></li><li><p>è¿æ¥å™¨ä¼šç¡®ä¿æ‰€æœ‰çš„è·¨æ–‡ä»¶ä¾èµ–é¡¹éƒ½æ­£ç¡®çš„è§£æäº†ã€‚</p><blockquote><p>ä¾‹å¦‚ï¼š</p><p>å¦‚æœä½ åœ¨ä¸€ä¸ª.cppæ–‡ä»¶ä¸­å®šä¹‰äº†â€Aâ€ï¼Œç„¶ååœ¨å¦ä¸€ä¸ª.cppæ–‡ä»¶ä¸­å»ä½¿ç”¨â€Aâ€ã€‚linkerå°±ä¼šå°†è¿™ä¸¤ä¸ªæ–‡ä»¶è”ç³»èµ·æ¥ã€‚å¦‚æœé“¾æ¥ä¸æˆåŠŸï¼Œå°±ä¼šæŠ¥é”™å¹¶ä¸”è¿æ¥ç»ˆæ­¢</p></blockquote></li></ol><p>åªè¦linkeræˆåŠŸçš„å®Œæˆæ‰€æœ‰çš„â€œobject files å’Œ libraries â€çš„é“¾æ¥å·¥ä½œï¼Œä½ å°±ä¼šå¾—åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç„¶åä½ å°±å¯ä»¥è¿è¡Œå®ƒã€‚</p><table><thead><tr><th align="left">Makefile</th></tr></thead><tbody><tr><td align="left">ã€æ³¨ã€‘æœ‰äº›å¼€å‘ç¯å¢ƒä½¿ç”¨<strong>Makefile</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ªæè¿°å¦‚ä½•æ„å»ºä¸€ä¸ªç¨‹åºçš„æ–‡ä»¶ï¼ˆå“ªä¸€ä¸ªæ–‡ä»¶è¦ç¼–è¯‘&amp;é“¾æ¥ï¼Œæˆ–è€…ä»¥ä¸åŒæ–¹å¼å¤„ç†ï¼‰å®ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ã€‚ä½†æ˜¯åœ¨æœ¬ç³»åˆ—è¯¾ç¨‹æˆ‘ä»¬ä¸å›å»è®²è§£å®ƒã€‚</td></tr></tbody></table><h2 id="Steps-6-amp-7-Testing-and-Debugging"><a href="#Steps-6-amp-7-Testing-and-Debugging" class="headerlink" title="Steps 6 &amp; 7: Testing and Debugging"></a>Steps 6 &amp; 7: Testing and Debugging</h2><p>å¦‚æœä½ çš„å¯æ‰§è¡Œç¨‹åºæ²¡æœ‰æŒ‰ç…§é¢„æœŸçš„å·¥ä½œï¼Œé‚£ä¹ˆä½ å°±éœ€è¦è°ƒè¯•ã€‚</p><h2 id="Integrated-development-environments-IDEs"><a href="#Integrated-development-environments-IDEs" class="headerlink" title="Integrated development environments (IDEs)"></a>Integrated development environments (IDEs)</h2><p><u>ã€noteã€‘step3ã€4ã€5ã€7ï¼ˆeditor, compiler, linker, debuggerï¼‰éƒ½æ˜¯éœ€è¦è½¯ä»¶çš„ã€‚</u></p><p>å½“ç„¶ï¼Œä½ å¯ä»¥æ¯ä¸€éƒ¨åˆ†éƒ½æ˜¯ç”¨ç‹¬ç«‹çš„è½¯ä»¶ï¼Œä½†æ˜¯æœ‰è¿™æ ·çš„ä¸€ä¸ªè½¯ä»¶åŒ…ï¼š<u><strong>integrated development environment (IDE)é›†æˆå¼€å‘ç¯å¢ƒ</strong></u> å°†ä¸Šé¢å››æ­¥ä¸€ä½“åŒ–ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;center&gt;&lt;p center large&gt;&lt;red&gt;LearnCpp&lt;/red&gt;&lt;/p&gt;&lt;/center&gt;&lt;center&gt;&lt;red&gt;https://www.learncpp.com&lt;/red&gt;&lt;/center&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="C++" scheme="https://www.longlongqin.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Letâ€™s Build A Simple Interpreter-9</title>
    <link href="https://www.longlongqin.top/archives/8632918.html"/>
    <id>https://www.longlongqin.top/archives/8632918.html</id>
    <published>2020-03-18T06:44:30.000Z</published>
    <updated>2020-03-18T14:50:23.797Z</updated>
    
    <content type="html"><![CDATA[<p><yellow>ä»Šå¤©è¦å­¦ä¹ çš„å†…å®¹ï¼š</yellow></p><ol><li>å¦‚ä½•parse and interpret ä¸€ä¸ªPascalç¨‹åºçš„<strong>å®šä¹‰ definition</strong></li><li>å¦‚ä½•parse and interpret <strong>å¤åˆè¯­å¥compound statements</strong></li><li>å¦‚ä½•parse and interpret <strong>èµ‹å€¼è¯­å¥(åŒ…æ‹¬å˜é‡)assignment statements, including variables.</strong></li><li>ä»‹ç»ç¬¦å·è¡¨ï¼Œä»¥åŠå¦‚ä½•å­˜å‚¨å’ŒæŸ¥æ‰¾å˜é‡ã€‚</li></ol><a id="more"></a><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://ruslanspivak.com/lsbasi-part9/" target="_blank" rel="noopener">https://ruslanspivak.com/lsbasi-part9/</a></p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ Pascalç¨‹åºï¼Œæ¥ä»‹ç»æ–°æ¦‚å¿µï¼š</p><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">BEGIN</span></span><br><span class="line">        number := <span class="number">2</span>;</span><br><span class="line">        a := number;</span><br><span class="line">        b := <span class="number">10</span> * a + <span class="number">10</span> * number / <span class="number">4</span>;</span><br><span class="line">        c := a - - b</span><br><span class="line">    <span class="keyword">END</span>;</span><br><span class="line">    x := <span class="number">11</span>;</span><br><span class="line"><span class="keyword">END</span>.</span><br></pre></td></tr></table></figure><p>ä»Šå¤©æ‰€å­¦å†…å®¹ä¸å‰é¢çš„part1~8ç›¸æ¯”æœ‰äº†å¾ˆå¤§çš„é£è·ƒï¼Œç°åœ¨ä¸å†æ˜¯åƒä»¥å‰ä¸€æ ·åªæ˜¯ä¸€ä¸ªè®¡ç®—å™¨äº†ã€‚æˆ‘ä»¬è¦æå‡ä¸€ä¸‹æ¡£æ¬¡äº†â˜»</p><h2 id="æ–°çš„è¯­æ³•æ ‘åŠè§„åˆ™"><a href="#æ–°çš„è¯­æ³•æ ‘åŠè§„åˆ™" class="headerlink" title="æ–°çš„è¯­æ³•æ ‘åŠè§„åˆ™"></a><red>æ–°çš„è¯­æ³•æ ‘åŠè§„åˆ™</red></h2><p>ç°åœ¨ï¼Œæ¥çœ‹çœ‹æ–°è¯­è¨€ç»“æ„çš„<em>è¯­æ³•æ ‘syntax diagrams</em> ä»¥åŠå…¶å¯¹åº”çš„<em>è¯­æ³•è§„åˆ™grammar rules</em></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-9/lsbasi_part9_syntax_diagram_01.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-9/lsbasi_part9_syntax_diagram_02.png" alt="img">)<img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-9/lsbasi_part9_syntax_diagram_03.png" alt="img"></p><h3 id="pascalè¯­æ³•"><a href="#pascalè¯­æ³•" class="headerlink" title="pascalè¯­æ³•"></a><red>pascalè¯­æ³•</red></h3><p>ä¸€ä¸ªPascalè¯­æ³•ç”±ä¸€ä¸‹ç»„æˆ&lt;<red>è¿™ä¸æ˜¯å®Œæ•´çš„å®šä¹‰ï¼Œä¼šåœ¨åé¢æ–‡ç« æ…¢æ…¢æ‰©å±•</red>&gt;ï¼š</p><ul><li><strong>BEGIN</strong>å¼€å¤´</li><li>ä¸­é—´æ˜¯<strong>å¤åˆè¯­å¥<em>compound statement</em></strong>ï¼Œ</li><li>ä¸€ä¸ª<strong>ç‚¹(dot) â€œ.â€</strong>ç»“æŸ</li></ul><h4 id="compound-statement"><a href="#compound-statement" class="headerlink" title="compound statement"></a><red><em>compound statement</em></red></h4><p><em>compound statement</em>æ˜¯ä¸€ä¸ªblock(åŒºå—)ï¼š</p><ul><li>å®ƒæ ‡æœ‰BEGIN å’Œ END ï¼Œä¸­é—´å¯èƒ½(ä¹Ÿå¯èƒ½æ²¡æœ‰)åŒ…å«æœ‰<u>ä¸€æ®µè¯­å¥</u>æˆ–<u>å…¶ä»–çš„å¤åˆè¯­å¥<em>compound</em></u> statement</li><li>æ‰€æœ‰åµŒå…¥åœ¨å¤åˆè¯­å¥ä¸­çš„å¥å­ï¼Œé™¤äº†æœ€åä¸€ä¸ªï¼Œå…¶ä»–çš„éƒ½è¦ä»¥åˆ†å·â€œ;â€ç»“å°¾</li><li>åœ¨blockä¸­çš„æœ€åä¸€ä¸ªå¥å­(last statement)å¯èƒ½æˆ–å¯èƒ½æ²¡æœ‰ ä¸­æ–­åˆ†å·â€œ;â€</li></ul><p>å¦‚ä¸‹é¢æ‰€ç¤ºï¼š</p><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">â€œ<span class="keyword">BEGIN</span> <span class="keyword">END</span>â€</span><br><span class="line">â€œ<span class="keyword">BEGIN</span> a := <span class="number">5</span>; x := <span class="number">11</span> <span class="keyword">END</span>â€</span><br><span class="line">â€œ<span class="keyword">BEGIN</span> a := <span class="number">5</span>; x := <span class="number">11</span>; <span class="keyword">END</span>â€</span><br><span class="line">â€œ<span class="keyword">BEGIN</span> <span class="keyword">BEGIN</span> a := <span class="number">5</span> <span class="keyword">END</span>; x := <span class="number">11</span> <span class="keyword">END</span>â€</span><br></pre></td></tr></table></figure><h4 id="statement-list"><a href="#statement-list" class="headerlink" title="statement list"></a><red><em>statement list</em></red></h4><p>ä¸€ä¸ª<strong><em>statement list</em></strong> å«æœ‰0ä¸ªæˆ–å¤šä¸ªè¯­å¥ï¼Œå…¶ä½äº<em>compound statement</em>å†…ã€‚å¦‚ä¸Šé¢çš„ä¾‹å­</p><h4 id="statement"><a href="#statement" class="headerlink" title=" statement"></a><red><em>statement</em></red></h4><p>ä¸€ä¸ª<em>statement<em>å¯ä»¥æ˜¯ä¸€ä¸ª *compound statement</em>ï¼Œ ä¸€ä¸ªèµ‹å€¼è¯­å¥<em>assignment statement</em>ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç©ºè¯­å¥*empty</em> statementã€‚</p><h4 id="assignment-statement"><a href="#assignment-statement" class="headerlink" title="assignment statement"></a><red><em>assignment statement</em></red></h4><p>ä¸€ä¸ªèµ‹å€¼è¯­å¥çš„ç»„æˆï¼š<u>ä¸€ä¸ªå˜é‡</u> åé¢è·Ÿç€ <u>ä¸€ä¸ªæŒ‡å®šçš„tokenï¼ˆtwo characters, â€˜:â€™ and â€˜=â€™ï¼‰</u> åé¢è·Ÿç€ <u>ä¸€ä¸ªè¡¨è¾¾å¼</u>ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â€œa := <span class="number">11</span>â€</span><br><span class="line">â€œb := a + <span class="number">9</span> - <span class="number">5</span> * <span class="number">2</span>â€</span><br></pre></td></tr></table></figure><h4 id="varible"><a href="#varible" class="headerlink" title="varible"></a><red><em>varible</em></red></h4><p>ä¸€ä¸ª <strong>å˜é‡<em>variable</em></strong>æ˜¯ä¸€ä¸ª<u>æ ‡è¯†ç¬¦<em>identifier</em></u>ã€‚æˆ‘ä»¬å°†ç”¨ID tokenæ¥è¡¨ç¤ºvariablesï¼Œè¿™ä¸ªtokençš„valueæ˜¯å˜é‡çš„åå­—(å¦‚ï¼Œâ€˜aâ€™ã€â€˜numberâ€™ã€â€˜xâ€™â€¦..)ã€‚åœ¨ä¸‹é¢çš„ä¸€ä¸ªblockçš„ä»£ç ä¸­çš„â€˜aâ€™ã€â€˜bâ€™å°±æ˜¯å˜é‡ï¼š</p><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â€œ<span class="keyword">BEGIN</span> a := <span class="number">11</span>; b := a + <span class="number">9</span> - <span class="number">5</span> * <span class="number">2</span> <span class="keyword">END</span>â€</span><br></pre></td></tr></table></figure><h4 id="empty-statement"><a href="#empty-statement" class="headerlink" title="empty statement"></a><red><strong><em>empty</em></strong> statement</red></h4><p>ä¸€ä¸ªç©ºè¯­å¥è¡¨ç¤ºä¸€ä¸ªè¯­æ³•è§„åˆ™ï¼Œè¿™ä¸ªè¯­æ³•è§„åˆ™æ²¡æœ‰æ›´æ·±å±‚çš„äº§ç”Ÿå¼<em>productions<em>ã€‚æˆ‘ä»¬ä½¿ç”¨</em>empty_statement<em>è¯­æ³•è§„åˆ™æ¥æè¿°è¯­æ³•åˆ†æä¸­æœ«å°¾çš„</em>statement_list</em> ï¼›åŒæ—¶ä¹Ÿå…è®¸ä¸€ä¸ªç©ºçš„å¤åˆè¯­å¥<em>compound statements</em>è¡¨ç¤ºä¸ºï¼šâ€˜BEGIN ENDâ€™</p><h4 id="factor"><a href="#factor" class="headerlink" title="factor"></a><red><em>factor</em></red></h4><p><em>factor</em>çš„è§„åˆ™æ›´æ–°ä¸ºå¤„ç†å˜é‡ã€‚</p><h3 id="å®Œæ•´çš„è¯­æ³•"><a href="#å®Œæ•´çš„è¯­æ³•" class="headerlink" title="å®Œæ•´çš„è¯­æ³•"></a>å®Œæ•´çš„è¯­æ³•</h3><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">program</span> : compound_statement DOT</span><br><span class="line"></span><br><span class="line">compound_statement : <span class="keyword">BEGIN</span> statement_list <span class="keyword">END</span></span><br><span class="line"></span><br><span class="line">statement_list : statement</span><br><span class="line">               | statement SEMI statement_list</span><br><span class="line"></span><br><span class="line">statement : compound_statement</span><br><span class="line">          | assignment_statement</span><br><span class="line">          | empty</span><br><span class="line"></span><br><span class="line">assignment_statement : variable ASSIGN expr</span><br><span class="line"></span><br><span class="line">empty :</span><br><span class="line"></span><br><span class="line">expr: term ((PLUS | MINUS) term)*</span><br><span class="line"></span><br><span class="line">term: factor ((MUL | DIV) factor)*</span><br><span class="line"></span><br><span class="line">factor : PLUS factor</span><br><span class="line">       | MINUS factor</span><br><span class="line">       | INTEGER</span><br><span class="line">       | LPAREN expr RPAREN</span><br><span class="line">       | variable</span><br><span class="line"></span><br><span class="line">variable: ID</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„è¯­æ³•ä¸­ï¼Œ</p><ul><li>åœ¨<em>compound_statement</em> rule ä¸­æ²¡æœ‰ç”¨â€œ<em>â€æ¥è¡¨ç¤ºé‡å¤ï¼ˆ0æˆ–å¤šæ¬¡ï¼‰ï¼Œè€Œæ˜¯æ˜ç¡®çš„åˆ¶å®šäº† *statement_list</em> ruleã€‚è¿™æ˜¯å¦ä¸€ç§æ–¹æ³•æ¥è¡¨ç¤ºâ€œ0æˆ–å¤šæ¬¡â€çš„æ“ä½œã€‚è¿™åœ¨åé¢çš„è¯­æ³•åˆ†æå™¨ï¼ˆå¦‚<a href="http://www.dabeaz.com/ply/" target="_blank" rel="noopener">PLY</a>ï¼‰ä¼šæ´¾ä¸Šç”¨åœºã€‚</li><li>æˆ‘è¿˜å°†è§„åˆ™ï¼šâ€œ(PLUS | MINUS) factorâ€ä¹Ÿç»†åˆ†æˆä¸¤ä¸ªè§„åˆ™ã€‚</li></ul><h2 id="ä¿®æ”¹lexer-parser-interpreter"><a href="#ä¿®æ”¹lexer-parser-interpreter" class="headerlink" title="ä¿®æ”¹lexer,parser,interpreter"></a><red>ä¿®æ”¹lexer,parser,interpreter</red></h2><p>ä¸ºäº†æ”¯æŒæ›´æ–°åçš„è¯­æ³•ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹æˆ‘ä»¬çš„æ­¤ç•ªåˆ†æå™¨ã€è¯­æ³•åˆ†æå™¨å’Œè§£é‡Šå™¨ã€‚</p><h3 id="lexerçš„æ”¹å˜"><a href="#lexerçš„æ”¹å˜" class="headerlink" title="lexerçš„æ”¹å˜"></a><red>lexerçš„æ”¹å˜</red></h3><p>ä¸‹é¢æ˜¯æˆ‘ä»¬æ­¤ç•ªåˆ†æå™¨æœ‰æ”¹åŠ¨çš„åœ°æ–¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-9/lsbasi_part9_lexer.png" alt="img"></p><ol><li><p>ä¸ºäº†æ”¯æŒPascalç¨‹åºçš„å®šä¹‰ã€å¤åˆè¯­å¥ã€èµ‹å€¼è¯­å¥ã€å˜é‡ã€‚æˆ‘ä»¬éœ€è¦æ–°çš„tokenç±»å‹ï¼šï¼ˆPascal programâ€™s definition, compound statements, assignment statements, and variablesï¼‰</p><ul><li>BEGIN (æ ‡è®°å¤åˆè¯­å¥çš„å¼€å§‹)</li><li>END (æ ‡è®°å¤åˆè¯­å¥çš„ç»“æŸ)</li><li>DOT (ä¸€ä¸ªtokenè¡¨ç¤º ç‚¹ï¼Œç”¨äºPascalç¨‹åºçš„å®šä¹‰)</li><li>ASSIGN (ä¸€ä¸ªtokenè¡¨ç¤ºä¸¤ä¸ªå­—ç¬¦ï¼Œ â€˜:=â€™)åœ¨Pascalä¸­ï¼Œèµ‹å€¼æ“ä½œç¬¦ä¸åŒäºå…¶ä»–è¯­è¨€ï¼ˆå¦‚Cè¯­è¨€ç”¨ â€œ=â€ï¼‰</li><li>SEMI (ä¸€ä¸ªtokenè¡¨ç¤ºåˆ†å·â€˜ ; â€™ ã€‚ç”¨æ¥æ ‡è®°åœ¨å¤åˆè¯­å¥ä¸­çš„ä¸€ä¸ªå¥å­çš„ç»“å°¾)</li><li>IDï¼ˆä¸€ä¸ªtokenè¡¨ç¤º æœ‰æ•ˆçš„æ ‡è¯†ç¬¦ã€‚ï¼‰</li></ul></li><li><p>æœ‰æ—¶å€™ï¼Œä¸ºäº†åŒºåˆ†ä¸åŒtokenï¼ˆå®ƒä»¬éƒ½ä»¥ç›¸åŒçš„å­—ç¬¦ä¸ºå¼€å¤´ï¼Œå¦‚ï¼šâ€˜:â€™ vs â€˜:=â€™ or â€˜==â€™ vs â€˜=&gt;â€™ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸æ¶ˆè€—ä¸‹ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µä¸‹å»æŸ¥çœ‹è¾“å…¥ç¼“å†²åŒºã€‚ä¸ºäº†è¿™ä¸ªç‰¹æ®Šçš„ç›®çš„ï¼Œæˆ‘ä»‹ç»ä¸€ç§æŸ¥çœ‹æ–¹æ³•<em>peek</em> methodï¼Œè¿™ç§æ–¹æ³•å°†å¸®åŠ©æˆ‘ä»¬æ ‡è®°èµ‹å€¼è¯­å¥ã€‚è¿™ä¸ªæ–¹æ³•ä¸æ˜¯å¿…è¦çš„ï¼Œä½†æ˜¯è¿˜æ˜¯æƒ³æ—©ä¸€ç‚¹ä»‹ç»ä¸€ä¸‹ï¼Œå¹¶ä¸”å®ƒä¹Ÿä½¿å¾—<em>get_next_token</em>å‡½æ•°ç®€æ´ä¸€äº›ã€‚</p><p>å®ƒæ‰€åšçš„ç›®çš„å°±æ˜¯ï¼šä»æ–‡æœ¬ç¼“å†²åŒºè¿”å›ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œä½†ä¸å¢åŠ <em>self.pos</em>çš„å€¼ã€‚ä¸‹é¢æ˜¯è¿™ä¸ªæ–¹æ³•çš„ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">peek</span><span class="params">(self)</span>:</span></span><br><span class="line">    peek_pos = self.pos + <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> peek_pos &gt; len(self.text) - <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> self.text[peek_pos]</span><br></pre></td></tr></table></figure></li><li><p>å› ä¸ºpascalä¸­çš„ å˜é‡ å’Œ ä¿ç•™å­— éƒ½æ˜¯ æ ‡è¯†ç¬¦ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªæ–¹æ³•æ¥åŒºåˆ†å®ƒä»¬ï¼Œæ–¹æ³•ä¸ºï¼š<strong><em>_id</em></strong>ã€‚å®ƒå·¥ä½œçš„åŸç†ï¼šè¯æ³•åˆ†æå™¨å¯¹è¿™ä¸ªå­—æ¯ã€æ•°å­—åºåˆ—è¿›è¡Œæ£€æŸ¥ï¼Œçœ‹è¿™ä¸ªåºåˆ—æ˜¯å¦æ˜¯ä¿ç•™å­—<em>reserved keyword</em>ï¼Œå¦‚æœæ˜¯ï¼Œå°±è¿”å›ä¸€ä¸ªé¢„å…ˆæ„é€ çš„tokenæ¥è¡¨ç¤ºè¿™ä¸ªä¿ç•™å­—ï¼›å¦‚æœä¸æ˜¯ï¼Œå°±è¿”å›ä¸€ä¸ªæ–°çš„ID tokenï¼ˆå®ƒçš„å€¼å°±æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²ï¼‰ï¼ˆlexemeï¼‰.ä¸‹é¢æ˜¯å®ƒçš„ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">RESERVED_KEYWORDS = &#123;</span><br><span class="line">    <span class="string">'BEGIN'</span>: Token(<span class="string">'BEGIN'</span>, <span class="string">'BEGIN'</span>),</span><br><span class="line">    <span class="string">'END'</span>: Token(<span class="string">'END'</span>, <span class="string">'END'</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_id</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""Handle identifiers and reserved keywords"""</span></span><br><span class="line">    result = <span class="string">''</span></span><br><span class="line">    <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isalnum():</span><br><span class="line">        result += self.current_char</span><br><span class="line">        self.advance()</span><br><span class="line"></span><br><span class="line">    token = RESERVED_KEYWORDS.get(result, Token(ID, result))</span><br><span class="line">    <span class="keyword">return</span> token</span><br></pre></td></tr></table></figure></li><li><p>è¯æ³•åˆ†æå™¨çš„å‡½æ•°<em>get_next_token</em>çš„æ”¹å˜:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_next_token</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">if</span> self.current_char.isalpha():</span><br><span class="line">            <span class="keyword">return</span> self._id()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.current_char == <span class="string">':'</span> <span class="keyword">and</span> self.peek() == <span class="string">'='</span>:</span><br><span class="line">            self.advance()</span><br><span class="line">            self.advance()</span><br><span class="line">            <span class="keyword">return</span> Token(ASSIGN, <span class="string">':='</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.current_char == <span class="string">';'</span>:</span><br><span class="line">            self.advance()</span><br><span class="line">            <span class="keyword">return</span> Token(SEMI, <span class="string">';'</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> self.current_char == <span class="string">'.'</span>:</span><br><span class="line">            self.advance()</span><br><span class="line">            <span class="keyword">return</span> Token(DOT, <span class="string">'.'</span>)</span><br><span class="line">        ...</span><br></pre></td></tr></table></figure></li></ol><h3 id="parserçš„æ”¹å˜"><a href="#parserçš„æ”¹å˜" class="headerlink" title="parserçš„æ”¹å˜"></a><red>parserçš„æ”¹å˜</red></h3><p>ä¸‹é¢æ˜¯å®ƒçš„æ€»çš„å˜åŒ–ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-9/lsbasi_part9_parser.png" alt="img"></p><ol><li><p>æ–°çš„ASTç»“ç‚¹ï¼š</p><ul><li><p><strong><em>Compound</em> AST node</strong>ï¼šè¡¨ç¤ºä¸€ä¸ªå¤åˆè¯­å¥ï¼Œåœ¨å®ƒçš„å­©å­çš„å˜é‡ä¸­åŒ…å«ç€è¯­å¥èŠ‚ç‚¹çš„åˆ—è¡¨ï¼›</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Compound</span><span class="params">(AST)</span>:</span></span><br><span class="line">    <span class="string">"""Represents a 'BEGIN ... END' block"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.children = []</span><br></pre></td></tr></table></figure></li><li><p><strong><em>Assign</em> AST node</strong>ï¼šè¡¨ç¤ºèµ‹å€¼è¯­å¥ã€‚å®ƒçš„å·¦å­©å­çš„å€¼æ˜¯<strong><em>Var</em> node</strong>ï¼Œå³å­©å­ç»“ç‚¹å­˜å‚¨ç€ç”±exprè§£æå™¨è¿”å›çš„ç»“ç‚¹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Assign</span><span class="params">(AST)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, left, op, right)</span>:</span></span><br><span class="line">        self.left = left</span><br><span class="line">        self.token = self.op = op</span><br><span class="line">        self.right = right</span><br></pre></td></tr></table></figure></li><li><p><strong><em>Var</em> AST node</strong>ï¼šè¡¨ç¤ºä¸€ä¸ªå˜é‡ï¼Œå®ƒçš„valueå°±æ˜¯ç€è¿™ä¸ªå˜é‡çš„åå­—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Var</span><span class="params">(AST)</span>:</span></span><br><span class="line">    <span class="string">"""The Var node is constructed out of ID token."""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, token)</span>:</span></span><br><span class="line">        self.token = token</span><br><span class="line">        self.value = token.value</span><br></pre></td></tr></table></figure></li><li><p><strong><em>NoOp</em> node</strong>ï¼šç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç©ºè¯­å¥ã€‚å¦‚<code>â€˜BEGIN ENDâ€™</code> æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å¤åˆè¯­å¥ä½†æ²¡æœ‰å¥å­ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NoOp</span><span class="params">(AST)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>æˆ‘ä»¬ä¹‹å‰è®²è¿‡ï¼Œåœ¨æˆ‘ä»¬çš„é€’å½’çš„è¯­æ³•åˆ†æå™¨ä¸­æ¯ä¸€ä¸ªè¯­æ³•çš„è§„åˆ™éƒ½æœ‰ç›¸åº”çš„å‡½æ•°(method)ã€‚è¿™æ¬¡å°†å¢åŠ 7ä¸ªæ–°çš„å‡½æ•°ã€‚è¿™äº›å‡½æ•°éƒ½æ˜¯ç”¨äºè¯­æ³•åˆ†æä¸­æ–°çš„è¯­æ³•å’Œæ–°çš„ASTç»“ç‚¹ã€‚ä¸‹é¢å°±æ˜¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">program</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""program : compound_statement DOT"""</span></span><br><span class="line">    node = self.compound_statement()</span><br><span class="line">    self.eat(DOT)</span><br><span class="line">    <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compound_statement</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    compound_statement: BEGIN statement_list END</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    self.eat(BEGIN)</span><br><span class="line">    nodes = self.statement_list()</span><br><span class="line">    self.eat(END)</span><br><span class="line"></span><br><span class="line">    root = Compound()</span><br><span class="line">    <span class="keyword">for</span> node <span class="keyword">in</span> nodes:</span><br><span class="line">        root.children.append(node)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> root</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">statement_list</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    statement_list : statement</span></span><br><span class="line"><span class="string">                   | statement SEMI statement_list</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    node = self.statement()</span><br><span class="line"></span><br><span class="line">    results = [node]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> self.current_token.type == SEMI:</span><br><span class="line">        self.eat(SEMI)</span><br><span class="line">        results.append(self.statement())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> self.current_token.type == ID:</span><br><span class="line">        self.error()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> results</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">statement</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    statement : compound_statement</span></span><br><span class="line"><span class="string">              | assignment_statement</span></span><br><span class="line"><span class="string">              | empty</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">if</span> self.current_token.type == BEGIN:</span><br><span class="line">        node = self.compound_statement()</span><br><span class="line">    <span class="keyword">elif</span> self.current_token.type == ID:</span><br><span class="line">        node = self.assignment_statement()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        node = self.empty()</span><br><span class="line">    <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">assignment_statement</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    assignment_statement : variable ASSIGN expr</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    left = self.variable()</span><br><span class="line">    token = self.current_token</span><br><span class="line">    self.eat(ASSIGN)</span><br><span class="line">    right = self.expr()</span><br><span class="line">    node = Assign(left, token, right)</span><br><span class="line">    <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">variable</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    variable : ID</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    node = Var(self.current_token)</span><br><span class="line">    self.eat(ID)</span><br><span class="line">    <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">empty</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""An empty production"""</span></span><br><span class="line">    <span class="keyword">return</span> NoOp()</span><br></pre></td></tr></table></figure></li><li><p><strong><em>factor</em></strong> å‡½æ•°çš„ä¿®æ”¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factor</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""factor : PLUS  factor</span></span><br><span class="line"><span class="string">              | MINUS factor</span></span><br><span class="line"><span class="string">              | INTEGER</span></span><br><span class="line"><span class="string">              | LPAREN expr RPAREN</span></span><br><span class="line"><span class="string">              | variable</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    token = self.current_token</span><br><span class="line">    <span class="keyword">if</span> token.type == PLUS:</span><br><span class="line">        self.eat(PLUS)</span><br><span class="line">        node = UnaryOp(token, self.factor())</span><br><span class="line">        <span class="keyword">return</span> node</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        node = self.variable()</span><br><span class="line">        <span class="keyword">return</span> node</span><br></pre></td></tr></table></figure></li><li><p><strong><em>parse</em></strong> ï¼šæ›´æ–°ä¹‹åï¼Œå®ƒä»ç¨‹åºçš„å®šä¹‰å¼€å§‹è¯­æ³•çš„åˆ†æï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self)</span>:</span></span><br><span class="line">    node = self.program()</span><br><span class="line">    <span class="keyword">if</span> self.current_token.type != EOF:</span><br><span class="line">        self.error()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> node</span><br></pre></td></tr></table></figure></li></ol><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¨‹åºï¼š</p><figure class="highlight pascal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">BEGIN</span></span><br><span class="line">        number := <span class="number">2</span>;</span><br><span class="line">        a := number;</span><br><span class="line">        b := <span class="number">10</span> * a + <span class="number">10</span> * number / <span class="number">4</span>;</span><br><span class="line">        c := a - - b</span><br><span class="line">    <span class="keyword">END</span>;</span><br><span class="line">    x := <span class="number">11</span>;</span><br><span class="line"><span class="keyword">END</span>.</span><br></pre></td></tr></table></figure><p>å®ƒçš„è§£ææ ‘ä¸ºï¼ˆä¸ºäº†ç®€æ´ï¼Œä¸‹é¢çš„æ ‘ä¸­å˜é‡çš„åå­—æ‰€åœ¨ç»“ç‚¹å°±æ˜¯<strong><em>Var</em> node</strong>ï¼Œ** <strong>Assign node</strong>èµ‹å€¼ç»“ç‚¹ è¡¨ç¤ºä¸º â€˜:=â€™ ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://ruslanspivak.com/lsbasi-part9/lsbasi_part9_full_ast.png" alt="img"></p><h4 id="interpreterçš„æ”¹å˜"><a href="#interpreterçš„æ”¹å˜" class="headerlink" title="interpreterçš„æ”¹å˜"></a><red>interpreterçš„æ”¹å˜</red></h4><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-9/lsbasi_part9_interpreter.png" alt="img"></p><p>ä¸ºäº†è§£é‡Šæ–°çš„ASTç»“ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨interpreterä¸­æ·»åŠ ç›¸åº”çš„visitor å‡½æ•°ï¼š</p><ul><li>visit_Compound</li><li>visit_Assign</li><li>visit_Var</li><li>visit_NoOp</li></ul><p>å…¶ä¸­ï¼Œ<code>visit_Compound</code>ï¼šéå†å®ƒçš„å­©å­èŠ‚ç‚¹å’Œ<code>visit_NoOp</code>ï¼šä»€ä¹ˆéƒ½ä¸åšã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">visit_Compound</span><span class="params">(self, node)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> child <span class="keyword">in</span> node.children:</span><br><span class="line">        self.visit(child)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">visit_NoOp</span><span class="params">(self, node)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p><code>visit_Assign</code>ï¼šå½“æˆ‘ä»¬ç»™å˜é‡èµ‹å€¼æ—¶ï¼Œéœ€è¦å°†è¯¥å˜é‡çš„å€¼å­˜åˆ°æŸä¸ªåœ°æ–¹ï¼Œå¾…ç”¨ã€‚è¿™ä¹Ÿå°±æ˜¯æ­¤å‡½æ•°çš„åŠŸèƒ½ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">visit_Assign</span><span class="params">(self, node)</span>:</span></span><br><span class="line">    var_name = node.left.value</span><br><span class="line">    self.GLOBAL_SCOPE[var_name] = self.visit(node.right)</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªå‡½æ•°å­˜å‚¨äº†ä¸€ä¸ªé”®-å€¼å¯¹key-value pairï¼ˆä¸€ä¸ªå˜é‡åã€ä¸€ä¸ªå˜é‡çš„å€¼ï¼‰ï¼Œå­˜å‚¨åœ¨<em>symbol table</em> GLOBAL_SCOPEã€‚</p><ul><li><p>what is <em>symbol table</em>?</p><p><strong><em>symbol table</em></strong>æ˜¯ä¸€ä¸ªæŠ½è±¡æ•°æ®ç±»å‹ï¼ˆabstract data type (<strong>ADT</strong>)ï¼‰ï¼Œç”¨äºè·Ÿè¸ªæºç ä¸­å„ç§ç¬¦å·ã€‚ç›®å‰çš„ç¬¦å·ç±»å‹è¿˜åªæœ‰å˜é‡ï¼Œæˆ‘ä»¬ç”¨Pythonå­—å…¸è¶‹åŠ¿çº¿ç¬¦å·è¡¨çš„ADTã€‚</p><p>ï¼ˆåœ¨è¿™é‡Œç”¨ç¬¦å·å­—è¡¨å´å®ç°çš„ç¬¨æ‹™ï¼šå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ªå¸¦æœ‰ç‰¹æ®Šæ–¹æ³•çš„ç‹¬ç«‹ç±»ï¼Œè€Œæ˜¯ä¸€ä¸ªç®€å•çš„Pythonå­—å…¸ï¼Œè€Œä¸”å®ƒçš„å¦å¤–èŒè´£æ˜¯ å†…å­˜ç©ºé—´ã€‚åœ¨åé¢çš„æ–‡ç« ä¸­ï¼ŒåŸä½œè€…å°†ä¼šå¸¦æˆ‘ä»¬äº†è§£symbol tablesçš„ç»†èŠ‚ï¼‰</p></li></ul></blockquote><ul><li><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹â€œa := 3;â€ çš„ASTï¼Œå’Œå®ƒçš„ symbol table ï¼ˆ<em>visit_Assign</em> å‡½æ•°å¤„ç†å‰å’Œå¤„ç†åçš„ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-9/lsbasi_part9_ast_st01-1584541191100.png" alt="lsbasi_part9_ast_st01"></p></li></ul><p>ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¥å­ï¼šâ€œb := a + 7;â€çš„ASTï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-9/lsbasi_part9_ast_only_st02.png" alt="lsbasi_part9_ast_only_st02"></p><p><code>visit_Var</code>ï¼šå¯ä»¥çœ‹å‡ºï¼Œèµ‹å€¼è¯­å¥å¾—åˆ°å³åŠéƒ¨åˆ†ï¼šâ€œa + 7â€ æåŠå˜é‡aï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆçŸ¥é“å˜é‡açš„valueï¼Œè¿™å°±æ˜¯visit_Varå‡½æ•°è¦å¹²çš„äº‹æƒ…ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">visit_Var</span><span class="params">(self, node)</span>:</span></span><br><span class="line">    var_name = node.value</span><br><span class="line">    val = self.GLOBAL_SCOPE.get(var_name)</span><br><span class="line">    <span class="keyword">if</span> val <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">raise</span> NameError(repr(var_name))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> val</span><br></pre></td></tr></table></figure><blockquote><p>visit ä¸€ä¸ª <em>Var</em> ç»“ç‚¹ï¼šå®ƒé¦–å…ˆå¾—åˆ°å˜é‡çš„åå­—ï¼›ç„¶åè¿™ä¸ªå˜é‡åå­—ä½œä¸ºè¿›å…¥<em>GLOBAL_SCOPE</em> dictionaryçš„keyğŸ”‘å»å¯»æ‰¾å˜é‡çš„valueï¼Œå¦‚æœæ‰¾åˆ°äº† å°±è¿”å›å˜é‡åœ°å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±NameErrorå‡½æ•°ä¼ºå€™ã€‚</p><p>ä¸‹é¢æ˜¯â€œb := a + 7;â€çš„ASTå’Œç¬¦å·è¡¨ï¼ˆèµ‹å€¼å‰å’Œå¤åˆ¶åï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-9/lsbasi_part9_ast_st02.png" alt="lsbasi_part9_ast_st02"></p></blockquote><hr><p>ä¸Šé¢å°±æ˜¯ä»Šå¤©æ‰€æœ‰éœ€è¦è¿›è¡Œçš„updateäº†ã€‚</p><p>At the end of the main program, we simply print the contents of the symbol table GLOBAL_SCOPE to standard output.</p><p>Letâ€™s take our updated interpreter for a drive both from a Python interactive shell and from the command line. Make sure that you downloaded both the source code for the interpreter and the <a href="https://github.com/rspivak/lsbasi/blob/master/part9/python/assignments.txt" target="_blank" rel="noopener">assignments.txt</a> file before testing:</p><p>Launch your Python shell:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ python</span><br><span class="line">&gt;&gt;&gt; from spi import Lexer, Parser, Interpreter</span><br><span class="line">&gt;&gt;&gt; text &#x3D; &quot;&quot;&quot;\</span><br><span class="line">... BEGIN</span><br><span class="line">...</span><br><span class="line">...     BEGIN</span><br><span class="line">...         number :&#x3D; 2;</span><br><span class="line">...         a :&#x3D; number;</span><br><span class="line">...         b :&#x3D; 10 * a + 10 * number &#x2F; 4;</span><br><span class="line">...         c :&#x3D; a - - b</span><br><span class="line">...     END;</span><br><span class="line">...</span><br><span class="line">...     x :&#x3D; 11;</span><br><span class="line">... END.</span><br><span class="line">... &quot;&quot;&quot;</span><br><span class="line">&gt;&gt;&gt; lexer &#x3D; Lexer(text)</span><br><span class="line">&gt;&gt;&gt; parser &#x3D; Parser(lexer)</span><br><span class="line">&gt;&gt;&gt; interpreter &#x3D; Interpreter(parser)</span><br><span class="line">&gt;&gt;&gt; interpreter.interpret()</span><br><span class="line">&gt;&gt;&gt; print(interpreter.GLOBAL_SCOPE)</span><br><span class="line">&#123;&#39;a&#39;: 2, &#39;x&#39;: 11, &#39;c&#39;: 27, &#39;b&#39;: 25, &#39;number&#39;: 2&#125;</span><br></pre></td></tr></table></figure><p>And from the command line, using a source file as input to our interpreter:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python spi.py assignments.txt</span><br><span class="line">&#123;&#39;a&#39;: 2, &#39;x&#39;: 11, &#39;c&#39;: 27, &#39;b&#39;: 25, &#39;number&#39;: 2&#125;</span><br></pre></td></tr></table></figure><p>If you havenâ€™t tried it yet, try it now and see for yourself that the interpreter is doing its job properly.</p><h2 id="summary"><a href="#summary" class="headerlink" title="summary"></a><red>summary</red></h2><p>è®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ï¼Œä½ ä»Šå¤©æ‰©å±•äº†Pascalè§£é‡Šå™¨çš„å“ªäº›éƒ¨åˆ†ï¼š</p><ol><li>æ·»åŠ æ–°çš„è¯­æ³•è§„åˆ™</li><li>æ·»åŠ æ–°çš„tokenï¼Œå’Œå®ƒå¯¹åº”è¯æ³•åˆ†æå™¨ä¸­çš„æ–¹æ³•ï¼ˆä¹Ÿæ›´æ–°äº†<em>get_next_token</em>ï¼‰</li><li>åœ¨ parser ä¸­ä¸ºæ–°çš„è¯­æ³•ç»“æ„æ·»åŠ æ–°çš„ASTç»“ç‚¹</li><li>åœ¨ï¼ˆé€’å½’ä¸‹é™çš„ï¼‰è¯­æ³•åˆ†æä¸­ æ·»åŠ ç›¸åº”å¯¹åº”æ–°è¯­æ³•è§„åˆ™çš„æ–°å‡½æ•°ï¼Œ</li><li>åœ¨interpreterä¸­å¢æ·»äº†æ–°çš„visitorå‡½æ•°</li><li>æ–°å¢ ç”¨äºå­˜å‚¨å’ŒæŸ¥æ‰¾å˜é‡çš„å­—å…¸</li></ol><h2 id="HACKS"><a href="#HACKS" class="headerlink" title="HACKS"></a><red>HACKS</red></h2><p>ç°åœ¨è¦ä»‹ç»ä¸€ä¸‹â€œhacksâ€ï¼Œå¹¶ä¸”éšç€ç³»åˆ—æ–‡ç« çš„æ·±å…¥ï¼Œæˆ‘ä»¬è¿˜å°†ä¸€æ­¥æ­¥åˆ é™¤è¿™äº›å†…å®¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-9/lsbasi_part9_hacks.png" alt="lsbasi_part9_hacks"></p><p center large><blue>æœªå®Œå¾…ç»­</blue>....</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;yellow&gt;ä»Šå¤©è¦å­¦ä¹ çš„å†…å®¹ï¼š&lt;/yellow&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;å¦‚ä½•parse and interpret ä¸€ä¸ªPascalç¨‹åºçš„&lt;strong&gt;å®šä¹‰ definition&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;å¦‚ä½•parse and interpret &lt;strong&gt;å¤åˆè¯­å¥compound statements&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;å¦‚ä½•parse and interpret &lt;strong&gt;èµ‹å€¼è¯­å¥(åŒ…æ‹¬å˜é‡)assignment statements, including variables.&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;ä»‹ç»ç¬¦å·è¡¨ï¼Œä»¥åŠå¦‚ä½•å­˜å‚¨å’ŒæŸ¥æ‰¾å˜é‡ã€‚&lt;/li&gt;&lt;/ol&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Let&#39;s Build A Simple Interpreter" scheme="https://www.longlongqin.top/tags/Let-s-Build-A-Simple-Interpreter/"/>
    
  </entry>
  
  <entry>
    <title>Front-matterçš„è§„åˆ™</title>
    <link href="https://www.longlongqin.top/archives/138a.html"/>
    <id>https://www.longlongqin.top/archives/138a.html</id>
    <published>2020-03-16T14:08:32.497Z</published>
    <updated>2020-03-17T08:15:54.491Z</updated>
    
    <content type="html"><![CDATA[<p>æ–‡ç« å†™ä½œæ—¶ï¼Œçš„front matter çš„å‚æ•°</p><a id="more"></a><p>å‚æ•°æè¿°<code>layout</code>å¸ƒå±€<code>title</code>æ ‡é¢˜<code>date</code>å»ºç«‹æ—¥æœŸ<code>updated</code>æ›´æ–°æ—¥æœŸ<code>comments</code>å¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½<code>tags</code>æ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰<code>categories</code>åˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰<code>permalink</code>è¦†ç›–æ–‡ç« ç½‘å€</p><p>å…¶ä¸­ï¼Œåˆ†ç±»å’Œæ ‡ç­¾éœ€è¦åŒºåˆ«ä¸€ä¸‹ï¼Œåˆ†ç±»å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´<code>Foo</code>ï¼Œ<code>Bar</code>ä¸ç­‰äº<code>Bar</code>ï¼Œ<code>Foo</code>ï¼›è€Œæ ‡ç­¾æ²¡æœ‰é¡ºåºå’Œå±‚æ¬¡ã€‚</p><p><strong>æ³¨æ„ï¼šæ¯ä¸ªå†’å·åé¢æ˜¯æœ‰ä¸€ä¸ªç©ºæ ¼çš„ã€‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">title: æ–‡ç« çš„front-matterè§„åˆ™ <span class="comment">// ä½ çš„åšå®¢åå­—    </span></span><br><span class="line">date: <span class="number">2019</span><span class="number">-08</span><span class="number">-10</span> <span class="number">21</span>:<span class="number">44</span>:<span class="number">44</span>  <span class="comment">//æ–‡ç« åˆ›å»ºçš„æ—¥æœŸ</span></span><br><span class="line">author: longlongqin   <span class="comment">//ä½œè€…åå­—</span></span><br><span class="line">img: /medias/banner/<span class="number">6.</span>jpg <span class="comment">//æ–‡ç« çš„æ˜¾ç¤ºçš„æ—¶å€™çš„èƒŒæ™¯</span></span><br><span class="line">coverImg: /medias/banner/<span class="number">6.</span>jpg  </span><br><span class="line">top: <span class="literal">true</span></span><br><span class="line">cover: <span class="literal">true</span></span><br><span class="line">toc: <span class="literal">true</span></span><br><span class="line">password: </span><br><span class="line">mathjax: <span class="literal">true</span></span><br><span class="line">summary: è¿™æ˜¯ä½ è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦</span><br><span class="line">tags:</span><br><span class="line">- Hexo</span><br><span class="line">- Github</span><br><span class="line">- åšå®¢</span><br><span class="line">categories:</span><br><span class="line">- è½¯ä»¶å®‰è£…ä¸é…ç½®</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">é…ç½®é€‰é¡¹</th><th align="left">é»˜è®¤å€¼</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">title</td><td align="left"><code>Markdown</code> çš„æ–‡ä»¶æ ‡é¢˜</td><td align="left">æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹</td></tr><tr><td align="left">date</td><td align="left">æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´</td><td align="left">å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€</td></tr><tr><td align="left">author</td><td align="left">æ ¹ <code>_config.yml</code>ä¸­çš„ <code>author</code></td><td align="left">æ–‡ç« ä½œè€…</td></tr><tr><td align="left">img</td><td align="left"><code>featureImages</code>ä¸­çš„æŸä¸ªå€¼</td><td align="left">æ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: <code>http://xxx.com/xxx.jpg</code></td></tr><tr><td align="left">top</td><td align="left"><code>true</code></td><td align="left">æ¨èæ–‡ç« ï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ <code>top</code> å€¼ä¸º <code>true</code>ï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µæ¨èæ–‡ç« </td></tr><tr><td align="left">cover</td><td align="left"><code>false</code></td><td align="left"><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­</td></tr><tr><td align="left">coverImg</td><td align="left">æ— </td><td align="left"><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡</td></tr><tr><td align="left">password</td><td align="left">æ— </td><td align="left">æ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® <code>password</code> çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ <code>SHA256</code> åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>verifyPassword</code> é€‰é¡¹</td></tr><tr><td align="left">toc</td><td align="left"><code>true</code></td><td align="left">æ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>toc</code> é€‰é¡¹</td></tr><tr><td align="left">mathjax</td><td align="left"><code>false</code></td><td align="left">æ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ <code>mathjax</code>ï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ</td></tr><tr><td align="left">summary</td><td align="left">æ— </td><td align="left">æ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦</td></tr><tr><td align="left">categories</td><td align="left">æ— </td><td align="left">æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»</td></tr><tr><td align="left">tags</td><td align="left">æ— </td><td align="left">æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾</td></tr><tr><td align="left">reprintPolicy</td><td align="left">cc_by</td><td align="left">æ–‡ç« è½¬è½½è§„åˆ™ï¼Œ å¯ä»¥æ˜¯ cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint æˆ– pay ä¸­çš„ä¸€ä¸ª</td></tr></tbody></table><p><strong>æ³¨æ„</strong>:</p><blockquote><ol><li>å¦‚æœ <code>img</code> å±æ€§ä¸å¡«å†™çš„è¯ï¼Œæ–‡ç« ç‰¹è‰²å›¾ä¼šæ ¹æ®æ–‡ç« æ ‡é¢˜çš„ <code>hashcode</code> çš„å€¼å–ä½™ï¼Œç„¶åé€‰å–ä¸»é¢˜ä¸­å¯¹åº”çš„ç‰¹è‰²å›¾ç‰‡ï¼Œä»è€Œè¾¾åˆ°è®©æ‰€æœ‰æ–‡ç« éƒ½çš„ç‰¹è‰²å›¾<strong>å„æœ‰ç‰¹è‰²</strong>ã€‚</li><li><code>date</code> çš„å€¼å°½é‡ä¿è¯æ¯ç¯‡æ–‡ç« æ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºæœ¬ä¸»é¢˜ä¸­ <code>Gitalk</code> å’Œ <code>Gitment</code> è¯†åˆ« <code>id</code> æ˜¯é€šè¿‡ <code>date</code> çš„å€¼æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„ã€‚</li><li>å¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„åŠŸèƒ½ï¼Œä¸ä»…è¦åœ¨ Front-matter ä¸­è®¾ç½®é‡‡ç”¨äº† SHA256 åŠ å¯†çš„ password çš„å€¼ï¼Œè¿˜éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­æ¿€æ´»äº†é…ç½®ã€‚æœ‰äº›åœ¨çº¿çš„ SHA256 åŠ å¯†çš„åœ°å€ï¼Œå¯ä¾›ä½ ä½¿ç”¨ï¼š<a href="http://tool.oschina.net/encrypt?type=2" target="_blank" rel="noopener">å¼€æºä¸­å›½åœ¨çº¿å·¥å…·</a>ã€<a href="http://encode.chahuo.com/" target="_blank" rel="noopener">chahuo</a>ã€<a href="http://tool.chinaz.com/tools/hash.aspx" target="_blank" rel="noopener">ç«™é•¿å·¥å…·</a>ã€‚</li></ol></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ–‡ç« å†™ä½œæ—¶ï¼Œçš„front matter çš„å‚æ•°&lt;/p&gt;
    
    </summary>
    
    
      <category term="åšå®¢æ­å»º" scheme="https://www.longlongqin.top/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="front-matteré…ç½®" scheme="https://www.longlongqin.top/tags/front-matter%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
  <entry>
    <title>Letâ€™s Build A Simple Interpreter-8</title>
    <link href="https://www.longlongqin.top/archives/ae12.html"/>
    <id>https://www.longlongqin.top/archives/ae12.html</id>
    <published>2020-03-15T10:04:49.000Z</published>
    <updated>2020-03-18T06:21:29.606Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©ï¼Œå°†è¦åœ¨å‰é¢çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ <strong>ä¸€å…ƒæ“ä½œç¬¦unary operators</strong>ï¼šunary plus (+) and unary minus (-) operatorsã€‚</p><a id="more"></a><p><strong>ä»Šå¤©å°†è¦å®Œæˆçš„ä»»åŠ¡ï¼š</strong></p><ul><li>æ‰©å±•è¯­æ³•ï¼Œèƒ½å¤Ÿå¤„ç†â€œ+â€ã€â€œ-â€ä¸€å…ƒæ“ä½œç¬¦ï¼›</li><li>æ·»åŠ ä¸€ä¸ªæ–°çš„ç»“ç‚¹ç±»ï¼š<em>UnaryOp</em> AST node classï¼›</li><li>æ‰©å±•è¯­æ³•åˆ†æå™¨parserï¼Œç”Ÿæˆå«æœ‰<em>UnaryOp</em> nodesç»“ç‚¹çš„æŠ½è±¡è¯­æ³•æ ‘ï¼›</li><li>æ‰©å±•è§£é‡Šå™¨interpreterã€‚å¹¶ä¸”å¢æ·»ä¸€ä¸ªæ–°çš„<em>visit_UnaryOp</em> methodå‡½æ•°ï¼Œå®ƒå¯ä»¥è§£æä¸€å…ƒæ“ä½œç¬¦</li></ul><p>ç°åœ¨ï¼Œå¼€å§‹å§ã€‚</p><h1 id="ä¸€å…ƒæ“ä½œç¬¦"><a href="#ä¸€å…ƒæ“ä½œç¬¦" class="headerlink" title="ä¸€å…ƒæ“ä½œç¬¦"></a>ä¸€å…ƒæ“ä½œç¬¦</h1><h2 id="ä¸€å…ƒæ“ä½œç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€å…ƒæ“ä½œç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€å…ƒæ“ä½œç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸€å…ƒæ“ä½œç¬¦æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><strong>äºŒå…ƒæ“ä½œç¬¦ï¼š</strong></p><p>ä¹‹å‰ï¼Œæˆ‘ä»¬çš„è®¡ç®—å™¨éƒ½æ˜¯å›´ç»•ç€è¿™äº›äºŒå…ƒæ“ä½œç¬¦ (+, -, *, /)åœ¨å·¥ä½œï¼Œè¿™äº›æ“ä½œç¬¦æ“ä½œä¸¤ä¸ªæ“ä½œæ•°ï¼ˆthe operators that operate on two operands.ï¼‰ã€‚</p><p><strong>ä¸€å…ƒæ“ä½œç¬¦<em>unary operator</em> ï¼š</strong></p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±èƒ½çŸ¥é“ä¸€å…ƒæ“ä½œç¬¦æ˜¯ï¼šä¸€ä¸ªæ“ä½œç¬¦åªæ“ä½œä¸€ä¸ªæ“ä½œæ•°ã€‚ï¼ˆA <em>unary operator</em> is an operator that operates on one <em>operand</em> only.ï¼‰</p><h2 id="ä¸€å…ƒæ“ä½œç¬¦çš„è§„åˆ™"><a href="#ä¸€å…ƒæ“ä½œç¬¦çš„è§„åˆ™" class="headerlink" title="ä¸€å…ƒæ“ä½œç¬¦çš„è§„åˆ™"></a>ä¸€å…ƒæ“ä½œç¬¦çš„è§„åˆ™</h2><p>ä¸‹é¢æ˜¯ä¸€å…ƒæ“ä½œç¬¦â€œ+ã€-â€çš„è§„åˆ™ï¼š</p><ul><li>ä¸€å…ƒæ“ä½œç¬¦<code>-</code>ï¼šå®ƒä¼šä½¿å®ƒçš„æ“ä½œæ•°å–åï¼ˆnegationï¼‰</li><li>ä¸€å…ƒæ“ä½œç¬¦<code>+</code>ï¼šä»–å¯¹äºå®ƒçš„æ“ä½œæ•°æ²¡å½±å“ï¼Œå³ï¼Œå®ƒçš„æ“ä½œæ•°ä¸æ”¹å˜ä»€ä¹ˆ</li><li>ä¸€å…ƒæ“ä½œç¬¦æ¯”äºŒå…ƒæ“ä½œç¬¦ï¼ˆ+, -, *, and /ï¼‰æœ‰ç€æ›´é«˜çš„ä¼˜å…ˆçº§ï¼ˆprecedenceï¼‰</li></ul><p>ä¾‹å­ï¼š</p><ol><li><p><strong>â€œ+ - 3â€</strong></p><p>å…¶ä¸­ï¼Œè¿™ç¬¬ä¸€ä¸ªä½ç½®çš„â€œ+â€è¡¨ç¤ºä¸€å…ƒæ“ä½œç¬¦åŠ å·æ“ä½œï¼›ç¬¬äºŒä¸ªä½ç½®çš„â€œ-â€è¡¨ç¤ºä¸€å…ƒæ“ä½œç¬¦å‡å·æ“ä½œã€‚æ‰€ä»¥ï¼Œâ€œ+ - 3â€å°±ç›¸å½“äºâ€œ+ (- (3))â€ï¼Œå³ï¼Œç­‰äº-3ã€‚</p><p>ã€æ³¨ã€‘ï¼šè¿™é‡Œçš„-3å¹³å¸¸æƒ…å†µè¯´å®ƒæ˜¯ä¸€ä¸ªè´Ÿæ•´æ•°ï¼ˆnegative integerï¼‰ï¼Œä½†æ˜¯åœ¨è¿™é‡Œæˆ‘ä»¬ç§°å®ƒæ˜¯ï¼šä¸€ä¸ªä¸€å…ƒæ“ä½œç¬¦â€œ-â€ï¼Œå®ƒçš„æ“ä½œæ•°æ˜¯3ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-8/lsbasi_part8_exp1.png" alt="img"></p></li><li><p><strong>â€œ5 - - 2â€</strong></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-8/lsbasi_part8_exp2.png" alt="img"></p><p><u>åœ¨è¿™ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œç¬¬ä¸€ä¸ªâ€œ-â€è¡¨ç¤ºä¸€ä¸ªäºŒå…ƒæ“ä½œç¬¦ï¼šå‡æ³•ã€‚ç¬¬äºŒä¸ªâ€œ-â€è¡¨ç¤ºä¸€ä¸ªä¸€å…ƒæ“ä½œç¬¦ï¼šå–åã€‚</u></p><p>æ¯”å¦‚ä¸‹é¢çš„ä¸€äº›ä¾‹å­ï¼Œä¹Ÿæ˜¯è¿™ä¸ªæ ·å­ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-8/lsbasi_part8_exp3.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-8/lsbasi_part8_exp4.png" alt="img"></p></li></ol><h1 id="å¼€å§‹ä¿®æ”¹"><a href="#å¼€å§‹ä¿®æ”¹" class="headerlink" title="å¼€å§‹ä¿®æ”¹"></a>å¼€å§‹ä¿®æ”¹</h1><h2 id="å°†ä¸€å…ƒæ“ä½œç¬¦æ·»åŠ å…¥è¯­æ³•"><a href="#å°†ä¸€å…ƒæ“ä½œç¬¦æ·»åŠ å…¥è¯­æ³•" class="headerlink" title="å°†ä¸€å…ƒæ“ä½œç¬¦æ·»åŠ å…¥è¯­æ³•"></a>å°†ä¸€å…ƒæ“ä½œç¬¦æ·»åŠ å…¥è¯­æ³•</h2><h3 id="ä¿®æ”¹factor"><a href="#ä¿®æ”¹factor" class="headerlink" title="ä¿®æ”¹factor"></a>ä¿®æ”¹factor</h3><p>å› ä¸ºï¼Œä¸€å…ƒæ“ä½œç¬¦çš„ä¼˜å…ˆçº§é«˜äºäºŒå…ƒæ“ä½œç¬¦ã€‚æ‰€ä»¥ï¼Œå‡½æ•°<code>factor</code>éœ€è¦éœ€æ”¹ã€‚å®ƒä¹‹å‰çš„è§„åˆ™ä¸ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-8/lsbasi_part8_factor_before.png" alt="æ›´æ–°å‰"></p><p>æ›´æ–°åçš„ï¼Œè§„åˆ™ä¸ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-8/lsbasi_part8_factor_after.png" alt="æ›´æ–°å"></p><blockquote><p>ä»æ›´æ–°åçš„factorå‡½æ•°çš„è§„åˆ™ï¼Œå¯çŸ¥ï¼š<strong>å®ƒæ‰©å±•ä¹‹åèƒ½å¤Ÿå¼•ç”¨å®ƒæœ¬èº«</strong>ã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿå†™å‡ºç±»ä¼¼äºï¼š- - - + - 3â€è¿™æ ·çš„å¼å­ï¼Œè¿™æ˜¯åˆæ³•çš„å¸¦æœ‰å¾ˆå¤šä¸€å…ƒæ“ä½œç¬¦çš„è¡¨è¾¾å¼ã€‚</p></blockquote><p>å…¶å®ï¼Œè¿™é‡Œä¿®æ”¹è¯­æ³•ï¼Œåªç”¨ä¿®æ”¹<code>factor</code>å‡½æ•°çš„äº§ç”Ÿå¼ï¼Œå…¶ä»–çš„<code>expr</code>ã€<code>term</code>äº§ç”Ÿå¼ä¸å˜ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-8/lsbasi_part8_grammar.png" alt="img"></p><h2 id="æ‰©å±•æŠ½è±¡è¯­æ³•æ ‘çš„ç»“ç‚¹ç±»"><a href="#æ‰©å±•æŠ½è±¡è¯­æ³•æ ‘çš„ç»“ç‚¹ç±»" class="headerlink" title="æ‰©å±•æŠ½è±¡è¯­æ³•æ ‘çš„ç»“ç‚¹ç±»"></a>æ‰©å±•æŠ½è±¡è¯­æ³•æ ‘çš„ç»“ç‚¹ç±»</h2><p>ä¸‹ä¸€æ­¥å°±æ˜¯è¦æ·»åŠ ä¸€ä¸ªAST node classï¼Œæ¥è¡¨ç¤ºä¸€å…ƒæ“ä½œç¬¦ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UnaryOp</span><span class="params">(AST)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, op, expr)</span>:</span></span><br><span class="line">        self.token = self.op = op</span><br><span class="line">        self.expr = expr</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼šopã€exprï¼š</p><ul><li>opï¼šä»£è¡¨ä¸€å…ƒæ“ä½œç¬¦çš„tokenï¼ˆ+æˆ–-ï¼‰</li><li>exprï¼šè¡¨ç¤ºä¸€ä¸ªASTçš„ç»“ç‚¹ï¼ˆè¦ä¸exprå‡½æ•°åŒºåˆ†ï¼Œè¿™ä¸¤ä¸ªçŸ¥è¯†åå­—ä¸€æ ·ï¼Œä½†æ˜¯ä»£è¡¨çš„ä¸œè¥¿ä¸ä¸€æ ·ï¼‰</li></ul><h2 id="æ‰©å±•è¯­æ³•åˆ†æå™¨parser"><a href="#æ‰©å±•è¯­æ³•åˆ†æå™¨parser" class="headerlink" title="æ‰©å±•è¯­æ³•åˆ†æå™¨parser"></a>æ‰©å±•è¯­æ³•åˆ†æå™¨parser</h2><p>ä¹‹å‰æˆ‘ä»¬ä¿®æ”¹äº†è¯­æ³•è§„åˆ™ï¼Œå½“ä¸­çš„factorå‡½æ•°çš„äº§ç”Ÿå¼ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬å°†è¦ä¿®æ”¹ä»£ç ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†äº§ç”Ÿå¼ä¸­çš„ â€œ(PLUS | MINUS) factorâ€ å­è§„åˆ™ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factor</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""factor : (PLUS | MINUS) factor | INTEGER | LPAREN expr RPAREN"""</span></span><br><span class="line">    token = self.current_token</span><br><span class="line">    <span class="keyword">if</span> token.type == PLUS:</span><br><span class="line">        self.eat(PLUS)</span><br><span class="line">        node = unaryop(token, self.factor())</span><br><span class="line">        <span class="keyword">return</span> node</span><br><span class="line">    <span class="keyword">elif</span> token.type == MINUS:</span><br><span class="line">        self.eat(MINUS)</span><br><span class="line">        node = unaryop(token, self.facot())</span><br><span class="line">        <span class="keyword">return</span> node</span><br><span class="line">    <span class="keyword">elif</span> token.type == INTEGER:</span><br><span class="line">        self.eat(INTEGER)</span><br><span class="line">        node = NUM(token)</span><br><span class="line">        <span class="keyword">return</span> node</span><br><span class="line">    <span class="keyword">elif</span> token.type == LPAREN:</span><br><span class="line">        self.eat(LPAREN)</span><br><span class="line">        node = self.expr()</span><br><span class="line">        self.eat(RPAREN)</span><br><span class="line">        <span class="keyword">return</span> node</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•è§£é‡Šå™¨Interpreter"><a href="#æ‰©å±•è§£é‡Šå™¨Interpreter" class="headerlink" title="æ‰©å±•è§£é‡Šå™¨Interpreter"></a>æ‰©å±•è§£é‡Šå™¨Interpreter</h2><p>ç°åœ¨æˆ‘ä»¬è¿˜éœ€è¦æ‰©å±•è§£é‡Šå™¨ç±»<em>Interpreter</em> class ï¼Œå‘å…¶ä¸­æ·»åŠ <em>visit_UnaryOp</em> å‡½æ•°ï¼Œæ¥è§£é‡Šä¸€å…ƒæ“ä½œç¬¦ç»“ç‚¹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">visit_UnaryOp</span><span class="params">(self, node)</span></span></span><br><span class="line">op = node.op.type #tokençš„ç±»å‹</span><br><span class="line">    <span class="keyword">if</span> op == PLUS:</span><br><span class="line">        <span class="keyword">return</span> +self.visit(node.expr)</span><br><span class="line">    <span class="keyword">elif</span> op == MINUS:</span><br><span class="line">        <span class="keyword">return</span> -self.visit(node.expr)</span><br></pre></td></tr></table></figure><h1 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h1><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œè¡¨è¾¾å¼ â€œ5 - - - 2â€ ï¼Œé€šè¿‡æˆ‘ä»¬çš„è§£æå™¨æ¥è¯å®è¿™ä¸ªæ–°çš„<em>visit_UnaryOp</em>å‡½æ•°ç¡®å®èµ·ä½œç”¨äº†ã€‚</p><p>ä¸‹é¢æ˜¯å¦‚ä½•ä»Python shellä¸­å®ç°:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> spi <span class="keyword">import</span> BinOp, UnaryOp, Num, MINUS, INTEGER, Token</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>five_tok = Token(INTEGER, <span class="number">5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>two_tok = Token(INTEGER, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>minus_tok = Token(MINUS, <span class="string">'-'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>expr_node = BinOp(</span><br><span class="line"><span class="meta">... </span>    Num(five_tok),</span><br><span class="line"><span class="meta">... </span>    minus_tok,</span><br><span class="line"><span class="meta">... </span>    UnaryOp(minus_token, UnaryOp(minus_token, Num(two_tok)))</span><br><span class="line"><span class="meta">... </span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> spi <span class="keyword">import</span> Interpreter</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>inter = Interpreter(<span class="literal">None</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>inter.visit(expr_node)</span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ASTæ ‘çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„:</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-8/lsbasi_part8_ast.png" alt="img"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©ï¼Œå°†è¦åœ¨å‰é¢çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ &lt;strong&gt;ä¸€å…ƒæ“ä½œç¬¦unary operators&lt;/strong&gt;ï¼šunary plus (+) and unary minus (-) operatorsã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Let&#39;s Build A Simple Interpreter" scheme="https://www.longlongqin.top/tags/Let-s-Build-A-Simple-Interpreter/"/>
    
  </entry>
  
  <entry>
    <title>æ„é€ å‡¸åŒ…â€”â€”Divide And Conquer</title>
    <link href="https://www.longlongqin.top/archives/f32f.html"/>
    <id>https://www.longlongqin.top/archives/f32f.html</id>
    <published>2020-03-15T08:12:57.000Z</published>
    <updated>2020-03-17T08:43:00.307Z</updated>
    
    <content type="html"><![CDATA[<p>Graham Scanç®—æ³•è¯´æ˜äº†å‡¸åŒ…æ„é€ é—®é¢˜çš„ä¸‹ç•ŒO(nlogn)æ˜¯å¯ä»¥è¾¾åˆ°çš„ã€‚å…¶å®O(nlogn)çš„ç®—æ³•è¿œä¸æ­¢è¿™ä¸€ç§ï¼Œåˆ†æ²»æ³•å°±æ˜¯ä¸€ç§èƒ½è¾¾åˆ°O(nlogn)å¤æ‚åº¦çš„æ€æƒ³ã€‚åœ¨æ­¤å¼•å…¥è¿ç”¨åˆ†æ²»æ€æƒ³çš„ä¸¤ç§ç®—æ³•æ¥æ„é€ å‡¸åŒ…ã€‚</p><a id="more"></a><h1 id="å½’å¹¶æ’åºä¸åˆ†æ²»æ€æƒ³"><a href="#å½’å¹¶æ’åºä¸åˆ†æ²»æ€æƒ³" class="headerlink" title="å½’å¹¶æ’åºä¸åˆ†æ²»æ€æƒ³"></a>å½’å¹¶æ’åºä¸åˆ†æ²»æ€æƒ³</h1><p>å¼•å…¥æ–°ç®—æ³•ä¹‹å‰ä¾æ—§å…ˆæ¥å›é¡¾ä¸€ä¸ªç»å…¸æ’åºç®—æ³•ï¼šå½’å¹¶æ’åºï¼ˆmerge sortï¼‰ã€‚å½’å¹¶æ’åºçš„åŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315163056136.png" alt="image-20200315163056136"></p><p>ç®—æ³•åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š<strong>åˆ†ï¼ˆdivideï¼‰</strong>å’Œ<strong>å½’å¹¶ï¼ˆmergeï¼‰</strong>ã€‚</p><ul><li><strong>åˆ†</strong>çš„é˜¶æ®µå°†å¾…æ’åºåˆ—å‡åˆ†åˆ°ä¸€ä¸ªä¸ªå­åºåˆ—ï¼ˆå¦‚å›¾ä¸­åˆ’åˆ†åˆ°å•ä¸ªå…ƒç´ ï¼‰ã€‚</li><li><strong>å½’å¹¶</strong>é˜¶æ®µå°†åˆ†å¥½çš„å­åºåˆ—ä¸¤ä¸¤åˆå¹¶æˆæœ‰åºåºåˆ—ï¼Œé‡å¤åˆå¹¶çš„è¿‡ç¨‹ç›´åˆ°æ•´ä½“å½’ä¸ºä¸€ä¸ªåºåˆ—ã€‚</li></ul><p>å½’å¹¶è¿‡ç¨‹å…±lognæ­¥ï¼Œæ¯æ­¥è€—è´¹nçš„æ—¶é—´ï¼Œæ€»ä½“å¤æ‚åº¦ä¸ºO(nlogn)ã€‚</p><p>å½’å¹¶æ’åºçš„è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ†æ²»ï¼ˆdivide-and-conquerï¼‰ç­–ç•¥ã€‚å‡¸åŒ…æ„é€ é—®é¢˜ä¹Ÿå¯ä»¥å¥—ç”¨è¿™ç§ç­–ç•¥æ¥åˆ†è€Œæ²»ä¹‹ï¼Œé€æ­¥æ±‚è§£ã€‚<u>æˆ‘ä»¬å¯ä»¥å°†å¾…å¤„ç†ç‚¹é›†Såˆ†ä¸ºåŒç­‰è§„æ¨¡çš„ä¸¤ä¸ªå­ç‚¹é›†ï¼Œå¹¶åˆ†åˆ«å¯¹å…¶æ±‚å‡¸åŒ…ã€‚</u></p><p>æœ‰äº†ä¸¤ä¸ªå­è§£åï¼Œé—®é¢˜å°±å˜æˆäº†å¦‚ä½•<strong>é€‚å½“åŠ ä¸€äº›è¾¹</strong>ï¼Œå°†ä¸¤ä¸ªå­å‡¸åŒ…mergeæˆæ•´ä½“è§£ã€‚<strong>åˆ†æ²»æ³•æ ¸å¿ƒçš„ä»»åŠ¡å°±æ˜¯å¦‚ä½•mergeã€‚</strong></p><h1 id="Divide-And-Conquerï¼ˆ1ï¼‰"><a href="#Divide-And-Conquerï¼ˆ1ï¼‰" class="headerlink" title="Divide And Conquerï¼ˆ1ï¼‰"></a>Divide And Conquerï¼ˆ1ï¼‰</h1><h2 id="é¢„å¤„ç†ä¸ºstar-shaped-polygon"><a href="#é¢„å¤„ç†ä¸ºstar-shaped-polygon" class="headerlink" title="é¢„å¤„ç†ä¸ºstar-shaped polygon"></a>é¢„å¤„ç†ä¸ºstar-shaped polygon</h2><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315163119718.png" alt="image-20200315163119718"></p><p>åˆ†æ²»æ³•è§£å†³é—®é¢˜çš„è¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºï¼šå¤§äº‹åŒ–å°ï¼Œå°äº‹åŒ–äº†ã€‚å°±æ˜¯é¦–å…ˆå°†é—®é¢˜åˆ’åˆ†ä¸ºæ˜“æ±‚è§£çš„å­é—®é¢˜ï¼Œå­é—®é¢˜å¥—ç”¨å·²çŸ¥æ–¹æ³•è§£ç­”å³å¯ã€‚ä¾‹å¦‚å­å‡¸åŒ…çš„æ„é€ å°±èƒ½ç”¨Graham Scanæ¥è§£å†³ã€‚</p><p>Graham Scanè§£å†³é—®é¢˜çš„å‰ææ˜¯ï¼šå‚ç…§åŸºå‡†ç‚¹ï¼Œå…¶ä»–ç‚¹æŒ‰æè§’æœ‰åºæ’åˆ—ï¼Œä¹Ÿå°±æ˜¯æ„æˆäº†ä¸€ä¸ªæœ‰åºçš„æ˜Ÿå½¢å¤šè¾¹å½¢ï¼ˆstar-shaped polygonï¼‰ã€‚<strong>é¦–å…ˆè¦åšçš„å°±æ˜¯å°†ä¸¤ä¸ªå­å‡¸åŒ…é¢„å¤„ç†æˆä¸¤ä¸ªstar-shaped polygonã€‚</strong></p><blockquote><p><strong>star-shaped polygonæ˜Ÿå½¢å¤šè¾¹å½¢</strong>æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å…¶å®å°±æ˜¯åœ¨å¤šè¾¹å½¢å†…éƒ¨å­˜åœ¨ä¸€ä¸ªç‚¹Aï¼Œè¿™ä¸ªç‚¹ä¸å¤šè¾¹å½¢å†…ä»»æ„ä¸€ç‚¹çš„è¿çº¿éƒ½åœ¨å¤šè¾¹å½¢å†…éƒ¨ï¼Œå°±å«åšæ˜Ÿå½¢å¤šè¾¹å½¢ï¼Œè¿™ä¸€ä¸ªç‚¹Aå°±å«åšå¤šè¾¹å½¢çš„å†…æ ¸ã€‚</p></blockquote><p>ç”±äºä»»ä½•ä¸€ä¸ªå‡¸å¤šè¾¹å½¢éƒ½æ˜¯star-shaped polygonï¼Œå®ƒå¿…ç„¶æœ‰ä¸€ä¸ªæ ¸ï¼Œå…¶ä»–ç‚¹æŒ‰æè§’æœ‰åºæ’åˆ—ã€‚<u>é—®é¢˜åœ¨äºå¦‚ä½•æ‰¾åˆ°ä¸€ä¸ªå…¬å…±æ ¸</u>ï¼Œä½¿å¾—ä¸¤ä¸ªå­å‡¸åŒ…åŒæ—¶å…³äºè¿™ä¸ªæ ¸æ˜¯æè§’æœ‰åºæ’åˆ—çš„ã€‚ä¹Ÿå°±æ˜¯å…¬å…±æ ¸å¤„äºä¸¤ä¸ªå‡¸åŒ…çš„äº¤éƒ¨åˆ†ï¼Œè¿™æ ·æ˜¯æœ€å¥½å¤„ç†çš„æƒ…å†µï¼ˆå¦‚ä¸‹å·¦å›¾ï¼‰ã€‚ä¸è¿‡è¿˜æœ‰å¯èƒ½æœ‰å…¶ä»–æƒ…å†µï¼Œä¸èƒ½æ‰¾åˆ°å…¬å…±æ ¸ï¼ˆå¦‚ä¸‹ä¸­å›¾ï¼‰ï¼Œç”šè‡³ä¸¤ä¸ªå‡¸åŒ…æ ¹æœ¬ä¸ç›¸äº¤ï¼ˆå¦‚ä¸‹å³å›¾ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315163145301.png" alt="image-20200315163145301"></p><p>è¿™å°±è¦å°†åˆ†æ²»ç­–ç•¥åˆ†ä¸åŒæƒ…å†µæ¥å®ç°ï¼š</p><h3 id="ä¸¤ä¸ªå­å‡¸åŒ…æœ‰å…¬å…±æ ¸ï¼š"><a href="#ä¸¤ä¸ªå­å‡¸åŒ…æœ‰å…¬å…±æ ¸ï¼š" class="headerlink" title="ä¸¤ä¸ªå­å‡¸åŒ…æœ‰å…¬å…±æ ¸ï¼š"></a>ä¸¤ä¸ªå­å‡¸åŒ…æœ‰å…¬å…±æ ¸ï¼š</h3><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315163518484.png" alt="image-20200315163518484"></p><p><u>å…ˆæ‰¾å…¶ä¸­ä¸€ä¸ªå­å‡¸åŒ…çš„æ ¸</u>ï¼šæˆ‘ä»¬å¯ä»¥ä»»å–è¯¥å­å‡¸åŒ…ä¸Šçš„ä¸‰ç‚¹æ„æˆä¸‰è§’å½¢ï¼Œæ±‚ä¸‰è§’å½¢é‡å¿ƒä½œä¸ºæ ¸ã€‚</p><p><u>ç„¶ååˆ¤æ–­è¿™ä¸ªæ ¸æ˜¯å¦ä¹Ÿåœ¨å¦ä¸€ä¸ªå­å‡¸åŒ…å†…éƒ¨</u>ï¼Œè‹¥åˆ¤å®šä¸ºçœŸï¼Œå°±æ˜¯æœ‰å…¬å…±æ ¸çš„æœ€ç®€å•æƒ…å†µã€‚åˆ¤å®šæ–¹æ³•ä¹Ÿå°±æ˜¯ä¹‹å‰æè¿‡çš„<u>in convex polygon test</u>ï¼Œå¯¹å‡¸åŒ…æ¯æ¡è¾¹åšto left testå³å¯ï¼Œåœ¨çº¿æ€§æ—¶é—´å†…å¯ä»¥åˆ¤å®šã€‚</p><p><strong>æ‰¾åˆ°å…¬å…±æ ¸ä¹‹åï¼Œè¿›è¡Œå‡¸åŒ…å½¢æˆ</strong>ï¼šâ€”-ç”¨äºŒè·¯å½’å¹¶</p><p>ç›¸å¯¹äºå…¬å…±æ ¸ï¼Œä¸¤ä¸ªå­å‡¸åŒ…çš„å„è‡ªæœ‰åºæ’åˆ—ï¼Œç›¸äº’äº¤é”™ã€‚è¦åšçš„å°±æ˜¯å°†äºŒè€…ç‚¹åºåˆ—åˆå¹¶ï¼Œæ–¹æ³•æ­£æ˜¯ç»å…¸çš„<strong>äºŒè·¯å½’å¹¶</strong>ï¼Œçº¿æ€§æ—¶é—´å¯ä»¥å®Œæˆã€‚æœ€åè¿›è¡ŒGraham Scanå³å¯å¾—åˆ°å¤§å‡¸åŒ…ã€‚</p><h3 id="ä¸€ä¸ªå­å‡¸åŒ…çš„æ ¸è½åœ¨å¦ä¸€ä¸ªå­å‡¸åŒ…å¤–éƒ¨ï¼š"><a href="#ä¸€ä¸ªå­å‡¸åŒ…çš„æ ¸è½åœ¨å¦ä¸€ä¸ªå­å‡¸åŒ…å¤–éƒ¨ï¼š" class="headerlink" title="ä¸€ä¸ªå­å‡¸åŒ…çš„æ ¸è½åœ¨å¦ä¸€ä¸ªå­å‡¸åŒ…å¤–éƒ¨ï¼š"></a>ä¸€ä¸ªå­å‡¸åŒ…çš„æ ¸è½åœ¨å¦ä¸€ä¸ªå­å‡¸åŒ…å¤–éƒ¨ï¼š</h3><p>å­˜åœ¨å…¬å…±æ ¸çš„æƒ…å†µå¤„ç†æ˜¯å¾ˆç®€å•çš„ï¼Œå†çœ‹ç¬¬ä¸€ä¸ªå­å‡¸åŒ…çš„æ ¸è½åœ¨ç¬¬äºŒä¸ªå­å‡¸åŒ…å¤–éƒ¨çš„æƒ…å†µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315164325225.png" alt="image-20200315164325225"></p><p>è¿™ä¸­æƒ…å†µä¸<strong>å¢é‡æ„é€ æ³•</strong>çš„æƒ…å†µå¾ˆç›¸ä¼¼ï¼ŒP1çš„æ ¸xç›¸å¯¹äºP2å°±æ˜¯ä¸€ä¸ªæ–°åŠ å…¥çš„ç‚¹ã€‚åšå‡ºä¸¤æ¡support lineï¼šxâ†’tå’Œxâ†’sï¼Œèˆå¼ƒP2ä¸Štâ†’sè·¯å¾„çš„ç‚¹å³å¯ã€‚è¿™æ ·P2ä¸­å‰©ä½™ç‚¹ä¸xæ„æˆäº†ä¸€ä¸ªæ˜Ÿå½¢å¤šè¾¹å½¢ï¼Œxä¹Ÿæˆä¸ºäº†P2çš„æ ¸ã€‚<strong>è¿™å°±è½¬åŒ–æˆäº†ç¬¬ä¸€ç§æœ‰å…¬å…±æ ¸çš„æƒ…å†µã€‚</strong></p><h1 id="Divide-And-Conquerï¼ˆ2ï¼‰"><a href="#Divide-And-Conquerï¼ˆ2ï¼‰" class="headerlink" title="Divide And Conquerï¼ˆ2ï¼‰"></a>Divide And Conquerï¼ˆ2ï¼‰</h1><p>ä¸Šè¿°åˆ†æ²»ç­–ç•¥çš„ç®—æ³•è¿‡äºå¤æ‚ï¼Œæ‰€ä»¥å¼•å…¥ä¸€ç§æ›´åŠ ç®€æ˜çš„åˆ†æ²»ç­–ç•¥ã€‚è¿™ç§åˆ†æ²»ç­–ç•¥ä¹Ÿä¼šä¸ºä¸‰è§’å‰–åˆ†ç­‰é—®é¢˜æä¾›æ€è·¯ã€‚</p><p>é¦–å…ˆè§„å®šä¸€ç§ç‚¹é›†åˆ’åˆ†çš„ç­–ç•¥ã€‚å‡è®¾å¾…åˆå¹¶çš„ä¸¤ä¸ªå­å‡¸åŒ…æ˜¯æ²¿ç€æŸæ–¹å‘æ˜¯åˆ†ç¦»çš„ï¼Œ<strong>äºŒè€…ä¸ç›¸äº¤</strong>ï¼ˆDivide And Conquerï¼ˆ1ï¼‰ä¸­æ˜¯æœ‰ç›¸äº¤çš„ï¼‰ã€‚ä¾‹å¦‚ä¸‹å›¾å‡¸åŒ…P1å’ŒP2å°±æ˜¯ç›¸äº’åˆ†ç¦»çš„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315164957102.png" alt="image-20200315164957102"></p><p><strong>è¿™æ ·åˆ’åˆ†ä¼šä½¿å¾—åˆå¹¶æ›´åŠ ç®€æ˜ï¼Œä¸å¿…åŒºåˆ†å¤šç§å¤æ‚æƒ…å†µ</strong>ã€‚</p><h2 id="é¢„å¤„ç†"><a href="#é¢„å¤„ç†" class="headerlink" title="é¢„å¤„ç†"></a>é¢„å¤„ç†</h2><p>ä¸ºäº†æ»¡è¶³è¿™ç§åˆ’åˆ†ç­–ç•¥ï¼Œ<strong>éœ€è¦å¼•å…¥ä¸€ç§é¢„å¤„ç†</strong>ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªxæ–¹å‘çš„æ’åºè¿‡ç¨‹ï¼ˆX-sortingï¼‰ã€‚æ’åºåå°±å¯å–ç‚¹xåæ ‡çš„ä¸­å€¼ï¼Œå°†ç‚¹é›†åˆ’åˆ†ä¸ºè§„æ¨¡ç›¸å½“çš„å·¦å³ä¸¤ä¸ªå­é›†ã€‚æ¯ä¸ªå‡¸åŒ…éƒ½æœ‰å…¶<strong>æœ€å·¦ç‚¹l</strong>å’Œ<strong>æœ€å³ç‚¹r</strong>ï¼Œå¦‚ä¸Šå›¾ã€‚</p><h2 id="mergeæ“ä½œ"><a href="#mergeæ“ä½œ" class="headerlink" title="mergeæ“ä½œ"></a>mergeæ“ä½œ</h2><p>ç°åœ¨<strong>mergeæ“ä½œ</strong>å°±æ˜¯å°†ä¸¤ä¸ªå·¦å³ç›¸ç¦»çš„ä¸¤ä¸ªå­å‡¸åŒ…åˆå¹¶ä¸ºä¸€ä¸ªå¤§å‡¸åŒ…çš„è¿‡ç¨‹äº†ã€‚è¿ç®—çš„å…³æ³¨çš„æ­£æ˜¯ä¸¤å¯¹lå’Œrç‚¹ã€‚</p><p>å…ˆç›´è§‚æ„Ÿå—ä¸€ä¸‹mergeæ“ä½œè¦æ·»åŠ çš„æ–°æè¾¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315165142262.png" alt="image-20200315165142262"></p><p>ä¸Šä¸‹ä¸¤æ¡ç´«è‰²è¾¹æ­£æ˜¯è¦æ±‚çš„æ–°è¾¹ï¼Œåˆç§°æ”¯æ’‘è¾¹ï¼ˆ<strong>support line</strong>ï¼‰ï¼Œ<u>å¹¶ä¸”æ¯æ¬¡merge<strong>åªä¼š</strong>å¢åŠ <strong>ä¸¤æ¡</strong>æ–°è¾¹</u>ã€‚ä¸¤æ¡è¾¹ç±»ä¼¼ä¸¤ä¸ªåœ†çš„<strong>å…¬åˆ‡çº¿ï¼ˆcommon tangentï¼‰</strong>ï¼Œå°†äºŒè€…è¿æ¥èµ·æ¥ã€‚</p><blockquote><p>æ³¨æ„ï¼Œæ³¨æ„ï¼Œæ³¨æ„ï¼š<strong>çœ¼ç›å¯èƒ½ä¼šæ¬ºéª—ä½ </strong></p><p>ç›´è§‚ä¸Šæ„Ÿè§‰ï¼Œä¸¤æ¡support lineæ­£æ˜¯ä¸¤ä¸ªå­å‡¸åŒ…çš„æœ€é«˜ç‚¹tå’Œæœ€ä½ç‚¹bç›¸äº’è¿æ¥å¾—åˆ°çš„ï¼Œè¿™äº›ç‚¹åªéœ€çº¿æ€§æ—¶é—´å°±èƒ½æ‰¾åˆ°ã€‚<u>å½“çœŸå¦‚æ­¤çš„è¯å‡¸åŒ…æ„é€ çš„ä¸‹ç•Œå°±æˆäº†O(n)ï¼Œæ˜¾ç„¶ç›´è§‰æ˜¯é”™è¯¯çš„ã€‚</u>ä¾‹å¦‚ä¸‹é¢çš„ä¸¤ç§æƒ…å†µï¼Œsupport lineå°±å’Œbã€tä¸¤ç‚¹æ²¡æœ‰ç›´æ¥å…³ç³»äº†ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315165430771.png" alt="image-20200315165430771">)<img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315165443290.png" alt="image-20200315165443290"></p><p>æ„é€ support lineçš„è¿‡ç¨‹éœ€è¦ç¼œå¯†çš„åˆ†æï¼Œå¹¶éå‡­ç›´è§‰èƒ½å¾—åˆ°çš„ã€‚</p></blockquote><h3 id="ç¼åˆï¼ˆstitchï¼‰â€”æ„é€ support-line"><a href="#ç¼åˆï¼ˆstitchï¼‰â€”æ„é€ support-line" class="headerlink" title="ç¼åˆï¼ˆstitchï¼‰â€”æ„é€ support line"></a>ç¼åˆï¼ˆstitchï¼‰â€”æ„é€ support line</h3><p>å°†ä¸¤ä¸ªå­å‡¸åŒ…è¿æ¥çš„è¿‡ç¨‹æ›´åƒå¤ä»£å¦‡å¥³ç”¨é’ˆå°†ä¸¤å—å¸ƒç¼åˆåœ¨ä¸€èµ·ï¼ˆä½†æ˜¯è¿™é‡Œçš„ä¸¤ä¸ªå‡¸åŒ…çš„é—´è·æ˜¯ä¸èƒ½å˜çš„ï¼Œä»…ä»…æ˜¯ç”¨çº¿å°†å…¶è¿æ¥åœ¨ä¸€èµ·ã€‚è€Œä¸”è¿™é‡Œè¿æ¥åªéœ€è¦æœ€åæ‰¾å‡ºæ¥çš„é‚£ä¸¤æ¡çº¿ï¼Œå…¶ä½™å‰©ä¸‹çš„ä¸­é—´â€œå·¥å…·çº¿â€éƒ½è¦èˆå»ï¼‰ã€‚</p><p>æ„é€ è¿‡ç¨‹é¦–å…ˆä»<strong>å·¦å‡¸åŒ…çš„rç‚¹</strong>å’Œ<strong>å³å‡¸åŒ…çš„lç‚¹</strong>è¿çº¿å¼€å§‹ï¼Œä»¥è¿™æ¡çº¿ä¸ºåŸºç¡€é€æ­¥å¾—åˆ°support lineã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315165636768.png" alt="image-20200315165636768"></p><blockquote><p>æ³¨æ„ä¸€ä¸ªç»†èŠ‚é—®é¢˜ï¼š</p><p>å¦‚ä½•å¾—åˆ°å„å­å‡¸åŒ…çš„lç‚¹å’Œrç‚¹ã€‚æ¯æ¬¡åˆå¹¶éƒ½ä¼šäº§ç”Ÿæ–°çš„å‡¸åŒ…ï¼Œæ‰€ä»¥å‡¸åŒ…æ˜¯ä¸€ä¸ªåŠ¨æ€çš„ç»“æ„ã€‚å½“ç„¶å¯ä»¥æ¯æ¬¡è®¡ç®—å‡ºæœ€å·¦ç‚¹å’Œæœ€å³ç‚¹ï¼Œåªéœ€è¦çº¿æ€§æ—¶é—´ã€‚ä½†æ˜¯è¿™å¹¶ä¸æ˜¯æœ€ä¼˜çš„æ–¹å¼ã€‚è€ƒè™‘åˆ†æ²»çš„æ€æƒ³ï¼Œå°±æ•´ä¸ªmergeæµç¨‹æ¥è®²ï¼Œæ˜¯è‡ªåº•å‘ä¸Šå°†å­å‡¸åŒ…ä¸¤ä¸¤åˆå¹¶çš„è¿‡ç¨‹ã€‚å› æ­¤åªè¦åœ¨æœ€åº•å±‚ä¸Šæœ€å°çš„å­å‡¸åŒ…ä¸­è®°å½•æœ€å·¦ç‚¹å’Œæœ€å³ç‚¹ï¼Œæ¯æ¬¡mergeæ›´æ–°ä¸€ä¸‹è¿™ä¸¤ä¸ªå˜é‡å³å¯ï¼Œåªéœ€è¦O(1)çš„å¸¸æ•°æ—¶é—´ï¼è¿™ç§ä¼˜åŒ–å¯¹æ•´ä½“çš„å¤æ‚åº¦ä¸Šçº¿nlognè™½ç„¶æ²¡æœ‰å½±å“ï¼Œä¹Ÿèƒ½ä¸ºç¨‹åºèŠ‚çœä¸€éƒ¨åˆ†çš„å¼€é”€ã€‚</p></blockquote><h4 id="ç¼åˆä¸ŠåŠéƒ¨åˆ†"><a href="#ç¼åˆä¸ŠåŠéƒ¨åˆ†" class="headerlink" title="ç¼åˆä¸ŠåŠéƒ¨åˆ†"></a>ç¼åˆä¸ŠåŠéƒ¨åˆ†</h4><blockquote><p>å†çœ‹å¦‚ä½•å°†æœ€åˆçš„r-lçº¿å˜æˆsupport lineï¼Œåœ¨æ­¤ä»¥<strong>å¯»æ‰¾upper support lineä¸ºä¾‹</strong>ï¼ˆä¸Šåˆ‡çº¿ï¼Œç›¸åº”çš„è¿˜éœ€è¦è®¡ç®—ä¸‹åˆ‡çº¿ï¼‰ã€‚<strong><u>ç®—æ³•çš„æ ¸å¿ƒä¾ç„¶æ˜¯to left test</u></strong>ã€‚</p></blockquote><ul><li><strong>é¦–å…ˆçœ‹<code>l</code>ç‚¹</strong>ï¼Œä»r-lçº¿å‡ºå‘ï¼Œå¯ä»¥å‘ç°ç›¸å¯¹äºå¯¹äºrâ†’læ—¶ï¼Œlçš„å‰é©±ã€åç»§æ˜¯LRå‹çš„ã€‚è€Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯RRå‹çš„ã€‚æ‰€ä»¥å¿…é¡»è¦æ‰¾lçš„å‰é©±ã€‚ç›´åˆ°åœ¨æŸä¸€ä¸ªæ—¶åˆ»ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†lçš„ä¸€ä¸ªå‰é©±ç‚¹æ»¡è¶³RRå‹ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315171448455.png" alt="æ‰¾åˆ°lç‚¹çš„å‰é©±æ»¡è¶³å½“å‰å½¢åŠ¿çš„RR"></p><ul><li><p><strong>å†çœ‹<code>r</code>ç‚¹</strong>ï¼ŒåŒæ ·çš„ï¼Œä»æ­¤æ—¶çš„çŠ¶æ€ï¼Œæ¥è§‚å¯Ÿrçš„ç±»å‹ï¼šæ˜¯RLå‹çš„ã€‚è¦æƒ³æˆä¸ºLLå‹ï¼Œrå¿…é¡»è¦æ‰¾å®ƒçš„åé©±ã€‚</p><p>åœ¨æŸä¸€æ—¶åˆ»ï¼Œræ‰¾åˆ°rçš„åç»§ï¼ˆå°±æ˜¯è¯¥å‡¸åŒ…ç‚¹tï¼‰ä½¿å…¶æ»¡è¶³LLå‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315171826930.png" alt="æ‰¾åˆ°rçš„åé©±æ»¡è¶³å½“å‰å½¢åŠ¿çš„LL"></p></li><li><p><strong>åè¿‡æ¥ç»§ç»­çœ‹<code>l</code></strong>ï¼Œæ­¤æ—¶ï¼Œ<strong>å…·ä½“çš„è¯´åº”è¯¥æ˜¯æ£€æµ‹lçš„å‰é©±ç‚¹<code>l&#39;</code></strong>ï¼Œç»æ£€æµ‹ï¼Œ<code>l&#39;</code>å·²ç»ä¸å†æ»¡è¶³RRå‹äº†ï¼Œç¼–ç¨‹äº†LRå‹ï¼Œæ‰€ä»¥è¿˜è¦ç»§ç»­å¯»æ‰¾å®ƒçš„å‰é©±ç‚¹ï¼Œä½¿å…¶å†æ¬¡æ»¡è¶³RRå‹ã€‚</p><p>æŸä¸€æ—¶åˆ»ï¼Œæ‰¾åˆ°å®ƒçš„å‰é©±ï¼ˆå°±æ˜¯è¯¥å‡¸åŒ…çš„ç‚¹tï¼‰ï¼Œä½¿å…¶æˆä¸ºRRå‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315171826931.png" alt="image-20200315171826931"></p><ul><li><strong>åè¿‡æ¥ç»§ç»­çœ‹<code>r</code></strong>ï¼Œæ­¤æ—¶ï¼Œæ›´å‡†ç¡®çš„åº”è¯¥è¯´æ˜¯åœ¨çœ‹<code>r&#39;</code>ï¼Œç»æ£€æµ‹ï¼Œè¯¥åº—ç¬¦åˆLLå‹ã€‚è‡³æ­¤ï¼Œæ‰€è°“çš„<code>r</code>å’Œ<code>l</code>éƒ½å·²ç»ç¬¦åˆRRæˆ–LLå‹äº†ã€‚ä»è€Œå·²ç»æ‰¾åˆ°<strong>upper support line</strong>äº†ã€‚ç»“æŸä¸ŠåŠéƒ¨åˆ†ã€‚</li></ul></li></ul><blockquote><p>å›é¡¾ç”±r-lçº¿é€æ­¥æ¨è¿›å¾—åˆ°support lineçš„è¿‡ç¨‹ï¼Œæ¯æ¬¡æ“ä½œä¸€ä¸ªç«¯ç‚¹ï¼Œå¾—åˆ°æ˜¯ä¸€ç§â€œZâ€å­—å½¢ï¼ˆzig-zagï¼‰çš„æ¨è¿›è½¨è¿¹ã€‚æ“ä½œç‚¹çš„åˆ‡æ¢ç”±å¦ä¸€ç‚¹æ»¡è¶³è¦æ±‚å†³å®šï¼Œè€Œç®—æ³•åœæ­¢çš„ä¾æ®æ˜¯ä¸¤ä¸ªç«¯ç‚¹åŒæ—¶æ»¡è¶³äº†è¦æ±‚ã€‚è¿™ç§æ–¹å¼ç±»ä¼¼å¿«é€Ÿæ’åºæ„é€ è½´ç‚¹çš„è¿‡ç¨‹ï¼Œå·¦å³ä¸¤è½´ç‚¹äº¤æ›¿æ“ä½œï¼Œç›´åˆ°äºŒè€…éƒ½æ»¡è¶³è¦æ±‚æ—¶ç®—æ³•åœæ­¢ã€‚</p></blockquote><h4 id="ç¼åˆä¸‹åŠéƒ¨åˆ†"><a href="#ç¼åˆä¸‹åŠéƒ¨åˆ†" class="headerlink" title="ç¼åˆä¸‹åŠéƒ¨åˆ†"></a>ç¼åˆä¸‹åŠéƒ¨åˆ†</h4><p>ç¼åˆä¸‹åŠéƒ¨åˆ†çš„æµç¨‹ä¸ï¼Œä¸ŠåŠéƒ¨åˆ†æµç¨‹ä¸€æ ·ã€‚</p><h2 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h2><p>åˆ†æä¸€ä¸‹ç®—æ³•æ—¶é—´å¤æ‚åº¦ã€‚<strong>ç®—æ³•é¦–å…ˆè¦æŒ‰ç…§xåæ ‡æ’åºï¼Œæ’åºå¤æ‚åº¦ä¸ºO(nlogn)ã€‚</strong>å†çœ‹mergeè¿‡ç¨‹ï¼Œæ— è®ºæ˜¯å·¦ä¾§å­å‡¸åŒ…è¿˜æ˜¯å³ä¾§å­å‡¸åŒ…ï¼Œå¯¹äºå…¶æ¯ä¸ªç‚¹çš„æ“ä½œè‡³å¤šåªæœ‰ä»¥æ­¤ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡å½’å¹¶æ˜¯çº¿æ€§æ—¶é—´ã€‚å½’å¹¶å…±lognæ¬¡ï¼Œç®—æ³•çš„<strong>æ€»ä½“å¤æ‚åº¦å°±æ˜¯O(nlogn)</strong>äº†ã€‚</p><h1 id="æ›´å¤šçš„è€ƒè™‘"><a href="#æ›´å¤šçš„è€ƒè™‘" class="headerlink" title="æ›´å¤šçš„è€ƒè™‘"></a>æ›´å¤šçš„è€ƒè™‘</h1><p>åœ¨è¿™äº›ç®—æ³•è®²è§£ä¸­ï¼Œ<strong>é€šå¸¸éƒ½æ˜¯ä¸è€ƒè™‘é€€åŒ–çš„æƒ…å†µ</strong>ï¼Œå¦‚ï¼Œä¸‰ç‚¹å…±çº¿â€¦â€¦</p><p>æœ€åæ€»ç»“ä¸€ä¸‹ç¬¬äºŒç§åˆ†æ²»æ³•çš„ç‰¹ç‚¹ã€‚æ­¤å‰<a href="http://blog.csdn.net/houszchina/article/details/79261505" target="_blank" rel="noopener">Jarvis Marchç®—æ³•</a>è™½ç„¶ä»¥å¹³æ–¹å¤æ‚åº¦ä¸ºä¸Šç•Œï¼Œä½†å…¶â€è¾“å‡ºæ•æ„Ÿæ€§â€œä½¿å¾—å®é™…å¤æ‚åº¦ä¸ºO(hn)ï¼Œæœ€å¥½æƒ…å†µä¸‹ä»…ç”šè‡³ä¸ºçº¿æ€§ã€‚ä¾‹å¦‚å¦‚ä¸‹æƒ…å†µï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Divide-And-Conquererer/image-20200315174908920.png" alt="image-20200315174908920"></p><p>Jarvis Marchç®—æ³•çš„å¤æ‚åº¦å˜ä¸ºäº†O(4n)ï¼Œè€Œæ­¤æ—¶åˆ†æ²»æ³•ä¾æ—§ä¼šç»å†æŒ‰éƒ¨å°±ç­çš„X-sortingï¼Œä¸€ä¸Šæ¥å°±æ³¨å®šäº†O(nlogn)çš„å¤æ‚åº¦ï¼Œç„¶åç»å†åŒæ ·O(nlogn)çš„mergeè¿‡ç¨‹ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ç§åˆ†æ²»æ³•åœ¨å„ç§æƒ…å†µä¸‹çš„è¡¨ç°éƒ½æ˜¯å¾ˆå‡åŒ€çš„ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Graham Scanç®—æ³•è¯´æ˜äº†å‡¸åŒ…æ„é€ é—®é¢˜çš„ä¸‹ç•ŒO(nlogn)æ˜¯å¯ä»¥è¾¾åˆ°çš„ã€‚å…¶å®O(nlogn)çš„ç®—æ³•è¿œä¸æ­¢è¿™ä¸€ç§ï¼Œåˆ†æ²»æ³•å°±æ˜¯ä¸€ç§èƒ½è¾¾åˆ°O(nlogn)å¤æ‚åº¦çš„æ€æƒ³ã€‚åœ¨æ­¤å¼•å…¥è¿ç”¨åˆ†æ²»æ€æƒ³çš„ä¸¤ç§ç®—æ³•æ¥æ„é€ å‡¸åŒ…ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="è®¡ç®—å‡ ä½•" scheme="https://www.longlongqin.top/tags/%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>æ„é€ å‡¸åŒ…-Graham Scanæ³•</title>
    <link href="https://www.longlongqin.top/archives/3478.html"/>
    <id>https://www.longlongqin.top/archives/3478.html</id>
    <published>2020-03-14T09:40:32.000Z</published>
    <updated>2020-03-17T08:30:42.401Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šæ–‡ç®€è¦åˆ†æå‡ºäº†å‡¸åŒ…æ„é€ é—®é¢˜ç®—æ³•çš„ä¸‹å±Šï¼šO(nlog n)ï¼Œåœ¨æ­¤å°±å¼•å…¥ä¸€ç§ä¸‹ç•Œæ„ä¹‰ä¸Šæœ€ä¼˜çš„ç®—æ³•ï¼š<strong>Graham Scanç®—æ³•</strong>ã€‚è¿™ç§ç®—æ³•å¯ä»¥ä¿è¯åœ¨æœ€åçš„æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦ä¹Ÿä¸è¶…è¿‡ nlognã€‚</p><a id="more"></a><h1 id="Graham-Scanç®—æ³•çš„æµç¨‹"><a href="#Graham-Scanç®—æ³•çš„æµç¨‹" class="headerlink" title="Graham Scanç®—æ³•çš„æµç¨‹"></a>Graham Scanç®—æ³•çš„æµç¨‹</h1><p>å‡è®¾å¾…å¤„ç†ç‚¹é›†Så…±æœ‰nä¸ªç‚¹ã€‚</p><h2 id="1ã€é¢„å¤„ç†"><a href="#1ã€é¢„å¤„ç†" class="headerlink" title="1ã€é¢„å¤„ç†"></a>1ã€é¢„å¤„ç†</h2><ol><li><p><strong>é¢„æ’åº(presorting</strong>ï¼‰</p><p>Graham Scané¦–å…ˆè¦åšçš„æ˜¯ä¸€ä¸ªé¢„å¤„ç†æ’åºæ“ä½œï¼ˆ<strong>presorting</strong>ï¼‰ã€‚å³æ‰¾åˆ°æŸä¸ªåŸºå‡†ç‚¹ï¼Œç„¶åå°†å…¶ä½™æ‰€æœ‰çš„ç‚¹æŒ‰ç…§ç›¸å¯¹äºåŸºå‡†ç‚¹çš„<strong>æåæ ‡</strong>æ’åºã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/20180207204917568.jpg" alt="img"></p><blockquote><p>ç‚¹çš„æ’åºå¯ä»¥å¥—ç”¨ä»»æ„æ’åºç®—æ³•çš„æ¡†æ¶ï¼Œåªæ˜¯å°†æ’åºå¯¹è±¡ç”±æ•°å€¼å˜ä¸ºäº†å¹³é¢ä¸Šçš„ç‚¹ï¼Œè€Œæ¯”è¾ƒå™¨æ”¹ä¸º<strong>to left test</strong>å®ç°ã€‚</p></blockquote><p><strong>å¦‚ä½•æ‰¾å‡ºç¬¬ä¸€ä¸ªç‚¹ï¼šç‚¹1ï¼Ÿ</strong></p><blockquote><p>ä»¥ç‚¹1ä¸ºåŸºå‡†ç‚¹ï¼Œå…¶ä½™ç‚¹æŒ‰ç…§ç›¸å½“äºç‚¹1çš„æè§’ä¾æ¬¡æ’åºä¸º2ã€3ã€4â€¦â€¦ç†è®ºä¸Šè®²ä»»ä½•ä¸€ä¸ªç‚¹éƒ½èƒ½å½“ç¬¬ä¸€ä¸ªåŸºå‡†ç‚¹ï¼Œä¸ºäº†ç®€åŒ–ç®—æ³•é€šå¸¸é€‰æ‹©<strong>lowest-then-leftmost pointï¼ˆLTLï¼‰</strong>ä½œä¸ºåŸºå‡†ç‚¹ã€‚</p></blockquote></li><li><p><strong>æ‰¾å‡ºèµ·å§‹è¾¹</strong></p><p>å¯¹äºä¸åŸºå‡†ç‚¹1æè§’æœ€å°çš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­ç‚¹2ï¼ˆå‡è®¾æ²¡æœ‰ä¸‰ç‚¹å…±çº¿çš„æƒ…å†µï¼‰ã€‚å°†ç‚¹1å’Œç‚¹2ä½œä¸ºç®—æ³•çš„èµ·å§‹ç‚¹ã€‚</p></li><li><p><strong>å°†èµ·å§‹è¾¹ ä¸ å‰©ä¸‹çš„n-2æ¡è¾¹åˆ†åˆ«å­˜å‚¨åœ¨ä¸åŒçš„æ ˆ(stack)ä¸­ï¼š</strong></p><p>ç®—æ³•å¼€å§‹å‰å…ˆå°†èµ·å§‹ç‚¹1å’Œ2å…¥æ ˆSï¼Œå…¶ä»–çš„n-2ä¸ªç‚¹å…¥æ ˆTï¼Œå¦‚ä¸Šå›¾ã€‚æ³¨æ„Så’ŒTä¸­å…ƒç´ çš„å…¥æ ˆé¡ºåºã€‚è‡³æ­¤é¢„å¤„ç†å·²ç»å®Œæˆã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/image-20200314181609764.png" alt="æ ˆï¼šTå’ŒS"></p><blockquote><p>Graham Scanç”¨åˆ°çš„æ•°æ®ç»“æ„ã€‚æ•´ä¸ªç®—æ³•éå¸¸ç®€æ˜ï¼Œæ ¸å¿ƒæ•°æ®ç»“æ„åªæœ‰ä¸¤ä¸ª<strong>æ ˆ</strong>ï¼Œåˆ†åˆ«è®°ä½œæ ˆ<strong>S</strong>å’Œæ ˆ<strong>T</strong>ã€‚ä¾¿äºç†è§£æˆ‘ä»¬å°†Så’ŒTç”»æˆå¼€å£ç›¸å¯¹çš„å½¢å¼ï¼Œå¦‚ä¸Šå›¾ã€‚</p></blockquote></li></ol><h2 id="2ã€scanæ“ä½œ-æ­¤å¤„ä¸ºé€†æ—¶é’ˆæ‰«æ"><a href="#2ã€scanæ“ä½œ-æ­¤å¤„ä¸ºé€†æ—¶é’ˆæ‰«æ" class="headerlink" title="2ã€scanæ“ä½œ(æ­¤å¤„ä¸ºé€†æ—¶é’ˆæ‰«æ)"></a>2ã€scanæ“ä½œ(æ­¤å¤„ä¸ºé€†æ—¶é’ˆæ‰«æ)</h2><p>å®Œæˆé¢„å¤„ç†ä¹‹åï¼Œå°±èƒ½å¼€å§‹ç®—æ³•çš„æ ¸å¿ƒï¼šscanæ“ä½œã€‚scançš„è¿‡ç¨‹ä¸­è¦æ—¶åˆ»å…³æ³¨ä¸‰ä¸ªç‚¹ï¼š<strong>æ ˆSçš„æ ˆé¡¶ï¼ˆS[0]ï¼‰ã€æ¬¡æ ˆé¡¶ï¼ˆS[1]ï¼‰å’Œæ ˆTçš„æ ˆé¡¶ï¼ˆT[0]ï¼‰</strong>ã€‚ä¹Ÿå°±ä¸‹å›¾çº¢è‰²æ ‡æ³¨çš„ä¸‰ä¸ªç‚¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/20180207210925858.jpg" alt="img"></p><p>å¯¹è¿™ä¸‰ä¸ªå…³æ³¨çš„ç‚¹ï¼Œè¿›è¡Œæ£€æµ‹ï¼Œæ£€æµ‹çš„æ¡†æ¶ä¸ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/image-20200314182719216.png" alt="image-20200314182719216"></p><ul><li>å¯ä»¥è§‚å¯Ÿåˆ°ï¼Œ<u>æ¯æ¬¡å¾…å¤„ç†çš„S[0]å’ŒS[1]æ„æˆçš„è¾¹ä¸€å®šæ˜¯ä¸€æ¡æè¾¹ï¼ˆå¦‚ä¸Šå›¾ç‚¹1å’Œç‚¹2ï¼‰</u>ï¼Œç®—æ³•<strong>å…³é”®æ­¥éª¤</strong><u>å°±æ˜¯å¯¹è¾¹è¿™æ¡æè¾¹å’ŒT[0]åšto left testï¼Œåˆ¤æ–­T[0]ä½äºè¾¹S[0]S[1]çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ã€‚è‹¥åœ¨å·¦è¾¹åˆ™ç»§ç»­æ‹“å±•ï¼Œè‹¥åœ¨å³è¾¹åˆ™å¦å®šæ‰æ­¤å‰è®¤å®šçš„æè¾¹ã€‚</u>æ— è®ºç»“æœå¦‚ä½•ï¼Œæ¯æ¬¡åˆ¤å®šéƒ½ä¼šå°†é—®é¢˜è§„æ¨¡ç¼©å°ä¸€ä¸ªå•å…ƒï¼Œç®—æ³•ç»“æŸæ—¶Tæœ€ç»ˆè‚¯å®šä¸ºç©ºã€‚Tç©ºåï¼ŒSä¸­å­˜ç•™ä¸‹çš„ç‚¹æ­£æ˜¯å‡¸åŒ…çš„æç‚¹ï¼Œè¿™äº›ç‚¹è‡ªåº•è€Œä¸Šæ­£æ˜¯å‡¸åŒ…è¾¹ç•Œç‚¹çš„é€†æ—¶é’ˆéå†ï¼Œä¹Ÿå¾—åˆ°äº†æ•´ä¸ªå‡¸åŒ…æ„é€ é—®é¢˜çš„è§£ã€‚</li></ul><h2 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h2><p><strong>1ã€</strong>å…ˆæ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œå³ç‚¹é›†Sä¸­æ‰€æœ‰çš„ç‚¹éƒ½åœ¨å‡¸åŒ…è¾¹ç•Œä¸Šã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/image-20200314183056395.png" alt="image-20200314183056395"></p><ul><li><p>å…ˆæ‰¾åˆ°LTLï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­ç‚¹1ã€‚ç„¶ååŸºäºç‚¹1å¯¹å…¶ä½™ç‚¹æŒ‰æè§’æ’åºä¸ºç‚¹2ã€3ã€4â€¦â€¦<em>ï¼ˆå®é™…ä¸Šä»¥ä¸€ä¸ªç‚¹ä¸ºä¸­å¿ƒçš„æœ‰åºçš„ç‚¹é›†ï¼Œæ„æˆäº†æ‰€è°“çš„æ˜Ÿå½¢å¤šè¾¹å½¢ï¼ˆstar-shaped polygonï¼‰ï¼Œä¸­å¿ƒç‚¹æ­£æ˜¯æ˜Ÿå½¢å¤šè¾¹å½¢æ ¸ï¼ˆkernelï¼‰çš„ä¸€éƒ¨åˆ†ã€‚å‡¸å¤šè¾¹å½¢å¿…ç„¶æ˜¯æ˜Ÿå½¢å¤šè¾¹å½¢ï¼Œåä¹‹åˆ™ä¸ç„¶ã€‚ï¼‰</em>ç„¶åæ‰¾åˆ°ç‚¹1çš„åç»§2ï¼Œç‚¹1å’Œç‚¹2æ„æˆç¬¬ä¸€æ¡æè¾¹ã€‚åˆå§‹åŒ–æ ˆSå’Œæ ˆTã€‚</p></li><li><p>ç°åœ¨è¦å…³å¿ƒS[1], S[0]å’ŒT[0]ï¼Œå°±æ˜¯ç‚¹1ï¼Œ2å’Œ3ã€‚ç‚¹3ä½äºè¾¹12å·¦ä¾§ï¼Œto leftå…³ç³»ä¸ºtrueï¼ŒS.push ( T.pop() )ï¼Œå‘å‰æ‹“å±•äº†ä¸€æ¡æš‚å®šæè¾¹ã€‚</p></li><li><p>æ¥ä¸‹æ¥é‡å¤ä¸Šè¿°è¿‡ç¨‹ã€‚è€ƒè™‘ç‚¹2ï¼Œ3å’Œ4ã€‚to leftå…³ç³»ä¸ºtrueï¼ŒS.push( T.pop() )â€¦â€¦æœ€ç»ˆæ ˆTç©ºï¼Œç®—æ³•ç»“æŸï¼Œå‡¸åŒ…ç”±æ ˆSè‡ªåº•å‘ä¸Šå¾—åˆ°ã€‚Så’ŒTçš„å˜åŒ–è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/image-20200314211052355.png" alt="image-20200314211052355"></p><hr><p><strong>2ã€</strong>ä¸Šé¢åˆ—ä¸¾äº†æœ€ç®€å•çš„æƒ…å†µä¸‹Graham Scançš„è¿‡ç¨‹ï¼Œæ¥ä¸‹æ¥åˆ—ä¸¾ä¸€ä¸ªæ›´æœ‰ä»£è¡¨æ€§çš„å®ä¾‹æ·±å…¥ç®—æ³•çš„ç»†èŠ‚ã€‚è¾“å…¥çš„ç‚¹é›†Sï¼Œå¹¶è¿›è¡Œé¢„å¤„ç†æ’åºï¼Œå¹¶åˆå§‹åŒ–æ ˆSã€Tï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/20180207215925185.jpg" alt="20180207215925185"></p><ul><li><p>æ¥ä¸‹æ¥å¯¹ç‚¹1ï¼Œ2å’Œ3è¿›è¡Œto leftæµ‹è¯•ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯åˆ¤æ–­è¾¹2â†’3ï¼ˆå›¾ä¸­é»„è‰²è¾¹ï¼‰èƒ½å¦è¢«æš‚æ—¶é‡‡çº³ã€‚æµ‹è¯•ç»“æœä¸ºtrueï¼Œæš‚æ—¶é‡‡çº³è¾¹2â†’3ï¼Œ<strong>S.push( T.pop() )</strong>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/image-20200314211330428.png" alt="image-20200314211330428"></p><blockquote><p>æ³¨æ„å›¾ä¸­è“è‰²è¾¹è¡¨ç¤ºå·²ç»è¢«æš‚æ—¶æ¥çº³çš„è¾¹ï¼Œä¹Ÿå°±æ˜¯ç®—æ³•æš‚æ—¶è®¤å®šçš„æè¾¹ã€‚ä¸Šä¸€æ¬¡æ“ä½œå°†è“è‰²è¾¹æ¨è¿›ä¸€ä¸ªå•å…ƒ</p></blockquote></li><li><p>æ¥ä¸‹æ¥å…³æ³¨ç‚¹2ï¼Œ3å’Œ4ï¼Œæ¥åˆ¤æ–­ä¸‹ä¸€æ¡é»„è‰²è¾¹3â†’4èƒ½å¦è¢«æ¥çº³ã€‚to leftæµ‹è¯•ä¸ºtrueï¼Œ<strong>S.push( T.pop() )</strong>ï¼Œæ¥çº³è¾¹3â†’4ã€‚å¦‚ä¸‹å›¾å³ä¾§æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/image-20200314211603647.png" alt="image-20200314211603647"></p></li><li><p>ç„¶ååˆ¤æ–­ç‚¹3ï¼Œ4å’Œ5ã€‚ç‚¹5åœ¨è¾¹3â†’4çš„å³ä¾§ï¼Œå³to leftæµ‹è¯•ä¸ºfalseã€‚<strong>S.pop()</strong>ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­å‡ºç‚¹4ä¸å¯èƒ½ä¸ºæç‚¹ï¼Œä¸¢å¼ƒ4ã€‚å› æ­¤ç®—æ³•å›æº¯åˆ°ç‚¹3ï¼Œåˆ¤æ–­ç‚¹2ï¼Œ3å’Œ5çš„å…³ç³»ã€‚5åœ¨2â†’3çš„å·¦ä¾§ï¼Œæš‚æ—¶æ¥çº³è¾¹3â†’5ï¼Œ<strong>S.push( T.pop() )ã€‚</strong>å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/image-20200314211705197.png" alt="image-20200314211705197"></p><blockquote><p>ç®—æ³•ç»å†äº†æ— æ•ˆæ“ä½œï¼Œè¿›è¡Œäº†å›æº¯ï¼Œå¾—åˆ°äº†ç›®å‰æ¥è¯´æœ€ä¼˜çš„â€œæè¾¹â€ã€‚è™½ç„¶è¿™äº›â€æè¾¹â€œä¸ä¸€å®šèƒ½æœ€ç»ˆä¿ç•™ï¼Œä½†é—®é¢˜çš„è§„æ¨¡å¾—åˆ°äº†å‰Šå‡ã€‚</p></blockquote></li><li><p>ä¸‹ä¸€æ¬¡scanè€ƒå¯Ÿçš„å°±æ˜¯3ï¼Œ5å’Œ6äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/image-20200314211916570.png" alt="image-20200314211916570"></p><blockquote><p>3ï¼Œ5å’Œ6çš„to leftæµ‹è¯•ä¸ºfalseï¼Œ<strong>S.pop()</strong>ï¼Œèˆå¼ƒç‚¹5ã€‚</p></blockquote></li><li><p>ç„¶åè€ƒå¯Ÿç‚¹2ï¼Œ3å’Œ6ï¼Œto leftæµ‹è¯•ä¸ºfalseï¼Œ<strong>S.pop()</strong>èˆå¼ƒç‚¹3ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/20180207223417072.jpg" alt="img"></p></li><li><p>â€¦â€¦..</p></li><li><p>â€¦â€¦â€¦</p></li><li><p>ç›´éå†å®Œå‰©ä¸‹å…¶ä»–ç‚¹ï¼Œå‡¸åŒ…å°±æ„é€ å®Œæˆã€‚</p></li></ul><h1 id="éªŒè¯ç®—æ³•çš„æ­£ç¡®æ€§"><a href="#éªŒè¯ç®—æ³•çš„æ­£ç¡®æ€§" class="headerlink" title="éªŒè¯ç®—æ³•çš„æ­£ç¡®æ€§"></a>éªŒè¯ç®—æ³•çš„æ­£ç¡®æ€§</h1><h2 id="æ€è·¯ä¸Šçš„æ­£ç¡®æ€§"><a href="#æ€è·¯ä¸Šçš„æ­£ç¡®æ€§" class="headerlink" title="æ€è·¯ä¸Šçš„æ­£ç¡®æ€§"></a>æ€è·¯ä¸Šçš„æ­£ç¡®æ€§</h2><p>äº†è§£äº†ç®—æ³•çš„æ•´ä½“æµç¨‹ä¹‹åï¼Œæˆ‘ä»¬å†æ¥è®ºè¯ä¸€ä¸‹ç®—æ³•çš„æ­£ç¡®æ€§ã€‚è¯æ˜ä¸€ä¸ªç®—æ³•æ­£ç¡®æ€§çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œåœ¨æ­¤é€‰ç”¨æ•°å­¦å½’çº³æ³•ã€‚æ•°å­¦å½’çº³æ³•çš„æ€æƒ³å¯ç”¨å¤šç±³è¯ºéª¨ç‰Œç±»æ¯”ï¼Œè¦åšçš„æ— éæ˜¯ä¸¤ä»¶äº‹ï¼šè¯æ˜ç¬¬1å¼ éª¨ç‰Œä¼šå€’ï¼›è¯æ˜å¦‚æœç¬¬nå¼ éª¨ç‰Œä¼šå€’åˆ™ç¬¬n+1å¼ éª¨ç‰Œä¹Ÿä¼šå€’ä¸‹ã€‚</p><p>Graham Scanè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªä¸ªå¼•å…¥ç‚¹çš„è¿‡ç¨‹ã€‚æ¯å½“æˆ‘ä»¬å¾—åˆ°ç¬¬kä¸ªç‚¹çš„æ—¶å€™ï¼Œç®—æ³•æ‰€å¾—åˆ°çš„å°±æ˜¯å‰kä¸ªç‚¹å¯¹åº”çš„â€œæœ€å¥½çš„å‡¸åŒ…â€ã€‚å› æ­¤å½“k = næ—¶å¾—åˆ°çš„æ˜¯æ•´ä½“çš„å‡¸åŒ…ã€‚</p><ol><li><p>å½’çº³çš„ç¬¬ä¸€æ­¥å°±æ˜¯è¯æ˜k = 3æ—¶å¾—åˆ°çš„æ˜¯å½“å‰ç‚¹é›†Sâ€˜ = {1ï¼Œ2ï¼Œ3}ä¸­çš„æè¾¹â€”â€”ä¹Ÿå°±æ˜¯è¯æ˜ç¬¬1å¼ éª¨ç‰Œä¼šå€’ã€‚</p><blockquote><p>æ˜¾ç„¶è¾¹1â†’2æ˜¯Sâ€™çš„ä¸€æ¡æè¾¹ã€‚è€Œæ ¹æ®é¢„å¤„ç†çš„æ–¹å¼ï¼Œ3ç›¸è¾ƒäº1çš„æè§’ä¸€å®šå¤§äº2ï¼Œå› æ­¤ç‚¹3ä¸€å®šåœ¨è¾¹1â†’2çš„å·¦ä¾§ï¼Œå› æ­¤è¾¹2â†’3ä¼šå¾—åˆ°ä¿ç•™ã€‚å¯¹äºè¿™ä¸‰ä¸ªç‚¹æ¥è¯´ï¼Œä»»æ„ä¸¤æ¡è¾¹ä¸€å®šéƒ½æ˜¯æè¾¹ï¼Œ2â†’3ä¹Ÿæ˜¯ä¸€æ¡æè¾¹ã€‚</p></blockquote></li><li><p>ç„¶åè¯æ˜ï¼šå‡è®¾å·²ç»å¤„ç†åˆ°ç¬¬kä¸ªç‚¹ï¼Œå¾—åˆ°çš„æ˜¯å‰ç‚¹é›†Sâ€™ = {1ï¼Œ2ï¼Œ3ï¼Œâ€¦ï¼Œk}ä¸­æ‰€è°“â€œæœ€å¥½çš„å‡¸åŒ…â€ã€‚æ ¹æ®ç®—æ³•å¤„ç†æ–¹å¼ï¼Œæ¥ä¸‹æ¥ä»Sâ€™â€™ = {1ï¼Œ2ï¼Œ3ï¼Œâ€¦ï¼Œkï¼Œk+1}å¾—åˆ°çš„ç»“æœæ˜¯å¦ä¹Ÿæ˜¯æ­£ç¡®çš„â€”â€”ä¹Ÿå°±æ˜¯è¯æ˜ç¬¬nå¼ éª¨ç‰Œä¼šå€’ï¼Œåˆ™ç¬¬n+1å¼ éª¨ç‰Œä¹Ÿä¼šå€’ä¸‹ã€‚</p><blockquote><p>é¢„å¤„ç†çš„æ–¹å¼æ˜¯å¯¹2~næ‰€æœ‰ç‚¹ç›¸è¾ƒäºç‚¹1æŒ‰æè§’æ’åºï¼Œå› æ­¤ä¸‹ä¸€ä¸ªè¦å¤„ç†ç‚¹k+1ä¸€å®šå‡ºç°åœ¨çº¿1â†’kçš„å·¦ä¾§ï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾è“è‰²åŒºåŸŸå’Œç»¿è‰²åŒºåŸŸï¼ˆå‡è®¾k = 9ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/20180207231513568.jpg" alt="img"></p><p>è€Œæ ¹æ®ç›®å‰æ¥çº³çš„æœ€åä¸€æ¡æè¾¹( k-1)â†’k ï¼ˆä¾‹å¦‚å›¾ä¸­8â†’9ï¼‰æ¥åˆ’åˆ†ï¼Œç‚¹k+1å¯èƒ½å‡ºç°çš„åŒºåŸŸåˆåˆ†ä¸ºä¸¤å—ï¼Œå³è¯¥æè¾¹çš„å·¦ä¾§ï¼ˆç»¿è‰²åŒºåŸŸï¼‰å’Œå³ä¾§ï¼ˆè“è‰²åŒºåŸŸï¼‰ã€‚è¿™ä¹Ÿæ­£å¯¹åº”äºç®—æ³•åˆ¤å®šçš„ä¸¤ä¸ªåˆ†æ”¯ã€‚</p><ul><li><p>å·¦ä¾§ï¼šå·¦ä¾§çš„æƒ…å†µå¾ˆç®€å•ï¼Œç‚¹k+1æ˜¾ç„¶ä¼šæ˜¯ä¸€ä¸ªæ–°çš„æç‚¹ã€‚Graham Scanè¦åšçš„æ­£æ˜¯æš‚æ—¶æ¥çº³è¾¹kâ†’k+1ï¼Œæ‹“å±•äº†ä¸€ä¸ªæ–°çš„å•ä½ã€‚</p></li><li><p>å³ä¾§ï¼šå†çœ‹k+1è½åœ¨å³ä¾§çš„æƒ…å†µã€‚å¦‚ä¸‹å›¾ç‚¹10ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/20180207232235024.jpg" alt="img"></p><p>Graham Scanè¦åšçš„æ˜¯ä¸¢å¼ƒç‚¹kï¼ˆå›¾ä¸­ç‚¹9ï¼‰ï¼Œä¹Ÿå°±æ˜¯åˆ¤å®šå‡ºç‚¹kä¸å¯èƒ½æ˜¯æç‚¹ã€‚è¿™æ ·åšçš„åŸå› ï¼šæ˜¯å¼•å…¥ç‚¹k+1åï¼Œç‚¹kä¸€å®šä¼šè¢«åŒ…å«åœ¨ä¸‰è§’å½¢(1, k-1, k+1)å†…éƒ¨ã€‚å¦‚å›¾ä¸­ç‚¹9ä¸€å®šåŒ…å«äºä¸‰è§’å½¢(1, 8, 10)å†…éƒ¨ã€‚æ­£å¦‚æç‚¹æ³•ä¸­æ’é™¤éæç‚¹çš„åšæ³•ï¼Œç‚¹kè¢«æ’é™¤æ˜¯æ­£ç¡®çš„åšæ³•ã€‚æ¥ä¸‹æ¥ç‚¹k-1ï¼Œk-2ç­‰ï¼ˆå¦‚å›¾ä¸­ç‚¹8ï¼Œç‚¹7ç­‰ï¼‰ä¹Ÿå¯èƒ½æ˜¯éæç‚¹ï¼ŒæŒ‰ç…§ç®—æ³•çš„æµç¨‹ï¼Œå®ƒä»¬æ€»ä¼šè¢«åˆ¤å®šåœ¨æŸä¸ªä¸‰è§’å½¢çš„å†…éƒ¨ï¼ˆä¾‹å¦‚ç‚¹7åœ¨ä¸‰è§’å½¢(1, 5, 10)å†…éƒ¨ï¼‰è€Œè¢«æ’é™¤ï¼Œç›´åˆ°left testä¸ºtrueï¼Œå›æº¯åœæ­¢ã€‚</p><p>æ¢ä¸ªè§’åº¦è€ƒè™‘ï¼Œå›æº¯åœæ­¢æ—¶å¾—åˆ°çš„æ–°è¾¹æ­£æ˜¯å¢é‡æ„é€ æ³•ä¸­æ¯æ­¥å¾—åˆ°çš„support lineï¼Œå³åˆ‡çº¿ã€‚ä¾‹å¦‚å›¾ä¸­çº¿5â†’10æ­£æ˜¯ç®—æ³•å½“å‰ä¿ç•™çš„â€å‡¸åŒ…â€œçš„åˆ‡çº¿ã€‚è¿™ä¹Ÿèƒ½è®ºè¯Graham Scanå¤„ç†æ–¹å¼çš„æ­£ç¡®æ€§ã€‚</p></li></ul></blockquote></li></ol><p>è‡³æ­¤ï¼Œç®—æ³•æ€è·¯ä¸Šçš„æ­£ç¡®æ€§å·²ç»è¯æ˜å®Œæ¯•ã€‚</p><h2 id="è¡¨è¿°æ–¹å¼çš„æ­£ç¡®æ€§"><a href="#è¡¨è¿°æ–¹å¼çš„æ­£ç¡®æ€§" class="headerlink" title="è¡¨è¿°æ–¹å¼çš„æ­£ç¡®æ€§"></a>è¡¨è¿°æ–¹å¼çš„æ­£ç¡®æ€§</h2><p>æ¥ä¸‹æ¥è¿˜è¦è€ƒè™‘ç®—æ³•çš„è¡¨è¿°æ–¹å¼æ˜¯å¦æœ‰æ¼æ´ï¼šä»£ç ä¸­æ¯æ¬¡to left testä¹‹å‰å¹¶æ²¡æœ‰åˆ¤æ–­Sæ ˆä¸­æ˜¯å¦æœ‰â‰¥2ä¸ªå…ƒç´ ã€‚è¿™ä¹Ÿå¯ä»¥ç”±é¢„å¤„ç†çš„æ–¹å¼æ¥è®ºè¯ã€‚ç‚¹1é€‰å–çš„æ˜¯LTLï¼Œè€Œç‚¹2æ˜¯ç›¸å¯¹äºç‚¹1æè§’æœ€å°çš„ç‚¹ï¼Œè¿™æ ·çš„åšæ³•ä¿è¯äº†é™¤äº†ç‚¹1å’Œç‚¹2ä¹‹å¤–æ‰€æœ‰çš„ç‚¹ä¸€å®šæ˜¯åœ¨è¾¹1â†’2å·¦ä¾§çš„ã€‚å› æ­¤ç®—æ³•å›æº¯æœ€å¤šåˆ°ç‚¹2ï¼Œæ°¸è¿œä¸å¯èƒ½æŠŠç‚¹2ä¸¢å¼ƒï¼ŒSä¸­å…ƒç´ ä»»ä½•æ—¶å€™è‡³å°‘æœ‰ä¸¤ä¸ªã€‚</p><hr><p>Graham Scanç®—æ³•çš„æ­£ç¡®æ€§è®ºè¯å®Œæ¯•ã€‚</p><h1 id="é¢„å¤„ç†æ“ä½œçš„å¿…è¦æ€§"><a href="#é¢„å¤„ç†æ“ä½œçš„å¿…è¦æ€§" class="headerlink" title="é¢„å¤„ç†æ“ä½œçš„å¿…è¦æ€§"></a>é¢„å¤„ç†æ“ä½œçš„å¿…è¦æ€§</h1><p>æœ€åæ¥æ€è€ƒä¸€ä¸‹é¢„å¤„ç†æ“ä½œï¼špresortingã€‚ä»”ç»†å›é¡¾ä¸Šè¿°è®ºè¯è¿‡ç¨‹ä¼šå‘ç°ï¼Œæ¯ä¸€æ­¥çš„æ­£ç¡®æ€§éƒ½æ˜¯å»ºç«‹åœ¨æœ€åˆçš„æ’åºä¸Šçš„ã€‚é‚£ä¹ˆè¿™ä¸ªé¢„å¤„ç†æ’åºçœŸçš„æ˜¯å¿…è¦çš„å—ï¼Ÿå¯ä»¥æ¥ä¸¾æç«¯çš„åä¾‹ï¼Œæ¯æ¬¡é€‰å–ä¸‹ä¸€ä¸ªç‚¹éƒ½æ˜¯éšæœºçš„ï¼Œä¾‹å¦‚ä¸‹å›¾çš„è·¯å¾„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/20180207235736089.jpg" alt="img"></p><p>ä¸Šå›¾ä¸­ä»ç‚¹1å¼€å§‹å‡ºå‘è¿›è¡Œto leftæµ‹è¯•ï¼Œå¯ä»¥å‘ç°ï¼Œæ¯æ¬¡åˆ¤å®šç»“æœéƒ½ä¸ºtrueï¼Œæœ€ç»ˆæ‰€æœ‰çš„ç‚¹éƒ½è¢«ä¿ç•™äº†ä¸‹äº†ï¼Œè€Œæ˜¾ç„¶è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå‡¸åŒ…ã€‚å› æ­¤presortingæ˜¯æ•´ä¸ªç®—æ³•æˆç«‹çš„åŸºç¡€ã€‚</p><h1 id="åˆ†æå¤æ‚åº¦"><a href="#åˆ†æå¤æ‚åº¦" class="headerlink" title="åˆ†æå¤æ‚åº¦"></a>åˆ†æå¤æ‚åº¦</h1><p>ä¸Šé¢è¯æ˜äº†Graham Scanç®—æ³•çš„æ­£ç¡®æ€§ï¼Œæ¥ä¸‹æ¥åˆ†æå…¶å¤æ‚åº¦æ˜¯å¦æ»¡è¶³O(nlogn)ï¼Œå®ç°æ‰€è°“çš„æœ€ä¼˜ç®—æ³•ã€‚</p><p>ç›´è§‚ä¸Šæ— æ³•æ–­å®šGraham Scanæ˜¯ä¸€ä¸ªæœ€ä¼˜çš„ç®—æ³•ï¼Œå°¤å…¶æ˜¯ä»¥ä¸‹æç«¯æƒ…å†µä»¤äººè´¨ç–‘å…¶æ•ˆç‡ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/image-20200314220437069.png" alt="image-20200314220437069"></p><p>Graham Scanç®—æ³•å¤æ‚åº¦ç”±ä¸‰éƒ¨åˆ†å†³å®šï¼š</p><ul><li>persortingï¼Œé‡‡ç”¨ä¸€èˆ¬æ’åºç®—æ³•ï¼Œå¤æ‚åº¦æ˜¯O(nlogn)</li><li>é€æ­¥è¿­ä»£ï¼ŒO(n)ï¼šç®—æ³•ä¸€æ­¥æ­¥çº³å…¥æ–°ç‚¹ï¼Œä¼šè¿­ä»£næ­¥ã€‚</li><li>scanï¼ŒO(?)</li></ul><p><strong>æ‰€ä»¥ç®—æ³•çš„æ€»ä½“å¤æ‚åº¦ï¼šO(nlogn + n * ?) ï¼Œå¯è§scançš„å¤æ‚åº¦å†³å®šäº†ç®—æ³•æ€»ä½“çš„å¤æ‚åº¦ã€‚</strong></p><ul><li>ç®—æ³•ä¸€æ­¥æ­¥çº³å…¥æ–°ç‚¹ï¼Œä¼šè¿­ä»£næ­¥ã€‚ä½†æ˜¯åœ¨æ¯ä¸ªç‚¹ä¸Šéƒ½æœ‰å¯èƒ½åšå›æº¯æ“ä½œï¼Œæ‰€ä»¥scançš„å¤æ‚åº¦æ˜¯ä¸ç¡®å®šçš„ã€‚æˆ‘ä»¬æ¥ä»¥ä¸Šå›¾æœ€åæƒ…å†µä¸ºä¾‹ï¼Œåˆ°ç¬¬8ä¸ªç‚¹æ—¶åˆ¤å®šä¸ºfalseï¼Œèˆå¼ƒç‚¹7ï¼Œå›æº¯ã€‚ä¸‹ä¸€æ­¥åˆ¤æ–­ä¹Ÿä¸ºfalseï¼Œèˆå¼ƒç‚¹6ï¼Œå›æº¯ã€‚å¦‚æ­¤å›æº¯ç›´åˆ°ç®—æ³•å¼€å§‹çš„ç‚¹2ã€‚è¿™æ¬¡scanå€’é€€äº†é«˜è¾¾O(n)ä¸ªç‚¹ï¼Œå¦‚æœæ¯æ¬¡scanéƒ½æ˜¯å¦‚æ­¤é‚£ä¹ˆç®—æ³•æ•´ä½“å¤æ‚åº¦å°±ä¸ºï¼šO(nlogn + n * n) = O(n^2)äº†ï¼Œé‚£è¿™ç§ç®—æ³•çš„æ„ä¹‰ä¹Ÿå°±ä¸å¤§äº†ã€‚</li></ul><p>å…¶å®ä¸Šè¿°åˆ†æå¹¶éé”™è¯¯ï¼Œåªæ˜¯ä¸å¤Ÿç²¾ç¡®ã€‚<u>O(n^2)ç¡®å®æ˜¯Graham Scanç®—æ³•çš„ä¸€ä¸ª<strong>ä¸Šç•Œ</strong></u>ï¼Œä½†æ˜¯è¿™ä¸ªä¸Šç•Œå¹¶ä¸æ˜¯ç´§çš„ã€‚</p><p><u>é—®é¢˜å°±å‡ºåœ¨åˆ†æå‡å®šäº†æ¯æ¬¡éƒ½ä¼šå‡ºç°å›é€€é«˜è¾¾O(n)ä¸ªç‚¹ã€‚</u></p><ul><li><p>ä¸‹å›¾å±•ç¤ºäº†æ•´ä¸ªGraham Scançš„æµç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/20180208002202338.jpg" alt="img"></p><p>å›¾ä¸­é»„è‰²è¾¹æ˜¯æ²¡æœ‰é‡‡çº³çš„ï¼Œå°±æ˜¯to leftæµ‹è¯•åˆ¤å®šä¸ºfalseåç›´æ¥èˆå»çš„ã€‚ç´«è‰²è¾¹åˆ™æ˜¯æ›¾ç»è¢«è®¤ä¸ºæ˜¯æè¾¹è€Œæ¥çº³çš„ï¼Œåæ¥ç»è¿‡å›æº¯åˆèˆå»äº†ã€‚æ— è®ºæ˜¯é»„è¾¹è¿˜æ˜¯ç´«è¾¹ï¼Œåœ¨å…¶ä¸Šè€—è´¹çš„éƒ½æ˜¯å¸¸æ•°æ—¶é—´ï¼Œå…³é”®å°±åœ¨äºé»„è‰²è¾¹å’Œç´«è‰²è¾¹çš„æ•°ç›®äº†ã€‚</p><blockquote><p>é€šè¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œä»å›¾è®ºçš„è§’åº¦çœ‹ï¼Œæ‰€æœ‰çš„é»„è‰²è¾¹å’Œç´«è‰²è¾¹è¿åœ¨ä¸€èµ·æ„æˆäº†ä¸€å¼ <strong>å¹³é¢å›¾</strong>ï¼Œä¹Ÿå°±æ˜¯å®ƒä»¬äº’ç›¸æ˜¯ä¸å¯èƒ½å†…éƒ¨ç›¸äº¤çš„ã€‚å¹³é¢å›¾çš„ä¸€ä¸ªé‡è¦æ€§è´¨ï¼š<strong>å¹³é¢å›¾ä¸­æ‰€æœ‰è¾¹çš„æ•°ç›®å’Œé¡¶ç‚¹æ•°ç›®ä¿æŒåŒé˜¶</strong></p><p>è¿™ä¸ªæ€§è´¨æ¥è‡ª<strong>æ¬§æ‹‰å…¬å¼</strong>ï¼šæœ‰nä¸ªç‚¹çš„å¹³é¢å›¾ï¼Œ<u>è¾¹</u>çš„æ•°ç›®ä¸Šé™æ˜¯3nï¼Œä¹Ÿå°±æ˜¯<strong>O(3n)</strong>ã€‚</p><ul><li>å›æº¯ï¼ˆbacktrackï¼‰å¯èƒ½ä¼šå€’é€€çš„è¾¹æ•°ï¼šåœ¨0~nä¹‹é—´ã€‚ã€ä½†æ˜¯æ³¨æ„ï¼Œä¸æ˜¯æ¯æ¬¡å›æº¯éƒ½èƒ½å›é€€åˆ°nï¼Œå› ä¸ºç”±ä¸Šé¢å¯çŸ¥ï¼Œç‚¹é›†è¾¹æ•°æœ€å¤šä¸º3nï¼Œè€Œè¿™é‡Œé¢çš„æ¯ä¸€ä¸ªè¾¹ï¼Œä¼šè¢«å›é€€0æ¬¡ï¼ˆæè¾¹ï¼‰ï¼Œæˆ–è€…1æ¬¡ï¼ˆéæè¾¹ï¼‰ã€‚æ‰€ä»¥ï¼ŒæŸæ¡è¾¹ä¸€æ—¦è¢«å›é€€è¿‡ï¼Œä¹‹åå°±ä¸å¯èƒ½å†è¢«å›é€€äº†ã€‘</li></ul><p>æ ¹æ®è¿™ä¸ªæ€§è´¨ï¼Œåœ¨persortingä¹‹åçš„æ•´ä¸ªæµç¨‹ä¸­ï¼ŒGraham Scanæ‰€èƒ½èµ°è¿‡çš„æ‰€æœ‰è¾¹ä¸ä»…ä¸ä¼šåˆ°è¾¾n^2ï¼Œè€Œé¡¶å¤šåˆ°è¾¾å’ŒnåŒé˜¶çš„ä¸€ä¸ª<strong>çº¿æ€§æ•°ç›®</strong>ã€‚å› æ­¤æ•´ä¸ªç®—æ³•çš„å¤æ‚åº¦ä¹Ÿå°±å–å†³äºpersortingçš„O(nlogn)äº†ã€‚</p></blockquote></li></ul><h1 id="ç®—æ³•æ¨å¹¿"><a href="#ç®—æ³•æ¨å¹¿" class="headerlink" title="ç®—æ³•æ¨å¹¿"></a>ç®—æ³•æ¨å¹¿</h1><p>Graham Scanç®—æ³•ä¸ä»…å¯ä»¥ç”¨äºå‡¸åŒ…æ„é€ é—®é¢˜ï¼Œåœ¨å…¶ä»–è®¸å¤šåœºæ™¯ä¸‹ä¸­ä¹Ÿååˆ†æœ‰æ•ˆã€‚ä¸ºäº†æ¨å¹¿Graham Scanç®—æ³•ï¼Œé¦–å…ˆå¯ä»¥å¯¹å…¶åšç®€åŒ–ï¼Œä»¥æ–¹ä¾¿åˆ©ç”¨åœ¨å…¶ä»–é—®é¢˜ã€‚</p><p>é¦–å…ˆå†æ¥å›é¡¾ä¸€ä¸‹é¢„å¤„ç†æ’åºï¼Œè¿™æ˜¯ç®—æ³•æˆç«‹å¿…ä¸å¯å°‘çš„ä¸€æ­¥ã€‚æ’åºç®—æ³•å¥—ç”¨æˆç†Ÿçš„æ–¹æ³•å³å¯ï¼Œåˆ©ç”¨æ•°å­¦æ–¹æ³•è®¡ç®—åè§’ä¸ä»…å¤æ‚è€Œä¸”å¼•å…¥äº†è¯¯å·®ï¼Œæ‰€ä»¥è¦é‡‡ç”¨to left testã€‚è¦åšçš„å°±æ˜¯ä¸¤ç‚¹ï¼š</p><ul><li>å¥—ç”¨æˆç†Ÿçš„æ’åºç®—æ³•ï¼Œå°†å¾…æ’åºå…ƒç´ ç”±æ•°å€¼å˜ä¸ºç‚¹</li><li>å°†æ’åºç®—æ³•çš„æ¯”è¾ƒå™¨æ”¹ä¸º<strong>to left test</strong>å®ç°</li></ul><p>æŒ‰ç…§è¿™æ ·çš„æµç¨‹å°±èƒ½é—´æ¥åœ°å®ç°persortingã€‚</p><h2 id="1ã€åŸå§‹ç‚¹é›†å·²ç»æœ‰æŸç§æ¬¡åº"><a href="#1ã€åŸå§‹ç‚¹é›†å·²ç»æœ‰æŸç§æ¬¡åº" class="headerlink" title="1ã€åŸå§‹ç‚¹é›†å·²ç»æœ‰æŸç§æ¬¡åº"></a>1ã€åŸå§‹ç‚¹é›†å·²ç»æœ‰æŸç§æ¬¡åº</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸æ˜¯ä»é›¶å¼€å§‹æ„é€ å‡¸åŒ…ï¼Œä¾‹å¦‚å¾—åˆ°çš„å¾…å¤„ç†ç‚¹é›†å·²ç»æ˜¯æœ‰æŸç§æ¬¡åºçš„ï¼ˆæ¯”å¦‚å·²ç»æŒ‰xåæ ‡å¤§å°æ’åºï¼Œå¦‚ä¸‹å›¾ï¼‰ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/20180208004657243.jpg" alt="img"></p><p><u>è¿™ç§æƒ…å†µä¹Ÿä¸ä¸€å®šéå¾—è¿›è¡Œpersortingæ„é€ æ–°çš„æ¬¡åº</u>ï¼Œé€šå¸¸æ”¹å˜è§‚å¯Ÿçš„è§’åº¦ï¼Œæ¢ä¸€ç§ç†è§£æ–¹å¼å°±èƒ½å…å»é¢„å¤„ç†è€Œç›´æ¥è¿›è¡Œåé¢çš„çº¿æ€§çš„scanæ“ä½œäº†ã€‚</p><p><strong>ä¸ŠåŠéƒ¨åˆ†å‡¸åŒ…ï¼š</strong></p><p>è€ƒè™‘yè½´è´Ÿæ–¹å‘æ— ç©·è¿œä¸€ä¸ªç‚¹ï¼Œæ‰€æœ‰çš„ç‚¹ç›¸å¯¹äºè¿™ä¸ªç‚¹çš„æè§’æ’åºæ°å¥½å°±æ˜¯å„ç‚¹çš„xåæ ‡åºï¼ä¹Ÿå°±æ˜¯å°†æ— ç©·è¿œçš„ç‚¹çœ‹ä½œèµ·å§‹ç‚¹â‘ ï¼Œæœ€å³ä¾§ç‚¹ï¼ˆå›¾ä¸­ç‚¹8ï¼‰çœ‹ä½œç‚¹â‘¡ï¼Œè¿›è¡Œscanè¿‡ç¨‹ç›´åˆ°æœ€å·¦è¾¹çš„ç‚¹ï¼ˆå›¾ä¸­ç‚¹1ï¼‰ç»“æŸï¼Œå°±å¾—åˆ°äº†å‡¸åŒ…çš„ä¸ŠåŠéƒ¨åˆ†ï¼ˆupper hullï¼‰ï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾çš„8â†’7â†’2â†’1ï¼š</p><p><em>æ³¨ï¼šå¯¹ â€œè€ƒè™‘yè½´è´Ÿæ–¹å‘æ— ç©·è¿œä¸€ä¸ªç‚¹ï¼Œæ‰€æœ‰çš„ç‚¹ç›¸å¯¹äºè¿™ä¸ªç‚¹çš„æè§’æ’åºæ°å¥½å°±æ˜¯å„ç‚¹çš„xåæ ‡åºï¼â€ è¿™å¥è¯çš„ç†è§£ï¼š</em></p><ul><li>å°±åƒå¤ªé˜³å…‰ç…§åœ¨åœ°çƒä¸Šçš„é“ç†æ˜¯ä¸€æ ·çš„ï¼Œå¤ªé˜³ç¦»åœ°çƒè¶³å¤Ÿçš„è¿œï¼Œé‚£ä¹ˆå®ƒçš„å…‰åˆ°è¾¾åœ°çƒä¸Šçš„æ—¶å€™ï¼Œå°±è¿‘ä¼¼çš„æ˜¯<strong>å¹³è¡Œ</strong>çš„ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/Graham-Scan/20180208005912300.jpg" alt="img"></p><p><strong>ä¸‹åŠéƒ¨åˆ†å‡¸åŒ…ï¼ˆlower hullï¼‰çš„æ„é€ </strong></p><p>ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è€ƒè™‘ä¸€ä¸ªåœ¨yè½´æ­£æ–¹å‘æ— ç©·è¿œçš„ä¸€ä¸ªç‚¹ï¼Œä»¥æ­¤ä¸ºèµ·ç‚¹è¿›è¡Œscanï¼Œæœ€ç»ˆå¾—åˆ°lower hullï¼š1â†’4â†’7ã€‚æœ€åå°†ä¸¤ä¸ªå‡¸åŒ…åˆäºŒä¸ºä¸€å³å¯ã€‚</p><h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸Šæ–‡ç®€è¦åˆ†æå‡ºäº†å‡¸åŒ…æ„é€ é—®é¢˜ç®—æ³•çš„ä¸‹å±Šï¼šO(nlog n)ï¼Œåœ¨æ­¤å°±å¼•å…¥ä¸€ç§ä¸‹ç•Œæ„ä¹‰ä¸Šæœ€ä¼˜çš„ç®—æ³•ï¼š&lt;strong&gt;Graham Scanç®—æ³•&lt;/strong&gt;ã€‚è¿™ç§ç®—æ³•å¯ä»¥ä¿è¯åœ¨æœ€åçš„æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦ä¹Ÿä¸è¶…è¿‡ nlognã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="å‡¸åŒ…" scheme="https://www.longlongqin.top/tags/%E5%87%B8%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>Lower Bound</title>
    <link href="https://www.longlongqin.top/archives/ba04.html"/>
    <id>https://www.longlongqin.top/archives/ba04.html</id>
    <published>2020-03-14T09:29:23.000Z</published>
    <updated>2020-03-17T08:32:28.928Z</updated>
    
    <content type="html"><![CDATA[<p>å†²æ›°ï¼šâ€œç½®è±¡å¤§èˆ¹ä¹‹ä¸Šï¼Œè€Œåˆ»å…¶æ°´æ·±æ‰€è‡³ï¼Œç§°ç‰©ä»¥è½½ä¹‹ï¼Œåˆ™æ ¡å¯çŸ¥çŸ£ã€‚â€</p><a id="more"></a><h2 id="Lower-Bound"><a href="#Lower-Bound" class="headerlink" title="Lower Bound"></a>Lower Bound</h2><p>å†²æ›°ï¼šâ€œç½®è±¡å¤§èˆ¹ä¹‹ä¸Šï¼Œè€Œåˆ»å…¶æ°´æ·±æ‰€è‡³ï¼Œç§°ç‰©ä»¥è½½ä¹‹ï¼Œåˆ™æ ¡å¯çŸ¥çŸ£ã€‚â€</p><p>ä»æç‚¹æ³•çš„O(n^4^)å¤æ‚åº¦ï¼Œåˆ°æè¾¹æ³•çš„O(n^3^)ï¼Œå†åˆ°å¢é‡æ„é€ æ³•å’ŒJarvis Marchçš„O(n^2^)ï¼Œæˆ‘ä»¬ç»å†äº†å°†ç‰¹å®šé—®é¢˜ç®—æ³•ä¸æ–­ä¼˜åŒ–ã€é™ä½å¤æ‚åº¦çš„è¿‡ç¨‹ã€‚é‚£ä¹ˆè¿˜æœ‰æ¯”O(n^2^)æ›´é«˜æ•ˆçš„ç®—æ³•å—ï¼Ÿå‡¸åŒ…æ„é€ ç®—æ³•çš„ä¸‹ç•Œæ˜¯ä»€ä¹ˆï¼Ÿæ¨å¹¿åˆ°ä¸€èˆ¬æƒ…å†µï¼Œåœ¨è®¡ç®—æ¨¡å‹å›ºå®šçš„æƒ…å†µä¸‹ç‰¹å®šé—®é¢˜çš„å¤æ‚åº¦ä¸‹ç•Œåˆæ˜¯å¦‚ä½•ç¡®å®šçš„ï¼Ÿ</p><p>åœ¨è®¡ç®—æ¨¡å‹å›ºå®šçš„æƒ…å†µä¸‹ç‰¹å®šé—®é¢˜çš„å¤æ‚åº¦<strong>ä¸‹ç•Œï¼ˆlower boundï¼‰</strong>æ˜¯ç¡®å®šçš„ã€‚ä¸¥è°¨è€ƒè™‘ï¼Œåœ¨è®¾è®¡ç®—æ³•å‰åº”è¯¥å…ˆç¡®å®šä¸‹ç•Œæ˜¯å¤šå°‘ã€‚</p><p>å¯¹äºæŸä¸ªé—®é¢˜çš„ç‰¹å®šç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ—¶é—´å¤æ‚åº¦æ¥è¯„ä»·ç®—æ³•çš„å¥½åã€‚ç®—æ³•èƒ½è¾¾åˆ°çš„ä¸‹ç•Œä¹Ÿå°±æ˜¯æ‰€è°“é—®é¢˜çš„éš¾åº¦ã€‚å½“ç„¶è¿™ç§è¯„ä»·é€šå¸¸æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæœ‰æ—¶å€™ç”šè‡³æ˜¯ä¸å¯è¡Œçš„ã€‚<u>è¿™å°±è¦å¼•å…¥æ–°çš„çš„æ–¹å¼æ¥è¡¡é‡ä¸€ä¸ªç®—æ³•çš„å¥½åã€‚</u></p><h3 id="è§„çº¦ï¼ˆreductionï¼‰"><a href="#è§„çº¦ï¼ˆreductionï¼‰" class="headerlink" title="è§„çº¦ï¼ˆreductionï¼‰"></a>è§„çº¦ï¼ˆreductionï¼‰</h3><p>æˆ‘ä»¬å¼•å…¥<strong>è§„çº¦ï¼ˆreductionï¼‰</strong>çš„æ–¹æ³•æ¥<u>é—´æ¥</u>è¡¡é‡ä¸€ä¸ªç®—æ³•ã€‚è§„çº¦ç®€å•æ¥è®²å°±æ˜¯ç”¨ä¸€ä¸ªâ€œå‚ç…§ç‰©â€å¯¹æ¯”å¾…è¯„ç®—æ³•ï¼Œå¾—åˆ°ç®—æ³•çš„å¤æ‚åº¦ã€‚è§„çº¦çš„ä¸€èˆ¬æ–¹æ³•å¦‚å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20180206145307478" alt="è§„çº¦ï¼ˆreductionï¼‰"></p><blockquote><p>å·¦ä¾§æ˜¯å·²çŸ¥çš„é—®é¢˜<strong>A</strong>ï¼Œå·²ç»æ˜ç¡®å®ƒçš„éš¾åº¦ï¼Œå³ä¾§æ˜¯å¾…åˆ†æé—®é¢˜<strong>B</strong>ï¼Œå¤æ‚åº¦æœªçŸ¥ã€‚æˆ‘ä»¬åœ¨äºŒè€…ä¹‹é—´å»ºç«‹èµ·ä¸€ç§åŸºæœ¬<strong>reduction</strong>å…³ç³»ï¼š<strong>linear-time reduction</strong>ã€‚</p><p>linear-time reductionå…·ä½“è¡¨è¿°ä¸ºï¼š</p><ul><li>ä»»ä½•ä¸€ä¸ªAçš„è¾“å…¥ï¼ˆinput of Aï¼‰ï¼Œéƒ½å¯ä»¥åœ¨O(n)å¤æ‚åº¦è½¬åŒ–ä¸ºä¸€ä¸ªBçš„è¾“å…¥ï¼ˆinput of Bï¼‰ï¼Œç„¶åé€šè¿‡Bçš„æŸç§ç®—æ³•ï¼ˆany algorithmï¼‰è®¡ç®—å‡ºç»“æœï¼ˆoutput of Bï¼‰;</li><li>è€Œå¯¹äºoutput of Båˆéƒ½å¯ä»¥åœ¨åœ¨O(n)å¤æ‚åº¦è½¬åŒ–ä¸ºAé—®é¢˜çš„ç»“æœï¼ˆoutput of Aï¼‰ã€‚ä¸¤æ¬¡è½¬æ¢çš„å¤æ‚åº¦ä¸èƒ½è¶…è¿‡çº¿æ€§ï¼Œä¹Ÿå°±æ˜¯linear-timeï¼ˆçº¿æ€§æ—¶é—´ï¼‰ã€‚</li></ul></blockquote><p>èƒ½å¤Ÿè¿›è¡Œä¸Šè¿°æ“ä½œï¼Œå°±ç§°ä¸ºï¼š<strong>Aé—®é¢˜å¯ä»¥è§„çº¦åˆ°Bé—®é¢˜ï¼ˆproblem A is linear-time reducible to problem Bï¼‰</strong>ã€‚æ³¨æ„è¡¨è¿°æ–¹å¼é˜²æ­¢ææ··Aå’ŒBçš„ä½ç½®ã€‚</p><h4 id="æ›¹å†²ç§°è±¡"><a href="#æ›¹å†²ç§°è±¡" class="headerlink" title="æ›¹å†²ç§°è±¡"></a>æ›¹å†²ç§°è±¡</h4><p>å¯ä»¥é€šè¿‡<strong>æ›¹å†²ç§°è±¡</strong>çš„æ•…äº‹æ¥å¸®åŠ©ç†è§£è§„çº¦çš„æ€æƒ³ã€‚è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼šæ²¡æœ‰ç§¤èƒ½ç›´æ¥ç§°é‡å¤§è±¡é‡é‡ï¼ˆé—®é¢˜Bçš„éš¾åº¦æ— æ³•ç›´æ¥è¡¡é‡ï¼‰ï¼Œ<u>è§£å†³æ–¹æ¡ˆæ˜¯</u>ï¼šåˆ©ç”¨èˆ¹å’ŒçŸ³å—é—´æ¥ç§°é‡ã€‚çŸ³å¤´å—çš„é‡é‡æ˜¯å¯ä»¥ç›´æ¥ç§°é‡çš„ï¼ˆé—®é¢˜Açš„éš¾åº¦æ˜¯å·²çŸ¥çš„ï¼‰ï¼Œåˆ©ç”¨<u>èˆ¹å’Œæ°´</u>æ¥è½¬æ¢çŸ³å¤´å’Œå¤§è±¡çš„é‡é‡æ˜¯å¯æ“ä½œçš„ï¼ˆè§„çº¦çš„æ–¹æ³•æ˜¯å¯æ“ä½œçš„ï¼‰ã€‚ã€è¿™é‡Œçš„<u>è§„çº¦å…³ç³»(Reduction relationship)</u>æ˜¯æŒ‡æ›¹å†²æˆåƒæ—¶çš„èˆ¹å’Œæ°´ã€‘</p><h4 id="è§„çº¦è®°å·"><a href="#è§„çº¦è®°å·" class="headerlink" title="è§„çº¦è®°å·"></a>è§„çº¦è®°å·</h4><p>å¼•å…¥è§„çº¦è®°å·ï¼Œproblem A is linear-time reducible to problem Bè¡¨ç¤ºä¸ºï¼š<br>$$<br>Aâ‰¤_NB<br>$$<br>å°†é—®é¢˜Aã€Bçš„éš¾åº¦åˆ†åˆ«è¡¨ç¤ºä¸º|A|ï¼Œ|B|ã€‚è§„çº¦è®°å·çš„æ„æ€ç›¸å½“äº<strong>|A|â‰¤|B|</strong>ï¼ŒAçš„ä¸‹ç•Œå¿…ç„¶å°±æ˜¯Bçš„ä¸‹ç•Œã€‚</p><p><strong>è§„çº¦çš„è¿‡ç¨‹</strong>ï¼š</p><ol><li>å°†Açš„è¾“å…¥è½¬åŒ–ä¸ºBçš„è¾“å…¥</li><li>ç»è¿‡Bçš„æŸç§ç®—æ³•è·å¾—è§£ååˆè½¬åŒ–ä¸ºAçš„è§£ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªç®—æ³•ä¹Ÿæ˜¯è§£å†³Aé—®é¢˜çš„ç®—æ³•ã€‚</li></ol><p>å·²çŸ¥Aé—®é¢˜çš„ä¸‹ç•Œï¼Œé‚£ä¹ˆè¿™ä¸ªç®—æ³•å¿…ç„¶ä¸ä¼šä½äºAçš„è¿™ä¸ªä¸‹ç•Œã€‚</p><h3 id="æ„é€ å‡¸åŒ…çš„ä¸‹ç•Œ"><a href="#æ„é€ å‡¸åŒ…çš„ä¸‹ç•Œ" class="headerlink" title="æ„é€ å‡¸åŒ…çš„ä¸‹ç•Œ"></a>æ„é€ å‡¸åŒ…çš„ä¸‹ç•Œ</h3><p>æŒ‰ç…§â€œæ›¹å†²ç§°è±¡â€çš„è§„çº¦æ€æƒ³ï¼Œåˆ†æé—®é¢˜çš„éš¾åº¦ï¼Œæœ€é‡è¦çš„åœ¨äºæ‰¾åˆ°â€œçŸ³å¤´â€ï¼Œè€Œèˆ¹å°±æ˜¯è§„çº¦è¿™ç§æ–¹æ³•ã€‚ä»¥äºŒç»´å‡¸åŒ…ï¼ˆ2d-CHï¼‰æ¥åˆ†æï¼Œé¦–å…ˆå°†å¾…è§£å†³çš„é—®é¢˜æ”¾åˆ°è§„çº¦è®°å·<u>å³è¾¹</u>ï¼Œè€Œå·¦è¾¹çš„â€œçŸ³å¤´â€å°±æ˜¯<strong>æ’åºç®—æ³•</strong>ã€‚<br>$$<br>Sortingâ‰¤_N2D-CH<br>$$<br>æ’åºæ˜¯çº¯ç²¹çš„æ•°å€¼è®¡ç®—é—®é¢˜ï¼Œè€Œå‡¸åŒ…æ˜¯å…¸å‹çš„å‡ ä½•é—®é¢˜ï¼ŒäºŒè€…æ˜¯å¦‚ä½•è”ç³»åœ¨ä¸€èµ·çš„å‘¢ï¼Ÿå‰é¢<a href="http://blog.csdn.net/HouszChina/article/details/79254856" target="_blank" rel="noopener">å¢é‡æ„é€ æ³•</a>å’Œ<a href="http://blog.csdn.net/HouszChina/article/details/79261505" target="_blank" rel="noopener">Jarvis Marchç®—æ³•</a>æ­£æ˜¯åˆ†åˆ«ç”±ä¸¤ç§æ’åºç®—æ³•æ¥ç±»æ¯”å¼•å…¥çš„ï¼Œå¯è§æ’åºå’Œå‡¸åŒ…ä¹‹é—´æœ‰æ·±åˆ»çš„å†…åœ¨è”ç³»ã€‚äºŒè€…ä¹‹é—´çš„è”ç³»å¯ä»¥é€šè¿‡ä¸‹å›¾è¡¨ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200312231702595.png" alt="image-20200312231702595"></p><p>é¦–å…ˆæ¸…ç‚¹è¦åšçš„ä»»åŠ¡ï¼š</p><ul><li><p>å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…ï¼Œå°†æ’åºé—®é¢˜çš„è¾“å…¥è½¬åŒ–ä¸ºå‡¸åŒ…é—®é¢˜çš„è¾“å…¥</p><ul><li>æ’åºé—®é¢˜çš„è¾“å…¥å¯ä»¥è¡¨ç¤ºä¸ºxè½´ä¸Šçš„ä¸€ç³»åˆ—çš„ç‚¹ï¼ˆå›¾ä¸­è“è‰²ç‚¹ï¼‰ã€‚ç„¶åå°†è¿™äº›ç‚¹è½¬åŒ–ä¸ºå‡¸åŒ…é—®é¢˜çš„è¾“å…¥ï¼Œå°±æ˜¯å°†è¿™äº›å¾…æ’åºçš„æ•°è½¬åŒ–ä¸ºå¹³é¢ä¸Šçš„ç‚¹ã€‚å¼•å…¥è¾…åŠ©çº¿â€”â€”ä¸€æ¡æŠ›ç‰©çº¿ï¼Œä¾‹å¦‚å›¾ä¸­è“è‰²è™šçº¿ã€‚æ¥ä¸‹æ¥è¦å¯¹è“è‰²ç‚¹åšåˆ°æŠ›ç‰©çº¿ä¸Šçš„æ˜ å°„ï¼ˆO(n)ï¼‰ï¼Œæ˜ å°„åœ¨æŠ›ç‰©çº¿ä¸Šçš„ç‚¹ç”¨ç»¿è‰²æ ‡å‡ºã€‚è¿™æ ·å°±å®Œæˆäº†å°†å¾…æ’åºæ•°å­—è½¬åŒ–ä¸ºå¹³é¢ä¸Šç‚¹çš„æ“ä½œã€‚æ¥ä¸‹æ¥å°±å¯ä»¥ç”¨æŸç§ç®—æ³•å°†ç»¿è‰²ç‚¹æ„é€ ä¸ºå‡¸åŒ…ï¼Œå³å›¾ä¸­CH(P)ã€‚</li></ul></li><li><p>å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å†…ï¼Œå°†å‡¸åŒ…é—®é¢˜çš„ç»“æœè½¬åŒ–ä¸ºæ’åºé—®é¢˜çš„ç»“æœ</p><ul><li>å‡¸åŒ…CH(P)å°±æ˜¯é—®é¢˜Bçš„è§£ï¼Œå¦‚ä½•å°†Bçš„è§£è½¬åŒ–ä¸ºAçš„è§£ï¼Ÿæ³¨æ„æœ€å·¦å’Œæœ€å³è¾¹ä¸¤ç‚¹çš„è¿çº¿ï¼Œå³å›¾ä¸­1å’Œ4çš„è¿çº¿4â†’1ã€‚é™¤å»è¿™æ¡è¿çº¿ä¹‹å¤–ï¼Œå…¶ä»–é¦–å°¾ç›¸æ¥çš„è¿çº¿ï¼š1â†’2ï¼Œ2â†’3å’Œ3â†’4éƒ½æ˜¯â€œæ²¿ç€xæ–¹å‘å•è°ƒçš„â€ï¼Œéå†è¿™äº›é¦–å°¾ç›¸è¿çš„è¾¹ï¼ˆO(n)ï¼‰å°±èƒ½å¾—åˆ°ä¸€ç³»åˆ—çš„æ•°å€¼ï¼Œå¹¶ä¸”å·²ç»æ˜¯æœ‰åºçš„äº†ã€‚è¿™æ ·å°±å°†å‡¸åŒ…é—®é¢˜çš„è§£â€”â€”å‡¸åŒ…CH(P) è½¬åŒ–ä¸ºäº†æ’åºé—®é¢˜çš„è§£â€”â€”æœ‰åºæ•°å€¼åºåˆ—ã€‚</li></ul></li></ul><p>ä¸¤æ¬¡è½¬åŒ–è¯´æ˜è§„çº¦æ˜¯å¯è¡Œçš„ï¼Œå› æ­¤2d-CHé—®é¢˜çš„ä¸‹ç•Œå¯ç”±sortingçš„ä¸‹ç•Œç¡®å®šã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæ’åºé—®é¢˜çš„éš¾åº¦æ˜¯ç¡®å®šçš„ï¼š<strong>O(nlogn)</strong>ã€‚2d-CHé—®é¢˜çš„ä¸‹ç•Œä¹Ÿå°±æ˜¯ï¼š<br>$$<br>O(nlogn)<br>$$<br>æ›´é«˜ç»´çš„å‡¸åŒ…é—®é¢˜ä¸‹ç•Œä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>å¢é‡æ„é€ æ³•å’ŒJarvis Marchçš„O(n^2^)åˆ°O(nlogn)ä¹‹é—´çš„é¸¿æ²Ÿèƒ½å¦è·¨è¶Šå‘¢ï¼Ÿæ˜¯å¦å­˜åœ¨O(nlogn)å¤æ‚åº¦çš„å‡¸åŒ…æ„é€ ç®—æ³•ï¼Ÿåç»­æ–‡ç« ä¼šæœ‰å›ç­”ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å†²æ›°ï¼šâ€œç½®è±¡å¤§èˆ¹ä¹‹ä¸Šï¼Œè€Œåˆ»å…¶æ°´æ·±æ‰€è‡³ï¼Œç§°ç‰©ä»¥è½½ä¹‹ï¼Œåˆ™æ ¡å¯çŸ¥çŸ£ã€‚â€&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="å‡¸åŒ…" scheme="https://www.longlongqin.top/tags/%E5%87%B8%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>æ„é€ å‡¸åŒ…-Jarvis March(Gift Wrapping)ç®—æ³•</title>
    <link href="https://www.longlongqin.top/archives/9c7f.html"/>
    <id>https://www.longlongqin.top/archives/9c7f.html</id>
    <published>2020-03-14T09:23:45.000Z</published>
    <updated>2020-03-17T08:42:49.577Z</updated>
    
    <content type="html"><![CDATA[<p>å›é¡¾å‡¸åŒ…æ„é€ ç®—æ³•ï¼šæç‚¹æ³•ã€æè¾¹æ³•å’Œå¢é‡æ„é€ æ³•ï¼Œå…¶å¤æ‚åº¦åˆ†åˆ«ä¸ºO(n^4^)ã€O(n^3^)å’ŒO(n^2^)ï¼Œæ•ˆç‡ç»è¿‡ä¼˜åŒ–å·²ç»å¤§å¤§æé«˜äº†ã€‚æ¥ä¸‹æ¥å¼•å…¥ä¸€ç§æ–°çš„ç®—æ³•â€”â€”Jarvis Marchï¼Œå…¶å¤æ‚åº¦ä¹Ÿæ˜¯O(n^2^)ï¼Œä½†æ˜¯ç›¸è¾ƒäºå¢é‡æ„é€ åœ¨æœ€å¥½æƒ…å†µä¸‹æ•ˆç‡æ˜¯è¾ƒé«˜çš„ã€‚</p><a id="more"></a><h3 id="å®ç°ç­–ç•¥"><a href="#å®ç°ç­–ç•¥" class="headerlink" title="å®ç°ç­–ç•¥"></a>å®ç°ç­–ç•¥</h3><p>å…ˆæƒ³ä¸€ä¸‹ä¸ºä½•<a href="http://blog.csdn.net/houszchina/article/details/79253249" target="_blank" rel="noopener">æè¾¹æ³•</a>å¤æ‚åº¦é«˜è¾¾O(n^3^)ã€‚å®é™…ä¸Šæˆ‘ä»¬è¦å¯¹ç‚¹é›†ä¸­æ‰€æœ‰è¾¹è¿›è¡Œéå†ï¼Œè¿™éœ€è¦n^2^å¤æ‚åº¦ï¼Œç„¶åå¯¹æ¯ä¸ªè¾¹è¿›è¡Œé‰´åˆ«ï¼Œåˆéœ€è¦nå¤æ‚åº¦ï¼Œå› æ­¤æ€»ä½“å¤æ‚åº¦é«˜è¾¾O(n^3^)ã€‚é‚£ä¹ˆè¯¥å¦‚ä½•æ”¹è¿›å‘¢ï¼Ÿè¿™å°±å¯ä»¥è¿ç”¨é€‰æ‹©æ’åºçš„æ€æƒ³ï¼šå°†ä¸‹ä¸€ä¸ªè¦æŸ¥æ‰¾çš„è¾¹ç¼©å°åˆ°ä¸€ä¸ªå°èŒƒå›´ï¼Œè€Œééå†æ‰€æœ‰è¾¹ã€‚</p><blockquote><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20180205163738819-1584005657109" alt="é€‰æ‹©æ’åºç¤ºæ„"></p><p>é€‰æ‹©æ’åºæ¯æ¬¡é€‰å–å‡ºçš„unsortedæœ€å¤§å…ƒç´ æ”¾åœ¨sorted éƒ¨åˆ†çš„é¦–éƒ¨ï¼Œ<u>ä¹Ÿå°±æ„å‘³ç€æ•´ä¸ªunsortedéƒ¨åˆ†å¿…ç„¶ä¸ä¼šè¶…è¿‡sortedéƒ¨åˆ†</u>ã€‚ä»ç®—æ³•æ•´ä½“æ¡†æ¶è€ƒè™‘ï¼Œæ¯æ¬¡æˆ‘ä»¬éƒ½æ˜¯ç»´æŠ¤ä¸€ä¸ªå±€éƒ¨è§£ï¼ˆä¹Ÿå°±æ˜¯sortedéƒ¨åˆ†ï¼‰ï¼Œç„¶åä»å°šæœªå¤„ç†çš„éƒ¨åˆ†ï¼ˆä¹Ÿå°±æ˜¯unsortedéƒ¨åˆ†ï¼‰æ‰¾åˆ°ä¸€ä¸ªä¸å½“å‰å±€éƒ¨è§£â€œç´§å¯†ç›¸å…³çš„å…ƒç´ â€ï¼ˆç›¸å½“äºé€‰å–çš„æœ€å¤§å…ƒç´ ï¼‰ã€‚è¿™ä¸ªæ€æƒ³ä¸ºè§£å†³å‡¸åŒ…é—®é¢˜å¸¦æ¥äº†æ–°æ€è·¯ã€‚</p></blockquote><p>å¯¹ç®—æ³•çš„å¤§è‡´è¿‡ç¨‹è¿›è¡Œæè¿°(æ ‡è¯†ä¸ºï¼šå·²æ‰¾åˆ°æè¾¹æ•°/æ‰€æœ‰æè¾¹æ•°)ï¼š</p><ul><li><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200312175230158.png" alt="åœ¨åŠ å…¥[partial convex hull]ä¹‹å‰æ‰¾å‡ºä¸‹ä¸€æ¡æè¾¹"></p><p>é¦–å…ˆä»ä»»ä½•ä¸€ä¸ªæç‚¹ï¼ˆåé¢è¯´æ˜å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªç‚¹ï¼‰å¼€å§‹ï¼ˆå›¾ä¸­0/5ï¼‰ï¼Œç„¶åæ‰¾åˆ°ä¸€æ¡ä»¥è¿™ä¸ªæç‚¹ä¸ºç«¯ç‚¹çš„æè¾¹ï¼ˆ1/5ï¼‰ã€‚æ¥ç€æ²¿ç€æè¾¹å¦ä¸€ä¸ªç«¯ç‚¹<strong>ï¼ˆendpointï¼‰</strong>å‡ºå‘ï¼Œå†æ‰¾å‡ºä¸‹ä¸€æ¡æè¾¹ï¼ˆ2/5ï¼‰ã€‚å¦‚æ­¤åå¤æ“ä½œï¼Œ<u>æœ€ç»ˆä¼šæ‰¾åˆ°ä¸€æ¡ä»¥æœ€åˆæç‚¹ä¸ºendpointçš„æè¾¹ï¼Œå¾—åˆ°ä¸€ä¸ªå°é—­çš„ç¯ï¼Œå‡¸åŒ…ä¹Ÿæ„é€ å®Œæˆ</u>ã€‚å‡¸åŒ…æ„é€ è¿‡ç¨‹ç±»ä¼¼äºé€‰æ‹©æ’åºä¸­sortedä¸æ–­å‘å‰æ‰©å±•ä¸€æ ·ï¼Œä¸æ–­æ‰©å±•å±€éƒ¨è§£ï¼Œæœ€åå¾—åˆ°é—®é¢˜æœ€ç»ˆè§£ã€‚</p></li></ul><table><thead><tr><th>å‡¸åŒ…æ„é€ çš„é—®é¢˜ç”±æ­¤åˆ†è§£ä¸ºä¸€ä¸ªä¸ªå­é—®é¢˜ï¼š<u>å¦‚ä½•ä»endpointå‡ºå‘æ‰¾åˆ°ä¸‹ä¸€æ¡æè¾¹</u>ã€‚</th></tr></thead><tbody><tr><td></td></tr></tbody></table><h4 id="ç”¨to-left-testæ‰¾åˆ°ä¸‹ä¸€æ¡æè¾¹"><a href="#ç”¨to-left-testæ‰¾åˆ°ä¸‹ä¸€æ¡æè¾¹" class="headerlink" title="ç”¨to left testæ‰¾åˆ°ä¸‹ä¸€æ¡æè¾¹"></a>ç”¨to left testæ‰¾åˆ°ä¸‹ä¸€æ¡æè¾¹</h4><p>ç°åˆ†æå¦‚ä½•ä»endpointæ‰¾åˆ°ä¸‹ä¸€æ¡æè¾¹ã€‚è€ƒè™‘ä¸€ä¸‹çš„ä¸€èˆ¬æƒ…å†µï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200312175230158.png" alt="image-20200312175230158"></p><p>æˆ‘ä»¬ä»æç‚¹oå¼€å§‹å¯»æ‰¾æè¾¹ï¼Œå‡è®¾å½“å‰æ‰¾åˆ°çš„æè¾¹æ˜¯ikï¼Œæ¥ä¸‹æ¥è¦åšçš„å·¥ä½œæ˜¯æ‰¾åˆ°ä»kå‡ºå‘çš„å¦ä¸€æ¡æè¾¹ksï¼Œå³æ‰¾åˆ°æç‚¹sã€‚</p><p>æ˜¾ç„¶ï¼Œsæ¥è‡ªäºå…¶ä»–é‚£äº›å°šæœªå¤„ç†çš„ç‚¹ä¸­ï¼Œé‚£ä¹ˆsä¸å…¶ä»–ç‚¹ç›¸æ¯”æœ‰ä»€ä¹ˆç‰¹å¾ï¼Ÿè§‚å¯Ÿå‘ç°ï¼Œikä½œä¸ºä¸€æ¡æè¾¹ï¼Œå®ƒçš„å³ä¾§è‚¯å®šéƒ½æ˜¯ç©ºçš„ï¼Œæ‰€æœ‰å…¶ä»–ç‚¹éƒ½åœ¨ikå·¦ä¾§ã€‚ç”»å‡ºkä¸å…¶ä»–å€™é€‰ç‚¹çš„æœ‰å‘ç›´çº¿ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­çš„ksï¼Œktï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200312175450087.png" alt="image-20200312175450087"></p><p>æ³¨æ„å›¾ä¸­çº¢è‰²æ ‡å‡ºçš„è§’åº¦ï¼Œå¯ä»¥çœ‹å‡ºksä¸ikçš„å¤¹è§’æ¯”ktå°ï¼Œä¹Ÿå°±æ˜¯ksæ¯”ktç›¸è¾ƒäºikåå·¦çš„è§’åº¦æ›´å°ã€‚å®é™…ä¸Šksåå·¦çš„è§’åº¦æ¯”å…¶ä»–ä»»ä½•ä»kå‡ºå‘çš„è¾¹éƒ½å°ï¼Œ<strong>è¿™å°±æ˜¯sç‚¹çš„åˆ¤å®šä¾æ®</strong>ã€‚</p><p><strong>è¿™æ ·å°±æ‰¾åˆ°äº†ä»å…¶ä½™ç‚¹ä¸­é€‰æ‹©sç‚¹çš„æ€è·¯</strong>ï¼šä»»é€‰ä¸¤ä¸ªç‚¹ï¼Œä»kå‡ºå‘è¿‡è¿™ä¸¤ç‚¹åšæœ‰å‘è¾¹ï¼Œçœ‹å“ªä¸ªåå·¦çš„è§’åº¦æ›´å°å°±ç•™ä¸‹ï¼Œå¦ä¸€ç‚¹ä¸¢å¼ƒã€‚ç„¶åå†æ‹¿ä¸€ç‚¹ä¸ç•™ä¸‹çš„ç‚¹æ¯”è¾ƒï¼Œåå¤è¿™ä¸ªè¿‡ç¨‹ï¼Œæœ€ç»ˆç•™ä¸‹çš„å°±æ˜¯è¦æ‰¾çš„sç‚¹ã€‚</p><table><thead><tr><th>é—®é¢˜è‡³æ­¤è½¬åŒ–ä¸ºï¼š<u>å¦‚ä½•æ¯”è¾ƒä¸¤æ¡æœ‰å‘è¾¹ï¼ˆä¾‹å¦‚kså’Œktï¼‰ç›¸è¾ƒäºå¦ä¸€æœ‰å‘ç›´çº¿ï¼ˆä¾‹å¦‚ikï¼‰è°åå·¦çš„è§’åº¦æ›´å°ã€‚</u></th></tr></thead><tbody><tr><td></td></tr></tbody></table><p>å½“ç„¶å¯ä»¥é€šè¿‡è®¡ç®—ä¸‰è§’å‡½æ•°çš„æ–¹æ³•æ¥æ¯”è¾ƒï¼Œè¿™æ˜¯æœ€ç›´è§‚çš„æ•°å­¦æ€ç»´ã€‚ä½†æ˜¯è¿™æ ·è®¡ç®—ååˆ†å¤æ‚ï¼Œæ›´é‡è¦çš„æ˜¯å¼•å…¥äº†è¯¯å·®ã€‚<u>è¿™æ—¶å€™åˆè¦ä½¿ç”¨<strong>to left test</strong>è¿™ä¸ªåŸºç¡€æ–¹æ³•æ¥è§£å†³é—®é¢˜äº†</u></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200312175904984.png" alt="image-20200312175904984"></p><p>å…·ä½“åšæ³•å°±æ˜¯ä»¥åœ¨kså’Œktä¸­ä»¥ä»»æ„ä¸ªä¸ºåŸºå‡†ï¼ˆå¦‚ä»¥ksä¸ºåŸºå‡†ï¼‰ï¼Œå¯¹å¦ä¸€ç‚¹ï¼ˆå¦‚tï¼‰åšto left testã€‚ä¸Šå›¾ç‚¹tå’Œæœ‰å‘è¾¹ksçš„to left testç»“æœä¸ºtrueï¼Œtåœ¨kså·¦è¾¹ï¼Œå› æ­¤ksåå·¦çš„è§’åº¦æ›´å°ï¼Œèˆå¼ƒç‚¹tã€‚</p><blockquote><p>ç±»æ¯”é€‰æ‹©æ’åºæ¥ç†è§£:</p><ul><li><u>å·²å¾—åˆ°çš„æè¾¹</u>ï¼ˆä»æç‚¹oå¼€å§‹åˆ°ikçš„é¦–å°¾ç›¸è¿çš„æè¾¹ï¼‰â€”â€”ç›¸å½“äº sortedéƒ¨åˆ†</li><li><u>å…¶ä½™ç‚¹</u>â€”â€”ç›¸å½“äº unsortedéƒ¨åˆ†</li><li><u>æ‰¾åˆ°ç‚¹s</u>ï¼ˆèƒ½æ„æˆæœ€å°åè§’çš„ç‚¹ï¼‰â€”â€”ç›¸å½“äº ä»unsortedéƒ¨åˆ†å–å‡ºæå¤§å€¼</li></ul><p>é€‰æ‹©æ’åºä¸­çš„é€‰æ‹©è¿‡ç¨‹éœ€è¦æ¯”è¾ƒå…ƒç´ å¤§å°ï¼Œå°±è¦ç”±ä¸€ç§<strong>æ¯”è¾ƒå™¨</strong>å®Œæˆï¼Œ<u>è€Œä¸Šè¿°æ¯”è¾ƒåè§’çš„è¿‡ç¨‹ä¹Ÿå¯ä»¥æŠ½è±¡ä¸ºä¸€ç§æ¯”è¾ƒå™¨çš„æ“ä½œ</u>ã€‚æ„é€ å‡¸åŒ…çš„ç®—æ³•æ¡†æ¶ä¸é€‰æ‹©æ’åºç›¸åŒï¼Œ<u>åªæ˜¯æ¯”è¾ƒå™¨æ›¿æ¢ä¸ºto left testè€Œå·²</u>ã€‚</p></blockquote><p><em>æ­¤å¤„åªæ˜¯è€ƒè™‘ä¸€èˆ¬æƒ…å†µï¼Œä¸€äº›ç‰¹æ®Šç»†èŠ‚æœªè¿›è¡Œå¤„ç†ã€‚ä¾‹å¦‚åœ¨stä¸Šæœ‰så’Œsâ€™ä¸¤ç‚¹ï¼Œè¿™ä¸¤ç‚¹çš„å–èˆé—®é¢˜æœªè€ƒè™‘ã€‚å½“ç„¶ä¸ºäº†ç†è§£ç®—æ³•æ•´ä½“æ¡†æ¶å¿½ç•¥ç‰¹æ®Šæƒ…å†µæ˜¯å¾ˆå¿…è¦çš„ã€‚</em></p><h4 id="ç¡®å®šç¬¬ä¸€ä¸ªæç‚¹"><a href="#ç¡®å®šç¬¬ä¸€ä¸ªæç‚¹" class="headerlink" title="ç¡®å®šç¬¬ä¸€ä¸ªæç‚¹"></a>ç¡®å®šç¬¬ä¸€ä¸ªæç‚¹</h4><p><strong>ä¸€ä¸ªç»†èŠ‚</strong>ï¼šä¸Šæ–‡ä¸€å¼€å§‹æåˆ°çš„ç®—æ³•çš„æœ€å¼€å§‹çš„<strong>ç¬¬ä¸€ä¸ªæç‚¹</strong>å¦‚ä½•ç¡®å®šï¼Ÿ</p><p>ä»»ä½•ä¸€ä¸ªæç‚¹éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæˆ‘ä»¬æ²¡å¿…è¦å»è®¡ç®—å‡ºå“ªä¸ªç‚¹æ˜¯æç‚¹ã€‚å¯ä»¥é€‰å–yåæ ‡æœ€å°çš„ç‚¹ï¼Œä¹Ÿå°±æ˜¯æœ€ä½ç‚¹ï¼Œåœ¨æ²¡æœ‰é€€åŒ–çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç‚¹ä¸€å®šæ˜¯ä¸€ä¸ªæç‚¹ã€‚å¦‚æœæƒ…å†µé€€åŒ–ï¼Œæœ‰å¤šä¸ªæœ€ä½ç‚¹ï¼ˆå¦‚ä¾‹å›¾ä¸­æ‰€ç¤ºï¼‰ï¼Œæˆ‘ä»¬å°±å»é€‰xåæ ‡æœ€å°çš„é‚£ä¸ªç‚¹ï¼Œä¹Ÿå°±æ˜¯æœ€å·¦è¾¹çš„ç‚¹å³å¯ã€‚è¿™ç§æ–¹æ³•é€‰å‡ºçš„ç‚¹ç§°ä¸º<strong>lowest-then-leftmost pointï¼ˆLTLï¼‰</strong>ã€‚<u>æ³¨æ„é€‰å–çš„è§„åˆ™çš„å…ˆåé¡ºåºï¼Œå…ˆé€‰lowestï¼Œè‹¥ç‚¹ä¸å”¯ä¸€å†é€‰leftmostã€‚</u></p><h3 id="Jarvis-March"><a href="#Jarvis-March" class="headerlink" title="Jarvis March"></a>Jarvis March</h3><p>ç±»æ¯”é€‰æ‹©æ’åºçš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¾—åˆ°çš„å‡¸åŒ…æ„é€ ç®—æ³•å°±æ˜¯<strong>Jarvis Marchç®—æ³•</strong>ï¼Œåˆç§°<strong><a href="https://en.wikipedia.org/wiki/Gift_wrapping_algorithm" target="_blank" rel="noopener">gift wrappingç®—æ³•</a></strong>ï¼ˆç®—æ³•è¿‡ç¨‹å¦‚åŒ…è£…ç¤¼ç‰©ä¸€æ ·ï¼‰ã€‚æ¥ä¸‹æ¥çœ‹ç®—æ³•å…·ä½“å®ç°æ–¹æ³•ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ToLeft</span><span class="params">(Point P, Point q, Point s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> area2 = p.x*q.y - p.y*q.x + q.x*s.y -q.y*s.x + s.x*p.y - s.y*p.x;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> area2 &gt;<span class="number">0</span> ; <span class="comment">//å·¦ä¾§ä¸ºçœŸ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LTL</span> <span class="params">(Point S[], <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ltl = <span class="number">0</span>; <span class="comment">//the lowest-then-leftmost point</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>; k&lt;n;k++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(S[k].y &lt; S[ltl].y || (S[k].y==S[ltl].y &amp;&amp; S[k].x&lt;S[ltl].x))</span><br><span class="line">            ltl =k;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">return</span> ltl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Javis</span><span class="params">(Point S[], <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;n; k++)</span><br><span class="line">    S[k].extreme =FALSE; <span class="comment">//é¦–å…ˆå°†æ‰€æœ‰ç‚¹æ ‡è®°ä¸ºéæç‚¹</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">int</span> ltl=LTL(S, n); <span class="comment">//æ‰¾åˆ°LTL</span></span><br><span class="line">    <span class="keyword">int</span> k=ltl;  <span class="comment">//å°†LTLä½œä¸ºç¬¬ä¸€ä¸ªæç‚¹</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">    S[k].extrem = <span class="literal">true</span>; <span class="keyword">int</span> s =<span class="number">-1</span>; <span class="comment">//sæ˜¯è¦æ‰¾çš„ä¸‹ä¸€ä¸ªæç‚¹ï¼Œç”¨tå»å¾ªç¯æ‰¾</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> t=<span class="number">0</span>; t&lt;n; t++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(t != k &amp;&amp;t != s &amp;&amp; ( s == <span class="number">-1</span> || !ToLeft(S[K],S[s],S[t]) ) )</span><br><span class="line">                s = t; <span class="comment">//å¦‚æœtåœ¨pqçš„å³ä¾§ï¼Œåˆ™æ›´æ–°s</span></span><br><span class="line">        &#125;</span><br><span class="line">        S[k].succ = s; k = s; <span class="comment">//æ–°çš„æè¾¹pqç¡®å®š   </span></span><br><span class="line">        k = s; <span class="comment">//æ›´æ–°kçš„å€¼ï¼Œå˜ä¸ºä¸‹ä¸€æ¬¡æŸ¥æ‰¾çš„èµ·ç‚¹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">while</span>(ltl != k) <span class="comment">//å¦‚æœå¾ªç¯å›åˆ°äº†åŸæ¥çš„ç‚¹ï¼Œåˆ™ç»“æŸ</span></span><br></pre></td></tr></table></figure><h3 id="æ¢³ç†"><a href="#æ¢³ç†" class="headerlink" title="æ¢³ç†"></a>æ¢³ç†</h3><ol><li>é¦–å…ˆï¼Œåˆå§‹åŒ–å°†æ‰€æœ‰ç‚¹éƒ½è®¾ä¸ºï¼šéæç‚¹</li><li>ç„¶åï¼Œå¼€å§‹æ‰¾åˆ°<u>ç¬¬ä¸€ä¸ªæç‚¹</u>ï¼ˆç”¨LTLæ–¹æ³•ï¼‰ï¼Œæ‰¾åˆ°ä¹‹åèµ‹å€¼ç»™k</li><li>æ¥ä¸‹æ¥ï¼Œå¼€å§‹æ‰¾<u>ä¸‹ä¸€ä¸ªæç‚¹</u>sï¼š<ul><li>ä¸»è¦ç”¨<code>ToLeft Test</code>æ¥æ‰¾å‡ºä¸‹ä¸€ä¸ªæç‚¹</li></ul></li><li>å¾ªç¯ç¬¬3æ­¥éª¤ï¼Œç›´åˆ°æ‰¾åˆ°æ‰€æœ‰æç‚¹</li></ol><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>æœ€ååˆ†æJarvis Marchç®—æ³•ç›¸è¾ƒäºå¢é‡æ„é€ æ³•çš„ä¼˜åŠ¿ã€‚äºŒè€…éƒ½æ˜¯O(n^2^)çš„å¤æ‚åº¦ï¼ŒJarvis Marchç®—æ³•çš„ä¼˜åŠ¿åœ¨äºå…¶çš„â€œ<strong>è¾“å‡ºæ•æ„Ÿæ€§ï¼ˆoutput sensitiveï¼‰</strong>â€ã€‚è€ƒè™‘ç‚¹é›†Sï¼Œå…±æœ‰nä¸ªç‚¹ï¼Œæ¥æ„é€ Sä¸Šçš„å‡¸åŒ…ã€‚</p><p>ä½•ä¸ºâ€œ<u>è¾“å‡ºæ•æ„Ÿæ€§</u>â€ï¼ŸJarvis Marchç®—æ³•æ¯æ¬¡æ–°åŠ å…¥ä¸€æ¡è¾¹éƒ½ä¼šè€—è´¹nçš„å¤æ‚åº¦ï¼Œä½†æ˜¯æ„é€ è¿‡ç¨‹ä¸€å…±ä¼šåŠ å…¥çš„è¾¹æ•°å¾€å¾€æ¯”nå°‘ã€‚å¦‚ä¸‹å›¾ï¼ˆè®¾n = 7ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20180206002208800" alt="img"></p><p>åœ¨éé€€åŒ–ä¸ºå…±çº¿çš„å‰æä¸‹ï¼Œæœ€å¥½æƒ…å†µä¸ºåªåŠ å…¥3æ¡è¾¹ï¼ˆå¤æ‚åº¦ä¸ºO(3n)ï¼‰ï¼Œæœ€åæƒ…å†µä¸ºæ‰€æœ‰ç‚¹éƒ½æ˜¯æç‚¹ï¼ŒåŠ å…¥n-1æ¡è¾¹ï¼ˆå¤æ‚åº¦ä¸ºO(n^2^)ï¼‰ã€‚å®é™…æƒ…å†µä¸­æœ€åæƒ…å†µå‡ºç°çš„å‡ ç‡å¾ˆå°ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæŒ‡æ ‡hæ¥è¡¡é‡å‡¸åŒ…çš„æè¾¹æ•°ï¼ˆthe size of convex hullï¼‰ï¼š<br>$$<br>h = |CH(S)|<br>$$<br>Jarvis Marchç®—æ³•ç®—æ³•çš„å¤æ‚åº¦<strong>æ›´å‡†ç¡®çš„è¡¨ç¤ºä¸ºO(nh)ã€‚</strong>håˆç”±æœ€ç»ˆè¾“å‡ºç»“æœï¼Œå³å‡¸åŒ…æœ¬èº«æ¥å†³å®šï¼Œè¾“å‡ºç»“æœå†³å®šäº†æ„é€ è¿‡ç¨‹çš„å¤æ‚åº¦ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œè¾“å‡ºæ•æ„Ÿæ€§â€ã€‚è¿™ç§ç±»å‹çš„ç®—æ³•åˆè¢«ç§°ä¸ºoutput sensitive algorithmã€‚è¿™ç§ç‰¹æ€§åœ¨å…¶å®ƒå‡¸åŒ…ç®—æ³•ä¸­ä¹Ÿä¼šä½“ç°ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å›é¡¾å‡¸åŒ…æ„é€ ç®—æ³•ï¼šæç‚¹æ³•ã€æè¾¹æ³•å’Œå¢é‡æ„é€ æ³•ï¼Œå…¶å¤æ‚åº¦åˆ†åˆ«ä¸ºO(n^4^)ã€O(n^3^)å’ŒO(n^2^)ï¼Œæ•ˆç‡ç»è¿‡ä¼˜åŒ–å·²ç»å¤§å¤§æé«˜äº†ã€‚æ¥ä¸‹æ¥å¼•å…¥ä¸€ç§æ–°çš„ç®—æ³•â€”â€”Jarvis Marchï¼Œå…¶å¤æ‚åº¦ä¹Ÿæ˜¯O(n^2^)ï¼Œä½†æ˜¯ç›¸è¾ƒäºå¢é‡æ„é€ åœ¨æœ€å¥½æƒ…å†µä¸‹æ•ˆç‡æ˜¯è¾ƒé«˜çš„ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="å‡¸åŒ…" scheme="https://www.longlongqin.top/tags/%E5%87%B8%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>æ„é€ å‡¸åŒ…-å¢é‡æ„é€ æ³•</title>
    <link href="https://www.longlongqin.top/archives/7c53.html"/>
    <id>https://www.longlongqin.top/archives/7c53.html</id>
    <published>2020-03-14T09:15:07.000Z</published>
    <updated>2020-03-17T08:35:10.173Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸Šé¢çš„æç‚¹æ³•å’Œæè¾¹æ³•çš„å¤æ‚åº¦åˆ†åˆ«æ˜¯O(n^4^)å’ŒO(n^3^)ï¼Œå¦‚æœç‚¹é›†Sçš„è§„æ¨¡æ¯”è¾ƒå¤§çš„è¯ï¼Œè¿™ä¸¤ç§æ–¹æ³•å°±å¤ªæ…¢è¾½ã€‚</p><a id="more"></a><p>åœ¨å¼•å…¥æ–°ç®—æ³•ä¹‹å‰é¦–å…ˆæ¥å›é¡¾ä¸€ä¸‹ç»å…¸çš„ç®—æ³•æ€æƒ³ï¼šå‡æ²»ï¼ˆdecrease and conquerï¼‰ï¼Œæ³¨æ„ä¸æ˜¯åˆ†æ²»ï¼ˆdivided and conquerï¼‰ï¼ŒäºŒè€…<a href="https://www.geeksforgeeks.org/decrease-and-conquer/" target="_blank" rel="noopener">ç¨æœ‰åŒºåˆ«</a>ã€‚ç®€å•æ¥è®²å°±æ˜¯å°†é—®é¢˜åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªç®€å•çš„å°é—®é¢˜ï¼Œå‡è€Œæ²»ä¹‹ï¼Œé€ä¸ªæ±‚è§£ï¼Œæœ€ç»ˆå°±èƒ½å¾—åˆ°æ•´ä¸ªé—®é¢˜çš„è§£ã€‚</p><p>å‡æ²»æ³•çš„ç»å…¸ä¾‹å­å°±æ˜¯æ’å…¥æ’åºï¼ˆinsertion sortï¼‰ã€‚æ’å…¥æ’åºçš„è¿‡ç¨‹å¯ä»¥å½’ç»“æˆä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200315172527.png" alt="img"></p><p>æ’åºçš„è¿‡ç¨‹ä¸­å°†åºåˆ—åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå·²æ’åºéƒ¨åˆ†ï¼ˆsortedï¼‰å’Œæœªæ’åºéƒ¨åˆ†ï¼ˆunsortedï¼‰ã€‚æ¯æ¬¡æ’åºéƒ½æ˜¯ä»unsortedä¸­æ‹¿å‡ºä¸€ä¸ªå…ƒç´ ï¼Œé€šè¿‡ä¸€æ¬¡<strong>é¡ºåºæŸ¥æ‰¾</strong>è¿‡ç¨‹åœ¨sortedéƒ¨åˆ†ä¸­æ‰¾åˆ°ä½ç½®å¹¶æ’å…¥å…¶ä¸­ã€‚</p><p>æ•´ä¸ªæ’å…¥æ’åºçš„è¿‡ç¨‹å°±æ˜¯é€ä¸ªå…ƒç´ çš„å»â€œèš•é£Ÿâ€unsortedéƒ¨åˆ†çš„è¿‡ç¨‹ï¼Œè¿ç»­çš„è¿›è¡Œè¿™ä¸ªæ“ä½œå°±ä¼šå°†æ•´ä¸ªé—®é¢˜è§£å†³ã€‚è¿™ç§å°†å¤§é—®é¢˜åˆ†è§£æˆå°é—®é¢˜çš„å‡æ²»è¿‡ç¨‹ï¼Œåˆè¢«çœ‹æˆä¸€ç§é€’å¢çš„ã€å¢é‡å¼çš„ç­–ç•¥ï¼ˆincremental strategyï¼‰ã€‚è¿™ç§æ€æƒ³ä¸ºè§£å†³å‡¸åŒ…é—®é¢˜æä¾›äº†æ–°çš„æ€è·¯ï¼šä»é€ä¸ªæ’å…¥æ–°ç‚¹çš„è§’åº¦æ„é€ å‡¸åŒ…ã€‚</p><p>å…¸å‹æµç¨‹å¦‚ä¸‹å›¾ï¼ˆæ ‡è¯†ä¸ºï¼šæç‚¹/æ•´ä½“è§„æ¨¡ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200311222412367.png" alt="image-20200311222412367"></p><p>æ’å…¥æ–°çš„ç‚¹å¯èƒ½çš„æƒ…å†µæœ‰ï¼š</p><blockquote><ul><li>æ–°ç‚¹å¯¹å‡¸åŒ…æœ‰â€œè´¡çŒ®â€ï¼Œä¾‹å¦‚5/5â†’6/6ï¼Œ6/6â†’7/7ï¼›</li><li>æ–°ç‚¹ä¹Ÿæœ‰å¯èƒ½æ²¡æœ‰â€œè´¡çŒ®â€ï¼Œä¾‹å¦‚7/7â†’7/8ï¼›</li><li>è¿˜æœ‰å¯èƒ½ä½¿åŸå…ˆæœ‰â€œè´¡çŒ®â€çš„ç‚¹å¤±æ•ˆï¼Œæç‚¹æ•°é‡å‡å°‘ï¼Œä¾‹å¦‚7/8â†’6/9ã€‚<br>é‚£ä¹ˆå¦‚ä½•å¯¹ä¸åŒæƒ…å†µè¿›è¡Œå¤„ç†å‘¢ï¼Ÿ</li></ul></blockquote><h3 id="ç¡®å®šæ–°ç‚¹ä¸ç°æœ‰å‡¸åŒ…çš„å…³ç³»-in-convex-polygon-test"><a href="#ç¡®å®šæ–°ç‚¹ä¸ç°æœ‰å‡¸åŒ…çš„å…³ç³»-in-convex-polygon-test" class="headerlink" title="ç¡®å®šæ–°ç‚¹ä¸ç°æœ‰å‡¸åŒ…çš„å…³ç³»~in-convex-polygon test"></a>ç¡®å®šæ–°ç‚¹ä¸ç°æœ‰å‡¸åŒ…çš„å…³ç³»~in-convex-polygon test</h3><p>æ„é€ è¿‡ç¨‹çš„æ ¸å¿ƒç®—æ³•åº”è¯¥æ˜¯ï¼š<strong>åˆ¤å®šå¾…å®šç‚¹æ˜¯å¦ä½äºæŸå¤šè¾¹å½¢å†…éƒ¨ï¼ˆin-convex-polygon testï¼‰</strong>ã€‚å†çœ‹ä¸Šå›¾æµç¨‹ï¼Œå®é™…ä¸Šæ¯æ­¥çš„æ ¸å¿ƒå°±æ˜¯åˆ¤æ–­ç‚¹ä½äºå¤šè¾¹å½¢å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ï¼Œè‹¥è½åœ¨å¤–éƒ¨ï¼Œåˆ™æ–°æ’å…¥çš„ç‚¹å°±æ˜¯ä¸‹ä¸€ä¸ªæç‚¹ï¼Œå¦åˆ™èˆå¼ƒã€‚</p><p>è€ƒè™‘åŸºæœ¬æƒ…å†µï¼Œç»™å®šä¸€ä¸ªç‚¹å’Œä¸€ä¸ªå¤šè¾¹å½¢ï¼Œå¦‚ä½•é«˜æ•ˆåˆ¤æ–­è¯¥ç‚¹ä¸å¤šè¾¹å½¢çš„ä½ç½®å…³ç³»å‘¢ï¼Ÿ</p><ul><li><p>ä¸€ç§æ€è·¯æ˜¯ï¼šæˆ‘ä»¬å¯ä»¥å…ˆå¯¹å¤šè¾¹å½¢è¿›è¡Œä¸€ä¸ªâ€œ<strong>é¢„å¤„ç†</strong>â€ï¼Œç»™æ¯ä¸ªç‚¹æŒ‰åºç¼–å·ï¼Œç±»æ¯”<strong>æœ‰åºå‘é‡äºŒåˆ†æŸ¥æ‰¾</strong>çš„æ€æƒ³ï¼Œæ¥é€æ­¥ç¼©å°è§„æ¨¡ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/v2-3e18e3822557820d852899d5c503f62a_720w.jpg" alt="img"></p><p>é¦–å…ˆä»»é€‰ä¸€ç‚¹ä¸ºåŸºå‡†ç‚¹ï¼ˆè“è‰²ç‚¹ï¼‰ï¼Œç„¶åç”¨äºŒåˆ†æ³•é€‰å–å…¶ä½™ç‚¹çš„â€œä¸­ç‚¹â€œï¼ˆé¢„å¤„ç†å·²ç»ä¸ºæ‰€æœ‰ç‚¹æ’äº†åºï¼‰ï¼Œç„¶ååˆ¤æ–­åŸºå‡†ç‚¹åˆ°ç»ˆç‚¹çš„æœ‰å‘ç›´çº¿ä¸å¾…å®šç‚¹çš„ä½ç½®å…³ç³»<strong>ï¼ˆto-left testï¼‰</strong>ã€‚ç„¶åå¯å°†æœç´¢èŒƒå›´å‡åŠï¼Œåå¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æœ€åé€€åŒ–ä¸ºå¹³å‡¡æƒ…å†µï¼šä¸‰è§’å½¢ä¸ç‚¹çš„ä½ç½®å…³ç³»<strong>ï¼ˆin-triangle testï¼‰</strong>ã€‚</p></li></ul><p>åˆ†æä¸€ä¸‹ç®—æ³•çš„æ•´ä½“å¤æ‚åº¦ï¼šæ•´ä¸ªç®—æ³•å…±log(n)æ­¥ï¼Œæ¯æ­¥çš„to-left testæˆ–in-triangle testéƒ½ä¸ºå¸¸æ•°æˆæœ¬ï¼Œåˆ™æ•´ä½“å¤æ‚åº¦ä¸ºlog(n)ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬ä¼¼ä¹å¾—åˆ°äº†ä¸€ä¸ªlog(n)çš„â€œé«˜æ•ˆâ€ç®—æ³•ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•çœŸçš„å¯è¡Œå—ï¼Ÿ</p><blockquote><p>æ³¨æ„ï¼Œæ¯æ­¥éƒ½ä¼šå°†åŸå‡¸åŒ…è§„æ¨¡å‡åŠï¼Œä¹Ÿå°±æ˜¯è¯´å‡¸åŒ…æ˜¯<strong>åŠ¨æ€çš„</strong>ï¼Œéšæ—¶å¯èƒ½å˜åŒ–ã€‚è¿™ç§æ–¹æ³•å’Œæç‚¹æ³•æˆ–æè¾¹æ³•ä¸­é™æ€æŸ¥æ‰¾çš„æƒ…å†µæ˜¯å®Œå…¨ä¸åŒçš„ã€‚</p><p>ç±»æ¯”æ’å…¥æ’åºçš„è¿‡ç¨‹æ¥è§£é‡Šè¿™ä¸ªé—®é¢˜ã€‚ä¸ºä½•æ’å…¥æ’åºçš„å¤æ‚åº¦æ˜¯n^2^è€Œénlog(n)ï¼Ÿæ¯æ¬¡æ’å…¥æ—¶ï¼Œæ—¢ç„¶sortedéƒ¨åˆ†å·²ç»æœ‰åºï¼Œä¸ºä½•ä¸ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥å–ä»£é¡ºåºæŸ¥æ‰¾ï¼ˆå¤æ‚åº¦ç”±nå˜ä¸ºlog(n)ï¼‰ï¼Ÿè¿™ä¸å¾—ä¸è€ƒè™‘sortedéƒ¨åˆ†çš„åŠ¨æ€æ€§ï¼Œæ¯æ¬¡æ’å…¥åå®ƒçš„ç»“æ„éƒ½ä¼šæ”¹å˜ï¼Œè€ŒäºŒåˆ†æŸ¥æ‰¾å¿…é¡»åœ¨é™æ€ç»“æ„ä¸­å®ç°ã€‚å½“ç„¶å¯ä»¥ä½¿ç”¨std::vectorè¿™ç±»æ”¯æŒæŒ‰ç§©è®¿é—®ï¼ˆcall by rankï¼‰çš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯æ’å…¥æ—¶ç»´æŠ¤vectorçš„æˆæœ¬ä¾æ—§æ˜¯çº¿æ€§å¤æ‚åº¦ã€‚å› æ­¤æ’å…¥æ’åºçš„æ€»ä½“å¤æ‚åº¦æ˜¯n^2^ã€‚è¦å¤„ç†çš„å‡¸åŒ…ä¸æ’å…¥æ’åºä¸­sortedéƒ¨åˆ†æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œå®ƒä»¬éƒ½ä¸æ˜¯é™æ€ä¸å˜çš„ç»“æ„ï¼Œè€Œè¦éšç€ç®—æ³•æ‰§è¡Œè€Œä¸æ–­å˜åŒ–ã€‚è‹¥è¦æ¯æ¬¡åœ¨log(n)æˆæœ¬ä¸‹å®Œæˆå¾…å®šç‚¹çš„in-convex-polygon testï¼Œå¿…é¡»å°†å‡¸åŒ…å­˜å‚¨ä¸ºç±»ä¼¼vectorçš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯æ¯æ¬¡å‘è¿™ç§æ•°æ®ç»“æ„æ’å…¥æ–°ç‚¹çš„æˆæœ¬ä¾æ—§æ˜¯çº¿æ€§çš„ã€‚å› æ­¤å¯¹å‡¸åŒ…è¿›è¡Œçš„æ‰€è°“â€œé¢„å¤„ç†â€æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œè¿™ç§å‡æ²»ç­–ç•¥ç®—æ³•å¤æ‚åº¦æœ€ä½åº”è¯¥ä¸ºO(n^2^)ã€‚</p></blockquote><p>åˆ°ç°åœ¨é—®é¢˜ä¾æ—§æ²¡æœ‰è§£å†³ï¼Œç©¶ç«Ÿå¦‚ä½•ç”¨è¿™ç§å¢é‡å¼çš„ç­–ç•¥æ¥æ„é€ å‡¸åŒ…ï¼Ÿå…¶å®å¤æ‚é—®é¢˜ä¸­æœ€æœ´ç´ ã€æœ€åŸºæœ¬çš„æ–¹æ³•åè€Œæ˜¯æœ€æœ‰æ•ˆçš„ã€‚</p><p>==in-convex-polygon testæœ€åŸºæœ¬çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿå°±æ˜¯æŒ‰ä¸€å®šæ–¹å‘ï¼ˆçº¦å®šä¸ºé€†æ—¶é’ˆï¼‰å‡¸åŒ…çš„æ¯æ¡è¾¹å’Œå¾…å®šç‚¹åš<strong>to-left test</strong>ï¼Œä¸€æ—¦æœ‰ä¸€æ¬¡testä¸ºfalseå°±èƒ½æ–­å®šç‚¹åœ¨å‡¸åŒ…å¤–é¢ã€‚è¿™å®é™…ä¸Šå°±æ˜¯å°†in-triangle testæ¨å¹¿å¤šè¾¹å½¢çš„æƒ…å†µã€‚å› æ­¤æ¯æ¬¡in-convex-polygon testçš„æˆæœ¬å°±ä¼šå˜æˆå½“å‰å‡¸åŒ…çš„è§„æ¨¡ï¼Œä¹Ÿå°±æ˜¯nã€‚==å¯¹äºæ¯ä¸ªæ–°ç‚¹åšä¸€æ¬¡in-convex-polygon testï¼Œæ„é€ ç®—æ³•çš„æ•´ä½“å¤æ‚åº¦å°±æ˜¯O(n^2^)ã€‚ç®—æ³•çš„å¤æ‚åº¦ä»æè¾¹æ³•çš„O(n^3^)åˆä¸‹é™äº†ä¸€ä¸ªæ•°é‡çº§ã€‚</p><p><strong>å…¶å®å¢é‡ç®—æ³•çš„æ•´ä¸ªæ€è·¯å¯ä»¥åˆ†æˆä¸¤å—ï¼š</strong></p><ul><li><strong>1ã€å¦‚ä½•åˆ¤æ–­å‡¸åŒ…ä¸æ–°ç‚¹çš„ä½ç½®å…³ç³»ï¼ˆin-convex-polygon testï¼‰</strong></li><li><strong>2ã€å¦‚ä½•å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹</strong></li></ul><p>ä¸Šé¢çš„æ–¹æ³•å·²ç»è§£å†³ï¼ˆé»„è‰²éƒ¨åˆ†ï¼‰äº†ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚ç¬¬äºŒä¸ªé—®é¢˜çœ‹ä¸‹é¢éƒ¨åˆ†ï¼š</p><h3 id="å¦‚ä½•å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹-support-line"><a href="#å¦‚ä½•å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹-support-line" class="headerlink" title="å¦‚ä½•å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹~support-line"></a>å¦‚ä½•å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹~support-line</h3><p>ç°åœ¨æ¥è®¨è®ºå¦‚ä½•å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹ï¼š</p><p>æ¯”å¦‚ä¸‹é¢è¿™ä¸ªç‚¹ï¼Œåº”è¯¥å¦‚ä½•æ’å…¥å‡¸åŒ…ä¹‹ä¸­å‘¢ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200311230823679.png" alt="æ–°ç‚¹å‡†å¤‡æ’å…¥ç°æœ‰å‡¸åŒ…"></p><p><strong>æ’å…¥è¿‡ç¨‹</strong>ï¼šå°†æ–°ç‚¹xæ’å…¥åŸå‡¸åŒ…çš„è¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å¯»æ‰¾ä¸¤ä¸ªè¿æ¥ç‚¹så’Œtï¼Œå°†xå’Œtã€såˆ†åˆ«è¿æ¥å¾—åˆ°æ–°çš„å‡¸åŒ…ã€‚æ³¨æ„tå’Œsä¸¤ç‚¹å°†æ•´ä¸ªåŸå‡¸åŒ…è¾¹ç•Œåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šstå’Œtsä¸¤ä¸ªæœ‰å‘æ®µã€‚æ„é€ æ–°å‡¸åŒ…å°±è¦ä¿ç•™è¿œç«¯stã€èˆå¼ƒè¿‘ç«¯tsã€‚å–ä»£è¿‘ç«¯tsçš„ä¸¤æ¡çº¿å°±æ˜¯xå’Œtçš„è¿çº¿xtå’Œxsï¼Œè¢«ç§°ä¸º<strong>åˆ‡çº¿ï¼ˆtangentï¼‰</strong>æˆ–è€…<strong>support lineï¼ˆæ”¯æ’‘çº¿ï¼‰</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/v2-8afbf4ebfa808eec9ffff8c111ae6465_720w.jpg" alt="img"></p><p><strong>é‚£å¦‚ä½•æŸ¥æ‰¾tã€sè¿™ä¸¤ä¸ªç‚¹å‘¢ï¼Ÿ</strong></p><blockquote><p>æˆ‘ä»¬åœ¨å‡¸åŒ…ä¸Šä»»å–ä¸€ç‚¹vï¼ŒæŒ‰<u>é€†æ—¶é’ˆ</u>æ–¹å‘vç‚¹ä¼šæœ‰ä¸€ä¸ªç›´æ¥å‰é©±ç‚¹å’Œç›´æ¥åç»§ç‚¹ã€‚è€ƒå¯Ÿæœ‰å‘ç›´çº¿xvä¸ç‚¹vç›´æ¥å‰é©±å’Œç›´æ¥åç»§çš„ä½ç½®å…³ç³»ï¼ˆä¸¤æ¬¡to left testï¼‰ï¼Œè®°å½•ä¸ºä¸€ä¸ª<strong>patternè¡¨</strong>ã€‚</p><p>ç»“æœæ— éæ˜¯å››ç§æƒ…å†µï¼švçš„ç›´æ¥å‰é©±å’Œç›´æ¥åç»§ç›¸å¯¹äºæœ‰å‘ç›´çº¿xvçš„ä½ç½®æ˜¯RLï¼ŒLRï¼ŒLLï¼ŒRRã€‚ä¾‹å¦‚ä¸Šå›¾é»„è‰²ç‚¹vï¼Œæ˜¯Rå’ŒLï¼›è“è‰²ç‚¹våˆ†åˆ«æ˜¯Lå’ŒRã€‚å®é™…ä¸Šå‡¸åŒ…è¾¹ç•Œstä¸Šæ‰€æœ‰ç‚¹çš„patternéƒ½ä¸ºRLï¼Œtsä¸Šæ‰€æœ‰ç‚¹çš„patternéƒ½ä¸ºLRã€‚å…³é”®ç‚¹åœ¨äºï¼šç‚¹Sçš„patternæ˜¯LLï¼Œç‚¹tçš„patternä¸ºRRã€‚</p></blockquote><p>å› æ­¤å¯¹å‡¸åŒ…è¾¹ç•Œæ¯ä¸ªç‚¹åš<strong>ä¸¤æ¬¡to left test</strong>ï¼Œåˆ¤æ–­å…¶patternå°±å¯æ‰¾å‡ºså’Œtï¼ŒèŠ±è´¹æ—¶é—´æˆæœ¬ä¸ºå¸¸æ•°ã€‚</p><h3 id="incremental-construction"><a href="#incremental-construction" class="headerlink" title="incremental construction"></a>incremental construction</h3><p>å†æ¥å›é¡¾æ•´ä¸ªå‡¸åŒ…æ„é€ ç®—æ³•çš„ä¸¤å¤§é—®é¢˜ï¼šin-convex-polygon testå’Œæ’å…¥æ–°ç‚¹ã€‚åˆ†å¼€è€ƒè™‘åªæ˜¯ä¸ºäº†å°†æ€è·¯ç®€åŒ–ï¼Œå®é™…ä¸Šè¿™ä¸¤ä¸ªé—®é¢˜å¯ä»¥å¥—ç”¨ä¸€ä¸ªç®—æ³•ï¼ŒåŒæ—¶æ¥è§£å†³ã€‚</p><p>å…·ä½“åšæ³•å°±æ˜¯ï¼šå¯¹äºæ¯ä¸ªå¾…å®šç‚¹xï¼Œ<u>ä¸å¿…ç‰¹æ„å»è€ƒè™‘å®ƒä¸å‡¸åŒ…çš„ä½ç½®å…³ç³»</u>ï¼Œ<u>è€Œæ˜¯éå†å‡¸åŒ…ä¸Šæ¯ä¸€ä¸ªç‚¹</u>ã€‚</p><blockquote><p>å¯¹äºå‡¸åŒ…<strong>è¾¹ç•Œ</strong>ä¸Šçš„æ¯ä¸€ä¸ªç‚¹ï¼Œæˆ‘ä»¬éƒ½èƒ½é€šè¿‡ä¸¤æ¬¡to left testè¿…é€Ÿåˆ¤æ–­å‡ºpatternã€‚</p><p>å¯¹äºxä½äºå‡¸åŒ…<strong>å¤–éƒ¨</strong>çš„æƒ…å†µï¼Œç»è¿‡éå†å‡¸åŒ…çš„ç‚¹ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å¾—åˆ°så’Œtçš„ä½ç½®ï¼Œå¾—åˆ°ä¸¤æ¡support lineï¼Œä»è€Œæ„é€ å‡ºæ–°çš„å‡¸åŒ…ï¼›</p><p>è€Œå¯¹äºxä½äºå‡¸åŒ…<strong>å†…éƒ¨</strong>çš„æƒ…å†µï¼Œå‡¸åŒ…è¾¹ç•Œæ¯ä¸ªç‚¹éƒ½ä¸å¯èƒ½å‡ºç°RRæˆ–LLçš„æƒ…å†µï¼Œç›´æ¥èˆå¼ƒxå³å¯ã€‚</p></blockquote><p>æ¯æ¬¡éå†å‡¸åŒ…è¾¹ç•Œç‚¹çš„å¤æ‚åº¦ä¸ºO(n)ï¼Œæ•´ä¸ªæ„é€ è¿‡ç¨‹è¦å¢é‡å¼çš„é€ç‚¹è€ƒå¯Ÿï¼Œè‡ªç„¶å¾—åˆ°äº†ä¸€ä¸ª<strong>O(n^2^)</strong>çš„incremental constructionç®—æ³•ã€‚</p><p>è¿™å°±æ˜¯æ‰€è°“å¢é‡æ„é€ æ³•æ¥æ„é€ å‡¸åŒ…çš„è¿‡ç¨‹ã€‚æ„é€ è¿‡ç¨‹å·§å¦™çš„é¿å¼€äº†ç‰¹æ®Šå¤„ç†è¯¸å¦‚5/5â†’6/6ã€7/7â†’7/8ã€7/8â†’6/9ç­‰å¤æ‚æƒ…å†µï¼Œé‡‡ç”¨ä¸€è‡´çš„æ€è·¯é€ä¸ªè€ƒå¯Ÿâ€œæ–°ç‚¹â€ï¼Œæœ€ç»ˆå®Œæˆå‡¸åŒ…çš„æ„é€ ã€‚</p><h3 id="ä»£ç éƒ¨åˆ†"><a href="#ä»£ç éƒ¨åˆ†" class="headerlink" title="ä»£ç éƒ¨åˆ†"></a>ä»£ç éƒ¨åˆ†</h3><p>å¾…å†™â€¦â€¦..</p><h2 id="å°ç»“ï¼š"><a href="#å°ç»“ï¼š" class="headerlink" title="å°ç»“ï¼š"></a>å°ç»“ï¼š</h2><p><strong>å…¶å®å¢é‡ç®—æ³•çš„æ•´ä¸ªæ€è·¯å¯ä»¥åˆ†æˆä¸¤å—ï¼š</strong></p><ul><li><strong>1ã€å¦‚ä½•åˆ¤æ–­å‡¸åŒ…ä¸æ–°ç‚¹çš„ä½ç½®å…³ç³»ï¼ˆin-convex-polygon testï¼‰</strong></li><li><strong>2ã€å¦‚ä½•å‘å‡¸åŒ…æ’å…¥æ–°ç‚¹</strong></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ä¸Šé¢çš„æç‚¹æ³•å’Œæè¾¹æ³•çš„å¤æ‚åº¦åˆ†åˆ«æ˜¯O(n^4^)å’ŒO(n^3^)ï¼Œå¦‚æœç‚¹é›†Sçš„è§„æ¨¡æ¯”è¾ƒå¤§çš„è¯ï¼Œè¿™ä¸¤ç§æ–¹æ³•å°±å¤ªæ…¢è¾½ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="å‡¸åŒ…" scheme="https://www.longlongqin.top/tags/%E5%87%B8%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>Letâ€™s Build A Simple Interpreter 7</title>
    <link href="https://www.longlongqin.top/archives/5a757a52.html"/>
    <id>https://www.longlongqin.top/archives/5a757a52.html</id>
    <published>2020-03-13T13:55:47.000Z</published>
    <updated>2020-03-18T13:36:39.300Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰çš„é‚£å‡ å°ç»“ï¼Œæˆ‘ä»¬éƒ½æ˜¯æŠŠinterpreterçš„ä»£ç å’Œparserçš„ä»£ç æ··åœ¨ä¸€èµ·ï¼Œè€Œä¸”interpreteråœ¨parserè¯†åˆ«å‡ºä¸€ä¸ªå¦‚åŠ å‡ä¹˜é™¤ä¹‹ç±» çš„ç‰¹å®šçš„è¯­è¨€ç»“æ„(language construct)åï¼Œå°±ä¼šç«‹åˆ»å¯¹å®ƒè¿›è¡Œæ±‚å€¼ã€‚è¿™ç§ interpreter è¢«ç§°ä¸º <strong>è¯­æ³•å¯¼å‘è§£é‡Šå™¨</strong>(syntax-directed interpreter)ã€‚</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://ruslanspivak.com/lsbasi-part7/" target="_blank" rel="noopener">https://ruslanspivak.com/lsbasi-part7/</a></p><p>ä¹‹å‰çš„é‚£å‡ å°ç»“ï¼Œæˆ‘ä»¬éƒ½æ˜¯æŠŠinterpreterçš„ä»£ç å’Œparserçš„ä»£ç æ··åœ¨ä¸€èµ·ï¼Œè€Œä¸”interpreteråœ¨parserè¯†åˆ«å‡ºä¸€ä¸ªå¦‚åŠ å‡ä¹˜é™¤ä¹‹ç±» çš„ç‰¹å®šçš„è¯­è¨€ç»“æ„(language construct)åï¼Œå°±ä¼šç«‹åˆ»å¯¹å®ƒè¿›è¡Œæ±‚å€¼ã€‚è¿™ç§ interpreter è¢«ç§°ä¸º <strong>è¯­æ³•å¯¼å‘è§£é‡Šå™¨</strong>(syntax-directed interpreter)ã€‚</p><blockquote><p>ä»–ä»¬é€šå¸¸åœ¨è¾“ å…¥ä¸Šåšä¸€ä¸ª pass ä¸”åªé€‚åˆåŸºç¡€çš„è¯­è¨€åº”ç”¨ã€‚</p></blockquote><p>ä¸ºäº†åˆ†ææ›´å¤æ‚çš„ç¼–ç¨‹è¯­è¨€ Pascal çš„ç»“æ„ï¼Œ æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ª <strong>ä¸­é—´è¡¨ç¤º</strong> (intermediate representation, <strong>IR)</strong>ã€‚</p><blockquote><p>parser ä¼š è´Ÿè´£æ„å»º IR</p><p>interpreter ä¼šç”¨æ¥è§£é‡Šç”± IR æ‰€ä»£è¡¨çš„è¾“å…¥ã€‚</p></blockquote><p>äº‹å®è¯æ˜æ ‘æ˜¯ä¸€ä¸ªè¡¨ç¤º IR éå¸¸åˆé€‚çš„æ•°æ®ç»“æ„ã€‚å…³äºæ•°çš„ä¸€äº›æœ¯è¯­terminologyï¼š</p><ul><li>æ ‘æ˜¯ä¸€ä¸ªåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç»“ç‚¹ç»„æˆçš„å±‚æ¬¡æ•°æ®ç»“æ„ã€‚</li><li>æ ‘æœ‰ä¸€ä¸ª<strong>æ ¹ç»“ç‚¹</strong>ï¼Œå°±æ˜¯é¡¶éƒ¨ç»“ç‚¹ã€‚</li><li>é™¤æ ¹ç»“ç‚¹å¤–çš„æ‰€æœ‰ç»“ç‚¹æœ‰å”¯ä¸€ ä¸€ä¸ª<strong>çˆ¶ç»“ç‚¹</strong>ã€‚</li><li>ä¸‹å›¾ä¸­ç»“ç‚¹ä¸º*çš„æ˜¯ä¸€ä¸ªçˆ¶ç»“ç‚¹ã€‚ç»“ç‚¹ä¸º 2 å’Œ 7 çš„æ˜¯å®ƒçš„å­ç»“ç‚¹ï¼›å­ç»“ç‚¹ä»å·¦åˆ°å³æ’åºã€‚</li><li>æ²¡æœ‰å­ç»“ç‚¹çš„ç»“ç‚¹ç§°ä¸º<strong>å¶å­ç»“ç‚¹</strong>ã€‚</li><li>æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå­ç»“ç‚¹çš„éæ ¹ç»“ç‚¹è¢«ç§°ä¸º<strong>ä¸­é—´ç»“ç‚¹</strong>ã€‚</li><li>å­ç»“ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®Œå…¨å­æ ‘ã€‚ä¸‹å›¾ä¸­ç»“ç‚¹ï¼‹çš„å·¦å­æ ‘ï¼ˆç»“ç‚¹ä¸º*ï¼‰å°±æ˜¯ä¸€ä¸ªæœ‰è‡ªå·±å­ç»“ç‚¹çš„ å®Œå…¨å­æ ‘ã€‚</li><li>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­æˆ‘ä»¬æŠŠæ ‘å€’è¿‡æ¥ç”»ï¼Œæ ¹ç»“ç‚¹åœ¨æœ€ä¸Šè¾¹ï¼Œåˆ†æå‘ä¸‹ç”Ÿé•¿ã€‚</li></ul><p>ä¸‹é¢æ˜¯è¡¨è¾¾å¼ 2 * 7 + 3 çš„å¸¦æœ‰è§£é‡Šçš„æ ‘å½¢è¡¨ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_tree_terminology.png" alt="lsbasi_part7_tree_terminology"></p><p>æœ¬ç³»åˆ—ä¸­æˆ‘ä»¬ä¼šç”¨åˆ°çš„ IR è¢«ç§°ä¸º <strong>æŠ½è±¡è¯­æ³•æ ‘</strong> (abstract-syntax tree, AST)ã€‚ä½†åœ¨æ·± å…¥äº†è§£ AST ä¹‹å‰è®©æˆ‘ä»¬ç®€å•èŠèŠ <strong>è§£ææ ‘</strong> (parse tree)ã€‚</p><blockquote><p>å°½ç®¡æˆ‘ä»¬ä¸ä¼šåœ¨è§£é‡Šå™¨å’Œç¼–è¯‘ å™¨ä¸­ç”¨åˆ°è§£ææ ‘ï¼Œä½†å®ƒä¼šé€šè¿‡å¯è§†åŒ– parser æ‰§è¡Œè½¨è¿¹çš„æ–¹æ³•ï¼ŒåŠ æ·±ä½ å¯¹ parser å¦‚ä½•è§£é‡Š è¾“å…¥çš„ç†è§£ã€‚æˆ‘ä»¬ä¹Ÿä¼šå°†å®ƒå’Œ AST åšæ¯”è¾ƒï¼Œæ¥è¡¨æ˜ä¸ºä»€ä¹ˆ AST æ¯”è§£ææ ‘æ›´é€‚åˆç”¨æ¥åš IRã€‚</p></blockquote><p>é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯è§£ææ ‘å‘¢ï¼Ÿ</p><ul><li>è§£ææ ‘ï¼ˆæœ‰æ—¶å«åš <strong>å…·ä½“è¯­æ³•æ ‘<em>concrete syntax tree</em></strong> ï¼‰æ˜¯ä¸€ä¸ªæ ¹æ®æˆ‘ä»¬çš„è¯­æ³•å®šä¹‰æ¥ è¡¨ç¤ºä¸€é—¨è¯­è¨€çš„å¥æ³•ç»“æ„çš„æ ‘å½¢ç»“æ„ã€‚å®ƒåŸºæœ¬ä¸Šå±•ç¤ºäº†ä½ çš„ parser å¦‚ä½•è¯†åˆ«è¯­è¨€ç»“æ„æˆ–è€…ï¼Œ æ¢å¥è¯è¯´ï¼Œå®ƒå±•ç¤ºäº†ä½ è¯­æ³•çš„å¼€å§‹ç¬¦å·æ€ä¹ˆæ´¾ç”Ÿå‡ºè¯¥ç¼–ç¨‹è¯­è¨€ä¸­ä¸€ä¸ªç‰¹å®šçš„å­—ç¬¦ä¸²çš„ã€‚</li></ul><p>parser çš„è°ƒç”¨æ ˆéšå¼åœ°ä»£è¡¨äº†ä¸€ä¸ªè§£ææ ‘ï¼Œä¸”å½“parser åœ¨è¯•å›¾è¯†åˆ«ä¸€ä¸ªç‰¹å®šçš„è¯­è¨€ç»“æ„æ—¶ï¼Œè§£ææ ‘ å°±ä¼šè‡ªåŠ¨åœ°åœ¨å†…å­˜ä¸­æ„å»ºå‡ºæ¥ã€‚ä¸‹é¢æ˜¯è¡¨è¾¾å¼ 2 * 7 + 3 çš„è§£ææ ‘ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_parsetree_01.png" alt="lsbasi_part7_parsetree_01"></p><blockquote><p>åœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­å¯ä»¥çœ‹åˆ°ï¼š</p><ul><li>è§£ææ ‘è®°å½•äº† parser ç”¨æ¥è¯†åˆ«è¾“å…¥çš„ä¸€ç³»åˆ—è§„åˆ™ã€‚</li><li>è§£ææ ‘çš„æ ¹ç»“ç‚¹çš„æ ‡ç­¾æ˜¯è¯­æ³•çš„å¼€å§‹ç¬¦å·(start symbol)ã€‚</li><li>æ¯ä¸ªä¸­é—´ç»“ç‚¹è¡¨ç¤ºä¸€ä¸ªéç»ˆç»“ç¬¦(non-terminal)ï¼Œä»£è¡¨åº”ç”¨äº†ä¸€æ¡è¯­æ³•è§„åˆ™ï¼Œåƒæˆ‘ä»¬çš„æƒ…å†µé‡Œçš„ <code>expr</code>, <code>term</code>å’Œ <code>factor</code>.</li><li>æ¯ä¸ªå¶å­ç»“ç‚¹ä»£è¡¨äº†ä¸€ä¸ª token.</li></ul></blockquote><blockquote><p>æˆ‘ä»¬ä¸ä¼šæ‰‹åŠ¨æ„å»ºè§£ææ ‘ä¸”åœ¨æˆ‘ä»¬çš„è§£é‡Šå™¨ä¸­ç”¨åˆ°å®ƒï¼Œä½†è§£ææ ‘å¯ä»¥é€šè¿‡å¯è§†åŒ– è°ƒç”¨è¿‡ç¨‹å¸®åŠ©æˆ‘ä»¬ç†è§£ parser æ€ä¹ˆè§£é‡Šè¾“å…¥ã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ªåä¸º <a href="https://github.com/rspivak/lsbasi/blob/master/part7/python/genptdot.py" target="_blank" rel="noopener">genptdot.py</a> çš„å°åº”ç”¨ï¼ˆæˆ‘å¾ˆå¿«å†™å®Œç”¨æ¥å¸®åŠ©ä½ çš„ï¼‰ï¼Œæ¥æŸ¥çœ‹ä¸åŒçš„ ç®—æœ¯è¡¨è¾¾å¼çœ‹èµ·æ¥ä»€ä¹ˆæ ·ã€‚è¦ä½¿ç”¨è¿™ä¸ªåº”ç”¨ä½ é¦–å…ˆéœ€è¦å®‰è£… <a href="http://graphviz.org/" target="_blank" rel="noopener">Graphviz</a>åŒ…ï¼Œç„¶åè¿è¡Œä¸‹é¢çš„ å‘½ä»¤ï¼Œä½ å¯ä»¥æ‰“å¼€ç”Ÿæˆçš„å›¾ç‰‡æ–‡ä»¶ parsetree.png æŸ¥çœ‹ä½ ä»å‘½ä»¤è¡Œä¼ å…¥çš„è¡¨è¾¾å¼çš„è§£ææ ‘ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python genptdot.py <span class="string">"14 + 2 * 3 - 6 / 2"</span> &gt; \</span><br><span class="line">  parsetree.dot &amp;&amp; dot -Tpng -o parsetree.png parsetree.dot</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ç”±è¡¨è¾¾å¼ 14 + 2 * 3 - 6 / 2 ç”Ÿæˆçš„å›¾ç‰‡ parsetree.png:</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_genptdot_01.png" alt="lsbasi_part7_genptdot_01"></p></blockquote><h2 id="æŠ½è±¡è¯­æ³•æ ‘-AST"><a href="#æŠ½è±¡è¯­æ³•æ ‘-AST" class="headerlink" title="æŠ½è±¡è¯­æ³•æ ‘(AST)"></a>æŠ½è±¡è¯­æ³•æ ‘(AST)</h2><p>ç°åœ¨æˆ‘ä»¬æ¥èŠèŠ<strong>æŠ½è±¡è¯­æ³•æ ‘(AST)</strong>ã€‚å®ƒæ˜¯åœ¨ä½™ä¸‹çš„æ–‡ç« ä¸­ä¼šå¤§é‡ç”¨åˆ°çš„ä¸­é—´è¡¨ç¤º(IR)ã€‚å®ƒæ˜¯ æˆ‘ä»¬çš„è§£é‡Šå™¨å’Œæœªæ¥ç¼–è¯‘å™¨é¡¹ç›®çš„æ ¸å¿ƒæ•°æ®ç»“æ„ã€‚</p><p>è®©æˆ‘ä»¬ä»¥æŠŠè¡¨è¾¾å¼ 2 * 7 + 3 çš„ AST å’Œè§£ææ ‘æ”¾åœ¨ä¸€èµ·çœ‹æ¥å¼€å§‹æˆ‘ä»¬çš„è®¨è®ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_ast_01.png" alt="lsbasi_part7_ast_01"></p><p>ä»ä¸Šé¢çš„å›¾ç‰‡ä¸­å¯ä»¥çœ‹å‡ºï¼ŒAST æŠ“ä½äº†è¾“å…¥çš„ç²¾é«“ä¸”æ›´å°ã€‚</p><p><strong>AST å’Œè§£ææ ‘æœ€ä¸»è¦çš„åŒºåˆ«æœ‰</strong>ï¼š</p><blockquote><ul><li>AST ä½¿ç”¨æ“ä½œç¬¦/æ“ä½œ(operators/operations )ä½œä¸ºæ ¹ç»“ç‚¹ï¼Œæ“ä½œæ•°(operands)ä½œä¸ºå®ƒä»¬çš„å­ç»“ç‚¹ã€‚</li><li>ä¸åƒè§£ææ ‘ï¼ŒAST <strong>ä¸</strong>ä½¿ç”¨ä¸­é—´ç»“ç‚¹æ¥è¡¨ç¤ºè¯­æ³•è§„åˆ™ã€‚</li><li>AST å¹¶ä¸æŠŠçœŸå®å¥æ³•ä¸­çš„æ‰€æœ‰ç»“èŠ‚éƒ½è¡¨ç¤ºå‡ºæ¥ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒæ˜¯æŠ½è±¡çš„ï¼‰â”€â”€ä¾‹å¦‚ï¼Œæ²¡æœ‰ è§„åˆ™ç»“ç‚¹å’Œæ‹¬å·ã€‚</li><li>å¯¹äºç›¸åŒçš„è¯­è¨€ç»“æ„æ¥è¯´ï¼ŒAST ç›¸æ¯”äºè§£ææ ‘æ›´ç´§å‡‘ã€‚</li></ul></blockquote><p><strong>æŠ½è±¡è¯­æ³•æ ‘æ˜¯ä»€ä¹ˆ</strong>ï¼Ÿ</p><blockquote><p>æŠ½è±¡è¯­æ³•æ ‘(AST)æ˜¯è¡¨ç¤ºä¸€ä¸ªè¯­è¨€ç»“æ„çš„æŠ½è±¡å¥æ³•ç»“æ„çš„æ ‘å½¢è¡¨ç¤ºï¼Œå®ƒçš„ä¸­é—´ç»“ç‚¹å’Œæ ¹ç»“ç‚¹ä»£è¡¨äº†ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå­ç»“ç‚¹ä»£è¡¨äº†è¯¥æ“ä½œç¬¦çš„æ“ä½œæ•°ã€‚</p></blockquote><p>çœ‹ä¸€ä¸‹AST ä¸è§£ææ ‘å¯¹æ¯”ï¼Œæ˜¾ç°ä»–çš„ç´§å‡‘æ€§ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_ast_02.png" alt="lsbasi_part7_ast_02"></p><p><strong>å¦‚ä½•å°†æ“ä½œç¬¦çš„ä¼˜å…ˆçº§(precedence)ç¼–ç è¿› AST å‘¢ï¼Ÿ</strong></p><blockquote><p>ä¸ºäº†æŠŠæ“ä½œç¬¦ä¼˜å…ˆçº§ç¼–ç è¿› ASTï¼Œå³ï¼Œä¸ºäº†è¡¨ç¤ºâ€œX åœ¨ Y ä¹‹å‰å‘ç”Ÿâ€ä½ åªéœ€è¦åœ¨æ ‘ä¸­æŠŠ X æ”¾åœ¨ä½äº Y çš„ä½ç½®ã€‚ä½ åœ¨å‰é¢ çš„å›¾ç‰‡ä¸­å·²ç»è§è¿‡åˆ°äº†ã€‚</p><ul><li>ã€ä¾‹å­ã€‘ï¼šåœ¨ä¸‹é¢çš„å›¾ç‰‡ä¸­ï¼Œå·¦è¾¹æ˜¯è¡¨è¾¾å¼ 2 * 7 + 3 çš„ ASTã€‚è®©æˆ‘ä»¬ç”¨æ‹¬å·æŠŠ 7 + 3 å›´èµ·æ¥ä»¥æ”¹å˜ å®ƒçš„ä¼˜å…ˆçº§ã€‚åœ¨å³è¾¹æ˜¯ä¿®æ”¹åçš„è¡¨è¾¾å¼ 2 * (7 + 3) çš„ ASTï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_astprecedence_01.png" alt="lsbasi_part7_astprecedence_01"></p></blockquote><h3 id="ä»£ç å®ç°AST"><a href="#ä»£ç å®ç°AST" class="headerlink" title="ä»£ç å®ç°AST"></a>ä»£ç å®ç°AST</h3><p>å¥½äº†ï¼Œè®©æˆ‘ä»¬å†™äº›ä»£ç æ¥å®ç°ä¸åŒçš„ AST ç»“ç‚¹ç±» å¹¶ä¿®æ”¹æˆ‘ä»¬çš„ parser æ¥ç”ŸæˆåŒ…å«è¿™äº›ç»“ç‚¹çš„ AST æ ‘ï¼š</p><ul><li><p>é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªåŸºæœ¬ç»“ç‚¹ç±»å«åš ASTï¼Œå…¶ä»–ç±»ä¼šä»å®ƒç»§æ‰¿ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AST</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span> <span class="comment">#pass ä¸åšä»»ä½•äº‹æƒ…ï¼Œä¸€èˆ¬ç”¨åšå ä½è¯­å¥ã€‚å› ä¸ºå¦‚æœå®šä¹‰ä¸€ä¸ªç©ºå‡½æ•°ç¨‹åºä¼šæŠ¥é”™ï¼Œå½“ä½ æ²¡æœ‰æƒ³å¥½å‡½æ•°çš„å†…å®¹æ˜¯å¯ä»¥ç”¨ pass å¡«å……ï¼Œä½¿ç¨‹åºå¯ä»¥æ­£å¸¸è¿è¡Œã€‚</span></span><br></pre></td></tr></table></figure></li><li><p>å›å¿†ä¸€ä¸‹ AST è¡¨ç¤ºäº†<strong>æ“ä½œç¬¦-æ“ä½œæ•°</strong>æ¨¡å‹ã€‚åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬æœ‰4ä¸ªæ“ä½œç¬¦å’Œæ•´å‹æ“ä½œæ•°ã€‚æ“ä½œç¬¦æœ‰åŠ ã€å‡ã€ä¹˜ã€é™¤ã€‚æˆ‘ä»¬åŸæœ¬å¯ä»¥æ–°å»ºå•ç‹¬çš„ç±»æ¥è¡¨ç¤ºæ¯ä¸ªæ“ä½œç¬¦å¦‚ AddNode, SubNode, MulNode å’Œ DivNodeï¼Œä½†ç›¸åæˆ‘ä»¬åªä¼šæ–°å»ºä¸€ä¸ª BinOp ç±»æ¥è¡¨ç¤ºæ‰€æœ‰ 4 ä¸ª<strong>äºŒå…ƒæ“ä½œç¬¦*binary operator*</strong> ï¼ˆäºŒå…ƒæ“ä½œç¬¦å°±æ˜¯ä½œç”¨åœ¨ä¸¤ä¸ªæ“ä½œæ•°çš„æ“ä½œç¬¦ï¼‰ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinOp</span><span class="params">(AST)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, left, op, right)</span>:</span></span><br><span class="line">    self.left = left</span><br><span class="line">    self.token = self.op = op</span><br><span class="line">    self.right = right</span><br></pre></td></tr></table></figure><ul><li>æ„é€ å‡½æ•°çš„å‚æ•°æ˜¯ <code>left</code>, <code>op</code>, å’Œ <code>right</code>, å…¶ä¸­ <code>left</code> å’Œ <code>right</code> åˆ†åˆ«æŒ‡å‘äº†è¡¨ç¤º å·¦æ“ä½œæ•°å’Œå³æ“ä½œæ•°çš„ç»“ç‚¹ã€‚ <code>op</code> ä¿å­˜äº†æŒ‡å‘æ“ä½œç¬¦æœ¬èº«çš„ token: <code>Token(PLUS, &#39;+&#39;)</code> è¡¨ç¤ºåŠ æ“ä½œç¬¦ï¼Œ <code>Token(MINUS, &#39;-&#39;)</code> è¡¨ç¤ºå‡æ“ä½œç¬¦ï¼Œç­‰ç­‰ã€‚</li></ul></li><li><p>ä¸ºäº†åœ¨ AST ä¸­è¡¨ç¤ºæ•´æ•°ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª <code>Num</code> ç±»ï¼Œå®ƒå°†ä¿å­˜ä¸€ä¸ª <code>INTEGER</code> token å’Œè¯¥ token çš„å€¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Num</span><span class="params">(AST)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, token)</span>:</span></span><br><span class="line">    self.token = token</span><br><span class="line">    self.value = token.value</span><br></pre></td></tr></table></figure><ul><li>å’Œä½ æ³¨æ„åˆ°çš„ä¸€æ ·ï¼Œæ‰€æœ‰çš„noteä¿å­˜ token ä»è€Œåˆ™åˆ›å»ºnote(all nodes store the token used to create the node)ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ï¼Œå°†æ¥ä¼šæ´¾ä¸Šç”¨åœºã€‚</li></ul></li></ul><p>å›å¿†ä¸€ä¸‹è¡¨è¾¾å¼ 2 * 7 + 3 çš„ ASTã€‚æˆ‘ä»¬ä¼šåœ¨ä»£ç ä¸­æ‰‹å·¥åˆ›å»ºè¯¥è¡¨è¾¾å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> spi <span class="keyword">import</span> Token, MUL, PLUS, INTEGER, Num, BinOp</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mul_token = Token(MUL, <span class="string">'*'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>plus_token = Token(PLUS, <span class="string">'+'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mul_node = BinOp(</span><br><span class="line"><span class="meta">... </span>    left=Num(Token(INTEGER, <span class="number">2</span>)),</span><br><span class="line"><span class="meta">... </span>    op=mul_token,</span><br><span class="line"><span class="meta">... </span>    right=Num(Token(INTEGER, <span class="number">7</span>))</span><br><span class="line"><span class="meta">... </span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>add_node = BinOp(</span><br><span class="line"><span class="meta">... </span>    left=mul_node,</span><br><span class="line"><span class="meta">... </span>    op=plus_token,</span><br><span class="line"><span class="meta">... </span>    right=Num(Token(INTEGER, <span class="number">3</span>))</span><br><span class="line"><span class="meta">... </span>)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯åœ¨æ–°å®šä¹‰çš„ç»“ç‚¹ç±»ä¸‹ AST çš„æ ·å­ã€‚ä¸‹é¢çš„å›¾ç‰‡ä¹Ÿéµå¾ªäº†ä¸Šé¢æ‰‹å·¥åˆ›å»ºçš„è¿‡ç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_astimpl_01.png" alt="lsbasi_part7_astimpl_01"></p><h2 id="parser-ä»£ç "><a href="#parser-ä»£ç " class="headerlink" title="parser ä»£ç "></a>parser ä»£ç </h2><p>ä¸‹é¢æ˜¯æˆ‘ä»¬ä¿®æ”¹è¿‡çš„ parser ä»£ç ï¼Œåœ¨è¯†åˆ«è¾“å…¥ï¼ˆç®—æœ¯è¡¨è¾¾å¼ï¼‰æ—¶å»ºç«‹å’Œè¿”å›ä¸€ä¸ª AST:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AST</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinOp</span><span class="params">(AST)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, left, op, right)</span>:</span></span><br><span class="line">    self.left  = left</span><br><span class="line">    self.token = self.op = op</span><br><span class="line">    self.right = right</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Num</span><span class="params">(AST)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, token)</span>:</span></span><br><span class="line">    self.token = token</span><br><span class="line">    self.value = token.value</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parser</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, lexer)</span>:</span></span><br><span class="line">    self.lexer = lexer</span><br><span class="line">    <span class="comment"># set current token to the first token from the input</span></span><br><span class="line">    self.current_token = self.lexer.get_next_token()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">'Invalid syntax'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self, token_type)</span>:</span></span><br><span class="line">    <span class="comment"># compare the current token type with the passed token</span></span><br><span class="line">    <span class="comment"># type and if they match then "eat" the current token</span></span><br><span class="line">    <span class="comment"># and assign the next token to the self.current_token,</span></span><br><span class="line">    <span class="comment"># otherwise raise an exception.</span></span><br><span class="line">    <span class="keyword">if</span> self.current_token.type == token_type:</span><br><span class="line">        self.current_token = self.lexer.get_next_token()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        self.error()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">factor</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""factor : INTEGER | LPAREN expr RPAREN"""</span></span><br><span class="line">    token = self.current_token</span><br><span class="line">    <span class="keyword">if</span> token.type == INTEGER:</span><br><span class="line">        <span class="keyword">return</span> Num(token)</span><br><span class="line">    <span class="keyword">elif</span> token.type == LPAREN:</span><br><span class="line">        self.eat(LPAREN)</span><br><span class="line">        node = self.expr()</span><br><span class="line">        self.eat(RPAREN)</span><br><span class="line">        <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">term</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""term : factor ((MUL | DIV) factor)*"""</span></span><br><span class="line">    node = self.factor()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (MUL, DIV):</span><br><span class="line">        token = self.current_token</span><br><span class="line">        <span class="keyword">if</span> token.type == MUL:</span><br><span class="line">        self.eat(MUL)</span><br><span class="line">        <span class="keyword">elif</span> token.type == DIV:</span><br><span class="line">        self.eat(DIV)</span><br><span class="line"></span><br><span class="line">        node = BinOp(left=node, op=token, right=self.factor())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">expr</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    expr   : term ((PLUS | MINUS) term)*</span></span><br><span class="line"><span class="string">    term   : factor ((MUL | DIV) factor)*</span></span><br><span class="line"><span class="string">    factor : INTEGER | LPAREN expr RPAREN</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    node = self.term()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (PLUS, MINUS):</span><br><span class="line">        token = self.current_token</span><br><span class="line">        <span class="keyword">if</span> token.type == PLUS:</span><br><span class="line">        self.eat(PLUS)</span><br><span class="line">        <span class="keyword">elif</span> token.type == MINUS:</span><br><span class="line">        self.eat(MINUS)</span><br><span class="line"></span><br><span class="line">        node = BinOp(left=node, op=token, right=self.term())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> self.expr()</span><br></pre></td></tr></table></figure><p>è®©æˆ‘ä»¬çœ‹ä¸€äº›ç®—æœ¯è¡¨è¾¾å¼çš„ AST çš„æ„å»ºè¿‡ç¨‹ã€‚</p><p>å¦‚æœä½ çœ‹äº†ä¸Šé¢çš„ parser ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå»ºç«‹ä¸€ä¸ª AST ä¸­çš„ç»“ç‚¹çš„æ—¶ï¼ŒæŠŠå˜é‡ node çš„å½“å‰å€¼åšä¸º BinOp ç»“ç‚¹çš„å·¦å­ç»“ç‚¹ï¼ŒæŠŠå¯¹ <code>term</code> æˆ– <code>factor</code> è°ƒç”¨çš„è¿”å›ç»“æœåšä¸ºå®ƒ çš„å³å­ç»“ç‚¹ï¼Œè¿™å®é™…ä¸Šå°±æ˜¯æŠŠç»“ç‚¹æ¨å‘å·¦è¾¹ï¼Œä¸‹é¢è¡¨è¾¾å¼ 1 +2 + 3 + 4 + 5 çš„æ ‘ç»“æ„å°±æ˜¯ è¿™ç§æƒ…å†µçš„ä¸€ä¸ªå¥½ä¾‹å­ã€‚ä¸‹é¢æ˜¯ parser å¦‚ä½•ä¸€æ­¥æ­¥åœ°æ„å»ºè¡¨è¾¾å¼ 1 + 2 + 3 + 4 + 5 çš„ AST çš„å›¾å½¢è¡¨ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_astimpl_02.png" alt="lsbasi_part7_astimpl_02"></p><h2 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h2><p>å¥½äº†ï¼Œä¸‹é¢æ˜¯è¡¨è¾¾å¼ 2 * 7 + 3 çš„ ASTï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_ast_walking_01.png" alt="lsbasi_part7_ast_walking_01"></p><p><strong>ä½ æ€ä¹ˆéå†è¿™ä¸ªæ ‘å¹¶æ°å½“åœ°å¯¹å®ƒæ‰€ä»£è¡¨çš„è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼å‘¢ï¼Ÿ</strong></p><blockquote><p>ä½ å¯ä»¥ä½¿ç”¨<strong>ååºéå†*postorder traversal*</strong> (æ·±åº¦ä¼˜å…ˆéå†<em>depth-first traversal</em> çš„ä¸€ä¸ªç‰¹ä¾‹) ã€‚</p><ul><li>è¿™ç§æ–¹å¼ç”±æ ¹ç»“ç‚¹å¼€å§‹ï¼Œé€’å½’ç”±å·¦è‡³å³è®¿é—®æ¯ä¸ªç»“ç‚¹çš„å­ç»“ç‚¹ã€‚ååºéå†ä»æ ¹ç»“ç‚¹å¼€å§‹å°½å¯èƒ½å¿«åœ°è®¿é—®ç¦»æ ¹ç»“ç‚¹è¿œçš„ç»“ç‚¹(The postorder traversal visits nodes as far away from the root as fast as it can)ã€‚</li></ul></blockquote><p>ä¸‹é¢æ˜¯ååºéå†çš„ä¼ªä»£ç ï¼Œå…¶ä¸­ <code>&lt;&lt; postorder actions &gt;&gt;</code>æ˜¯ä¸€äº›æ“ä½œçš„å ä½ç¬¦ï¼Œå¦‚ <code>BinOp</code> ç»“ç‚¹çš„åŠ å‡ä¹˜é™¤æ“ä½œæˆ– <code>Num</code> ç»“ç‚¹è¿”å›æ•´æ•°çš„ç®€å•æ“ä½œï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_ast_visit_postorder.png" alt="lsbasi_part7_ast_visit_postorder"></p><ul><li><p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åç»­éå†å‘¢ï¼Ÿ</strong></p><blockquote><p>ç¬¬ä¸€ï¼Œæˆ‘ä»¬éœ€è¦å¯¹åœ¨æ ‘ä¸­æ›´ä½çš„ä¸­é—´ç»“ç‚¹è¿›è¡Œæ±‚å€¼ï¼Œ å› ä¸ºå®ƒä»¬ä»£è¡¨äº†ä¼˜å…ˆçº§æ›´é«˜çš„æ“ä½œç¬¦ï¼Œ</p><p>ç¬¬äºŒï¼Œæˆ‘ä»¬åœ¨å¯¹æ“ä½œæ•° å‚ä¸ å¯¹åº”æ“ä½œç¬¦ çš„è¿ç®— ä¹‹å‰éœ€è¦å¯¹æ“ä½œæ•°è¿›è¡Œæ±‚å€¼ã€‚</p></blockquote><p>åœ¨ä¸‹é¢çš„å›¾ç‰‡ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨ååºéå†æ—¶æˆ‘ä»¬ä¼šé¦–å…ˆå¯¹è¡¨è¾¾å¼ 2*7 è¿›è¡Œ æ±‚å€¼ï¼Œè€Œåªæœ‰åœ¨å¯¹ 14 + 3 æ±‚å€¼ä¹‹åï¼Œæˆ‘ä»¬æ‰ä¼šå¾—åˆ°æ­£ç¡®ç­”æ¡ˆ 17:</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_ast_walking_02.png" alt="lsbasi_part7_ast_walking_02"></p><p><strong>ä¸‰ç§æ·±åº¦ä¼˜å…ˆéå†</strong>ï¼š</p><p>ä¸ºäº†å®Œæ•´èµ·è§ï¼Œä¸‰ç§æ·±åº¦ä¼˜å…ˆéå†çš„æ–¹å¼ï¼šå…ˆåºéå†ï¼Œä¸­åºéå†å’Œååºéå†ã€‚è¿™ äº›éå†æ–¹å¼åå­—çš„æ¥è‡ªäºéå†ä»£ç ä¸­æ“ä½œçš„ä½ç½®ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_ast_visit_generic.png" alt="lsbasi_part7_ast_visit_generic"></p><p>æœ‰æ—¶ä½ å¯èƒ½éœ€è¦åœ¨æ‰€æœ‰åœ°æ–¹ï¼ˆå…ˆåºï¼Œä¸­åºå’Œååºï¼‰éƒ½æ‰§è¡Œä¸€äº›æ“ä½œã€‚ä½ ä¼šåœ¨æœ¬æ–‡çš„æºä»£ç ä»“ åº“ä¸­æ‰¾åˆ°ä¸€äº›ä¾‹å­ã€‚</p><blockquote><ul><li><p>å…ˆåºéå†<em>preorder traversal</em>,</p><p>åœ¨å…ˆåºéå†ä¸­ï¼Œæˆ‘ä»¬å…ˆè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œç„¶åé€’å½’ä½¿ç”¨å…ˆåºéå†è®¿é—®å·¦å­æ ‘ï¼Œå†é€’å½’ä½¿ç”¨å…ˆåºéå†è®¿é—®å³å­æ ‘ï¼Œå³ï¼šæ ¹èŠ‚ç‚¹-&gt;å·¦å­æ ‘-&gt;å³å­æ ‘</p></li><li><p>ä¸­åºéå†<em>inorder traversal</em>,</p><p>åœ¨ä¸­åºéå†ä¸­ï¼Œæˆ‘ä»¬é€’å½’ä½¿ç”¨ä¸­åºéå†è®¿é—®å·¦å­æ ‘ï¼Œç„¶åè®¿é—®æ ¹èŠ‚ç‚¹ï¼Œæœ€åå†é€’å½’ä½¿ç”¨ä¸­åºéå†è®¿é—®å³å­æ ‘ï¼Œå³ï¼š<br>å·¦å­æ ‘-&gt;æ ¹èŠ‚ç‚¹-&gt;å³å­æ ‘</p></li><li><p>ååºéå† <em>postorder traversal</em>.</p><p>åœ¨ååºéå†ä¸­ï¼Œæˆ‘ä»¬å…ˆé€’å½’ä½¿ç”¨ååºéå†è®¿é—®å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œæœ€åè®¿é—®æ ¹èŠ‚ç‚¹ã€‚ å³ï¼š<br>å·¦å­æ ‘-&gt;å³å­æ ‘-&gt;æ ¹èŠ‚ç‚¹</p></li></ul></blockquote><h2 id="Interpreter"><a href="#Interpreter" class="headerlink" title="Interpreter"></a>Interpreter</h2><p><strong>ç”¨ä»£ç æ¥éå†å’Œè§£é‡Šç”± parser å»ºç«‹çš„æŠ½è±¡è¯­æ³•æ ‘</strong>ï¼š</p><p>å¥½äº†ï¼Œè®©æˆ‘ä»¬å†™ä¸€äº›ä»£ç æ¥éå†å’Œè§£é‡Šç”± parser å»ºç«‹çš„æŠ½è±¡è¯­æ³•æ ‘ï¼Œå¥½å—ï¼Ÿ</p><p>ä¸‹é¢æ˜¯å®ç°äº†<a href="https://en.wikipedia.org/wiki/Visitor_pattern" target="_blank" rel="noopener">è®¿é—®è€…æ¨¡å¼</a>çš„æºä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NodeVisitor</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">visit</span><span class="params">(self, node)</span>:</span></span><br><span class="line">        method_name = <span class="string">'visit_'</span> + type(node).__name__</span><br><span class="line">        visitor = getattr(self, method_name, self.generic_visit)</span><br><span class="line">        <span class="keyword">return</span> visitor(node)</span><br><span class="line"><span class="comment">#generic_visit æ˜¯ä¸€ä¸ªå¤‡ç”¨å‡½æ•°ï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸æ¥è¡¨ç¤ºå®ƒé‡åˆ°äº†ä¸€ä¸ªå®ç°ç±»ä¸­æ²¡æœ‰ç›¸ åº” #visit_NodeType æ–¹æ³•çš„ç»“ç‚¹ã€‚</span></span><br><span class="line">       <span class="function"><span class="keyword">def</span> <span class="title">generic_visit</span><span class="params">(self, node)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'No visit_&#123;&#125; method'</span>.format(type(node).__name__))</span><br></pre></td></tr></table></figure><blockquote><p>NodeVisitorä¸€ä¸ªç»“ç‚¹è®¿é—®å™¨çš„åŸºç±»ï¼šå®ƒéå†æŠ½è±¡è¯­æ³•æ ‘å¹¶ä¸ºæ‰¾åˆ°çš„æ¯ä¸ªèŠ‚ç‚¹è°ƒç”¨ä¸€ä¸ªè®¿é—®å™¨å‡½æ•°ã€‚ï¼ˆè¿™ä¸ªå‡½æ•°<br>å¯èƒ½ä¼šè¿”å›ä¸€ä¸ªç”±visit()æ–¹æ³•è½¬å‘ çš„å€¼ï¼‰ã€‚This class is meant to be subclassed, with the subclass adding visitor methods.</p><p>æˆå‘˜å‡½æ•°ï¼š</p><ul><li>1ï¸âƒ£ visit(node)ï¼šè®¿é—®ä¸€ä¸ªç»“ç‚¹ã€‚å®ƒé»˜è®¤è°ƒç”¨self.visit_classnameï¼ˆå…¶ä¸­çš„classnameæ˜¯ç»“ç‚¹ç±»çš„å<br>å­—ï¼Œæˆ–è€…å¦‚æœè¿™ä¸ªæ–¹æ³•ä¸å­˜åœ¨æ—¶ï¼Œclassnameå°±æ˜¯ generic_visit() ï¼‰çš„æ–¹æ³•ã€‚</li><li>2ï¸âƒ£ generic_visit(node)ï¼šè¿™ä¸ªè®¿é—®å™¨(visitor)å¯¹ç»“ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹è°ƒç”¨visit()ã€‚<br>ã€æ³¨æ„ï¼šåªæœ‰è¿™ä¸ªè®¿é—®å™¨è°ƒç”¨generic_visit() æˆ–è€…è®¿é—®å®ƒæœ¬èº«ï¼Œå¦åˆ™è‡ªå®šä¹‰è®¿é—®å™¨çš„ç»“ç‚¹çš„å­èŠ‚ç‚¹å°†ä¸ä¼šè¢«è®¿é—®ã€‘</li></ul><hr><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getattr(object, name[, default])</span><br></pre></td></tr></table></figure><p>å®˜æ–¹æ–‡æ¡£ä¸­è¯´è¿™ä¸ªå‡½æ•°ä½œç”¨æ˜¯è¿”å›å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡å®ä¾‹<code>obj</code>,<code>name</code>æ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œæ˜¯å¯¹è±¡çš„æˆå‘˜å‡½æ•°åå­—æˆ–è€…æˆå‘˜å˜é‡ï¼Œ<code>default</code>å½“å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±ç›¸çš„æ—¶å€™å°±è¿”å›é»˜è®¤å€¼ï¼Œå¦‚æœæ²¡æœ‰æä¾›é»˜è®¤å€¼å°±è¿”å›å¼‚å¸¸ã€‚</p><p>å¦‚ï¼š</p><ol><li>æä¾›ä¸é»˜è®¤å†™æ³•ï¼š</li></ol><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="class"><span class="keyword">class</span> <span class="title">Test</span>(<span class="title">object</span>):</span></span><br><span class="line">...     <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(<span class="keyword">self</span>)</span></span><span class="symbol">:</span></span><br><span class="line">...             print <span class="string">'I am a test'</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; test = Test()  <span class="comment"># å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; func = getattr(test, <span class="string">'func'</span>) <span class="comment"># ä½¿ç”¨getattrå‡½æ•°è·å–funcçš„å€¼</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; func()</span><br><span class="line">I am a test</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; func = getattr(test, <span class="string">'f'</span>)  <span class="comment"># ä½¿ç”¨å¯¹è±¡æ²¡æœ‰çš„å±æ€§ï¼Œåˆ™ä¼šå‡ºç°å¼‚å¸¸</span></span><br><span class="line">Traceback (most recent call last)<span class="symbol">:</span></span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;<span class="class"><span class="keyword">module</span>&gt;</span></span><br><span class="line"><span class="symbol">AttributeError:</span> <span class="string">'Test'</span> object has no attribute <span class="string">'f'</span></span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt;</span><br></pre></td></tr></table></figure><ol><li>æä¾›é»˜è®¤å†™æ³•</li></ol><p>å¦‚æœå¯¹è±¡æ²¡æœ‰è¯¥å±æ€§å¯ä»¥æä¾›ä¸€ä¸ªé»˜è®¤å€¼ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;</span>&gt; func = getattr(test, <span class="string">'f'</span>, None)</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt; print func</span><br><span class="line">None</span><br><span class="line"><span class="meta">&gt;&gt;</span>&gt;</span><br></pre></td></tr></table></figure></blockquote><h3 id="Interpreter-ç±»çš„æºä»£ç "><a href="#Interpreter-ç±»çš„æºä»£ç " class="headerlink" title="Interpreter ç±»çš„æºä»£ç "></a>Interpreter ç±»çš„æºä»£ç </h3><p>ä¸‹é¢æ˜¯ Interpreter ç±»çš„æºä»£ç ï¼Œå®ƒç»§æ‰¿è‡ª NodeVisitor ç±»ä¸”å®ç°äº†å½¢å¼ä¸º <code>visit_NodeType</code> çš„ä¸åŒæ–¹æ³•ï¼Œå…¶ä¸­ <code>NodeType</code> ä¼šè¢«å¦‚ <code>BinOp</code>, <code>Num</code> ç­‰ç±»åæ›¿æ¢ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Interpreter</span><span class="params">(NodeVisitor)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parser)</span>:</span></span><br><span class="line">    self.parser = parser</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">visit_BinOp</span><span class="params">(self, node)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> node.op.type == PLUS:</span><br><span class="line">        <span class="keyword">return</span> self.visit(node.left) + self.visit(node.right)</span><br><span class="line">    <span class="keyword">elif</span> node.op.type == MINUS:</span><br><span class="line">        <span class="keyword">return</span> self.visit(node.left) - self.visit(node.right)</span><br><span class="line">    <span class="keyword">elif</span> node.op.type == MUL:</span><br><span class="line">        <span class="keyword">return</span> self.visit(node.left) * self.visit(node.right)</span><br><span class="line">    <span class="keyword">elif</span> node.op.type == DIV:</span><br><span class="line">        <span class="keyword">return</span> self.visit(node.left) / self.visit(node.right)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">visit_Num</span><span class="params">(self, node)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> node.value</span><br></pre></td></tr></table></figure><p>å…³äºä»¥ä¸Šä»£ç æœ‰ä¸¤ç‚¹å€¼å¾—åœ¨è¿™é‡Œæä¸€ä¸‹ï¼š</p><blockquote><p>ç¬¬ä¸€ï¼Œ<u>æ“ä½œ AST ç»“ç‚¹çš„è®¿é—®å™¨(ä¹Ÿå°±æ˜¯å¯¹ASTæ•°æ®çš„æ“ä½œ)</u>çš„ä»£ç  å’Œ AST ç»“ç‚¹(å³ï¼ŒASTçš„æ•°æ®ç»“æ„)æœ¬èº« åˆ†ç¦»ï¼ˆè§£è€¦äº†ï¼‰ã€‚</p><ul><li>å¯ä»¥çœ‹åˆ° AST ç»“ç‚¹ç±»(BinOp å’Œ Num)æ²¡æœ‰æä¾›ä»»ä½•ä»£ç æ¥æ“ä½œå­˜å‚¨åœ¨è¿™äº›ç»“ç‚¹ä¸­çš„æ•°æ®ï¼Œè¯¥é€»è¾‘è¢«å°è£…åœ¨äº†å®ç° <code>NodeVisitor</code> çš„ <code>Interpreter</code> ç±»ä¸­ã€‚ï¼ˆä¹Ÿå°±æ˜¯å¯¹æ•°æ®çš„æ“ä½œåœ¨<code>NodeVisitor</code> çš„ <code>Interpreter</code> ç±»ä¸­ï¼‰ã€‚</li></ul><p>ç¬¬äºŒï¼Œåœ¨NodeVisitorçš„è®¿é—®å‡½æ•°ä¸­ï¼Œä¸åƒè¿™æ ·ä½¿ç”¨ä¸€ä¸ªå·¨å¤§çš„ifè¯­å¥:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">visit</span><span class="params">(node)</span>:</span></span><br><span class="line">    node_type = type(node).__name__</span><br><span class="line">    <span class="keyword">if</span> node_type == <span class="string">'BinOp'</span>:</span><br><span class="line">        <span class="keyword">return</span> self.visit_BinOp(node)</span><br><span class="line">    <span class="keyword">elif</span> node_type == <span class="string">'Num'</span>:</span><br><span class="line">        <span class="keyword">return</span> self.visit_Num(node)</span><br><span class="line">    <span class="keyword">elif</span> ...</span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line"><span class="comment">#####æˆ–è€…##########</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">visit</span><span class="params">(node)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> isinstance(node, BinOp):</span><br><span class="line">        <span class="keyword">return</span> self.visit_BinOp(node)</span><br><span class="line">    <span class="keyword">elif</span> isinstance(node, Num):</span><br><span class="line">        <span class="keyword">return</span> self.visit_Num(node)</span><br><span class="line">    <span class="keyword">elif</span> ...</span><br></pre></td></tr></table></figure><p>NodeVisitor çš„ visit æ–¹æ³•éå¸¸é€šç”¨ï¼Œèƒ½æ ¹æ®ä¼ å…¥çš„ç»“ç‚¹ç±»å‹æ¥è°ƒåº¦é€‚å½“çš„æ–¹æ³•ã€‚æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œä¸ºäº†åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬çš„è§£é‡Šå™¨ç»§æ‰¿äº† NodeVisitor ç±»å¹¶å®ç°äº†å¿…è¦çš„æ–¹æ³•ã€‚ å› æ­¤ï¼š</p><ul><li>å¦‚æœä¼ é€’ç»™ <code>visit</code> å‡½æ•°çš„ç»“ç‚¹æ˜¯ <code>BinOp</code>ï¼Œé‚£ä¹ˆ<code>visit</code> å‡½æ•°å°±ä¼šè°ƒç”¨ <code>visit_BinOp</code> æ–¹æ³•ã€‚</li><li>å¦‚æœä¼ é€’ç»™ <code>visit</code>å‡½æ•°çš„ç»“ç‚¹æ˜¯ <code>Num</code>,é‚£ä¹ˆ <code>visit</code> å‡½æ•°å°±ä¼šè°ƒç”¨<code>visit_Num</code> æ–¹ æ³•ï¼Œç­‰ç­‰ã€‚</li></ul></blockquote><p>èŠ±æ­¤æ—¶é—´ç ”ç©¶ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼ˆPython çš„æ ‡å‡†æ¨¡å— <a href="https://docs.python.org/2.7/library/ast.html#module-ast" target="_blank" rel="noopener">ast</a> ä¹Ÿä½¿ç”¨äº†ç›¸åŒçš„æœºåˆ¶æ¥éå†ç»“ç‚¹ï¼‰ï¼Œ å› ä¸ºæˆ‘ä»¬å°†æ¥ä¼šç”¨å¾ˆå¤šæ–°çš„ <code>visit_NodeType</code> æ–¹æ³•æ¥æ‰©å±•æˆ‘ä»¬çš„è§£é‡Šå™¨ã€‚</p><p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ‰‹å·¥ä¸ºè¡¨è¾¾å¼ 2 * 7 + 3 å»ºç«‹ä¸€ä¸ª AST å¹¶æŠŠå®ƒä¼ é€’ç»™è§£é‡Šå™¨ï¼Œé€šè¿‡å¯¹è¯¥è¡¨è¾¾å¼æ±‚å€¼çœ‹çœ‹è¿è¡Œä¸­çš„ visit æ–¹æ³•ã€‚ä¸‹é¢æ˜¯ä½ ä» Python shell ä¸­å°è¯•çš„æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> spi <span class="keyword">import</span> Token, MUL, PLUS, INTEGER, Num, BinOp</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mul_token = Token(MUL, <span class="string">'*'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>plus_token = Token(PLUS, <span class="string">'+'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mul_node = BinOp(</span><br><span class="line"><span class="meta">... </span>    left=Num(Token(INTEGER, <span class="number">2</span>)),</span><br><span class="line"><span class="meta">... </span>    op=mul_token,</span><br><span class="line"><span class="meta">... </span>    right=Num(Token(INTEGER, <span class="number">7</span>))</span><br><span class="line"><span class="meta">... </span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>add_node = BinOp(</span><br><span class="line"><span class="meta">... </span>    left=mul_node,</span><br><span class="line"><span class="meta">... </span>    op=plus_token,</span><br><span class="line"><span class="meta">... </span>    right=Num(Token(INTEGER, <span class="number">3</span>))</span><br><span class="line"><span class="meta">... </span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> spi <span class="keyword">import</span> Interpreter</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>inter = Interpreter(<span class="literal">None</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>inter.visit(add_node)</span><br><span class="line"><span class="number">17</span></span><br></pre></td></tr></table></figure><p>å¦‚ä½ æ‰€è§ï¼Œæˆ‘æŠŠè¡¨è¾¾å¼æ ‘çš„æ ¹ç»“ç‚¹ä¼ é€’ç»™äº† <code>visit</code> æ–¹æ³•ï¼Œè¿™ä¸€è¡Œä¸ºè§¦å‘äº†æ ‘çš„éå†ï¼Œéå†è°ƒç”¨äº† <code>Interpreter</code> ç±»æ­£ç¡®çš„æ–¹æ³•(<code>visit_BinOp</code> å’Œ <code>visit_Num</code>)å¹¶ç”Ÿæˆäº†ç»“æœã€‚</p><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">""" SPI - Simple Pascal Interpreter """</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Token types</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># EOF (end-of-file) token is used to indicate that</span></span><br><span class="line"><span class="comment"># there is no more input left for lexical analysis</span></span><br><span class="line">INTEGER, PLUS, MINUS, MUL, DIV, LPAREN, RPAREN, EOF = (</span><br><span class="line">    <span class="string">'INTEGER'</span>, <span class="string">'PLUS'</span>, <span class="string">'MINUS'</span>, <span class="string">'MUL'</span>, <span class="string">'DIV'</span>, <span class="string">'('</span>, <span class="string">')'</span>, <span class="string">'EOF'</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Token</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, type, value)</span>:</span></span><br><span class="line">        self.type = type</span><br><span class="line">        self.value = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""String representation of the class instance.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Examples:</span></span><br><span class="line"><span class="string">            Token(INTEGER, 3)</span></span><br><span class="line"><span class="string">            Token(PLUS, '+')</span></span><br><span class="line"><span class="string">            Token(MUL, '*')</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Token(&#123;type&#125;, &#123;value&#125;)'</span>.format(</span><br><span class="line">            type=self.type,</span><br><span class="line">            value=repr(self.value)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__str__()</span><br><span class="line"></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"><span class="comment">#                                                                             #</span></span><br><span class="line"><span class="comment">#  LEXER                                                                      #</span></span><br><span class="line"><span class="comment">#                                                                             #</span></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lexer</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, text)</span>:</span></span><br><span class="line">        <span class="comment"># client string input, e.g. "4 + 2 * 3 - 6 / 2"</span></span><br><span class="line">        self.text = text</span><br><span class="line">        <span class="comment"># self.pos is an index into self.text</span></span><br><span class="line">        self.pos = <span class="number">0</span></span><br><span class="line">        self.current_char = self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'Invalid character'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">advance</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Advance the `pos` pointer and set the `current_char` variable."""</span></span><br><span class="line">        self.pos += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> self.pos &gt; len(self.text) - <span class="number">1</span>:</span><br><span class="line">            self.current_char = <span class="literal">None</span>  <span class="comment"># Indicates end of input</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.current_char = self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">skip_whitespace</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isspace():</span><br><span class="line">            self.advance()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">integer</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Return a (multidigit) integer consumed from the input."""</span></span><br><span class="line">        result = <span class="string">''</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isdigit():</span><br><span class="line">            result += self.current_char</span><br><span class="line">            self.advance()</span><br><span class="line">        <span class="keyword">return</span> int(result)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_next_token</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Lexical analyzer (also known as scanner or tokenizer)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        This method is responsible for breaking a sentence</span></span><br><span class="line"><span class="string">        apart into tokens. One token at a time.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char.isspace():</span><br><span class="line">                self.skip_whitespace()</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char.isdigit():</span><br><span class="line">                <span class="keyword">return</span> Token(INTEGER, self.integer())</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'+'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(PLUS, <span class="string">'+'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'-'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(MINUS, <span class="string">'-'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'*'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(MUL, <span class="string">'*'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'/'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(DIV, <span class="string">'/'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'('</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(LPAREN, <span class="string">'('</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">')'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(RPAREN, <span class="string">')'</span>)</span><br><span class="line"></span><br><span class="line">            self.error()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Token(EOF, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"><span class="comment">#                                                                             #</span></span><br><span class="line"><span class="comment">#  PARSER                                                                     #</span></span><br><span class="line"><span class="comment">#                                                                             #</span></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AST</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span>   <span class="comment"># è¡¨ç¤ºå®šä¹‰ç•™ç©º</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinOp</span><span class="params">(AST)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, left, op, right)</span>:</span></span><br><span class="line">        self.left = left</span><br><span class="line">        self.token = self.op = op</span><br><span class="line">        self.right = right</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Num</span><span class="params">(AST)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, token)</span>:</span></span><br><span class="line">        self.token = token</span><br><span class="line">        self.value = token.value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parser</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, lexer)</span>:</span></span><br><span class="line">        self.lexer = lexer</span><br><span class="line">        <span class="comment"># set current token to the first token taken from the input</span></span><br><span class="line">        self.current_token = self.lexer.get_next_token()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'Invalid syntax'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self, token_type)</span>:</span></span><br><span class="line">        <span class="comment"># compare the current token type with the passed token</span></span><br><span class="line">        <span class="comment"># type and if they match then "eat" the current token</span></span><br><span class="line">        <span class="comment"># and assign the next token to the self.current_token,</span></span><br><span class="line">        <span class="comment"># otherwise raise an exception.</span></span><br><span class="line">        <span class="keyword">if</span> self.current_token.type == token_type:</span><br><span class="line">            self.current_token = self.lexer.get_next_token()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.error()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">factor</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""factor : INTEGER | LPAREN expr RPAREN"""</span></span><br><span class="line">        token = self.current_token</span><br><span class="line">        <span class="keyword">if</span> token.type == INTEGER:</span><br><span class="line">            self.eat(INTEGER)</span><br><span class="line">            <span class="keyword">return</span> Num(token)</span><br><span class="line">        <span class="keyword">elif</span> token.type == LPAREN:</span><br><span class="line">            self.eat(LPAREN)</span><br><span class="line">            node = self.expr()</span><br><span class="line">            self.eat(RPAREN)</span><br><span class="line">            <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">term</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""term : factor ((MUL | DIV) factor)*"""</span></span><br><span class="line">        node = self.factor()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (MUL, DIV):</span><br><span class="line">            token = self.current_token</span><br><span class="line">            <span class="keyword">if</span> token.type == MUL:</span><br><span class="line">                self.eat(MUL)</span><br><span class="line">            <span class="keyword">elif</span> token.type == DIV:</span><br><span class="line">                self.eat(DIV)</span><br><span class="line"></span><br><span class="line">            node = BinOp(left=node, op=token, right=self.factor())</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">expr</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        expr   : term ((PLUS | MINUS) term)*</span></span><br><span class="line"><span class="string">        term   : factor ((MUL | DIV) factor)*</span></span><br><span class="line"><span class="string">        factor : INTEGER | LPAREN expr RPAREN</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        node = self.term()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (PLUS, MINUS):</span><br><span class="line">            token = self.current_token</span><br><span class="line">            <span class="keyword">if</span> token.type == PLUS:</span><br><span class="line">                self.eat(PLUS)</span><br><span class="line">            <span class="keyword">elif</span> token.type == MINUS:</span><br><span class="line">                self.eat(MINUS)</span><br><span class="line"></span><br><span class="line">            node = BinOp(left=node, op=token, right=self.term())</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.expr()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"><span class="comment">#                                                                             #</span></span><br><span class="line"><span class="comment">#  INTERPRETER                                                                #</span></span><br><span class="line"><span class="comment">#                                                                             #</span></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NodeVisitor</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">visit</span><span class="params">(self, node)</span>:</span></span><br><span class="line">        method_name = <span class="string">'visit_'</span> + type(node).__name__</span><br><span class="line">        visitor = getattr(self, method_name, self.generic_visit)</span><br><span class="line">        <span class="keyword">return</span> visitor(node)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">generic_visit</span><span class="params">(self, node)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'No visit_&#123;&#125; method'</span>.format(type(node).__name__))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Interpreter</span><span class="params">(NodeVisitor)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, parser)</span>:</span></span><br><span class="line">        self.parser = parser</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">visit_BinOp</span><span class="params">(self, node)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> node.op.type == PLUS:</span><br><span class="line">            <span class="keyword">return</span> self.visit(node.left) + self.visit(node.right)</span><br><span class="line">        <span class="keyword">elif</span> node.op.type == MINUS:</span><br><span class="line">            <span class="keyword">return</span> self.visit(node.left) - self.visit(node.right)</span><br><span class="line">        <span class="keyword">elif</span> node.op.type == MUL:</span><br><span class="line">            <span class="keyword">return</span> self.visit(node.left) * self.visit(node.right)</span><br><span class="line">        <span class="keyword">elif</span> node.op.type == DIV:</span><br><span class="line">            <span class="keyword">return</span> self.visit(node.left) / self.visit(node.right)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">visit_Num</span><span class="params">(self, node)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> node.value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">interpret</span><span class="params">(self)</span>:</span></span><br><span class="line">        tree = self.parser.parse()</span><br><span class="line">        <span class="keyword">return</span> self.visit(tree)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                text = raw_input(<span class="string">'spi&gt; '</span>)</span><br><span class="line">            <span class="keyword">except</span> NameError:  <span class="comment"># Python3</span></span><br><span class="line">                text = input(<span class="string">'spi&gt; '</span>)</span><br><span class="line">        <span class="keyword">except</span> EOFError:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        lexer = Lexer(text)</span><br><span class="line">        parser = Parser(lexer)</span><br><span class="line">        interpreter = Interpreter(parser)</span><br><span class="line">        result = interpreter.interpret()</span><br><span class="line">        print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>å°†ä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º <code>spi.py</code> çš„æ–‡ä»¶ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» <a href="https://github.com/rspivak/lsbasi/blob/master/part7/python/spi.py" target="_blank" rel="noopener">GitHub</a> ä¸‹è½½ã€‚è‡ªå·±è¯•ä¸€è¯•ï¼Œç¡®è®¤ ä½ çš„æ–°çš„åŸºäºæ ‘çš„è§£é‡Šå™¨å¯ä»¥æ­£ç¡®åœ°å¯¹ç®—æœ¯è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ã€‚</p><p>ä¸‹é¢æ˜¯æŸæ¬¡è¿è¡Œè¿‡ç¨‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ python spi.py</span><br><span class="line">spi&gt; <span class="number">7</span> + <span class="number">3</span> * (<span class="number">10</span> / (<span class="number">12</span> / (<span class="number">3</span> + <span class="number">1</span>) - <span class="number">1</span>))</span><br><span class="line"><span class="number">22</span></span><br><span class="line">spi&gt; <span class="number">7</span> + <span class="number">3</span> * (<span class="number">10</span> / (<span class="number">12</span> / (<span class="number">3</span> + <span class="number">1</span>) - <span class="number">1</span>)) / (<span class="number">2</span> + <span class="number">3</span>) - <span class="number">5</span> - <span class="number">3</span> + (<span class="number">8</span>)</span><br><span class="line"><span class="number">10</span></span><br><span class="line">spi&gt; <span class="number">7</span> + (((<span class="number">3</span> + <span class="number">2</span>)))</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>ä»Šå¤©ä½ å­¦ä¹ äº†å…³äºè§£ææ ‘å’Œ ASTï¼Œå¦‚ä½•æ„å»º AST ä»¥åŠéå†è¡¨ç¤ºè¾“å…¥çš„ AST å¹¶è§£é‡Šæ‰§è¡Œã€‚ä½ è¿˜ä¿®æ”¹äº† parser å’Œ interpreter å¹¶å°†è¿™ä¸¤éƒ¨åˆ†è§£å¼€äº†ã€‚ç°åœ¨ lexer, parser å’Œ interpreter ä¹‹é—´çš„æ¥å£çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/post_image/LSBASI-7/lsbasi_part7_pipeline.png" alt="lsbasi_part7_pipeline"></p><p><strong>lsbasi_part7_pipeline</strong></p><p>ä½ å¯ä»¥æŠŠå®ƒè¯»ä½œâ€œparser ä» lexer ä¸­ å¾—åˆ° token ç„¶åè¿”å›ç”Ÿæˆçš„ AST ç»™ Interpreter è¿›è¡Œéå†å¹¶è§£é‡Šæ‰§è¡Œæ‰€ç»™è¾“å…¥â€ã€‚</p><h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><p>è¿™å°±æ˜¯ä»Šå¤©çš„æ‰€æœ‰å†…å®¹ï¼Œä½†åœ¨æ€»ç»“ä¹‹å‰æˆ‘è¿˜æƒ³ç®€å•åœ°èŠä¸€èŠé€’å½’ä¸‹é™ (recursive-descent) parserï¼Œå³æ˜¯ä»…ä»…ç»™å‡ºå®ƒçš„å®šä¹‰ã€‚</p><blockquote><p>å®šä¹‰å°±æ˜¯ï¼šä¸€ä¸ª <strong>é€’å½’ä¸‹é™parser</strong> å°± æ˜¯ä¸€ä¸ªè‡ªé¡¶å‘ä¸‹çš„ parserï¼Œå®ƒä½¿ç”¨ä¸€ç»„é€’å½’è¿‡ç¨‹æ¥å¤„ç†è¾“å…¥ã€‚è‡ªé¡¶å‘ä¸‹åæ˜ äº† parser ä» æ„å»ºè§£ææ ‘çš„é¡¶éƒ¨ç»“ç‚¹å¼€å§‹é€æ¸æ„å»ºæ›´ä½çš„ç»“ç‚¹è¿™ä¸€äº‹å®ã€‚</p></blockquote><h2 id="æ¢³ç†"><a href="#æ¢³ç†" class="headerlink" title="æ¢³ç†"></a>æ¢³ç†</h2><p>æœ¬èŠ‚ä¸part5ç›¸æ¯”ä¸»è¦æ·»åŠ äº†ASTï¼š</p><ol><li><code>Lexer</code>ä¸part5ä¸­çš„æ˜¯ä¸€æ ·çš„ï¼Œè¿˜æ˜¯å°†è¾“å…¥çš„textåˆ†æè½¬æ¢ä¸ºtokenã€‚(è¿™ä¹Ÿæ˜¯è¯æ³•åˆ†æå™¨çš„åŠŸèƒ½)</li><li><code>Parser</code>ç›¸æ¯”part5ï¼Œ<ul><li>å®ƒæ·»åŠ äº†æ„é€ ASTçš„å†…å®¹ï¼šæ·»åŠ äº†ä¸‰ä¸ªç±»ï¼š<ul><li><code>AST()</code>ï¼šæ˜¯ä¸€ä¸ªåŸºç±»</li><li><code>BinOp(AST)</code>ï¼šç»§æ‰¿äº<code>AST()</code>ï¼Œä¸»è¦åŠŸèƒ½æ˜¯å®ç°<strong>äºŒå…ƒæ“ä½œç¬¦<em>binary operator</em></strong> ã€‚ï¼ˆè¿™é‡Œåªæœ‰å››ç§ï¼šåŠ ã€å‡ã€ä¹˜ã€é™¤æ³•ï¼‰</li><li><code>Num(AST)</code>ï¼šç»§æ‰¿äº<code>AST()</code>ï¼Œå®ƒä¸»è¦æ˜¯è¡¨ç¤ºASTä¸­çš„æ•´æ•°integer tokenï¼ˆå®ƒå°†ä¿å­˜ä¸€ä¸ª <code>INTEGER</code> token å’Œè¯¥ token çš„å€¼ï¼‰</li></ul></li><li>ç¬¬äºŒä¸ªå˜åŒ–å°±æ˜¯å®ç°è¯­æ³•è§£æçš„è¿™ä¸‰ä¸ªå‡½æ•°<code>term</code>ã€<code>factor</code>ã€<code>expr</code>ä¸­çš„è¿”å›çš„ä¸åœ¨æ˜¯resultå˜é‡äº†ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªç»“ç‚¹nodeã€‚</li></ul></li><li><code>Interpreter</code>ï¼šé€šè¿‡è¯æ³•åˆ†æã€è¯­æ³•åˆ†æä¹‹åï¼Œå¼€å§‹è§£é‡Šè¯­æ³•åˆ†æä¹‹åçš„ç®—å¼ï¼Œè®¡ç®—å‡ºå®ƒçš„ç»“æœï¼Œç”¨<code>Interpreter</code>æ¥è§£é‡Šï¼š<ul><li>å¢æ·»äº†<strong>è®¿é—®è€…æ¨¡å¼</strong>ï¼šå°† å¯¹æ•°æ®çš„æ“ä½œ(å¯¹æ•°æ®çš„æ“ä½œåœ¨interpreterä¸­å®Œæˆï¼šè®¿é—®ã€è§£é‡Š) å’Œ æ•°æ®ç»“æ„(æ•°æ®ç»“æ„ åœ¨parserä¸­çš„ä¸‰ä¸ªç±»ä¸­æ„å»º) è¿›è¡Œåˆ†ç¦»ï¼ˆè§£è€¦åˆï¼‰ã€‚ä½¿å¾—æ“ä½œé›†åˆå¯ç›¸å¯¹è‡ªç”±åœ°æ¼”åŒ–ã€‚<ul><li>è¿™é‡Œé€šè¿‡åˆ›å»º <code>NodeVisitor()</code>ç±» å®ç°è®¿é—®è€…æ¨¡å¼ã€‚å®ç°äº†é€šè¿‡ä»€ä¹ˆæ–¹å¼å»<strong>è®¿é—®</strong>ç”Ÿæˆçš„AST</li><li>åˆé€šè¿‡<code>Interpreter</code>ï¼ˆç»§æ‰¿äº <code>NodeVisitor()</code>ç±»ï¼‰æ¥å®ç°<strong>è§£é‡Š</strong>ç”Ÿæˆçš„AST</li></ul></li></ul></li></ol><p>æœ€åï¼Œå†æ¬¡æé†’ä¸€ä¸‹ï¼šä¹‹å‰çš„é‚£å‡ å°ç»“ï¼Œæˆ‘ä»¬éƒ½æ˜¯æŠŠinterpreterçš„ä»£ç å’Œparserçš„ä»£ç æ··åœ¨ä¸€èµ·ï¼Œä½†è¿™ä¸€å°èŠ‚æˆ‘ä»¬æŠŠinterpreterçš„ä»£ç å’Œparserçš„ä»£ç <strong>åˆ†å¼€äº†</strong>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹‹å‰çš„é‚£å‡ å°ç»“ï¼Œæˆ‘ä»¬éƒ½æ˜¯æŠŠinterpreterçš„ä»£ç å’Œparserçš„ä»£ç æ··åœ¨ä¸€èµ·ï¼Œè€Œä¸”interpreteråœ¨parserè¯†åˆ«å‡ºä¸€ä¸ªå¦‚åŠ å‡ä¹˜é™¤ä¹‹ç±» çš„ç‰¹å®šçš„è¯­è¨€ç»“æ„(language construct)åï¼Œå°±ä¼šç«‹åˆ»å¯¹å®ƒè¿›è¡Œæ±‚å€¼ã€‚è¿™ç§ interpreter è¢«ç§°ä¸º &lt;strong&gt;è¯­æ³•å¯¼å‘è§£é‡Šå™¨&lt;/strong&gt;(syntax-directed interpreter)ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Let&#39;s Build A Simple Interpreter" scheme="https://www.longlongqin.top/tags/Let-s-Build-A-Simple-Interpreter/"/>
    
  </entry>
  
  <entry>
    <title>Letâ€™s Build A Simple Interpreter 6</title>
    <link href="https://www.longlongqin.top/archives/167c.html"/>
    <id>https://www.longlongqin.top/archives/167c.html</id>
    <published>2020-03-12T04:55:57.000Z</published>
    <updated>2020-03-17T09:40:01.085Z</updated>
    
    <content type="html"><![CDATA[<p>æ–°å¢äº†<strong>æ‹¬å·è¿ç®—(parenthesized expressions)</strong></p><a id="more"></a><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://ruslanspivak.com/lsbasi-part6/" target="_blank" rel="noopener">https://ruslanspivak.com/lsbasi-part6/</a></p><p>æœ¬æ–‡åœ¨å‰é¢çš„åŸºç¡€ä¸Šï¼Œæ–°å¢äº†<strong>æ‹¬å·è¿ç®—(parenthesized expressions)</strong>ï¼Œå¦‚ï¼š 7 + 3 * (10 / (12 / (3 + 1) - 1))</p><p>æ‰€ä»¥éœ€è¦åœ¨part5ä¸­çš„è¯­æ³•åŸºç¡€ä¸Šï¼Œè¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹åçš„è¯­æ³•å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part6_grammar.png" alt="lsbasi_part6_grammar"></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part5_grammar.png" alt="lsbasi_part5_grammar"></p><p>ä»ä¸Šé¢çš„å›¾å¯ä»¥çœ‹å‡ºæ¥,åœ¨part6ä¸­ï¼Œ<code>expr</code>å’Œ<code>term</code>å’Œpart5ä¸­ä¸€æ ·ï¼Œ<u>å”¯ä¸€å˜çš„æ˜¯<code>factor</code>çš„<strong>äº§ç”Ÿå¼ (production)</strong>ã€‚</u></p><blockquote><p>å®ƒæ–°æ·»åŠ äº†ä¸¤ä¸ª terminal ï¼š</p><ul><li>LPARENï¼šè¡¨ç¤ºä¸€ä¸ªå·¦æ‹¬å· left parenthesis â€˜( â€˜</li><li>RPARENï¼šè¡¨ç¤ºä¸€ä¸ªå³æ‹¬å· right parenthesis â€˜)â€™</li></ul><p>è¿˜æ–°æ·»åŠ äº†ä¸€ä¸ªéç»ˆç«¯ç¬¦ï¼š<code>expr</code></p><ul><li><code>expr</code>æ·»åŠ åœ¨ä¸¤ä¸ªæ‹¬å·ä¹‹é—´</li></ul></blockquote><p>ä¸‹é¢æ˜¯<code>factor</code>çš„è¯­æ³•å›¾ï¼šï¼ˆè¿™é‡Œç”¨åˆ°äº†<u>é€’å½’</u>ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part6_factor_diagram.png" alt="lsbasi_part6_factor_diagram"></p><p>ç„¶åï¼Œå†æ”¾ä¸€ä¸‹æ²¡æœ‰æ”¹å˜çš„ï¼ˆä¸part5ç›¸åŒï¼‰<code>expr</code>ã€<code>term</code>çš„è¯­æ³•å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part6_expr_term_diagram.png" alt="img"></p><p>ç°åœ¨çœ‹ä¸€ä¸‹ç®—å¼ï¼š2 * (7 + 3) çš„åˆ†è§£è¿‡ç¨‹å§ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part6_decomposition.png" alt="img"></p><p>ç°åœ¨æŠŠè¯­æ³•è½¬æ¢æˆä»£ç ã€‚</p><p>ä¸‹é¢è¿™ä¸¤æ¡æ˜¯ä»£ç ä¸­ä¸»è¦æ”¹å˜çš„éƒ¨åˆ†ï¼š</p><blockquote><ol><li><code>Lexer</code>è¢«ä¿®æ”¹ï¼Œä½¿å…¶åœ¨åŸæ¥çš„åŸºç¡€ä¸Šå¯ä»¥è¿”å›å¦å¤–ä¸¤ä¸ªtokenï¼šå·¦æ‹¬å·LPAREN ã€å³æ‹¬å·RPAREN</li><li><code>Interpreter</code>ç±»çš„<code>factor</code>è¢«ä¿®æ”¹ï¼Œä¿®æ”¹ä¹‹åä¸ä»…å¯ä»¥è§£ææ•´æ•°integerï¼Œè¿˜å¯ä»¥è§£ææ‹¬å·è¡¨è¾¾å¼(parenthesized expressions)</li></ol></blockquote><p>ä¸‹é¢å°±æ˜¯æœ¬å°èŠ‚çš„ä»£ç éƒ¨åˆ†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Token types</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># EOF (end-of-file) token is used to indicate that</span></span><br><span class="line"><span class="comment"># there is no more input left for lexical analysis</span></span><br><span class="line">INTEGER, PLUS, MINUS, MUL, DIV, LPAREN, RPAREN, EOF = (</span><br><span class="line">    <span class="string">'INTEGER'</span>, <span class="string">'PLUS'</span>, <span class="string">'MINUS'</span>, <span class="string">'MUL'</span>, <span class="string">'DIV'</span>, <span class="string">'('</span>, <span class="string">')'</span>, <span class="string">'EOF'</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Token</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, type, value)</span>:</span></span><br><span class="line">        self.type = type</span><br><span class="line">        self.value = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""String representation of the class instance.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Examples:</span></span><br><span class="line"><span class="string">            Token(INTEGER, 3)</span></span><br><span class="line"><span class="string">            Token(PLUS, '+')</span></span><br><span class="line"><span class="string">            Token(MUL, '*')</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Token(&#123;type&#125;, &#123;value&#125;)'</span>.format(</span><br><span class="line">            type=self.type,</span><br><span class="line">            value=repr(self.value)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__str__()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lexer</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, text)</span>:</span></span><br><span class="line">        <span class="comment"># client string input, e.g. "4 + 2 * 3 - 6 / 2"</span></span><br><span class="line">        self.text = text</span><br><span class="line">        <span class="comment"># self.pos is an index into self.text</span></span><br><span class="line">        self.pos = <span class="number">0</span></span><br><span class="line">        self.current_char = self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'Invalid character'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">advance</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Advance the `pos` pointer and set the `current_char` variable."""</span></span><br><span class="line">        self.pos += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> self.pos &gt; len(self.text) - <span class="number">1</span>:</span><br><span class="line">            self.current_char = <span class="literal">None</span>  <span class="comment"># Indicates end of input</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.current_char = self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">skip_whitespace</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isspace():</span><br><span class="line">            self.advance()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">integer</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Return a (multidigit) integer consumed from the input."""</span></span><br><span class="line">        result = <span class="string">''</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isdigit():</span><br><span class="line">            result += self.current_char</span><br><span class="line">            self.advance()</span><br><span class="line">        <span class="keyword">return</span> int(result)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_next_token</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Lexical analyzer (also known as scanner or tokenizer)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        This method is responsible for breaking a sentence</span></span><br><span class="line"><span class="string">        apart into tokens. One token at a time.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char.isspace():</span><br><span class="line">                self.skip_whitespace()</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char.isdigit():</span><br><span class="line">                <span class="keyword">return</span> Token(INTEGER, self.integer())</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'+'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(PLUS, <span class="string">'+'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'-'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(MINUS, <span class="string">'-'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'*'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(MUL, <span class="string">'*'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'/'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(DIV, <span class="string">'/'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'('</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(LPAREN, <span class="string">'('</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">')'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(RPAREN, <span class="string">')'</span>)</span><br><span class="line"></span><br><span class="line">            self.error()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Token(EOF, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Interpreter</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, lexer)</span>:</span></span><br><span class="line">        self.lexer = lexer</span><br><span class="line">        <span class="comment"># set current token to the first token taken from the input</span></span><br><span class="line">        self.current_token = self.lexer.get_next_token()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'Invalid syntax'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self, token_type)</span>:</span></span><br><span class="line">        <span class="comment"># compare the current token type with the passed token</span></span><br><span class="line">        <span class="comment"># type and if they match then "eat" the current token</span></span><br><span class="line">        <span class="comment"># and assign the next token to the self.current_token,</span></span><br><span class="line">        <span class="comment"># otherwise raise an exception.</span></span><br><span class="line">        <span class="keyword">if</span> self.current_token.type == token_type:</span><br><span class="line">            self.current_token = self.lexer.get_next_token()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.error()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">factor</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""factor : INTEGER | LPAREN expr RPAREN"""</span></span><br><span class="line">        token = self.current_token</span><br><span class="line">        <span class="keyword">if</span> token.type == INTEGER:</span><br><span class="line">            self.eat(INTEGER)</span><br><span class="line">            <span class="keyword">return</span> token.value</span><br><span class="line">        <span class="keyword">elif</span> token.type == LPAREN:</span><br><span class="line">            self.eat(LPAREN)</span><br><span class="line">            result = self.expr()</span><br><span class="line">            self.eat(RPAREN)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">term</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""term : factor ((MUL | DIV) factor)*"""</span></span><br><span class="line">        result = self.factor()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (MUL, DIV):</span><br><span class="line">            token = self.current_token</span><br><span class="line">            <span class="keyword">if</span> token.type == MUL:</span><br><span class="line">                self.eat(MUL)</span><br><span class="line">                result = result * self.factor()</span><br><span class="line">            <span class="keyword">elif</span> token.type == DIV:</span><br><span class="line">                self.eat(DIV)</span><br><span class="line">                result = result / self.factor()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">expr</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Arithmetic expression parser / interpreter.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        calc&gt; 7 + 3 * (10 / (12 / (3 + 1) - 1))</span></span><br><span class="line"><span class="string">        22</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        expr   : term ((PLUS | MINUS) term)*</span></span><br><span class="line"><span class="string">        term   : factor ((MUL | DIV) factor)*</span></span><br><span class="line"><span class="string">        factor : INTEGER | LPAREN expr RPAREN</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        result = self.term()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (PLUS, MINUS):</span><br><span class="line">            token = self.current_token</span><br><span class="line">            <span class="keyword">if</span> token.type == PLUS:</span><br><span class="line">                self.eat(PLUS)</span><br><span class="line">                result = result + self.term()</span><br><span class="line">            <span class="keyword">elif</span> token.type == MINUS:</span><br><span class="line">                self.eat(MINUS)</span><br><span class="line">                result = result - self.term()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># To run under Python3 replace 'raw_input' call</span></span><br><span class="line">            <span class="comment"># with 'input'</span></span><br><span class="line">            text = raw_input(<span class="string">'calc&gt; '</span>)</span><br><span class="line">        <span class="keyword">except</span> EOFError:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        lexer = Lexer(text)</span><br><span class="line">        interpreter = Interpreter(lexer)</span><br><span class="line">        result = interpreter.expr()</span><br><span class="line">        print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ–°å¢äº†&lt;strong&gt;æ‹¬å·è¿ç®—(parenthesized expressions)&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Let&#39;s Build A Simple Interpreter" scheme="https://www.longlongqin.top/tags/Let-s-Build-A-Simple-Interpreter/"/>
    
  </entry>
  
  <entry>
    <title>Letâ€™s Build A Simple Interpreter 5</title>
    <link href="https://www.longlongqin.top/archives/173c.html"/>
    <id>https://www.longlongqin.top/archives/173c.html</id>
    <published>2020-03-11T09:45:49.000Z</published>
    <updated>2020-03-18T13:32:38.306Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸ºè¿™ä¸€ç³»åˆ—çš„part5ï¼Œç¬¬äº”å°èŠ‚ã€‚è¿™æ¬¡å°†å†™ä¸€ä¸ªå¯ç§»æ¤æ€§åŠ å‡ä¹˜é™¤æ··åˆè¿ç®—çš„è§£é‡Šå™¨ã€‚</p><a id="more"></a><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://ruslanspivak.com/lsbasi-part5/" target="_blank" rel="noopener">https://ruslanspivak.com/lsbasi-part5/</a></p><p>æœ¬æ–‡ä¸ºè¿™ä¸€ç³»åˆ—çš„part5ï¼Œç¬¬äº”å°èŠ‚ã€‚è¿™æ¬¡å°†å†™ä¸€ä¸ªå¯ç§»æ¤æ€§åŠ å‡ä¹˜é™¤æ··åˆè¿ç®—çš„è§£é‡Šå™¨ã€‚</p><p>åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸€äº›ï¼Œæ¯”å¦‚ï¼š<strong>ç»“åˆå¾‹</strong>ã€æ“ä½œç¬¦(operator)çš„<strong>ä¼˜å…ˆçº§(precedence)</strong></p><h2 id="ç»“åˆå¾‹-associativity"><a href="#ç»“åˆå¾‹-associativity" class="headerlink" title="ç»“åˆå¾‹(associativity)"></a>ç»“åˆå¾‹(associativity)</h2><p>æ¯”å¦‚ï¼Œ7+3+1ç­‰åŒäº(7+3)+1 ï¼Œ7 - 3 - 1 ç­‰åŒäº (7 - 3) - 1ã€‚è¿™æ²¡æœ‰ä»€ä¹ˆå¥‡æ€ªçš„ã€‚ä½†æ˜¯å†æ¯”å¦‚ï¼š 7 - 3 - 1 ä¸ 7 - (3 - 1) çš„ç»“æœå°±ä¸ä¸€æ ·äº†ã€‚</p><p>å…¶å®ï¼šåŠ ã€å‡ã€ä¹˜ã€é™¤ è¿™äº›æ“ä½œç¬¦(operator)æ˜¯<strong>å·¦ç»“åˆ(left-associative)</strong>ã€‚</p><ul><li>æ¯”å¦‚ï¼Œ 7 + 3 + 1 ä¸­çš„ <strong>æ“ä½œæ•°(operand)</strong> 3ï¼Œå®ƒçš„å·¦å³éƒ½æ˜¯ åŠ å· ï¼Œä½†æ˜¯è¿™ä¸ªæ“ä½œæ•°3æ˜¯ä¸å®ƒå·¦è¾¹çš„åŠ å·â€œ+â€ç»“åˆçš„ï¼Œ æ‰€ä»¥åŠ æ³•æ˜¯å·¦ç»“åˆã€‚</li><li>é‚£åŠ å‡ä¹˜é™¤æ··åˆæ—¶ï¼Œå¦‚ 7 + 5 * 2 æ˜¯å¦è¿˜æ˜¯éµå¾ªå·¦ç»“åˆå¾‹å‘¢ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œä¸éµå¾ªï¼Œå› ä¸º (7 + 5) * 2 ä¸ç­‰äº 7 + 5 * 2 ã€‚</li></ul><p>ç”±æ­¤å¯çŸ¥ï¼š</p><p>â€‹ <u>åŠ æ³•</u>å’Œ<u>å‡æ³•</u>æ˜¯ä¸€ç±»ï¼Œæ‰€ä»¥å®ƒä»¬åœ¨ä¸€èµ·ç»„æˆçš„è¿ç®—æ˜¯å·¦ç»“åˆï¼›<u>ä¹˜æ³•</u>å’Œ<u>é™¤æ³•</u>æ˜¯ä¸€ç±»ï¼Œæ‰€ä»¥ä»–ä»¬åœ¨ä¸€èµ·ç»„æˆçš„è¿ç®—æ˜¯å·¦ç»“åˆã€‚ï¼ˆå³ï¼Œå·¦ç»“åˆå¾‹åªé€‚ç”¨äºåŒä¸€ç±»çš„æ“ä½œç¬¦(operator)ï¼‰</p><h2 id="ä¼˜å…ˆçº§-precedence"><a href="#ä¼˜å…ˆçº§-precedence" class="headerlink" title="ä¼˜å…ˆçº§(precedence)"></a>ä¼˜å…ˆçº§(precedence)</h2><p>é‚£æˆ‘ä»¬å¦‚ä½•è§„å®šè¿™ç§åŠ å‡ä¹˜é™¤ï¼ˆè¿™ä¸¤ç±»æ“ä½œç¬¦(operator)ï¼‰åŒæ—¶å‡ºç°æ—¶çš„è¿ç®—è§„åˆ™å‘¢ï¼Ÿï¼ˆå®é™…ä¸Šæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œä½†æ˜¯è¿™é‡Œæ˜¯ä¸ºå®ç°ä»£ç æ¥åšå‡ºä¸€ç§è¿ç®—è§„åˆ™ï¼‰</p><p>åœ¨ 7 + 5 * 2ä¸­ï¼Œå¦‚æœ<u>æ“ä½œç¬¦â€œ<em>â€</em></u>èƒ½å…ˆæ¯”<u>æ“ä½œç¬¦â€œ+â€</u>åˆ°ä»–çš„<u>æ“ä½œæ•°5</u>ï¼Œå°±è¯´ï¼Œæ“ä½œç¬¦â€œâ€æœ‰<strong>æ›´é«˜çš„ä¼˜å…ˆçº§(higher precedence)</strong>ã€‚</p><p>åœ¨å®é™…ä¸­æˆ‘ä»¬ä¹Ÿåœ¨ç”¨ï¼Œä¹ŸçŸ¥é“ã€‚ä¹˜é™¤çš„ä¼˜å…ˆçº§è¦é«˜äºåŠ å‡æ³•ã€‚</p><p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å¼€å§‹ç”¨è¡¨æ ¼æ¥è¡¨ç¤ºæ“ä½œç¬¦çš„ç»“åˆå¾‹ä¸ä¼˜å…ˆçº§ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part5_precedence.png" alt="éšç€ç®­å¤´æ–¹å‘ä¼˜å…ˆçº§å‡é«˜"></p><p>ç”±ä¸Šè¡¨å¯çŸ¥ï¼š+ and - æ˜¯ä¼˜å…ˆçº§ç›¸åŒï¼Œéƒ½æ˜¯å·¦ç»“åˆï¼›* and / ä¼˜å…ˆçº§ç›¸åŒï¼Œä¹Ÿéƒ½æ˜¯å·¦ç»“åˆï¼›</p><p>æˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®ä¸Šé¢çš„ä¼˜å…ˆçº§è¡¨æ ¼æ¥åˆ¶å®šä¸€ä¸ªè¯­æ³•è§„åˆ™ï¼š</p><ol><li>ä¼˜å…ˆçº§ç›¸åŒçš„æ¯ä¸€çº§éƒ½å®šä¹‰ä¸€ä¸ªéç»ˆç«¯ç¬¦(non-terminal)ã€‚å…¶ä¸­æ¯ä¸ª<strong>äº§ç”Ÿå¼(production)</strong>çš„bodyä¸­åº”è¯¥åŒ…å«:ç®—æ•°è¿ç®—ç¬¦(arithmetic operators) &amp; éç»ˆç«¯ç¬¦(è¿™é‡Œçš„éç»ˆç«¯åˆå‚ä¸æ„æˆä¸‹ä¸€è¾ƒé«˜çš„ä¼˜å…ˆçº§çš„è§„åˆ™(äº§ç”Ÿå¼)çš„ä¸€éƒ¨åˆ†)</li><li>åˆ›å»ºä¸€ä¸ªè¡¨ç¤º åŸºæœ¬è¡¨è¾¾å¼çš„éç»ˆç«¯ç¬¦<code>factor</code>ï¼Œæœ¬æ–‡ä¸­æŒ‡integerã€‚ä¸€èˆ¬çš„è§„åˆ™æ˜¯ï¼šå¦‚æœä½ æœ‰Nä¸ªä¼˜å…ˆçº§ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦N+1ä¸ªéç»ˆç«¯ç¬¦ï¼ˆä¸€ç±»æ˜¯æ¯ä¸€å±‚ä¼˜å…ˆçº§çš„ä¸€ä¸ªéç»ˆç«¯ç¬¦ï¼Œä¸€ç±»æ˜¯è¡¨ç¤ºåŸºæœ¬è¡¨è¾¾å¼å•å…ƒï¼‰</li></ol><h2 id="æ„å»ºè¯­æ³•-grammars"><a href="#æ„å»ºè¯­æ³•-grammars" class="headerlink" title="æ„å»ºè¯­æ³•(grammars)"></a>æ„å»ºè¯­æ³•(grammars)</h2><p>ç°åœ¨æ ¹æ®ä¸Šé¢çš„è§„åˆ™æ¥æ„å»ºè¯­æ³•ï¼š</p><p>ç”±è§„åˆ™1ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸¤ä¸ªéç»ˆç»“ç¬¦(non-terminal)ï¼Œä¸€ä¸ªæ˜¯leve1çš„non-terminalå«åš<code>expr</code>ï¼Œå¦ä¸€ä¸ªæ˜¯level2çš„non-terminalå«åštermã€‚ç„¶åæ ¹æ®è§„åˆ™2ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå«åš<code>factor</code>çš„non-terminalæ¥ä½œä¸ºä¸€ä¸ªåŸºæœ¬çš„è¡¨è¾¾å¼å•å…ƒï¼Œintegersã€‚</p><p>è¿™ä¸ªè¯­æ³•çš„<strong>å¼€å§‹ç¬¦å·ï¼ˆ<em>start symbol</em> ï¼‰</strong>å«åš<code>expr</code>ã€‚å®ƒçš„äº§ç”Ÿå¼(production)çš„bodyå«æœ‰ï¼š</p><ul><li><p>1ï¸âƒ£è¡¨ç¤ºlevel2çš„æ“ä½œç¬¦(åœ¨è¿™æŒ‡çš„æ˜¯+ and - )ï¼Œ</p></li><li><p>2ï¸âƒ£å’Œä¸€ä¸ªéç»ˆç«¯ç¬¦<code>term</code>(è¿™ä¸ªtermæ˜¯ä¸‹ä¸€å±‚ä¼˜å…ˆçº§ï¼ˆæ›´é«˜çš„ï¼‰level1 çš„ä¸€ä¸ªäº§ç”Ÿå¼)</p></li></ul><blockquote><p><strong>å¼€å§‹ç¬¦å·ï¼ˆSï¼‰</strong>ï¼šæœ€å¤§çš„è¯­æ³•å•ä½ æˆ– æœ€é‡è¦çš„è¯­æ³•å•ä½ã€‚ï¼ˆå¦‚ä¸Šé¢çš„é‚£ä¸ªè‹±æ–‡å¥å­ä¸­çš„ï¼Œæœ€å¤§çš„è¯­æ³•å•ä½æ˜¯ï¼šå¥å­ã€‚ï¼‰</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part5_cfg_expr.png" alt="start symbolï¼ˆå¼€å§‹ç¬¦ï¼‰:expr"></p><p>éç»ˆç«¯ç¬¦<code>term</code>çš„production(äº§ç”Ÿå¼)çš„bodyåŒ…å«:</p><ul><li><p>1ï¸âƒ£è¡¨ç¤ºlevel1çš„æ“ä½œç¬¦(åœ¨è¿™æŒ‡çš„æ˜¯ * and /)ã€‚</p></li><li><p>2ï¸âƒ£è¿˜æœ‰ä¸€ä¸ªéç»ˆç«¯ç¬¦<code>factor</code>æ¥è¡¨ç¤ºåŸºæœ¬çš„è¡¨è¾¾å¼å•å…ƒï¼Œintegers</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part5_cfg_term.png" alt="term"></p></li></ul><p>éç»ˆç«¯ç¬¦<code>factor</code>åŒ…å«ï¼š</p><ul><li><p>1ï¸âƒ£ä¸€ä¸ªinteger</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part5_cfg_factor.png" alt="factor"></p></li></ul><p>ä¸Šé¢çš„ä¸‰å¹…å›¾æ˜¯è¯­æ³•ã€è¯­æ³•å›¾çš„ä¸€éƒ¨åˆ†ï¼Œè¿™åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ä¹Ÿå‡ºç°è¿‡ã€‚ä½†ç°åœ¨éœ€è¦å°†ä¸Šé¢çš„ä¸‰å¹…å›¾ç»“åˆåœ¨ä¸€èµ·æ¥è€ƒè™‘ç»“åˆå¾‹å’Œä¼˜å…ˆçº§ï¼ˆ associativity and precedence ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part5_grammar.png" alt="img"></p><p>ä¸‹é¢æ˜¯æœ¬æ–‡çš„è¯­æ³•å¯¹åº”çš„è¯­æ³•å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-5/20200318213222.png" alt="grammar"></p><p>ä¸Šé¢è¯­æ³•å›¾çš„æ¯ä¸€ä¸ªå°æ–¹æ¡†éƒ½æ˜¯å…¶ä»–è¯­æ³•å›¾çš„ï¼šå‡½æ•°è°ƒç”¨ï¼ˆâ€œmethod callâ€ï¼‰ã€‚</p><blockquote><p>å¦‚æœä½ ä»¥è¡¨è¾¾å¼ 7 + 5 * 2 ä¸ºä¾‹å¹¶ä»é¡¶ å±‚å›¾ <code>expr</code> å¼€å§‹é€æ­¥åˆ†è§£åˆ°æœ€åº•å±‚çš„å›¾ <code>factor</code>, ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ä½äºä¸­é—´çš„å›¾çš„é«˜ä¼˜ å…ˆçº§æ“ä½œç¬¦*å’Œ/ä¼šæ¯”ä¸Šé¢çš„å›¾çš„æ“ä½œç¬¦+å’Œ-å…ˆæ‰§è¡Œã€‚</p></blockquote><p>ä¸ºäº†è§£é‡Šæ¸…æ¥šè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨ä¸Šé¢è¯­æ³•å’Œå¥æ³•å›¾æ¥åˆ†è§£ç›¸åŒç®—æœ¯è¡¨è¾¾å¼ 7 + 5 * 2 çš„è¿‡ç¨‹ã€‚è¿™åªæ˜¯å¦ä¸€ç§å±•ç¤ºé«˜ä¼˜å…ˆçº§è¿ç®—ç¬¦ å…ˆäº ä½ä¼˜å…ˆçº§è¿ç®—ç¬¦æ‰§è¡Œè¿™ä¸ªäº‹å®çš„ æ–¹å¼ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="LSBASI-5/lsbasi_part5_exprdecomp-1584538315811.png" alt="img"></p><h3 id="è¯­æ³•è½¬æ¢æˆä»£ç "><a href="#è¯­æ³•è½¬æ¢æˆä»£ç " class="headerlink" title="è¯­æ³•è½¬æ¢æˆä»£ç "></a>è¯­æ³•è½¬æ¢æˆä»£ç </h3><p>è®©æˆ‘ä»¬ä½¿ç”¨<a href="http://ruslanspivak.com/lsbasi-part4/" target="_blank" rel="noopener">part 4</a>ä¸­çš„å‡†åˆ™æŠŠè¯¥è¯­æ³•è½¬åŒ–æˆä»£ç ï¼Œçœ‹çœ‹å®ƒæ€ä¹ˆå·¥ä½œï¼Œå…ˆçœ‹ä¸€å¼ ä¸Šé¢æ”¾è¿‡çš„è¯­æ³•å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part5_grammar-1583931621458.png" alt="è¯­æ³•å›¾"></p><p>ä¸‹é¢æ˜¯èƒ½å¤„ç†å¯ä»¥åŒ…å«ä»»æ„æ•°é‡åŠ å‡ä¹˜é™¤æ“ä½œç¬¦çš„ç®—æœ¯è¡¨è¾¾å¼çš„è®¡ç®—å™¨çš„å®Œæ•´ä»£ç ã€‚</p><blockquote><p>ç›¸æ¯”äº<a href="http://ruslanspivak.com/lsbasi-part4/" target="_blank" rel="noopener">part 4</a>ä»£ç çš„ä¸»è¦å˜åŒ–æœ‰ï¼š</p><ul><li><code>Lexer</code> ç±»ç°åœ¨å¯ä»¥æŠŠ+,-,*å’Œ/éƒ½ token åŒ–äº†ï¼ˆæ²¡ä»€ä¹ˆæ–°æ–¹æ³•ï¼Œæˆ‘ä»¬åªæ˜¯æŠŠå‰é¢æ–‡ç« ä¸­ çš„ä»£ç åˆå¹¶åˆ°ä¸€ä¸ªç±»ä¸­æ¥æ”¯æŒæ‰€æœ‰è¿™äº› tokenï¼‰</li><li>å›æƒ³è¯­æ³•ä¸­çš„æ¯æ¡è§„åˆ™ï¼ˆäº§ç”Ÿå¼ï¼‰Réƒ½è¦å˜æˆä¸€ä¸ªåŒåçš„æ–¹æ³•ï¼Œä¸”å¯¹è¯¥è§„åˆ™çš„å¼•ç”¨éƒ½è¦å˜ æˆä¸€ä¸ªæ–¹æ³•è°ƒç”¨ <code>R()</code> è¿™ä¸€ç‚¹ã€‚ç°åœ¨ <code>Interpreter</code> ç±»æœ‰äº†ä¸‰ä¸ªæ–¹æ³•æ¥å¯¹åº”è¯­æ³•ä¸­çš„é ç»ˆç»“ç¬¦ï¼š <code>expr</code>, <code>term</code>, <code>factor</code>.</li></ul></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Token types</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># EOF (end-of-file) token is used to indicate that</span></span><br><span class="line"><span class="comment"># there is no more input left for lexical analysis</span></span><br><span class="line">INTEGER, PLUS, MINUS, MUL, DIV, EOF = (</span><br><span class="line">    <span class="string">'INTEGER'</span>, <span class="string">'PLUS'</span>, <span class="string">'MINUS'</span>, <span class="string">'MUL'</span>, <span class="string">'DIV'</span>, <span class="string">'EOF'</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Token</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, type, value)</span>:</span></span><br><span class="line">        <span class="comment"># token type: INTEGER, PLUS, MINUS, MUL, DIV, or EOF</span></span><br><span class="line">        self.type = type</span><br><span class="line">        <span class="comment"># token value: non-negative integer value, '+', '-', '*', '/', or None</span></span><br><span class="line">        self.value = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""String representation of the class instance.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Examples:</span></span><br><span class="line"><span class="string">            Token(INTEGER, 3)</span></span><br><span class="line"><span class="string">            Token(PLUS, '+')</span></span><br><span class="line"><span class="string">            Token(MUL, '*')</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Token(&#123;type&#125;, &#123;value&#125;)'</span>.format(</span><br><span class="line">            type=self.type,</span><br><span class="line">            value=repr(self.value)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__str__()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lexer</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, text)</span>:</span></span><br><span class="line">        <span class="comment"># client string input, e.g. "3 * 5", "12 / 3 * 4", etc</span></span><br><span class="line">        self.text = text</span><br><span class="line">        <span class="comment"># self.pos is an index into self.text</span></span><br><span class="line">        self.pos = <span class="number">0</span></span><br><span class="line">        self.current_char = self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'Invalid character'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">advance</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Advance the `pos` pointer and set the `current_char` variable."""</span></span><br><span class="line">        self.pos += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> self.pos &gt; len(self.text) - <span class="number">1</span>:</span><br><span class="line">            self.current_char = <span class="literal">None</span>  <span class="comment"># Indicates end of input</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.current_char = self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">skip_whitespace</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isspace():</span><br><span class="line">            self.advance()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">integer</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Return a (multidigit) integer consumed from the input."""</span></span><br><span class="line">        result = <span class="string">''</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isdigit():</span><br><span class="line">            result += self.current_char</span><br><span class="line">            self.advance()</span><br><span class="line">        <span class="keyword">return</span> int(result)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_next_token</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Lexical analyzer (also known as scanner or tokenizer)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        This method is responsible for breaking a sentence</span></span><br><span class="line"><span class="string">        apart into tokens. One token at a time.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char.isspace():</span><br><span class="line">                self.skip_whitespace()</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char.isdigit():</span><br><span class="line">                <span class="keyword">return</span> Token(INTEGER, self.integer())</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'+'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(PLUS, <span class="string">'+'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'-'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(MINUS, <span class="string">'-'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'*'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(MUL, <span class="string">'*'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'/'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(DIV, <span class="string">'/'</span>)</span><br><span class="line"></span><br><span class="line">            self.error()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Token(EOF, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Interpreter</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, lexer)</span>:</span></span><br><span class="line">        self.lexer = lexer</span><br><span class="line">        <span class="comment"># set current token to the first token taken from the input</span></span><br><span class="line">        self.current_token = self.lexer.get_next_token()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'Invalid syntax'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self, token_type)</span>:</span></span><br><span class="line">        <span class="comment"># compare the current token type with the passed token</span></span><br><span class="line">        <span class="comment"># type and if they match then "eat" the current token</span></span><br><span class="line">        <span class="comment"># and assign the next token to the self.current_token,</span></span><br><span class="line">        <span class="comment"># otherwise raise an exception.</span></span><br><span class="line">        <span class="keyword">if</span> self.current_token.type == token_type:</span><br><span class="line">            self.current_token = self.lexer.get_next_token()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.error()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">factor</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""factor : INTEGER"""</span></span><br><span class="line">        token = self.current_token</span><br><span class="line">        self.eat(INTEGER)</span><br><span class="line">        <span class="keyword">return</span> token.value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">term</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""term : factor ((MUL | DIV) factor)*"""</span></span><br><span class="line">        result = self.factor()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (MUL, DIV):</span><br><span class="line">            token = self.current_token</span><br><span class="line">            <span class="keyword">if</span> token.type == MUL:</span><br><span class="line">                self.eat(MUL)</span><br><span class="line">                result = result * self.factor()</span><br><span class="line">            <span class="keyword">elif</span> token.type == DIV:</span><br><span class="line">                self.eat(DIV)</span><br><span class="line">                result = result / self.factor()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">expr</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Arithmetic expression parser / interpreter.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        calc&gt;  14 + 2 * 3 - 6 / 2</span></span><br><span class="line"><span class="string">        17</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        expr   : term ((PLUS | MINUS) term)*</span></span><br><span class="line"><span class="string">        term   : factor ((MUL | DIV) factor)*</span></span><br><span class="line"><span class="string">        factor : INTEGER</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        result = self.term()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (PLUS, MINUS):</span><br><span class="line">            token = self.current_token</span><br><span class="line">            <span class="keyword">if</span> token.type == PLUS:</span><br><span class="line">                self.eat(PLUS)</span><br><span class="line">                result = result + self.term()</span><br><span class="line">            <span class="keyword">elif</span> token.type == MINUS:</span><br><span class="line">                self.eat(MINUS)</span><br><span class="line">                result = result - self.term()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># To run under Python3 replace 'raw_input' call</span></span><br><span class="line">            <span class="comment"># with 'input'</span></span><br><span class="line">            text = raw_input(<span class="string">'calc&gt; '</span>)</span><br><span class="line">        <span class="keyword">except</span> EOFError:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        lexer = Lexer(text)</span><br><span class="line">        interpreter = Interpreter(lexer)</span><br><span class="line">        result = interpreter.expr()</span><br><span class="line">        print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>å°†ä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º <code>calc5.py</code> ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» <a href="https://github.com/rspivak/lsbasi/blob/master/part5/calc5.py" target="_blank" rel="noopener">GitHub</a> ä¸Šä¸‹è½½ã€‚å’Œä»¥å¾€ä¸€æ ·ï¼Œè‡ªå·±å° è¯•ä¸€ä¸‹ï¼Œç¡®è®¤è§£é‡Šå™¨å¯ä»¥å¯¹åŒ…å«ä¸åŒä¼˜å…ˆçº§æ“ä½œç¬¦çš„ç®—æœ¯è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ã€‚</p><h2 id="æ¢³ç†"><a href="#æ¢³ç†" class="headerlink" title="æ¢³ç†"></a>æ¢³ç†</h2><p>ä»£ç ä¸­æœ‰ä¸‰ä¸ªç±»(class)ï¼Œä»–ä»¬ä¸­çš„å‡½æ•°åŠä½œç”¨ï¼š</p><ol><li><p><code>Token</code>ï¼š</p><ul><li><p><code>__init__</code>ï¼šåˆå§‹åŒ–å®ä¾‹</p></li><li><p><code>__str__</code>ï¼šå­—ç¬¦ä¸²å½¢å¼</p></li><li><p><code>__repr__</code>ï¼šå­—ç¬¦ä¸²å½¢å¼</p><blockquote><p>åœ¨Pythonä¸­ï¼Œæ‰€æœ‰ä»¥â€œ_<em>â€åŒä¸‹åˆ’çº¿åŒ…èµ·æ¥çš„æ–¹æ³•ï¼Œéƒ½ç»Ÿç§°ä¸ºâ€œMagic Methodâ€ï¼ˆé­”æœ¯æ–¹æ³•ï¼‰,ä¾‹å¦‚ç±»çš„åˆå§‹åŒ–æ–¹æ³• __init_</em></p><table><thead><tr><th><strong><strong>repr</strong>(self)</strong></th><th>å®šä¹‰å½“è¢« repr() è°ƒç”¨æ—¶çš„è¡Œä¸º</th></tr></thead><tbody><tr><td><strong><strong>str</strong>(self)</strong></td><td>å®šä¹‰å½“è¢« str() è°ƒç”¨æ—¶çš„è¡Œä¸º</td></tr></tbody></table></blockquote></li></ul></li><li><p><code>Lexer</code>ç”¨äºè¯æ³•åˆ†æï¼š</p><ul><li><code>__init__</code>ï¼šåˆå§‹åŒ–å®ä¾‹</li><li><code>error</code>ï¼šé”™è¯¯æç¤º</li><li><code>advance</code>ï¼šä½¿poså‰è¿›ä¸€ä¸ªä½ç½®</li><li><code>skip_whitespace</code>ï¼šç•¥è¿‡ç©ºæ ¼</li><li><code>integer</code>ï¼šè¯†åˆ«æ•´æ•°ï¼ˆå¯ä»¥è¯†åˆ«å¤šä½æ•°ï¼‰</li><li><code>get_next_token</code>ï¼šè·å¾—ä¸€ä¸ªtokenï¼ˆå…¶å®æˆ‘è§‰å¾—å«åšï¼š<code>get_token_and_to_next</code>æ›´åˆé€‚ï¼‰</li></ul></li><li><p><code>Interpreter</code>ç”¨äºè¯­æ³•åˆ†æï¼š</p><ul><li><code>__init__</code>ï¼šåˆå§‹åŒ–å®ä¾‹</li><li><code>error</code>ï¼šé”™è¯¯æç¤º</li><li><code>eat</code>ï¼šè´Ÿè´£æ£€æµ‹å½“å‰çš„token.typeä¸ä¼ å…¥çš„token_typeæ˜¯å¦ç›¸åŒã€‚è‹¥ç›¸åŒï¼Œåˆ™å°†å½“å‰çš„tokenâ€œåƒäº†â€ï¼Œç„¶åæŠŠå½“å‰tokençš„ä¸‹ä¸€ä¸ªtokenåˆ†é…ç»™current_tokenã€‚</li><li>ä¸‹é¢å°±æ˜¯è¯­æ³•åˆ†æçš„æ ¸å¿ƒäº†ï¼Œç”±ä¸Šé¢çš„åˆ†æç›´åˆ°ï¼Œå®ƒç”±ï¼š<code>expr</code>ã€<code>term</code>ã€<code>factor</code>æ„æˆã€‚</li></ul></li></ol><p>æ¢³ç†å®Œæ¯•ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä¸ºè¿™ä¸€ç³»åˆ—çš„part5ï¼Œç¬¬äº”å°èŠ‚ã€‚è¿™æ¬¡å°†å†™ä¸€ä¸ªå¯ç§»æ¤æ€§åŠ å‡ä¹˜é™¤æ··åˆè¿ç®—çš„è§£é‡Šå™¨ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Let&#39;s Build A Simple Interpreter" scheme="https://www.longlongqin.top/tags/Let-s-Build-A-Simple-Interpreter/"/>
    
  </entry>
  
  <entry>
    <title>Letâ€™s Build A Simple Interpreter 4</title>
    <link href="https://www.longlongqin.top/archives/3b16.html"/>
    <id>https://www.longlongqin.top/archives/3b16.html</id>
    <published>2020-03-10T09:27:30.000Z</published>
    <updated>2020-03-17T08:39:30.795Z</updated>
    
    <content type="html"><![CDATA[<p>å¬è€Œæ˜“å¿˜ï¼Œè§è€Œæ˜“å¿˜ï¼Œåšè€Œæ˜“æ‡‚</p><a id="more"></a><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://ruslanspivak.com/lsbasi-part4/" target="_blank" rel="noopener">https://ruslanspivak.com/lsbasi-part4/</a></p><p>åœ¨å‰é¢çš„æ–‡ç« ä¸­ä½ å­¦ä¼šäº†æ€æ ·è¯†åˆ«å’Œè§£é‡ŠåŒ…å«ä»»æ„æ•°é‡çš„åŠ å‡æ“ä½œçš„ç®—æœ¯è¡¨è¾¾å¼ï¼Œä¾‹å¦‚â€œ7 - 3 + 2 - 1â€ã€‚è¿˜å­¦ä¼šäº†å¥æ³•å›¾ä»¥åŠå®ƒä»¬å¦‚ä½•è¢«ç”¨æ¥è¡¨ç¤ºä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•ã€‚</p><p>ä»Šå¤©ä½ å°†ä¼šå­¦ä¹ è§£æ(parse)å’Œè§£é‡Š(interpret)åŒ…å«ä»»æ„ä¹˜é™¤æ“ä½œçš„ç®—æœ¯è¡¨è¾¾å¼ï¼Œä¾‹å¦‚â€œ7 * 4 / 2 * 3â€ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä½¿ç”¨çš„æ˜¯æ•´æ•°é™¤æ³•ï¼Œæ‰€ä»¥å¯¹äºè¡¨è¾¾å¼â€œ9 / 4â€æ¥è¯´ï¼Œç»“æœæ˜¯ä¸€ä¸ª æ•´æ•°ï¼š2ã€‚</p><p>æˆ‘ä»Šå¤©ä¼šè®²å¾ˆå¤šå¦ä¸€ä¸ªè¡¨ç¤ºç¼–ç¨‹è¯­è¨€å¥æ³•çš„å¹¿æ³›ä½¿ç”¨çš„è¡¨ç¤ºæ³•ï¼Œå« <strong>ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•</strong> (context-free grammars, ç®€è®°ä¸º grammars)æˆ– <strong>BNF</strong> (Backus-Naur Form)ã€‚ä¸ºäº†è¿™ç¯‡æ–‡ç« çš„ç›®çš„ï¼Œæˆ‘ä¸ä¼šä½¿ç”¨çº¯ <a href="https://en.wikipedia.org/wiki/Backusâ€“Naur_Form" target="_blank" rel="noopener">BNF</a> è®°æ³•ï¼Œè€Œæ›´åƒæ˜¯ä¸€ä¸ªä¿®æ”¹è¿‡çš„ <a href="https://en.wikipedia.org/wiki/Extended_Backusâ€“Naur_Form" target="_blank" rel="noopener">EBNF</a> è®°æ³•ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨è¯­æ³•çš„åŸå› ï¼š</p><ol><li>è¯­æ³•ä½¿ç”¨äº†ä¸€ç§ç®€æ˜çš„æ–¹å¼æ¥æè¿°ä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„å¥æ³•ã€‚ä¸åƒè¯­æ³•å›¾ï¼Œè¯­æ³•éå¸¸ç´§å‡‘ã€‚ åœ¨ä»¥åçš„æ–‡ç« ä¸­ï¼Œä½ ä¼šçœ‹åˆ°æˆ‘è¶Šæ¥è¶Šå¤šåœ°ä½¿ç”¨è¯­æ³•ã€‚</li><li>è¯­æ³•å¯ä»¥åšä¸ºæ–‡æ¡£ä¿å­˜ã€‚</li><li>å³ä½¿å¯¹ä»å¤´å¼€å§‹å†™è§£æå™¨(parser)æ¥è¯´ï¼Œè¯­æ³•ä¹Ÿæ˜¯ä¸€ä¸ªå¥½çš„å…¥æ‰‹ç‚¹ã€‚å¾ˆå¤šæ—¶å€™é€šè¿‡éµå¾ª ä¸€å¥—ç®€å•çš„è§„åˆ™ä½ å°±å¯ä»¥æŠŠè¯­æ³•è½¬åŒ–æˆä»£ç ã€‚</li><li>æœ‰ä¸€å¥—å·¥å…·ï¼Œå«è§£æå™¨ç”Ÿæˆå™¨(parser generator)ï¼Œå¯ä»¥æŠŠè¯­æ³•åšä¸ºè¾“å…¥å¹¶è‡ªåŠ¨æ ¹æ®å®ƒä¸ºä½ ç”Ÿæˆä¸€ä¸ªè§£æå™¨ã€‚æˆ‘ä¼šä»¥ååœ¨è¿™ä¸ªç³»åˆ—ä¸­è°ˆåˆ°è¿™äº›å·¥å…·ã€‚</li></ol><h2 id="è¯­æ³•æœºåˆ¶"><a href="#è¯­æ³•æœºåˆ¶" class="headerlink" title="è¯­æ³•æœºåˆ¶"></a>è¯­æ³•æœºåˆ¶</h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥èŠèŠè¯­æ³•çš„æœºåˆ¶æ–¹é¢ï¼š</p><p>ä¸‹é¢çš„è¯­æ³•æè¿°äº†ç®—æœ¯è¡¨è¾¾å¼ï¼Œåƒâ€œ7 * 4 / 2 * 3â€è¿™æ ·çš„ï¼ˆè¿™åªæ˜¯è¯¥è¯­æ³•å¯ä»¥ç”Ÿæˆçš„è®¸å¤šè¡¨è¾¾å¼<strong>ä¹‹ä¸€</strong>ï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200310202232.png" alt="BNF-1"></p><p>è¯­æ³•æ˜¯ç”±ä¸€ç³»åˆ—è§„åˆ™ç»„æˆçš„ï¼Œä¹Ÿè¢«ç§°ä¸º<strong>äº§ç”Ÿå¼(production)</strong>ã€‚æˆ‘ä»¬çš„è¯­æ³•ä¸­æœ‰ä¸¤æ¡è§„åˆ™(äº§ç”Ÿå¼)ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200310202500.png" alt=""></p><ul><li><p>1ã€ä¸€æ¡è§„åˆ™ç”±ä¸€ä¸ªéç»ˆç»“ç¬¦(å«åš <strong>head</strong>æˆ–ç”Ÿæˆå¼çš„<strong>å·¦</strong>è¾¹) <strong>+</strong> ä¸€ä¸ªåˆ†å·ï¼ˆ:ï¼‰<strong>+</strong> <u>ä¸€ç³»åˆ—ç»ˆç»“ç¬¦ å’Œ/æˆ– éç»ˆç»“ç¬¦</u>(å«åš <strong>body</strong> æˆ– <strong>å³è¾¹</strong>)ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200310204653.png" alt=""></p></li><li><p>2ã€åœ¨ä¸Šé¢å±•ç¤ºçš„è¯­æ³•ä¸­ï¼Œåƒ MUL, DIV, æˆ– INTEGER è¿™æ ·çš„ token è¢«ç§°ä¸º <strong>ç»ˆç»“ç¬¦(terminals)</strong>, <code>expr</code> <code>factor</code> è¿™æ ·çš„å˜é‡è¢«ç§°ä¸º <strong>éç»ˆç»“ç¬¦(not-terminals)</strong>.</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200310204953.png" alt=""></p></li></ul><p>ç¬¬ä¸€æ¡è§„åˆ™å·¦è¾¹çš„éç»ˆç»“ç¬¦è¢«å«åš <strong>å¼€å§‹ç¬¦å·(start symbol)</strong>. åœ¨æˆ‘ä»¬çš„è¯­æ³•ä¸­ï¼Œå¼€å§‹ç¬¦å·æ˜¯ <em>expr</em>:</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200310205155.png" alt=""></p><p>ä½ å¯ä»¥è¿™ä¹ˆç†è§£ <code>expr</code> è¿™æ¡è§„åˆ™ï¼šâ€œexpr æ˜¯ä¸€ä¸ª factor åé¢å¯é€‰åœ°è·Ÿä¸€ä¸ªä¹˜æˆ–é™¤è¿ç®—ç¬¦å†è·Ÿ å¦ä¸€ä¸ª factorï¼Œåé¢ä¹Ÿç›¸åº”å¯é€‰åœ°è·Ÿä¸€ä¸ªä¹˜æˆ–é™¤è¿ç®—ç¬¦å†è·Ÿå¦ä¸€ä¸ª factorï¼Œå¦‚æ­¤é‡å¤â€ã€‚</p><p>factor æ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºæœ¬æ–‡æ¥è¯´ factor å°±æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚</p><h3 id="è¯­æ³•ä¸­çš„ç¬¦å·"><a href="#è¯­æ³•ä¸­çš„ç¬¦å·" class="headerlink" title="è¯­æ³•ä¸­çš„ç¬¦å·"></a>è¯­æ³•ä¸­çš„ç¬¦å·</h3><p>è®©æˆ‘ä»¬å¿«é€Ÿåœ°è¿‡ä¸€éè¯­æ³•ä¸­çš„ç¬¦å·åŠå®ƒä»¬çš„æ„ä¹‰ã€‚</p><ul><li><p><code>|</code>å¤šé€‰ä¸€ã€‚ç«–çº¿è¡¨ç¤ºâ€œæˆ–â€ã€‚æ‰€ä»¥ <code>(MUL | DIV)</code> è¡¨ç¤º MUL æˆ– DIV</p></li><li><p><code>(...)</code>è¢«æ‹¬å·åŒ…å›´è¡¨ç¤ºæŠŠç»ˆç»“ç¬¦ å’Œ/æˆ– éç»ˆç»“ç¬¦ç»„æˆä¸€ç»„ï¼Œå°±åƒ <code>(MUL | DIV)</code></p></li><li><p><code>(...)*</code>åˆ†ç»„ä¸­çš„å†…å®¹è¢«åŒ¹é… 0 æˆ– å¤šæ¬¡ã€‚</p></li></ul><p>è¯­æ³•é€šè¿‡è§£é‡Šå¯ä»¥ç»„æˆä»€ä¹ˆæ ·çš„å¥å­æ¥å®šä¹‰ä¸€é—¨è¯­è¨€ã€‚é€šè¿‡è¯­æ³•æ´¾ç”Ÿå‡ºç®—æœ¯è¡¨è¾¾å¼çš„æ–¹å¼ä¸ºï¼šé¦–å…ˆä»å¼€å§‹ç¬¦å· <code>expr</code> å¼€å§‹ï¼Œç„¶ååå¤åœ°ä½¿ç”¨æ‰€åŒ…å«çš„éç»ˆç»“ç¬¦çš„è§„åˆ™æ›¿æ¢è¯¥éç»ˆç»“ç¬¦ï¼Œ ç›´åˆ°ç”Ÿæˆä¸€ä¸ª<u>åªåŒ…å«ç»ˆç»“ç¬¦çš„</u>å¥å­ã€‚è¯­æ³•èƒ½ç»„æˆçš„å¥å­æ„æˆäº†ä¸€é—¨è¯­è¨€ã€‚</p><p>ä¸‹é¢ä¸¾ä¾‹è¯´æ˜ï¼š</p><ul><li><p>ä¾‹1ï¼Œä¸‹é¢æ˜¯è¯­æ³•å¦‚ä½•æ´¾ç”Ÿå‡ºè¡¨è¾¾å¼ <code>3</code>:</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200310210521.png" alt=""></p></li><li><p>ä¾‹2ï¼Œä¸‹é¢æ˜¯è¯­æ³•å¦‚ä½•æ´¾ç”Ÿå‡ºè¡¨è¾¾å¼ <code>3 * 7</code>:</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200310210557.png" alt=""></p></li><li><p>ä¾‹3ï¼Œä¸‹é¢æ˜¯è¯­æ³•å¦‚ä½•æ´¾ç”Ÿå‡ºè¡¨è¾¾å¼ <code>3 * 7 / 2</code>:</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part4_derive3.png" alt="img"></p></li></ul><h2 id="å°†è¯­æ³•å˜æˆä»£ç "><a href="#å°†è¯­æ³•å˜æˆä»£ç " class="headerlink" title="å°†è¯­æ³•å˜æˆä»£ç "></a>å°†è¯­æ³•å˜æˆä»£ç </h2><p>ä¸‹é¢æ˜¯ä¸€äº›æˆ‘ä»¬åœ¨æŠŠè¯­æ³•è½¬åŒ–æˆæºä»£ç æ—¶ä¼šç”¨åˆ°çš„==å››ä¸ªå‡†åˆ™==ã€‚æŒ‰ç…§è¿™äº›å‡†åˆ™ï¼Œä½ çœŸçš„å°±å¯ä»¥æŠŠè¯­æ³•ç¿»è¯‘æˆä¸€ä¸ªå¯å·¥ä½œçš„ parser:</p><ol><li>å¯¹äºè¯­æ³•ä¸­å®šä¹‰çš„æ¯ä¸ªè§„åˆ™ Rï¼Œå°†å®ƒåšæˆä¸€ä¸ªæœ‰ç›¸åŒåå­—çš„æ–¹æ³•ï¼Œå¯¹è¯¥è§„åˆ™çš„å¼•ç”¨å°±å˜æˆäº†ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼šR()ã€‚è¯¥æ–¹æ³•çš„æ–¹æ³•ä½“éµå¾ªè¯¥è§„åˆ™çš„æ­¥éª¤ï¼Œè¿‡ç¨‹ä¸­ä½¿ç”¨ç›¸åŒçš„å‡†åˆ™ã€‚</li><li>å¤šé€‰ä¸€ <code>(a1|a2|aN)</code> å˜æˆ <strong>if-elif-else</strong> è¯­å¥</li><li>å¯é€‰ç»„ <code>(...)*</code> å˜æˆä¸€ä¸ªå¯ä»¥æ‰§è¡Œ 0 æˆ–å¤šæ¬¡çš„ <strong>while</strong> å¾ªç¯ï¼ˆcan loop over zero or more timesï¼‰</li><li>æ¯ä¸ª Token è®°ä¸º T å˜æˆä¸€ä¸ª <code>eat</code> æ–¹æ³•è°ƒç”¨: <code>eat(T)</code>. <code>eat</code> æ–¹æ³•çš„å·¥ä½œæ˜¯ å½“å®ƒåŒ¹é…åˆ°å½“å‰çš„<code>å‘å‰çœ‹</code> (lookahead) token å°±æ¶ˆè€—æ‰å®ƒï¼Œç„¶åä» lexer ä¸­å¾—åˆ°ä¸€ä¸ªæ–° token å¹¶å°†å®ƒèµ‹å€¼ç»™å†…éƒ¨å˜é‡ <code>current_token</code>.</li></ol><p>è¿™äº›å‡†åˆ™çœ‹ä¸Šå»åƒè¿™æ ·ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200310211240.png" alt=""></p><p>è®©æˆ‘ä»¬ç»§ç»­å¹¶éµå¾ªä¸Šè¿°å‡†åˆ™æŠŠæˆ‘ä»¬çš„è¯­æ³•è½¬åŒ–ä¸ºä»£ç ã€‚</p><p>æˆ‘ä»¬çš„è¯­æ³•ä¸­æœ‰ä¸¤æ¡è§„åˆ™ï¼š <code>expr</code> å’Œ <code>factor</code>. æˆ‘ä»¬ä» <code>factor</code> è§„åˆ™ï¼ˆç”Ÿæˆå¼ï¼‰å¼€å§‹ã€‚ æ ¹æ®å‡†åˆ™ï¼Œéœ€è¦æ–°å»ºä¸€ä¸ªåä¸º factor çš„æ–¹æ³•ï¼ˆå‡†åˆ™1)ï¼Œå®ƒè°ƒç”¨äº†ä¸€æ¬¡ <code>eat</code> æ–¹æ³•æ¥æ¶ˆè€—INTEGER token ï¼ˆå‡†åˆ™4)ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factor</span><span class="params">(self)</span>:</span>   <span class="comment">#factorå°±æ˜¯æŒ‡çš„integerå‹æ•°å€¼</span></span><br><span class="line">    self.eat(INTEGER)</span><br></pre></td></tr></table></figure><p><code>expr</code> è§„åˆ™å˜æˆäº† <code>expr</code> æ–¹æ³•ï¼ˆè¿˜æ˜¯å‡†åˆ™1ï¼‰ã€‚è§„åˆ™ä½“(body)å¼€å§‹çš„ <code>factor</code> å¼•ç”¨ å˜æˆäº†å¯¹ <code>factor()</code> æ–¹æ³•çš„è°ƒç”¨ã€‚å¯è¡Œç»„ <code>(...)*</code> å˜æˆäº†ä¸€ä¸ª <code>while</code> å¾ªç¯ï¼Œå¤šé€‰ä¸€ <code>(MUL|DIV)</code> å˜æˆäº†ä¸€ä¸ª <code>if-elif-else</code> è¯­å¥ã€‚æŠŠè¿™äº›ç‰‡æ®µåˆå¹¶åœ¨ä¸€èµ·å°±å¾—åˆ°äº†ä¸‹é¢çš„<code>expr</code> æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">expr</span><span class="params">(self)</span>:</span></span><br><span class="line">    self.factor() <span class="comment">#è¯­æ³•å‡†åˆ™ä¸­çš„ç¬¬ä¸€ä¸ªfactor</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (MUL, DIV):</span><br><span class="line">        token = self.current_token</span><br><span class="line">        <span class="keyword">if</span> token.type == MUL:</span><br><span class="line">            self.eat(MUL)</span><br><span class="line">            self.factor()</span><br><span class="line">        <span class="keyword">elif</span> token.type == DIV:</span><br><span class="line">            self.eat(DIV)</span><br><span class="line">            self.factor()</span><br></pre></td></tr></table></figure><p>åŸä½œè€…å°†æœ¬æ–‡çš„ä»£ç æ”¾åœ¨äº†æ–‡ä»¶ <code>parser.py</code> ä¸­ï¼Œå®ƒåŒ…å«äº† lexer å’Œ parser ä½†æ²¡æœ‰interpreterã€‚ä½ å¯ä»¥ç›´æ¥ä» <a href="https://github.com/rspivak/lsbasi/blob/master/part4/parser.py" target="_blank" rel="noopener">GitHub</a>ä¸‹è½½å¹¶å°è¯•ä¸€ä¸‹ã€‚å®ƒåŒ…å«æœ‰ä¸€ä¸ª interpreter æç¤ºç¬¦ï¼Œä½ å¯ä»¥è¾“å…¥è¡¨è¾¾å¼æ¥æŸ¥çœ‹å®ƒæ˜¯å¦åˆæ³•ï¼Œå³æŸ¥çœ‹æ ¹æ®è¯­æ³•å»ºç«‹çš„ parser æ˜¯å¦å¯ä»¥è¯†åˆ«å‡ºè¡¨è¾¾å¼ã€‚</p><p>ä¸‹é¢æ˜¯åœ¨æˆ‘ç¬”è®°æœ¬ä¸Šçš„ä¸€æ¬¡å°è¯•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ python parser.py</span><br><span class="line">calc&gt; <span class="number">3</span></span><br><span class="line">calc&gt; <span class="number">3</span> * <span class="number">7</span></span><br><span class="line">calc&gt; <span class="number">3</span> * <span class="number">7</span> / <span class="number">2</span></span><br><span class="line">calc&gt; <span class="number">3</span> *</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"parser.py"</span>, line <span class="number">155</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    main()</span><br><span class="line">  File <span class="string">"parser.py"</span>, line <span class="number">151</span>, <span class="keyword">in</span> main</span><br><span class="line">    parser.parse()</span><br><span class="line">  File <span class="string">"parser.py"</span>, line <span class="number">136</span>, <span class="keyword">in</span> parse</span><br><span class="line">    self.expr()</span><br><span class="line">  File <span class="string">"parser.py"</span>, line <span class="number">130</span>, <span class="keyword">in</span> expr</span><br><span class="line">    self.factor()</span><br><span class="line">  File <span class="string">"parser.py"</span>, line <span class="number">114</span>, <span class="keyword">in</span> factor</span><br><span class="line">    self.eat(INTEGER)</span><br><span class="line">  File <span class="string">"parser.py"</span>, line <span class="number">107</span>, <span class="keyword">in</span> eat</span><br><span class="line">    self.error()</span><br><span class="line">  File <span class="string">"parser.py"</span>, line <span class="number">97</span>, <span class="keyword">in</span> error</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">'Invalid syntax'</span>)</span><br><span class="line">Exception: Invalid syntax</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå†æ¬¡æèµ·è¯­æ³•å›¾ã€‚è¿™æ˜¯ç›¸åŒçš„ <code>expr</code> è§„åˆ™ï¼ˆä¹Ÿå«ï¼Œäº§ç”Ÿå¼(production)ï¼‰å¯¹åº”çš„å¥æ³•å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200310212342.png" alt="expr"></p><p>ä¸‹é¢æ˜¯åŸä½œè€…çš„å…³äºæœ¬æ–‡çš„æºç ã€‚ä¸‹é¢æ˜¯å¯ä»¥å¤„ç†åŒ…å«ä»»æ„æ•°é‡æ•´æ•° ä¹˜é™¤ï¼ˆæ•´æ•°é™¤æ³•ï¼‰æ“ä½œçš„åˆæ³•çš„ç®—æœ¯è¡¨è¾¾å¼çš„è®¡ç®—å™¨ä»£ç ã€‚è¿™é‡ŒæŠŠè¯æ³•åˆ†æå™¨é‡æ„ åˆ°äº†ä¸€ä¸ªå•ç‹¬çš„ç±» <code>Lexer</code> ä¸­ï¼Œå¹¶è®© <code>Interpreter</code> ç±»ä½¿ç”¨ <code>Lexer</code> å®ä¾‹åšä¸ºå‚æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Token types</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># EOF (end-of-file) token is used to indicate that</span></span><br><span class="line"><span class="comment"># there is no more input left for lexical analysis</span></span><br><span class="line">INTEGER, MUL, DIV, EOF = <span class="string">'INTEGER'</span>, <span class="string">'MUL'</span>, <span class="string">'DIV'</span>, <span class="string">'EOF'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Token</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, type, value)</span>:</span></span><br><span class="line">        <span class="comment"># token type: INTEGER, MUL, DIV, or EOF</span></span><br><span class="line">        self.type = type</span><br><span class="line">        <span class="comment"># token value: non-negative integer value, '*', '/', or None</span></span><br><span class="line">        self.value = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""String representation of the class instance.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Examples:</span></span><br><span class="line"><span class="string">            Token(INTEGER, 3)</span></span><br><span class="line"><span class="string">            Token(MUL, '*')</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Token(&#123;type&#125;, &#123;value&#125;)'</span>.format(</span><br><span class="line">            type=self.type,</span><br><span class="line">            value=repr(self.value)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__str__()</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¯æ³•åˆ†æ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lexer</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, text)</span>:</span></span><br><span class="line">        <span class="comment"># client string input, e.g. "3 * 5", "12 / 3 * 4", etc</span></span><br><span class="line">        self.text = text</span><br><span class="line">        <span class="comment"># self.pos is an index into self.text</span></span><br><span class="line">        self.pos = <span class="number">0</span></span><br><span class="line">        self.current_char = self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'Invalid character'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">advance</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Advance the `pos` pointer and set the `current_char` variable."""</span></span><br><span class="line">        self.pos += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> self.pos &gt; len(self.text) - <span class="number">1</span>:</span><br><span class="line">            self.current_char = <span class="literal">None</span>  <span class="comment"># Indicates end of input</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.current_char = self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">skip_whitespace</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isspace():</span><br><span class="line">            self.advance()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">integer</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Return a (multidigit) integer consumed from the input."""</span></span><br><span class="line">        result = <span class="string">''</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isdigit():</span><br><span class="line">            result += self.current_char</span><br><span class="line">            self.advance()</span><br><span class="line">        <span class="keyword">return</span> int(result)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#ä¸å¦‚å«åšï¼šget_token_and_next</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_next_token</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Lexical analyzer (also known as scanner or tokenizer)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        This method is responsible for breaking a sentence</span></span><br><span class="line"><span class="string">        apart into tokens. One token at a time.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char.isspace():</span><br><span class="line">                self.skip_whitespace()</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char.isdigit():</span><br><span class="line">                <span class="keyword">return</span> Token(INTEGER, self.integer())</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'*'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(MUL, <span class="string">'*'</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'/'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(DIV, <span class="string">'/'</span>)</span><br><span class="line"></span><br><span class="line">            self.error()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Token(EOF, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Interpreter</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, lexer)</span>:</span></span><br><span class="line">        self.lexer = lexer</span><br><span class="line">        <span class="comment"># set current token to the first token taken from the input</span></span><br><span class="line">        self.current_token = self.lexer.get_next_token()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'Invalid syntax'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self, token_type)</span>:</span></span><br><span class="line">        <span class="comment"># compare the current token type with the passed token</span></span><br><span class="line">        <span class="comment"># type and if they match then "eat" the current token</span></span><br><span class="line">        <span class="comment"># and assign the next token to the self.current_token,</span></span><br><span class="line">        <span class="comment"># otherwise raise an exception.</span></span><br><span class="line">        <span class="keyword">if</span> self.current_token.type == token_type:</span><br><span class="line">            self.current_token = self.lexer.get_next_token()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.error()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">factor</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Return an INTEGER token value.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        factor : INTEGER</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        token = self.current_token</span><br><span class="line">        self.eat(INTEGER)</span><br><span class="line">        <span class="keyword">return</span> token.value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">expr</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""Arithmetic expression parser / interpreter.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        expr   : factor ((MUL | DIV) factor)*</span></span><br><span class="line"><span class="string">        factor : INTEGER</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        result = self.factor()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (MUL, DIV):</span><br><span class="line">            token = self.current_token</span><br><span class="line">            <span class="keyword">if</span> token.type == MUL:</span><br><span class="line">                self.eat(MUL)</span><br><span class="line">                result = result * self.factor()</span><br><span class="line">            <span class="keyword">elif</span> token.type == DIV:</span><br><span class="line">                self.eat(DIV)</span><br><span class="line">                result = result / self.factor()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># To run under Python3 replace 'raw_input' call</span></span><br><span class="line">            <span class="comment"># with 'input'</span></span><br><span class="line">            text = raw_input(<span class="string">'calc&gt; '</span>)</span><br><span class="line">        <span class="keyword">except</span> EOFError:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        lexer = Lexer(text)</span><br><span class="line">        interpreter = Interpreter(lexer)</span><br><span class="line">        result = interpreter.expr()</span><br><span class="line">        print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>å°†ä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º <code>calc4.py</code> ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» <a href="https://github.com/rspivak/lsbasi/blob/master/part4/calc4.py" target="_blank" rel="noopener">GitHub</a> ä¸Šä¸‹è½½ã€‚å’Œä»¥å¾€ä¸€æ ·ï¼Œè‡ªå·±å° è¯•ä¸€ä¸‹ï¼Œç¡®è®¤å®ƒèƒ½å·¥ä½œã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¬è€Œæ˜“å¿˜ï¼Œè§è€Œæ˜“å¿˜ï¼Œåšè€Œæ˜“æ‡‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Let&#39;s Build A Simple Interpreter" scheme="https://www.longlongqin.top/tags/Let-s-Build-A-Simple-Interpreter/"/>
    
  </entry>
  
  <entry>
    <title>Letâ€™s Build A Simple Interpreter 3</title>
    <link href="https://www.longlongqin.top/archives/f957.html"/>
    <id>https://www.longlongqin.top/archives/f957.html</id>
    <published>2020-03-10T06:28:09.000Z</published>
    <updated>2020-03-17T08:39:55.655Z</updated>
    
    <content type="html"><![CDATA[<p>å®ç°åŠ å‡æ³•æ··åˆè¿ç®—</p><a id="more"></a><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://ruslanspivak.com/lsbasi-part3/" target="_blank" rel="noopener">https://ruslanspivak.com/lsbasi-part3/</a></p><p>ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»å­¦ä¹ äº†å¦‚ä½•è§£é‡Šæ•´æ•°ç›¸åŠ æˆ–ç›¸å‡çš„ç®—æœ¯è¡¨è¾¾å¼å¦‚â€œ7+3â€æˆ–â€œ12-9â€ã€‚ä»Šå¤©æˆ‘ ä¼šèŠä¸€èŠæ€æ ·è§£æï¼ˆè¯†åˆ«ï¼‰å¹¶è§£é‡ŠåŒ…å«å¤šä½æ•´æ•°çš„åŠ å‡æ³•çš„ç®—æœ¯è¡¨è¾¾å¼ï¼Œå¦‚â€œ7 - 3 + 2 - 1â€ã€‚</p><h2 id="è¯­æ³•å›¾"><a href="#è¯­æ³•å›¾" class="headerlink" title="è¯­æ³•å›¾"></a>è¯­æ³•å›¾</h2><p>æœ¬æ–‡ä¸­çš„ç®—æœ¯è¡¨è¾¾å¼å¯ä»¥ç”¨å¦‚ä¸‹çš„è¯­æ³•å›¾(syntax diagram)è¡¨ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part3_syntax_diagram-1583822487945.png" alt="è¯­æ³•å›¾"></p><blockquote><p><strong>è¯­æ³•å›¾(syntax diagram)</strong>ï¼šå°±æ˜¯ç¨‹åºè¯­è¨€å¥æ³•è§„åˆ™çš„å›¾å½¢è¡¨ç¤ºã€‚åŸºæœ¬ä¸Šï¼Œè¯­æ³•å›¾ä»è§†è§‰ä¸Šå‘ä½ å±•ç¤ºäº†åœ¨ä½ çš„ç¨‹åºè¯­è¨€ä¸­å“ªäº›è¯­å¥æ˜¯å…è®¸çš„å“ªäº›æ˜¯ä¸å…è®¸çš„ã€‚</p></blockquote><p>å¥æ³•å›¾å¾ˆå®¹æ˜“é˜…è¯»ï¼šåªéœ€è·Ÿéšç®­å¤´æ‰€æŒ‡ç¤ºçš„è·¯å¾„å³å¯ã€‚ä¸€äº›è·¯å¾„è¡¨ç¤ºé€‰æ‹©ï¼Œä¸€äº›è·¯å¾„è¡¨ç¤ºå¾ªç¯ã€‚</p><p>ä½ å¯ä»¥è¿™æ ·é˜…è¯»ä¸Šé¢çš„å¥æ³•å›¾ï¼šä¸€ä¸ª term åé¢å¯ä»¥è·Ÿä¸€ä¸ªåŠ å·æˆ–å‡å·ï¼Œåé¢åˆè·Ÿå¦ä¸€ä¸ª termï¼Œ ç›¸åº”åœ°å®ƒåé¢åˆå¯ä»¥è·Ÿä¸€ä¸ªåŠ å·æˆ–å‡å·ï¼Œåé¢åˆè·Ÿå¦ä¸€ä¸ª termï¼Œå¦‚æ­¤å¾ªç¯ã€‚ä½ å·²ç»è¯»æ‡‚äº† è¿™å¹…å›¾ç‰‡ï¼ŒçœŸçš„ã€‚<u>ä½ å¯èƒ½ä¼šç–‘æƒ‘ä»€ä¹ˆæ˜¯â€œtermâ€ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­â€œtermâ€å°±æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚</u></p><h3 id="è¯­æ³•å›¾çš„ç”¨é€”"><a href="#è¯­æ³•å›¾çš„ç”¨é€”" class="headerlink" title="è¯­æ³•å›¾çš„ç”¨é€”"></a>è¯­æ³•å›¾çš„ç”¨é€”</h3><p>æœ¬æ–‡ä¸­çš„è¯­æ³•å›¾ä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼š</p><ul><li>ä»å›¾å½¢ä¸Šè¡¨ç¤ºä¸€ä¸ªç¼–ç¨‹è¯­è¨€çš„æ ‡å‡†ï¼ˆè¯­æ³•ï¼‰ã€‚</li><li>ç”¨æ¥å¸®åŠ©ä½ ç¼–å†™parser(è¯­æ³•åˆ†æå™¨)ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢ç®€å•çš„è§„åˆ™å°†å›¾æ˜ å°„åˆ°ä»£ç ã€‚</li></ul><h2 id="è¯­æ³•åˆ†æå™¨"><a href="#è¯­æ³•åˆ†æå™¨" class="headerlink" title="è¯­æ³•åˆ†æå™¨"></a>è¯­æ³•åˆ†æå™¨</h2><p>ä½ å·²ç»å­¦è¿‡äº†ä» token æµä¸­è¯†åˆ«ç»„åˆçš„è¿‡ç¨‹å« <strong>parsing</strong>. ä¸”è§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ä¸­æ‰§è¡Œè¿™éƒ¨åˆ†ä»»åŠ¡çš„å« <strong>parser</strong>. parsingä¹Ÿè¢«ç§°ä¸º <strong>è¯­æ³•åˆ†æ</strong> (syntax analysis)ï¼Œparserä¹Ÿç›¸åº”åœ°è¢«ç§°ä¸º<strong>è¯­æ³•åˆ†æå™¨</strong>(syntax analyzer)ï¼Œä½ åº”è¯¥ä¹ŸçŒœåˆ°è¿™ç‚¹äº†ã€‚</p><p>æ ¹æ®ä¸Šé¢çš„å¥æ³•å›¾ï¼Œä¸‹é¢æ‰€æœ‰çš„ç®—æœ¯è¡¨è¾¾å¼éƒ½æ˜¯åˆæ³•çš„ï¼š</p><ul><li>3</li><li>3 + 4</li><li>7 - 3 + 2 - 1</li></ul><p>å› ä¸ºåœ¨ä¸åŒçš„ç¨‹åºè¯­è¨€ä¸­ç®—æœ¯è¡¨è¾¾å¼çš„å¥æ³•è§„åˆ™éƒ½ç›¸ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Python shell æ¥ â€œæµ‹è¯•â€æˆ‘ä»¬çš„å¥æ³•å›¾ã€‚å¯åŠ¨ Python shell è‡ªå·±è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span> + <span class="number">4</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">7</span> - <span class="number">3</span> + <span class="number">2</span> - <span class="number">1</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><p>ä¸€åˆ‡æ­£å¸¸ã€‚</p><p>ä½†è¡¨è¾¾å¼â€œ3+â€å°±ä¸æ˜¯åˆæ³•çš„ç®—æœ¯è¡¨è¾¾å¼ï¼Œå› ä¸ºæ ¹æ®å¥æ³•å›¾åŠ å·åé¢å¿…é¡»è·Ÿä¸€ä¸ª termï¼ˆæ•´æ•°ï¼‰ï¼Œ å¦åˆ™å°±æ˜¯å¥æ³•é”™è¯¯ã€‚ä¸¤æ¬¡å¯åŠ¨ Python shell è‡ªå·±æŸ¥çœ‹ç»“æœï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">3</span> +</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span></span><br><span class="line">    <span class="number">3</span> +</span><br><span class="line">      ^</span><br><span class="line">SyntaxError: invalid syntax</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ Python shell æ¥åšæµ‹è¯•æ˜¯æŒºä¸é”™çš„ï¼Œä¸è¿‡æˆ‘ä»¬è¿˜æ˜¯æŠŠä¸Šé¢çš„å¥æ³•å›¾æ˜ å°„åˆ°ä»£ç ï¼Œç”¨æˆ‘ ä»¬è‡ªå·±çš„è§£é‡Šå™¨æ¥æµ‹è¯•ï¼Œæ˜¯å§ï¼Ÿ</p><p>ä»å‰é¢çš„æ–‡ç« ï¼ˆ<a href="http://ruslanspivak.com/lsbasi-part1/" target="_blank" rel="noopener">ç¬¬ä¸€éƒ¨åˆ†</a>å’Œ<a href="http://ruslanspivak.com/lsbasi-part2/" target="_blank" rel="noopener">ç¬¬äºŒéƒ¨åˆ†</a>ï¼‰ä½ çŸ¥é“äº† parser å’Œ interpreter éƒ½åœ¨ <code>expr</code> æ–¹ æ³•ä¸­ã€‚å†é‡å¤ä¸€ä¸‹ï¼Œparseråªæ˜¯è¯†åˆ«å‡ºç»“æ„å¹¶ä¿è¯å®ƒç¬¦åˆæŸäº›è§„èŒƒï¼Œinterpreteråœ¨parseræˆåŠŸè¯†åˆ«åå¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ã€‚</p><p>ä¸‹é¢çš„ä»£ç ç‰‡æ®µå±•ç¤ºäº†ä¸å¥æ³•å›¾ç›¸å¯¹åº”çš„ parser çš„ä»£ç ã€‚è¯­æ³•å›¾ä¸­çš„çŸ©å½¢ç›’å­å˜æˆäº†è§£æä¸€ä¸ªæ•´æ•°çš„ <code>term</code> æ–¹æ³•ï¼Œ <code>expr</code> æ–¹æ³•åˆ™åªæ˜¯è·Ÿéšäº†è¯­æ³•å›¾çš„æŒ‡ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">term</span><span class="params">(self)</span>:</span>    </span><br><span class="line">    self.eat(INTEGER)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">expr</span><span class="params">(self)</span>:</span>    </span><br><span class="line"><span class="comment"># set current token to the first token taken from the input  </span></span><br><span class="line">self.current_token = self.get_next_token()    </span><br><span class="line">        </span><br><span class="line">self.term()    </span><br><span class="line"><span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (PLUS, MINUS):</span><br><span class="line">token = self.current_token</span><br><span class="line">        <span class="keyword">if</span> token.type == PLUS:</span><br><span class="line">self.eat(PLUS)</span><br><span class="line">self.term()</span><br><span class="line"><span class="keyword">elif</span> token.type == MINUS:</span><br><span class="line">self.eat(MINUS)</span><br><span class="line">self.term()</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° <code>expr</code> æ–¹æ³•é¦–å…ˆè°ƒç”¨äº† <code>term</code> æ–¹æ³•ã€‚ç„¶åæ˜¯ä¸€ä¸ªå¯èƒ½æ‰§è¡Œ 0 æˆ–å¤šæ¬¡çš„å¾ªç¯ã€‚ åœ¨å¾ªç¯ä¸­ï¼Œparser æ ¹æ® token ï¼ˆæ˜¯åŠ å·è¿˜æ˜¯å‡å·ï¼‰æ¥åšé€‰æ‹©ã€‚</p><p><strong>Parser æœ¬èº«å¹¶ä¸è§£é‡Šä»»ä½•äº‹</strong>ï¼šå¦‚æœè¯†åˆ«åˆ°ä¸€ä¸ªè¡¨è¾¾å¼å®ƒå°±æ²‰é»˜ï¼Œå¦åˆ™å°±æŠ›å‡ºä¸€ä¸ªå¥æ³•é”™è¯¯ã€‚ è®©æˆ‘ä»¬ä¿®æ”¹ <code>expr</code> æ–¹æ³•æ¥æ·»åŠ  interpreter ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">term</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""Return an INTEGER token value"""</span></span><br><span class="line">    token = self.current_token</span><br><span class="line">    self.eat(INTEGER)</span><br><span class="line">    <span class="keyword">return</span> token.value</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">expr</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="string">"""Parser / Interpreter"""</span></span><br><span class="line">    <span class="comment"># set current token to the first token taken from the input</span></span><br><span class="line">    self.current_token = self.get_next_token()</span><br><span class="line"></span><br><span class="line">    result = self.term()</span><br><span class="line">    <span class="keyword">while</span> self.current_token.type <span class="keyword">in</span> (PLUS, MINUS):</span><br><span class="line">token = self.current_token</span><br><span class="line"><span class="keyword">if</span> token.type == PLUS:</span><br><span class="line">    self.eat(PLUS)</span><br><span class="line">    result = result += self.term()</span><br><span class="line"><span class="keyword">elif</span> token.type == MINUS:</span><br><span class="line">    self.eat(MINUS)</span><br><span class="line">    result = result - self.term()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><p>å› ä¸º interpreter éœ€è¦å¯¹è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ï¼Œæ‰€ä»¥ <code>term</code> æ–¹æ³•è¢«ä¿®æ”¹ä¸ºè¿”å›ä¸€ä¸ªæ•´æ•°å€¼ï¼Œ <code>expr</code> æ–¹æ³•è¢«ä¿®æ”¹ä¸ºåœ¨é€‚å½“çš„åœ°æ–¹æ‰§è¡ŒåŠ å‡æ³•å¹¶è¿”å›è§£é‡Šçš„ç»“æœã€‚</p><p>è®©æˆ‘ä»¬ç»§ç»­å‰è¿›ï¼Œæ¥çœ‹ä¸€ä¸‹ç°åœ¨è§£é‡Šå™¨çš„å®Œæ•´ä»£ç æ€ä¹ˆæ ·ï¼Ÿ</p><p>ä¸‹é¢æ˜¯ä½ æ–°ç‰ˆè®¡ç®—å™¨çš„æºä»£ç ï¼Œå®ƒå¯ä»¥å¤„ç†åŒ…å«ä»»æ„å¤šä¸ªæ•´æ•°çš„åŠ å‡æ“ä½œçš„åˆæ³•ç®—æœ¯è¡¨è¾¾å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Tokençš„ç±»å‹ï¼š'INTEGER', 'PLUS', 'MINUS', 'EOF'</span></span><br><span class="line"><span class="comment"># Tokençš„å€¼(value)ï¼šæ•´æ•°ï¼Œ'+', '-', or None</span></span><br><span class="line">INTEGER, PLUS, MINUS, EOF = <span class="string">'INTEGER'</span>, <span class="string">'PLUS'</span>, <span class="string">'MINUS'</span>, <span class="string">'EOF'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰Tokenç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Token</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, type, value)</span>:</span></span><br><span class="line">        self.type = type</span><br><span class="line">        self.value = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Token( &#123;type&#125;, &#123;value&#125; ) '</span> .format(</span><br><span class="line">            type = self.type ,</span><br><span class="line">            value = repr(self.value) <span class="comment">#reprä¸ä¸‹é¢çš„__repr__ä¸ä¸€æ ·ï¼Œä¸‹é¢çš„æ˜¯é‡æ„çš„ã€‚</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.__str__()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Interpreter</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, text)</span>:</span></span><br><span class="line">        self.text = text</span><br><span class="line">        self.pos = <span class="number">0</span></span><br><span class="line">        self.currrent_token = <span class="literal">None</span> <span class="comment">#æ­¤æ—¶è¿˜æ²¡æœ‰tokenå®ä¾‹æ‰€ä»¥æ˜¯None</span></span><br><span class="line">        self.current_char =self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="comment">##########################################################</span></span><br><span class="line">    <span class="comment">#                       Lexer code                       #</span></span><br><span class="line">    <span class="comment">##########################################################</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">'Invalid syntax'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">advance</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.pos += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> self.pos &gt; len(self.text) <span class="number">-1</span> :</span><br><span class="line">            self.current_char =<span class="literal">None</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.current_char = self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">skip_whitespace</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isspace():</span><br><span class="line">            self.advance()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">integer</span><span class="params">(self)</span>:</span></span><br><span class="line">        result = <span class="string">''</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isdigit():</span><br><span class="line">            result += self.current_char</span><br><span class="line">            self.advance()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> int(result)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#è¯æ³•åˆ†æ(åˆ†æä¹‹åå½¢æˆä¸€ä¸ªä¸ªçš„token)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_next_token</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> self.current_char.isspace():</span><br><span class="line">                self.skip_whitespace()</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="comment">#è¯†åˆ«æ•´æ•°</span></span><br><span class="line">            <span class="keyword">if</span> self.current_char.isdigit():</span><br><span class="line">                <span class="keyword">return</span> Token(INTEGER, self.integer() )</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># è¯†åˆ«æ˜¯å¦ä¸º+ - è¿ç®—ç¬¦å·</span></span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'+'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(PLUS, <span class="string">'+'</span>)</span><br><span class="line">            <span class="keyword">if</span> self.current_char == <span class="string">'-'</span>:</span><br><span class="line">                self.advance()</span><br><span class="line">                <span class="keyword">return</span> Token(MINUS, <span class="string">'-'</span>)</span><br><span class="line"></span><br><span class="line">            self.error()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Token(EOF, <span class="literal">None</span>)</span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">    <span class="comment">##########################################################</span></span><br><span class="line">    <span class="comment">#               Parser / Interpreter code                #</span></span><br><span class="line">    <span class="comment">##########################################################</span></span><br><span class="line">    <span class="comment">#æ¯”è¾ƒå½“å‰çš„tokençš„ç±»å‹ä¸ä¼ æ¥çš„ç±»å‹æ˜¯å¦ç›¸åŒ</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self, token_type)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.currrent_token.type == token_type:</span><br><span class="line">            self.currrent_token = self.get_next_token()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.error()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#è¿”å›ä¸€ä¸ªæ•´å‹çš„tokençš„value</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">term</span><span class="params">(self)</span>:</span></span><br><span class="line">        token = self.currrent_token</span><br><span class="line">        self.eat(INTEGER)</span><br><span class="line">        <span class="keyword">return</span> token.value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">expr</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.currrent_token = self.get_next_token()</span><br><span class="line"></span><br><span class="line">        result = self.term()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> self.currrent_token.type <span class="keyword">in</span> (PLUS , MINUS):</span><br><span class="line">            <span class="comment">#å¾ªç¯æ˜¯ä¸ºäº†ç®—ä¸æ­¢ä¸€æ¬¡çš„åŠ orå‡æ³•ï¼Œä»è€Œè¾¾åˆ°æ··åˆè¿ç®—çš„ç›®çš„</span></span><br><span class="line">            token = self.currrent_token</span><br><span class="line">            <span class="keyword">if</span> token.type == PLUS:</span><br><span class="line">                self.eat(PLUS)</span><br><span class="line">                result = result + self.term()</span><br><span class="line">            <span class="keyword">elif</span> token.type == MINUS:</span><br><span class="line">                self.eat(MINUS)</span><br><span class="line">                result = result - self.term()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">            </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># To run under Python3 replace 'raw_input' call</span></span><br><span class="line">            <span class="comment"># with 'input'</span></span><br><span class="line">            text = input(<span class="string">'calc&gt; '</span>)</span><br><span class="line">        <span class="keyword">except</span> EOFError:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        interpreter = Interpreter(text)</span><br><span class="line">        result = interpreter.expr()</span><br><span class="line">        print(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>å°†ä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º <code>calc3.py</code> ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» <a href="https://github.com/rspivak/lsbasi/blob/master/part3/calc3.py" target="_blank" rel="noopener">GitHub</a> ä¸Šä¸‹è½½ã€‚è¯•ä¸€è¯•ã€‚äº²çœ¼çœ‹ä¸€ä¸‹ å®ƒå¯ä»¥å¤„ç†ä¹‹å‰å±•ç¤ºç»™ä½ çš„å¥æ³•å›¾ä¸­åŒ…å«çš„ç®—æœ¯è¡¨è¾¾å¼è§„åˆ™ã€‚</p><h2 id="æ¢³ç†"><a href="#æ¢³ç†" class="headerlink" title="æ¢³ç†"></a>æ¢³ç†</h2><ol><li>è¾“å…¥å­—ç¬¦ä¸²è¡¨è¾¾å¼ï¼ˆå¦‚â€œ2+8-6+1â€)ï¼Œå­˜å…¥å˜é‡textä¸­</li><li>å°†textè¿›è¡Œè¯æ³•åˆ†æï¼Œæ‰§è¡Œæ­¤åŠŸèƒ½çš„æ˜¯<code>get_next_token()</code>å‡½æ•°ï¼Œè¯æ³•åˆ†æä¼šç”Ÿæˆä¸€ä¸ªä¸ªçš„token</li><li>ç„¶åå¯¹è¯æ³•åˆ†æä¹‹åçš„tokenæŒ‰ç…§è§„å®šçš„è¯­æ³•ï¼Œè¿›è¡Œè¯­æ³•åˆ†æï¼Œç›¸åº”å‡½æ•°ä¸º<code>expr()</code></li><li>æœ€åè¾“å‡ºç»“æœ</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å®ç°åŠ å‡æ³•æ··åˆè¿ç®—&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Let&#39;s Build A Simple Interpreter" scheme="https://www.longlongqin.top/tags/Let-s-Build-A-Simple-Interpreter/"/>
    
  </entry>
  
  <entry>
    <title>3ã€å¸ƒå°”é€»è¾‘å’Œé€»è¾‘é—¨</title>
    <link href="https://www.longlongqin.top/archives/87ef.html"/>
    <id>https://www.longlongqin.top/archives/87ef.html</id>
    <published>2020-03-09T17:01:26.000Z</published>
    <updated>2020-03-17T08:46:49.337Z</updated>
    
    <content type="html"><![CDATA[<p>è®¡ç®—æœºæœ€æ—©çš„æ˜¯æœºç”µè®¾å¤‡ï¼Œä¸€èˆ¬ä½¿ç”¨åè¿›åˆ¶è®¡æ•°ï¼Œæ¯”å¦‚ç”¨é½¿è½®æ•°æ¥ä»£è¡¨åè¿›åˆ¶ã€‚ä½†æ˜¯å…¶å®åªç”¨å¼€/å…³ä¸¤ç§çŠ¶æ€å·²ç»è¶³å¤Ÿè¡¨ç¤ºä¿¡æ¯äº†ï¼Œå°†å…¶ç§°ä¸º<strong>äºŒè¿›åˆ¶ï¼ˆBinaryï¼‰</strong>ã€‚</p><a id="more"></a><p>åœ¨è®¡ç®—æœºä¸­ï¼Œå½“ç”µæµæµè¿‡æ—¶ï¼Œä¸ºé—­åˆçŠ¶æ€ï¼Œè¡¨ç¤ºtrueï¼ˆ1ï¼‰ï¼Œå½“æ²¡æœ‰ç”µæµæµè¿‡æ—¶ï¼Œä¸ºæ–­å¼€çŠ¶æ€ï¼Œè¡¨ç¤ºfalseï¼ˆ0ï¼‰ã€‚ä½†æ˜¯å…¶å®æ™¶ä½“ç®¡å¯ä»¥ä¸åªæ˜¯å¼€/å…³çŠ¶æ€ï¼Œè¿˜å¯ä»¥è®©ä¸åŒå¤§å°çš„ç”µæµé€šè¿‡ï¼Œä¸€äº›æ—©æœŸç”µå­è®¡ç®—æœºï¼Œé€šè¿‡å¯¹ä¸åŒç”µæµå¤§å°è¿›è¡Œåˆ’åˆ†ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰è¿›åˆ¶ã€äº”è¿›åˆ¶ç­‰ç­‰ã€‚ä½†é—®é¢˜æ˜¯ï¼ŒçŠ¶æ€è¶Šå¤šå°±è¶Šéš¾åŒºåˆ†ä¿¡å·ï¼Œå¦‚æœå­˜åœ¨ç”µå™ªéŸ³ï¼Œå¯èƒ½å°±ä¼šä½¿çŠ¶æ€ååˆ†æ··ä¹±ã€‚æ‰€ä»¥ä¸ºäº†è®©ä¿¡å·æ›´åŠ æ¸…æ™°ï¼Œå¯ä»¥åªä½¿ç”¨â€œå¼€â€å’Œâ€œå…³â€ä¸¤ç§çŠ¶æ€ã€‚</p><p>å¦ä¸€ä¸ªä½¿ç”¨äºŒè¿›åˆ¶çš„åŸå› æ˜¯ï¼Œæœ‰ä¸€æ•´ä¸ªæ•°å­¦åˆ†æ”¯ä¸“é—¨å¤„ç†â€œçœŸâ€å’Œâ€œå‡â€ï¼Œå®ƒå·²è§£å†³äº†æ‰€æœ‰æ³•åˆ™å’Œè¿ç®—ï¼Œå³<strong>å¸ƒå°”ä»£æ•°ï¼ˆBoolean Algebraï¼‰</strong>ã€‚</p><h1 id="å¸ƒå°”ä»£æ•°ï¼ˆBoolean-Algebraï¼‰ä¸é€»è¾‘é—¨"><a href="#å¸ƒå°”ä»£æ•°ï¼ˆBoolean-Algebraï¼‰ä¸é€»è¾‘é—¨" class="headerlink" title="å¸ƒå°”ä»£æ•°ï¼ˆBoolean Algebraï¼‰ä¸é€»è¾‘é—¨"></a>å¸ƒå°”ä»£æ•°ï¼ˆBoolean Algebraï¼‰ä¸é€»è¾‘é—¨</h1><p>åœ¨å¸ƒå°”ä»£æ•°ä¸­ï¼Œå˜é‡çš„å€¼æ˜¯trueå’Œfalseï¼Œèƒ½å¤Ÿå¯¹å…¶è¿›è¡Œé€»è¾‘æ“ä½œã€‚å¸ƒå°”ä»£æ•°ä¸­æœ‰ä¸‰ä¸ª<strong>åŸºæœ¬æ“ä½œï¼š</strong>NOTã€ANDå’ŒORã€‚</p><h2 id="NOT-GATE"><a href="#NOT-GATE" class="headerlink" title="NOT GATE"></a>NOT GATE</h2><p><strong>NOT</strong>ï¼šæŠŠè¾“å‡ºç«¯ï¼ˆå°±åƒæ°´é¾™å¤´å·¦è¾¹éƒ¨åˆ†é€æ°´ï¼Œå®ƒé€ç”µï¼‰æ¥åœ¨ä¸Šé¢çš„ç”µæï¼Œå¦‚æœæ‰“å¼€è¾“å‡ºï¼Œç”µæµå°±å¯ä»¥æµè¿‡ï¼Œç„¶åâ€œæ¥åœ°â€ï¼Œè¾“å‡ºå°±æ²¡æœ‰ç”µæµï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯offã€‚å½“è¾“å…¥å…³é—­æ—¶ï¼Œç”µæµæ²¡æ³•æ¥åœ°ï¼Œå°±æµè¿‡äº†è¾“å‡ºï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯onã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310011249234.png" alt="NOT GATE"></p><p>å°±åƒæ˜¯æ°´é¾™å¤´ä¸€æ ·ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310014800881.png" alt="æ°´é¾™å¤´å…³ç€"></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310015120188.png" alt="æ°´é¾™å¤´å¼€ç€"></p><p>â€‹</p><p>â€‹ <strong>NOTæ“ä½œï¼š</strong>æŠŠå¸ƒå°”å€¼è¿›è¡Œç¿»è½¬ï¼Œæ‰€ä»¥NOTæ“ä½œçš„çœŸå€¼è¡¨ä¸º</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310011832488.png" alt="NOT çœŸå€¼è¡¨"></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310020424245.png" alt="NOT GATEçš„è¡¨ç¤ºå›¾"></p><h2 id="AND-GATE"><a href="#AND-GATE" class="headerlink" title="AND GATE"></a>AND GATE</h2><p><strong>AND</strong>ï¼šä¸ºäº†å®ç°â€œAND é—¨â€ï¼Œæˆ‘ä»¬éœ€è¦2ä¸ªæ™¶ä½“ç®¡è¿æ¥åœ¨ä¸€èµ·ï¼Œè¿™æ ·æœ‰2ä¸ªè¾“å…¥å’Œ1ä¸ªè¾“å‡ºã€‚å¦‚æœåªæ‰“å¼€Aï¼Œä¸æ‰“å¼€Bï¼Œç”µæµæ— æ³•ç•™åˆ°outputï¼Œæ‰€ä»¥è¾“å‡ºæ˜¯falseï¼›å¦‚æœåªæ‰“å¼€Bï¼Œä¸æ‰“å¼€Aï¼Œä¹Ÿä¸€æ ·ï¼Œç”µæµæ— æ³•ç•™åˆ°outputï¼›åªæœ‰å½“Aã€Béƒ½æ‰“å¼€äº†ï¼Œoutputæ‰æœ‰ç”µæµã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310012335375.png" alt="image-20200310012335375"></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310020520507.png" alt="AND GATEè¡¨ç¤ºå›¾"></p><h2 id="OR-GATE"><a href="#OR-GATE" class="headerlink" title="OR GATE"></a>OR GATE</h2><p><strong>OR</strong>ï¼šå®ç°OR é—¨é™¤äº†æ™¶ä½“ç®¡è¿˜éœ€è¦é¢å¤–çš„çº¿å°†ä¸¤ä¸ªæ™¶ä½“ç®¡(transistor)å¹¶è”èµ·æ¥ï¼Œå³å¾—åˆ°OR GATE</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/v2-fda2d5cd50eb2f760f0a2ac72eb5efe5_720w.jpg" alt="OR GATE"></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310020006112.png" alt="image-20200310020006112"></p><p>å·¦ä¾§ç”µæä¸ºç”µæºï¼Œä¸‹æ–¹ä¸¤ä¸ªç”µæåˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªè¾“å…¥ï¼Œå³ä¾§ç”µæä¸ºè¾“å‡ºã€‚åªè¦ä»»æ„ä¸€ä¸ªè¾“å…¥å¼€å¯ï¼Œå°±èƒ½ä½¿å¾—ç”µæºå’Œè¾“å‡ºç”µææ¥é€šï¼Œä½¿å¾—è¾“å‡ºå¼€å¯ï¼›å½“ä¸¤ä¸ªè¾“å…¥éƒ½å…³é—­æ—¶ï¼Œå°±ä½¿å¾—ç”µæºå’Œè¾“å‡ºç”µæä¿æŒæ–­å¼€çŠ¶æ€ï¼Œä½¿å¾—è¾“å‡ºä¿æŒå…³é—­ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310020600225.png" alt="OR GATEè¡¨ç¤ºå›¾"></p><p>ç”±æ­¤é€šè¿‡ä¸Šæ–¹çš„ä¸‰ä¸ªç»„ä»¶ï¼ˆNOTé—¨ã€ANDé—¨å’ŒORé—¨ï¼‰å¯ä»¥æ„å»ºå‡ºæ›´åŠ å¤æ‚çš„ç»„ä»¶ã€‚å¦ä¸€ä¸ªå¸¸è§çš„å¸ƒå°”æ“ä½œå«åš<strong>å¼‚æˆ–æ“ä½œ</strong>ã€‚</p><h2 id="XOR-å¼‚æˆ–"><a href="#XOR-å¼‚æˆ–" class="headerlink" title="XOR(å¼‚æˆ–)"></a>XOR(å¼‚æˆ–)</h2><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310020826408.png" alt="XOR"></p><p>æˆ‘ä»¬æœ‰ä¸¤ä¸ªè¾“å…¥ï¼ŒAå’ŒBï¼Œè¿˜æœ‰ä¸€ä¸ªè¾“å‡ºã€‚å…ˆæ”¾ä¸€ä¸ªORé—¨ã€‚å› ä¸ºORå’ŒXORçš„é€»è¾‘è¡¨å¾ˆåƒï¼Œåªæœ‰ä¸€ä¸ªä¸åŒç‚¹å°±æ˜¯ï¼šå½“ä¸¤ä¸ªè¾“å…¥éƒ½ä¸ºtrueæ—¶ï¼ŒXORè¾“å‡ºfalseï¼Œè€ŒORè¾“å‡ºtrueã€‚é€šè¿‡å¯¹ANDæ“ä½œçœŸå€¼è¡¨å–åï¼Œå†å’ŒORæ“ä½œçœŸå€¼è¡¨è¿›è¡Œå¯¹æ¯”ï¼Œå¯ä»¥å‘ç°ï¼Œç¬¬äºŒä¸‰è¡Œéƒ½ä¸ºtrueï¼Œè€Œç¬¬ä¸€å››è¡Œç»“æœä¸åŒï¼Œå› æ­¤åªè¦åœ¨è¿™ä¸¤ä¸ªç»“æœåé¢åŠ ä¸ªANDå°±èƒ½å¾—åˆ°XORçš„çœŸå€¼è¡¨ã€‚</p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>æ“ä½œçœŸå€¼è¡¨ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310021526100.png" alt="XORæ“ä½œçœŸå€¼è¡¨"></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310021854665.png" alt="NOTæ“ä½œçœŸå€¼è¡¨"></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/v2-eb0326d9127258653005333d2d1c59a6_720w.jpg" alt="ANDæ“ä½œçœŸå€¼è¡¨"></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/v2-088dbb26ce45d8e512140426f6e3bb62_720w.jpg" alt="ORæ“ä½œçœŸå€¼è¡¨"></p><p>å¯¹åº”çš„ç½—åŸºæœ¬è¡¨ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200310022102365.png" alt="é€»è¾‘é—¨çš„è¡¨ç¤ºå›¾"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è®¡ç®—æœºæœ€æ—©çš„æ˜¯æœºç”µè®¾å¤‡ï¼Œä¸€èˆ¬ä½¿ç”¨åè¿›åˆ¶è®¡æ•°ï¼Œæ¯”å¦‚ç”¨é½¿è½®æ•°æ¥ä»£è¡¨åè¿›åˆ¶ã€‚ä½†æ˜¯å…¶å®åªç”¨å¼€/å…³ä¸¤ç§çŠ¶æ€å·²ç»è¶³å¤Ÿè¡¨ç¤ºä¿¡æ¯äº†ï¼Œå°†å…¶ç§°ä¸º&lt;strong&gt;äºŒè¿›åˆ¶ï¼ˆBinaryï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="è®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾" scheme="https://www.longlongqin.top/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E9%80%9F%E6%88%90%E8%AF%BE/"/>
    
      <category term="å¸ƒå°”é€»è¾‘å’Œé€»è¾‘é—¨" scheme="https://www.longlongqin.top/tags/%E5%B8%83%E5%B0%94%E9%80%BB%E8%BE%91%E5%92%8C%E9%80%BB%E8%BE%91%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>Letâ€™s Build A Simple Interpreter 2</title>
    <link href="https://www.longlongqin.top/archives/d57d.html"/>
    <id>https://www.longlongqin.top/archives/d57d.html</id>
    <published>2020-03-09T13:55:47.000Z</published>
    <updated>2020-03-17T09:37:54.717Z</updated>
    
    <content type="html"><![CDATA[<p>If you learn only methods, youâ€™ll be tied to your methods. But if you learn<br>principles, you can devise your own methods.</p><a id="more"></a><p>åŸæ–‡åœ°å€ï¼š<a href="https://ruslanspivak.com/lsbasi-part2/" target="_blank" rel="noopener">https://ruslanspivak.com/lsbasi-part2/</a></p><p>è¿™æ˜¯ç¬¬äºŒä¸ªç‰ˆæœ¬V2.0ï¼Œç¬¬äºŒä¸ªç‰ˆæœ¬è¾ƒç¬¬ä¸€ä¸ªç‰ˆV1.0ï¼Œå®ƒå¯ä»¥åšåˆ°ï¼š</p><ol><li>å¤„ç†è¾“å…¥å­—ç¬¦ä¸²ä¸­ä»»ä½•ä½ç½®çš„ç©ºç™½ç¬¦</li><li>å¤„ç†è¾“å…¥ä¸­çš„å¤šä½æ•°</li><li>ä¸¤ä¸ªæ•´æ•°ç›¸å‡ï¼ˆç‰ˆæœ¬V1.0ä¸­åªæœ‰åŠ æ³•ï¼‰</li></ol><p>ä¸‹é¢å…ˆç»™å‡ºV2.0çš„æ–°ç‰ˆè®¡ç®—å™¨çš„æºç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Token types</span></span><br><span class="line"><span class="comment"># EOF (end-of-file) token is used to indicate that</span></span><br><span class="line"><span class="comment"># there is no more input left for lexical analysis</span></span><br><span class="line">INTEGER, PLUS, MINUS, EOF = <span class="string">'INTEGER'</span>, <span class="string">'PLUS'</span>, <span class="string">'MINUS'</span>, <span class="string">'EOF'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Token</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, type, value)</span>:</span></span><br><span class="line"><span class="comment"># token type: 'INTEGER', 'PLUS', 'MINUS', or 'EOF'</span></span><br><span class="line">self.type  = type</span><br><span class="line"><span class="comment"># token value: non-negative integer value, '+', '-', or None</span></span><br><span class="line">self.value = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="string">"""String representation of class instance</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Examples:</span></span><br><span class="line"><span class="string">    Token(INTEGER, 3)</span></span><br><span class="line"><span class="string">    Token(PLUS, '+')</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">f'Token(<span class="subst">&#123;self.type&#125;</span>, <span class="subst">&#123;self.value&#125;</span>)'</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="keyword">return</span> self.__str__()</span><br><span class="line"><span class="comment">##__repr__() ä¸ __str__() çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå‰è€…åœ¨äº¤äº’å¼æ­¥éª¤ä¸­æ˜¾ç¤ºç»“æœï¼Œåè€…åœ¨ print å‡½æ•°ä¸­æ˜¾ç¤ºç»“æœã€‚</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Interpreter</span><span class="params">()</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, text)</span>:</span></span><br><span class="line"><span class="comment"># client string input, e.g. "3 + 5", "12 - 5", etc</span></span><br><span class="line">self.text = text</span><br><span class="line"><span class="comment"># self.pos is an index into self.text</span></span><br><span class="line">self.pos  = <span class="number">0</span></span><br><span class="line"><span class="comment"># current token instance</span></span><br><span class="line">self.current_token = <span class="literal">None</span></span><br><span class="line">self.current_char  = self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="keyword">raise</span> Exception(<span class="string">'Error parsing input'</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">########æ–°å¢#######</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">advance</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="string">"""Advance the 'pos' pointer and set the 'current_char' variable."""</span></span><br><span class="line">self.pos += <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> self.pos &gt;= len(self.text):</span><br><span class="line">    self.current_char = <span class="literal">None</span>  <span class="comment"># Indicates end of input</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    self.current_char = self.text[self.pos]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">skip_whitespace</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isspace():</span><br><span class="line">    self.advance()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">integer</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="string">"""Return a (multidigit) integer consumed from the input."""</span></span><br><span class="line">result = <span class="string">''</span></span><br><span class="line"><span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> self.current_char.isdigit():</span><br><span class="line">    result += self.current_char</span><br><span class="line">    self.advance()</span><br><span class="line"><span class="keyword">return</span> int(result)</span><br><span class="line">  <span class="comment">##æ–°å¢ å®Œæ¯•#####</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_next_token</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="string">"""Lexical analyzer (also known as scanner or tokenizer)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">This method is responsible for breaking a sentence</span></span><br><span class="line"><span class="string">apart into tokens.</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">while</span> self.current_char <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">    <span class="keyword">if</span> self.current_char.isspace():</span><br><span class="line">self.skip_whitespace()</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">if</span> self.current_char.isdigit():</span><br><span class="line"><span class="keyword">return</span> Token(INTEGER, self.integer())</span><br><span class="line">    <span class="keyword">if</span> self.current_char == <span class="string">'+'</span>:</span><br><span class="line">self.advance()</span><br><span class="line"><span class="keyword">return</span> Token(PLUS, <span class="string">'+'</span>)</span><br><span class="line">    <span class="keyword">if</span> self.current_char == <span class="string">'-'</span>:</span><br><span class="line">self.advance()</span><br><span class="line"><span class="keyword">return</span> Token(MINUS, <span class="string">'-'</span>)</span><br><span class="line"></span><br><span class="line">    self.error()</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> Token(EOF, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self, token_type)</span>:</span></span><br><span class="line"><span class="comment"># compare the current token type with the passed token</span></span><br><span class="line"><span class="comment"># type and if they match then "eat" the current token</span></span><br><span class="line"><span class="comment"># and assign the next token to the self.current_token,</span></span><br><span class="line"><span class="comment"># otherwise raise an exception.</span></span><br><span class="line"><span class="keyword">if</span> self.current_token.type == token_type:</span><br><span class="line">    self.current_token = self.get_next_token()</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    self.error()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">expr</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="string">"""Parser / Interpreter</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">expr -&gt; INTEGER PLUS INTEGER</span></span><br><span class="line"><span class="string">expr -&gt; INTEGER MINUS INTEGER</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># set current token to the first token from the input</span></span><br><span class="line">self.current_token = self.get_next_token()</span><br><span class="line"></span><br><span class="line"><span class="comment"># we expect the current token to be an integer</span></span><br><span class="line">left = self.current_token</span><br><span class="line">self.eat(INTEGER)</span><br><span class="line"></span><br><span class="line"><span class="comment"># we expect the current token to be either a '+' or '-'</span></span><br><span class="line">op = self.current_token</span><br><span class="line"><span class="keyword">if</span> op.type == PLUS:</span><br><span class="line">    self.eat(PLUS)</span><br><span class="line"><span class="keyword">elif</span> op.type == MINUS:</span><br><span class="line">    self.eat(MINUS)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    self.error()</span><br><span class="line"></span><br><span class="line"><span class="comment"># we expect the current token to be an integer</span></span><br><span class="line">right = self.current_token</span><br><span class="line">self.eat(INTEGER)</span><br><span class="line"><span class="comment"># after the above call the self.current_token is set to</span></span><br><span class="line"><span class="comment"># EOF token</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># at this point either the INTEGER PLUS INTEGER or</span></span><br><span class="line"><span class="comment"># the INTEGER MINUS INTEGER sequence of tokens</span></span><br><span class="line"><span class="comment"># has been successfully found and the method can just</span></span><br><span class="line"><span class="comment"># return the result of adding or subtracting two integers,</span></span><br><span class="line"><span class="comment"># thus effectively interpreting client input</span></span><br><span class="line"><span class="keyword">if</span> op.type == PLUS:</span><br><span class="line">    result = left.value + right.value</span><br><span class="line"><span class="keyword">elif</span> op.type == MINUS:</span><br><span class="line">    result = left.value - right.value</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    self.error()</span><br><span class="line"><span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># To run under Python3 replace 'raw_input' call with 'input'</span></span><br><span class="line">    text = input(<span class="string">'calc&gt; '</span>)</span><br><span class="line"><span class="keyword">except</span> EOFError:</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line">interpreter = Interpreter(text)</span><br><span class="line">result      = interpreter.expr()</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>æŠŠä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º <code>calc2.py</code> ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» <a href="https://github.com/rspivak/lsbasi/blob/master/part2/calc2.py" target="_blank" rel="noopener">GitHub</a> ä¸Šä¸‹è½½ã€‚è¯•ä¸€è¯•ã€‚äº²çœ¼çœ‹ä¸€ä¸‹ å®ƒå¯ä»¥æŒ‰é¢„æœŸè¿è¡Œï¼šå®ƒå¯ä»¥å¤„ç†è¾“å…¥ä¸­çš„ä»»ä½•ä½ç½®çš„ç©ºç™½ç¬¦ï¼›å®ƒæ¥å—å¤šä½æ•´æ•°ï¼Œé™¤äº†æ•´æ•°ç›¸ åŠ è¿˜å¯ä»¥å¤„ç†æ•´æ•°ç›¸å‡ã€‚</p><p>ä¸‹é¢å¯ä»¥å†ç¬”è®°æœ¬ä¸Šæ¬¡å°è¯•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ python calc2.py</span><br><span class="line">calc&gt; <span class="number">27</span> + <span class="number">3</span></span><br><span class="line"><span class="number">30</span></span><br><span class="line">calc&gt; <span class="number">27</span> - <span class="number">7</span></span><br><span class="line"><span class="number">20</span></span><br><span class="line">calc&gt;</span><br></pre></td></tr></table></figure><p>ä¸<a href="http://ruslanspivak.com/lsbasi-part1/" target="_blank" rel="noopener">ç¬¬ä¸€éƒ¨åˆ†</a>ç›¸æ¯”ä»£ç çš„ä¸»è¦å˜åŒ–æœ‰ï¼š</p><ol><li><code>get_next_token</code> æ–¹æ³•åšäº†ä¸€ç‚¹é‡æ„ã€‚å¢åŠ æŒ‡é’ˆ <code>pos</code> çš„é€»è¾‘è¢«é‡æ„åˆ°äº†æ–¹æ³• <code>advance</code> ä¸­ã€‚</li><li>å¢åŠ äº†ä¸¤ä¸ªæ–¹æ³•ï¼š <code>skip_whitespace</code> ç”¨æ¥å¿½ç•¥ç©ºç™½ç¬¦ï¼Œ <code>integer</code> ç”¨æ¥å¤„ç†è¾“å…¥ä¸­çš„å¤šä½æ•´æ•°ã€‚</li><li><code>expr</code> æ–¹æ³•åœ¨ä¿®æ”¹åï¼Œé™¤äº†å¯ä»¥è¯†åˆ« INTEGER -&gt; PLUS -&gt; INTEGER è¿™ä¸ªç»„åˆ(phrase) ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è¯†åˆ«INTEGER -&gt; MINUS -&gt; INTEGERã€‚è€Œä¸”åœ¨æˆåŠŸè¯†åˆ«ç›¸åº”çš„ç»„åˆåï¼Œä¹Ÿå¯ä»¥è¿›è¡Œç›¸åº”çš„åŠ å‡æ“ä½œã€‚</li></ol><p>åœ¨<a href="http://ruslanspivak.com/lsbasi-part1/" target="_blank" rel="noopener">ç¬¬ä¸€éƒ¨åˆ†</a>ä½ å°åˆ°äº†ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå³ <strong>token</strong> å’Œ <strong>è¯æ³•åˆ†æå™¨</strong> ã€‚ä»Šå¤©æˆ‘æƒ³èŠä¸€èŠ <strong>lexeme</strong> ã€ <strong>parsing</strong> å’Œ <strong>parser</strong> ã€‚</p><p>ä½ å·²ç»çŸ¥é“ token äº†ã€‚ä½†ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œéœ€è¦ä»‹ç»ä¸€ä¸‹ lexemeã€‚ä»€ä¹ˆæ˜¯ lexemeï¼Ÿ lexeme æ˜¯ç»„æˆ token çš„ä¸€ä¸ªå­—ç¬¦åºåˆ—ã€‚åœ¨ä¸‹é¢çš„å›¾ç‰‡ä¸­æ˜¯ä¸€äº› token å’Œ lexeme çš„ä¾‹å­ï¼Œ å¸Œæœ›å®ƒèƒ½æŠŠä¸¤è€…ä¹‹é—´çš„å…³ç³»è¡¨è¾¾æ¸…æ¥šï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part2_lexemes.png" alt="img"></p><p>ç°åœ¨è¿˜è®°å¾— <code>expr</code> æ–¹æ³•å—ï¼Ÿæˆ‘ä»¥å‰è¯´è¿‡è¿™æ˜¯çœŸæ­£è§£é‡Šç®—æœ¯è¡¨è¾¾å¼çš„åœ°æ–¹ã€‚ä½†åœ¨è§£é‡Šä¸€ä¸ªè¡¨è¾¾å¼ä¹‹å‰ï¼Œä½ éœ€è¦çŸ¥é“å®ƒæ˜¯å“ªç§ç»„åˆï¼Œæ¯”å¦‚ç›¸åŠ æˆ–ç›¸å‡ã€‚è¿™æ˜¯ <code>expr</code> æ–¹æ³•æœ¬è´¨ä¸Šåšçš„äº‹ï¼š å®ƒä» <code>get_next_token</code> æ–¹æ³•å¾—åˆ°çš„ token æµä¸­æ‰¾åˆ°ç»“æ„ï¼Œç„¶åè§£é‡Šå®ƒè¯†åˆ«å‡ºçš„ç»„åˆï¼Œäº§ ç”Ÿç®—æœ¯è¡¨è¾¾å¼çš„ç»“æœã€‚</p><p>åˆåˆ°äº†åšç»ƒä¹ çš„æ—¶é—´äº†ã€‚</p><ol><li>æ‰©å±•è®¡ç®—å™¨ä»¥å¤„ç†ä¸¤ä¸ªæ•´æ•°ç›¸ä¹˜</li><li>æ‰©å±•è®¡ç®—å™¨ä»¥å¤„ç†ä¸¤ä¸ªæ•´æ•°ç›¸é™¤</li><li>ä¿®æ”¹ä»£ç ä»¥ä½¿å®ƒå¯ä»¥è§£é‡ŠåŒ…å«ä»»æ„ä¸ªæ•°å­—çš„åŠ å‡æ“ä½œï¼Œå¦‚â€œ9 - 5 + 3 + 11â€</li></ol><p>æœ¬èŠ‚æ£€æµ‹ï¼š</p><ol><li>ä»€ä¹ˆæ˜¯ lexemeï¼Ÿ</li><li>åœ¨ token æµä¸­æ‰¾åˆ°ç»“æ„çš„è¿‡ç¨‹å«ä»€ä¹ˆï¼Ÿæˆ–è€…è¿™ä¹ˆé—®ï¼Œåœ¨ token æµä¸­è¯†åˆ«å‡ºç‰¹å®šç»„åˆçš„è¿‡ç¨‹å«ä»€ä¹ˆï¼Ÿ</li><li>è§£é‡Šå™¨ï¼ˆç¼–è¯‘å™¨ï¼‰åš parsing å·¥ä½œçš„éƒ¨åˆ†å«ä»€ä¹ˆï¼Ÿ</li></ol><hr><p><strong>æ¢³ç†</strong>ï¼š</p><ol><li>é¦–å…ˆè¾“å…¥ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¦‚â€œ3+9â€ï¼Œé€ç»™è§£é‡Šå™¨<strong><code>Interpreter</code></strong></li><li>å¼€å§‹å¯¹è¿™ä¸ªè¡¨è¾¾å¼æ‹†åˆ†æˆä¸€ä¸ªä¸ªçš„tokenï¼Œè¿™ä¸€æ­¥å«åšè¯æ³•åˆ†æï¼Œç”±<strong>è¯æ³•åˆ†æå™¨</strong>(lexical analyzer)æ¥å®Œæˆã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œå‡½æ•°<strong><code>get_next_token</code></strong>å°±ç›¸å½“äºè¯æ³•åˆ†æå™¨ã€‚<ul><li>è¯æ³•åˆ†æå™¨<code>get_next_token</code>å¤„ç†å®Œä¹‹åçš„æ˜¯ä¸€ä¸ªä¸ªçš„<code>token(type , value)</code></li></ul></li><li>ç„¶åå¼€å§‹è¿›è¡Œè¯­æ³•åˆ†æï¼ˆç”±äºæœ¬æ–‡ä¸­åªå®ç°äº†åŠ æ³•ã€å‡æ³•ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œçš„è¯­æ³•åˆ†æå°±æ˜¯åˆ†æï¼šåŠ ã€å‡æ³•çš„è¡¨è¾¾å¼ã€‚æ‰§è¡Œè¿™ä¸ªæ­¥éª¤çš„æ˜¯<strong><code>expr</code></strong>å‡½æ•°ï¼Œå…¶ä¸­<code>expr</code> æ–¹æ³•ä½¿ç”¨äº†è¾…åŠ©æ–¹æ³•<strong><code>eat</code></strong>æ¥éªŒè¯ä¼ ç»™tokençš„ç±»å‹ä¸å½“å‰ç±»å‹æ˜¯å¦ç›¸åŒ¹é…ã€‚ä¸ç°æœ‰è¯­æ³•è§„åˆ™ï¼ˆå³ï¼ŒåŠ æ³•è§„åˆ™å’Œå‡æ³•è§„åˆ™ï¼‰ä¸åŒ¹é…ï¼Œ<code>eat</code>å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</li><li>è¯­æ³•åˆ†æå®Œæˆä¹‹åï¼Œå°±ç›´æ¥å¾—å‡ºç®—å¼çš„ç»“æœã€‚ï¼ˆè¿™ä¹Ÿå¾ˆç¬¦åˆè§£é‡Šå™¨çš„ç‰¹æ€§å˜›ï¼šä¾¿æ·å¼è¾¹æ‰§è¡Œï¼Œä¸ä¼šç”Ÿæˆç›®æ ‡ä»£ç ï¼‰</li></ol><p>å…¶ä»–çš„å‡½æ•°ï¼š</p><p><code>Interpreter</code></p><ul><li><code>error(self)</code>ï¼šå½“æœ‰é”™è¯¯çš„æ—¶å€™ï¼Œå°±è°ƒç”¨å®ƒ</li><li><code>advance(self)</code>ï¼šå¢åŠ æŒ‡é’ˆposçš„ä½œç”¨ï¼Œå³ï¼Œå°†æŒ‡å‘ä¸‹ä¸€ä¸ªtoken</li><li><code>skip_whitespace(self)</code>ï¼šè·³è¿‡ç©ºæ ¼ï¼ŒV2.0æ–°å¢åŠ çš„åŠŸèƒ½</li><li><code>integer(self)</code>ï¼šä¸ºäº†å¯ä»¥ç®—å¤šä½æ•°çš„åŠ å‡æ³•ã€‚<ul><li>è¿™é‡Œè¦æ³¨æ„ï¼šå¦‚3å’Œ233æ˜¯ä¸¤ä¸ªæ•´æ•°ç±»å‹çš„tokenï¼Œä½†æ˜¯å€¼å¾—æ³¨æ„çš„æ˜¯è¿™ç¯‡æ–‡ç« ä¸­çš„tokenæ˜¯æŒ‰ç…§è¾“å…¥çš„ä¸€ä¸²å­—ç¬¦ä¸²ï¼ˆå¦‚â€œ3+155â€ï¼‰æ¯ä¸€ä¸ªéƒ½å½“æˆä¸€ä¸ªtokenã€‚ä¹Ÿå°±æ˜¯è¯´æœ¬æ¥155æ˜¯ä¸€ä¸ªtokenï¼Œä½†æ˜¯ä»ç»†èŠ‚ä¸Šçœ‹ï¼Œåœ¨ä»£ç å®ç°ä¸­155æ˜¯è¢«å½“æˆäº†ä¸‰æ¬¡â€œtokenâ€ç„¶åç»è¿‡<code>integer</code>å‡½æ•°æ‰å½¢æˆäº†æœ€ç»ˆå½¢ä½“155è¿™ä¸ªtokenã€‚</li></ul></li></ul><hr><p>åœ¨æœ¬ç³»åˆ—çš„ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ä½ ä¼šæ‰©å±•ä½ çš„è®¡ç®—å™¨æ¥å¤„ç†æ›´å¤æ‚çš„ç®—æœ¯è¡¨è¾¾å¼ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;If you learn only methods, youâ€™ll be tied to your methods. But if you learn&lt;br&gt;principles, you can devise your own methods.&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Letâ€™s Build A Simple Interpreter" scheme="https://www.longlongqin.top/tags/Let%E2%80%99s-Build-A-Simple-Interpreter/"/>
    
  </entry>
  
  <entry>
    <title>Convex Hull(å‡¸åŒ…)</title>
    <link href="https://www.longlongqin.top/archives/510d.html"/>
    <id>https://www.longlongqin.top/archives/510d.html</id>
    <published>2020-03-08T14:12:58.000Z</published>
    <updated>2020-03-17T08:42:26.159Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™å±±ä¹‹é«˜ï¼Œå°±å«å‡¸ç¢§ï¼›å±±ä¹‹ä½æ´¼è¿‘æ°´å¤„ï¼Œå°±å«ä½œå‡¹æ™¶ã€‚è¿™å‡¸ã€å‡¹äºŒå­—ï¼Œå†æ¥ç”¨çš„äººæœ€å°‘ï¼Œå¦‚ä»Šç›´ç”¨åšè½©é¦†ä¹‹åï¼Œæ›´è§‰æ–°é²œï¼Œä¸è½çª è‡¼ã€‚</p><a id="more"></a><h1 id="æ¬§æ‹‰å…¬å¼"><a href="#æ¬§æ‹‰å…¬å¼" class="headerlink" title="æ¬§æ‹‰å…¬å¼"></a>æ¬§æ‹‰å…¬å¼</h1><p>ç®€å•ä»‹ç»ä¸€ä¸‹æ¬§æ‹‰å…¬å¼ï¼š</p><p>è™šæ•°ä¸­ï¼ši^2^=-1 ; i=âˆš(-1)</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/1573819506389.png" alt="1573819506389"> å…¶ä¸­Î¸ä¸ºå®æ•°ï¼Œiè¡¨ç¤ºè™šæ•°ä¸­çš„è™šæ•°å•ä½ iï¼›</p><p>æ¬§æ‹‰æ’ç­‰å¼ï¼š</p><p>å½“Î¸=Ï€æ—¶ï¼›<img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/1573820164006.png" alt="1573820164006"></p><p>å‡ ä½•å­¦ä¸­çš„æ¬§æ‹‰å…¬å¼ï¼š</p><p><code>V-E+F=2</code> ã€vï¼šå‡ ä½•ä½“çš„é¡¶ç‚¹æ•°ï¼›Eï¼šè¾¹æ•°ï¼›Fï¼šé¢æ•°ã€‘</p><h1 id="å‡¸åŒ…"><a href="#å‡¸åŒ…" class="headerlink" title="å‡¸åŒ…"></a>å‡¸åŒ…</h1><p><strong>å‡¸åŒ…</strong>ï¼šæ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šå¾ˆå¤šé’‰å­é’‰åœ¨æœ¨æ¿ä¸Šé¢ï¼Œç„¶åç”¨ä¸€ä¸ªçš®ç­‹å°†è¿™äº›é’‰å­åŒ…å›´èµ·æ¥ï¼Œå½“æˆ‘ä»¬æ¾æ‰‹åï¼Œçš®ç­‹å°±æŠŠè¿™äº›å®šåœ¨å…¨éƒ½åŒ…å›´èµ·æ¥ã€‚æ­¤æ—¶ï¼Œè¿™ä¸ªçš®ç­‹æ‰€å½¢æˆçš„å‡¸å¤šè¾¹å½¢å°±å«<strong>å‡¸åŒ…</strong>ã€‚å¦‚ä¸‹å›¾çš„è“è‰²çš„å¤šè¾¹å½¢å°±æ˜¯å‡¸åŒ…ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200304214005104.png" alt="ç»¿è‰²çº¿åœˆè®°ä¸ºå‡¸åŒ…"></p><h2 id="å‡¸æ€§-Convexity"><a href="#å‡¸æ€§-Convexity" class="headerlink" title="å‡¸æ€§(Convexity)"></a>å‡¸æ€§(Convexity)</h2><p><strong>ä»¥é¢œè‰²ä¸ºä¾‹</strong></p><p>ä¸‹å›¾ä¸­ï¼Œå‡è®¾x,y,zæ˜¯ä¸‰ç§é¢œè‰²ï¼Œå¦‚æœä»…ä»¥x,yå°±èƒ½è°ƒå‡ºæ¥çš„é¢œè‰²ï¼Œé‚£ä¹ˆå¦‚uæ‰€ç¤ºå®ƒä¸€å®šä¼šè½åœ¨x,yä¸­ï¼›è‹¥éœ€è¦x,y,zä¸‰ç§ ä¸€èµ·ï¼Œé‚£ä¹ˆå¦‚væ‰€ç¤ºä¼šè½åœ¨ä»¥x,y,zä¸‰ç‚¹è¿æˆçš„ä¸‰è§’å½¢å†…éƒ¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/v2-386fd3aaf073885dd32ab6241e9a0452_720w.jpg" alt="å‡¸æ€§"></p><h2 id="æç‚¹-Extreme-Point"><a href="#æç‚¹-Extreme-Point" class="headerlink" title="æç‚¹(Extreme Point)"></a>æç‚¹(Extreme Point)</h2><p>æœ‰ä¸€ä¸ªç‚¹é›†Sã€‚å¦‚æœ<u>å­˜åœ¨</u>é€šè¿‡ç‚¹Pçš„ç›´çº¿Lï¼Œä½¿å¾—ç‚¹é›†Sä¸­é™¤äº†ç‚¹Pä¹‹å¤–çš„å…¶ä»–çš„ç‚¹éƒ½åœ¨è¿™ä¸ªç›´çº¿çš„åŒä¸€ä¾§ï¼Œåˆ™è¿™ä¸ªç‚¹På°±æ˜¯<strong>æç‚¹(Extreme Points)</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200304214843584.png" alt="æç‚¹"></p><ul><li><p><strong>åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦ä¸ºæç‚¹</strong>ï¼šè¯¥ç‚¹Pæ˜¯å¦ä¼šè¢«åŒ…å«åœ¨å…¶ä»–ç‚¹ä¸­ä»»æ„ä¸‰ä¸ªç‚¹å½¢æˆçš„ä¸‰è§’å½¢ä¸­ï¼Œå¦‚æœç‚¹Pä¸åœ¨ä»»ä½•ä¸‰è§’å½¢å†…éƒ¨ï¼Œåˆ™è¯´æ˜ç‚¹Pæ˜¯æç‚¹ã€‚åä¹‹ï¼Œåˆ™ä¸æ˜¯æç‚¹ã€‚å¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200304220601816.png" alt="åˆ¤æ–­æç‚¹"></p><p>ä¸Šå›¾ä¸­ï¼ŒSå°±ä¸æ˜¯æç‚¹ï¼Œå› ä¸ºä»–åœ¨ä¸‰è§’å½¢å†…éƒ¨ã€‚</p></li></ul><h2 id="åˆ¤æ–­æç‚¹çš„ç®—æ³•"><a href="#åˆ¤æ–­æç‚¹çš„ç®—æ³•" class="headerlink" title="åˆ¤æ–­æç‚¹çš„ç®—æ³•"></a>åˆ¤æ–­æç‚¹çš„ç®—æ³•</h2><h3 id="In-Trangle-Test"><a href="#In-Trangle-Test" class="headerlink" title="In-Trangle Test"></a>In-Trangle Test</h3><p><strong>ç®—æ³•æè¿°ä¼ªä»£ç </strong>ï¼šå…¶å®è¿™ä¸ªç®—æ³•å°±æ˜¯åˆ¤æ–­ç‚¹æ˜¯å¦åœ¨ä¸‰è§’å½¢å†…éƒ¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200304221051234.png" alt="In-Trangle Test"></p><p><strong>ä»£ç å®ç°ï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200304221130677.png" alt="ç®—æ³•å®ç°"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">extremePoint</span> <span class="params">(<span class="built_in">point</span> S[], <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> s=<span class="number">0</span>; s&lt;n; s++)</span><br><span class="line">        S[s].extreme = TRUE;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> p=<span class="number">0</span>; p&lt;n; p++)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> q=p+<span class="number">1</span>; q&lt;n; q++)</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> r=q+<span class="number">1</span>; r&lt;n; r++)</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> s=<span class="number">0</span>; s&lt;n; s++)</span><br><span class="line">                &#123;</span><br><span class="line"><span class="keyword">if</span>(s==p || s==q || s==r ||!S[s].extreme)</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span>(Intriangle(S[p],S[q],S[r],S[s]))</span><br><span class="line">                        S[s].extreme = FALSE;</span><br><span class="line">                &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯çŸ¥ï¼Œè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n^4^)ï¼Œå…¶å®æŒºå¤§çš„ï¼Œåœ¨åé¢æˆ‘ä»¬ä¼šè¿›ä¸€æ­¥æ”¹å–„ã€‚</p><p>è¿™æ ·åŸºäºæç‚¹çš„å‡¸åŒ…ç®—æ³•è™½ç„¶æ•ˆç‡ä¸é«˜ï¼Œä½†æ˜¯å®ƒä¼šå¼•å‡ºä¸€ä¸ªéå¸¸é‡è¦çš„æ“ä½œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>To-Left Test</strong><br>åœ¨åé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªæµ‹è¯•å‡ ä¹æ˜¯è´¯ç©¿äºæˆ‘ä»¬è®¡ç®—å‡ ä½•è¿™ä¸ªè¯¾ç¨‹çš„å§‹ç»ˆçš„ã€‚å¦‚æœè¯´æˆ‘ä»¬åˆšæ‰æ‰€ç»™å‡ºçš„é‚£ä¸ªç®—æ³•è¿˜æœ‰ä»€ä¹ˆéœ€è¦è¡¥å……çš„è¯å…¶å®æœ€é‡è¦çš„ä¹Ÿå°±æ˜¯é‚£æ ·çš„ä¸€ä¸ªç»†èŠ‚ä¹Ÿå°±æ˜¯æ‰€è°“çš„<strong>In-Triangle test</strong>ã€‚</p><h4 id="To-Left-Test"><a href="#To-Left-Test" class="headerlink" title="To-Left Test"></a>To-Left Test</h4><p>æˆ‘ä»¬å°†åˆšæ‰è¿™ä¸ªIn-Triangle Testè½¬åŒ–ä¸ºä¸‰æ¬¡To-Leftæµ‹è¯•ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç‚¹å¦‚æœç¡®å®è½åœ¨æŸä¸€ä¸ªä¸‰è§’å½¢çš„å†…éƒ¨çš„è¯é‚£ä¹ˆç›¸å¯¹äºè¿™ä¸ªä¸‰è§’å½¢çš„ä¸‰æ¡è¾¹æ‰€åšçš„è¿™ä¸ªTo-Leftæµ‹è¯•éƒ½ä¼šç»Ÿä¸€çš„è¿”å›trueæˆ–è€…ç»Ÿä¸€åœ°è¿”å›falseã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200304223141504.png" alt="To-Left Test"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">InTriangle</span><span class="params">(Point p, Point q, Point r, Point s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> pqLeft = ToLeft(p, q, s);</span><br><span class="line">    <span class="keyword">bool</span> qrLeft = ToLeft(q, r, s);</span><br><span class="line">    <span class="keyword">bool</span> rpLeft = ToLeft(r, p, s);</span><br><span class="line">    <span class="keyword">return</span> (pdLeft == qrLeft) &amp;&amp; (qrLeft == rqLeft);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>To-Leftæµ‹è¯•æ˜¯ç›¸å¯¹äºå¦å¤–è¿™ä¸¤ä¸ªç‚¹æ‰€ç¡®å®šçš„é‚£æ¡<strong>æœ‰å‘</strong>ç›´çº¿è€Œè¨€çš„ï¼Œä»»ä½•ä¸€æ¡æœ‰å‘ç›´çº¿ä¸ä»…ä¼šæŠŠå¹³é¢åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çŸ¥é“å“ªä¸€è¾¹æ˜¯å·¦è¾¹ï¼Œå“ªä¸€è¾¹æ˜¯å³è¾¹ã€‚To-Leftï¼Œå…¶å®å°±æ˜¯è¯´<br>è¿™ä¸ªç‚¹ç›¸å¯¹äºåˆšæ‰çš„é‚£æ¡æœ‰å‘çº¿è€Œè¨€åˆ°åº•æ˜¯ä½äºå®ƒçš„å·¦ä¾§ï¼Œè¿˜æ˜¯å³ä¾§å¦‚æœæ˜¯å‰è€…å°±æ˜¯trueï¼Œå¦åˆ™çš„è¯å°±æ˜¯falseã€‚å› ä¸ºä¸‰è§’å½¢æœ‰ä¸‰æ¡è¾¹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ç”¨ä¸‰æ¬¡To-Left Testã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200304223826387.png" alt="INT=3*TLT"></p><p><strong>To-Left Testå…·ä½“å®ç°</strong>ï¼š</p><p>è¿™é‡Œç”¨åˆ°äº†è¡Œåˆ—å¼æ¥æ±‚ä¸‰è§’å½¢é¢ç§¯ï¼ˆè‡³äºåŸç†ï¼Œè¿™é‡Œå°±å¤šè¯´äº†ï¼‰ã€‚ä¸‹å›¾ä¸­çš„è¿™ä¸ªè¡Œåˆ—å¼å®é™…ä¸Šç®—çš„é¦–å…ˆæ˜¯å®ƒçš„é¢ç§¯çš„<strong>ä¸¤å€</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200304224456126.png" alt="To-Left Test"></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ToLeft</span><span class="params">(Point p, Point q, Point s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Area2(p, q, s) &gt; <span class="number">0</span>;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Area2</span><span class="params">(Point p, Point q, Point s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> </span><br><span class="line">        p.x * q.y - p.y * q.x </span><br><span class="line">       +q.x * s.y - q.y * s.x</span><br><span class="line">       +s.x * p.y - s.y *p.x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œçš„é¢ç§¯å…¶å®æ˜¯â€œæœ‰å‘é¢ç§¯â€ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œçš„é¢ç§¯åˆ†æ­£è´Ÿï¼ˆç›¸å¯¹äºè¿™æ ·ä¸€ä¸ªé€†æ—¶é’ˆçš„<br>ä¸€ä¸ªç¼–å·pqsçš„è¿™æ ·çš„ä¸€ä¸ªé¢ç§¯ ä¸ såœ¨å³ä¾§ä¹Ÿå°±æ˜¯æŒ‰ç…§é¡ºæ—¶é’ˆçš„pqsæ‰€æ„æˆçš„é¢ç§¯è™½ç„¶æœ‰å¯èƒ½å¤§å°æ˜¯ä¸€æ ·å®Œå…¨å¯¹ç§°ä½†æ˜¯å®ƒä»¬çš„ç¬¦å·æ˜¯ç›¸åçš„ï¼‰ã€‚æ•´ä¸ªè¿™ä¸ªTo-Leftçš„æµ‹è¯•çš„<strong>åˆ¤æ–­çš„ä¾æ®ä¹Ÿå°±åœ¨äºè¿™ä¸ªç¬¦å·</strong>ã€‚</p><p>è¿™ä¸ª<u>è¡Œåˆ—å¼å–æ­£</u>æ¡ä»¶ä¸ºï¼šå½“ä¸”ä»…å½“sä½äºpqæ‰€ç¡®å®šçš„è¿™æ¡æœ‰å‘ç›´çº¿çš„å·¦ä¾§ã€‚å…¶ä¸­è½¬æ¢æˆä»£ç ä¹Ÿæ˜¯éå¸¸ç®€æ˜çš„ï¼Œä»£ç å¦‚ä¸‹å›¾çš„åº•éƒ¨ã€‚</p><p>è‡³æ­¤ï¼ŒTo-Left Testå®ç°å®Œæˆã€‚</p><h2 id="æè¾¹-Extreme-Edge"><a href="#æè¾¹-Extreme-Edge" class="headerlink" title="æè¾¹(Extreme Edge)"></a>æè¾¹(Extreme Edge)</h2><p><strong>æè¾¹</strong>ï¼šä¸¤ä¸ªæç‚¹è¿æˆçš„è¾¹ï¼Œå‰©ä½™çš„æ‰€æœ‰ç‚¹å‡ä¼šåœ¨è¯¥è¾¹çš„ä¸€ä¾§ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/v2-534df0cc332ead89da7586c99c22dd5f_720w.jpg" alt="æè¾¹"></p><p><strong>åˆ¤æ–­æ˜¯å¦ä¸ºæè¾¹</strong>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200308231616965.png" alt="image-20200308231616965"></p><ul><li><p><strong>ä»£ç å®ç°</strong>ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200308231916308.png" alt="markEE"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">markEE</span><span class="params">(<span class="built_in">point</span> S[], <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;n; k++)</span><br><span class="line">        S[k].extreme = FALSE;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> p=<span class="number">0</span>; p&lt;n; p++) <span class="comment">//test</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> q=p+<span class="number">1</span>; q&lt;n; q++) <span class="comment">//æ£€éªŒæ¯ä¸€æ¡è¾¹</span></span><br><span class="line">            checkEdge(S,n,p,q) <span class="comment">//æœ‰å‘è¾¹pq</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200308231932585.png" alt="checkEdge"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">checkEdge</span><span class="params">(Point S[], <span class="keyword">int</span> n, <span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> LEmpty =TRUE, REmpty =TRUE;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k=<span class="number">0</span>; k&lt;n &amp;&amp; (LEmpty || REmpty); k++) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (k != p &amp;&amp; k != q)</span><br><span class="line">            ToLeft(S[p], S[q], S[k]) ? LEmpty=FALSE : REmpty=FALSE;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(LEmpty || REmpty)</span><br><span class="line">        S[p].extreme=S[q].extreme=TRUE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹ å®ç°çš„æ­¥éª¤ï¼š</p><ol><li><p>åˆå§‹æ—¶ï¼Œå…ˆå‡è®¾æ‰€æœ‰çš„ç‚¹éƒ½ä¸æ˜¯æç‚¹ã€‚</p></li><li><p>å¼€å§‹éç‚¹é›†Sä¸­çš„ç‚¹ï¼Œå®ƒä»¬ä¸¤ä¸¤ç»„åˆæˆä¸€ä¸ªçº¿æ®µï¼Œç„¶åè¿›è¡ŒcheckEdge(æ£€æŸ¥è¿™äº›çº¿æ®µæ˜¯å¦æ˜¯æè¾¹)ã€‚</p><p>æ£€æŸ¥çš„æ–¹æ³•<code>checkEdge</code>ï¼š</p><p>â€‹ åˆ©ç”¨ToLeftæµ‹è¯•ï¼Œæ¯æ¬¡éƒ½å°†å½“å‰çš„çº¿æ®µä¸å…¶ä»–ç‚¹ï¼ˆå³ï¼Œé™¤äº†è¿™ä¸¤ä¸ªç‚¹ä¹‹å¤–çš„ç‚¹ï¼‰è¿›è¡ŒToLeftæµ‹è¯•<strong>ï¼Œå¦‚æœæµ‹è¯•ç»“æœä¸­ï¼šLEmptyã€REmpty å…¶ä¸­ä¹‹ä¸€ä¸ºtrueï¼Œå°±è¡¨æ˜è¿™ä¸¤ä¸ªç‚¹æ„æˆçš„çº¿æ®µä¸º<em>æè¾¹</em>ï¼Œè€Œä¸”åŒæ—¶ä¹Ÿæ£€æµ‹å‡ºè¿™ä¸¤ä¸ªç‚¹æ˜¯<em>æç‚¹</em>ã€‚</strong>ï¼ˆå…¶å®ä¸¤ä¸ªç‚¹ç»„æˆçš„çº¿æ®µè¿›è¡Œ<code>checkEdge</code>çš„ç»“æœä¸­çš„LEmptyã€REmptyæœ€å¤šåªæœ‰ä¸€ä¸ªæ˜¯true,å› ä¸ºè¿™é‡Œä¸å­˜åœ¨ä¸€æ¡è¾¹çš„ä¸¤ä¾§éƒ½æ²¡æœ‰å…¶ä»–ç‚¹çš„æƒ…å†µï¼‰</p></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">markEE</span><span class="params">(Point S[], <span class="keyword">int</span> n)</span> <span class="comment">//n&gt;2</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;n; k ++)</span><br><span class="line">        S[k].extreme = False; <span class="comment">//å…ˆå‡è®¾æ‰€æœ‰çš„ç‚¹éƒ½ä¸æ˜¯æç‚¹</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> p = <span class="number">0</span>; p &lt; n; p ++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> q = p + <span class="number">1</span>; q &lt; n; q ++)</span><br><span class="line">            checkEdge(S, n, p, q);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">checkEdge</span><span class="params">(Point S[], <span class="keyword">int</span> n, <span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">//LEmptyã€REmptyè¡¨ç¤ºæ”¹è¾¹çš„å·¦ä¾§ã€å³ä¾§ï¼Œç­‰äºTrueæ—¶è¡¨ç¤ºè¯¥ä¾§æ˜¯æ²¡æœ‰ç‚¹çš„ã€‚</span></span><br><span class="line">    <span class="keyword">bool</span> LEmpty = True, REmpty = True;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; n &amp;&amp; (LEmpty || REmpty); k ++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(k != p &amp;&amp; k != q)</span><br><span class="line">        &#123;</span><br><span class="line">            ToLeft(S[p], S[q], S[k]) ? LEmpty = False : REmpty = False;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(LEmpty || REmpty)</span><br><span class="line">        S[p].extreme = S[q].extreme = True;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒæ ·å¯åˆ©ç”¨æ­¤æ¥åˆ¤æ–­æ˜¯å¦æ˜¯æç‚¹ï¼ˆå¤æ‚åº¦ä¸ºO(n^3^)ï¼‰ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™å±±ä¹‹é«˜ï¼Œå°±å«å‡¸ç¢§ï¼›å±±ä¹‹ä½æ´¼è¿‘æ°´å¤„ï¼Œå°±å«ä½œå‡¹æ™¶ã€‚è¿™å‡¸ã€å‡¹äºŒå­—ï¼Œå†æ¥ç”¨çš„äººæœ€å°‘ï¼Œå¦‚ä»Šç›´ç”¨åšè½©é¦†ä¹‹åï¼Œæ›´è§‰æ–°é²œï¼Œä¸è½çª è‡¼ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="ã€Šè®¡ç®—å‡ ä½•ã€‹" scheme="https://www.longlongqin.top/tags/%E3%80%8A%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95%E3%80%8B/"/>
    
      <category term="å‡¸åŒ…" scheme="https://www.longlongqin.top/tags/%E5%87%B8%E5%8C%85/"/>
    
  </entry>
  
  <entry>
    <title>Letâ€™s Build A Simple Interpreter 1</title>
    <link href="https://www.longlongqin.top/archives/427485bf.html"/>
    <id>https://www.longlongqin.top/archives/427485bf.html</id>
    <published>2020-03-08T09:26:27.000Z</published>
    <updated>2020-03-17T09:34:39.519Z</updated>
    
    <content type="html"><![CDATA[<hr><hr><p>ä¸ºä»€ä¹ˆè¦ä½ å­¦è§£é‡Šå™¨å’Œç¼–è¯‘å™¨ï¼Ÿè¿™é‡Œä½ ä¸‰æ¡ç†ç”±ã€‚</p><a id="more"></a><ol><li>è¦å†™ä¸€ä¸ªè§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ï¼Œä½ å¿…é¡»åŒæ—¶ç”¨åˆ°å¾ˆå¤šæŠ€æœ¯ã€‚ç¼–å†™ä¸€ä¸ªè§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ä¼šå¸®åŠ© ä½ æé«˜è¿™äº›æŠ€èƒ½å¹¶ä¸”æˆä¸ºä¸€ä¸ªæ›´å¥½çš„è½¯ä»¶å¼€å‘è€…ã€‚è€Œä¸”ï¼Œä½ å°†å­¦åˆ°çš„è¿™äº›æŠ€èƒ½åœ¨å¼€å‘ä»» ä½•è½¯ä»¶æ—¶éƒ½æœ‰å¯èƒ½ç”¨åˆ°ï¼Œè€Œä¸ä»…ä»…æ˜¯è§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ã€‚</li><li>ä½ ç¡®å®æƒ³è¦çŸ¥é“è®¡ç®—æœºå¦‚ä½•å·¥ä½œã€‚ä¸€èˆ¬è§£é‡Šå™¨å’Œç¼–è¯‘å™¨çœ‹ä¸Šå»éƒ½åƒé­”æ³•ä¸€æ ·ã€‚ä½†ä½ ä¸åº” è¯¥å¯¹è¿™äº›é­”æ³•æ„Ÿåˆ°èˆ’æœã€‚ä½ æƒ³è¦æ­å¼€è§£é‡Šå™¨å’Œç¼–è¯‘å™¨çš„ç¥ç§˜é¢çº±ï¼Œç†è§£å®ƒä»¬å¦‚ä½•å·¥ä½œå¹¶ æ§åˆ¶æ‰€æœ‰ä¸€åˆ‡ã€‚</li><li>ä½ æƒ³è¦åˆ›é€ è‡ªå·±çš„ç¼–ç¨‹è¯­è¨€æˆ–è€…é¢†åŸŸç‰¹å®šè¯­è¨€ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œä½ å°±éœ€è¦ä¸ºè¿™ä¸ªè¯­è¨€åˆ›å»º ä¸€ä¸ªè§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ã€‚æœ€è¿‘ï¼Œåˆ›å»ºæ–°è¯­è¨€å†åº¦å…´èµ·ã€‚ä½ å‡ ä¹æ¯å¤©éƒ½å¯ä»¥çœ‹åˆ°ä¸€é—¨æ–°è¯­è¨€ çš„è¯ç”Ÿï¼šElixir, Go, Rust ç­‰ã€‚</li></ol><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://ruslanspivak.com/lsbasi-part1/" target="_blank" rel="noopener">https://ruslanspivak.com/lsbasi-part1/</a></p><p>å¥½äº†ï¼Œä½†ä»€ä¹ˆæ˜¯<strong>è§£é‡Šå™¨</strong>å’Œ<strong>ç¼–è¯‘å™¨</strong>å‘¢ï¼Ÿ</p><h1 id="è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨"><a href="#è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨" class="headerlink" title="è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨"></a>è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨</h1><p>è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨éƒ½æ˜¯â€œé«˜çº§è¯­è¨€ä¸æœºå™¨ä¹‹é—´çš„ç¿»è¯‘å®˜â€ã€‚éƒ½æ˜¯è®²ä»£ç ç¿»è¯‘æˆæœºå™¨å¯ä»¥æ‰§è¡Œçš„äºŒè¿›åˆ¶æœºå™¨ç ï¼Œåªä¸è¿‡åœ¨è¿è¡ŒåŸç†å’Œç¿»è¯‘è¿‡ç¨‹ä¸åŒã€‚</p><p>é‚£å®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼š</p><ul><li>ç¼–è¯‘å™¨ï¼šå…ˆæ•´ä½“ç¼–è¯‘å®Œï¼Œç„¶åä¸€æ¬¡æ€§æ‰§è¡Œã€‚æ¯”å¦‚Cè¯­è¨€ä»£ç è¢«ç¼–è¯‘æˆäºŒè¿›åˆ¶ä»£ç ï¼ˆexeç¨‹åºï¼‰ï¼Œåœ¨windowså¹³å°ä¸Šæ‰§è¡Œã€‚</li><li>è§£é‡Šå™¨ï¼šè§£é‡Šä¸€å¥åå°±æäº¤è®¡ç®—æœºæ‰§è¡Œä¸€å¥ï¼Œå³ä¾¿æ·å¼è¾¹æ‰§è¡Œã€‚æ¯”å¦‚phpï¼Œpostscritpï¼Œjavascriptå°±æ˜¯å…¸å‹çš„è§£é‡Šæ€§è¯­è¨€ã€‚</li></ul><blockquote><p>ç”¨ä¸€ä¸ªé€šä¿—çš„ä¾‹å­æ¥è®²ï¼šæˆ‘ä»¬å»é¥­é¦†åƒé¥­ï¼Œç‚¹äº†å…«èœä¸€æ±¤ã€‚ç¼–è¯‘å™¨çš„æ–¹å¼å°±æ˜¯å¨å¸ˆæŠŠæ‰€æœ‰çš„èœç»™ä½ å…¨åšå¥½äº†ï¼Œä¸€èµ·ç»™ä½ ç«¯ä¸Šæ¥ï¼Œè‡³äºä½ åœ¨å“ªåƒï¼Œæ€ä¹ˆåƒï¼Œéšä¾¿ã€‚è§£é‡Šå™¨çš„æ–¹å¼å°±æ˜¯å¨å¸ˆåšå¥½ä¸€ä¸ªèœç»™ä½ ä¸Šä¸€ä¸ªèœï¼Œä½ å°±åƒè¿™ä¸ªèœï¼Œè€Œä¸”å¿…é¡»åœ¨é¥­åº—é‡Œåƒã€‚</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200309170643.png" alt="è§£é‡Šå™¨ä¸ç¼–è¯‘å™¨çš„åŒºåˆ«"></p><p>ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨çš„å·¥ä½œæµç¨‹çš„å·®åˆ«ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20160918194226830.jpg" alt="ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨çš„å·¥ä½œæµç¨‹çš„å·®åˆ«"></p><p>ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨çš„å„è‡ªçš„ç‰¹ç‚¹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/20200309171531.png" alt="å„è‡ªç‰¹ç‚¹"></p><h1 id="æ„é€ è§£é‡Šå™¨V1-0"><a href="#æ„é€ è§£é‡Šå™¨V1-0" class="headerlink" title="æ„é€ è§£é‡Šå™¨V1.0"></a>æ„é€ è§£é‡Šå™¨V1.0</h1><p>è¯¥ç³»åˆ—æ–‡ç« çš„ä½œè€…ä½¿ç”¨ Python ç¼–å†™Pascalè¯­è¨€çš„è§£é‡Šå™¨ã€‚</p><p>ç¬¬ä¸€ç‰ˆV1.0ï¼Œæ„é€ çš„è®¡ç®—å™¨æœ‰è¯¸å¤šé™åˆ¶ã€‚å¦‚ï¼š</p><ul><li>åªè¾“å…¥ä¸€ä½çš„æ•°å­—</li><li>ç°é˜¶æ®µä»…æ”¯æŒåŠ æ³•æ“ä½œ</li><li>è¾“å…¥ä¸­ä¸å…è®¸æœ‰ç©ºç™½ç¬¦</li></ul><p>è¿™äº›çº¦æŸä½¿å¾—æ„å»ºä¸€ä¸ªè®¡ç®—å™¨å¾ˆç®€å•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Token typesï¼š</span></span><br><span class="line"><span class="comment"># EOF (end-of-file) token is used to indicate that</span></span><br><span class="line"><span class="comment"># there is no more input left for lexical analysis</span></span><br><span class="line">INTEGER, PLUS, EOF = <span class="string">'INTEGER'</span>, <span class="string">'PLUS'</span>, <span class="string">'EOF'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Token</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, type, value)</span>:</span></span><br><span class="line"><span class="comment"># token type: INTEGER, PLUS, or EOF</span></span><br><span class="line">self.type  = type</span><br><span class="line"><span class="comment"># token value: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, '+', or None</span></span><br><span class="line">self.value = value</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="string">"""String representation of the class instance.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Examples:</span></span><br><span class="line"><span class="string">    Token(INTEGER, 3)</span></span><br><span class="line"><span class="string">    Token(PLUS, '+')</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">'Token(&#123;type&#125;, &#123;value&#125;)'</span>.format(</span><br><span class="line">    type=self.type,</span><br><span class="line">    value=repr(self.value)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="keyword">return</span> self.__str__()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Interpreter</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, text)</span>:</span></span><br><span class="line"><span class="comment"># client string input, e.g. "3+5"</span></span><br><span class="line">self.text = text</span><br><span class="line"><span class="comment"># self.pos is an index into self.text</span></span><br><span class="line">self.pos  = <span class="number">0</span></span><br><span class="line"><span class="comment"># current token instance</span></span><br><span class="line">self.current_token = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="keyword">raise</span> Exception(<span class="string">'Error parsing input'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_next_token</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="string">"""Lexical analyzer (also known as scanner or tokenizer)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">This method is responsible for breaking a sentence</span></span><br><span class="line"><span class="string">apart into tokens. One token at a time.</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">text = self.text</span><br><span class="line"></span><br><span class="line"><span class="comment"># is self.pos index past the end of the self.text ?</span></span><br><span class="line"><span class="comment"># if so, then return EOF token because there no more</span></span><br><span class="line"><span class="comment"># input left to convert into tokens</span></span><br><span class="line"><span class="keyword">if</span> self.pos &gt; len(text) - <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">return</span> Token(EOF, <span class="literal">None</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get a character at the position self.pos and decide</span></span><br><span class="line"><span class="comment"># what token to create based on the single character</span></span><br><span class="line">current_char = text[self.pos]</span><br><span class="line"></span><br><span class="line"><span class="comment"># if the character is a digit then convert it to</span></span><br><span class="line"><span class="comment"># integer, create an INTEGER token, increment self.pos</span></span><br><span class="line"><span class="comment"># index to point to the next character after the digit,</span></span><br><span class="line"><span class="comment"># and return the INTEGER token</span></span><br><span class="line"><span class="keyword">if</span> current_char.isdigit():</span><br><span class="line">    token     = Token(INTEGER, int(current_char))</span><br><span class="line">    self.pos += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> token</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> current_char == <span class="string">'+'</span>:</span><br><span class="line">    token     = Token(PLUS, current_char)</span><br><span class="line">    self.pos += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> token</span><br><span class="line"></span><br><span class="line">self.error()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">eat</span><span class="params">(self, token_type)</span>:</span></span><br><span class="line"><span class="comment"># compare the current token type with the passed token</span></span><br><span class="line"><span class="comment"># type and if they match then "eat" the current token</span></span><br><span class="line"><span class="comment"># and assign the next token to the self.current_token,</span></span><br><span class="line"><span class="comment"># otherwise raise an exception.</span></span><br><span class="line"><span class="keyword">if</span> self.current_token.type == token_type:</span><br><span class="line">    self.current_token = self.get_next_token()</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    self.error()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">expr</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="string">"""expr -&gt; INTEGER PLUS INTEGER"""</span></span><br><span class="line"><span class="comment"># set current token to the first token taken from the input</span></span><br><span class="line">self.current_token = self.get_next_token()</span><br><span class="line"></span><br><span class="line"><span class="comment"># we expect the current token to be a single-digit integer</span></span><br><span class="line">left = self.current_token</span><br><span class="line">self.eat(INTEGER)</span><br><span class="line"></span><br><span class="line"><span class="comment"># we expect the current token to be a '+' token</span></span><br><span class="line">op = self.current_token</span><br><span class="line">self.eat(PLUS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># we expect the current token to be a single-digit integer</span></span><br><span class="line">right = self.current_token</span><br><span class="line">self.eat(INTEGER)</span><br><span class="line"><span class="comment"># after the above call the self.current_token is set to</span></span><br><span class="line"><span class="comment"># EOF token</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># at this point INTEGER PLUS INTEGER sequence of tokens</span></span><br><span class="line"><span class="comment"># has been successfully found and the method can just</span></span><br><span class="line"><span class="comment"># return the result of adding two integers, thus</span></span><br><span class="line"><span class="comment"># effectively interpreting client input</span></span><br><span class="line">result = left.value + right.value</span><br><span class="line"><span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># To run under Python3 replace 'raw_input' call with 'input'</span></span><br><span class="line">    text = input(<span class="string">'calc&gt; '</span>)</span><br><span class="line"><span class="keyword">except</span> EOFError:</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> text:</span><br><span class="line">    <span class="keyword">continue</span></span><br><span class="line">interpreter = Interpreter(text)</span><br><span class="line">result = interpreter.expr()</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>æŠŠä»¥ä¸Šä»£ç ä¿å­˜åˆ°åä¸º <code>calc1.py</code> ä¸­ï¼Œæˆ–è€…ç›´æ¥ä» <a href="https://github.com/rspivak/lsbasi/blob/master/part1/calc1.py" target="_blank" rel="noopener">GitHub</a> ä¸Šä¸‹è½½ã€‚åœ¨ä½ å¼€å§‹ä»”ç»†ç ”ç©¶ä»£ ç ä¹‹å‰ï¼Œåœ¨å‘½ä»¤è¡Œä¸Šè¿è¡Œè¿™ä¸ªè®¡ç®—å™¨å¹¶çœ‹å®ƒå®ç°è¿è¡Œã€‚æŠŠç©ä¸€ä¸‹ï¼ä¸‹é¢æ˜¯åœ¨æˆ‘ç¬”è®°æœ¬ä¸Šçš„ä¸€ æ¬¡å°è¯•ï¼ˆå¦‚æœä½ æƒ³åœ¨ Python3 ä¸‹è¿è¡Œï¼Œå°±éœ€è¦æŠŠ <code>raw_input</code> æ›¿æ¢ä¸º ==input==ï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ python calc1.py</span><br><span class="line">calc&gt; 3+4</span><br><span class="line">7</span><br><span class="line">calc&gt; 3+5</span><br><span class="line">8</span><br><span class="line">calc&gt; 3+9</span><br><span class="line">12</span><br><span class="line">calc&gt;</span><br></pre></td></tr></table></figure><h2 id="ä»£ç åˆ†æ"><a href="#ä»£ç åˆ†æ" class="headerlink" title="ä»£ç åˆ†æ"></a>ä»£ç åˆ†æ</h2><p>å‡è®¾æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œè¾“å…¥ä¸€ä¸ªè¡¨è¾¾å¼â€œ3+5â€ã€‚ä½ çš„è§£é‡Šå™¨å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸² â€œ3+5â€ã€‚ä¸ºäº†ä½¿è§£é‡Šå™¨çœŸæ­£ç†è§£å¦‚ä½•å¤„ç†è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œéœ€è¦å…ˆæŠŠè¾“å…¥çš„ â€œ3+5â€ æ‹†åˆ†æˆè¢«å«åš <strong>token</strong> çš„éƒ¨ä»¶ã€‚</p><blockquote><p><strong>è¯æ³•åˆ†æ</strong>ï¼šï¼ˆ<strong>lexical analysis</strong>ï¼Œç®€ç§°<strong>lexer</strong>ï¼Œäº¦ç§°<strong>scanner</strong> æˆ– <strong>tokenizer</strong>ï¼‰</p><p>â€‹ è¯æ³•åˆ†æä¹Ÿç§°ä¸º <strong>åˆ†è¯</strong> ï¼Œæ­¤é˜¶æ®µç¼–è¯‘å™¨ä»å·¦å‘å³æ‰«ææºæ–‡ä»¶ï¼Œå°†å…¶å­—ç¬¦æµåˆ†å‰²æˆä¸€ä¸ªä¸ªçš„ <strong>è¯</strong> ï¼ˆ <strong>token</strong> ã€ <strong>è®°å·</strong> ï¼Œåæ–‡ä¸­å°†ç§°ä¸º <strong>token</strong> ï¼‰ã€‚</p><p><strong>Token</strong>ï¼š</p><p>â€‹ æ‰€è°“ <strong>token</strong> ï¼Œå°±æ˜¯æºæ–‡ä»¶ä¸­ä¸å¯å†è¿›ä¸€æ­¥åˆ†å‰²çš„ä¸€ä¸²å­—ç¬¦ï¼Œç±»ä¼¼äºè‹±è¯­ä¸­å•è¯ï¼Œæˆ–æ±‰è¯­ä¸­çš„è¯ã€‚</p></blockquote><p>è¿™é‡Œçš„ <strong>token</strong> å°±æ˜¯ä¸€ä¸ªæœ‰ç±»å‹çš„å€¼çš„å¯¹è±¡ï¼ˆå³ï¼Œtokenè¿˜å­˜ç€å€¼çš„ç±»å‹ï¼‰ã€‚ä¾‹å¦‚å¯¹äºå­—ç¬¦ä¸²â€œ3â€æ¥è¯´ï¼Œtoken ç±»å‹ä¸º <code>INTEGER</code> ï¼Œ ç›¸åº”çš„å€¼æ˜¯æ•´æ•° 3 ã€‚</p><p>è§£é‡Šå™¨<code>Interpreter</code>è¦åšçš„ç¬¬ä¸€æ­¥å°±æ˜¯è¯»å–è¾“å…¥çš„å­—ç¬¦ä¸²å¹¶æŠŠä»–è½¬åŒ–æˆ token <strong>æµ</strong>ã€‚è§£é‡Šå™¨ä¸­åšè¿™ä¸ªå·¥ä½œçš„éƒ¨åˆ†è¢«ç§°ä¸º <strong>è¯æ³•åˆ†æå™¨</strong>(lexical analyzer)ï¼Œç®€ç§° <strong>lexer</strong> ã€‚ä¹Ÿå¯ä»¥ç§°å®ƒä¸ºï¼š <strong>scanner</strong> æˆ– <strong>tokenizer</strong> ã€‚ä»–ä»¬çš„å«ä¹‰æ˜¯ä¸€æ ·çš„ï¼šè¡¨ç¤ºè§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨ä¸­å°†è¾“å…¥çš„å­—ç¬¦ä¸²è½¬åŒ–ä¸º token æµçš„éƒ¨åˆ†ã€‚</p><p>é‚£æ˜¯å¦‚ä½•è½¬åŒ–ä¸ºtokenæµå‘¢ï¼Ÿ</p><ul><li>è§£é‡Šå™¨ <code>Interpreter</code>ä¸­çš„ <code>get_next_token</code> æ–¹æ³•å°±æ˜¯ä½ çš„è¯æ³•åˆ†æå™¨ã€‚ä½ æ¯æ¬¡è°ƒç”¨å®ƒï¼Œå°±ä¼šä»è¾“å…¥åˆ°è§£é‡Šå™¨çš„å­—ç¬¦æµä¸­å¾—åˆ°ä¸‹ä¸€ä¸ª tokenã€‚è®©æˆ‘ä»¬ä»”ç»†çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼Œçœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆæŠŠå­—ç¬¦è½¬åŒ– ä¸º token çš„ã€‚è¾“å…¥è¢«å­˜æ”¾åœ¨å˜é‡ <code>text</code> ä¸­ï¼Œå®ƒä¿å­˜äº†è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œ <code>pos</code> æ˜¯æŒ‡å‘è¯¥å­—ç¬¦ä¸²çš„ä¸€ä¸ªç´¢å¼•ï¼ˆæŠŠå­—ç¬¦ä¸²çœ‹ä½œæ˜¯ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼‰ã€‚ <code>pos</code> çš„åˆå€¼è¢«è®¾ä¸º 0, æŒ‡å‘å­—ç¬¦â€˜3â€™ã€‚ è¯¥æ–¹æ³•é¦–å…ˆæ£€æŸ¥è¯¥å­—ç¬¦æ˜¯ä¸æ˜¯æ•°å­—ï¼Œè‹¥æ˜¯æ•°å­—ï¼Œå°±é€’å¢ <code>pos</code> å¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º <code>INTEGER</code> å€¼ ä¸ºæ•´æ•° 3 çš„ tokenï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part1_lexer1-1583746666076.png" alt="img"></p><p>ç°åœ¨ <code>pos</code> æŒ‡å‘äº† <code>text</code> ä¸­çš„å­—ç¬¦â€˜+â€™ï¼Œä¸‹æ¬¡ä½ è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå®ƒä¼šå…ˆæµ‹è¯• <code>pos</code> ä½ ç½®çš„å­—ç¬¦æ˜¯å¦æ˜¯æ•°å­—ï¼Œç„¶åå†æµ‹è¯•å®ƒæ˜¯å¦æ˜¯åŠ å·ï¼Œæ­¤æ—¶å®ƒæ˜¯åŠ å·ã€‚è¿™æ ·è¯¥æ–¹æ³•å°±é€’å¢ <code>pos</code> å¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º <code>PLUS</code> å€¼ä¸ºâ€˜+â€™çš„ tokenï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part1_lexer2.png" alt="img"></p><p>ç°åœ¨ <code>pos</code> æŒ‡å‘äº†å­—ç¬¦â€˜5â€™ã€‚å½“ä½ å†æ¬¡è°ƒç”¨ <code>get_next_token</code> æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥ <code>pos</code> ä½ç½® æ˜¯å¦æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ­¤æ—¶æ˜¯çš„ï¼Œå› æ­¤å®ƒé€’å¢ <code>pos</code> å¹¶è¿”å›ä¸€ä¸ªç±»å‹ä¸º <code>INTEGER</code> å€¼ä¸ºâ€˜5â€™çš„ tokenï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part1_lexer3.png" alt="img"></p><p>ç°åœ¨ç´¢å¼• <code>pos</code> è¶Šè¿‡äº†å­—ç¬¦ä¸²â€œ3+5â€çš„æœ«å°¾ï¼Œæ¥ä¸‹æ¥æ¯æ¬¡è°ƒç”¨ <code>get_next_token</code> æ–¹æ³•éƒ½ä¼š è¿”å› <code>EOF</code> tokenï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_part1_lexer4.png" alt="img"></p><p>è‡ªå·±åŠ¨æ‰‹è¯•è¯•çœ‹çœ‹ä½ çš„è®¡ç®—å™¨çš„ lexer ç»„ä»¶æ€ä¹ˆå·¥ä½œçš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> calc1 <span class="keyword">import</span> Interpreter</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>interpreter = Interpreter(<span class="string">'3+5'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>interpreter.get_next_token()</span><br><span class="line">Token(INTEGER, <span class="number">3</span>)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>interpreter.get_next_token()</span><br><span class="line">Token(PLUS, <span class="string">'+'</span>)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>interpreter.get_next_token()</span><br><span class="line">Token(INTEGER, <span class="number">5</span>)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>interpreter.get_next_token()</span><br><span class="line">Token(EOF, <span class="literal">None</span>)</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä½ çš„è§£é‡Šå™¨å·²ç»å¯ä»¥ä»è¾“å…¥çš„å­—ç¬¦æµä¸­è·å¾— token æµäº†ï¼Œè§£é‡Šå™¨éœ€è¦å¯¹å®ƒåšç‚¹ä»€ä¹ˆï¼š å®ƒéœ€è¦ä»ä½¿ç”¨ lexer <code>get_next_token</code> å¾—åˆ°çš„å­—ç¬¦æµä¸­æ‰¾åˆ°ç»“æ„ã€‚ä½ çš„è§£é‡Šå™¨æœŸæœ›ä» æµä¸­æ‰¾åˆ°å¦‚ä¸‹çš„ç»“æ„ï¼š INTEGER -&gt; PLUS -&gt; INTEGER. å³ï¼Œå®ƒè¯•ç€æ‰¾åˆ°è¿™æ ·ä¸€ä¸ª token åº åˆ—ï¼šæ•´æ•°åè·Ÿä¸€ä¸ªåŠ å·å†è·Ÿä¸€ä¸ªæ•´æ•°ã€‚</p><p>è´Ÿè´£æŸ¥æ‰¾å’Œè§£é‡Šè¿™ä¸ªç»“æ„çš„æ–¹æ³•æ˜¯ <code>expr</code>. è¿™ä¸ªæ–¹æ³•éªŒè¯ä¸€ä¸ª token åºåˆ—æ˜¯å¦éµä»æœŸæœ›çš„ token åºåˆ—ï¼Œå³ INTEGER -&gt; PLUS -&gt; INTEGER. å½“ç¡®å®šéµä»è¿™ä¸ªç»“æ„åï¼Œå®ƒå°±æŠŠ PLUS å·¦ è¾¹å’Œå³è¾¹ token çš„å€¼ç›¸åŠ æ¥ç”Ÿæˆç»“æœï¼Œä»è€ŒæˆåŠŸåœ°è§£é‡Šäº†ä½ ä¼ ç»™è§£é‡Šå™¨çš„ç®—æœ¯è¡¨è¾¾å¼ã€‚</p><p><code>expr</code> æ–¹æ³•ä½¿ç”¨äº†è¾…åŠ©æ–¹æ³• <code>eat</code> æ¥éªŒè¯ä¼ ç»™ <code>eat</code> çš„ token ç±»å‹ä¸å½“å‰çš„ token ç±» å‹ç›¸åŒ¹é…ã€‚åœ¨åŒ¹é…åˆ°ä¼ å…¥çš„ token ç±»å‹åï¼Œ <code>eat</code> æ–¹æ³•ä¼šå–å¾—ä¸‹ä¸€ä¸ª token å¹¶æŠŠå®ƒèµ‹å€¼ ç»™å˜é‡ <code>current_token</code>, è¿™æ ·å®é™…ä¸Šæ˜¯â€œåƒæ‰â€äº†å½“å‰åŒ¹é…çš„ token å¹¶æŠŠæƒ³è±¡ä¸­çš„ token æµä¸­çš„æŒ‡é’ˆå‘å‰ç§»åŠ¨äº†ã€‚å¦‚æœ token æµä¸­çš„ç»“æ„ä¸éµä»æœŸæœ›çš„ INTEGER PLUS INTEGER åº åˆ—ï¼Œ <code>eat</code> æ–¹æ³•å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>å›é¡¾ä¸€ä¸‹ä½ çš„è§£é‡Šå™¨ä¸ºäº†å¯¹ä¸€ä¸ªç®—æœ¯è¡¨è¾¾å¼æ±‚å€¼éƒ½åšäº†ä»€ä¹ˆï¼š</p><ol><li>è§£é‡Šå™¨æ¥<code>Interpreter</code>æ”¶ä¸€ä¸ªè¾“å…¥å­—ç¬¦ä¸²ï¼Œå‡è®¾ä¸ºâ€œ3+5â€</li><li>è§£é‡Šå™¨è°ƒç”¨äº† <code>expr</code> æ–¹æ³•æ¥ä»è¯æ³•è§£æå™¨ <code>get_next_token</code> è¿”å›çš„ token æµä¸­å¯»æ‰¾ä¸€ä¸ªç»“æ„ã€‚è¿™ä¸ªç»“æ„å°±æ˜¯ä¸€ä¸ª <em>INTEGER PLUS INTEGER</em> çš„å½¢å¼ã€‚å½“ç¡®è®¤äº†è¿™ä¸ªç»“æ„ä»¥åï¼Œå®ƒå°±ä½¿ç”¨æŠŠä¸¤ä¸ª INTEGER token ç›¸åŠ çš„æ–¹å¼æ¥è§£é‡Šè¿™ä¸ªè¾“å…¥ï¼Œå› ä¸ºæ­¤æ—¶è§£é‡Šå™¨å·²ç»æ¸…æ¥š åœ°çŸ¥é“å®ƒè¦åšçš„å°±æ˜¯æŠŠ 3 å’Œ 5 ä¸¤ä¸ªæ•´æ•°ç›¸åŠ ã€‚</li></ol><p>ç¥è´ºä½ ã€‚ä½ åˆšåˆšå­¦ä¼šäº†æ€ä¹ˆæ„é€ ä½ çš„ç¬¬ä¸€ä¸ªè§£é‡Šå™¨ï¼</p><p>ç°åœ¨æ˜¯æ—¶å€™åšæ­¤ç»ƒä¹ äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/lsbasi_exercises2.png" alt="img"></p><p>ä½ ä¸ä¼šè§‰å¾—ä½ åˆšåˆšè¯»äº†è¿™ç¯‡æ–‡ç« å°±è¶³å¤Ÿäº†ï¼Œæ˜¯å§ï¼Ÿå¥½äº†ï¼Œè‡ªå·±åŠ¨æ‰‹åšä¸‹é¢çš„ç»ƒä¹ ï¼š</p><ol><li>ä¿®æ”¹ä»£ç ä½¿å¾—å…è®¸è¾“å…¥å¤šä½æ•´æ•°ï¼Œä¾‹å¦‚â€œ12+3â€</li><li>å¢åŠ ä¸€ä¸ªè·³è¿‡ç©ºç™½ç¬¦çš„æ–¹æ³•ï¼Œä½¿ä½ çš„è®¡ç®—å™¨å¯ä»¥å¤„ç†åŒ…å«ç©ºç™½ç¬¦çš„è¾“å…¥å¦‚ â€œ 12 + 3â€</li><li>ä¿®æ”¹ä»£ç ä½¿å¾—å®ƒå¯ä»¥å¤„ç†â€˜-â€™è€Œéâ€˜+â€™çš„æƒ…å†µ</li></ol><p>æ£€æŸ¥ä½ çš„ç†è§£ã€‚</p><ol><li>ä»€ä¹ˆæ˜¯è§£é‡Šå™¨ï¼Ÿ</li><li>ä»€ä¹ˆæ˜¯ç¼–è¯‘å™¨ï¼Ÿ</li><li>è§£é‡Šå™¨å’Œç¼–è¯‘å™¨çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>ä»€ä¹ˆæ˜¯ tokenï¼Ÿ</li><li>å°†è¾“å…¥æ‹†åˆ†æˆ token çš„è¿‡ç¨‹å«ä»€ä¹ˆï¼Ÿ</li><li>è§£é‡Šå™¨ä¸­åšè¯æ³•åˆ†æçš„éƒ¨åˆ†å«ä»€ä¹ˆï¼Ÿ</li><li>è§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨çš„è¿™ä¸ªéƒ¨åˆ†è¿˜æœ‰ä»€ä¹ˆå…¶ä»–å¸¸è§çš„åå­—ï¼Ÿ</li></ol><p>ç›¸å…³æ–‡ç« é“¾æ¥ï¼š</p><p>ç¼–è¯‘å™¨ä¸è§£é‡Šå™¨ï¼š<a href="https://www.liujiangblog.com/course/python/9" target="_blank" rel="noopener">https://www.liujiangblog.com/course/python/9</a></p><p>Letâ€™s Build A Simple Interpreter. Part 1ï¼š<a href="https://feng-qi.github.io/2018/01/23/lets-build-a-simple-interpreter-part-01/" target="_blank" rel="noopener">https://feng-qi.github.io/2018/01/23/lets-build-a-simple-interpreter-part-01/</a></p>]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;&lt;hr&gt;&lt;p&gt;ä¸ºä»€ä¹ˆè¦ä½ å­¦è§£é‡Šå™¨å’Œç¼–è¯‘å™¨ï¼Ÿè¿™é‡Œä½ ä¸‰æ¡ç†ç”±ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Letâ€™s Build A Simple Interpreter" scheme="https://www.longlongqin.top/tags/Let%E2%80%99s-Build-A-Simple-Interpreter/"/>
    
  </entry>
  
  <entry>
    <title>2ã€ç”µå­è®¡ç®—æœº</title>
    <link href="https://www.longlongqin.top/archives/d84f.html"/>
    <id>https://www.longlongqin.top/archives/d84f.html</id>
    <published>2020-03-07T19:02:53.000Z</published>
    <updated>2020-03-17T09:03:42.618Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªç³»åˆ—çš„è¯¾ç¨‹è¿˜æ˜¯å€¼å¾—å¤§å®¶å»çœ‹ä¸€çœ‹çš„ã€‚è¿™ä¸ªç³»åˆ—çš„è§†é¢‘å«ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹ã€‚è™½ç„¶å«é€Ÿæˆè¯¾ï¼Œæˆ‘ä»¬ä¹Ÿè¦åšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œå®ƒè‚¯å®šä¸æ˜¯è®©ä½ çœ‹äº†è¿™äº›å†…å®¹ä½ å°±ä»€ä¹ˆéƒ½çŸ¥é“äº†ã€‚è¿™æ˜¯ç§‘æ™®æ€§çš„è§†é¢‘ã€‚è¿™ä¸ªè§†é¢‘éƒ½æ˜¯è¢«ç¿»è¯‘å¥½çš„ï¼Œå†æ¬¡æ„Ÿè°¢è¿™äº›ç¿»è¯‘è€…ã€‚</p><a id="more"></a><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è§†é¢‘åœ¨Bç«™ä¸Šéƒ½æœ‰å…¨é›†çš„ï¼Œä¼ é€é—¨ï¼š<a href="https://www.bilibili.com/video/av21376839" target="_blank" rel="noopener">https://www.bilibili.com/video/av21376839</a></p><p>åœ¨GitHubä¸Šçš„åœ°å€ï¼š<a href="https://github.com/1c7/crash-course-computer-science-chinese" target="_blank" rel="noopener">https://github.com/1c7/crash-course-computer-science-chinese</a></p><p>è¿™é—¨è¯¾æ€»å…±æœ‰40èŠ‚ï¼Œæ¯èŠ‚è¯¾çš„æ ‡é¢˜ä¸ºï¼š</p><ol><li>è®¡ç®—æœºæ—©æœŸå†å²</li><li>ç”µå­è®¡ç®—</li><li>å¸ƒå°”é€»è¾‘ä¸é€»è¾‘ç”µè·¯</li><li>äºŒè¿›åˆ¶</li><li>ç®—æœ¯é€»è¾‘å•å…ƒ</li><li>å¯„å­˜å™¨ &amp; å†…å­˜</li><li>ä¸­å¤®å¤„ç†å™¨</li><li>æŒ‡ä»¤å’Œç¨‹åº</li><li>é«˜çº§ CPU è®¾è®¡</li><li>ç¼–ç¨‹å²è¯</li><li>ç¼–ç¨‹è¯­è¨€</li><li>ç¼–ç¨‹åŸç†ï¼šè¯­å¥å’Œå‡½æ•°</li><li>ç®—æ³•åˆæ­¥</li><li>æ•°æ®ç»“æ„</li><li>é˜¿å…°Â·å›¾çµ</li><li>è½¯ä»¶å·¥ç¨‹</li><li>é›†æˆç”µè·¯ã€æ‘©å°”å®šå¾‹</li><li>æ“ä½œç³»ç»Ÿ</li><li>å†…å­˜ &amp; å‚¨å­˜ä»‹è´¨</li><li>æ–‡ä»¶ç³»ç»Ÿ</li><li>å‹ç¼©</li><li>å‘½ä»¤è¡Œç•Œé¢</li><li>å±å¹• &amp; 2D å›¾å½¢æ˜¾ç¤º</li><li>å†·æˆ˜å’Œæ¶ˆè´¹ä¸»ä¹‰</li><li>ä¸ªäººè®¡ç®—æœºé©å‘½</li><li>å›¾å½¢ç”¨æˆ·ç•Œé¢</li><li>3D å›¾å½¢</li><li>è®¡ç®—æœºç½‘ç»œ</li><li>äº’è”ç½‘</li><li>ä¸‡ç»´ç½‘</li><li>ç½‘ç»œå®‰å…¨</li><li>é»‘å®¢ä¸æ”»å‡»</li><li>åŠ å¯†</li><li>æœºå™¨å­¦ä¹ ä¸äººå·¥æ™ºèƒ½</li><li>è®¡ç®—æœºè§†è§‰</li><li>è‡ªç„¶è¯­è¨€å¤„ç†</li><li>æœºå™¨äºº</li><li>è®¡ç®—æœºä¸­çš„å¿ƒç†å­¦</li><li>æ•™è‚²å‹ç§‘æŠ€</li><li>å¥‡ç‚¹ï¼Œå¤©ç½‘ï¼Œè®¡ç®—æœºçš„æœªæ¥</li></ol><h1 id="è®¡ç®—æœºæ—©æœŸå†å²"><a href="#è®¡ç®—æœºæ—©æœŸå†å²" class="headerlink" title="è®¡ç®—æœºæ—©æœŸå†å²"></a>è®¡ç®—æœºæ—©æœŸå†å²</h1><p>è¿™ä¸€å¼ å›¾å¤§è‡´è¯´æ˜äº†è®¡ç®—æœºæ—©æœŸå‘å±•çš„å†å²ã€‚å›¾ç‰‡æ¥æºï¼šè¯·æŸ¥çœ‹å›¾ç‰‡æœ¬èº«é“¾æ¥ã€‚</p><p>åé¢çš„è¯¾ä¼šè¾ƒè¯¦ç»†çš„è®²è§£ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/5c2dbf8e0001443913279329.png" alt="è®¡ç®—æœºå†å²"></p><h1 id="ç”µå­è®¡ç®—æœº"><a href="#ç”µå­è®¡ç®—æœº" class="headerlink" title="ç”µå­è®¡ç®—æœº"></a>ç”µå­è®¡ç®—æœº</h1><h2 id="ç»§ç”µå™¨"><a href="#ç»§ç”µå™¨" class="headerlink" title="ç»§ç”µå™¨"></a>ç»§ç”µå™¨</h2><p>åœ¨1937å¹´æœ€å¤§çš„æœºç”µè®¡ç®—æœºä¹‹ä¸€æ˜¯å“ˆä½›çš„é©¬å…‹ä¸€å·(Harvard Mark â… )ï¼Œæ˜¯IBMåœ¨1944å¹´ç»™äºŒæˆ˜çš„åŒç›Ÿå›½å»ºé€ çš„ã€‚è¯¥æœºå™¨çš„å¤§è„‘(CPUçš„åŸºç¡€å™¨ä»¶)æ˜¯â€œ<strong>ç»§ç”µå™¨</strong>â€ã€‚</p><ul><li><strong>ç»§ç”µå™¨</strong>ï¼šæ˜¯ç”¨ç”µæ§åˆ¶çš„æœºæ¢°å¼€å…³ï¼Œç»§ç”µå™¨é‡Œæœ‰æ ¹â€œæ§åˆ¶çº¿è·¯â€æ§åˆ¶ç€ç”µè·¯çš„å¼€å…³ï¼Œâ€œæ§åˆ¶çº¿è·¯â€è¿ç€ä¸€ä¸ªçº¿åœˆï¼Œå½“çº¿åœˆé€šç”µæ—¶ï¼Œä¼šäº§ç”Ÿæ„Ÿåº”ç£åœºï¼Œç”±æ­¤ç”±æ­¤èƒ½å¤Ÿå¸å¼•ä¸Šæ–¹çš„é‡‘å±è‡‚ï¼Œä»è€Œé—­åˆç”µè·¯ï¼Œå¾—åˆ°é«˜ç”µå¹³ã€‚å®ƒçš„<strong>æ€§èƒ½ï¼š</strong>1940å¹´ä¸€ä¸ªå¥½çš„ç»§ç”µå™¨1ç§’èƒ½ç¿»è½¬50æ¬¡ã€‚å“ˆä½›é©¬å…‹ä¸€å·1ç§’èƒ½åš3æ¬¡åŠ å‡æ³•è¿ç®—ï¼Œä¸€æ¬¡ä¹˜æ³•éœ€è¦6ç§’ï¼Œé™¤æ³•éœ€è¦15ç§’ï¼Œä¸‰è§’å‡½æ•°éœ€è¦ä¸€åˆ†é’Ÿä»¥ä¸Šã€‚å®ƒçš„<strong>ç¼ºç‚¹ï¼š</strong>æ§åˆ¶å¼€å…³çš„é‡‘å±è‡‚æ˜¯â€œæœ‰è´¨é‡çš„â€ï¼Œå› æ­¤æ— æ³•å¿«é€Ÿå¼€å…³ã€‚å¹¶ä¸”é‡‘å±è‡‚çš„åå¤ç§»åŠ¨å°±ä¼šå­˜åœ¨ç£¨æŸï¼ˆä»»ä½•ä¼šåŠ¨çš„æœºæ¢°éƒ½ä¼šéšæ—¶é—´ç£¨æŸï¼‰ï¼Œå“ˆä½›é©¬å…‹ä¸€å·å¹³å‡æ¯å¤©éœ€è¦æ›´æ¢ä¸€ä¸ªæ•…éšœç»§ç”µå™¨ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200308033154957.png" alt="ç»§ç”µå™¨"></p><h2 id="çœŸç©ºç®¡"><a href="#çœŸç©ºç®¡" class="headerlink" title="çœŸç©ºç®¡"></a>çœŸç©ºç®¡</h2><p>åœ¨1904å¹´ï¼Œè‹±å›½ç‰©ç†å­¦å®¶John Ambrose Flemingå¼€å‘äº†æ–°çš„ç”µå­ç»„ä»¶â€”â€”<strong>çƒ­ç”µå­ç®¡ï¼ˆThermionic valveï¼‰</strong>ã€‚</p><ul><li><strong>çƒ­ç”µå­ç®¡</strong>ï¼šæŠŠä¸¤ä¸ªç”µæè£…åœ¨ä¸€ä¸ªæ°”å¯†çš„çœŸç©ºç»ç’ƒç¯æ³¡ä¸­ã€‚å…¶ä¸­ä¸€ä¸ªç‚¹å‡»Aå¯ä»¥åŠ çƒ­ï¼Œä»è€Œå‘å°„ç”µå­ï¼Œç§°ä¸º<strong>çƒ­ç”µå­å‘å°„ï¼ˆThermionic emissionï¼‰</strong>ï¼›å¦ä¸€ä¸ªç”µæBä¼šå¸å¼•ç”µå­ï¼Œæ¥å½¢æˆç”µæµã€‚ä½†åªæœ‰å½“ç”µæBå¸¦æ­£ç”µæ—¶æ‰èƒ½å¸å¼•ç”µå­ï¼Œå¦åˆ™å½“ç”µæBå¸¦è´Ÿç”µè·æˆ–è€…ä¸­æ€§ç”µè·æ—¶ï¼Œç”µå­å°±æ— æ³•è·¨è¶ŠçœŸç©ºåŒºã€‚</li></ul><p>ç¾å›½å‘æ˜å®¶Lee de Foreståœ¨æ­¤åŸºç¡€ä¸ŠåŠ å…¥äº†ç¬¬ä¸‰ä¸ªæ§åˆ¶ç”µæã€‚é€šè¿‡å‘æ§åˆ¶ç”µææ–½åŠ æ­£ç”µè·ï¼Œå°±èƒ½å¸å¼•ç”µå­ï¼Œä»è€Œé—­åˆç”µè·¯ï¼›è€Œé€šè¿‡æ–½åŠ è´Ÿç”µè·ï¼Œå°±èƒ½é—­åˆç”µè·¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/v2-94062a34bd644ef937224efaa2ebdf6c_720w.png" alt="img"></p><p><strong>ç‰¹ç‚¹ï¼š</strong></p><p><em>æ¯ç§’å¯å¼€é—­æ•°åƒæ¬¡ã€‚</em></p><p><em>å’Œç»§ç”µå™¨ç›¸åŒçš„æ˜¯ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªæ§åˆ¶çº¿è·¯æ¥æ§åˆ¶æ–­å¼€æˆ–é—­åˆç”µè·¯ï¼Œå¹¶ä¸”çœŸç©ºç®¡å†…æ²¡æœ‰ä¼šåŠ¨çš„ç»„ä»¶ï¼Œå› æ­¤å­˜åœ¨æ›´å°‘çš„ç£¨æŸã€‚</em></p><p><em>æ¯”è¾ƒè„†å¼±ï¼Œä¼šåƒç¯æ³¡ä¸€æ ·çƒ§åï¼Œå¹¶ä¸”ä½“ç§¯æ¯”è¾ƒå¤§ã€‚</em></p><p><strong>çœŸç©ºç®¡çš„å‡ºç°ï¼Œæ ‡å¿—ç€è®¡ç®—æœºä»æœºç”µè½¬å‘ç”µå­</strong>ï¼Œç”µå­æ•°å€¼ç§¯åˆ†è®¡ç®—æœºENIACï¼Œåœ¨1946å¹´äºå®¾å¤•æ³•å°¼äºšå¤§å­¦è®¾è®¡åˆ¶é€ ï¼Œè¿™æ˜¯ä¸–ä¸Šç¬¬ä¸€ä¸ªçœŸæ­£çš„é€šç”¨å¯ç¼–ç¨‹ç”µå­è®¡ç®—æœºï¼Œæ¯ç§’å¯æ‰§è¡Œ5000æ¬¡åä½åŠ å‡æ³•ã€‚ä½†æ˜¯ç”±äºå­˜åœ¨å¤§é‡çš„çœŸç©ºç®¡ï¼Œå› æ­¤ENIACè¿è¡ŒåŠå¤©å·¦å³å°±ä¼šå‡ºç°ä¸€æ¬¡æ•…éšœã€‚</p><h2 id="æ™¶ä½“ç®¡"><a href="#æ™¶ä½“ç®¡" class="headerlink" title="æ™¶ä½“ç®¡"></a>æ™¶ä½“ç®¡</h2><p><strong>æ™¶ä½“ç®¡ï¼š</strong>ç±»ä¼¼äºç»§ç”µå™¨å’ŒçœŸç©ºç®¡ï¼Œæ™¶ä½“ç®¡ä¹Ÿæ˜¯ä¸€ä¸ªç”¨äºæ§åˆ¶ç”µè·¯é—­åˆæ–­å¼€çš„å¼€å…³ã€‚æ™¶ä½“ç®¡æœ‰ä¸¤ä¸ªç”µæï¼Œè¿™ä¸¤ä¸ªç”µæä¹‹é—´é€šè¿‡åŠå¯¼ä½“ææ–™éš”å¼€ã€‚æ§åˆ¶çº¿è¿æ¥åˆ°ä¸€ä¸ªâ€œé—¨â€ç”µæï¼Œé€šè¿‡æ”¹â€œé—¨â€çš„ç”µè·ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶åŠå¯¼ä½“çš„å¯¼ç”µæ€§ï¼Œç”±æ­¤æ¥æ§åˆ¶ç”µæµæ˜¯å¦æµåŠ¨ã€‚å½“æ§åˆ¶çº¿è·¯é€šç”µæ—¶ï¼Œä¸¤ä¸ªç”µææ¥é€šï¼Œå¦åˆ™ä¸¤ä¸ªç”µææ–­å¼€ã€‚</p><p><strong>ç‰¹ç‚¹ï¼š</strong></p><p><em>æ¯ç§’å¯å¼€å…³10000æ¬¡ã€‚</em></p><p><em>ç›¸æ¯”ç»ç’ƒåˆ¶æˆçš„çœŸç©ºç®¡ï¼Œæ™¶ä½“ç®¡æ˜¯å›ºä½“çš„ï¼Œå¹¶ä¸”ä½“ç§¯è¿œå°äºç»§ç”µå™¨å’ŒçœŸç©ºç®¡ã€‚</em></p><p>ç¬¬ä¸€ä¸ªæ¶ˆè´¹è€…å¯è´­ä¹°çš„ï¼Œå®Œå…¨ç”±æ™¶ä½“ç®¡æ„æˆçš„è®¡ç®—æœºæ˜¯1957å¹´å‘å¸ƒçš„IBM 608ï¼Œå®ƒæœ‰3000ä¸ªæ™¶ä½“ç®¡ï¼Œæ¯ç§’æ‰§è¡Œ4500æ¬¡åŠ å‡æ³•ï¼Œæˆ–80æ¬¡å·¦å³çš„ä¹˜é™¤æ³•ã€‚</p><p>å¦‚ä»Šï¼Œè®¡ç®—æœºé‡Œçš„æ™¶ä½“ç®¡å°äº50nmï¼Œå¹¶ä¸”æ¯ç§’å¯åˆ‡æ¢ä¸Šç™¾ä¸‡æ¬¡ï¼Œå·¥ä½œå‡ åå¹´ã€‚å¾ˆå¤šæ™¶ä½“ç®¡å’ŒåŠå¯¼ä½“å¼€å‘åœ¨åœ£å…‹æ‹‰æ‹‰è°·ï¼Œä½äºæ—§é‡‘å±±å’Œåœ£æ²³è¥¿ä¹‹é—´ï¼Œç”±äºåˆ¶é€ åŠå¯¼ä½“æœ€å¸¸è§çš„ææ–™æ˜¯ç¡…ï¼Œç”±æ­¤è¿™ä¸ªåœ°æ–¹è¢«ç§°ä¸ºâ€œç¡…è°·â€ã€‚å¹¶ä¸”William Shockleyæ¬è¿‡å»åˆ›å»ºäº†è‚–å…‹åˆ©åŠå¯¼ä½“ï¼Œé‡Œé¢çš„å‘˜å·¥åæ¥æˆç«‹äº†ä»™ç«¥åŠå¯¼ä½“ï¼Œè€Œè¿™é‡Œé¢çš„å‘˜å·¥åæ¥åˆ›ç«‹äº†è‹±ç‰¹å°”ã€‚</p><hr><p>æ‰€ä»¥ï¼Œè®¡ç®—æœºçš„å¤§è„‘åŸºç¡€å•å…ƒçš„å‘å±•è·¯å¾„ï¼Œå¯æ¦‚æ‹¬ä¸ºï¼š<strong>ç»§ç”µå™¨-&gt;ç”µå­ç®¡-&gt;æ™¶ä½“ç®¡</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ä¸ªç³»åˆ—çš„è¯¾ç¨‹è¿˜æ˜¯å€¼å¾—å¤§å®¶å»çœ‹ä¸€çœ‹çš„ã€‚è¿™ä¸ªç³»åˆ—çš„è§†é¢‘å«ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹ã€‚è™½ç„¶å«é€Ÿæˆè¯¾ï¼Œæˆ‘ä»¬ä¹Ÿè¦åšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œå®ƒè‚¯å®šä¸æ˜¯è®©ä½ çœ‹äº†è¿™äº›å†…å®¹ä½ å°±ä»€ä¹ˆéƒ½çŸ¥é“äº†ã€‚è¿™æ˜¯ç§‘æ™®æ€§çš„è§†é¢‘ã€‚è¿™ä¸ªè§†é¢‘éƒ½æ˜¯è¢«ç¿»è¯‘å¥½çš„ï¼Œå†æ¬¡æ„Ÿè°¢è¿™äº›ç¿»è¯‘è€…ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://www.longlongqin.top/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="ã€Šè®¡ç®—æœºç§‘å­¦é€Ÿæˆè¯¾ã€‹" scheme="https://www.longlongqin.top/tags/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E9%80%9F%E6%88%90%E8%AF%BE%E3%80%8B/"/>
    
  </entry>
  
  <entry>
    <title>Hexoä¹‹ Yiliaä¸»é¢˜é…ç½®</title>
    <link href="https://www.longlongqin.top/archives/460671de.html"/>
    <id>https://www.longlongqin.top/archives/460671de.html</id>
    <published>2020-03-06T14:50:08.000Z</published>
    <updated>2020-03-18T08:51:47.606Z</updated>
    
    <content type="html"><![CDATA[<p>Yiliaä¸»é¢˜é…ç½®</p><a id="more"></a><h2 id="åœ¨å·¦ä¾§æ˜¾ç¤ºæ€»æ–‡ç« æ•°"><a href="#åœ¨å·¦ä¾§æ˜¾ç¤ºæ€»æ–‡ç« æ•°" class="headerlink" title="åœ¨å·¦ä¾§æ˜¾ç¤ºæ€»æ–‡ç« æ•°"></a>åœ¨å·¦ä¾§æ˜¾ç¤ºæ€»æ–‡ç« æ•°</h2><p>å°†themes\yilia\layout_partial\left-col.ejsæ–‡ä»¶çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;nav <span class="class"><span class="keyword">class</span></span>=<span class="string">"header-menu"</span>&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">    &lt;% <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> theme.menu)&#123; %&gt;</span><br><span class="line">        &lt;li&gt;<span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&lt;%- url_for(theme.menu[i]) %&gt;"</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">i</span> %&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>&lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;%&#125;%&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/u</span>l&gt;</span><br><span class="line">&lt;<span class="regexp">/nav&gt;</span></span><br></pre></td></tr></table></figure><p>åé¢åŠ ä¸Š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;nav&gt;</span><br><span class="line">    æ€»æ–‡ç« æ•° &lt;%=site.posts.length%&gt;</span><br><span class="line">&lt;<span class="regexp">/nav&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å­—æ•°ã€é˜…è¯»æ—¶é•¿æ·»åŠ "><a href="#å­—æ•°ã€é˜…è¯»æ—¶é•¿æ·»åŠ " class="headerlink" title="å­—æ•°ã€é˜…è¯»æ—¶é•¿æ·»åŠ "></a>å­—æ•°ã€é˜…è¯»æ—¶é•¿æ·»åŠ </h2><p>é¦–å…ˆå®‰è£… <a href="https://github.com/willin/hexo-wordcount" target="_blank" rel="noopener">hexo-wordcount</a></p><p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save hexo-wordcount  <span class="comment">#å¦‚æœå®‰è£…äº†cnpmï¼Œå¯æ¢ä¸ºcnpmå®‰è£…</span></span><br></pre></td></tr></table></figure><blockquote><p>Node ç‰ˆæœ¬7.6.0ä¹‹å‰,è¯·å®‰è£… 2.x ç‰ˆæœ¬ (Node.js v7.6.0 and previous)</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Copynpm install hexo-wordcount@2 --save</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>themes\yilia\layout\_partial\left-col.ejs</code>ä¸­æ·»åŠ ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Copy&lt;nav&gt;</span><br><span class="line">    æ€»å­—æ•° &lt;span class&#x3D;&quot;post-count&quot;&gt;&lt;%&#x3D; totalcount(site, &#39;0,0.0a&#39;) %&gt;&lt;&#x2F;span&gt;</span><br><span class="line">&lt;&#x2F;nav&gt;</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä½ç½®åœ¨å¦‚ä¸‹ä»£ç çš„ä¸‹é¢ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Copy&lt;nav&gt;</span><br><span class="line">    æ€»æ–‡ç« æ•° &lt;%&#x3D;site.posts.length%&gt;</span><br><span class="line">&lt;&#x2F;nav&gt;</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘ <code>themes\yilia\layout\_partial\article.ejs</code></p><p>åœ¨headerä¸‹é¢åŠ å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div align&#x3D;&quot;left&quot; class&#x3D;&quot;post-count&quot;&gt;   &lt;!--å…¶ä¸­alignå¯ä»¥åœ¨ï¼šrightã€centerã€left--&gt;</span><br><span class="line">    å­—æ•°ï¼š&lt;%&#x3D; wordcount(post.content) %&gt;å­— | é¢„è®¡é˜…è¯»æ—¶é•¿ï¼š&lt;%&#x3D; min2read(post.content) %&gt;åˆ†é’Ÿ</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure><p>å³å¯æ˜¾ç¤ºå•ç¯‡å­—æ•°å’Œé¢„è®¡é˜…è¯»æ—¶é•¿ã€‚</p><h2 id="ç½®é¡¶æ–‡ç« "><a href="#ç½®é¡¶æ–‡ç« " class="headerlink" title="ç½®é¡¶æ–‡ç« "></a>ç½®é¡¶æ–‡ç« </h2><p><strong>å®‰è£…æ’ä»¶</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br></pre></td></tr></table></figure><p><strong>é…ç½®ç½®é¡¶æ ‡å‡†</strong></p><p>æ‰“å¼€ï¼š/themes/*/layoutï¼ˆ/_macroï¼‰/post.ejs ç›´æ¥åœ¨æœ€å‰é¢åŠ å…¥ä»¥ä¸‹ä»£ç å³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (page.top) &#123; %&gt;</span><br><span class="line">  &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-thumb-tack"</span>&gt;&lt;<span class="regexp">/i&gt;</span></span><br><span class="line"><span class="regexp">  &lt;font color=7D26CD&gt;ç½®é¡¶&lt;/</span>font&gt;</span><br><span class="line">  &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"post-meta-divider"</span>&gt;|&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">&lt;% &#125; %&gt;</span></span><br></pre></td></tr></table></figure><p><strong>é…ç½®æ–‡ç« </strong></p><p>ç„¶ååœ¨éœ€è¦ç½®é¡¶çš„æ–‡ç« çš„Front-matterä¸­åŠ ä¸Štopé€‰é¡¹å³å¯ topåé¢çš„æ•°å­—è¶Šå¤§ï¼Œä¼˜å…ˆçº§è¶Šé«˜</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 2019</span><br><span class="line">date: 2019-02-14 16:10:03</span><br><span class="line">top: 5</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="å¢åŠ ä¸è’œå­ç»Ÿè®¡"><a href="#å¢åŠ ä¸è’œå­ç»Ÿè®¡" class="headerlink" title="å¢åŠ ä¸è’œå­ç»Ÿè®¡"></a>å¢åŠ ä¸è’œå­ç»Ÿè®¡</h2><p>åˆ©ç”¨è¿™ä¸ªç»Ÿè®¡ï¼Œå¯ä»¥çŸ¥é“ä½ åšå®¢çš„è®¿é—®é‡ã€‚</p><p><strong>å®‰è£…ä¸è’œå­è„šæœ¬</strong>ï¼š</p><p>åœ¨themes\yilia\layout\ _partial\after-footer.ejsæœ€åæ·»åŠ ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="keyword">async</span> src=<span class="string">"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å•ç¯‡æ–‡ç« ç‚¹å‡»é‡ï¼š"><a href="#å•ç¯‡æ–‡ç« ç‚¹å‡»é‡ï¼š" class="headerlink" title="å•ç¯‡æ–‡ç« ç‚¹å‡»é‡ï¼š"></a>å•ç¯‡æ–‡ç« ç‚¹å‡»é‡ï¼š</h3><p>åœ¨themes/yilia/layout/_partial/article.ejsä¸­ åœ¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- partial(&#39;post&#x2F;title&#39;, &#123;class_name: &#39;article-title&#39;&#125;) %&gt;</span><br></pre></td></tr></table></figure><p>åé¢æ’å…¥å¦‚ä¸‹ä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--æ˜¾ç¤ºé˜…è¯»æ¬¡æ•°--&gt;</span><br><span class="line">&lt;% <span class="keyword">if</span> (!index &amp;&amp; post.comments)&#123; %&gt;</span><br><span class="line">  &lt;br/&gt;</span><br><span class="line">  &lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">"cloud-tie-join-count"</span> href=<span class="string">"javascript:void(0);"</span> style=<span class="string">"color:gray;font-size:14px;"</span>&gt;</span><br><span class="line">  &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"icon-sort"</span>&gt;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">  &lt;span id="busuanzi_container_page_pv" style="color:#ef7522;font-size:14px;"&gt;</span></span><br><span class="line"><span class="regexp">            é˜…è¯»æ•°: &lt;span id="busuanzi_value_page_pv"&gt;&lt;/</span>span&gt;æ¬¡ &amp;nbsp;&amp;nbsp;</span><br><span class="line">  &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>a&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line">&lt;!--æ˜¾ç¤ºé˜…è¯»æ¬¡æ•°å®Œæ¯•--&gt;</span><br></pre></td></tr></table></figure><h2 id="å¢åŠ ç‰ˆæƒå£°æ˜"><a href="#å¢åŠ ç‰ˆæƒå£°æ˜" class="headerlink" title="å¢åŠ ç‰ˆæƒå£°æ˜"></a>å¢åŠ ç‰ˆæƒå£°æ˜</h2><p><strong>é…ç½®yilia</strong>ï¼š</p><p>åœ¨themes/yilia/layout/_partial/article.ejsä¸­ï¼Œæ ‡æ³¨çš„ä½ç½®æ·»åŠ ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"article-entry"</span> itemprop=<span class="string">"articleBody"</span>&gt;</span><br><span class="line">  &lt;% <span class="keyword">if</span> (post.excerpt &amp;&amp; index)&#123; %&gt;</span><br><span class="line">    &lt;%- post.excerpt %&gt;</span><br><span class="line">    &lt;% <span class="keyword">if</span> (theme.excerpt_link) &#123; %&gt;</span><br><span class="line">      &lt;a <span class="class"><span class="keyword">class</span></span>=<span class="string">"article-more-a"</span> href=<span class="string">"&lt;%- url_for(post.path) %&gt;#more"</span>&gt;&lt;%= theme.excerpt_link %&gt; &gt;&gt;&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">    &lt;% &#125; %&gt;</span></span><br><span class="line"><span class="regexp">  &lt;% &#125; else &#123; %&gt;</span></span><br><span class="line"><span class="regexp">    &lt;%- post.content %&gt;</span></span><br><span class="line"><span class="regexp">  &lt;% &#125; %&gt;</span></span><br><span class="line"><span class="regexp">  &lt;-- åœ¨æ­¤å¤„æ·»åŠ ä»£ç --&gt; &lt;-- åœ¨æ­¤å¤„æ·»åŠ ä»£ç --&gt; &lt;-- åœ¨æ­¤å¤„æ·»åŠ ä»£ç --&gt; &lt;-- åœ¨æ­¤å¤„æ·»åŠ ä»£ç --&gt;</span></span><br><span class="line"><span class="regexp">  &lt;% if ((theme.reward_type === 2 || (theme.reward_type === 1 &amp;&amp; post.reward)) &amp;&amp; !index)&#123; %&gt;</span></span><br><span class="line"><span class="regexp">  &lt;div class="page-reward"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;a href="javascript:;" class="page-reward-btn tooltip-top"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div class="tooltip tooltip-east"&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨ç›®å½•ï¼šthemes/yilia/source-src/cssä¸­åˆ›å»ºæ–°æ–‡ä»¶ï¼šdeclare.scssï¼Œå¹¶æ·»åŠ å¦‚ä¸‹CSSä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.declare &#123;</span><br><span class="line">    background-color: #eaeaea;</span><br><span class="line">    margin-top: <span class="number">2</span>em;</span><br><span class="line">    border-left: 3px solid #ff1700;</span><br><span class="line">    padding: <span class="number">.5</span>em <span class="number">1</span>em;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œä¸ºthemes/yilia/source-src/css/main.scssï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">"./declare"</span>;</span><br></pre></td></tr></table></figure><p><strong>é…ç½®æ˜¾ç¤º</strong>ï¼š</p><p>ç°åœ¨è¯¥è®©å…¶æ˜¾ç¤ºå‡ºæ¥ï¼Œåœ¨themes/yilia/_config.ymlï¼Œä¸­åŠ å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#ç‰ˆæƒåŸºç¡€è®¾å®šï¼š0-å…³é—­å£°æ˜ï¼› 1-æ–‡ç« å¯¹åº”çš„mdæ–‡ä»¶é‡Œæœ‰declare: trueå±æ€§ï¼Œæ‰æœ‰ç‰ˆæƒå£°æ˜ï¼› 2-æ‰€æœ‰æ–‡ç« å‡æœ‰ç‰ˆæƒå£°æ˜</span><br><span class="line">#å½“å‰åº”ç”¨çš„ç‰ˆæƒåè®®åœ°å€ã€‚</span><br><span class="line">#ç‰ˆæƒåè®®çš„åç§°</span><br><span class="line">#ç‰ˆæƒåè®®çš„Logo</span><br><span class="line"></span><br><span class="line">declare_type: 1</span><br><span class="line">licensee_url: https:&#x2F;&#x2F;creativecommons.org&#x2F;licenses&#x2F;by-nc-sa&#x2F;4.0&#x2F;</span><br><span class="line">licensee_name: &#39;çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®&#39;</span><br><span class="line">licensee_img: https:&#x2F;&#x2F;i.creativecommons.org&#x2F;l&#x2F;by-nc-sa&#x2F;4.0&#x2F;88x31.png</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨éœ€è¦è¿›è¡Œç‰ˆæƒå£°æ˜çš„æ–‡ç« çš„mdæ–‡ä»¶å¤´éƒ¨ï¼Œè®¾ç½®å±æ€§</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare:true</span><br></pre></td></tr></table></figure><p>å³å¯ã€‚</p><h2 id="åœ¨ä¸»é¡µæ—¶æ–‡ç« æ˜¾ç¤ºæ‘˜è¦"><a href="#åœ¨ä¸»é¡µæ—¶æ–‡ç« æ˜¾ç¤ºæ‘˜è¦" class="headerlink" title="åœ¨ä¸»é¡µæ—¶æ–‡ç« æ˜¾ç¤ºæ‘˜è¦"></a>åœ¨ä¸»é¡µæ—¶æ–‡ç« æ˜¾ç¤ºæ‘˜è¦</h2><p>åœ¨ä½  MD æ ¼å¼æ–‡ç« æ­£æ–‡æ’å…¥ <code>&lt;!-- more --&gt;</code> å³å¯ï¼Œåªä¼šæ˜¾ç¤ºå®ƒä¹‹å‰çš„ï¼Œæ­¤åçš„å°±ä¸æ˜¾ç¤ºï¼Œç‚¹å‡»æ–‡ç« æ ‡é¢˜ï¼Œï¼Œæˆ–è€…ç‚¹å‡»ä¸‹é¢çš„<img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200302193556416.png" alt="image-20200302193556416">æŒ‰é’®ï¼Œå³å¯è¿›å…¥å…¨æ–‡ã€‚</p><p>å¦‚ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200302180731556.png" alt="image-20200302180731556"></p><h2 id="æ–‡ç« æ˜¾ç¤ºç›®å½•"><a href="#æ–‡ç« æ˜¾ç¤ºç›®å½•" class="headerlink" title="æ–‡ç« æ˜¾ç¤ºç›®å½•"></a>æ–‡ç« æ˜¾ç¤ºç›®å½•</h2><p>å¢åŠ æ–‡ç« ç›®å½• TOC ( table of content )ï¼Œæ–¹ä¾¿é˜…è¯»æ–‡ç« ï¼Œåœ¨ <code>themes/yilia/_config.yml</code> ä¸­è¿›è¡Œé…ç½® <code>toc: 2</code> å³å¯ï¼Œå®ƒä¼šå°†ä½  Markdown è¯­æ³•çš„æ ‡é¢˜ï¼Œç”Ÿæˆç›®å½•ï¼Œç›®å½•æŸ¥çœ‹åœ¨å³ä¸‹è§’ã€‚</p><h2 id="å¤´åƒè®¾ç½®"><a href="#å¤´åƒè®¾ç½®" class="headerlink" title="å¤´åƒè®¾ç½®"></a>å¤´åƒè®¾ç½®</h2><p><strong>è®¾ç½®å­˜æ”¾ä½ç½®</strong>ï¼š</p><p>å¤´åƒ/å›¾æ ‡å›¾ç‰‡çš„å­˜æ”¾ä½ç½®æ˜¯<code>/themes/yilia/source/</code>ä¸‹ä»»æ„ä½ç½®ï¼Œå¯ä»¥è‡ªå·±æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å­˜æ”¾ï¼Œæˆ‘å­˜æ”¾åœ¨<code>assets</code>æ–‡ä»¶å¤¹ä¸‹ã€‚ï¼ˆæˆ‘ä¹‹å‰æ”¾åœ¨imgä¸­ï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå®ƒå°±æ˜¾ç¤ºä¸å‡ºæ¥ï¼‰</p><p><strong>é…ç½®ä¿®æ”¹</strong>ï¼š</p><p>é…ç½®æ–‡ä»¶ä¸º<code>/themes/yilia/_config.yml</code>ã€‚è®¾ç½®å¤´åƒä¸ºé…ç½®æ–‡ä»¶ä¸­<code>avatar</code>ä¸€é¡¹ï¼Œè®¾ç½®å›¾æ ‡ä¸ºé…ç½®æ–‡ä»¶ä¸­<code>favicon</code>ä¸€é¡¹ï¼Œè®¾ç½®è·¯å¾„çš„æ ¹ç›®å½•ä¸º<code>/themes/yilia/source/</code>ã€‚ä¾‹å¦‚ï¼Œæˆ‘çš„å¤´åƒå­˜æ”¾çš„åœ°å€æ˜¯<code>/themes/yilia/source/assets/me.png</code>ï¼Œè®¾ç½®åˆ™ä¸º<code>avatar: /assets/me.png</code>ã€‚ï¼ˆå›¾æ ‡åŒç†ï¼‰</p><h2 id="æäº¤ç½‘é¡µ"><a href="#æäº¤ç½‘é¡µ" class="headerlink" title="æäº¤ç½‘é¡µ"></a>æäº¤ç½‘é¡µ</h2><h3 id="sitemapæ–¹å¼æäº¤ç½‘é¡µ"><a href="#sitemapæ–¹å¼æäº¤ç½‘é¡µ" class="headerlink" title="sitemapæ–¹å¼æäº¤ç½‘é¡µ"></a>sitemapæ–¹å¼æäº¤ç½‘é¡µ</h3><p>åœ¨ Hexo æ ¹ç›®å½•æ‰“å¼€å‘½ä»¤è¡Œå·¥å…·ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line">hexo clean</span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;your_hexo_path&#125;&#x2F;public</span><br></pre></td></tr></table></figure><p>æ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sitemap.xml</span><br></pre></td></tr></table></figure><p>sitemap çš„åˆè¡·æ˜¯ç»™æœç´¢å¼•æ“çœ‹çš„ï¼Œä¸ºäº†æé«˜æœç´¢å¼•æ“å¯¹è‡ªå·±ç«™ç‚¹çš„æ”¶å½•æ•ˆæœï¼Œæˆ‘ä»¬æœ€å¥½æ‰‹åŠ¨åˆ° google å’Œç™¾åº¦ç­‰æœç´¢å¼•æ“æäº¤ sitemap.xmlã€‚</p><p>baiduæäº¤ç½‘å€ï¼š<a href="https://ziyuan.baidu.com/?castk=LTE%3D" target="_blank" rel="noopener">https://ziyuan.baidu.com/?castk=LTE%3D</a></p><h3 id="ç™¾åº¦è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤ç½‘é¡µ"><a href="#ç™¾åº¦è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤ç½‘é¡µ" class="headerlink" title="ç™¾åº¦è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤ç½‘é¡µ"></a>ç™¾åº¦è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤ç½‘é¡µ</h3><p>åœ¨æœ¬æœº</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;åšå®¢æ ¹ç›®å½•&gt;&#x2F;themes&#x2F;yilia&#x2F;layout&#x2F;_partial</span><br></pre></td></tr></table></figure><p>ç›®å½•ä¸‹æ‰“å¼€article.ejsæ–‡ä»¶ï¼Œå®šä½åˆ°å¦‚ä¸‹è¿™æ®µä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">        var sUrl &#x3D; url.replace(&#x2F;index\.html$&#x2F;, &#39;&#39;);</span><br><span class="line">        sUrl &#x3D; &#x2F;^(http:|https:)\&#x2F;\&#x2F;&#x2F;.test(sUrl) ? sUrl : &#39;https:&#39; + sUrl;</span><br><span class="line">      %&gt;</span><br></pre></td></tr></table></figure><p>åœ¨å®ƒå‰é¢åŠ ä¸Šï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!- ç™¾åº¦è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤ --&gt;</span><br><span class="line">&lt;% if (1)&#123; %&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  (function()&#123;</span><br><span class="line">      var bp &#x3D; document.createElement(&#39;script&#39;);</span><br><span class="line">      var curProtocol &#x3D; window.location.protocol.split(&#39;:&#39;)[0];</span><br><span class="line">      if (curProtocol &#x3D;&#x3D;&#x3D; &#39;https&#39;) &#123;</span><br><span class="line">          bp.src &#x3D; &#39;https:&#x2F;&#x2F;zz.bdstatic.com&#x2F;linksubmit&#x2F;push.js&#39;;</span><br><span class="line">      &#125;</span><br><span class="line">      else &#123;</span><br><span class="line">          bp.src &#x3D; &#39;http:&#x2F;&#x2F;push.zhanzhang.baidu.com&#x2F;push.js&#39;;</span><br><span class="line">      &#125;</span><br><span class="line">      var s &#x3D; document.getElementsByTagName(&quot;script&quot;)[0];</span><br><span class="line">      s.parentNode.insertBefore(bp, s);</span><br><span class="line">  &#125;)();</span><br><span class="line">  &lt;&#x2F;script&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line">&lt;!- ç™¾åº¦è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤ç»“æŸ --&gt;</span><br></pre></td></tr></table></figure><p>å³å®Œæˆäº†æ–°å¢åšå®¢æ–‡ç« é¡µé¢ï¼ˆä¸åŒ…æ‹¬å…¶ä»–é¡µé¢ï¼‰çš„è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤ã€‚</p><h2 id="é“¾æ¥æäº¤"><a href="#é“¾æ¥æäº¤" class="headerlink" title="é“¾æ¥æäº¤"></a>é“¾æ¥æäº¤</h2><p>ç™¾åº¦ç«™é•¿å¹³å°çš„é“¾æ¥æäº¤æ–¹å¼åˆ†ä¸ºè‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æäº¤ä¸¤ç§ï¼Œæ­¤å¤„åªè®²è‡ªåŠ¨æäº¤ï¼Œæ‰‹åŠ¨æäº¤æŒ‰ç…§è¦æ±‚æ“ä½œå³å¯ã€‚</p><h3 id="ä¸»åŠ¨æ¨é€"><a href="#ä¸»åŠ¨æ¨é€" class="headerlink" title="ä¸»åŠ¨æ¨é€"></a>ä¸»åŠ¨æ¨é€</h3><h4 id="è®¾ç½®"><a href="#è®¾ç½®" class="headerlink" title="è®¾ç½®"></a>è®¾ç½®</h4><p>ä¸»åŠ¨æ¨é€æœ€ä¸ºå¿«é€Ÿçš„æäº¤æ–¹å¼ï¼Œæ˜¯è¢«ç™¾åº¦æ”¶å½•æœ€å¿«çš„æ¨é€æ–¹å¼ã€‚ä¸»åŠ¨æ¨é€å¯ä»¥é€šè¿‡å®‰è£…æ’ä»¶å®ç°ï¼š</p><p><strong>é¦–å…ˆå®‰è£…æ’ä»¶ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-baidu-url-submit --save</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ç«™ç‚¹æ ¹ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶_config.ymlï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">baidu_url_submit:</span><br><span class="line">  count: 20 ## æäº¤æœ€æ–°çš„20ä¸ªé“¾æ¥</span><br><span class="line">  host: www.dongshuyan.com ## ç™¾åº¦ç«™é•¿å¹³å°ä¸­æ³¨å†Œçš„åŸŸå</span><br><span class="line">  token:  ## 16ä½å‡†å…¥ç§˜é’¥</span><br><span class="line">  path: baidu_urls.txt ## æ–‡æœ¬æ–‡æ¡£çš„åœ°å€ï¼Œ æ–°é“¾æ¥ä¼šä¿å­˜åœ¨æ­¤æ–‡æœ¬æ–‡æ¡£é‡Œ</span><br></pre></td></tr></table></figure><p><strong>å‡†å…¥ç§˜é’¥è·å–</strong>:</p><p>åœ¨å¦‚ä¸‹å›¾çš„ç½‘å€ä¸­ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/e8d810a8-af7b-40ce-8a7d-1db0e61a8a14-3316715.jpg" alt="img"></p><p>ä¸‹æ‹‰ï¼Œæ‰¾åˆ°è¿™é‡Œï¼š<br><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/a94c8872-d402-4ce3-afc2-ea2705e95aeb-3316715.jpg" alt="img"><br>ç‚¹å‡»è¿›å»å°±æ˜¯å‡†å…¥ç§˜é’¥ã€‚</p><p><strong>æ£€æŸ¥</strong>:</p><p>å…¶æ¬¡ï¼Œè®°å¾—æŸ¥çœ‹æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ä¸­urlçš„å€¼ï¼Œ å¿…é¡»åŒ…å«æ˜¯ç™¾åº¦ç«™é•¿å¹³å°æ³¨å†Œçš„åŸŸåï¼Œ æ¯”å¦‚:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># URL</span><br><span class="line">## If your site is put in a subdirectory, set url as &#39;http:&#x2F;&#x2F;yoursite.com&#x2F;child&#39; and root as &#39;&#x2F;child&#x2F;&#39;</span><br><span class="line">url: http:&#x2F;&#x2F;dongshuyan.com</span><br><span class="line">root: &#x2F;</span><br><span class="line">permalink: :year&#x2F;:month&#x2F;:day&#x2F;:title&#x2F;</span><br><span class="line">permalink_defaults:</span><br></pre></td></tr></table></figure><p><strong>æœ€åï¼ŒåŠ å…¥æ–°çš„deployer</strong></p><p>æœ€åï¼ŒåŠ å…¥æ–°çš„deployer:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">- type: git ## è¿™æ˜¯æˆ‘åŸæ¥çš„deployer</span><br><span class="line">  repo:</span><br><span class="line">  branch:</span><br><span class="line">- type: baidu_url_submitter ## æ·»åŠ è¿™é‡Œå†…å®¹å³å¯</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„â€-â€œ,å¿…ä¸å¯å°‘ï¼ å¦åˆ™æŠ¥é”™ã€‚</p><h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><p>å…¶ä¸»åŠ¨æ¨é€çš„å®ç°åŸç†å¦‚ä¸‹ï¼š<br>æ–°é“¾æ¥çš„äº§ç”Ÿï¼Œ hexo generate ä¼šäº§ç”Ÿä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«æœ€æ–°çš„é“¾æ¥<br>æ–°é“¾æ¥çš„æäº¤ï¼Œ hexo deploy ä¼šä»ä¸Šè¿°æ–‡ä»¶ä¸­è¯»å–é“¾æ¥ï¼Œæäº¤è‡³ç™¾åº¦æœç´¢å¼•æ“</p><h3 id="è‡ªåŠ¨æ¨é€"><a href="#è‡ªåŠ¨æ¨é€" class="headerlink" title="è‡ªåŠ¨æ¨é€"></a>è‡ªåŠ¨æ¨é€</h3><p>è£…è‡ªåŠ¨æ¨é€JSä»£ç çš„ç½‘é¡µï¼Œåœ¨é¡µé¢è¢«è®¿é—®æ—¶ï¼Œé¡µé¢URLå°†ç«‹å³è¢«æ¨é€ç»™ç™¾åº¦ã€‚</p><p>ä¿®æ”¹ä¸»é¢˜ç›®å½•ä¸‹çš„layout/post.ejsæ–‡ä»¶ï¼Œæœ«å°¾æ·»åŠ è‡ªåŠ¨æ¨é€ä»£ç ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">(function()&#123;</span><br><span class="line">    var bp &#x3D; document.createElement(&#39;script&#39;);</span><br><span class="line">    var curProtocol &#x3D; window.location.protocol.split(&#39;:&#39;)[0];</span><br><span class="line">    if (curProtocol &#x3D;&#x3D;&#x3D; &#39;https&#39;) &#123;</span><br><span class="line">        bp.src &#x3D; &#39;https:&#x2F;&#x2F;zz.bdstatic.com&#x2F;linksubmit&#x2F;push.js&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">        bp.src &#x3D; &#39;http:&#x2F;&#x2F;push.zhanzhang.baidu.com&#x2F;push.js&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">    var s &#x3D; document.getElementsByTagName(&quot;script&quot;)[0];</span><br><span class="line">    s.parentNode.insertBefore(bp, s);</span><br><span class="line">&#125;)();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><p>å‡ºå¤„ï¼š(<a href="http://dongshuyan.com/2019/05/24/hexoåšå®¢æ³¨æ„äº‹é¡¹/#14-Hexoæ·»åŠ ç™¾åº¦ç»Ÿè®¡" target="_blank" rel="noopener">http://dongshuyan.com/2019/05/24/hexoåšå®¢æ³¨æ„äº‹é¡¹/#14-Hexoæ·»åŠ ç™¾åº¦ç»Ÿè®¡</a>)</p><h2 id="æ·»åŠ ç™¾åº¦ç»Ÿè®¡å’Œè°·æ­Œç»Ÿè®¡ä»£ç "><a href="#æ·»åŠ ç™¾åº¦ç»Ÿè®¡å’Œè°·æ­Œç»Ÿè®¡ä»£ç " class="headerlink" title="æ·»åŠ ç™¾åº¦ç»Ÿè®¡å’Œè°·æ­Œç»Ÿè®¡ä»£ç "></a>æ·»åŠ ç™¾åº¦ç»Ÿè®¡å’Œè°·æ­Œç»Ÿè®¡ä»£ç </h2><h3 id="ç™¾åº¦ç»Ÿè®¡"><a href="#ç™¾åº¦ç»Ÿè®¡" class="headerlink" title="ç™¾åº¦ç»Ÿè®¡"></a>ç™¾åº¦ç»Ÿè®¡</h3><p>é¦–å…ˆæ‰“å¼€<a href="https://ziyuan.baidu.com/site/index" target="_blank" rel="noopener">ç™¾åº¦ç«™é•¿å¹³å°</a>ï¼Œæ³¨å†Œè´¦æˆ·ã€‚</p><p>ç„¶åç™»é™† ç™¾åº¦ç»Ÿè®¡ã€‹ç®¡ç†ã€‹æ–°å¢ç«™ç‚¹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://gitee.com/longlongqin/hexo_blog_map_bed/raw/master/img/image-20200303193303556.png" alt="image-20200303193303556"></p><p>ç„¶åå¤åˆ¶ç”Ÿæˆçš„ä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> _hmt = _hmt || [];</span></span><br><span class="line"><span class="actionscript">(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> hm = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span></span><br><span class="line"><span class="actionscript">  hm.src = <span class="string">"https://hm.baidu.com/hm.js?è¿™é‡Œæ˜¯ä½ çš„ä¸“å±å­—ç¬¦ä¸²"</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> s = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"script"</span>)[<span class="number">0</span>]; </span></span><br><span class="line">  s.parentNode.insertBefore(hm, s);</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ®µä»£ç ï¼Œæœ€é‡è¦çš„å°±æ˜¯ä½ é‚£æ®µä¸“å±çš„å­—ç¬¦ä¸²ã€‚</p><p><strong>å¼€å§‹é…ç½®ï¼š</strong></p><p>é¦–å…ˆï¼Œæ‰“å¼€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">themes&#x2F;yilia&#x2F;_config.yml</span><br></pre></td></tr></table></figure><p>é‡Œé¢</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_analytics:</span> <span class="string">''</span></span><br></pre></td></tr></table></figure><p>æ”¹ä¸º</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_analytics:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œæ‰“å¼€ï¼š</p><figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">themes/yilia/layout/_partial/baidu-analytics.ejs</span><br></pre></td></tr></table></figure><p>ä½ ä¼šçœ‹åˆ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.baidu_analytics)&#123; %&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var _hmt &#x3D; _hmt || [];</span><br><span class="line">(function() &#123;</span><br><span class="line">var hm &#x3D; document.createElement(&quot;script&quot;);</span><br><span class="line">hm.src &#x3D; &quot;https:&#x2F;&#x2F;hm.baidu.com&#x2F;hm.js?&lt;%&#x3D; theme.baidu_analytics %&gt;&quot;;</span><br><span class="line">var s &#x3D; document.getElementsByTagName(&quot;script&quot;)[0]; </span><br><span class="line">s.parentNode.insertBefore(hm, s);</span><br><span class="line">&#125;)();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œï¼Œæˆ‘ä»¬ç›´æ¥ç”¨ä½ çš„<code>ä¸“å±å­—ç¬¦ä¸²</code>å»æ›¿æ¢<code>&lt;%= theme.baidu_analytics %&gt;</code>å°±è¡Œäº†ã€‚æ›¿æ¢åä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.baidu_analytics)&#123; %&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var _hmt &#x3D; _hmt || [];</span><br><span class="line">(function() &#123;</span><br><span class="line">var hm &#x3D; document.createElement(&quot;script&quot;);</span><br><span class="line">hm.src &#x3D; &quot;https:&#x2F;&#x2F;hm.baidu.com&#x2F;hm.js?ä½ çš„ä¸“å±å­—ç¬¦ä¸²&quot;;</span><br><span class="line">var s &#x3D; document.getElementsByTagName(&quot;script&quot;)[0]; </span><br><span class="line">s.parentNode.insertBefore(hm, s);</span><br><span class="line">&#125;)();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><h3 id="è°·æ­Œç»Ÿè®¡"><a href="#è°·æ­Œç»Ÿè®¡" class="headerlink" title="è°·æ­Œç»Ÿè®¡"></a>è°·æ­Œç»Ÿè®¡</h3><p>å‚è€ƒï¼š<a href="http://yansheng836.coding.me/article/eda67a25.html" target="_blank" rel="noopener">http://yansheng836.coding.me/article/eda67a25.html</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Yiliaä¸»é¢˜é…ç½®&lt;/p&gt;
    
    </summary>
    
    
      <category term="åšå®¢æ­å»º" scheme="https://www.longlongqin.top/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="Yiliaä¸»é¢˜é…ç½®" scheme="https://www.longlongqin.top/tags/Yilia%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"/>
    
  </entry>
  
</feed>
