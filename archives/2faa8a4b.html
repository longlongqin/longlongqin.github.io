<!DOCTYPE html><html><head hexo-theme="https://volantis.js.org/#2.1.4"><meta charset="utf-8"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><title>C&amp;C++/LearnCpp-chapter6 - é¾™é¾™â€˜S BLOG</title><meta name="keywords" content="C/C++"><meta name="description" content="LearnCpp chapter6https://www.learncpp.com"><link rel="alternate" href="/atom.xml" title="é¾™é¾™â€˜S BLOG"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css"><link rel="shortcut icon" type="image/x-icon" href="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.1.4.3/css/style.css"><script>function setLoadingBarProgress(e){document.getElementById("loading-bar").style.width=e+"%"}</script></head><body><script type="text/javascript" src="/js/love.js"></script><script type="text/javascript" src="/js/ergao.js"></script><div id="loading-bar-wrapper"><div id="loading-bar"></div></div><header class="l_header shadow blur"><div class="wrapper"><div class="nav-sub container--flex"><a class="logo flat-box"></a><ul class="switcher h-list"><li><a class="s-comment flat-btn fas fa-comments fa-fw" target="_self" href="javascript:void(0)"></a></li><li><a class="s-toc flat-btn fas fa-list fa-fw" target="_self" href="javascript:void(0)"></a></li></ul></div><div class="nav-main container container--flex"><a class="logo flat-box" target="_self" href="/"><i class="fas fa-home"></i> é¾™é¾™</a><div class="menu navigation"><ul class="h-list"><li><a class="flat-box" href="/archives/" id="archives"><i class="fas fa-list-alt fa-fw fa-fw"></i> ç´¢å¼•</a><ul class="submenu"><li><a class="flat-box" href="/categories/" id="categories"><i class="fas fa-folder-open fa-fw fa-fw"></i> åˆ†ç±»</a><ul class="submenu"><li><a class="flat-box" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" id="categoriesE5ADA6E4B9A0E7AC94E8AEB0"><i class="fas fa-fire fa-fw"></i> å­¦ä¹ ç¬”è®°</a></li><li><a class="flat-box" href="/categories/%E5%AE%9E%E7%94%A8%E6%8A%80%E5%B7%A7/" id="categoriesE5AE9EE794A8E68A80E5B7A7"><i class="fas fa-fire fa-fw"></i> å®ç”¨æŠ€å·§</a></li></ul></li><li><a class="flat-box" href="/tags/" id="tags"><i class="fas fa-tags fa-fw fa-fw"></i> æ ‡ç­¾</a></li><li><a class="flat-box" href="/archives/" id="archives"><i class="fas fa-list fa-fw fa-fw"></i> æ—¶é—´è½´</a></li></ul></li><li><a class="flat-box" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" id="E5ADA6E4B9A0E7AC94E8AEB0"><i class="fas fa-book fa-fw"></i> å­¦ä¹ ç¬”è®°</a></li><li><a class="flat-box"><i class="fas fa-wrench fa-fw"></i> å·¥å…·</a><ul class="submenu"><li><a class="flat-box" href="https://www.thinkcmf.com/font/search/index.html" target="_blank" rel="noopener" id="https:www.thinkcmf.comfontsearchindex.html"><i class="fas fa-font fa-fw"></i> Font Awesomeå›¾æ ‡</a></li><li><a class="flat-box" href="https://www.sojson.com/image/change.html" target="_blank" rel="noopener" id="https:www.sojson.comimagechange.html"><i class="fa fa-crop fa-fw"></i> åœ¨çº¿å›¾ç‰‡å°ºå¯¸ä¿®æ”¹</a></li><li><a class="flat-box" href="http://dir.scmor.com/" target="_blank" rel="noopener" id="http:dir.scmor.com"><i class="fa fa-search fa-fw"></i> Googleå­¦æœ¯&æœç´¢é•œåƒ</a></li><li><a class="flat-box" href="https://emojixd.com/" target="_blank" rel="noopener" id="https:emojixd.com"><i class="fa fa-smile-o fa-fw"></i> Emojiè¡¨æƒ…ç¬¦å·è¾å…¸ğŸ““</a></li></ul></li><li><a class="flat-box" href="/about/" id="about"><i class="fas fa-info-circle fa-fw fa-fw"></i> å…³äº</a><ul class="submenu"><li><a class="flat-box" href="/about/" id="about"><i class="fas fa-user-circle fa-fw fa-fw"></i> å…³äºæˆ‘</a></li><hr><li><a class="flat-box" href="/friends/" id="friends"><i class="fas fa-link fa-fw"></i> å‹äººå¸</a></li><li><a class="flat-box" href="/comment/" id="comment"><i class="fas fa-comment fa-fw"></i> ç•™è¨€æ¿</a></li><hr><li><a class="flat-box" href="https://github.com/longlongqin" target="_blank" rel="noopener" id="https:github.comlonglongqin"><i class="fab fa-github fa-fw fa-fw"></i> æˆ‘çš„Github</a></li><li><a class="flat-box" href="https://longlongqin.gitee.io" target="_blank" rel="noopener" id="https:longlongqin.gitee.io"><i class="fa fa-chevron-circle-right fa-fw"></i> materyä¸»é¢˜åšå®¢</a></li></ul></li><li><a class="flat-box" href="https://volantis.js.org/tag-plugins/" target="_blank" rel="noopener" id="https:volantis.js.orgtag-plugins"><i class="fa fa-bookmark fa-fw"></i> Volantisä¸»é¢˜æ–‡æ¡£</a></li><li><a class="flat-box" href="/easysearch/" id="easysearch"><i class="fa fa-search fa-fw"></i> easyæœç´¢</a></li></ul></div><div class="m_search"><form name="searchform" class="form u-search-form"><i class="icon fas fa-search fa-fw"></i> <input type="text" class="input u-search-input" placeholder="search for everything"></form></div><ul class="switcher h-list"><li><a class="s-search flat-btn fas fa-search fa-fw" target="_self" href="javascript:void(0)"></a></li><li><a class="s-menu flat-btn fas fa-bars fa-fw" target="_self" href="javascript:void(0)"></a></li></ul></div></div></header><ul class="menu-phone navigation white-box"><li><a class="flat-box" href="/archives/" id="archives"><i class="fas fa-list-alt fa-fw fa-fw"></i> ç´¢å¼•</a></li><li><a class="flat-box" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" id="E5ADA6E4B9A0E7AC94E8AEB0"><i class="fas fa-book fa-fw"></i> å­¦ä¹ ç¬”è®°</a></li><li><a class="flat-box" href="/about/" id="about"><i class="fas fa-info-circle fa-fw fa-fw"></i> å…³äº</a></li></ul><script>setLoadingBarProgress(40)</script><div class="l_body nocover"><div class="body-wrapper"><div class="l_main"><article id="post" class="post white-box shadow article-type-post" itemscope itemprop="blogPost"><section class="meta"><div class="meta" id="header-meta"><h1 class="title"><a href="/archives/2faa8a4b.html">C&C++/LearnCpp-chapter6</a></h1><div class="new-meta-box"><div class="new-meta-item author"><a href="https://www.longlongqin.top" rel="nofollow"><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/photo.jpg"><p>longlongqin</p></a></div><div class="new-meta-item category"><a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C-C/" rel="nofollow"><i class="fas fa-folder-open" aria-hidden="true"></i><p>å­¦ä¹ ç¬”è®°&nbsp;/&nbsp;C/C++</p></a></div><div class="new-meta-item date"><a class="notlink"><i class="fas fa-edit" aria-hidden="true"></i><p>å‘å¸ƒäºï¼š2020å¹´4æœˆ6æ—¥</p></a></div><div class="new-meta-item wordcount"><a class="notlink"><i class="fas fa-keyboard" aria-hidden="true"></i><p>å­—æ•°ï¼š15.5kå­—</p></a></div><div class="new-meta-item readtime"><a class="notlink"><i class="fas fa-hourglass-half" aria-hidden="true"></i><p>æ—¶é•¿ï¼š63åˆ†é’Ÿ</p></a></div></div><hr></div></section><section class="article typo"><div class="article-entry" itemprop="articleBody"><center><p center large><red>LearnCpp chapter6</red></p></center><center><red>https://www.learncpp.com</red></center><a id="more"></a><h2 id="6-2-ç”¨æˆ·è‡ªå®šä¹‰namespace"><a href="#6-2-ç”¨æˆ·è‡ªå®šä¹‰namespace" class="headerlink" title="6.2 ç”¨æˆ·è‡ªå®šä¹‰namespace"></a>6.2 ç”¨æˆ·è‡ªå®šä¹‰namespace</h2><p>åœ¨<a href="https://www.learncpp.com/cpp-tutorial/2-9-naming-collisions-and-an-introduction-to-namespaces/" target="_blank" rel="noopener">2.9 â€“ Naming collisions and an introduction to namespaces</a>ä¸­è®²è§£äº†å‘½åå†²çªå’Œå‘½åç©ºé—´çš„å†…å®¹ã€‚ç°åœ¨å†æ¬¡çœ‹ä¸€ä¸‹<strong>å‘½åå†²çª</strong>ã€‚</p><blockquote><p>ä¸‹é¢çš„<code>foo.cpp</code>å’Œ<code>goo.cpp</code>ä¸¤ä¸ªæºæ–‡ä»¶ï¼Œä¸­çš„å‡½æ•°æœ‰ç€ä¸åŒçš„åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒä»¬çš„åå­—å´æ˜¯ä¸€æ ·çš„ï¼š</p></blockquote><p><code>foo.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//this dosomething() adds the value of its parameters</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dosomething</span><span class="params">(intx, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>goo.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//this dosomething() subtracts the value of its parameters</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">doSomething</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x - y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dosomething</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//forward declaration for dosomething</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; dosometing(<span class="number">4</span>, <span class="number">3</span>) &lt;&lt;<span class="string">'\n'</span>; <span class="comment">//which dosometing will we get?</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå°†<code>foo.cpp</code>å’Œ<code>goo.cpp</code>éƒ½ç¼–è¯‘åœ¨åŒä¸€ä¸ªç¨‹åºä¸­ã€‚å› ä¸ºå®ƒä»¬ä¿©é‡Œé¢ä¸­çš„å‡½æ•°çš„åå­—ã€å‚æ•°éƒ½ä¸€æ ·ï¼Œè€Œä¸”åˆåœ¨åŒä¸€ä¸ªèŒƒå›´ä¸­(global scope)ï¼Œè¿™å°†ä¼šé€ æˆâ€œå‘½åå†²çªâ€ã€‚ç»“æœå°±æ˜¯ï¼Œé“¾æ¥å™¨å·¥ä½œæ—¶ï¼Œå°†ä¼šå‘ç”Ÿé”™è¯¯ï¼š</p><p><code>goo.cpp:3: multiple definition of &quot;doSomething(int, int)&quot;; foo.cpp:3: first defined here</code></p><hr><p>ä¸€ä¸ªè¾ƒå¥½çš„è§£å†³åŠæ³•å°±æ˜¯ï¼Œå°†ä½ çš„å‡½æ•°æ”¾åœ¨ä½ è‡ªå·±å®šä¹‰çš„â€œ<em><em>å‘½åç©ºé—´</em>namespace</em> **â€ä¸­ã€‚</p><hr><ul><li><p><strong>å®šä¹‰è‡ªå·±çš„namespace</strong></p><p>C++å…è®¸æˆ‘ä»¬ä½¿ç”¨å…³é”®å­—<em>namespace</em>æ¥å®šä¹‰è‡ªå·±çš„å‘½åç©ºé—´ã€‚ç”±ç”¨æˆ·è‡ªå®šä¹‰çš„å‘½åç©ºé—´ï¼Œå«ï¼š<strong>user-defined namespaces</strong>ã€‚è€Œ ç”±C++æä¾›çš„å‘½åç©ºé—´ï¼Œå¦‚ <code>global namespace</code>ï¼›æˆ–è€…ç”±åº“æä¾›çš„ï¼Œå¦‚<code>namespace std</code>ï¼›å®ƒä»¬å°±ä¸æ˜¯user-defined namespacesã€‚</p><blockquote><p><strong>å‘½åç©ºé—´çš„æ ‡è¯†ç¬¦</strong>é€šå¸¸ <strong>ä¸å¤§å†™</strong>ã€‚</p></blockquote><p>ä¸‹é¢æ˜¯å¯¹ä¸Šé¢å‘½åå†²çªçš„å‡½æ•°çš„æ”¹å†™ï¼š</p><p><code>foo.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> foo <span class="comment">//å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œåå­—ä¸ºï¼šfoo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//this dosomething() belongs to namespace foo</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dosomething</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x+y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>goo.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> goo  <span class="comment">//å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œåå­—ä¸ºï¼šgoo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//this dosomething() belongs namespace goo</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">dosomething</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x+y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dosomething</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> <span class="comment">//æå‰å¯¹å‡½æ•°dosomething()è¿›è¡Œå£°æ˜</span></span></span><br><span class="line"><span class="function">    </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt;dosomething(<span class="number">4</span>, <span class="number">3</span>)&lt;&lt;<span class="string">'\n'</span>; <span class="comment">//which dosomething will we get?</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨è¿™ä¸ªä¸¤ä¸ª<code>dosomething()</code>å‡½æ•°éƒ½åˆ†åˆ«å±äºä¸åŒçš„å‘½åç©ºé—´äº†ã€‚è®©æˆ‘ä»¬æ¥è¿è¡Œä¸€ä¸‹ã€‚</p><p>ğŸ˜‚ï¼Œæ–°é—®é¢˜åˆå‡ºç°äº†ï¼š</p><blockquote><p><code>ConsoleApplication1.obj : error LNK2019: unresolved external symbol &quot;int __cdecl doSomething(int,int)&quot; (?doSomething@@YAHHH@Z) referenced in function _main</code></p></blockquote><p>åœ¨è¿™ä¸ªæ”¹ç‰ˆä¸­ï¼Œå…¶å®ç¼–è¯‘å™¨æ˜¯æ»¡æ„çš„(å› ä¸ºæˆ‘ä»¬å·²ç»è¿›è¡Œæå‰å£°æ˜)ã€‚ä½†æ˜¯é“¾æ¥å™¨æ‰¾ä¸åˆ°ä¸€ä¸ªåœ¨<em>global namespace</em>ä¸­çš„<code>dosomething</code>çš„å®šä¹‰ã€‚</p><blockquote><p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬è™½ç„¶ä¸ºä¸¤ä¸ª<code>dosomething</code>åˆ†åˆ«å£°æ˜åœ¨ä¸åŒçš„å‘½åç©ºé—´ï¼Œå¯æƒœçš„æ˜¯è¿™ä¸¤ä¸ªå‘½åç©ºé—´éƒ½ä¸å±äº å…¨å±€å‘½åç©ºé—´ ä¸­ã€‚</p></blockquote><hr><p><strong>è¿™é‡Œæœ‰ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š1.ä½¿ç”¨<em>scope resolution operator<em>ï¼›2.é€šè¿‡</em>using statements</em></strong></p><hr></li><li><p>*<em>ä½¿ç”¨èŒƒå›´è§£ææ“ä½œç¬¦(::)è®¿é—®åç§°ç©ºé—´ *</em></p><blockquote><p>ã€<strong>èŒƒå›´è§£ææ“ä½œç¬¦ï¼š<em>scope resolution operator(::)</em></strong>ã€‘</p></blockquote><p>å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç‰¹å®šåç§°ç©ºé—´ä¸­æŸ¥æ‰¾æ ‡è¯†ç¬¦çš„æœ€ä½³æ–¹æ³•æ˜¯ä½¿ç”¨<em>scope resolution operator(::)</em></p><blockquote><p>â€œ::â€ï¼Œå®ƒå‘Šè¯‰ç¼–è¯‘å™¨ï¼šåº”è¯¥åœ¨è¯¥æ“ä½œç¬¦çš„ å·¦æ“ä½œæ•°è¡¨ç¤ºçš„èŒƒå›´ä¸­æŸ¥æ‰¾ æ“ä½œç¬¦å³è¾¹çš„æ“ä½œæ•°(ä¹Ÿå°±æ˜¯è¦æ‰¾çš„æ ‡è¯†ç¬¦)</p></blockquote><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><p><em>å¯¹äºåé¢çš„ç¤ºä¾‹ï¼Œä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œæˆ‘ä»¬å°†æŠŠç¤ºä¾‹å‹ç¼©ä¸ºä¸€ä¸ªæ–‡ä»¶è§£å†³æ–¹æ¡ˆã€‚</em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> foo <span class="comment">// define a namespace named foo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// This doSomething() belongs to namespace foo</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">doSomething</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> goo <span class="comment">// define a namespace named goo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// This doSomething() belongs to namespace goo</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">doSomething</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x - y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; foo::doSomething(<span class="number">4</span>, <span class="number">3</span>) &lt;&lt; <span class="string">'\n'</span>; <span class="comment">// use the doSomething() that exists in namespace foo</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¯ä»¥æ³¨æ„åˆ°mainå‡½æ•°ä¸­çš„è¿™ä¸ªè¯­å¥ï¼š<code>std::cout &lt;&lt; foo::doSomething(4, 3) &lt;&lt; &#39;\n&#39;;</code>ï¼Œå°±æ˜¯ç”¨äº†â€œèŒƒå›´è§£æç¬¦ :: â€ã€‚</p><p>è¯¥æ ‡è¯†ç¬¦çš„å·¦æ“ä½œæ•°ï¼šfooï¼Œè¡¨ç¤ºå‘½åç©ºé—´çš„åå­—ã€‚å³æ“ä½œæ•°è¡¨ç¤ºæ ‡è¯†ç¬¦ã€‚</p><p><strong>æ‰€ä»¥ï¼Œ<code>foo::dosomething(4,3)</code>ï¼Œå°±è¡¨ç¤ºï¼šè°ƒç”¨çš„å‡½æ•°<code>dosomething()</code>æ˜¯æ¥æºäºå‘½åç©ºé—´fooä¸­çš„ã€‚</strong></p></blockquote></li></ul><hr><center><p center large>å°ç»“</p></center><p>è§£å†³å‘½åå†²çªçš„æ­¥éª¤ä¸ºï¼š</p><ol><li>ä¸ºè¿™äº›åŒåçš„å‡½æ•°ï¼Œå‡è®¾ç½®è‡ªå·±çš„å‘½åç©ºé—´ï¼›</li><li>åœ¨ä½¿ç”¨è¿™ä¸ªåŒåå‡½æ•°çš„æ—¶å€™ï¼Œè¿˜éœ€è¦åŠ ä¸Šâ€œèŒƒå›´è§£æç¬¦ :: â€</li></ol><hr><ul><li><p><strong>æ²¡æœ‰å‰ç¼€çš„èŒƒå›´è§£æç¬¦</strong></p><blockquote><p><strong>æ ¼å¼ï¼š<code>:: æ ‡è¯†ç¬¦</code></strong></p><p><strong>æ²¡æœ‰å‰ç¼€çš„èŒƒå›´è§£æç¬¦ï¼Œ<u>å°±ç›¸å½“äºå®ƒçš„èŒƒå›´æ˜¯å…¨å±€å‘½åç©ºé—´</u></strong>ã€‚</p></blockquote><p>ä¾‹å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="comment">//this print lives in the global namespace</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"there"</span>&lt;&lt;<span class="string">'\n'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> foo</span><br><span class="line">&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> <span class="comment">// this print lives in the foo namespace</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	foo::<span class="built_in">print</span>(); <span class="comment">// call foo::print()</span></span><br><span class="line">	::<span class="built_in">print</span>(); <span class="comment">// call print() in global namespace (same as just calling print() in this case)</span></span><br><span class="line"> </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p><strong>å…è®¸å¤šä¸ªå‘½åç©ºé—´å—ï¼šMultiple namespace blocks allowed</strong></p><blockquote><p>åœ¨å¤šä¸ªä½ç½®(è·¨å¤šä¸ªæ–‡ä»¶ï¼Œæˆ–åŒä¸€æ–‡ä»¶ä¸­çš„å¤šä¸ªä½ç½®)å£°æ˜åç§°ç©ºé—´å—æ˜¯åˆæ³•çš„ã€‚<strong><u>å‘½åç©ºé—´å†…çš„æ‰€æœ‰å£°æ˜éƒ½è¢«è®¤ä¸ºæ˜¯å‘½åç©ºé—´çš„ä¸€éƒ¨åˆ†</u>ã€‚</strong></p></blockquote><hr></li></ul><p>ä¾‹å­1ï¼ˆå¤šæ–‡ä»¶ä¸­ï¼‰ï¼š</p><p><code>circle.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> !defined(CIRCLE_H)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CIRCLE_H</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> basicMath</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">inline</span> <span class="keyword">constexpr</span> <span class="keyword">double</span> pi&#123; <span class="number">3.14</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><p><code>growth.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> !defined(GROWTH_H)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GROWTH_H</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> basicMath</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// the constant e is also part of namespace basicMath</span></span><br><span class="line">    <span class="keyword">inline</span> <span class="keyword">constexpr</span> <span class="keyword">double</span> e&#123; <span class="number">2.7</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"circle.h"</span> <span class="comment">// for basicMath::pi</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"growth.h"</span> <span class="comment">// for basicMath::e</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; basicMath::pi &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; basicMath::e &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p>3.14</p><p>2.7</p><blockquote><p>æ ‡å‡†åº“å……å°±åˆ†åˆ©ç”¨äº†è¿™ä¸ªç‰¹æ€§ï¼Œå› ä¸ºæ¯ä¸ªæ ‡å‡†åº“å¤´æ–‡ä»¶éƒ½å°†å…¶å£°æ˜åŒ…å«åœ¨è¯¥å¤´æ–‡ä»¶ä¸­åŒ…å«çš„ å‘½åç©ºé—´std å—ä¸­ã€‚å¦åˆ™ï¼Œæ•´ä¸ªæ ‡å‡†åº“å¿…é¡»åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­å®šä¹‰!</p></blockquote><p><em>ã€noteã€‘ï¼šå°½ç®¡ä½ å¯ä»¥åˆ©ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œå°†ä½ å†™çš„å‡½æ•°æ·»åŠ åˆ°<code>std namespace</code>ä¸­ï¼Œä½†æ˜¯<code>std namespace</code>æœ‰ä¸€ä¸ªè§„åˆ™ï¼Œé‚£å°±æ˜¯ç¦æ­¢ç”¨æˆ·å°†è‡ªå·±çš„å‡½æ•°æ‰©å±•åˆ°å®ƒçš„é‡Œé¢ã€‚</em></p><hr><ul><li><p>ä¾‹å­2</p><p>å¦‚æœä½ å°†ä½ çš„ä»£ç åˆ†ç¦»å†å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œä½ å°±å¿…é¡»åœ¨å¤´æ–‡ä»¶å’ŒåŸæ–‡ä»¶ä¸­ä½¿ç”¨å‘½åç©ºé—´ã€‚</p><p><code>add.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span> !defined(ADD_H)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ADD_H</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> basicMath</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// function add() is part of namespace basicMath</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><p><code>add.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"add.h"</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> basicMath</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// define the function add()</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"add.h"</span> <span class="comment">// for basicMath::add()</span></span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; basicMath::add(<span class="number">4</span>, <span class="number">3</span>) &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ol><li><p>å¦‚æœåœ¨<code>add.cpp</code>ä¸­çœç•¥äº†<em>namespace</em>ï¼Œå°†ä¼šå¯¼è‡´é“¾æ¥å™¨æ‰¾ä¸åˆ°<code>basicMath::add</code>ã€‚</p><p><em>å› ä¸ºè¿™ä¸ªæºæ–‡ä»¶åœ¨ç¼ºå°‘namespaceæ—¶ï¼Œå¯¹addçš„å®šä¹‰æ˜¯åœ¨å…¨å±€å‘½åç©ºé—´ä¸­çš„ã€‚</em></p></li><li><p>å¦‚æœåœ¨<code>add.h</code>ä¸­çœç•¥<em>namespace</em>ï¼Œå°†ä¼šå¯¼è‡´åœ¨â€œmain.cppâ€ä¸­ä¸èƒ½ä½¿ç”¨<code>basicMath::add</code></p><p><em>å› ä¸ºè¿™ä¸ªå¤´æ–‡ä»¶åœ¨ç¼ºå°‘namespaceæ—¶ï¼Œå¯¹addçš„å£°æ˜æ˜¯åœ¨å…¨å±€å‘½åç©ºé—´ä¸­çš„ã€‚</em></p></li></ol></blockquote></li></ul><hr><ul><li><p><strong>åµŒå¥—å‘½åç©ºé—´</strong></p><p>å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> foo</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">namespace</span> goo <span class="comment">// goo is a namespace inside the foo namespace</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> x + y;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; foo::goo::add() &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬è¦è°ƒç”¨å‡½æ•°<code>add</code>çš„æ—¶å€™ï¼Œ<strong>æˆ‘ä»¬ä½¿ç”¨æ ¼å¼ä¸ºï¼š<code>foo::goo::add</code></strong></p></blockquote><hr><p>åœ¨C++17ä¸­ï¼ŒåµŒå¥—çš„å‘½åç©ºé—´ä¹Ÿå¯ä»¥è¿™æ ·å£°æ˜ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> foo::goo <span class="comment">// goo is a namespace inside the foo namespace (C++17 style)</span></span><br><span class="line">&#123;</span><br><span class="line">        <span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> x + y;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; foo::goo::add() &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p><strong>ç»™å‘½åç©ºé—´è®¾ç½®åˆ«åï¼šnamespace aliases</strong></p><p>åœ¨ä½¿ç”¨åµŒå¥—çš„å‘½åç©ºé—´çš„å‡½æ•°æˆ–å˜é‡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å‘½åç©ºé—´å±‚çº§éƒ½å…¨éƒ¨å†™å®Œæ•´ï¼Œè¿™æ ·ä¼šå¾ˆéº»çƒ¦ï¼Œå¦‚æœæˆ‘ä»¬ç»™è¿™ä¸ªåµŒå¥—çš„å‘½åç©ºé—´èµ·ä¸€ä¸ªåˆ«åå°±çœäº‹å¤šäº†ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> foo</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">namespace</span> goo</span><br><span class="line">	&#123;</span><br><span class="line">	        <span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">        	</span>&#123;</span><br><span class="line">	            <span class="keyword">return</span> x + y;</span><br><span class="line">        	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">namespace</span> boo = foo::goo; <span class="comment">// boo now refers to foo::goo</span></span><br><span class="line"> </span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boo::add() &lt;&lt; <span class="string">'\n'</span>; <span class="comment">// This is really foo::goo::add()</span></span><br><span class="line"> </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="comment">// The boo alias ends here</span></span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="6-3-å±€éƒ¨å˜é‡"><a href="#6-3-å±€éƒ¨å˜é‡" class="headerlink" title="6.3 å±€éƒ¨å˜é‡"></a>6.3 å±€éƒ¨å˜é‡</h2><p>åœ¨ <a href="https://www.learncpp.com/cpp-tutorial/introduction-to-local-scope/" target="_blank" rel="noopener">2.4 â€“ Introduction to local scope</a>,ä»‹ç»äº†å±€éƒ¨å˜é‡ï¼Œå®ƒæ˜¯åœ¨å‡½æ•°ä¸­çš„å½¢å‚ã€‚</p><h3 id="å±€éƒ¨å˜é‡çš„å—èŒƒå›´"><a href="#å±€éƒ¨å˜é‡çš„å—èŒƒå›´" class="headerlink" title="å±€éƒ¨å˜é‡çš„å—èŒƒå›´"></a>å±€éƒ¨å˜é‡çš„å—èŒƒå›´</h3><p>æ ‡è¯†ç¬¦çš„èŒƒå›´å†³å®šäº†æ ‡è¯†ç¬¦åœ¨æºç ä¸­å¯è·å¾—çš„åŒºåŸŸã€‚èŒƒå›´æ˜¯ä¸€ä¸ªâ€œç¼–è¯‘æ—¶é—´â€çš„å±æ€§ã€‚</p><blockquote><p>å±€éƒ¨å˜é‡çš„ <strong>å—èŒƒå›´(block scope)</strong>ï¼Œä¸­çš„èŒƒå›´å°±æ˜¯ï¼šä»ä»–ä»¬å®šä¹‰å¼€å§‹ï¼Œåˆ°è¿™ä¸ªå—ç»“æŸ çš„è¿™ä¸ªèŒƒå›´ã€‚</p></blockquote><p>å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> i &#123;<span class="number">5</span>&#125;; <span class="comment">//i enters scope here</span></span><br><span class="line">    <span class="keyword">double</span> d &#123;<span class="number">4.0</span>&#125;; <span class="comment">// d enters scope here</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;<span class="comment">// i and d go out of scope here</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶å‡½æ•°çš„å½¢å‚æ²¡æœ‰è¢«å®šä¹‰åœ¨å‡½æ•°ä½“çš„å†…éƒ¨ï¼Œä½†æ˜¯å¯¹äºå…¸å‹å‡½æ•°è€Œè¨€ï¼Œå½¢å‚å¯ä»¥è¢«çœ‹æˆï¼Œæ˜¯å±äºå‡½æ•°ä½“å—çš„èŒƒå›´å†…ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> <span class="comment">//x and y enter scope here</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å°†xã€yä¸­è¾ƒå¤§è€…åˆ†é…ç»™max</span></span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">max</span>&#123;(x&gt;y) ? x : y&#125;; <span class="comment">//max enters scope here</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>;</span><br><span class="line">&#125;<span class="comment">// x, y and max leave scope here</span></span><br></pre></td></tr></table></figure><hr><h3 id="åŒä¸€èŒƒå›´å†…çš„å˜é‡åä¸ç›¸åŒ"><a href="#åŒä¸€èŒƒå›´å†…çš„å˜é‡åä¸ç›¸åŒ" class="headerlink" title="åŒä¸€èŒƒå›´å†…çš„å˜é‡åä¸ç›¸åŒ"></a>åŒä¸€èŒƒå›´å†…çš„å˜é‡åä¸ç›¸åŒ</h3><p>ä¸‹é¢çš„å‡½æ•°åœ¨ç¼–è¯‘æ—¶ä¼šå‡ºé”™ï¼Œå› ä¸ºè¯¥èŒƒå›´å†…çš„å˜é‡åç›¸åŒäº†ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">someFunction</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x&#123;&#125;; <span class="comment">//ç¼–è¯‘æ—¶ä¼šå‡ºé”™ï¼Œå› ä¸ºè¿™é‡Œçš„xå’Œå½¢å‚xä¹‹é—´å‘½åå†²çªäº†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å±€éƒ¨å˜é‡çš„è‡ªåŠ¨å­˜å‚¨æœŸ"><a href="#å±€éƒ¨å˜é‡çš„è‡ªåŠ¨å­˜å‚¨æœŸ" class="headerlink" title="å±€éƒ¨å˜é‡çš„è‡ªåŠ¨å­˜å‚¨æœŸ"></a>å±€éƒ¨å˜é‡çš„è‡ªåŠ¨å­˜å‚¨æœŸ</h3><blockquote><p>å˜é‡çš„<strong>å­˜å‚¨æœŸ(storage duration),ä¹Ÿå«æŒç»­æ—¶é•¿(duration)</strong>å†³å®šäº†ä»€ä¹ˆæ—¶é—´ä»¥åŠå¦‚ä½•åˆ›é€ å’Œé”€æ¯å®ƒã€‚é€šå¸¸ï¼Œå˜é‡çš„å­˜å‚¨å™¨ç›´æ¥å†³å®šäº†å®ƒçš„<strong>â€œç”Ÿå‘½å‘¨æœŸ(lifetime)â€</strong></p></blockquote><p>ä¾‹å¦‚ï¼Œå±€éƒ¨å˜é‡çš„å­˜å‚¨å™¨ï¼Œæ„å‘³ç€å®ƒåœ¨è¢«å®šä¹‰æ—¶å°±è¢«åˆ›å»ºï¼Œç„¶ååœ¨ä»–è¢«å®šä¹‰çš„èŒƒå›´å—çš„å°¾éƒ¨è¢«é”€æ¯ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i &#123;<span class="number">5</span>&#125;; <span class="comment">//i created and initialized here</span></span><br><span class="line">    <span class="keyword">double</span> d &#123;<span class="number">4.0</span>&#125;; <span class="comment">//d created and initialized here</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="comment">// i and d are destoryed here</span></span><br></pre></td></tr></table></figure><p>ç”±äºè¿™ä¸ªåŸå› ï¼Œå±€éƒ¨å˜é‡ æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºï¼š<strong>è‡ªåŠ¨å˜é‡</strong></p><hr><h3 id="åµŒå¥—å¿«ä¸­çš„å±€éƒ¨å˜é‡"><a href="#åµŒå¥—å¿«ä¸­çš„å±€éƒ¨å˜é‡" class="headerlink" title="åµŒå¥—å¿«ä¸­çš„å±€éƒ¨å˜é‡"></a>åµŒå¥—å¿«ä¸­çš„å±€éƒ¨å˜é‡</h3><p>å±€éƒ¨å˜é‡å¯ä»¥è¢«å®šä¹‰åœ¨åµŒå¥—å—ä¸­ï¼Œè¿™å’Œåœ¨å‡½æ•°ä½“å—ä¸­çš„å±€éƒ¨å˜é‡å·¥ä½œæµç¨‹ç›¸åŒï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> <span class="comment">//å¤–éƒ¨å—</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x&#123;<span class="number">5</span>&#125;; <span class="comment">//x enters scope and is created here</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//åµŒå¥—å—</span></span><br><span class="line">        <span class="keyword">int</span> y &#123;<span class="number">7</span>&#125;; <span class="comment">//y enters scope and is created here</span></span><br><span class="line">    &#125; <span class="comment">// y goes out of scope and is destroyed here</span></span><br><span class="line">    <span class="comment">//æ­¤æ—¶ï¼Œyå°±ä¸èƒ½å†è¢«ç”¨äº†ï¼Œå› ä¸ºå®ƒä¸å±äºç°åœ¨æ‰€åœ¨çš„èŒƒå›´</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="comment">// x goes out of scope and is destoryed here</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š<strong>å˜é‡xçš„èŒƒå›´æ˜¯æ•´ä¸ªmianå‡½æ•°å—ä¸­ï¼Œè‡ªç„¶ï¼Œåœ¨åµŒå¥—å—ä¸­ï¼Œå˜é‡xä¹Ÿæ˜¯æœ‰æ•ˆçš„</strong>ï¼Œå³ä¹Ÿå¯ä»¥è®¿é—®å®ƒã€‚</p></blockquote><hr><h3 id="å±€éƒ¨å˜é‡çš„æ— è¿æ¥"><a href="#å±€éƒ¨å˜é‡çš„æ— è¿æ¥" class="headerlink" title="å±€éƒ¨å˜é‡çš„æ— è¿æ¥"></a>å±€éƒ¨å˜é‡çš„æ— è¿æ¥</h3><p>æ ‡è¯†ç¬¦çš„å¦ä¸€ä¸ªå±æ€§å°±æ˜¯ï¼š<strong>â€œè¿æ¥(linkage)â€</strong>ã€‚ä¸€ä¸ªæ ‡è¯†ç¬¦çš„<em>linkage</em>å†³å®šäº†è¯¥æ ‡è¯†ç¬¦çš„å…¶ä»–å£°æ˜æ˜¯å¦å¼•ç”¨çš„æ˜¯ç›¸åŒçš„å¯¹è±¡ã€‚</p><blockquote><p><strong>å±€éƒ¨å˜é‡æ²¡æœ‰<em>å…³è”æ€§</em>ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹ä¸€ä¸ªæ ‡è¯†ç¬¦çš„æ¯ä¸€ä¸ªå£°æ˜éƒ½ä»£è¡¨ä¸åŒçš„å¯¹è±¡</strong></p></blockquote><p>å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x &#123;<span class="number">2</span>&#125;; <span class="comment">// local variable, no linkage</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x &#123;<span class="number">3</span>&#125;; <span class="comment">//è¿™ä¸ªæ ‡è¯†ç¬¦xä¸ä¸Šé¢çš„æ ‡è¯†ç¬¦xï¼Œè¡¨ç¤ºçš„æ˜¯ä¸åŒå¯¹è±¡(å°½ç®¡ä»–ä»¬åå­—ç›¸åŒ)</span></span><br><span class="line">        <span class="comment">//ä½†æ˜¯ç°åœ¨åµŒå¥—å¤–éƒ¨çš„å˜é‡xè¢«éšè—èµ·æ¥äº†(åœ¨6.5èŠ‚ä¼šè®²åˆ°å˜é‡éšè—)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å˜é‡å®šä¹‰çš„èŒƒå›´"><a href="#å˜é‡å®šä¹‰çš„èŒƒå›´" class="headerlink" title="å˜é‡å®šä¹‰çš„èŒƒå›´"></a>å˜é‡å®šä¹‰çš„èŒƒå›´</h3><p>å¦‚æœä¸€ä¸ªå˜é‡ä»…åœ¨åµŒå¥—å—ä¸­ä½¿ç”¨ï¼Œé‚£å®ƒå°±åº”è¯¥æ—¨åœ¨åµŒå¥—å—ä¸­è¢«å®šä¹‰ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//don't define y here</span></span><br><span class="line">    </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//yåªåœ¨è¿™ä¸ªå—ä¸­è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå®šä¹‰å®ƒ</span></span><br><span class="line">        <span class="keyword">int</span> y&#123;<span class="number">5</span>&#125;;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt;y&lt;&lt;<span class="string">'\n'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°½é‡æŠŠå˜é‡å®šä¹‰åœ¨ï¼Œä½¿ç”¨å®ƒçš„èŒƒå›´å†…éƒ¨</strong>ã€‚</p></blockquote><hr><h2 id="6-4-å…¨å±€å˜é‡"><a href="#6-4-å…¨å±€å˜é‡" class="headerlink" title="6.4 å…¨å±€å˜é‡"></a>6.4 å…¨å±€å˜é‡</h2><h3 id="å…¨å±€å˜é‡çš„å£°æ˜"><a href="#å…¨å±€å˜é‡çš„å£°æ˜" class="headerlink" title="å…¨å±€å˜é‡çš„å£°æ˜"></a>å…¨å±€å˜é‡çš„å£°æ˜</h3><p>é€šå¸¸ï¼Œå…¨å±€å˜é‡å£°æ˜æ˜¯åœ¨ï¼š<strong>å¤´æ–‡ä»¶çš„ä¸‹é¢ï¼Œåœ¨å…¶ä»–ä»£ç çš„ä¸Šé¢</strong>ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ¨å‡½æ•°å¤–é¢å£°æ˜çš„å˜é‡æ˜¯å…¨å±€å˜é‡</span></span><br><span class="line"><span class="keyword">int</span> g_x &#123;&#125;; <span class="comment">// global variable g_x</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// global variables can be seen and used everywhere in the file</span></span><br><span class="line">    g_x = <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; g_x &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    doSomething();</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; g_x &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// global variables can be seen and used everywhere in the file</span></span><br><span class="line">    g_x = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; g_x &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// g_x goes out of scope here</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/********ç»“æœ*****/</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><blockquote><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œ åœ¨å…¨å±€å˜é‡åå­—åŠ ä¸Šå‰ç¼€â€œgâ€æˆ–è€…â€œg_â€ï¼Œæ¥ä¾¿äºæ˜¯æ˜¾ç¤ºçš„è¯´æ˜å®ƒæ˜¯ å…¨å±€å˜é‡</p></blockquote><hr><h3 id="å…¨å±€å˜é‡çš„file-scope-amp-é™æ€æŒç»­æ—¶é—´"><a href="#å…¨å±€å˜é‡çš„file-scope-amp-é™æ€æŒç»­æ—¶é—´" class="headerlink" title="å…¨å±€å˜é‡çš„file scope&amp;é™æ€æŒç»­æ—¶é—´"></a>å…¨å±€å˜é‡çš„file scope&amp;é™æ€æŒç»­æ—¶é—´</h3><blockquote><p>file scopeä¹Ÿå«ï¼š<strong>å…¨å±€èŒƒå›´(global scope)</strong>æˆ–è€…<strong>å…¨å±€å‘½åç©ºé—´èŒƒå›´(global namespace scope)</strong></p><blockquote><p>å› ä¸ºå…¨å±€å˜é‡æ˜¯åœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰çš„ï¼Œæ‰€ä»¥ä¹Ÿè¢«è§†ä¸ºâ€œå…¨å±€å‘½åç©ºé—´(global namespace)â€çš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥ï¼Œæ‰æœ‰<em>global namespace scope</em>è¿™ä¸ªå«æ³•ã€‚</p></blockquote></blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ä»è¢«å®šä¹‰å¼€å§‹ï¼Œåˆ°æ‰€åœ¨æ–‡ä»¶çš„ç»“æŸæœŸé—´ éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚</p><hr><p>å…¨å±€å˜é‡åœ¨ç¨‹åºå¼€å§‹è¢«åˆ›å»ºï¼Œåœ¨ç¨‹åºç»“æŸæ—¶è¢«é”€æ¯ã€‚è¿™æˆä¸ºâ€œ<strong>é™æ€æŒç»­æ—¶é—´(static duration)</strong>â€</p><blockquote><p>æœ‰ç€â€˜static durationâ€™çš„å˜é‡ï¼Œä¹Ÿè¢«ç§°ä¸ºï¼šâ€œ<strong>é™æ€å˜é‡(static variable)</strong>â€</p></blockquote><hr><p><u><strong>å±€éƒ¨å˜é‡é»˜è®¤æ˜¯ä¸è¢«åˆå§‹åŒ–çš„ï¼Œå…¨å±€å˜é‡é»˜è®¤æ˜¯è¢«åˆå§‹åŒ–ä¸º0çš„</strong></u></p><ul><li><p><strong>å…¨å±€å˜é‡çš„åˆå§‹åŒ–</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> g_x; <span class="comment">//æ²¡æœ‰æ˜¾ç¤ºçš„åˆå§‹åŒ–å˜é‡(æ‰€ä»¥é»˜è®¤åˆå§‹åŒ–ä¸º0)</span></span><br><span class="line"><span class="keyword">int</span> g_y&#123;&#125;; <span class="comment">//åˆå§‹åŒ–ä¸º0</span></span><br><span class="line"><span class="keyword">int</span> g_z&#123;<span class="number">3</span>&#125;; <span class="comment">//æ˜¾ç¤ºçš„åˆå§‹åŒ–ä¸º3</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="å¸¸é‡å±€éƒ¨å˜é‡"><a href="#å¸¸é‡å±€éƒ¨å˜é‡" class="headerlink" title="å¸¸é‡å±€éƒ¨å˜é‡"></a>å¸¸é‡å±€éƒ¨å˜é‡</h3><p>ä¸å±€éƒ¨å˜é‡ä¸€æ ·ï¼Œå…¨å±€å˜é‡ä¹Ÿå¯ä»¥æ˜¯å¸¸é‡ã€‚åªè¦æ˜¯å¸¸é‡ï¼Œé‚£å®ƒå°±å¿…é¡»è¢«åˆå§‹åŒ–ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> g_x; <span class="comment">//error:å¸¸é‡å‹çš„å˜é‡å¿…é¡»è¦è¢«åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> g_w; <span class="comment">//error:å¸¸é‡å‹çš„å˜é‡å¿…é¡»è¦è¢«åˆå§‹åŒ–ï¼ˆconstexprï¼Œè¡¨ç¤ºå®ƒæ˜¯ ç¼–è¯‘æ—¶å¸¸é‡ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> g_y &#123;<span class="number">1</span>&#125;; <span class="comment">//æ­£ç¡®ï¼Œåˆå§‹åŒ–äº†</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> g_z &#123;<span class="number">2</span>&#125;; <span class="comment">//æ­£ç¡®ï¼Œåˆå§‹åŒ–äº†</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dosomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//å…¨å±€å˜é‡åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªåœ°æ–¹éƒ½æ˜¯æœ‰æ•ˆçš„(å¯ä»¥è¢«çœ‹è§å’Œä½¿ç”¨)</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; g_y &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; g_z &lt;&lt; <span class="string">'\n'</span>;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    dosomething();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å…¨å±€å˜é‡åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­çš„æ¯ä¸€ä¸ªåœ°æ–¹éƒ½æ˜¯æœ‰æ•ˆçš„(å¯ä»¥è¢«çœ‹è§å’Œä½¿ç”¨)</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; g_y &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; g_z &lt;&lt; <span class="string">'\n'</span>;  </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// g_y and g_z goes out of scope here</span></span><br></pre></td></tr></table></figure><hr><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Non-constant global variables(éå¸¸é‡çš„å…¨å±€å˜é‡)</span></span><br><span class="line"><span class="keyword">int</span> g_x;                 <span class="comment">// defines non-initialized global variable (zero initialized by default)</span></span><br><span class="line"><span class="keyword">int</span> g_x &#123;&#125;;              <span class="comment">// defines explicitly zero-initialized global variable</span></span><br><span class="line"><span class="keyword">int</span> g_x &#123; <span class="number">1</span> &#125;;           <span class="comment">// defines explicitly initialized global variable</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// Const global variables</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> g_y;           <span class="comment">// error: const variables must be initialized</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> g_y &#123; <span class="number">2</span> &#125;;     <span class="comment">// defines initialized global constant</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// Constexpr global variables</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> g_y;       <span class="comment">// error: constexpr variables must be initialized</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> g_y &#123; <span class="number">3</span> &#125;; <span class="comment">// defines initialized global const</span></span><br></pre></td></tr></table></figure><hr><h2 id="6-5-å˜é‡è¢«éšè—"><a href="#6-5-å˜é‡è¢«éšè—" class="headerlink" title="6.5 å˜é‡è¢«éšè—"></a>6.5 å˜é‡è¢«éšè—</h2><h3 id="å±€éƒ¨å˜é‡è¢«éšè—"><a href="#å±€éƒ¨å˜é‡è¢«éšè—" class="headerlink" title="å±€éƒ¨å˜é‡è¢«éšè—"></a>å±€éƒ¨å˜é‡è¢«éšè—</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;<span class="comment">// outer block</span></span><br><span class="line">	<span class="keyword">int</span> apples &#123; <span class="number">5</span> &#125;; <span class="comment">// åµŒå¥—å¤–éƒ¨çš„apples</span></span><br><span class="line">    </span><br><span class="line">    &#123;<span class="comment">// nested block</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt;apples&lt;&lt;<span class="string">'\n'</span>; <span class="comment">//è¿™é‡Œçš„applesæ˜¯åµŒå¥—å¤–éƒ¨çš„</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> apples &#123;<span class="number">0</span>&#125;; <span class="comment">//åœ¨åµŒå¥—å†…éƒ¨å®šä¹‰å˜é‡apples</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ç°åœ¨çš„applesæŒ‡çš„æ˜¯åµŒå¥—å†…éƒ¨ çš„apples.åµŒå¥—å¤–éƒ¨çš„applesç°åœ¨è¢«éšè—èµ·æ¥äº†</span></span><br><span class="line">        apples = <span class="number">10</span>; <span class="comment">//ç°åœ¨è¢«èµ‹å€¼çš„applesæŒ‡çš„æ˜¯åµŒå¥—å†…éƒ¨çš„apples</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; apples &lt;&lt;<span class="string">'\n'</span>'</span><br><span class="line">    &#125; <span class="comment">//åµŒå¥—å—å†…éƒ¨çš„applesè¢«é”€æ¯</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt;apples&lt;&lt;<span class="string">'\n'</span>; <span class="comment">//è¿™ä¸ªapplesæŒ‡çš„æ˜¯åµŒå¥—å¤–éƒ¨çš„apples(å› ä¸ºç°åœ¨ï¼ŒåµŒå¥—å†…éƒ¨çš„appleså·²ç»è¢«é”€æ¯)</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>ï¼›</span><br><span class="line">&#125; <span class="comment">//åµŒå¥—å¤–éƒ¨çš„applesè¢«é”€æ¯</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">10</span><br><span class="line">5</span><br></pre></td></tr></table></figure><hr><h3 id="å…¨å±€å˜é‡è¢«éšè—"><a href="#å…¨å±€å˜é‡è¢«éšè—" class="headerlink" title="å…¨å±€å˜é‡è¢«éšè—"></a>å…¨å±€å˜é‡è¢«éšè—</h3><p>å°±åƒå±€éƒ¨å˜é‡ä¸­çš„ï¼ŒåµŒå¥—å—ä¸­çš„å˜é‡å¯ä»¥å°†åµŒå¥—å¤–éƒ¨çš„åŒåå˜é‡ä»¥è—èµ·æ¥ ä¸€æ ·ã€‚<strong>å±€éƒ¨å˜é‡å¯ä»¥å°†å…¨å±€ä¸­çš„åŒåå˜é‡éšè—èµ·æ¥:</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> a &#123;<span class="number">5</span>&#125;; <span class="comment">//å…¨å±€å˜é‡</span></span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt;<span class="string">"global variable aï¼š"</span>&lt;&lt;a&lt;&lt;<span class="string">'\n'</span>;<span class="comment">//æ­¤æ—¶ï¼Œå…¨å±€å˜é‡aè¿˜æ²¡æœ‰è¢«éšè—ã€‚å³ï¼Œè¿™é‡Œçš„å˜é‡aï¼ŒæŒ‡çš„æ˜¯å…¨å±€å˜é‡</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a &#123;<span class="number">7</span>&#125;; <span class="comment">//æ­¤æ—¶ï¼Œå…¨å±€å˜é‡aå°±è¢«è¿™é‡Œçš„å±€éƒ¨å˜é‡a éšè—èµ·æ¥äº†</span></span><br><span class="line">    </span><br><span class="line">    ++a; <span class="comment">//å±€éƒ¨å˜é‡aåŠ 1ï¼Œè€Œä¸æ˜¯å…¨å±€å˜é‡</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"local variable a: "</span> &lt;&lt; a &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    </span><br><span class="line">    foo();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="comment">// å±€éƒ¨å˜é‡aè¢«é”€æ¯</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">local variable a: 8</span><br><span class="line">global variable a: 5</span><br></pre></td></tr></table></figure><hr><p>ç„¶è€Œå•Šï¼Œå…¨å±€å˜é‡æ˜¯å±äºå…¨å±€çš„å‘½åç©ºé—´ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <em>èŒƒå›´è§£æç¬¦(::)</em>ï¼ˆä¸å¸¦å‰ç¼€çš„ï¼Œå³é»˜è®¤æ˜¯åœ¨å…¨å±€å‘½åç©ºé—´ï¼‰æ¥å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å…¨å±€å˜é‡ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> a &#123;<span class="number">5</span>&#125;; <span class="comment">//å…¨å±€å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a &#123;<span class="number">7</span>&#125;; <span class="comment">//æ­¤æ—¶ï¼Œå°†å…¨å±€å˜é‡aéšè—èµ·æ¥äº†</span></span><br><span class="line">    ++aï¼› <span class="comment">//å±€éƒ¨å˜é‡aåŠ 1ï¼Œè€Œä¸æ˜¯å…¨å±€å˜é‡</span></span><br><span class="line">        </span><br><span class="line">    --(::a); <span class="comment">//æ­¤æ—¶æ˜¯å¯¹äºå…¨å±€å˜é‡ï¼Œå‡ä¸€</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"local variable a: "</span> &lt;&lt; a &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"global variable a: "</span> &lt;&lt; ::a &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;       </span><br><span class="line">&#125;<span class="comment">//local a è¢«é”€æ¯</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">local variable a: 8</span><br><span class="line">global variable a: 4</span><br></pre></td></tr></table></figure><hr><h3 id="é¿å…å˜é‡è¢«éšè—"><a href="#é¿å…å˜é‡è¢«éšè—" class="headerlink" title="é¿å…å˜é‡è¢«éšè—"></a>é¿å…å˜é‡è¢«éšè—</h3><p>é€šå¸¸åº”è¯¥é¿å…å±€éƒ¨å˜é‡çš„éšè—ï¼Œå› ä¸ºå®ƒä¼šåœ¨ä½¿ç”¨æˆ–ä¿®æ”¹é”™è¯¯çš„å˜é‡æ—¶å¯¼è‡´æ— æ„çš„é”™è¯¯ã€‚ä¸€äº›ç¼–è¯‘å™¨ä¼šåœ¨å˜é‡è¢«éšè—æ—¶å‘å‡ºè­¦å‘Šã€‚</p><hr><h2 id="6-6-å†…éƒ¨è¿æ¥"><a href="#6-6-å†…éƒ¨è¿æ¥" class="headerlink" title="6.6 å†…éƒ¨è¿æ¥"></a>6.6 å†…éƒ¨è¿æ¥</h2><p>åœ¨ <a href="https://www.learncpp.com/cpp-tutorial/local-variables/" target="_blank" rel="noopener">6.3 â€“ Local variables</a>ä¸­ï¼Œè®²åˆ°ï¼šâ€œä¸€ä¸ªæ ‡è¯†ç¬¦çš„è¿æ¥å†³å®šäº†è¯¥åç§°çš„å…¶ä»–å£°æ˜æ˜¯å¦å¼•ç”¨åŒä¸€å¯¹è±¡â€å’Œâ€œå±€éƒ¨å˜é‡çš„æ— è¿æ¥â€</p><p>å…¨å±€å˜é‡å’Œå‡½æ•°æ ‡è¯†ç¬¦æœ‰ï¼š<strong>å†…éƒ¨é“¾æ¥(internal linkage)</strong>å’Œ<strong>å¤–éƒ¨é“¾æ¥(external linkage)</strong>ã€‚æœ¬èŠ‚ä¸»è¦è®²å†…éƒ¨é“¾æ¥ã€‚</p><hr><p>ä¸€ä¸ªæ ‡è¯†è‹¥æ˜¯å†…éƒ¨è¿æ¥ï¼Œé‚£å®ƒå°±åªèƒ½åœ¨è¿™ä¸€ä¸ªæ–‡ä»¶ä¸­æœ‰æ•ˆ(å¯ä»¥è¢«çœ‹åˆ°å’Œä½¿ç”¨)ï¼›è€Œä¸å¯ä»¥åœ¨å…¶ä»–æ–‡ä»¶ä¸­çœ‹åˆ°å’Œä½¿ç”¨ã€<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ²¡æœ‰æš´éœ²ç»™é“¾æ¥å™¨</strong>ã€‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œå®ƒä»¬åˆ†åˆ«å«æœ‰ä¸€ä¸ªç›¸åŒåå­—çš„æ ‡è¯†ç¬¦(è€Œä¸”è¿™è¿™ä¸ªåŒåçš„æ ‡è¯†ç¬¦æ˜¯ å†…éƒ¨è¿æ¥)ï¼Œé‚£ä¹ˆè¿™ä¸ªåŒåçš„æ ‡è¯†ç¬¦å°±è¢«çœ‹å¾…æˆç›¸äº’ç‹¬ç«‹çš„ã€‚</p><hr><h3 id="å…¨å±€å˜é‡å†…éƒ¨è¿æ¥"><a href="#å…¨å±€å˜é‡å†…éƒ¨è¿æ¥" class="headerlink" title="å…¨å±€å˜é‡å†…éƒ¨è¿æ¥"></a>å…¨å±€å˜é‡å†…éƒ¨è¿æ¥</h3><p>å…¨å±€å˜é‡æ˜¯å†…éƒ¨é“¾æ¥æ—¶ï¼Œä¹Ÿè¢«ç§°ä¸ºï¼š<strong>å†…éƒ¨å˜é‡(<em>internal variables</em>)</strong>ã€‚</p><blockquote><p>è®© éå¸¸é‡çš„å…¨å±€å˜é‡ æˆä¸ºå†…éƒ¨å˜é‡ï¼Œéœ€è¦ä½¿ç”¨<strong>å…³é”®å­—<code>static</code></strong>ï¼›ï¼ˆå› ä¸ºéå¸¸é‡çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å¤–éƒ¨é“¾æ¥ çš„ï¼‰</p><p>è€Œ å¸¸é‡çš„å…¨å±€å˜é‡ <strong>é»˜è®¤</strong>çš„å°±æ˜¯ å†…éƒ¨å˜é‡ã€‚</p></blockquote><p>å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> g_x; <span class="comment">//éå¸¸é‡çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å¤–éƒ¨é“¾æ¥ã€‚ä½†æ˜¯åŠ ä¸Šå…³é”®å­—staticåï¼Œå°±å˜æˆå†…éƒ¨è¿æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> g_y &#123;<span class="number">1</span>&#125;; <span class="comment">//const çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å†…éƒ¨è¿æ¥</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> g_z &#123;<span class="number">2</span>&#125;; <span class="comment">//constexpr çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å†…éƒ¨è¿æ¥</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>const</code>å’Œ<code>constexpr</code>çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å†…éƒ¨è¿æ¥(æ‰€ä»¥ï¼Œä¸éœ€è¦åŠ  å…³é”®å­—<code>static</code>)</p></blockquote><hr><h3 id="ä¸€ä¸ªå®šä¹‰è§„åˆ™å’Œå†…éƒ¨è¿æ¥"><a href="#ä¸€ä¸ªå®šä¹‰è§„åˆ™å’Œå†…éƒ¨è¿æ¥" class="headerlink" title="ä¸€ä¸ªå®šä¹‰è§„åˆ™å’Œå†…éƒ¨è¿æ¥"></a>ä¸€ä¸ªå®šä¹‰è§„åˆ™å’Œå†…éƒ¨è¿æ¥</h3><p>è¿˜è®°å¾—åœ¨ <a href="https://www.learncpp.com/cpp-tutorial/forward-declarations/" target="_blank" rel="noopener">2.7 â€“ Forward declarations and definitions</a>,ä¸­è®²åˆ°ä¸€ä¸ªå®šä¹‰çš„è§„åˆ™ï¼š<em>åœ¨æ–‡ä»¶æˆ–ç¨‹åºä¸­ï¼Œ*</em>ä¸€ä¸ª*<em>å¯¹è±¡æˆ–è€…å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰</em>ã€‚</p><p>ç„¶è€Œï¼Œè¿™ä¸€ä¸ªæˆ‘ä»¬å´åœ¨ä¸€ä¸ªç¨‹åºä¸­å¯¹ä¸€ä¸ªå¯¹è±¡æˆ–å‡½æ•°è¿›è¡Œäº†â€œå¤šæ¬¡å®šä¹‰â€ï¼Œè¿™æ˜¯å¦è¿èƒŒäº†ä¸Šé¢çš„è§„åˆ™å‘¢ï¼Ÿ</p><blockquote><p>ç­”ï¼šä¸è¿èƒŒã€‚å› ä¸ºæœ¬èŠ‚ä¸­æˆ‘ä»¬å°†å®ƒä»¬è®¾ç½®ä¸ºå†…éƒ¨è¿æ¥ï¼Œæ­¤æ—¶è™½ç„¶å®ƒä»¬çš„åå­—ç›¸åŒï¼Œä½†æ˜¯ç›¸äº’ç‹¬ç«‹ï¼ˆå³ï¼Œå®ƒä»¬ç›¸å½“äºä¸åŒçš„å¯¹è±¡æˆ–å‡½æ•°ï¼Œåªæ˜¯åå­—ç›¸åŒã€‚å°±å¥½åƒä¸¤ä¸ªåŒåçš„äººä¸€æ ·ï¼‰ã€‚æ‰€ä»¥ä¸è¿èƒŒä¸Šé¢çš„å®šä¹‰è§„åˆ™ã€‚</p></blockquote><hr><h3 id="å‡½æ•°å†…éƒ¨è¿æ¥"><a href="#å‡½æ•°å†…éƒ¨è¿æ¥" class="headerlink" title="å‡½æ•°å†…éƒ¨è¿æ¥"></a>å‡½æ•°å†…éƒ¨è¿æ¥</h3><p>å› ä¸ºâ€œè¿æ¥(linkage)â€æ˜¯æ ‡è¯†ç¬¦çš„å±æ€§(æ ‡è¯†ç¬¦ä¸ä»…ä»…åªä»£è¡¨å˜é‡(â˜„âŠ™Ï‰âŠ™)â˜„ï¼Œå› ä¸ºå‡½æ•°çš„åå­—ä¹Ÿæ˜¯æ ‡è¯†ç¬¦)ã€‚æ‰€ä»¥ï¼Œå‡½æ•°æ ‡è¯†ç¬¦ä¹Ÿå…·æœ‰ å†…éƒ¨è¿æ¥ çš„å±æ€§ã€‚</p><p>å¦‚ï¼š</p><p><code>add.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™ä¸ªå‡½æ•°å‰ä½¿ç”¨å…³é”®å­—staticï¼Œè¡¨ç¤ºå®ƒç°åœ¨åªåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æœ‰æ•ˆ</span></span><br><span class="line"><span class="comment">//å¦‚æœï¼Œä¼å›¾é€šè¿‡å‡½æ•°æå‰å£°æ˜ä»ï¼Œä»å¦ä¸€ä¸ªæ–‡ä»¶è®¿é—®å®ƒï¼Œå°†å¤±è´¥</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">add</span> <span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span> <span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>; <span class="comment">//å¯¹å‡½æ•°addï¼Œæå‰å£°æ˜</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; add(<span class="number">3</span>, <span class="number">4</span>) &lt;&lt;<span class="string">'\n'</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ç¨‹åºï¼Œåœ¨é“¾æ¥å™¨è¿æ¥æ—¶ï¼Œå°†ä¼šå‡ºé”™ã€‚å› ä¸ºå‡½æ•°addåœ¨<code>main.cpp</code>ä¸­ä¸å¯è®¿é—®</p><hr><h3 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Internal global variables definitions:</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> g_x;          <span class="comment">// defines non-initialized internal global variable (zero initialized by default)</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> g_x&#123; <span class="number">1</span> &#125;;     <span class="comment">// defines initialized internal global variable</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> g_y &#123; <span class="number">2</span> &#125;;     <span class="comment">// defines initialized internal global const variable</span></span><br><span class="line"><span class="keyword">constexpr</span> <span class="keyword">int</span> g_y &#123; <span class="number">3</span> &#125;; <span class="comment">// defines initialized internal global constexpr variable</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// Internal function definitions:</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;&#125;;     <span class="comment">// defines internal function</span></span><br></pre></td></tr></table></figure><hr><h2 id="6-7-å¤–éƒ¨è¿æ¥"><a href="#6-7-å¤–éƒ¨è¿æ¥" class="headerlink" title="6.7 å¤–éƒ¨è¿æ¥"></a>6.7 å¤–éƒ¨è¿æ¥</h2><p>ä¸€ä¸ªæ ‡è¯†ç¬¦å…·æœ‰ <strong>å¤–éƒ¨è¿æ¥(external linkage)</strong>çš„å±æ€§ï¼Œé‚£ä¹ˆå®ƒå°±å¯ä»¥åœ¨æ•´ä¸ªç¨‹åºä¸­(ä¸ä»…ä»…åªåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­)è¢«çœ‹è§å’Œè®¿é—®ã€‚ï¼ˆåœ¨å…¶ä»–æ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡<em>æå‰å£°æ˜</em>æ¥è®¿é—®å®ƒï¼‰</p><blockquote><p>æ‰€ä»¥ï¼Œå…·æœ‰å¤–éƒ¨è¿æ¥å±æ€§çš„è¡¨ç¤ºç¬¦ï¼Œæ‰æ˜¯çœŸæ­£çš„â€œå…¨å±€â€å˜é‡</p></blockquote><hr><h3 id="å‡½æ•°é»˜è®¤æ˜¯å¤–éƒ¨é“¾æ¥"><a href="#å‡½æ•°é»˜è®¤æ˜¯å¤–éƒ¨é“¾æ¥" class="headerlink" title="å‡½æ•°é»˜è®¤æ˜¯å¤–éƒ¨é“¾æ¥"></a>å‡½æ•°é»˜è®¤æ˜¯å¤–éƒ¨é“¾æ¥</h3><p>åœ¨ <a href="https://www.learncpp.com/cpp-tutorial/programs-with-multiple-code-files/" target="_blank" rel="noopener">2.8 â€“ Programs with multiple code files</a>ä¸­ï¼Œè®²åˆ°æˆ‘ä»¬å¯ä»¥ä»å…¶ä»–æ–‡ä»¶ä¸­è°ƒç”¨å‡½æ•°ï¼Œè¿™æ˜¯å› ä¸ºè¿™ä¸ªå‡½æ•°é»˜è®¤æ˜¯â€œå¤–éƒ¨é“¾æ¥â€çš„ã€‚</p><p>åœ¨ä»å…¶ä»–æ–‡ä»¶ä¸­è°ƒç”¨å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»è¦å¯¹è¿™ä¸ªå‡½æ•°è¿›è¡Œ <strong>æå‰å£°æ˜(forward declaration)</strong></p><blockquote><p>å› ä¸ºï¼Œ<strong>æå‰å£°æ˜</strong>å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå‡½æ•°çš„å­˜åœ¨ï¼›è€Œé“¾æ¥å™¨åˆ™æ˜¯å°†å‡½æ•°è°ƒç”¨è¿æ¥åˆ°å®é™…çš„å‡½æ•°å®šä¹‰</p></blockquote><p>å¦‚ï¼š</p><p><code>a.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sayHi</span><span class="params">()</span> <span class="comment">//è¿™ä¸ªå‡½æ•°é»˜è®¤æ˜¯ å¤–éƒ¨è¿æ¥ï¼Œæ‰€ä»¥ä»–å¯ä»¥åœ¨æ•´ä¸ªç¨‹åº(åŒ…æ‹¬å…¶ä»–æ–‡ä»¶)ä¸­è¢«çœ‹è§</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"hi"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sayHi</span><span class="params">()</span></span>; <span class="comment">//å¯¹å‡½æ•°è¿›è¡Œæå‰å£°æ˜ï¼Œä½¿å¾—è¯¥å‡½æ•°åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å¯ä»¥è¢«è®¿é—®</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    sayHi(); <span class="comment">//è¿™é‡Œæ˜¯ä»å…¶ä»–æ–‡ä»¶ä¸­è°ƒç”¨æ­¤å‡½æ•°ï¼Œé“¾æ¥å™¨å°†æŠŠè¿™ä¸ªè°ƒç”¨è¿æ¥åˆ°å‡½æ•°å®šä¹‰</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hi</span><br></pre></td></tr></table></figure><hr><h3 id="å…¨å±€å˜é‡å¤–éƒ¨è¿æ¥"><a href="#å…¨å±€å˜é‡å¤–éƒ¨è¿æ¥" class="headerlink" title="å…¨å±€å˜é‡å¤–éƒ¨è¿æ¥"></a>å…¨å±€å˜é‡å¤–éƒ¨è¿æ¥</h3><p>å…¨å±€å˜é‡å…·æœ‰å¤–éƒ¨è¿æ¥å±æ€§æ—¶ï¼Œä¹Ÿç§°ä¸ºï¼š<strong>å¤–éƒ¨å˜é‡(external variables)</strong></p><blockquote><p>éå¸¸é‡çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å¤–éƒ¨å˜é‡ï¼›</p><p>å¸¸é‡çš„å…¨å±€å˜é‡ è¦æƒ³æˆä¸ºå¤–éƒ¨å˜é‡ï¼Œéœ€è¦ä½¿ç”¨<strong>å…³é”®å­—<code>extern</code></strong></p></blockquote><p>å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> g_x &#123;<span class="number">2</span>&#125;; <span class="comment">//éå¸¸é‡çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å¤–éƒ¨å˜é‡ï¼›</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">int</span> g_y &#123;<span class="number">3</span>&#125;;<span class="comment">//const çš„å…¨å±€å˜é‡å¯ä»¥è¢«å®šä¹‰æˆ å¤–éƒ¨å˜é‡ï¼Œéœ€è¦åŠ å…³é”®å­—extern</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">constexpr</span> <span class="keyword">int</span> g_z &#123;<span class="number">3</span>&#125;; <span class="comment">//constexpr çš„å…¨å±€å˜é‡å¯ä»¥è¢«å®šä¹‰æˆ å¤–éƒ¨å˜é‡,éœ€è¦åŠ å…³é”®å­—extern</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œéconstå…¨å±€å˜é‡æ˜¯å¤–éƒ¨å˜é‡(å¦‚æœä½¿ç”¨ï¼Œexternå…³é”®å­—å°†è¢«å¿½ç•¥)ã€‚</p></blockquote><hr><h3 id="externæå‰å£°æ˜å˜é‡"><a href="#externæå‰å£°æ˜å˜é‡" class="headerlink" title="externæå‰å£°æ˜å˜é‡"></a><code>extern</code>æå‰å£°æ˜å˜é‡</h3><p>è¦å®é™…ä½¿ç”¨åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰çš„å¤–éƒ¨å…¨å±€å˜é‡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä½¿ç”¨å®ƒçš„æ–‡ä»¶ä¸­å¯¹å…¨å±€å˜é‡è¿›è¡Œ<em>æå‰å£°æ˜</em>ã€‚å¯¹äºå˜é‡ï¼Œåœ¨åˆ›å»ºä¸€ä¸ª<strong>æå‰å£°æ˜æ—¶ï¼Œä¹Ÿæ˜¯éœ€è¦ä½¿ç”¨å…³é”®å­—<code>extern</code>çš„(</strong>æ²¡æœ‰åˆå§‹åŒ–å€¼)ï¼š</p><p>å¦‚ï¼š</p><p><code>a.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…¨å±€å˜é‡çš„å®šä¹‰</span></span><br><span class="line"><span class="keyword">int</span> g_x &#123;<span class="number">2</span>&#125;; <span class="comment">//éå¸¸é‡çš„å…¨å±€å˜é‡é»˜è®¤æ˜¯ å¤–éƒ¨é“¾æ¥</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">int</span> g_y &#123;<span class="number">3</span>&#125;; <span class="comment">//å¸¸é‡çš„å…¨å±€å˜é‡æ˜¯å†…éƒ¨è¿æ¥ï¼Œä½†ä½¿ç”¨å…³é”®å­—externåï¼Œå˜ä¸º å¤–éƒ¨é“¾æ¥</span></span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> g_x; <span class="comment">//å¯¹å˜é‡g_xçš„æå‰å£°æ˜ã€‚å®ƒçš„å®šä¹‰åœ¨å…¶ä»–æ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">int</span> g_y; <span class="comment">//å¯¹å¸¸é‡å˜é‡g_yçš„æå‰å£°æ˜ã€‚å®ƒçš„å®šä¹‰åœ¨å…¶ä»–æ–‡ä»¶ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>&lt;&lt; g_x; <span class="comment">//ç»“æœä¸º2</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="å‡½æ•°æå‰å£°æ˜ä¸ç”¨extern"><a href="#å‡½æ•°æå‰å£°æ˜ä¸ç”¨extern" class="headerlink" title="å‡½æ•°æå‰å£°æ˜ä¸ç”¨extern"></a>å‡½æ•°æå‰å£°æ˜ä¸ç”¨<code>extern</code></h3><p><strong>å‡½æ•°çš„æå‰å£°æ˜ä¸éœ€è¦å…³é”®å­—<code>extern</code></strong></p><blockquote><p>ç¼–è¯‘å™¨èƒ½æå‘Šè¯‰ä½ è¿™ä¸ªå‡½æ•°åœ¨å“ªå®šä¹‰ï¼Œä¹Ÿå¯ä»¥æ ¹æ®æ˜¯å¦æä¾›å‡½æ•°ä½“æ¥è¿›è¡Œæå‰å£°æ˜ã€‚</p></blockquote><p><strong>å˜é‡çš„æå‰å£°æ˜å¿…é¡»è¦ç”¨å…³é”®å­—<code>extern</code></strong>ï¼Œ</p><blockquote><p>æ¥å¸®åŠ©åŒºåˆ† <strong>å˜é‡å®šä¹‰</strong> å’Œ <strong>å˜é‡æå‰å£°æ˜</strong>(å®ƒä»¬çœ‹èµ·æ¥æ˜¯ä¸€æ ·çš„):</p></blockquote><p>å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//éå¸¸é‡</span></span><br><span class="line"><span class="keyword">int</span> g_x; <span class="comment">//å˜é‡çš„å®šä¹‰(å¦‚æœéœ€è¦ï¼Œå¯è¿›è¡Œåˆå§‹åŒ–)</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> g_x; <span class="comment">//å˜é‡çš„æå‰å£°æ˜(æå‰å£°æ˜  ä¸å¸¦åˆå§‹åŒ–)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¸é‡</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">int</span> g_y &#123;<span class="number">1</span>&#125;;<span class="comment">//å®šä¹‰å˜é‡(å¸¸é‡çš„å®šä¹‰å¿…é¡»è¦è¿›è¡Œåˆå§‹åŒ–)</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">int</span> g_y; <span class="comment">//æå‰å£°æ˜(æå‰å£°æ˜  ä¸å¸¦åˆå§‹åŒ–)</span></span><br></pre></td></tr></table></figure><hr><h3 id="fileèŒƒå›´VS-globalèŒƒå›´"><a href="#fileèŒƒå›´VS-globalèŒƒå›´" class="headerlink" title="fileèŒƒå›´VS.globalèŒƒå›´"></a>fileèŒƒå›´VS.globalèŒƒå›´</h3><p>çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><p><code>global.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> g_x &#123;<span class="number">2</span>&#125;; <span class="comment">//ï¼ˆéå¸¸é‡çš„å˜é‡ï¼‰é»˜è®¤æ˜¯å¤–éƒ¨è¿æ¥</span></span><br><span class="line"><span class="comment">//g_x goes out scope here</span></span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> g_x; <span class="comment">//å¯¹å˜é‡g_xçš„æå‰å£°æ˜ã€‚å¯ä»¥åœ¨æ­¤æ–‡ä»¶ä¸­ä½¿ç”¨g_x</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; g_x; <span class="comment">//åº”è¯¥è¾“å‡º 2</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//g_xçš„æå‰å£°æ˜ goes out of scope here</span></span><br></pre></td></tr></table></figure><blockquote><p>å˜é‡g_xçš„<strong>æ–‡ä»¶èŒƒå›´(file scope)</strong>æ˜¯åœ¨<code>global.cpp</code>ä¸­ã€‚å®ƒåœ¨è¯¥æ–‡ä»¶ä¸­å®šä¹‰ä¹‹åï¼Œå°±å¯ä»¥è¢«ä½¿ç”¨ã€‚</p><p>ä½†æ˜¯å®ƒ<strong>ä¸èƒ½<u>ç›´æ¥</u>åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨</strong>ã€‚å¦‚æœè¦åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨g_xï¼Œæˆ‘ä»¬è¦åœ¨å…¶ä»–æ–‡ä»¶ä¸­å¯¹å®ƒè¿›è¡Œæå‰å£°æ˜(è®°å¾—è¦ä½¿ç”¨å…³é”®å­—<code>extern</code>)</p></blockquote><hr><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œâ€œæ–‡ä»¶èŒƒå›´â€é€šå¸¸ç”¨äºå…·æœ‰<em>å†…éƒ¨è¿æ¥</em>å±æ€§çš„å…¨å±€å˜é‡ï¼›â€œå…¨å±€èŒƒå›´â€æ›´å¤šç”¨äºå…·æœ‰<em>å¤–éƒ¨è¿æ¥</em>å±æ€§çš„å…¨å±€å˜é‡(å› ä¸ºï¼Œå®ƒè¢«æå‰å£°æ˜ä¹‹åï¼Œå°±å¯ä»¥åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨)</p><hr><h3 id="å…¨å±€å˜é‡åˆå§‹åŒ–é¡ºåºé—®é¢˜"><a href="#å…¨å±€å˜é‡åˆå§‹åŒ–é¡ºåºé—®é¢˜" class="headerlink" title="å…¨å±€å˜é‡åˆå§‹åŒ–é¡ºåºé—®é¢˜"></a>å…¨å±€å˜é‡åˆå§‹åŒ–é¡ºåºé—®é¢˜</h3><p>å…¨å±€å˜é‡çš„åˆå§‹åŒ–æ˜¯ç¨‹åºå¯åŠ¨çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨æ‰§è¡Œ<code>mian</code>å‡½æ•°ä¹‹å‰ï¼Œè¿™ä¸ªè¿‡ç¨‹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><ul><li><p>ç¬¬ä¸€éƒ¨åˆ†ï¼Œç§°ä¸º <strong><em>static initialization</em>é™æ€åˆå§‹åŒ–</strong>ã€‚</p><blockquote><p>åœ¨é™æ€åˆå§‹åŒ–ä¸­ï¼Œå¸¦æœ‰constexpråˆå§‹åŒ–å™¨(åŒ…æ‹¬å­—é¢å€¼(literal))çš„å…¨å±€å˜é‡è¢«åˆå§‹åŒ–ä¸ºç»™å®šçš„å€¼[å› ä¸ºï¼Œconstexprå’Œå­—é¢å€¼å¸¸é‡å®šä¹‰æ—¶è‡ªå¸¦æœ‰åˆå§‹å€¼]ï¼›</p><blockquote><p>eg,</p><p><code>const a {1};</code>é‚£ä¹ˆaå°±è¢«åˆå§‹åŒ–ä¸º1</p><p><code>constexpr a{1};</code>é‚£ä¹ˆaå°±è¢«åˆå§‹åŒ–ä¸º1</p></blockquote><p>å®šä¹‰æ—¶æ²¡æœ‰ç»™å®šåˆå§‹å€¼çš„å…¨å±€å˜é‡<strong>(ä¹Ÿä½¿å¸¸é‡çš„å…¨å±€å˜é‡ï¼Œä½†æ²¡æœ‰æ˜¾ç¤ºåˆå§‹åŒ–ä¸º0)</strong>è¢«é»˜è®¤åˆå§‹åŒ–ä¸º0ã€‚</p><blockquote><p><code>const a {};</code>é‚£ä¹ˆaå°±é»˜è®¤è¢«åˆå§‹åŒ–ä¸º0</p><p><code>constexpr a{};</code>é‚£ä¹ˆaå°±é»˜è®¤è¢«åˆå§‹åŒ–ä¸º0</p></blockquote></blockquote></li><li><p>ç¬¬äºŒéƒ¨åˆ†ï¼Œç§°ä¸º <strong><em>dynamic initialization</em>åŠ¨æ€åˆå§‹åŒ–</strong>ã€‚</p><blockquote><p>è¿™éƒ¨åˆ†ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œå®ƒçš„è¦ç‚¹æ˜¯ï¼šåˆå§‹åŒ–é‚£äº›â€œä¸å¸¦æœ‰constexpråˆå§‹åŒ–å™¨çš„å…¨å±€å˜é‡â€(å³ï¼Œå°±æ˜¯ éå¸¸é‡çš„å…¨å±€å˜é‡)ã€‚</p></blockquote></li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> g_something &#123;init()&#125;; <span class="comment">//éå¸¸é‡çš„å˜é‡åˆå§‹åŒ–</span></span><br></pre></td></tr></table></figure><blockquote><p>åœ¨å•ä½ä»¶çš„ç¨‹åºä¸­ï¼Œå…¨å±€å˜é‡æŒ‰ç…§å®šä¹‰çš„é¡ºåºè¢«åˆå§‹åŒ–</p></blockquote><p>è¿™ä¸ªè§„åˆ™æœ‰å‡ ä¸ªä¾‹å¤–ã€‚è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œ<strong>æ‚¨éœ€è¦å°å¿ƒä¸è¦è®©å˜é‡ä¾èµ–äºå…¶ä»–å˜é‡çš„åˆå§‹åŒ–å€¼ï¼Œè¿™äº›å˜é‡è¦åˆ°ç¨åæ‰ä¼šåˆå§‹åŒ–</strong>ã€‚ä¾‹å¦‚:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">initx</span><span class="params">()</span></span>;  <span class="comment">// forward declaration</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">inity</span><span class="params">()</span></span>;  <span class="comment">// forward declaration</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">int</span> g_x&#123; initx() &#125;; <span class="comment">// g_x is initialized first</span></span><br><span class="line"><span class="keyword">int</span> g_y&#123; inity() &#125;;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">initx</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> g_y; <span class="comment">// g_y isn't initialized when this is called</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">inity</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; g_x &lt;&lt; <span class="string">' '</span> &lt;&lt; g_y &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/******ç»“æœ*******/</span></span><br><span class="line"><span class="number">0</span> <span class="number">5</span></span><br></pre></td></tr></table></figure><hr><p>å†å¤šæ–‡ä»¶ç¨‹åºä¸­ï¼Œ<strong>ä¸åŒæ–‡ä»¶ä¹‹é—´çš„åˆå§‹åŒ–é¡ºåºæ˜¯æ²¡æœ‰è§„å®šçš„</strong>ã€‚</p><blockquote><p>ä¾‹å¦‚ï¼Œæœ‰ä¸¤ä¸ªæ–‡ä»¶<code>a.cpp</code>å’Œ<code>b.cpp</code>ï¼Œå®ƒä»¬ä¸¤ä¸ªæ–‡ä»¶è°å…ˆè¢«åˆå§‹åŒ–æ˜¯ä¸ç¡®å®šçš„ã€‚</p></blockquote><p>æ‰€ä»¥ï¼Œå¦‚æœåœ¨<code>a.cpp</code>ä¸­æœ‰ä¸€ä¸ªå˜é‡çš„å€¼æ˜¯ä¾èµ–äº<code>b.cpp</code>ã€‚é‚£ä¹ˆå°±æœ‰50%çš„å¯èƒ½è¿™äº›å˜é‡è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ã€‚</p><hr><p>æ³¨æ„ï¼šC++ä¸­ï¼Œå…¨å±€å˜é‡çš„åŠ¨æ€åˆå§‹åŒ–ä¼šé€ æˆå¾ˆå¤šé—®é¢˜ã€‚æ‰€ä»¥é¿å…ä½¿ç”¨ã€‚</p><hr><p>å°ç»“ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// External global variable definitions:</span></span><br><span class="line"><span class="keyword">int</span> g_x;                       <span class="comment">// defines non-initialized external global variable (zero initialized by default)</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">int</span> g_x&#123; <span class="number">1</span> &#125;;     <span class="comment">// defines initialized const external global variable</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">constexpr</span> <span class="keyword">int</span> g_x&#123; <span class="number">2</span> &#125;; <span class="comment">// defines initialized constexpr external global variable</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// Forward declarations</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> g_y;                <span class="comment">// forward declaration for non-constant global variable</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">int</span> g_y;          <span class="comment">// forward declaration for const global variable</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">constexpr</span> <span class="keyword">int</span> g_y;      <span class="comment">// not allowed: constexpr variables can't be forward declared</span></span><br></pre></td></tr></table></figure><hr><h2 id="6-8-å…¨å±€å¸¸é‡-amp-å†…è”å˜é‡"><a href="#6-8-å…¨å±€å¸¸é‡-amp-å†…è”å˜é‡" class="headerlink" title="6.8 å…¨å±€å¸¸é‡&amp;å†…è”å˜é‡"></a>6.8 å…¨å±€å¸¸é‡&amp;å†…è”å˜é‡</h2><blockquote><p><strong>Global constants and inline variables</strong></p></blockquote><p>ä¸€äº›ç¬¦å·å¸¸é‡éœ€(å¦‚ï¼Œé˜¿ä¼ä¼½å¾·ç½—å¸¸æ•°ï¼Œé‡åŠ›ç³»æ•°â€¦)è¦åœ¨æ•´ä¸ªç¨‹åºä¸­ä½¿ç”¨ã€‚æ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯åœ¨ä¸€ä¸ªåœ°æ–¹å¯¹ä»–ä»¬è¿›è¡Œå£°æ˜ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªéœ€è¦å®ƒä»¬çš„æ–‡ä»¶ä¸­é‡æ–°å®šä¹‰è¿™äº›å¸¸é‡ã€‚</p><h3 id="å…¨å±€å¸¸é‡ä½œä¸ºå†…éƒ¨å˜é‡"><a href="#å…¨å±€å¸¸é‡ä½œä¸ºå†…éƒ¨å˜é‡" class="headerlink" title="å…¨å±€å¸¸é‡ä½œä¸ºå†…éƒ¨å˜é‡"></a>å…¨å±€å¸¸é‡ä½œä¸ºå†…éƒ¨å˜é‡</h3><p>åœ¨c++ä¸­æœ‰å¤šç§æ–¹æ³•å¯ä»¥ä¿ƒè¿›è¿™ä¸€ç‚¹ã€‚åœ¨c++ 17ä¹‹å‰ï¼Œä»¥ä¸‹å¯èƒ½æ˜¯æœ€ç®€å•å’Œæœ€å¸¸è§çš„æ–¹æ³•:</p><ol><li><p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªå¤´æ–‡ä»¶æ¥å­˜æ”¾è¿™äº›å¸¸é‡ï¼›</p></li><li><p>åœ¨è¿™ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼ˆåœ¨ <a href="https://www.learncpp.com/cpp-tutorial/user-defined-namespaces/" target="_blank" rel="noopener">6.2 â€“ User-defined namespaces</a>è®²è§£è¿‡å‘½åç©ºé—´ï¼‰ï¼›</p></li><li><p>ç„¶åï¼Œå°†å¸¸é‡åŠ å…¥è¿™ä¸ªå‘½åç©ºé—´ä¸­ï¼ˆè¯·ç¡®ä¿å®ƒä»¬çš„ç±»å‹æ˜¯<code>constexpr</code>ï¼‰ï¼›</p></li><li><p>åœ¨ä½ è¦ç”¨è¿™äº›å˜é‡çš„æ–‡ä»¶ä¸­ï¼ŒåŠ ä¸Šè¿™ä¸ªå¤´æ–‡ä»¶<code>#include &quot;xxx&quot;</code></p></li></ol><hr><p>eg:</p><p><code>constants.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CONSTANTS_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONSTANTS_H</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰ä½ è‡ªå·±çš„å‘½åç©ºé—´(ç”¨æ¥å­˜å‚¨å¸¸é‡)</span></span><br><span class="line"><span class="keyword">namespace</span> constants</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//é»˜è®¤æƒ…å†µä¸‹ï¼Œå¸¸é‡æœ‰ å†…éƒ¨è¿æ¥</span></span><br><span class="line">    <span class="keyword">constexpr</span> <span class="keyword">double</span> pi &#123;<span class="number">3.14159</span>&#125;;</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="keyword">double</span> my_gravity &#123;<span class="number">9.2</span>&#125;;</span><br><span class="line">    <span class="comment">//....å¸¸é‡</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"constants.h"</span> <span class="comment">//ï¼šåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åŒ…å«æ¯ä¸ªå¸¸é‡çš„å‰¯æœ¬</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"enter a radius: "</span>;</span><br><span class="line">    <span class="keyword">int</span> radius&#123;&#125;; <span class="comment">//radiusï¼šåŠå¾„</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt;radius;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"the circumference is: "</span> &lt;&lt;<span class="number">2</span>* radius* constants::pi;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šåœ¨<code>main.cpp</code>æ–‡ä»¶ä¸­ï¼Œè¦æƒ³è®¿é—®<code>constants</code>ä¸­çš„å¸¸é‡ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ <strong>èŒƒå›´è§£æç¬¦(::)</strong>ã€‚</p><p><code>a::b</code> èŒƒå›´è§£ææ“ä½œç¬¦çš„ å·¦æ“ä½œæ•°a,è¡¨ç¤ºå‘½åç©ºé—´åç§°ï¼›å³æ“ä½œç¬¦bè¡¨ç¤ºå‘½åç©ºé—´aä¸­çš„å˜é‡æˆ–è€…å‡½æ•°åå­—ã€‚</p><p><code>::b</code> è¿™ç§å½¢å¼è¡¨ç¤º <strong>å…¶å‘½åç©ºé—´æ˜¯å…¨å±€å‘½åç©ºé—´</strong>ã€‚</p></blockquote><hr><h3 id="å…¨å±€å¸¸é‡ä½œä¸ºå¤–éƒ¨å˜é‡"><a href="#å…¨å±€å¸¸é‡ä½œä¸ºå¤–éƒ¨å˜é‡" class="headerlink" title="å…¨å±€å¸¸é‡ä½œä¸ºå¤–éƒ¨å˜é‡"></a>å…¨å±€å¸¸é‡ä½œä¸ºå¤–éƒ¨å˜é‡</h3><p>å½“ä½œä¸ºå†…éƒ¨å˜é‡æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š</p><p>è™½ç„¶è¿™å¾ˆç®€å•(å¯¹äºè¾ƒå°çš„ç¨‹åºä¹Ÿå¾ˆå¥½)ï¼Œä½†æ˜¯æ¯å½“constants.hè¢«åŒ…å«åˆ°ä¸åŒçš„ä»£ç æ–‡ä»¶ä¸­æ—¶ï¼Œæ¯ä¸ªå˜é‡éƒ½ä¼šè¢«å¤åˆ¶åˆ°åŒ…å«ä»£ç æ–‡ä»¶ä¸­ã€‚å› æ­¤ï¼Œå¦‚æœå°†constants.håŒ…å«åˆ°20ä¸ªä¸åŒçš„ä»£ç æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆæ¯ä¸ªå˜é‡éƒ½ä¼šé‡å¤20æ¬¡ã€‚å¤´æ–‡ä»¶ä¿æŠ¤ä¸ä¼šé˜»æ­¢è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œå› ä¸ºå®ƒä»¬åªä¼šé˜»æ­¢å¤´æ–‡ä»¶ä¸æ­¢ä¸€æ¬¡è¢«åŒ…å«åˆ°ä¸€ä¸ªåŒ…å«æ–‡ä»¶ä¸­ï¼Œè€Œä¸ä¼šé˜»æ­¢å¤´æ–‡ä»¶ä¸€æ¬¡è¢«åŒ…å«åˆ°å¤šä¸ªä¸åŒçš„ä»£ç æ–‡ä»¶ä¸­ã€‚è¿™å¸¦æ¥äº†ä¸¤ä¸ªæŒ‘æˆ˜:</p><blockquote><p><strong>å¤´æ–‡ä»¶ä¿æŠ¤ç¬¦(header guards)</strong>åªèƒ½ç¡®ä¿åœ¨å•ä¸ªæ–‡ä»¶ä¸­åŒ…å«çš„å¤´æ–‡ä»¶åªåŒ…å«ä¸€æ¬¡ï¼›</p></blockquote><ul><li>å½“ä¿®æ”¹ä¸€ä¸ªå¸¸é‡å€¼æ—¶ï¼Œå°±å¯èƒ½éœ€è¦é‡æ–°ç¼–è¯‘é‚£äº›åŒ…å«è¿™ä¸ªå¸¸é‡çš„æ–‡ä»¶ï¼Œè¿™å¯èƒ½å¯¼è‡´å¤§å‹é¡¹ç›®çš„é‡å»ºæ—¶é—´å¾ˆé•¿ã€‚</li><li>å¦‚æœå¸¸é‡çš„sizeå¾ˆå¤§ï¼Œå¹¶ä¸”ä¸èƒ½è¿›è¡Œä¼˜åŒ–ã€‚è¿™å°†èŠ±è´¹å¾ˆå¤šå†…å­˜ã€‚</li></ul><hr><p>ä¸€ä¸ªè§£å†³ä¸Šé¢çš„åŠæ³•å°±æ˜¯ï¼Œå°†è¿™äº›å¸¸é‡è®¾ä¸º<strong>â€œå¤–éƒ¨å˜é‡(external variables)â€</strong>ã€‚</p><blockquote><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†å˜é‡åªåˆå§‹åŒ–ä¸€æ¬¡å°±å¯ä»¥åœ¨æ•´ä¸ªç¨‹åºä¸­ä½¿ç”¨ã€‚</p></blockquote><p><code>constants.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> constants</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//actual global variables</span></span><br><span class="line">    <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">double</span> pi &#123;<span class="number">3.14159</span>&#125;;</span><br><span class="line">    <span class="keyword">extern</span> <span class="keyword">const</span> my_gravity &#123;<span class="number">9.2</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨<code>constants.cpp</code>æ–‡ä»¶ä¸­å®šä¹‰è¿™äº›å¸¸é‡ï¼Œæ¥ç¡®ä¿å®ƒä»¬åªè¢«å®šä¹‰ä¸€æ¬¡ï¼›</p></blockquote><p><code>constants.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CONSTANTS_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONSTANTS_H</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> constants</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// since the actual variables are inside a namespace, the forward declarations need to be inside a namespace as well</span></span><br><span class="line">    <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">double</span> pi;</span><br><span class="line">    <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">double</span> avogadro;</span><br><span class="line">    <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">double</span> my_gravity;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><blockquote><p>éœ€è¦åœ¨å¤´æ–‡ä»¶<code>constants.h</code>ä¸­å¯¹è¿™äº›å¸¸é‡è¿›è¡Œ æå‰å£°æ˜</p></blockquote><p><code>main.cpp</code></p><blockquote><p>ä½¿ç”¨çš„æ–¹æ³•ä¸å˜</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"constants.h"</span> <span class="comment">// include all the forward declarations</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter a radius: "</span>;</span><br><span class="line">    <span class="keyword">int</span> radius&#123;&#125;;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; radius;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"The circumference is: "</span> &lt;&lt; <span class="number">2</span> * radius * constants::pi;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><blockquote><p>å› ä¸ºå…¨å±€ç¬¦å·å¸¸é‡åœ¨å‘½åç©ºé—´ä¸­(ä¸ºäº†é¿å…ä¸å…¨å±€å‘½åç©ºé—´ä¸­çš„æ ‡è¯†ç¬¦å‘ç”Ÿ å‘½åå†²çª)ï¼Œæ‰€ä»¥ï¼Œå°±ä¸éœ€è¦åœ¨å®ƒåå­—ä¸­ä½¿ç”¨<code>g_</code>å‰ç¼€</p></blockquote><p>ç°åœ¨ï¼Œè¿™äº›ç¬¦å·å¸¸é‡åªç”¨åœ¨<code>constants.cpp</code>ä¸­å®ä¾‹åŒ–ä¸€æ¬¡(è€Œä¸æ˜¯æ¯æ¬¡constants.hè¢«<code>#include</code>ä¸­éƒ½è¢«å®ä¾‹åŒ–ä¸€æ¬¡)ï¼Œæ‰€ä»¥ï¼Œå¯¹constants.cppæ‰€åšçš„ä»»ä½•ä¿®æ”¹éƒ½åªéœ€è¦é‡æ–°ç¼–è¯‘constants.cppå³å¯ã€‚</p><p>ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•ä¹Ÿæœ‰å‡ ä¸ªç¼ºç‚¹ã€‚</p><ul><li><strong>é¦–å…ˆï¼Œè¿™äº›å¸¸é‡ç°åœ¨åªåœ¨å®é™…å®šä¹‰å®ƒä»¬çš„æ–‡ä»¶(constants.cpp)ä¸­è¢«è®¤ä¸ºæ˜¯ ç¼–è¯‘æ—¶å¸¸é‡</strong>ï¼Œ<strong>è€Œä¸æ˜¯åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨å®ƒä»¬</strong>ã€‚è¿™æ„å‘³ç€åœ¨constants.cppä¹‹å¤–çš„åœ°æ–¹ï¼Œå®ƒä»¬ä¸èƒ½åœ¨ä»»ä½•éœ€è¦ç¼–è¯‘æ—¶å¸¸é‡çš„åœ°æ–¹ä½¿ç”¨ã€‚</li><li>å…¶æ¬¡ï¼Œç¼–è¯‘å™¨å¯èƒ½æ— æ³•å¯¹å®ƒä»¬è¿›è¡Œå°½å¯èƒ½å¤šçš„ä¼˜åŒ–ã€‚</li></ul><hr><h3 id="å…¨å±€å¸¸é‡ä½œä¸ºå†…è”å˜é‡"><a href="#å…¨å±€å¸¸é‡ä½œä¸ºå†…è”å˜é‡" class="headerlink" title="å…¨å±€å¸¸é‡ä½œä¸ºå†…è”å˜é‡"></a>å…¨å±€å¸¸é‡ä½œä¸ºå†…è”å˜é‡</h3><p>åœ¨C++17ä¸­ï¼Œæœ‰ä¸€ä¸ªæ–°æ¦‚å¿µå«åšï¼š<strong><em>inline variable</em>(å†…è”å˜é‡)</strong></p><blockquote><p><strong>inline</strong>æ„ä¸ºï¼šå…è®¸å¤šä¸ªå®šä¹‰ã€‚</p></blockquote><p>æ‰€ä»¥ï¼Œä¸€ä¸ªå†…è”å˜é‡å°±å¯ä»¥åœ¨å¤šä¸ªæ–‡ä»¶ä¸­è¢«å¤šæ¬¡å®šä¹‰ã€‚(è¿™å¹¶ä¸è¿èƒŒ <strong>å•å®šä¹‰è§„åˆ™</strong>)</p><blockquote><p><strong>å†…è”å…¨å±€å˜é‡</strong> é»˜è®¤æ˜¯ <strong>å¤–éƒ¨è¿æ¥</strong></p></blockquote><hr><p>å†…è”å˜é‡æœ‰ä¸¤ä¸ªé‡è¦çš„é™åˆ¶ï¼Œå¿…é¡»éµå®ˆï¼š</p><ul><li>å†…è”å˜é‡çš„æ‰€æœ‰å®šä¹‰å¿…é¡»ç›¸åŒï¼ˆå¦åˆ™ï¼Œå°†äº§ç”Ÿæœªå®šä¹‰çš„è¡Œä¸ºï¼‰ï¼›</li><li>å†…æ•›å˜é‡çš„å®šä¹‰(ä¸æ˜¯æå‰å£°æ˜)å¿…é¡»å‡ºç°åœ¨æ¯ä¸€ä¸ªä½¿ç”¨è¿™äº›å˜é‡çš„æ–‡ä»¶ä¸­ã€‚</li></ul><blockquote><p>ç¼–è¯‘å™¨å°†ä¼šæŠŠå†…è”å˜é‡çš„æ‰€æœ‰å®šä¹‰åˆå¹¶ä¸ºä¸€ä¸ªå˜é‡çš„å®šä¹‰ã€‚è¿™å°±å…è®¸æˆ‘ä»¬åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰å˜é‡ï¼Œå¹¶å°†å®ƒä»¬å½“ä½œ<code>a.cpp</code>æ–‡ä»¶ä¸­åªæœ‰ä¸€ä¸ªå®šä¹‰ã€‚</p><p>è¿™äº›å˜é‡åœ¨å®ƒä»¬è¢«åŒ…å«çš„æ–‡ä»¶ä¸­ï¼Œä¾ç„¶ä¿æŒè¿™ constexpr çš„æ€§è´¨</p></blockquote><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰å…¨å±€å˜é‡ï¼Œè€Œä¸ç”¨æ‹…å¿ƒé‡å¤å˜é‡:</p><p><code>constants.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> CONSTANTS_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> CONSTANTS_H</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// define your own namespace to hold constants</span></span><br><span class="line"><span class="keyword">namespace</span> constants</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">inline</span> <span class="keyword">constexpr</span> <span class="keyword">double</span> pi &#123; <span class="number">3.14159</span> &#125;; <span class="comment">// note: now inline constexpr</span></span><br><span class="line">    <span class="keyword">inline</span> <span class="keyword">constexpr</span> <span class="keyword">double</span> avogadro &#123; <span class="number">6.0221413e23</span> &#125;;</span><br><span class="line">    <span class="keyword">inline</span> <span class="keyword">constexpr</span> <span class="keyword">double</span> my_gravity &#123; <span class="number">9.2</span> &#125;; <span class="comment">// m/s^2 -- gravity is light on this planet</span></span><br><span class="line">    <span class="comment">// ... other related constants</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><p><code>main.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"constants.h"</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter a radius: "</span>;</span><br><span class="line">    <span class="keyword">int</span> radius&#123;&#125;;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; radius;</span><br><span class="line"> </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"The circumference is: "</span> &lt;&lt; <span class="number">2</span> * radius * constants::pi;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æˆ‘ä»¬å¯ä»¥åœ¨å°½å¯èƒ½å¤šçš„ä»£ç æ–‡ä»¶ä¸­åŒ…å«<code>constants.h</code>ï¼Œä½†æ˜¯è¿™äº›å˜é‡åªä¼šè¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œå¹¶åœ¨æ‰€æœ‰ä»£ç æ–‡ä»¶ä¸­å…±äº«ã€‚</p></blockquote><hr><p>å¦‚æœä½ éœ€è¦å…¨å±€å¸¸é‡ï¼Œå¹¶ä¸”ä½ çš„ç¼–è¯‘å™¨æ”¯æŒC++17ï¼Œé‚£å»ºè®®æœ€å¥½ä½¿ç”¨ <strong>å†…è”å˜é‡</strong></p><hr><h2 id="6-9-éå¸¸é‡çš„å…¨å±€å˜é‡evil"><a href="#6-9-éå¸¸é‡çš„å…¨å±€å˜é‡evil" class="headerlink" title="6.9 éå¸¸é‡çš„å…¨å±€å˜é‡evil"></a>6.9 éå¸¸é‡çš„å…¨å±€å˜é‡evil</h2><p>æœ€å¤§çš„é—®é¢˜å°±æ˜¯ï¼š<strong>å½“ä½ ä½¿ç”¨å…¨å±€å˜é‡(not-const)æ—¶ï¼Œå®ƒå¯èƒ½åœ¨ä»»ä½•åœ°æ–¹å°±è¢«ä¿®æ”¹ï¼Œä½†æ˜¯ä½ å´ä¸èƒ½è½»æ¾çš„ç›´åˆ°åœ¨å“ªè¢«æ”¹çš„ã€‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> g_mode; <span class="comment">//å£°æ˜å…¨å±€å˜é‡(å°†é»˜è®¤è¢«åˆå§‹åŒ–ä¸º0)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dosomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    g_mode = <span class="number">2</span>; <span class="comment">//è¿™é‡Œä¿®æ”¹å…¨å±€å˜é‡g_modeä¸º2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    g_mode =<span class="number">1</span>; <span class="comment">//note:è¿™å°†å…¨å±€g_modeå˜é‡è®¾ç½®ä¸º1ã€‚è€Œä¸æ˜¯å£°æ˜ä¸€ä¸ªæœ¬åœ°g_modeå˜é‡!</span></span><br><span class="line">    dosomething();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç¨‹åºçŒ¿å¸Œæœ›è¿™é‡Œè¾“å‡ºçš„g_modeçš„å€¼æ˜¯1ï¼Œä½†æ˜¯å®é™…ä¸Šå®ƒçš„å€¼æ˜¯2</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(g_mode == <span class="number">1</span>)</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt;<span class="string">"no threat detected.\n"</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"lanunching nuclear missiles...\n"</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>å±€éƒ¨å˜é‡è¦å®‰å…¨å¾—å¤šï¼Œå› ä¸ºå…¶ä»–å‡½æ•°ä¸èƒ½ç›´æ¥å½±å“å®ƒä»¬ã€‚</strong></p></blockquote><hr><h3 id="ä¿æŠ¤ä½ çš„å…¨å±€å˜é‡"><a href="#ä¿æŠ¤ä½ çš„å…¨å±€å˜é‡" class="headerlink" title="ä¿æŠ¤ä½ çš„å…¨å±€å˜é‡"></a>ä¿æŠ¤ä½ çš„å…¨å±€å˜é‡</h3><p>å¦‚æœä½ éè¦ä½¿ç”¨å…¨å±€å˜é‡ï¼š</p><ul><li><strong>é‚£æˆ‘ä»¬å¯ä»¥å¯¹å˜é‡åä½¿ç”¨å‰ç¼€â€g_â€æˆ–â€œgâ€ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬è¯†åˆ«å®ƒæ˜¯å…¨å±€å˜é‡ã€‚</strong></li><li>æœ€å¥½ä¹Ÿå°†å…¶<strong>æ”¾åœ¨ä½ è‡ªå·±åˆ›å»ºçš„å‘½åç©ºé—´ï¼Œä»è€Œé¿å…ä¸€äº›å‘½åå†²çªã€‚</strong></li></ul><hr><h2 id="6-10-é™æ€å±€éƒ¨å˜é‡"><a href="#6-10-é™æ€å±€éƒ¨å˜é‡" class="headerlink" title="6.10 é™æ€å±€éƒ¨å˜é‡"></a>6.10 é™æ€å±€éƒ¨å˜é‡</h2><p>æœ¯è¯­<code>static</code>æ˜¯c++è¯­è¨€ä¸­æœ€å®¹æ˜“æ··æ·†çš„æœ¯è¯­ä¹‹ä¸€ï¼Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å› ä¸ºé™æ€åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­æœ‰ä¸åŒçš„å«ä¹‰ã€‚</p><p>åœ¨ä¹‹å‰çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†<strong>å…¨å±€å˜é‡å…·æœ‰é™æ€æŒç»­æ—¶é—´</strong>ï¼Œ<strong>è¿™æ„å‘³ç€å®ƒä»¬åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºï¼Œåœ¨ç¨‹åºç»“æŸæ—¶é”€æ¯ã€‚</strong></p><p>æˆ‘ä»¬è¿˜è®¨è®ºäº†<strong><code>static</code>å…³é”®å­—å¦‚ä½•æä¾›å…¨å±€æ ‡è¯†ç¬¦å†…éƒ¨é“¾æ¥</strong>ï¼Œ<strong>è¿™æ„å‘³ç€æ ‡è¯†ç¬¦åªèƒ½åœ¨å®šä¹‰å®ƒçš„æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚</strong></p><hr><p>æˆ‘ä»¬å°†æ¢è®¨<strong>åº”ç”¨äºå±€éƒ¨å˜é‡æ—¶é™æ€å…³é”®å­—çš„ç”¨æ³•</strong>ã€‚</p><p>åœ¨ <a href="https://www.learncpp.com/cpp-tutorial/introduction-to-local-scope/" target="_blank" rel="noopener">2.4 â€“ Introduction to local scope</a>, æ‚¨äº†è§£åˆ°ï¼Œé»˜è®¤æƒ…å†µä¸‹ å±€éƒ¨å˜é‡å…·æœ‰ <em>è‡ªåŠ¨æŒç»­æ—¶é—´</em>ï¼Œ<strong>è¿™æ„å‘³ç€å®ƒä»¬æ˜¯åœ¨å®šä¹‰æ—¶åˆ›å»ºçš„ï¼Œå¹¶åœ¨å—é€€å‡ºæ—¶é”€æ¯ã€‚</strong></p><blockquote><p>ä½†<strong>å…³é”®å­—<code>static</code></strong>ï¼Œå¯ä»¥å°†<strong><em>è‡ªåŠ¨æŒç»­æ—¶é—´(attomatic duration)</em></strong>è½¬å˜æˆ <strong><em>é™æ€æŒç»­æ—¶é—´(static duration)</em></strong> ã€‚ä»è€Œï¼Œé™æ€å˜é‡å³ä½¿å·²ç»è¶…å‡ºå®ƒæ‰€åœ¨çš„èŒƒå›´æ—¶ï¼Œä»–ä¾ç„¶æ²¡æœ‰è¢«é”€æ¯ã€‚</p><blockquote><p>è¿™æ„å‘³ç€å˜é‡ç°åœ¨åœ¨ç¨‹åºå¼€å§‹æ—¶åˆ›å»ºï¼Œå¹¶åœ¨ç¨‹åºç»“æŸæ—¶é”€æ¯(å°±åƒå…¨å±€å˜é‡ä¸€æ ·)ã€‚</p></blockquote></blockquote><p>ä¾‹å¦‚ï¼š</p><p><em>é»˜è®¤æ˜¯ automatic duration</em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">incrementAndPrint</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> value&#123; <span class="number">1</span> &#125;; <span class="comment">// é»˜è®¤æ˜¯ automatic duration</span></span><br><span class="line">    ++value;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; value &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">&#125; <span class="comment">// value is destroyed here</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    incrementAndPrint();</span><br><span class="line">    incrementAndPrint();</span><br><span class="line">    incrementAndPrint();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********ç»“æœ**********/</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>æ¯æ¬¡</strong>è°ƒç”¨å‡½æ•°<code>incrementAndPrint()</code>æ—¶ï¼Œéƒ½å°†ç©¿ä»¶ä¸€ä¸ªå«valueçš„å˜é‡ï¼Œå®ƒè¢«åˆå§‹åŒ–ä¸º1</p></blockquote><hr><p>ç°åœ¨ä½¿ç”¨<code>static</code>å…³é”®å­—ï¼Œå°†é»˜è®¤çš„ <em>atuomatic duration</em> è½¬å˜ä¸º <em>static duration</em></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">incrementAndPrint</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> s_value&#123; <span class="number">1</span> &#125;; <span class="comment">// ç”±äºä½¿ç”¨å…³é”®å­— static,æ‰€ä»¥ç°åœ¨æ˜¯ static durationã€‚  æ‰€ä»¥è¿™ä¸ªå˜é‡å°†åªä¼šè¢«åˆå§‹åŒ–ä¸€æ¬¡ï¼ˆä¸ä¼šåƒä¸Šé¢é‚£ä¸ªä¾‹å­ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¢«é™¤åˆå§‹åŒ–ï¼‰</span></span><br><span class="line">    ++s_value;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; s_value &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line">&#125; <span class="comment">// s_value is not destroyed here, but becomes inaccessible because it goes out of scope</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    incrementAndPrint();</span><br><span class="line">    incrementAndPrint();</span><br><span class="line">    incrementAndPrint();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/****ç»“æœ****/</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure><blockquote><p>åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œ<strong>å› ä¸ºs_valueè¢«å£°æ˜ä¸ºé™æ€çš„</strong>ï¼Œ<u><strong>æ‰€ä»¥s_valueåªåˆ›å»ºä¸€æ¬¡(åœ¨ç¨‹åºå¯åŠ¨æ—¶)(å¹¶ä¸”åˆå§‹åŒ–ä¸ºé›¶)ã€‚</strong></u>ç„¶ååœ¨ç¬¬ä¸€æ¬¡é‡åˆ°å˜é‡å®šä¹‰æ—¶ä½¿ç”¨æˆ‘ä»¬æä¾›çš„åˆå§‹åŒ–å€¼(1)åˆå§‹åŒ–å˜é‡(ä½†åœ¨åç»­è°ƒç”¨æ—¶ä¸ä¼šé‡æ–°åˆå§‹åŒ–)ã€‚</p></blockquote><blockquote><p>å°±åƒæˆ‘ä»¬ä½¿ç”¨â€œg_â€ ä½œä¸ºå…¨å±€å˜é‡çš„å‰ç¼€ä¸€æ ·ï¼Œä½¿ç”¨ â€œ s_â€ä½œä¸ºé™æ€(é™æ€æŒç»­æ—¶é—´)å±€éƒ¨å˜é‡çš„å‰ç¼€ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ã€‚</p></blockquote><hr><p><strong>é™æ€å˜é‡æä¾›äº†å…¨å±€å˜é‡çš„ä¸€äº›å¥½å¤„(å®ƒä»¬ç›´åˆ°ç¨‹åºç»“æŸæ—¶æ‰è¢«é”€æ¯)</strong>ï¼ŒåŒæ—¶ï¼Œé™åˆ¶ä¸ºå®ƒä»¬åªåœ¨å®ƒè‡ªå·±çš„å—ä¸­æ‰èƒ½è¢«çœ‹è§ï¼Œè¿™ä½¿å¾—å³ä½¿æ‚¨ç»å¸¸æ›´æ”¹å®ƒä»¬çš„å€¼ï¼Œè¿™ä¹Ÿä½¿å®ƒä»¬å¯ä»¥å®‰å…¨ä½¿ç”¨ã€‚</p><hr><h3 id="å…¨å±€ã€å±€éƒ¨å˜é‡ä½¿ç”¨static"><a href="#å…¨å±€ã€å±€éƒ¨å˜é‡ä½¿ç”¨static" class="headerlink" title="å…¨å±€ã€å±€éƒ¨å˜é‡ä½¿ç”¨static"></a>å…¨å±€ã€å±€éƒ¨å˜é‡ä½¿ç”¨<code>static</code></h3><p>å…¨å±€å˜é‡ä½¿ç”¨å…³é”®å­—<code>static</code>ï¼šè¿™ä¼šä½¿å¾—å…¨å±€å˜é‡å˜ä¸º <strong><em>internal linkage(å†…éƒ¨è¿æ¥)</em></strong>ï¼Œå³ï¼Œä½¿å¾—è¯¥å˜é‡ä¸èƒ½å†å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚</p><p>å±€éƒ¨å˜é‡ä½¿ç”¨å…³é”®å­—<code>statci</code>ï¼šè¿™ä½¿å¾—å±€éƒ¨å˜é‡å˜ä¸º <strong><em>static duration(é™æ€æŒç»­æ—¶é—´)</em></strong>,å³ï¼Œä½¿å¾—è¯¥å˜é‡å°† åªè¢«åˆ›å»ºä¸€æ¬¡ï¼Œè€Œä¸”ç›´åˆ°ç¨‹åºç»“æŸæ‰ä¼šè¢«é”€æ¯ã€‚</p><hr><h2 id="6-11-æ€»ç»“scope-duration-linkage"><a href="#6-11-æ€»ç»“scope-duration-linkage" class="headerlink" title="6.11 æ€»ç»“scope/duration/linkage"></a>6.11 æ€»ç»“scope/duration/linkage</h2><h3 id="æ€»ç»“scope"><a href="#æ€»ç»“scope" class="headerlink" title="æ€»ç»“scope"></a>æ€»ç»“scope</h3><p>æ ‡è¯†ç¬¦çš„èŒƒå›´å†³å®šäº†å®ƒèƒ½å¤Ÿè¢«è®¿é—®çš„åŒºé—´ï¼š</p><ul><li>å…·æœ‰ <strong>block scope(å—èŒƒå›´)</strong> / <strong>local scope(å±€éƒ¨èŒƒå›´)</strong> çš„å˜é‡ åªèƒ½åœ¨å®ƒä»¬è¢«å£°æ˜çš„å—ä¸­(åŒ…æ‹¬åµŒå¥—å—)è¢«è®¿é—®ï¼Œè¿™äº›æœ‰ï¼š<ul><li>å±€éƒ¨å˜é‡ï¼›</li><li>å‡½æ•°çš„å½¢å‚ï¼›</li><li>åœ¨å—ä¸­å£°æ˜çš„ç”¨æˆ·å®šä¹‰ç±»å‹å®šä¹‰ï¼ˆå¦‚ï¼Œæšä¸¾(enum)ã€ç±»(class)ï¼‰;</li></ul></li><li>å…·æœ‰ <strong>global scope(å…¨å±€èŒƒå›´)</strong> / <strong>file scope(æ–‡ä»¶èŒƒå›´)</strong>çš„å˜é‡ å¯ä»¥å†æ–‡ä»¶ä¸­çš„ä»»ä½•åœ°æ–¹è¢«è®¿é—®ï¼Œè¿™äº›æœ‰ï¼š<ul><li>å…¨å±€å˜é‡ï¼›</li><li>å‡½æ•°ï¼›</li><li>åœ¨å‘½ åç©ºé—´å†… æˆ– å…¨å±€èŒƒå›´ å†…å£°æ˜çš„ç”¨æˆ·å®šä¹‰ç±»å‹å®šä¹‰(å¦‚æšä¸¾(enum)ã€ç±»(class))</li></ul></li></ul><hr><h3 id="æ€»ç»“duration"><a href="#æ€»ç»“duration" class="headerlink" title="æ€»ç»“duration"></a>æ€»ç»“duration</h3><p>å˜é‡çš„æŒç»­æ—¶é—´å†³å®šäº†å®ƒä»¬ä½•æ—¶è¢«åˆ›å»ºä¸é”€æ¯ï¼š</p><ul><li>å…·æœ‰ <strong>automatic duration(è‡ªåŠ¨æŒç»­æ—¶é—´)</strong>çš„å˜é‡ åœ¨å®šä¹‰æ—¶è¢«åˆ›å»ºï¼Œåœ¨ç¦»å¼€å®ƒæ‰€åœ¨çš„å—æ—¶è¢«é”€æ¯ï¼Œè¿™äº›æœ‰ï¼š<ul><li>å±€éƒ¨å˜é‡ï¼›</li><li>å‡½æ•°çš„å½¢å‚ï¼›</li></ul></li><li>å…·æœ‰ <strong>static duration(é™æ€æŒç»­æ—¶é—´)</strong>çš„å˜é‡ åœ¨ç¨‹åºå¼€å§‹æ—¶è¢«åˆ›å»ºï¼Œ åœ¨ç¨‹åºç»“æŸæ—¶è¢«é”€æ¯ã€‚è¿™äº›æœ‰ï¼š<ul><li>å…¨å±€å˜é‡ï¼›</li><li>é™æ€å±€éƒ¨å˜é‡ï¼›</li></ul></li><li>å…·æœ‰ <strong>dynamic duration(åŠ¨æ€æŒç»­æ—¶é—´)</strong>çš„å˜é‡ ç”±ç¨‹åºå‘˜è¯·æ±‚åˆ›å»ºå’Œé”€æ¯ã€‚è¿™äº›æœ‰ï¼š<ul><li>åŠ¨æ€åˆ†é…çš„å˜é‡ï¼›</li></ul></li></ul><hr><h3 id="æ€»ç»“linkage"><a href="#æ€»ç»“linkage" class="headerlink" title="æ€»ç»“linkage"></a>æ€»ç»“linkage</h3><p>æ ‡è¯†ç¬¦çš„ <strong><em>linkage</em>(è¿æ¥)</strong> å†³å®šäº† ä¸€ä¸ªæ ‡è¯†ç¬¦çš„å¤šä¸ªå®ä¾‹æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚</p><ul><li>æ ‡è¯†ç¬¦ æ²¡æœ‰ è¿æ¥ æ—¶ï¼Œæ„å‘³ç€è¿™ä¸ªæ ‡è¯†ç¬¦ä»…æŒ‡å…¶è‡ªèº«ã€‚è¿™äº›æœ‰ï¼š<ul><li>å±€éƒ¨å˜é‡ï¼›</li><li>åœ¨å—ä¸­å£°æ˜çš„ç”¨æˆ·å®šä¹‰ç±»å‹å®šä¹‰(å¦‚æšä¸¾å’Œç±»)ï¼›</li></ul></li><li>å…·æœ‰ <strong><em>intrnal linkage</em>(å†…éƒ¨è¿æ¥)</strong> çš„æ ‡è¯†ç¬¦ åªèƒ½åœ¨å®ƒæ‰€å£°æ˜çš„æ–‡ä»¶ä¸­ è¢«è®¿é—®ã€‚è¿™äº›æœ‰ï¼š<ul><li>é™æ€å…¨å±€å˜é‡(static global variables) [åˆå§‹åŒ– æˆ– æœªåˆå§‹åŒ– ]ï¼›</li><li>é™æ€å‡½æ•°ï¼ˆstatic functionsï¼‰;</li><li>åœ¨æœªå‘½åçš„å‘½åç©ºé—´ä¸­å£°æ˜çš„å‡½æ•°ï¼›</li><li>åœ¨æœªå‘½åçš„å‘½åç©ºé—´ä¸­å£°æ˜çš„ç”¨æˆ·å®šä¹‰ç±»å‹å®šä¹‰(å¦‚æšä¸¾å’Œç±»)ï¼›</li></ul></li><li>å…·æœ‰ <strong><em>external linkage(å¤–éƒ¨è¿æ¥)</em></strong> çš„æ ‡è¯†ç¬¦ å¯ä»¥åœ¨ åœ¨å£°æ˜çš„æ–‡ä»¶å†…çš„ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œä¹Ÿå¯ä»¥å…¶ä»–æ–‡ä»¶(é€šè¿‡æå‰å£°æ˜)è¿›è¡Œè®¿é—®ã€‚è¿™åŒ…æ‹¬:<ul><li>å‡½æ•°ï¼›</li><li>éå¸¸é‡çš„å…¨å±€å˜é‡(åˆå§‹åŒ– æˆ– æœªåˆå§‹åŒ–)ï¼›</li><li>å¤–éƒ¨å¸¸é‡å…¨å±€å˜é‡ï¼›</li><li>å†…è”å¸¸é‡å…¨å±€å˜é‡ï¼›</li><li>åœ¨ å‘½åç©ºé—´å†… æˆ– å…¨å±€èŒƒå›´å†…å£°æ˜çš„ç”¨æˆ·å®šä¹‰ç±»å‹å®šä¹‰(å¦‚æšä¸¾å’Œç±»)ï¼›</li></ul></li></ul><hr><blockquote><p>NOTE:</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ å‡½æ•°æ˜¯ å¤–éƒ¨è¿æ¥ï¼›å®ƒå¯é€šè¿‡ä½¿ç”¨å…³é”®å­—<code>static</code>å˜æˆ å†…éƒ¨è¿æ¥ã€‚</p></blockquote><hr><h3 id="å˜é‡çš„-scope-duratio-linkage"><a href="#å˜é‡çš„-scope-duratio-linkage" class="headerlink" title="å˜é‡çš„ scope/duratio /linkage"></a>å˜é‡çš„ scope/duratio /linkage</h3><table><thead><tr><th align="left">Type</th><th align="left">Example</th><th align="left">Scope</th><th align="left">Duration</th><th align="left">Linkage</th><th align="left">Notes</th></tr></thead><tbody><tr><td align="left">Local variable</td><td align="left">int x;</td><td align="left">Block</td><td align="left">Automatic</td><td align="left">None</td><td align="left"></td></tr><tr><td align="left">Static local variable</td><td align="left">static int s_x;</td><td align="left">Block</td><td align="left">Static</td><td align="left">None</td><td align="left"></td></tr><tr><td align="left">Dynamic variable</td><td align="left">int *x { new int };</td><td align="left">Block</td><td align="left">Dynamic</td><td align="left">None</td><td align="left"></td></tr><tr><td align="left">Function parameter</td><td align="left">void foo(int x)</td><td align="left">Block</td><td align="left">Automatic</td><td align="left">None</td><td align="left"></td></tr><tr><td align="left">External non-constant global variable</td><td align="left">int g_x;</td><td align="left">File</td><td align="left">Static</td><td align="left">External</td><td align="left">Initialized or uninitialized</td></tr><tr><td align="left">Internal non-constant global variable</td><td align="left">static int g_x;</td><td align="left">File</td><td align="left">Static</td><td align="left">Internal</td><td align="left">Initialized or uninitialized</td></tr><tr><td align="left">Internal constant global variable</td><td align="left">constexpr int g_x { 1 };</td><td align="left">File</td><td align="left">Static</td><td align="left">Internal</td><td align="left">Const or constexpr, Must be initialized</td></tr><tr><td align="left">External constant global variable</td><td align="left">extern constexpr int g_x { 1 };</td><td align="left">File</td><td align="left">Static</td><td align="left">External</td><td align="left">Const or constexpr, Must be initialized</td></tr><tr><td align="left">Inline constant global variable</td><td align="left">inline constexpr int g_x { 1 };</td><td align="left">File</td><td align="left">Static</td><td align="left">External</td><td align="left">Const or constexpr, Must be initialized</td></tr></tbody></table><hr><h3 id="æ€»ç»“æå‰å£°æ˜"><a href="#æ€»ç»“æå‰å£°æ˜" class="headerlink" title="æ€»ç»“æå‰å£°æ˜"></a>æ€»ç»“æå‰å£°æ˜</h3><p>ä½ å¯ä»¥åœ¨å…¶ä»–æ–‡ä»¶ä¸­å¯¹ä¸€ä¸ª å‡½æ•°/å˜é‡ è¿›è¡Œæå‰å£°æ˜ï¼š</p><table><thead><tr><th align="left">Type</th><th align="left">Example</th><th align="left">Notes</th></tr></thead><tbody><tr><td align="left">Function forward declaration</td><td align="left">void foo(int x);</td><td align="left">Prototype only, no function body</td></tr><tr><td align="left">Non-constant global variable forward declaration</td><td align="left">extern int g_x;</td><td align="left">Must be uninitialized</td></tr><tr><td align="left">Const global variable forward declaration</td><td align="left">extern const int g_x;</td><td align="left">Must be uninitialized</td></tr><tr><td align="left">Constexpr global variable forward declaration</td><td align="left">extern constexpr int g_x;</td><td align="left"><u>Not allowed, constexpr cannot be forward declared</u></td></tr></tbody></table><hr><h3 id="ä»€ä¹ˆæ˜¯å­˜å‚¨ç±»è¯´æ˜ç¬¦"><a href="#ä»€ä¹ˆæ˜¯å­˜å‚¨ç±»è¯´æ˜ç¬¦" class="headerlink" title="ä»€ä¹ˆæ˜¯å­˜å‚¨ç±»è¯´æ˜ç¬¦?"></a>ä»€ä¹ˆæ˜¯å­˜å‚¨ç±»è¯´æ˜ç¬¦?</h3><p>å½“å…³é”®å­—<code>static</code> ã€<code>extern</code>ç”¨ä½œæ ‡è¯†ç¬¦å£°æ˜çš„ä¸€éƒ¨åˆ†æ—¶,å®ƒä»¬å°±è¢«ç§°ä¸ºï¼š<strong>storage class specifierï¼ˆå­˜å‚¨ç±»è¯´æ˜ç¬¦ï¼‰</strong>ã€‚å®ƒä»¬è®¾ç½®æ ‡è¯†ç¬¦çš„å­˜å‚¨çš„ <em>duration</em> å’Œ <em>linkage</em></p><p>C++æ”¯æŒ4ä¸­å­˜å‚¨ç±»è¯´æ˜ç¬¦ï¼š</p><table><thead><tr><th align="left">Specifier</th><th align="left">Meaning</th><th align="left">Note</th></tr></thead><tbody><tr><td align="left">extern</td><td align="left">static (or thread_local) storage duration and external linkage</td><td align="left"></td></tr><tr><td align="left">static</td><td align="left">static (or thread_local) storage duration and internal linkage</td><td align="left"></td></tr><tr><td align="left">thread_local</td><td align="left">thread storage duration</td><td align="left">Introduced in C++11</td></tr><tr><td align="left">mutable</td><td align="left">object allowed to be modified even if containing class is const</td><td align="left"></td></tr><tr><td align="left">auto</td><td align="left">automatic storage duration</td><td align="left">Deprecated in C++11</td></tr><tr><td align="left">register</td><td align="left">automatic storage duration and hint to the compiler to place in a register</td><td align="left">Deprecated in C++17</td></tr></tbody></table><blockquote><p>æœ¯è¯­ <em>storage class specifier</em> é€šå¸¸åªåœ¨æ­£å¼æ–‡æ¡£ä¸­ä½¿ç”¨ã€‚</p></blockquote><hr><h2 id="6-12-using-è¯­å¥"><a href="#6-12-using-è¯­å¥" class="headerlink" title="6.12 using è¯­å¥"></a>6.12 using è¯­å¥</h2><p>å¦‚æœä½ ç»å¸¸ä½¿ç”¨æ ‡å‡†åº“ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„æ‰€æœ‰å†…å®¹ä¹‹å‰è¾“å…¥std::ä¼šå˜å¾—é‡å¤ã€‚C++æä¾›äº†ä¸€ç§å¯é€‰æ‹©çš„åŠæ³•ï¼Œå«åšï¼š<strong><em>using statements</em></strong></p><h3 id="usingçš„å£°æ˜"><a href="#usingçš„å£°æ˜" class="headerlink" title="usingçš„å£°æ˜"></a>usingçš„å£°æ˜</h3><p>ä¸€ç§ç®€åŒ–çš„æ–¹æ³•æ˜¯ä½¿ç”¨usingå£°æ˜è¯­å¥ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>; <span class="comment">// this using declaration tells the compiler that cout should resolve to std::cout</span></span><br><span class="line">   <span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello world!"</span>; <span class="comment">// so no std:: prefix is needed here!</span></span><br><span class="line"> </span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="comment">// the using declaration expires here</span></span><br></pre></td></tr></table></figure><blockquote><p>using çš„å£°æ˜ï¼š<code>using std::cout</code>å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬å°†è¦ä½¿ç”¨ å‘½åç©ºé—´std ä¸­çš„<code>cout</code>ã€‚æ‰€ä»¥å½“ç¼–è¯‘å™¨çœ‹åˆ°coutæ—¶ï¼Œå®ƒä¼šå‡è®¾æˆ‘ä»¬æŒ‡çš„æ˜¯std::coutã€‚</p><p>å¦‚æœstd::coutä¸coutçš„å…¶ä»–ä¸€äº›ä½¿ç”¨ä¹‹é—´å­˜åœ¨å‘½åå†²çªï¼Œåˆ™é¦–é€‰std::coutã€‚</p></blockquote><p>ä¸Šé¢çš„ä¾‹å­ï¼Œçœ‹èµ·æ¥ä¼¼ä¹æ²¡æœ‰ç®€åŒ–å¤šå°‘ã€‚ä½†å¦‚æœæˆ‘ä»¬è¦å¤šæ¬¡ä½¿ç”¨<code>cout</code>æ—¶ï¼Œä½¿ç”¨ <code>using statements</code>å°±å¯ä»¥ç®€åŒ–å¾ˆå¤šã€‚</p><blockquote><p>æ³¨æ„ï¼Œå¦‚æœä½ å¤šæ¬¡ä½¿ç”¨<code>std::cout</code>å’Œ<code>std::cin</code>çš„è¯ï¼Œä½ éœ€è¦å¯¹ä»–ä»¬ä¸¤ä¸ªåˆ†åˆ«ä½¿ç”¨<code>using statements</code></p></blockquote><hr><h3 id="using-æŒ‡ä»¤"><a href="#using-æŒ‡ä»¤" class="headerlink" title="using æŒ‡ä»¤"></a>using æŒ‡ä»¤</h3><p>å¦ä¸€ç§æ–¹æ³•å°±æ˜¯ä½¿ç”¨ï¼š<code>using directive</code>è¯­å¥ã€‚å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>; <span class="comment">//è¿™ä¸ªusingæŒ‡ä»¤ å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ å‘½åç©ºé—´std ä¸­çš„ä»»ä½•ä¸œè¥¿</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"hello world!"</span>; <span class="comment">// æ‰€ä»¥ï¼Œå‰ç¼€ std:: å°±å¯ä»¥çœç•¥</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªusing æŒ‡ä»¤ ï¼š<code>using namespace std</code>å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬æƒ³ä½¿ç”¨ å‘½åç©ºé—´std ä¸­çš„ä»»ä½•ä¸œè¥¿ã€‚æ‰€ä»¥å½“ç¼–è¯‘å™¨å‘ç°äº†ä¸€ä¸ªåå­—å®ƒä¸è®¤è¯†æ—¶ï¼Œå®ƒå°±ä¼šæ£€æŸ¥ å‘½åç©ºé—´stdã€‚</p><p>ç»“æœå°±æ˜¯ï¼Œå½“ç¼–è¯‘å™¨é‡åˆ°<code>cout</code>(ç¼–è¯‘å™¨ä¸è®¤è¯†cout)ï¼Œç¼–è¯‘å™¨å°±ä¼šæŸ¥çœ‹ å‘½åç©ºé—´std ç„¶åæ‰¾åˆ°coutã€‚</p><hr><p>å¦‚æœstd::coutä¸coutçš„å…¶ä»–ä¸€äº›ä½¿ç”¨ä¹‹é—´å­˜åœ¨å‘½åå†²çªï¼Œç¼–è¯‘å™¨å°†æŠŠå®ƒ<strong>æ ‡è®°ä¸ºé”™è¯¯</strong>(è€Œä¸æ˜¯é€‰æ‹©å…¶ä¸­ä¹‹ä¸€)ã€‚</p></blockquote><p>ä¸‹é¢æ¥çœ‹ä¸€ä¸‹ using æŒ‡ä»¤ é€ æˆçš„æ­§ä¹‰ï¼š</p><ul><li><p>eg1ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> a</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> x&#123; <span class="number">10</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> b</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">int</span> x&#123; <span class="number">20</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">using</span> <span class="keyword">namespace</span> a;</span><br><span class="line">	<span class="keyword">using</span> <span class="keyword">namespace</span> b;</span><br><span class="line"> </span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œç¼–è¯‘å™¨æ— æ³•åœ¨mianå‡½æ•°ä¸­å†³å®šä½¿ç”¨<code>a::x</code>è¿˜æ˜¯<code>b::x</code>ã€‚ç„¶åå°±ä¼šå‡ºç°â€œä¸æ˜ç¡®çš„ç¬¦å·â€é”™è¯¯ã€‚</p><p>è¦æƒ³è§£å†³è¿™ä¸ªå†²çªï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Šå‰ç¼€ä½¿ç”¨ã€‚å³æ˜¾ç¤ºæ ‡æ˜ä½¿ç”¨çš„æ˜¯å“ªä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„xã€‚</p></blockquote></li><li><p>eg2ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt; // imports the declaration of std::cout</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cout</span><span class="params">()</span> <span class="comment">// declares our own "cout" function</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>; <span class="comment">// makes std::cout accessible as "cout"</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello, world!"</span>; <span class="comment">// uh oh!  Which cout do we want here?  The one in the std namespace or the one we defined above?</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>eg2ä¸­ï¼Œç¼–è¯‘å™¨æ— æ³•åˆ¤æ–­æˆ‘ä»¬ä½¿ç”¨çš„<code>cout</code>æ˜¯å¼•ç”¨çš„ <code>std::cout</code>è¿˜æ˜¯ coutå‡½æ•°ã€‚å¹¶å‡ºç°â€œä¸æ˜ç¡®çš„ç¬¦å·â€é”™è¯¯ã€‚</p><hr><p>è§£å†³æ–¹æ³•ï¼š</p><ol><li><p>ä½¿ç”¨<code>using declaration</code> æ¥æ›¿ä»£ <code>using directive</code>ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>; <span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œ cout æŒ‡çš„æ˜¯ std::cout</span></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello, world!"</span>; <span class="comment">//æ‰€ä»¥coutè¡¨ç¤ºçš„æ˜¯ std::cout</span></span><br></pre></td></tr></table></figure></li><li><p>æ˜¾ç¤ºçš„ä½¿ç”¨å‰ç¼€ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello, world!"</span>; <span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨ä½¿ç”¨çš„æ˜¯std::cout</span></span><br></pre></td></tr></table></figure></li></ol></blockquote></li></ul><hr><h3 id="å–æ¶ˆoræ›¿æ¢-usingè¯­å¥"><a href="#å–æ¶ˆoræ›¿æ¢-usingè¯­å¥" class="headerlink" title="å–æ¶ˆoræ›¿æ¢ usingè¯­å¥"></a>å–æ¶ˆoræ›¿æ¢ usingè¯­å¥</h3><p>ä¸€æ—¦ï¼Œusingè¯­å¥è¢«å£°æ˜ï¼Œé‚£å°±æ²¡æœ‰åŠæ³•åœ¨å£°æ˜å®ƒçš„èŒƒå›´å†…ä½¿ç”¨å¦ä¸€ä¸ªusingè¯­å¥æ›¿æ¢æˆ–å–æ¶ˆå®ƒã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> Foo;</span><br><span class="line">    <span class="comment">//æ­¤æ—¶æ— æ³•ä½¿ç”¨ä¸€ä¸ªå…¶ä»–çš„ usingè¯­å¥æ¥ å–æ¶ˆæˆ–æ›¿æ¢ â€œusing namespace Foo;â€</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;<span class="comment">//using namespace Foo ends here</span></span><br></pre></td></tr></table></figure><p>å¯¹åº”å®ƒçš„æœ€å¥½åŠæ³•å°±æ˜¯ï¼Œæ˜¾ç¤ºçš„é™åˆ¶ usingè¯­å¥ çš„èŒƒå›´ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> <span class="keyword">namespace</span> Foo; <span class="comment">//åœ¨è¿™é‡Œè°ƒç”¨Foo::ä¸­çš„ä¸œè¥¿</span></span><br><span class="line">    &#125; <span class="comment">//using namespace Foo è¿‡æœŸ</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span>	<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œ<strong>å¯ä»¥æ˜¾å¼åœ°ä½¿ç”¨èŒƒå›´è§£ææ“ä½œç¬¦(::)æ¥é¿å…æ‰€æœ‰è¿™äº›éº»çƒ¦ã€‚</strong></p><hr><h2 id="6-13-typedefä¸ç±»å‹åˆ«å"><a href="#6-13-typedefä¸ç±»å‹åˆ«å" class="headerlink" title="6.13 typedefä¸ç±»å‹åˆ«å"></a>6.13 typedefä¸ç±»å‹åˆ«å</h2><center>**ä¼˜å…ˆä½¿ç”¨ç±»å‹åˆ«åï¼Œè€Œä¸æ˜¯typedefsï¼Œå¹¶å¤§é‡ä½¿ç”¨å®ƒä»¬æ¥è®°å½•ç±»å‹çš„å«ä¹‰**</center><p><code>typedef</code>å…è®¸ç¨‹åºçŒ¿å»åˆ›å»ºä¸€ä¸ªæ•°æ®ç±»å‹çš„åˆ«åã€‚ç„¶åå¯ä»¥ä½¿ç”¨åˆ«åæ¥æ›¿æ¢è¿™ä¸ªç±»å‹çœŸæ­£çš„åå­—ã€‚</p><blockquote><p>Typedefçš„å­—é¢æ„æ€æ˜¯â€œ<strong>ç±»å‹å®šä¹‰â€</strong></p></blockquote><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…³é”®å­—<code>typedef</code>ï¼Œæ¥è¿›è¡Œ ç±»å‹å®šä¹‰ï¼š</p><blockquote><p><code>typedef a b</code> ï¼šå…¶ä¸­<code>a</code>è¡¨ç¤ºç±»å‹çš„åå­—ï¼Œ<code>b</code>è¡¨ç¤ºç±»å‹è¢«æ›¿æ¢æˆçš„åˆ«å.</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> <span class="keyword">distance_t</span>; <span class="comment">//å®šä¹‰distance_t ä½œä¸º doubleç±»å‹ çš„åˆ«å</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸‹é¢ä¸¤ä¸ªè¯­å¥æ˜¯ç­‰ä»·çš„:</span></span><br><span class="line"><span class="keyword">double</span> howFar;</span><br><span class="line"><span class="keyword">distance_t</span> howFar;</span><br></pre></td></tr></table></figure><blockquote><p>æŒ‰ç…§æƒ¯ä¾‹ï¼Œtypedefåç§°æ˜¯ä½¿ç”¨â€œ_tâ€åç¼€å£°æ˜çš„ã€‚è¿™æœ‰åŠ©äºæŒ‡ç¤ºæ ‡è¯†ç¬¦ä»£è¡¨çš„æ˜¯ç±»å‹ï¼Œè€Œä¸æ˜¯å˜é‡æˆ–å‡½æ•°ï¼Œè¿˜æœ‰åŠ©äºé˜²æ­¢ä¸å…¶ä»–æ ‡è¯†ç¬¦çš„å‘½åå†²çªã€‚</p></blockquote><hr><h3 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h3><p>ä¸ºäº†å¸®åŠ©è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ç§æ”¹è¿›çš„typedefsè¯­æ³•ï¼Œå®ƒæ¨¡ä»¿äº†å˜é‡çš„å£°æ˜æ–¹å¼ã€‚è¿™ç§è¯­æ³•ç§°ä¸º <strong>type alias(ç±»å‹åˆ«å)</strong>ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">double</span> <span class="keyword">distance_t</span>; <span class="comment">//å®šä¹‰distance_t ä½œä¸º doubleç±»å‹çš„ åˆ«å</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">distance_t</span> = <span class="keyword">double</span>; <span class="comment">//å®šä¹‰distance_t ä½œä¸º doubleç±»å‹çš„ åˆ«åã€æ¨èã€‘</span></span><br></pre></td></tr></table></figure><blockquote><p>ä¸Šé¢ä¸¤ä¸ªè¯­å¥åœ¨åŠŸèƒ½ä¸Šç­‰ä»·ã€‚</p><p>ã€NOTEã€‘è™½ç„¶ä½¿ç”¨äº†å…³é”®å­—<code>using</code>ï¼ˆåœ¨è¿™é‡Œæ˜¯é‡è½½çš„æ„ä¹‰ï¼‰ï¼Œä½†è¿™å’Œ ä¸å‘½åç©ºé—´ç›¸å…³çš„ usingè¯­å¥ æ²¡æœ‰å…³ç³»ã€‚</p></blockquote><hr><h4 id="ä¸ºæ˜“è¯»æ€§ä½¿ç”¨ç±»å‹åˆ«å"><a href="#ä¸ºæ˜“è¯»æ€§ä½¿ç”¨ç±»å‹åˆ«å" class="headerlink" title="ä¸ºæ˜“è¯»æ€§ä½¿ç”¨ç±»å‹åˆ«å"></a>ä¸ºæ˜“è¯»æ€§ä½¿ç”¨ç±»å‹åˆ«å</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GradeTest</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œä½†æ˜¯è¿™ä¸ªæ•´æ•°æ˜¯ä»€ä¹ˆæ„æ€å‘¢?ä¸€ä¸ªå­—æ¯ç­‰çº§?é—æ¼äº†å¤šå°‘é—®é¢˜?å­¦ç”Ÿçš„èº«ä»½è¯å·ç ?ä¸€ä¸ªé”™è¯¯ä»£ç ?è°çŸ¥é“!Intä¸èƒ½å‘Šè¯‰æˆ‘ä»¬ä»»ä½•ä¸œè¥¿ã€‚å†™æˆä¸‹é¢å½¢å¼ï¼Œä¾¿äºç†è§£ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> testScore_t = <span class="keyword">int</span>;</span><br><span class="line"><span class="function">testScore_t <span class="title">GradeTest</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨ç±»å‹åˆ«åç¼–å†™ä¸å¹³å°æ— å…³çš„ä»£ç "><a href="#ä½¿ç”¨ç±»å‹åˆ«åç¼–å†™ä¸å¹³å°æ— å…³çš„ä»£ç " class="headerlink" title="ä½¿ç”¨ç±»å‹åˆ«åç¼–å†™ä¸å¹³å°æ— å…³çš„ä»£ç "></a>ä½¿ç”¨ç±»å‹åˆ«åç¼–å†™ä¸å¹³å°æ— å…³çš„ä»£ç </h4><p>æ¯”å¦‚ï¼Œåœ¨ä¸€äº›å¹³å°ä¸­ï¼Œ<code>int</code>ç±»å‹å 2ä¸ªå­—èŠ‚ï¼›ä½†åœ¨å…¶ä»–å¹³å°ä¸­ï¼Œå¯èƒ½å 4ä¸ªå­—èŠ‚ã€‚æ‰€ä»¥ï¼Œåœ¨4å­—èŠ‚å¹³å°ä¸­å†™çš„ä»£ç åœ¨2å­—èŠ‚å¹³å°ä¸­å¯èƒ½ä¼šå‡ºé”™ã€‚</p><p>æ‰€ä»¥ï¼Œä½¿ç”¨ç±»å‹åˆ«åå¯ä»¥å¸®åŠ©æˆ‘ä»¬é¿å…å‡ºé”™ï¼Œä¹Ÿæ›´æ¸…æ¥šåœ°è¯´æ˜äº†å¯¹å˜é‡å¤§å°çš„å‡è®¾ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> INT_2_BYTES</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">int8_t</span> = <span class="keyword">char</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">int16_t</span> = <span class="keyword">int</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">int32_t</span> = <span class="keyword">long</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">int8_t</span> = <span class="keyword">char</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">int16_t</span> = short;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">int32_t</span> = <span class="keyword">int</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœï¼Œåœ¨ä¸€ä¸ªæœºå™¨ä¸­ï¼Œæ•´æ•°æ˜¯2ä¸ªå­—èŠ‚ã€‚é‚£ä¹ˆ<code>INT_2_BYTES</code>å°†è¢«å®šä¹‰ã€‚æ­¤æ—¶ï¼Œå°±ä½¿ç”¨çš„æ˜¯ä¸Šéƒ¨å®šä¹‰çš„è¿™å‡ ä¸ªã€‚</p><p>å¦‚æœï¼Œåœ¨ä¸€ä¸ªæœºå™¨ä¸­ï¼Œæ•´æ•°æ˜¯4ä¸ªå­—èŠ‚ã€‚é‚£ä¹ˆ<code>INT_2_BYTES</code>å°†ä¸è¢«å®šä¹‰ã€‚æ­¤æ—¶ï¼Œå°±ä½¿ç”¨çš„æ˜¯ä¸‹éƒ¨å®šä¹‰çš„è¿™å‡ ä¸ªã€‚</p><hr><p>è¿™ç§æƒ…å†µä¸‹ï¼šé€šè¿‡ä½¿ç”¨charã€shortã€intå’Œlongçš„ç»„åˆï¼Œè¿™å¯¹äºæ­£åœ¨ç¼–è¯‘ç¨‹åºçš„æœºå™¨æ˜¯åˆé€‚çš„</p><p><code>int_8</code>å°†å¤„ç† 1å­—èŠ‚çš„æ•´æ•°ï¼›</p><p><code>int16_t</code>å°†å¤„ç† 2å­—èŠ‚çš„æ•´æ•°ï¼›</p><p><code>int32_t</code>å°†å¤„ç† 4å­—èŠ‚çš„æ•´æ•°ã€‚</p></blockquote><hr><h2 id="6-14-å…³é”®å­—auto"><a href="#6-14-å…³é”®å­—auto" class="headerlink" title="6.14 å…³é”®å­—auto"></a>6.14 å…³é”®å­—<code>auto</code></h2><p>çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> d &#123;<span class="number">5.0</span>&#125;;</span><br></pre></td></tr></table></figure><p>å¦‚æœC++æ—©å°±çŸ¥é“<code>5.0</code>æ˜¯doubleç±»å‹çš„æ•°å­—ï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜è¦æ˜¾ç¤ºçš„æŒ‡å®š<code>d</code>æ˜¯doubleç±»å‹çš„å‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬å¯ä»¥è®©ä¸€ä¸ªå˜é‡æ ¹æ®æˆ‘ä»¬åˆå§‹åŒ–å®ƒçš„å€¼æ¥è®¾æƒ³å®ƒçš„ç±»å‹ï¼Œè¿™ä¸æ˜¯å¾ˆå¥½å—?</p><h3 id="åˆå§‹åŒ–å˜é‡çš„ç±»å‹æ¨æ–­"><a href="#åˆå§‹åŒ–å˜é‡çš„ç±»å‹æ¨æ–­" class="headerlink" title="åˆå§‹åŒ–å˜é‡çš„ç±»å‹æ¨æ–­"></a>åˆå§‹åŒ–å˜é‡çš„ç±»å‹æ¨æ–­</h3><p>å½“åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ï¼Œå…³é”®å­—<code>auto</code>å¯ä»¥ç”¨æ¥ä»£æ›¿ç±»å‹ï¼Œä»¥å‘Šè¯‰ç¼–è¯‘å™¨ä»åˆå§‹åŒ–å™¨çš„ç±»å‹æ¨æ–­å˜é‡çš„ç±»å‹ã€‚è¿™ç§å°±å«ä½œï¼š<strong><em>type inference</em>(ç±»å‹æ¨æ–­)</strong>, è‹±æ–‡ä¸­ä¹Ÿå¯ä»¥å«ä½œï¼š<strong><em>type deduction</em></strong></p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> d &#123;<span class="number">5.0</span>&#125;; <span class="comment">//å› ä¸º5.0æ˜¯ä¸€ä¸ªdoubleç±»å‹çš„æ•°å­—ï¼Œæ‰€ä»¥å®ƒçš„ç±»å‹å°†è¢«æ¨æ–­ä¸ºdouble</span></span><br><span class="line"><span class="keyword">auto</span> i &#123;<span class="number">1</span>+<span class="number">2</span>&#125;; <span class="comment">//å› ä¸º1+2çš„ç»“æœæ˜¯intç±»å‹ï¼Œæ‰€ä»¥ï¼Œi å°†è¢«æ¨æ–­ä¸ºintç±»å‹</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç”¨åœ¨å‡½æ•°è¿”å›å€¼ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> sum&#123;add(<span class="number">5</span>,<span class="number">6</span>)&#125;; <span class="comment">//add() è¿”å›ä¸€ä¸ªint, æ‰€ä»¥sumçš„ç±»å‹å°†è¢«æ¨æ–­ä¸ºint</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="åœ¨C-14ä¸­å‡½æ•°çš„ç±»å‹æ¨æ–­"><a href="#åœ¨C-14ä¸­å‡½æ•°çš„ç±»å‹æ¨æ–­" class="headerlink" title="åœ¨C++14ä¸­å‡½æ•°çš„ç±»å‹æ¨æ–­"></a>åœ¨C++14ä¸­å‡½æ•°çš„ç±»å‹æ¨æ–­</h3><p>åœ¨C++14ä¸­ï¼Œå…³é”®å­—<code>auto</code>è¢«æ‰©å±•åˆ°å¯ä»¥ä»å‡½æ•°ä½“ä¸­çš„è¿”å›è¯­å¥æ¨æ–­å‡ºå‡½æ•°çš„è¿”å›ç±»å‹ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x+y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å› ä¸º<code>x+y</code>çš„å€¼æ˜¯intç±»å‹ï¼Œç¼–è¯‘å™¨å°†ä¼šæ¨æ–­è¿™ä¸ªå‡½æ•°åº”è¯¥è¿”å›ä¸€ä¸ªintç±»å‹ã€‚å½“ä½¿ç”¨<code>auto</code>è¿”å›ç±»å‹æ—¶ï¼Œæ‰€æœ‰çš„è¿”å›è¯­å¥å°±å¿…é¡»è¿”å›ç›¸åŒçš„ç±»å‹ï¼Œå¦åˆ™å°†ä¼šå‡ºé”™ã€‚</p></blockquote><p>ä½†æ˜¯ä¸æ¨èå¯¹å‡½æ•°çš„è¿”å›ç±»å‹ä½¿ç”¨å…³é”®å­—<code>auto</code>ã€‚</p><blockquote><p>å› ä¸ºæ²¡æœ‰ä¸Šä¸‹æ–‡æ¥å¸®åŠ©æŒ‡ç¤ºå‡½æ•°è¿”å›çš„ç±»å‹ã€‚ç”¨æˆ·å®é™…ä¸Šå¿…é¡»æ·±å…¥å‡½æ•°ä½“æœ¬èº«æ¥ç¡®å®šå‡½æ•°è¿”å›çš„ç±»å‹ã€‚å®ƒä¸é‚£ä¹ˆç›´è§‚ï¼Œå› æ­¤æ›´å®¹æ˜“å‡ºé”™ã€‚</p></blockquote><hr><h3 id="åç½®è¿”å›ç±»å‹è¯­æ³•"><a href="#åç½®è¿”å›ç±»å‹è¯­æ³•" class="headerlink" title="åç½®è¿”å›ç±»å‹è¯­æ³•"></a>åç½®è¿”å›ç±»å‹è¯­æ³•</h3><p>å…³é”®å­—<code>auto</code>ä¹Ÿå¯ä»¥è¢«ç”¨æ¥<strong>åç½®è¿”å›ç±»å‹(trailing return syntax)</strong>ã€‚å³ï¼Œåœ¨å‡½æ•°åŸå‹ä¹‹åæŒ‡å®šè¿”å›çš„ç±»å‹ã€‚</p><blockquote><p>è¿™æ˜¯C++11æ–°å¢çš„<strong>ä¸€ç§å‡½æ•°å£°æ˜</strong>çš„æ–¹æ³•ã€‚</p></blockquote><p>ä¸‹é¢çš„ä¸¤ä¸ªå¯¹å‡½æ•°å£°æ˜çš„è¯­å¥æ˜¯ç­‰ä»·çš„ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>;</span><br><span class="line">auto add(int x, int y) -&gt; int;//åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œautoä¸æ‰§è¡Œç±»å‹æ¨æ–­â€”â€”ä½¿ç”¨åç½®è¿”å›ç±»å‹åªæ˜¯è¯­æ³•çš„ä¸€éƒ¨åˆ†ã€‚</span><br></pre></td></tr></table></figure><hr><p>é‚£ä¸ºä»€ä¹ˆè¦ç”¨åç½®ç±»å‹è¿”å›è¯­å¥å‘¢ï¼Ÿå…¶ä¸­çš„å¥½å¤„ä¹‹ä¸€å°±æ˜¯ï¼šå¯ä»¥è®©å‡½æ•°çš„å£°æ˜æ—¶çš„åå­—å¯¹é½ğŸ˜Šï¼Œå¦‚ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">auto add(int x, int y) -&gt; int;</span><br><span class="line">auto divide(double x, double y) -&gt; double;</span><br><span class="line">auto printSomething() -&gt; void;</span><br><span class="line">auto generateSubstring(const std::string &amp;s, int start, int len) -&gt; std::string;</span><br></pre></td></tr></table></figure><hr><h3 id="å‡½æ•°å½¢å‚çš„ç±»å‹æ¨æ–­"><a href="#å‡½æ•°å½¢å‚çš„ç±»å‹æ¨æ–­" class="headerlink" title="å‡½æ•°å½¢å‚çš„ç±»å‹æ¨æ–­"></a>å‡½æ•°å½¢å‚çš„ç±»å‹æ¨æ–­</h3><blockquote><p><strong>åœ¨C++20æ—¶å¼•å…¥çš„</strong></p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">auto</span> x, <span class="keyword">auto</span> y)</span> <span class="comment">//only valid in C++20</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt;x+y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    add(<span class="number">2</span>, <span class="number">3</span>); 	   <span class="comment">//int</span></span><br><span class="line">    add(<span class="number">1.1</span>, <span class="number">2.2</span>); <span class="comment">//double</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>åœ¨C++20ä¹‹å‰</strong>ï¼Œè¿™ç§å½¢å¼æ˜¯æ— æ•ˆçš„ã€‚å› ä¸ºç¼–è¯‘å™¨åœ¨ ç¼–è¯‘æ—¶(complie time) ä¸èƒ½æ¨æ–­å‡½æ•°å½¢å‚çš„ç±»å‹ã€‚</p><blockquote><p>åœ¨C++20ä¹‹å‰ï¼Œå¦‚æœä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªä½¿ç”¨å„ç§ä¸åŒç±»å‹çš„æ³›å‹å‡½æ•°ï¼Œä½ éœ€è¦ä½¿ç”¨<code>function templates</code>ï¼Œè€Œä¸æ˜¯ç°åœ¨ç”¨çš„<code>type inference</code></p></blockquote><hr><h3 id="6-15-å¼ºåˆ¶ç±»å‹è½¬æ¢-éšå¼"><a href="#6-15-å¼ºåˆ¶ç±»å‹è½¬æ¢-éšå¼" class="headerlink" title="6.15 å¼ºåˆ¶ç±»å‹è½¬æ¢(éšå¼)"></a>6.15 å¼ºåˆ¶ç±»å‹è½¬æ¢(éšå¼)</h3><blockquote><p>ç±»å‹è½¬æ¢æœ‰ä¸¤ç§å½¢å¼ï¼š</p><ul><li><strong>implicit type conversion</strong>ï¼ˆéšå¼ç±»å‹è½¬æ¢ï¼‰ï¼šç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†ä¸€ç§æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹</li><li><strong>explicit type conversion</strong>ï¼ˆæ˜¾ç¤ºç±»å‹è½¬æ¢ï¼‰ï¼šå¼€å‘äººå‘˜ä½¿ç”¨è½¬æ¢æ“ä½œç¬¦æ¥æŒ‡å¯¼è½¬æ¢ã€‚</li></ul></blockquote><p>å°†å€¼ä»ä¸€ç§æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹çš„è¿‡ç¨‹ç§°ä¸º<strong><em>type conversion</em>(ç±»å‹è½¬æ¢)</strong>ã€‚ç±»å‹è½¬æ¢å¯ä»¥åœ¨è®¸å¤šä¸åŒçš„æƒ…å†µä¸‹å‘ç”Ÿ:</p><ul><li><p>å½“ç”¨ä¸åŒæ•°æ®ç±»å‹çš„å€¼ åˆ†é… æˆ– åˆå§‹ åŒ–ä¸€ä¸ªå˜é‡æ—¶:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> d&#123;<span class="number">3</span>&#125;;  <span class="comment">// initialize double variable with integer value 3</span></span><br><span class="line">d = <span class="number">6</span>;  	  <span class="comment">// assign double variable the integer value 6</span></span><br></pre></td></tr></table></figure></li><li><p>å½“ä¼ é€’ä¸€ä¸ªå€¼ç»™ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä½†å‡½æ•°å‚æ•°æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">(<span class="keyword">long</span> l)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">doSomething(<span class="number">3</span>); <span class="comment">// pass integer value 3 to a function expecting a long parameter</span></span><br></pre></td></tr></table></figure></li><li><p>å½“ä»ä¸€ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªå€¼æ—¶ï¼Œè¯¥å‡½æ•°çš„è¿”å›ç±»å‹æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">doSomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3.0</span>; <span class="comment">// Return double value 3.0 back to caller through float return type</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ä¸åŒç±»å‹çš„æ“ä½œæ•°çš„ äºŒå…ƒæ“ä½œç¬¦ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> division&#123; <span class="number">4.0</span> / <span class="number">3</span> &#125;; <span class="comment">// division with a double and an integer</span></span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="éšå¼ç±»å‹è½¬æ¢"><a href="#éšå¼ç±»å‹è½¬æ¢" class="headerlink" title="éšå¼ç±»å‹è½¬æ¢"></a>éšå¼ç±»å‹è½¬æ¢</h3><p><strong>éšå¼ç±»å‹è½¬æ¢</strong>(ä¹Ÿç§°ä¸º<strong>è‡ªåŠ¨ç±»å‹è½¬æ¢</strong>æˆ–<strong>å¼ºåˆ¶è½¬æ¢</strong>)åœ¨å¸Œæœ›æ˜¯è¿™ç§æ•°æ®ç±»å‹ï¼Œä½†æä¾›äº†å¦ä¸€ç§æ•°æ®ç±»å‹ã€‚ä¹³æ²Ÿç¼–è¯‘å™¨èƒ½å¤Ÿè¾¨è®¤å‡ºç±»å‹è½¬æ¢ä¸­çš„ä¸¤ç§ç±»å‹ï¼ŒæŒ ä»–å°±è½¬æ¢ã€‚å¦åˆ™ï¼ŒæŠ¥é”™ã€‚</p><blockquote><p>éšå¼ç±»å‹è½¬æ¢æœ‰ä¸¤ç§åŸºæœ¬ç±»å‹ï¼š<strong>æå‡</strong>å’Œ<strong>è½¬æ¢</strong>ã€‚</p></blockquote><ul><li><p><strong><em>Numeric promotion</em>æ•°å€¼æå‡</strong></p><p>æ¯å½“å°†ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼è½¬æ¢ä¸ºæ¥è‡ªåŒä¸€æ—çš„æ›´å¤§çš„åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼æ—¶ï¼Œè¿™ç§°ä¸º<strong>æ•°å€¼æå‡</strong>(æˆ–<strong>åŠ å®½</strong>ï¼Œå°½ç®¡è¿™ä¸ªæœ¯è¯­é€šå¸¸ç”¨äºæ•´æ•°)ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//an int can be widened into a long, or a float promoted into a double:</span></span><br><span class="line"><span class="keyword">long</span> l&#123; <span class="number">64</span> &#125;; <span class="comment">// widen the integer 64 into a long</span></span><br><span class="line"><span class="keyword">double</span> d&#123; <span class="number">0.12f</span> &#125;; <span class="comment">// promote the float 0.12 into a double</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶æœ¯è¯­æ•°å€¼æ¨å¹¿æ¶µç›–äº†ä»»ä½•ç±»å‹çš„æå‡ï¼Œä½†åœ¨c++ä¸­è¿˜æœ‰ä¸¤ä¸ªå…·æœ‰ç‰¹å®šå«ä¹‰çš„æœ¯è¯­:</p><ul><li><strong>Integral promotion(æ•´å‹æå‡)</strong>ï¼šå¯ä»¥å°†[ <code>bool</code> , <code>char</code>, <code>unsigned char</code>, <code>signed char</code>, <code>unsigned short</code>, and <code>signed short</code> ]è¿™äº›ç±»å‹è½¬æ¢ä¸º <code>int</code>æˆ–è€…æ˜¯<code>unsigned int</code></li><li><strong>Floating point promotion(æµ®ç‚¹å‹æå‡)</strong>ï¼šå¯ä»¥å°†<code>float</code>ç±»å‹è½¬æ¢ä¸º<code>double</code></li></ul><p>æ•´å‹æå‡ å’Œ æµ®ç‚¹å‹æå‡ é€šå¸¸æ˜¯å°† è¾ƒå°çš„æ•°æ®ç±»å‹è½¬æ¢ä¸º<code>int</code>/<code>unsigned int</code>æˆ–<code>double</code>ã€‚</p><hr></li><li><p><strong>Numeric conversions(æ•°å€¼è½¬æ¢)</strong></p><p>å½“æˆ‘ä»¬å°†ä¸€ä¸ªå€¼ä»è¾ƒå¤§çš„ç±»å‹è½¬æ¢ä¸ºç±»ä¼¼çš„è¾ƒå°ç±»å‹æ—¶ï¼Œæˆ–è€…åœ¨ä¸åŒç±»å‹ä¹‹é—´è½¬æ¢æ—¶ï¼Œè¿™ç§°ä¸ºæ•°å€¼è½¬æ¢ã€‚ä¾‹å¦‚:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> d&#123; <span class="number">3</span> &#125;; <span class="comment">// convert integer 3 to a double (between different types)</span></span><br><span class="line">short s&#123; <span class="number">2</span> &#125;; <span class="comment">// convert integer 2 to a short (from larger to smaller type within same type family)</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>æ•°å€¼æå‡</strong>æ˜¯å®‰å…¨çš„ï¼›ä½†æ˜¯<strong>æ•°å€¼è½¬æ¢</strong>å¯èƒ½ä¼šä¸¢å¤±æ•°æ®ã€‚</p><blockquote><p>å› æ­¤ï¼Œå¯¼è‡´æ‰§è¡Œéšå¼è½¬æ¢çš„ä»£ç é€šå¸¸ä¼šå¯¼è‡´ç¼–è¯‘å™¨å‘å‡ºè­¦å‘Šã€‚</p></blockquote></blockquote><p>eg,å°†ä¸€ä¸ªå€¼è½¬æ¢ä¸ºçš„ç±»å‹æ²¡æœ‰è¶³å¤Ÿå¤§çš„èŒƒå›´æ¥æ”¯æŒè¿™ä¸ªå€¼ï¼Œå°±ä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„ç»“æœï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i&#123; <span class="number">30000</span> &#125;;</span><br><span class="line">    <span class="keyword">char</span> c = i; <span class="comment">// chars have range -128 to 127</span></span><br><span class="line"> </span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;(c);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********ç»“æœ**********/</span></span><br><span class="line"><span class="number">48</span></span><br></pre></td></tr></table></figure><blockquote><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªå¤§æ•´æ•°åˆ†é…ç»™ä¸€ä¸ªchar(å…¶èŒƒå›´ä¸º-128åˆ°127)ã€‚è¿™ä¼šå¯¼è‡´charæº¢å‡ºï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªæ„å¤–çš„ç»“æœ: 48</p></blockquote><p>ä½†æ˜¯ï¼Œåªè¦å€¼ç¬¦åˆè¾ƒå°ç±»å‹çš„èŒƒå›´ï¼Œä»è¾ƒå¤§çš„æ•´æ•°æˆ–æµ®ç‚¹ç±»å‹è½¬æ¢ä¸ºè¾ƒå°çš„ç±»ä¼¼ç±»å‹é€šå¸¸å°±å¯ä»¥å·¥ä½œã€‚ä¾‹å¦‚:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">int</span> i&#123; <span class="number">2</span> &#125;;</span><br><span class="line">    short s = i; <span class="comment">// convert from int to short</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">double</span> d&#123; <span class="number">0.1234</span> &#125;;</span><br><span class="line">    <span class="keyword">float</span> f = d;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; f &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***********ç»“æœ**************/</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">0.1234</span></span><br></pre></td></tr></table></figure><p>å¯¹äºæµ®ç‚¹å€¼ï¼Œç”±äºè¾ƒå°ç±»å‹çš„ç²¾åº¦æŸå¤±ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº›èˆå…¥ã€‚ä¾‹å¦‚:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> f = <span class="number">0.123456789</span>; <span class="comment">// double value 0.123456789 has 9 significant digits, but float can only support about 7</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::setprecision(<span class="number">9</span>) &lt;&lt; f &lt;&lt; <span class="string">'\n'</span>; <span class="comment">// std::setprecision defined in å¤´æ–‡ä»¶â€œiomanipâ€ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/************ç»“æœ************/</span></span><br><span class="line"><span class="number">0.123456791</span></span><br></pre></td></tr></table></figure><p>åªè¦å€¼ç¬¦åˆæµ®ç‚¹ç±»å‹çš„èŒƒå›´ï¼Œå°±å¯ä»¥å°†æ•´æ•°è½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚ä¾‹å¦‚:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">int</span> i&#123; <span class="number">10</span> &#125;;</span><br><span class="line">    <span class="keyword">float</span> f = i;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; f;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**************ç»“æœ**************/</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure><p>åªè¦å€¼ç¬¦åˆæ•´æ•°çš„èŒƒå›´ï¼Œå°±å¯ä»¥å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°ï¼Œä½†æ˜¯ä»»ä½•å°æ•°å€¼éƒ½ä¼šä¸¢å¤±ã€‚ä¾‹å¦‚:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">int</span> i = <span class="number">3.5</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">'\n'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***åœ¨æœ¬ä¾‹ä¸­ï¼Œä¸¢å¤±äº†åˆ†æ•°å€¼(.5)ï¼Œç»“æœå¦‚ä¸‹:****/</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure></li></ul><hr><ul><li><p><strong>è®¡ç®—ç®—æœ¯è¡¨è¾¾å¼</strong></p><p>å½“è®¡ç®—è¡¨è¾¾å¼æ—¶ï¼Œç¼–è¯‘å™¨å°†æ¯ä¸ªè¡¨è¾¾å¼åˆ†è§£æˆå•ç‹¬çš„å­è¡¨è¾¾å¼ã€‚ç®—æœ¯è¿ç®—ç¬¦è¦æ±‚å®ƒä»¬çš„<strong>æ“ä½œæ•°å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹</strong>ã€‚ä¸ºäº†ç¡®ä¿è¿™ä¸€ç‚¹ï¼Œç¼–è¯‘å™¨ä½¿ç”¨ä»¥ä¸‹è§„åˆ™:</p><ul><li><p>å¦‚æœä¸€ä¸ªæ“ä½œæ•°æ˜¯ä¸€ä¸ªæ¯”<code>int</code>æ›´çª„çš„æ•´æ•°ï¼Œå®ƒå°†ç»å†æ•´æ•°æå‡(å¦‚ä¸Šæ‰€è¿°)åˆ°<code>int</code>æˆ–<code>usigned int</code>ã€‚</p></li><li><p>å¦‚æœæ“ä½œæ•°ä»ç„¶ä¸åŒ¹é…ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæ‰¾åˆ°ä¼˜å…ˆçº§æœ€é«˜çš„æ“ä½œæ•°ï¼Œå¹¶éšå¼åœ°å°†å¦ä¸€ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºåŒ¹é…çš„æ“ä½œæ•°ã€‚</p><blockquote><p>æ“ä½œæ•°çš„ä¼˜å…ˆçº§å¦‚ä¸‹:</p><ul><li>long double (highest)</li><li>double</li><li>float</li><li>unsigned long long</li><li>long long</li><li>unsigned long</li><li>long</li><li>unsigned int</li><li>int (lowest)</li></ul></blockquote></li></ul><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨typeidæ“ä½œç¬¦(åŒ…å«åœ¨å¤´ä¸­)çœ‹åˆ°é€šå¸¸çš„ç®—æœ¯è½¬æ¢ï¼Œè¯¥æ“ä½œç¬¦å¯ç”¨äºæ˜¾ç¤ºè¡¨è¾¾å¼çš„ç»“æœç±»å‹ã€‚</p><p>eg1:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;typeinfo&gt; // for typeid()</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    short a&#123; <span class="number">4</span> &#125;;</span><br><span class="line">    short b&#123; <span class="number">5</span> &#125;;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="keyword">typeid</span>(a + b).name() &lt;&lt; <span class="string">" "</span> &lt;&lt; a + b &lt;&lt; <span class="string">'\n'</span>; <span class="comment">// show us the type of a + b</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*å› ä¸ºshortæ˜¯æ•´æ•°ï¼Œæ‰€ä»¥å®ƒä»¬åœ¨è¢«æ·»åŠ ä¹‹å‰è¦ç»è¿‡æ•´æ•°æå‡åˆ°intã€‚æ·»åŠ ä¸¤ä¸ªintçš„ç»“æœæ˜¯ä¸€ä¸ªintï¼Œæ­£å¦‚æ‚¨æ‰€æœŸæœ›çš„:*/</span></span><br><span class="line"><span class="keyword">int</span> <span class="number">9</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„:ç¼–è¯‘å™¨å¯èƒ½ä¼šæ˜¾ç¤ºä¸€äº›ç¨å¾®ä¸åŒçš„å†…å®¹ï¼Œå› ä¸ºtypeid.name()çš„æ ¼å¼ç”±ç¼–è¯‘å™¨å†³å®šã€‚</p></blockquote><p>eg2:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;typeinfo&gt; // for typeid()</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> d&#123; <span class="number">4.0</span> &#125;;</span><br><span class="line">    short s&#123; <span class="number">2</span> &#125;;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="keyword">typeid</span>(d + s).name() &lt;&lt; <span class="string">' '</span> &lt;&lt; d + s &lt;&lt; <span class="string">'\n'</span>; <span class="comment">// show us the type of d + s</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*****ç»“æœ*************/</span></span><br><span class="line"><span class="keyword">double</span> <span class="number">6.0</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>short</code>å°†è¢« <em>æ•°å€¼æå‡</em> ä¸º<code>int</code>ã€‚ä½†æ˜¯ï¼Œ<code>int</code>ä¸<code>double</code>è¿˜æ˜¯ä¸åŒ¹é…ã€‚åˆå› ä¸º<code>double</code>åœ¨ç±»å‹çš„å±‚æ¬¡ç»“æ„ä¸­æ›´é«˜ã€‚æ‰€ä»¥ï¼Œæ•´å‹çš„2å°†è¢«è½¬æ¢ä¸ºdouble ç±»å‹çš„ 2.0 ã€‚ç„¶åå°±ç›¸å½“äºæ˜¯ä¸¤ä¸ªdoubleç±»å‹çš„ç›¸åŠ ï¼Œç»“æœè¿˜æ˜¯doubleç±»å‹.</p></li></ul><hr><h2 id="å¼ºåˆ¶ç±»å‹è½¬æ¢-æ˜¾å¼-amp-static-cast"><a href="#å¼ºåˆ¶ç±»å‹è½¬æ¢-æ˜¾å¼-amp-static-cast" class="headerlink" title="å¼ºåˆ¶ç±»å‹è½¬æ¢(æ˜¾å¼) &amp; static_cast"></a>å¼ºåˆ¶ç±»å‹è½¬æ¢(æ˜¾å¼) &amp; <code>static_cast</code></h2><p>æ˜¾å¼çš„ç±»å‹è½¬æ¢æ˜¯ä½¿ç”¨ <strong>type casting operator(ç±»å‹è½¬æ¢æ“ä½œç¬¦)</strong>ã€‚ï¼ˆé€šå¸¸æ˜¯ç¨‹åºå‘˜æ¥åšçš„ä¸€ä¸ªæ˜¾å¼çš„çš„ç±»å‹è½¬æ¢ï¼‰</p><p>åœ¨C++ä¸­ï¼Œç±»å‹è½¬æ¢å¤§è‡´åˆ†ä¸º5ç§ï¼š <code>C-style casts</code>, <code>static casts</code>, <code>const casts</code>, <code>dynamic casts</code>, and <code>reinterpret casts</code>. åå››ä¸ªæœ‰æ—¶è¢«ç§°ä¸º<strong>å‘½åç±»å‹è½¬æ¢(named casts)</strong>ã€‚</p><p>åœ¨æœ¬èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»cé£æ ¼çš„ç±»å‹è½¬æ¢å’Œé™æ€ç±»å‹è½¬æ¢ã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„è¯¾ç¨‹ä¸­è®¨è®ºæŒ‡é’ˆå’Œç»§æ‰¿æ—¶å†ä¿å­˜åŠ¨æ€ç±»å‹è½¬æ¢ã€‚</p><blockquote><p>é€šå¸¸åº”è¯¥é¿å…ä½¿ç”¨<code>Const casts</code>å’Œ<code>reinterpret casts</code>ï¼Œå› ä¸ºå®ƒä»¬åªåœ¨æå°‘æ•°æƒ…å†µä¸‹æœ‰ç”¨ï¼Œå¦‚æœä½¿ç”¨ä¸å½“å¯èƒ½ä¼šæœ‰å®³ã€‚</p></blockquote><hr><h3 id="C-style-casts"><a href="#C-style-casts" class="headerlink" title="C-style casts"></a>C-style casts</h3><p>åœ¨æ ‡å‡†çš„Cè¯­è¨€ä¸­ï¼Œç±»å‹è½¬æ¢æ˜¯é€šè¿‡ <strong>æ“ä½œç¬¦<code>()</code></strong>æ¥å®Œæˆçš„ã€‚æ‹¬å·å†…æ˜¯å°†è¦è½¬æ¢çš„ç›®æ ‡ç±»å‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i1 &#123; <span class="number">10</span> &#125;;</span><br><span class="line"><span class="keyword">int</span> i2 &#123; <span class="number">4</span> &#125;;</span><br><span class="line"><span class="keyword">float</span> f &#123; (<span class="keyword">float</span>)i1 / i2 &#125;;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æµ®ç‚¹cé£æ ¼çš„å¼ºåˆ¶è½¬æ¢æ¥å‘Šè¯‰ç¼–è¯‘å™¨å°†<code>i1</code>è½¬æ¢ä¸ºæµ®ç‚¹å€¼ã€‚</p><p>å› ä¸ºè¿ç®—ç¬¦<code>/</code>çš„å·¦æ“ä½œæ•°ç°åœ¨å˜ä¸ºæµ®ç‚¹å€¼ï¼Œå³æ“ä½œç¬¦ä¹Ÿå°†è¢«è½¬æ¢ä¸ºæµ®ç‚¹å€¼ã€‚å¹¶ä¸”é™¤æ³•å°†ä½¿ç”¨æµ®ç‚¹é™¤æ³•è€Œä¸æ˜¯æ•´æ•°é™¤æ³•!</p></blockquote><hr><p><strong>ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢æ¥æ¸…é™¤éšå¼ç±»å‹è½¬æ¢</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i &#123; <span class="number">48</span> &#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// explicit conversion from int to char, so that a char is assigned to variable ch</span></span><br><span class="line"><span class="keyword">char</span> ch = <span class="keyword">static_cast</span>&lt;<span class="keyword">char</span>&gt;(i);</span><br></pre></td></tr></table></figure><blockquote><p>å½“æˆ‘ä»¬è¿™æ ·åšæ—¶ï¼Œæˆ‘ä»¬æ˜¾å¼åœ°å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªè½¬æ¢æ˜¯æœ‰æ„çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬æ¥å—å¯¹ç»“æœçš„è´£ä»»ã€‚å› ä¸ºè¿™ä¸ª<code>static_cast</code>çš„è¾“å‡ºç±»å‹æ˜¯charï¼Œæ‰€ä»¥å¯¹å˜é‡chçš„èµ‹å€¼ä¸ä¼šäº§ç”Ÿä»»ä½•ç±»å‹ä¸åŒ¹é…ï¼Œå› æ­¤æ²¡æœ‰è­¦å‘Šã€‚</p></blockquote><p>ä¸‹é¢çš„ç¨‹åºï¼Œç¼–è¯‘å™¨å°†ä¼šæŠ±æ€¨å°†doubleè½¬æ¢æˆintå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i &#123; <span class="number">100</span> &#125;;</span><br><span class="line">i = i / <span class="number">2.5</span>;</span><br></pre></td></tr></table></figure><p>å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œæˆ‘ä»¬æ˜ç¡®çš„æ„æ€æ˜¯è¿™æ ·åš:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i &#123; <span class="number">100</span> &#125;;</span><br><span class="line">i = <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;(i / <span class="number">2.5</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="6-17-æœªå‘½å-å†…è”-å‘½åç©ºé—´"><a href="#6-17-æœªå‘½å-å†…è”-å‘½åç©ºé—´" class="headerlink" title="6.17 æœªå‘½å/å†…è” å‘½åç©ºé—´"></a>6.17 æœªå‘½å/å†…è” å‘½åç©ºé—´</h2><h3 id="æœªå‘½å-åŒ¿å-å‘½åç©ºé—´"><a href="#æœªå‘½å-åŒ¿å-å‘½åç©ºé—´" class="headerlink" title="æœªå‘½å(åŒ¿å) å‘½åç©ºé—´"></a>æœªå‘½å(åŒ¿å) å‘½åç©ºé—´</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> <span class="comment">// unnamed namespace</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> <span class="comment">// can only be accessed in this file</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"v1\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    doSomething(); <span class="comment">// we can call doSomething() without a namespace prefix</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/********ç»“æœ**********/</span></span><br><span class="line">v1</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨æœªå‘½åçš„å‘½åç©ºé—´ä¸­å£°æ˜çš„æ‰€æœ‰å†…å®¹éƒ½è¢«è§†ä¸ºçˆ¶å‘½åç©ºé—´çš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œå°½ç®¡<code>doSomething</code>å‡½æ•°æ˜¯åœ¨æœªå‘½åçš„å‘½åç©ºé—´ä¸­å®šä¹‰çš„ï¼Œä½†å‡½æ•°æœ¬èº«å¯ä»¥ä»çˆ¶å‘½åç©ºé—´(åœ¨æœ¬ä¾‹ä¸­æ˜¯<code>global namespace</code>)è®¿é—®ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥ä»mainè°ƒç”¨doSomethingè€Œä¸éœ€è¦ä»»ä½•é™å®šç¬¦ã€‚</p></blockquote><p>è¿™å¯èƒ½ä½¿æœªå‘½åçš„å‘½åç©ºé—´çœ‹èµ·æ¥æ¯«æ— ç”¨å¤„ã€‚ä½†æœªå‘½ååç§°ç©ºé—´çš„å¦ä¸€ä¸ªå½±å“æ˜¯ï¼šæœªå‘½åå‘½åç©ºé—´å†…çš„æ‰€æœ‰æ ‡è¯†ç¬¦éƒ½è¢«è§†ä¸ºå…·æœ‰<strong>å†…éƒ¨é“¾æ¥</strong>ï¼Œ<u>è¿™æ„å‘³ç€æœªå‘½åå‘½åç©ºé—´çš„å†…å®¹å°±ä¸èƒ½åœ¨å…¶ä»–æ–‡ä»¶ä¸­çœ‹åˆ°</u>ã€‚</p><hr><p><strong>å¯¹äºå‡½æ•°</strong>ï¼Œ<u>è¿™å®é™…ä¸Šç­‰åŒäºå°†æœªå‘½åçš„å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰å‡½æ•°å®šä¹‰ä¸º<strong>é™æ€å‡½æ•°</strong></u>ã€‚ä¸‹é¢çš„ç¨‹åºä¸ä¸Šé¢çš„ç¨‹åºå®é™…ä¸Šæ˜¯ç›¸åŒçš„ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span> <span class="comment">// can only be accessed in this file</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"v1\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    doSomething(); <span class="comment">// we can call doSomething() without a namespace prefix</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p><strong><code>unnamed namespace</code></strong>é€šå¸¸ç”¨äº å½“ä½ æœ‰å¾ˆå¤šå†…å®¹æƒ³è¦ç¡®ä¿åœ¨ç»™å®šæ–‡ä»¶ä¸­ä¿æŒå±€éƒ¨æ—¶ï¼Œä½¿ç”¨<code>unnamed namespace</code>è¦æ¯”å•ç‹¬å°†æ‰€æœ‰å£°æ˜æ ‡è®°ä¸º<code>static</code>æ›´å®¹æ˜“ã€‚</p><hr><h3 id="å†…è”-å‘½åç©ºé—´"><a href="#å†…è”-å‘½åç©ºé—´" class="headerlink" title="å†…è” å‘½åç©ºé—´"></a>å†…è” å‘½åç©ºé—´</h3><blockquote><p><strong>Inline namespaces</strong></p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"v1\n"</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    doSomething();</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å‡è®¾ä½ å¯¹doSomethingä¸æ»¡æ„ï¼Œä½ æƒ³é€šè¿‡æ”¹å˜å®ƒçš„è¡Œä¸ºæ–¹å¼æ¥æ”¹è¿›å®ƒã€‚ä½†å¦‚æœè¿™æ ·åšï¼Œå°±æœ‰å¯èƒ½ç ´åä½¿ç”¨æ—§ç‰ˆæœ¬çš„ç°æœ‰ç¨‹åºã€‚ä½ æ˜¯æ€ä¹ˆå¤„ç†çš„?</p><ul><li><p>ä¸€ç§æ–¹æ³•æ˜¯ç”¨ä¸åŒçš„åç§°åˆ›å»ºå‡½æ•°çš„æ–°ç‰ˆæœ¬ã€‚ä½†æ˜¯ç»è¿‡è®¸å¤šæ›´æ”¹ä¹‹åï¼Œæ‚¨å¯èƒ½ä¼šå¾—åˆ°ä¸€ç»„åç§°å‡ ä¹ç›¸åŒçš„å‡½æ•°(doSomethingã€doSomething_v2ã€doSomething_v3ç­‰)ã€‚</p></li><li><p>ã€æ¨èã€‘å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨<strong>å†…è”å‘½åç©ºé—´</strong>ã€‚<u>å†…è”å‘½åç©ºé—´æ˜¯é€šå¸¸ç”¨äºç‰ˆæœ¬åŒ–å†…å®¹çš„åç§°ç©ºé—´</u>ã€‚ä¸æœªå‘½åçš„å‘½åç©ºé—´éå¸¸ç›¸ä¼¼ï¼Œ<u>åœ¨å†…è”å‘½åç©ºé—´ä¸­å£°æ˜çš„ä»»ä½•å†…å®¹éƒ½è¢«è®¤ä¸ºæ˜¯çˆ¶åç§°ç©ºé—´çš„ä¸€éƒ¨åˆ†</u>ã€‚<u>ç„¶è€Œï¼Œå†…è”å‘½åç©ºé—´å¹¶ä¸æ˜¯ å†…éƒ¨é“¾æ¥ã€‚</u></p><blockquote><p>ä½¿ç”¨å…³é”®å­—<code>inline</code></p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">inline</span> <span class="keyword">namespace</span> v1 <span class="comment">// declare an inline namespace named v1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"v1\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> v2 <span class="comment">// declare a normal namespace named v2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"v2\n"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    v1::doSomething(); <span class="comment">// calls the v1 version of doSomething()</span></span><br><span class="line">    v2::doSomething(); <span class="comment">// calls the v2 version of doSomething()</span></span><br><span class="line"> </span><br><span class="line">    doSomething(); <span class="comment">// calls the inline version of doSomething() (which is v1)</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*********ç»“æœ********/</span></span><br><span class="line">v1</span><br><span class="line">v2</span><br><span class="line">v1</span><br></pre></td></tr></table></figure><blockquote><p>å¯ä»¥çœ‹å‡ºï¼Œå½“æœ‰ <strong>å†…è”å‡½æ•°</strong>å­˜åœ¨æ—¶ï¼Œ<u>å¦‚æœä¸åŠ å‰ç¼€ï¼Œ<strong>åˆ™é»˜è®¤è°ƒç”¨çš„æ˜¯ å†…è”å‡½æ•°ç‰ˆæœ¬</strong></u></p></blockquote><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè°ƒç”¨<code>doSomething</code>å°†å¾—åˆ°<code>doSomething</code>çš„v1(å†…è”ç‰ˆæœ¬)ã€‚å¸Œæœ›ä½¿ç”¨æ–°ç‰ˆæœ¬çš„è°ƒç”¨è€…å¯ä»¥<strong>æ˜¾å¼</strong>åœ°è°ƒç”¨<code>v2::dosomething()</code>ã€‚</p><blockquote><p>è¿™ä¿ç•™äº†ç°æœ‰ç¨‹åºçš„åŠŸèƒ½ï¼ŒåŒæ—¶å…è®¸æ›´æ–°çš„ç¨‹åºåˆ©ç”¨æ›´æ–°çš„/æ›´å¥½çš„å˜ä½“ã€‚</p></blockquote><hr></li></ul><h2 id="6-x-Chapter-6-summary-and-quiz"><a href="#6-x-Chapter-6-summary-and-quiz" class="headerlink" title="6.x Chapter 6 summary and quiz"></a>6.x Chapter 6 summary and quiz</h2><p><a href="https://www.learncpp.com/cpp-tutorial/chapter-6-summary-and-quiz/" target="_blank" rel="noopener">https://www.learncpp.com/cpp-tutorial/chapter-6-summary-and-quiz/</a></p><br><section class="widget copyright desktop mobile"><div class="content"><blockquote><p>åšå®¢å†…å®¹éµå¾ª ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0) åè®®</p><p>æœ¬æ–‡æ°¸ä¹…é“¾æ¥æ˜¯ï¼š<a href="https://www.longlongqin.top/archives/2faa8a4b.html">https://www.longlongqin.top/archives/2faa8a4b.html</a></p></blockquote></div></section><section class="widget qrcode desktop mobile"><div class="content article-entry"><fancybox><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/reward/AliPayOR.jpg" height="64px"></fancybox><fancybox><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/reward/WeChatPayOR.png" height="64px"></fancybox></div></section></div><section class="meta" id="footer-meta"><div class="new-meta-box"><div class="new-meta-item date" itemprop="dateUpdated" datetime="2020-04-13T17:43:38+08:00"><a class="notlink"><i class="fas fa-save" aria-hidden="true"></i><p>æ›´æ–°äºï¼š2020å¹´4æœˆ13æ—¥</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/C-C/" rel="nofollow"><i class="fas fa-hashtag" aria-hidden="true"></i><p>C/C++</p></a></div><div class="new-meta-item share -mob-share-list"><div class="-mob-share-list share-body"><a class="-mob-share-qq" rel="external nofollow noopener noreferrer noopener" href="http://connect.qq.com/widget/shareqq/index.html?url=https://www.longlongqin.top/archives/2faa8a4b.html&title=C&C++/LearnCpp-chapter6 - é¾™é¾™â€˜S BLOG&summary=LearnCpp chapter6https://www.learncpp.com" target="_blank"><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qq.png"> </a><a class="-mob-share-qzone" rel="external nofollow noopener noreferrer noopener" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://www.longlongqin.top/archives/2faa8a4b.html&title=C&C++/LearnCpp-chapter6 - é¾™é¾™â€˜S BLOG&summary=LearnCpp chapter6https://www.learncpp.com" target="_blank"><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qzone.png"> </a><a class="-mob-share-weibo" rel="external nofollow noopener noreferrer noopener" href="http://service.weibo.com/share/share.php?url=https://www.longlongqin.top/archives/2faa8a4b.html&title=C&C++/LearnCpp-chapter6 - é¾™é¾™â€˜S BLOG&summary=LearnCpp chapter6https://www.learncpp.com" target="_blank"><img src="https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/image/loading.gif" data-original="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/weibo.png"></a></div></div></div></section><div class="prev-next"><a class="prev" href="/archives/7a585be8.html"><p class="title"><i class="fas fa-chevron-left" aria-hidden="true"></i>é¸Ÿå“¥ç§æˆ¿èœlinux</p><p class="content">é¸Ÿå“¥ç§æˆ¿èœhttp://linux.vbird.org/linux_basic/5ï¸âƒ£Linuxçš„æ¡£æ¡ˆæƒé™ä¸ç›®å½•é…ç½®å…ƒä»¶å†…å®¹å ä»£ç‰©ä»¶rwxæ¡£æ¡ˆè¯¦ç»†èµ„æ–™dataæ–‡ä»¶èµ„æ–™å¤¹è¯»åˆ°æ–‡ä»¶å†…å®¹ä¿®æ”¹æ–‡ä»¶å†…å®¹æ‰§...</p></a><a class="next" href="/archives/9f0a1d82.html"><p class="title">è½¬è½½ä»–äººçš„æ–¹æ³•<i class="fas fa-chevron-right" aria-hidden="true"></i></p><p class="content">WSL ä½¿ç”¨æŒ‡å—ï¼šhttps://zhuanlan.zhihu.com/p/36482795</p></a></div></section></article><article class="post white-box comments shadow"><section class="article typo"><p ct><i class="fas fa-comments"></i> è¯„è®º</p><section id="comments"><div id="valine_container" class="valine_thread"><i class="fas fa-spinner fa-spin fa-fw"></i></div></section></section></article><script>window.subData={title:"C&C++/LearnCpp-chapter6",tools:!0}</script></div><aside class="l_side"><section class="widget toc-wrapper shadow desktop mobile"><header><i class="fas fa-list fa-fw" aria-hidden="true"></i><span class="name">æœ¬æ–‡ç›®å½•</span></header><div class="content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-ç”¨æˆ·è‡ªå®šä¹‰namespace"><span class="toc-text">6.2 ç”¨æˆ·è‡ªå®šä¹‰namespace</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-å±€éƒ¨å˜é‡"><span class="toc-text">6.3 å±€éƒ¨å˜é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å±€éƒ¨å˜é‡çš„å—èŒƒå›´"><span class="toc-text">å±€éƒ¨å˜é‡çš„å—èŒƒå›´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åŒä¸€èŒƒå›´å†…çš„å˜é‡åä¸ç›¸åŒ"><span class="toc-text">åŒä¸€èŒƒå›´å†…çš„å˜é‡åä¸ç›¸åŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å±€éƒ¨å˜é‡çš„è‡ªåŠ¨å­˜å‚¨æœŸ"><span class="toc-text">å±€éƒ¨å˜é‡çš„è‡ªåŠ¨å­˜å‚¨æœŸ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åµŒå¥—å¿«ä¸­çš„å±€éƒ¨å˜é‡"><span class="toc-text">åµŒå¥—å¿«ä¸­çš„å±€éƒ¨å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å±€éƒ¨å˜é‡çš„æ— è¿æ¥"><span class="toc-text">å±€éƒ¨å˜é‡çš„æ— è¿æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å˜é‡å®šä¹‰çš„èŒƒå›´"><span class="toc-text">å˜é‡å®šä¹‰çš„èŒƒå›´</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-å…¨å±€å˜é‡"><span class="toc-text">6.4 å…¨å±€å˜é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¨å±€å˜é‡çš„å£°æ˜"><span class="toc-text">å…¨å±€å˜é‡çš„å£°æ˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¨å±€å˜é‡çš„file-scope-amp-é™æ€æŒç»­æ—¶é—´"><span class="toc-text">å…¨å±€å˜é‡çš„file scope&amp;é™æ€æŒç»­æ—¶é—´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¸¸é‡å±€éƒ¨å˜é‡"><span class="toc-text">å¸¸é‡å±€éƒ¨å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å°ç»“"><span class="toc-text">å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-å˜é‡è¢«éšè—"><span class="toc-text">6.5 å˜é‡è¢«éšè—</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å±€éƒ¨å˜é‡è¢«éšè—"><span class="toc-text">å±€éƒ¨å˜é‡è¢«éšè—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¨å±€å˜é‡è¢«éšè—"><span class="toc-text">å…¨å±€å˜é‡è¢«éšè—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#é¿å…å˜é‡è¢«éšè—"><span class="toc-text">é¿å…å˜é‡è¢«éšè—</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-å†…éƒ¨è¿æ¥"><span class="toc-text">6.6 å†…éƒ¨è¿æ¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¨å±€å˜é‡å†…éƒ¨è¿æ¥"><span class="toc-text">å…¨å±€å˜é‡å†…éƒ¨è¿æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¸€ä¸ªå®šä¹‰è§„åˆ™å’Œå†…éƒ¨è¿æ¥"><span class="toc-text">ä¸€ä¸ªå®šä¹‰è§„åˆ™å’Œå†…éƒ¨è¿æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å‡½æ•°å†…éƒ¨è¿æ¥"><span class="toc-text">å‡½æ•°å†…éƒ¨è¿æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å°ç»“-1"><span class="toc-text">å°ç»“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-7-å¤–éƒ¨è¿æ¥"><span class="toc-text">6.7 å¤–éƒ¨è¿æ¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å‡½æ•°é»˜è®¤æ˜¯å¤–éƒ¨é“¾æ¥"><span class="toc-text">å‡½æ•°é»˜è®¤æ˜¯å¤–éƒ¨é“¾æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¨å±€å˜é‡å¤–éƒ¨è¿æ¥"><span class="toc-text">å…¨å±€å˜é‡å¤–éƒ¨è¿æ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#externæå‰å£°æ˜å˜é‡"><span class="toc-text">externæå‰å£°æ˜å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å‡½æ•°æå‰å£°æ˜ä¸ç”¨extern"><span class="toc-text">å‡½æ•°æå‰å£°æ˜ä¸ç”¨extern</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fileèŒƒå›´VS-globalèŒƒå›´"><span class="toc-text">fileèŒƒå›´VS.globalèŒƒå›´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¨å±€å˜é‡åˆå§‹åŒ–é¡ºåºé—®é¢˜"><span class="toc-text">å…¨å±€å˜é‡åˆå§‹åŒ–é¡ºåºé—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-8-å…¨å±€å¸¸é‡-amp-å†…è”å˜é‡"><span class="toc-text">6.8 å…¨å±€å¸¸é‡&amp;å†…è”å˜é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¨å±€å¸¸é‡ä½œä¸ºå†…éƒ¨å˜é‡"><span class="toc-text">å…¨å±€å¸¸é‡ä½œä¸ºå†…éƒ¨å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¨å±€å¸¸é‡ä½œä¸ºå¤–éƒ¨å˜é‡"><span class="toc-text">å…¨å±€å¸¸é‡ä½œä¸ºå¤–éƒ¨å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¨å±€å¸¸é‡ä½œä¸ºå†…è”å˜é‡"><span class="toc-text">å…¨å±€å¸¸é‡ä½œä¸ºå†…è”å˜é‡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-9-éå¸¸é‡çš„å…¨å±€å˜é‡evil"><span class="toc-text">6.9 éå¸¸é‡çš„å…¨å±€å˜é‡evil</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¿æŠ¤ä½ çš„å…¨å±€å˜é‡"><span class="toc-text">ä¿æŠ¤ä½ çš„å…¨å±€å˜é‡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-10-é™æ€å±€éƒ¨å˜é‡"><span class="toc-text">6.10 é™æ€å±€éƒ¨å˜é‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å…¨å±€ã€å±€éƒ¨å˜é‡ä½¿ç”¨static"><span class="toc-text">å…¨å±€ã€å±€éƒ¨å˜é‡ä½¿ç”¨static</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-11-æ€»ç»“scope-duration-linkage"><span class="toc-text">6.11 æ€»ç»“scope&#x2F;duration&#x2F;linkage</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#æ€»ç»“scope"><span class="toc-text">æ€»ç»“scope</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ€»ç»“duration"><span class="toc-text">æ€»ç»“duration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ€»ç»“linkage"><span class="toc-text">æ€»ç»“linkage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å˜é‡çš„-scope-duratio-linkage"><span class="toc-text">å˜é‡çš„ scope&#x2F;duratio &#x2F;linkage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ€»ç»“æå‰å£°æ˜"><span class="toc-text">æ€»ç»“æå‰å£°æ˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä»€ä¹ˆæ˜¯å­˜å‚¨ç±»è¯´æ˜ç¬¦"><span class="toc-text">ä»€ä¹ˆæ˜¯å­˜å‚¨ç±»è¯´æ˜ç¬¦?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-12-using-è¯­å¥"><span class="toc-text">6.12 using è¯­å¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#usingçš„å£°æ˜"><span class="toc-text">usingçš„å£°æ˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#using-æŒ‡ä»¤"><span class="toc-text">using æŒ‡ä»¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å–æ¶ˆoræ›¿æ¢-usingè¯­å¥"><span class="toc-text">å–æ¶ˆoræ›¿æ¢ usingè¯­å¥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-13-typedefä¸ç±»å‹åˆ«å"><span class="toc-text">6.13 typedefä¸ç±»å‹åˆ«å</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ç±»å‹åˆ«å"><span class="toc-text">ç±»å‹åˆ«å</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¸ºæ˜“è¯»æ€§ä½¿ç”¨ç±»å‹åˆ«å"><span class="toc-text">ä¸ºæ˜“è¯»æ€§ä½¿ç”¨ç±»å‹åˆ«å</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ä½¿ç”¨ç±»å‹åˆ«åç¼–å†™ä¸å¹³å°æ— å…³çš„ä»£ç "><span class="toc-text">ä½¿ç”¨ç±»å‹åˆ«åç¼–å†™ä¸å¹³å°æ— å…³çš„ä»£ç </span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-14-å…³é”®å­—auto"><span class="toc-text">6.14 å…³é”®å­—auto</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#åˆå§‹åŒ–å˜é‡çš„ç±»å‹æ¨æ–­"><span class="toc-text">åˆå§‹åŒ–å˜é‡çš„ç±»å‹æ¨æ–­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åœ¨C-14ä¸­å‡½æ•°çš„ç±»å‹æ¨æ–­"><span class="toc-text">åœ¨C++14ä¸­å‡½æ•°çš„ç±»å‹æ¨æ–­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åç½®è¿”å›ç±»å‹è¯­æ³•"><span class="toc-text">åç½®è¿”å›ç±»å‹è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å‡½æ•°å½¢å‚çš„ç±»å‹æ¨æ–­"><span class="toc-text">å‡½æ•°å½¢å‚çš„ç±»å‹æ¨æ–­</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-15-å¼ºåˆ¶ç±»å‹è½¬æ¢-éšå¼"><span class="toc-text">6.15 å¼ºåˆ¶ç±»å‹è½¬æ¢(éšå¼)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#éšå¼ç±»å‹è½¬æ¢"><span class="toc-text">éšå¼ç±»å‹è½¬æ¢</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼ºåˆ¶ç±»å‹è½¬æ¢-æ˜¾å¼-amp-static-cast"><span class="toc-text">å¼ºåˆ¶ç±»å‹è½¬æ¢(æ˜¾å¼) &amp; static_cast</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#C-style-casts"><span class="toc-text">C-style casts</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-17-æœªå‘½å-å†…è”-å‘½åç©ºé—´"><span class="toc-text">6.17 æœªå‘½å&#x2F;å†…è” å‘½åç©ºé—´</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#æœªå‘½å-åŒ¿å-å‘½åç©ºé—´"><span class="toc-text">æœªå‘½å(åŒ¿å) å‘½åç©ºé—´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å†…è”-å‘½åç©ºé—´"><span class="toc-text">å†…è” å‘½åç©ºé—´</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-x-Chapter-6-summary-and-quiz"><span class="toc-text">6.x Chapter 6 summary and quiz</span></a></li></ol></div></section></aside><footer class="clearfix white"><br><br><div class="aplayer-container"><meting-js theme="#1BCDFC" autoplay volume="0.6" loop order="list" fixed="false" list-max-height="340px" server="netease" type="song" id="186453" list-folded="true"></meting-js></div><br><div class="social-wrapper"><a href="/atom.xml" class="social fas fa-rss flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="mailto:1198216723@qq.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://github.com/longlongqin" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://music.163.com/#/user/home?id=285545421" class="social fas fa-headphones-alt flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a></div><red>&copy; 2020-2020 longlongqin ğŸ˜Š| powered by HEXO | theme volantis</red><br><yellow><span id="timeDate">è½½å…¥å¤©æ•°...</span><span id="times">è½½å…¥æ—¶åˆ†ç§’...</span><script>var now=new Date;function createtime(){var n=new Date("03/01/2020 18:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="å°ç«™å·²è¿è¡Œ "+dnum+" å¤© ",document.getElementById("times").innerHTML=hnum+" å°æ—¶ "+mnum+" åˆ† "+snum+" ç§’ "}setInterval("createtime()",250)</script></yellow><br><green><i class="fas fa-chart-area"></i> <span class="post-count">å­—æ•°ç»Ÿè®¡ï¼š132.4k</span></green>|<script type="text/javascript" src="https://v1.cnzz.com/z_stat.php?id=1278663994&web_id=1278663994"></script><br><cyan>åšå®¢å†…å®¹éµå¾ª</cyan><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank"><cyan>ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0) åè®®</cyan></a></footer><script>setLoadingBarProgress(80)</script><script>setLoadingBarProgress(60)</script></div><a class="s-top fas fa-arrow-up fa-fw" href="javascript:void(0)"></a></div><script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script><script>var SEARCH_SERVICE="hexo",ROOT="/";ROOT.endsWith("/")||(ROOT+="/")</script><script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script><script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script><script type="text/javascript">$(function(){Waves.attach(".flat-btn",["waves-button"]),Waves.attach(".float-btn",["waves-button","waves-float"]),Waves.attach(".float-btn-light",["waves-button","waves-float","waves-light"]),Waves.attach(".flat-box",["waves-block"]),Waves.attach(".float-box",["waves-block","waves-float"]),Waves.attach(".waves-image"),Waves.init()})</script><script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script><script type="text/javascript">$(function(){var n=["https://cdn.jsdelivr.net/gh/longlongqin/CDN-for-HEXO_BLOG/background/4.jpg"];!function(n){for(var o=n.length;o--;){var r=Math.floor(Math.random()*o),t=n[r];n[r]=n[o],n[o]=t}}(n),$(".cover").backstretch(n,{duration:"20000",fade:"1500"})})</script><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js" async></script><script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js" async></script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.0/js/valine.js"></script><script>var GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter(function(i){return-1<GUEST_INFO.indexOf(i)}),notify=!1,verify=!1,valine=new Valine;valine.init({el:"#valine_container",notify:notify,verify:verify,guest_info:guest_info,appId:"TYFUId8Xuddv6nUYuVUHJbac-gzGzoHsz",appKey:"bCYkC8WKY7n8VjI7K2g8MMJ3",placeholder:"å¿«æ¥è¯„è®ºå§~",pageSize:"10",avatar:"mp",lang:"zh-cn",visitor:"false",highlight:"true"})</script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.1.4/js/app.js"></script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.1/js/search.js"></script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script><script>!function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copyed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-clipboard-check');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPYED';
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-exclamation-triangle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
      });
    }
    initCopyCode();
  }(window, document);</script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script>let LAZY_LOAD_IMAGE = "[object Object]";
  $(".article-entry").find("fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* å›¾ç‰‡é‡‡ç”¨æ‡’åŠ è½½å¤„ç†æ—¶,
       * ä¸€èˆ¬å›¾ç‰‡æ ‡ç­¾å†…ä¼šæœ‰ä¸ªå±æ€§åæ¥å­˜æ”¾å›¾ç‰‡çš„çœŸå®åœ°å€ï¼Œæ¯”å¦‚ data-original,
       * é‚£ä¹ˆæ­¤å¤„å°†åŸæœ¬çš„å±æ€§åsrcæ›¿æ¢ä¸ºå¯¹åº”å±æ€§ådata-original,
       * ä¿®æ”¹å¦‚ä¸‹
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });</script><script>setLoadingBarProgress(100)</script><script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body></html>